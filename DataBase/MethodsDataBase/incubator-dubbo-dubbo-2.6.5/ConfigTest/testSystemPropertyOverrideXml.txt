@SuppressWarnings("unchecked") @Test public void testSystemPropertyOverrideXml() throws Exception {
  System.setProperty("dubbo.application.name","sysover");
  System.setProperty("dubbo.application.owner","sysowner");
  System.setProperty("dubbo.registry.address","N/A");
  System.setProperty("dubbo.protocol.name","dubbo");
  System.setProperty("dubbo.protocol.port","20819");
  System.setProperty("dubbo.service.register","false");
  ClassPathXmlApplicationContext providerContext=new ClassPathXmlApplicationContext(ConfigTest.class.getPackage().getName().replace('.','/') + "/system-properties-override.xml");
  providerContext.start();
  try {
    ServiceConfig<DemoService> service=(ServiceConfig<DemoService>)providerContext.getBean("demoServiceConfig");
    URL url=service.toUrls().get(0);
    assertEquals("sysover",url.getParameter("application"));
    assertEquals("sysowner",url.getParameter("owner"));
    assertEquals("dubbo",url.getProtocol());
    assertEquals(20819,url.getPort());
    String register=url.getParameter("register");
    assertTrue(register != null && !"".equals(register));
    assertEquals(false,Boolean.valueOf(register));
  }
  finally {
    System.setProperty("dubbo.application.name","");
    System.setProperty("dubbo.application.owner","");
    System.setProperty("dubbo.registry.address","");
    System.setProperty("dubbo.protocol.name","");
    System.setProperty("dubbo.protocol.port","");
    System.setProperty("dubbo.service.register","");
    providerContext.stop();
    providerContext.close();
  }
}
