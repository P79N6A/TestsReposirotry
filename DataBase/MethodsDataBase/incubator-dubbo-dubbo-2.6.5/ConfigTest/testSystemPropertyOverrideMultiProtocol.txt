@Test public void testSystemPropertyOverrideMultiProtocol() throws Exception {
  System.setProperty("dubbo.protocol.dubbo.port","20814");
  System.setProperty("dubbo.protocol.rmi.port","10914");
  ClassPathXmlApplicationContext providerContext=new ClassPathXmlApplicationContext(ConfigTest.class.getPackage().getName().replace('.','/') + "/override-multi-protocol.xml");
  providerContext.start();
  try {
    ProtocolConfig dubbo=(ProtocolConfig)providerContext.getBean("dubbo");
    assertEquals(20814,dubbo.getPort().intValue());
    ProtocolConfig rmi=(ProtocolConfig)providerContext.getBean("rmi");
    assertEquals(10914,rmi.getPort().intValue());
  }
  finally {
    System.setProperty("dubbo.protocol.dubbo.port","");
    System.setProperty("dubbo.protocol.rmi.port","");
    providerContext.stop();
    providerContext.close();
  }
}
