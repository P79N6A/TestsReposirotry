@Test public void testSystemPropertyOverrideReferenceConfig() throws Exception {
  System.setProperty("dubbo.reference.retries","5");
  try {
    ServiceConfig<DemoService> service=new ServiceConfig<DemoService>();
    service.setInterface(DemoService.class);
    service.setRef(new DemoServiceImpl());
    service.setRegistry(new RegistryConfig(RegistryConfig.NO_AVAILABLE));
    ProtocolConfig protocolConfig=new ProtocolConfig("injvm");
    service.setProtocol(protocolConfig);
    service.export();
    ReferenceConfig<DemoService> reference=new ReferenceConfig<DemoService>();
    reference.setInterface(DemoService.class);
    reference.setInjvm(true);
    reference.setRetries(2);
    reference.get();
    assertEquals(Integer.valueOf(5),reference.getRetries());
  }
  finally {
    System.setProperty("dubbo.reference.retries","");
  }
}
