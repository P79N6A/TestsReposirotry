@Test public void testAnnotation(){
  SimpleRegistryService registryService=new SimpleRegistryService();
  Exporter<RegistryService> exporter=SimpleRegistryExporter.export(4548,registryService);
  try {
    ClassPathXmlApplicationContext providerContext=new ClassPathXmlApplicationContext(ConfigTest.class.getPackage().getName().replace('.','/') + "/annotation-provider.xml");
    providerContext.start();
    try {
      ClassPathXmlApplicationContext consumerContext=new ClassPathXmlApplicationContext(ConfigTest.class.getPackage().getName().replace('.','/') + "/annotation-consumer.xml");
      consumerContext.start();
      try {
        AnnotationAction annotationAction=(AnnotationAction)consumerContext.getBean("annotationAction");
        String hello=annotationAction.doSayName("hello");
        assertEquals("annotation:hello",hello);
      }
  finally {
        consumerContext.stop();
        consumerContext.close();
      }
    }
  finally {
      providerContext.stop();
      providerContext.close();
    }
  }
  finally {
    exporter.unexport();
  }
}
