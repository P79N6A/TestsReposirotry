@Test public void testSwitchSurfaceOnEndedState() throws Exception {
  ActionSchedule.Builder scheduleBuilder=new ActionSchedule.Builder("testSwitchSurfaceOnEndedState").waitForPlaybackState(Player.STATE_ENDED);
  ActionSchedule waitForEndedAndSwitchSchedule=addSurfaceSwitch(scheduleBuilder).build();
  new ExoPlayerTestRunner.Builder().setTimeline(Timeline.EMPTY).setActionSchedule(waitForEndedAndSwitchSchedule).build(context).start().blockUntilActionScheduleFinished(TIMEOUT_MS).blockUntilEnded(TIMEOUT_MS);
}
