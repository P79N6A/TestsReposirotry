@Test public void testInternalDiscontinuityAtNewPosition() throws Exception {
  FakeTimeline timeline=new FakeTimeline(1);
  FakeMediaSource mediaSource=new FakeMediaSource(timeline,null,Builder.VIDEO_FORMAT){
    @Override protected FakeMediaPeriod createFakeMediaPeriod(    MediaPeriodId id,    TrackGroupArray trackGroupArray,    Allocator allocator,    EventDispatcher eventDispatcher,    @Nullable TransferListener transferListener){
      FakeMediaPeriod mediaPeriod=new FakeMediaPeriod(trackGroupArray,eventDispatcher);
      mediaPeriod.setDiscontinuityPositionUs(10);
      return mediaPeriod;
    }
  }
;
  ExoPlayerTestRunner testRunner=new ExoPlayerTestRunner.Builder().setMediaSource(mediaSource).build(context).start().blockUntilEnded(TIMEOUT_MS);
  testRunner.assertPositionDiscontinuityReasonsEqual(Player.DISCONTINUITY_REASON_INTERNAL);
}
