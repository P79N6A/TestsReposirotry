@Test public void testStopDuringPreparationOverwritesPreparation() throws Exception {
  Timeline timeline=new FakeTimeline(1);
  ActionSchedule actionSchedule=new ActionSchedule.Builder("testStopOverwritesPrepare").waitForPlaybackState(Player.STATE_BUFFERING).seek(0).stop(true).waitForSeekProcessed().build();
  ExoPlayerTestRunner testRunner=new ExoPlayerTestRunner.Builder().setTimeline(timeline).setActionSchedule(actionSchedule).build(context).start().blockUntilActionScheduleFinished(TIMEOUT_MS).blockUntilEnded(TIMEOUT_MS);
  testRunner.assertTimelinesEqual(Timeline.EMPTY);
  testRunner.assertTimelineChangeReasonsEqual(Player.TIMELINE_CHANGE_REASON_PREPARED);
  testRunner.assertPositionDiscontinuityReasonsEqual(Player.DISCONTINUITY_REASON_SEEK);
}
