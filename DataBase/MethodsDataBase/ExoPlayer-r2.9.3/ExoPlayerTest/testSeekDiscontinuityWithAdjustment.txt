@Test public void testSeekDiscontinuityWithAdjustment() throws Exception {
  FakeTimeline timeline=new FakeTimeline(1);
  FakeMediaSource mediaSource=new FakeMediaSource(timeline,null,Builder.VIDEO_FORMAT){
    @Override protected FakeMediaPeriod createFakeMediaPeriod(    MediaPeriodId id,    TrackGroupArray trackGroupArray,    Allocator allocator,    EventDispatcher eventDispatcher,    @Nullable TransferListener transferListener){
      FakeMediaPeriod mediaPeriod=new FakeMediaPeriod(trackGroupArray,eventDispatcher);
      mediaPeriod.setSeekToUsOffset(10);
      return mediaPeriod;
    }
  }
;
  ActionSchedule actionSchedule=new ActionSchedule.Builder("testSeekDiscontinuityAdjust").pause().waitForPlaybackState(Player.STATE_READY).seek(10).play().build();
  ExoPlayerTestRunner testRunner=new ExoPlayerTestRunner.Builder().setMediaSource(mediaSource).setActionSchedule(actionSchedule).build(context).start().blockUntilEnded(TIMEOUT_MS);
  testRunner.assertPositionDiscontinuityReasonsEqual(Player.DISCONTINUITY_REASON_SEEK,Player.DISCONTINUITY_REASON_SEEK_ADJUSTMENT);
}
