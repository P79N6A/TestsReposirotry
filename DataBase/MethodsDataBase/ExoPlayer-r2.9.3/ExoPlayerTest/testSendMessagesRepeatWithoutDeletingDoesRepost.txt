@Test public void testSendMessagesRepeatWithoutDeletingDoesRepost() throws Exception {
  Timeline timeline=new FakeTimeline(1);
  PositionGrabbingMessageTarget target=new PositionGrabbingMessageTarget();
  ActionSchedule actionSchedule=new ActionSchedule.Builder("testSendMessages").pause().waitForPlaybackState(Player.STATE_BUFFERING).sendMessage(target,0,50,false).setRepeatMode(Player.REPEAT_MODE_ALL).playUntilPosition(0,1).playUntilStartOfWindow(0).setRepeatMode(Player.REPEAT_MODE_OFF).play().build();
  new Builder().setTimeline(timeline).setActionSchedule(actionSchedule).build(context).start().blockUntilEnded(TIMEOUT_MS);
  assertThat(target.messageCount).isEqualTo(2);
  assertThat(target.positionMs).isAtLeast(50L);
}
