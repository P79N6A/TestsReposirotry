@Test public void testSetAndSwitchSurface() throws Exception {
  final List<Integer> rendererMessages=new ArrayList<>();
  Renderer videoRenderer=new FakeRenderer(Builder.VIDEO_FORMAT){
    @Override public void handleMessage(    int what,    @Nullable Object object) throws ExoPlaybackException {
      super.handleMessage(what,object);
      rendererMessages.add(what);
    }
  }
;
  ActionSchedule actionSchedule=addSurfaceSwitch(new ActionSchedule.Builder("testSetAndSwitchSurface")).build();
  new ExoPlayerTestRunner.Builder().setRenderers(videoRenderer).setActionSchedule(actionSchedule).build(context).start().blockUntilActionScheduleFinished(TIMEOUT_MS).blockUntilEnded(TIMEOUT_MS);
  assertThat(Collections.frequency(rendererMessages,C.MSG_SET_SURFACE)).isEqualTo(2);
}
