@Test public void testStopWithResetDoesResetPosition() throws Exception {
  Timeline timeline=new FakeTimeline(1);
  final long[] positionHolder=new long[1];
  ActionSchedule actionSchedule=new ActionSchedule.Builder("testStopWithResetDoesReset").pause().waitForPlaybackState(Player.STATE_READY).playUntilPosition(0,50).stop(true).executeRunnable(new PlayerRunnable(){
    @Override public void run(    SimpleExoPlayer player){
      positionHolder[0]=player.getCurrentPosition();
    }
  }
).build();
  ExoPlayerTestRunner testRunner=new ExoPlayerTestRunner.Builder().setTimeline(timeline).setActionSchedule(actionSchedule).build(context).start().blockUntilActionScheduleFinished(TIMEOUT_MS).blockUntilEnded(TIMEOUT_MS);
  testRunner.assertTimelinesEqual(timeline,Timeline.EMPTY);
  testRunner.assertTimelineChangeReasonsEqual(Player.TIMELINE_CHANGE_REASON_PREPARED,Player.TIMELINE_CHANGE_REASON_RESET);
  testRunner.assertNoPositionDiscontinuities();
  assertThat(positionHolder[0]).isEqualTo(0);
}
