@Test public void testPostDelayed(){
  HandlerThread handlerThread=new HandlerThread("FakeClockTest thread");
  handlerThread.start();
  FakeClock fakeClock=new FakeClock(0);
  HandlerWrapper handler=fakeClock.createHandler(handlerThread.getLooper(),null);
  TestRunnable[] testRunnables={new TestRunnable(),new TestRunnable(),new TestRunnable(),new TestRunnable(),new TestRunnable()};
  handler.postDelayed(testRunnables[0],0);
  handler.postDelayed(testRunnables[1],100);
  handler.postDelayed(testRunnables[2],200);
  waitForHandler(handler);
  assertTestRunnableStates(new boolean[]{true,false,false,false,false},testRunnables);
  fakeClock.advanceTime(150);
  handler.postDelayed(testRunnables[3],50);
  handler.postDelayed(testRunnables[4],100);
  waitForHandler(handler);
  assertTestRunnableStates(new boolean[]{true,true,false,false,false},testRunnables);
  fakeClock.advanceTime(50);
  waitForHandler(handler);
  assertTestRunnableStates(new boolean[]{true,true,true,true,false},testRunnables);
  fakeClock.advanceTime(1000);
  waitForHandler(handler);
  assertTestRunnableStates(new boolean[]{true,true,true,true,true},testRunnables);
}
