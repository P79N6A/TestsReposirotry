@Test public void testWidevineOfflineLicenseExpiresOnPauseV22() throws Exception {
  if (Util.SDK_INT < 22) {
    return;
  }
  downloadLicense();
  Pair<Long,Long> licenseDurationRemainingSec=offlineLicenseHelper.getLicenseDurationRemainingSec(offlineLicenseKeySetId);
  long licenseDuration=licenseDurationRemainingSec.first;
  assertWithMessage("License duration should be less than 30 sec. " + "Server settings might have changed.").that(licenseDuration < 30).isTrue();
  ActionSchedule schedule=new ActionSchedule.Builder(TAG).waitForPlaybackState(Player.STATE_READY).delay(3000).pause().delay(licenseDuration * 1000 + 2000).play().build();
  testRunner.setActionSchedule(schedule).run();
}
