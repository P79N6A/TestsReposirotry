@Test public void testSegmentTypes(){
  byte[] testData=TestUtil.buildTestData(3);
  Runnable runnable=() -> {
  }
;
  IOException exception=new IOException();
  FakeDataSet fakeDataSet=new FakeDataSet().newDefaultData().appendReadData(testData).appendReadData(testData).appendReadData(50).appendReadAction(runnable).appendReadError(exception).endData();
  List<Segment> segments=fakeDataSet.getData((Uri)null).getSegments();
  assertThat(segments.size()).isEqualTo(5);
  assertSegment(segments.get(0),testData,3,0,null,null);
  assertSegment(segments.get(1),testData,3,3,null,null);
  assertSegment(segments.get(2),null,50,6,null,null);
  assertSegment(segments.get(3),null,0,56,runnable,null);
  assertSegment(segments.get(4),null,0,56,null,exception);
  byte[] allData=new byte[6];
  System.arraycopy(testData,0,allData,0,3);
  System.arraycopy(testData,0,allData,3,3);
  assertThat(fakeDataSet.getData((Uri)null).getData()).isEqualTo(allData);
}
