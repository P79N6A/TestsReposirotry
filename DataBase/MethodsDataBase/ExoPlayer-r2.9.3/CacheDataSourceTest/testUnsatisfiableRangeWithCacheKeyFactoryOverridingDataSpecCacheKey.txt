@Test public void testUnsatisfiableRangeWithCacheKeyFactoryOverridingDataSpecCacheKey() throws Exception {
  fixedCacheKey=CacheUtil.generateKey(testDataUri);
  expectedCacheKey=cacheKeyFactory.buildCacheKey(new DataSpec(testDataUri,TEST_DATA.length,5,fixedCacheKey));
  assertCacheAndRead(false,true,cacheKeyFactory);
  CacheDataSource cacheDataSource=createCacheDataSource(true,true,cacheKeyFactory);
  assertReadDataContentLength(cacheDataSource,true,true);
  try {
    cacheDataSource=createCacheDataSource(false,false,cacheKeyFactory);
    cacheDataSource.open(new DataSpec(testDataUri,TEST_DATA.length,5,fixedCacheKey));
    fail();
  }
 catch (  IOException e) {
  }
}
