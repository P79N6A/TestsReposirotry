/** 
 * Tests that track selector will prefer tracks that are within renderer's capabilities over track that exceed renderer's capabilities.
 */
@Test public void testSelectTracksPreferTrackWithinCapabilities() throws Exception {
  Format supportedFormat=buildAudioFormat("supportedFormat");
  Format exceededFormat=buildAudioFormat("exceededFormat");
  Map<String,Integer> mappedCapabilities=new HashMap<>();
  mappedCapabilities.put(supportedFormat.id,FORMAT_HANDLED);
  mappedCapabilities.put(exceededFormat.id,FORMAT_EXCEEDS_CAPABILITIES);
  RendererCapabilities mappedAudioRendererCapabilities=new FakeMappedRendererCapabilities(C.TRACK_TYPE_AUDIO,mappedCapabilities);
  TrackSelectorResult result=trackSelector.selectTracks(new RendererCapabilities[]{mappedAudioRendererCapabilities},singleTrackGroup(exceededFormat,supportedFormat));
  assertThat(result.selections.get(0).getSelectedFormat()).isEqualTo(supportedFormat);
}
