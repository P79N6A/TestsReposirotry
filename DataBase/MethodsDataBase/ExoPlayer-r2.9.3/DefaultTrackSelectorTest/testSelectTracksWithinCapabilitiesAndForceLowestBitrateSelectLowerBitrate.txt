/** 
 * Tests that track selector will select audio tracks with lower bitrate when  {@link Parameters}indicate lowest bitrate preference, even when tracks are within capabilities.
 */
@Test public void testSelectTracksWithinCapabilitiesAndForceLowestBitrateSelectLowerBitrate() throws Exception {
  trackSelector.setParameters(new ParametersBuilder().setForceLowestBitrate(true).build());
  Format lowerBitrateFormat=Format.createAudioSampleFormat("audioFormat",MimeTypes.AUDIO_AAC,null,15000,Format.NO_VALUE,2,44100,null,null,0,null);
  Format higherBitrateFormat=Format.createAudioSampleFormat("audioFormat",MimeTypes.AUDIO_AAC,null,30000,Format.NO_VALUE,2,44100,null,null,0,null);
  TrackSelectorResult result=trackSelector.selectTracks(new RendererCapabilities[]{ALL_AUDIO_FORMAT_SUPPORTED_RENDERER_CAPABILITIES},singleTrackGroup(lowerBitrateFormat,higherBitrateFormat));
  assertThat(result.selections.get(0).getSelectedFormat()).isEqualTo(lowerBitrateFormat);
}
