@Test public void testSelectTracksWithMultipleVideoTracksOverrideReturnsAdaptiveTrackSelection() throws Exception {
  TrackSelection adaptiveTrackSelection=mock(TrackSelection.class);
  TrackSelection.Factory adaptiveTrackSelectionFactory=mock(TrackSelection.Factory.class);
  when(adaptiveTrackSelectionFactory.createTrackSelection(any(),any(),anyVararg())).thenReturn(adaptiveTrackSelection);
  trackSelector=new DefaultTrackSelector(adaptiveTrackSelectionFactory);
  trackSelector.init(invalidationListener,bandwidthMeter);
  TrackGroupArray trackGroupArray=singleTrackGroup(VIDEO_FORMAT,VIDEO_FORMAT,VIDEO_FORMAT);
  trackSelector.setParameters(trackSelector.buildUponParameters().setSelectionOverride(0,trackGroupArray,new SelectionOverride(0,1,2)));
  TrackSelectorResult result=trackSelector.selectTracks(new RendererCapabilities[]{VIDEO_CAPABILITIES},trackGroupArray);
  assertThat(result.length).isEqualTo(1);
  assertThat(result.selections.get(0)).isEqualTo(adaptiveTrackSelection);
  verify(adaptiveTrackSelectionFactory).createTrackSelection(trackGroupArray.get(0),bandwidthMeter,1,2);
}
