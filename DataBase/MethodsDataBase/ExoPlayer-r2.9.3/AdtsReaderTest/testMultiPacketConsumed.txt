@Test public void testMultiPacketConsumed() throws Exception {
  for (int i=0; i < 10; i++) {
    data.setPosition(0);
    feed();
    long timeUs=ADTS_SAMPLE_DURATION * i;
    int j=i * 2;
    assertSampleCounts(j + 2,i + 1);
    id3Output.assertSample(j,ID3_DATA_1,timeUs,C.BUFFER_FLAG_KEY_FRAME,null);
    id3Output.assertSample(j + 1,ID3_DATA_2,timeUs,C.BUFFER_FLAG_KEY_FRAME,null);
    adtsOutput.assertSample(i,ADTS_CONTENT,timeUs,C.BUFFER_FLAG_KEY_FRAME,null);
  }
}
