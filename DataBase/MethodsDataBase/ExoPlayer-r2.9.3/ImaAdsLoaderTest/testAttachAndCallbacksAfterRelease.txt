@Test public void testAttachAndCallbacksAfterRelease(){
  setupPlayback(CONTENT_TIMELINE,PREROLL_ADS_DURATIONS_US,PREROLL_CUE_POINTS_SECONDS);
  imaAdsLoader.release();
  imaAdsLoader.attachPlayer(fakeExoPlayer,adsLoaderListener,adUiViewGroup);
  fakeExoPlayer.setPlayingContentPosition(0);
  fakeExoPlayer.setState(Player.STATE_READY,true);
  imaAdsLoader.requestAds(adUiViewGroup);
  imaAdsLoader.onAdEvent(getAdEvent(AdEventType.LOADED,UNSKIPPABLE_AD));
  imaAdsLoader.loadAd(TEST_URI.toString());
  imaAdsLoader.onAdEvent(getAdEvent(AdEventType.CONTENT_PAUSE_REQUESTED,UNSKIPPABLE_AD));
  imaAdsLoader.playAd();
  imaAdsLoader.onAdEvent(getAdEvent(AdEventType.STARTED,UNSKIPPABLE_AD));
  imaAdsLoader.pauseAd();
  imaAdsLoader.stopAd();
  imaAdsLoader.onPlayerError(ExoPlaybackException.createForSource(new IOException()));
  imaAdsLoader.onPositionDiscontinuity(Player.DISCONTINUITY_REASON_SEEK);
  imaAdsLoader.onAdEvent(getAdEvent(AdEventType.CONTENT_RESUME_REQUESTED,null));
  imaAdsLoader.handlePrepareError(0,0,new IOException());
}
