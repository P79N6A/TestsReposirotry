@Test public void testWithComplexCssSelectors() throws IOException, SubtitleDecoderException {
  WebvttSubtitle subtitle=getSubtitleForTestAsset(WITH_CSS_COMPLEX_SELECTORS);
  Spanned text=getUniqueSpanTextAt(subtitle,0);
  assertThat(text.getSpans(30,text.length(),ForegroundColorSpan.class)).hasLength(1);
  assertThat(text.getSpans(30,text.length(),ForegroundColorSpan.class)[0].getForegroundColor()).isEqualTo(0xFFEE82EE);
  assertThat(text.getSpans(30,text.length(),TypefaceSpan.class)).hasLength(1);
  assertThat(text.getSpans(30,text.length(),TypefaceSpan.class)[0].getFamily()).isEqualTo("courier");
  text=getUniqueSpanTextAt(subtitle,2000000);
  assertThat(text.getSpans(5,text.length(),TypefaceSpan.class)).hasLength(1);
  assertThat(text.getSpans(5,text.length(),TypefaceSpan.class)[0].getFamily()).isEqualTo("courier");
  text=getUniqueSpanTextAt(subtitle,2500000);
  assertThat(text.getSpans(5,text.length(),StyleSpan.class)).hasLength(1);
  assertThat(text.getSpans(5,text.length(),StyleSpan.class)[0].getStyle()).isEqualTo(Typeface.BOLD);
  assertThat(text.getSpans(5,text.length(),TypefaceSpan.class)).hasLength(1);
  assertThat(text.getSpans(5,text.length(),TypefaceSpan.class)[0].getFamily()).isEqualTo("courier");
  text=getUniqueSpanTextAt(subtitle,4000000);
  assertThat(text.getSpans(6,22,StyleSpan.class)).hasLength(0);
  assertThat(text.getSpans(30,text.length(),StyleSpan.class)).hasLength(1);
  assertThat(text.getSpans(30,text.length(),StyleSpan.class)[0].getStyle()).isEqualTo(Typeface.BOLD);
  text=getUniqueSpanTextAt(subtitle,5000000);
  assertThat(text.getSpans(9,17,StyleSpan.class)).hasLength(0);
  assertThat(text.getSpans(19,text.length(),StyleSpan.class)).hasLength(1);
  assertThat(text.getSpans(19,text.length(),StyleSpan.class)[0].getStyle()).isEqualTo(Typeface.ITALIC);
}
