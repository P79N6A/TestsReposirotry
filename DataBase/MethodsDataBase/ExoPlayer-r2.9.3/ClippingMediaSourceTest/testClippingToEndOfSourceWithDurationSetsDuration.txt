@Test public void testClippingToEndOfSourceWithDurationSetsDuration() throws IOException {
  Timeline timeline=new SinglePeriodTimeline(TEST_PERIOD_DURATION_US,true,false);
  Timeline clippedTimeline=getClippedTimeline(timeline,TEST_CLIP_AMOUNT_US,C.TIME_END_OF_SOURCE);
  assertThat(clippedTimeline.getWindow(0,window).getDurationUs()).isEqualTo(TEST_PERIOD_DURATION_US - TEST_CLIP_AMOUNT_US);
}
