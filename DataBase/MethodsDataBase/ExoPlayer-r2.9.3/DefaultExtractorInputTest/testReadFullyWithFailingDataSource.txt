@Test public void testReadFullyWithFailingDataSource() throws Exception {
  FakeDataSource testDataSource=buildFailingDataSource();
  DefaultExtractorInput input=new DefaultExtractorInput(testDataSource,0,C.LENGTH_UNSET);
  try {
    byte[] target=new byte[TEST_DATA.length];
    input.readFully(target,0,TEST_DATA.length);
    fail();
  }
 catch (  IOException e) {
  }
  assertThat(input.getPosition()).isEqualTo(0);
}
