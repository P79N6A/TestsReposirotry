@Test public void testInheritedVariableSubstitution() throws IOException {
  Uri playlistUri=Uri.parse("https://example.com/test3.m3u8");
  String playlistString="#EXTM3U\n" + "#EXT-X-VERSION:8\n" + "#EXT-X-TARGETDURATION:5\n"+ "#EXT-X-MEDIA-SEQUENCE:10\n"+ "#EXT-X-DEFINE:IMPORT=\"imported_base\"\n"+ "#EXTINF:5.005,\n"+ "{$imported_base}1.ts\n"+ "#EXTINF:5.005,\n"+ "{$imported_base}2.ts\n"+ "#EXTINF:5.005,\n"+ "{$imported_base}3.ts\n"+ "#EXTINF:5.005,\n"+ "{$imported_base}4.ts\n";
  InputStream inputStream=new ByteArrayInputStream(Util.getUtf8Bytes(playlistString));
  HashMap<String,String> variableDefinitions=new HashMap<>();
  variableDefinitions.put("imported_base","long_path");
  HlsMasterPlaylist masterPlaylist=new HlsMasterPlaylist("",Collections.emptyList(),Collections.emptyList(),Collections.emptyList(),Collections.emptyList(),null,Collections.emptyList(),false,variableDefinitions);
  HlsMediaPlaylist playlist=(HlsMediaPlaylist)new HlsPlaylistParser(masterPlaylist).parse(playlistUri,inputStream);
  for (int i=1; i <= 4; i++) {
    assertThat(playlist.segments.get(i - 1).url).isEqualTo("long_path" + i + ".ts");
  }
}
