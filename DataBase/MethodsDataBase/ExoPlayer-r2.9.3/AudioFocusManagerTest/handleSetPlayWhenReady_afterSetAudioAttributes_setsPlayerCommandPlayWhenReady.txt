@Test public void handleSetPlayWhenReady_afterSetAudioAttributes_setsPlayerCommandPlayWhenReady(){
  AudioAttributes media=new AudioAttributes.Builder().setUsage(C.USAGE_MEDIA).build();
  Shadows.shadowOf(audioManager).setNextFocusRequestResponse(AudioManager.AUDIOFOCUS_REQUEST_GRANTED);
  assertThat(audioFocusManager.handlePrepare(false)).isEqualTo(PLAYER_COMMAND_DO_NOT_PLAY);
  assertThat(Shadows.shadowOf(audioManager).getLastAudioFocusRequest()).isNull();
  assertThat(audioFocusManager.setAudioAttributes(media,false,Player.STATE_READY)).isEqualTo(PLAYER_COMMAND_DO_NOT_PLAY);
  assertThat(Shadows.shadowOf(audioManager).getLastAudioFocusRequest()).isNull();
  assertThat(audioFocusManager.handleSetPlayWhenReady(true,Player.STATE_READY)).isEqualTo(PLAYER_COMMAND_PLAY_WHEN_READY);
}
