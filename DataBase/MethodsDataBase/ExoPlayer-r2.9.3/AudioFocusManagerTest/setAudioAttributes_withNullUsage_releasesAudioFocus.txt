@Test public void setAudioAttributes_withNullUsage_releasesAudioFocus(){
  AudioAttributes media=new AudioAttributes.Builder().setUsage(C.USAGE_MEDIA).build();
  Shadows.shadowOf(audioManager).setNextFocusRequestResponse(AudioManager.AUDIOFOCUS_REQUEST_GRANTED);
  assertThat(audioFocusManager.setAudioAttributes(media,true,Player.STATE_READY)).isEqualTo(PLAYER_COMMAND_PLAY_WHEN_READY);
  ShadowAudioManager.AudioFocusRequest request=Shadows.shadowOf(audioManager).getLastAudioFocusRequest();
  assertThat(request.durationHint).isEqualTo(AudioManager.AUDIOFOCUS_GAIN);
  assertThat(audioFocusManager.setAudioAttributes(null,true,Player.STATE_READY)).isEqualTo(PLAYER_COMMAND_PLAY_WHEN_READY);
  AudioManager.OnAudioFocusChangeListener lastRequest=Shadows.shadowOf(audioManager).getLastAbandonedAudioFocusListener();
  assertThat(lastRequest).isNotNull();
}
