@Test public void testSerializeDeserialize() throws Exception {
  byte[] metadata3={1,2,3};
  contentMetadata=createContentMetadata("metadata1 name","value","metadata2 name",12345,"metadata3 name",metadata3);
  ByteArrayOutputStream outputStream=new ByteArrayOutputStream();
  contentMetadata.writeToStream(new DataOutputStream(outputStream));
  ByteArrayInputStream inputStream=new ByteArrayInputStream(outputStream.toByteArray());
  DefaultContentMetadata contentMetadata2=DefaultContentMetadata.readFromStream(new DataInputStream(inputStream));
  assertThat(contentMetadata2.get("metadata1 name","default value")).isEqualTo("value");
  assertThat(contentMetadata2.get("metadata2 name",0)).isEqualTo(12345);
  assertThat(contentMetadata2.get("metadata3 name",new byte[]{})).isEqualTo(metadata3);
}
