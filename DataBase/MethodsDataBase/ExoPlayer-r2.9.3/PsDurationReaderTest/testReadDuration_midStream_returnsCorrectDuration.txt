@Test public void testReadDuration_midStream_returnsCorrectDuration() throws IOException, InterruptedException {
  FakeExtractorInput input=new FakeExtractorInput.Builder().setData(TestUtil.getByteArray(RuntimeEnvironment.application,"ts/sample.ps")).build();
  input.setPosition(1234);
  int result=Extractor.RESULT_CONTINUE;
  while (!tsDurationReader.isDurationReadFinished()) {
    result=tsDurationReader.readDuration(input,seekPositionHolder);
    if (result == Extractor.RESULT_SEEK) {
      input.setPosition((int)seekPositionHolder.position);
    }
  }
  assertThat(result).isNotEqualTo(Extractor.RESULT_END_OF_INPUT);
  assertThat(tsDurationReader.getDurationUs()).isEqualTo(766);
}
