@Test public void testSpliceWithSampleOffset(){
  long sampleOffsetUs=30000;
  sampleQueue.setSampleOffsetUs(sampleOffsetUs);
  writeTestData();
  sampleQueue.splice();
  long spliceSampleTimeUs=SAMPLE_TIMESTAMPS[4];
  writeSample(DATA,spliceSampleTimeUs,FORMAT_SPLICED,C.BUFFER_FLAG_KEY_FRAME);
  assertReadTestData(null,0,4,sampleOffsetUs);
  assertReadFormat(false,FORMAT_SPLICED.copyWithSubsampleOffsetUs(sampleOffsetUs));
  assertReadSample(spliceSampleTimeUs + sampleOffsetUs,true,DATA,0,DATA.length);
  assertReadEndOfStream(false);
}
