@Test public void testReadSingleSamples(){
  sampleQueue.sampleData(new ParsableByteArray(DATA),ALLOCATION_SIZE);
  assertAllocationCount(1);
  assertNoSamplesToRead(null);
  sampleQueue.format(FORMAT_1);
  assertReadFormat(false,FORMAT_1);
  assertNoSamplesToRead(FORMAT_1);
  sampleQueue.sampleMetadata(1000,C.BUFFER_FLAG_KEY_FRAME,ALLOCATION_SIZE,0,null);
  assertReadFormat(true,FORMAT_1);
  assertReadSample(1000,true,DATA,0,ALLOCATION_SIZE);
  assertAllocationCount(1);
  sampleQueue.discardToRead();
  assertAllocationCount(0);
  assertNoSamplesToRead(FORMAT_1);
  sampleQueue.sampleData(new ParsableByteArray(DATA),ALLOCATION_SIZE);
  sampleQueue.sampleMetadata(2000,0,ALLOCATION_SIZE - 1,1,null);
  assertReadFormat(true,FORMAT_1);
  assertReadSample(2000,false,DATA,0,ALLOCATION_SIZE - 1);
  assertAllocationCount(1);
  sampleQueue.discardToRead();
  assertAllocationCount(1);
  sampleQueue.sampleMetadata(3000,0,1,0,null);
  assertReadFormat(true,FORMAT_1);
  assertReadSample(3000,false,DATA,ALLOCATION_SIZE - 1,1);
  assertAllocationCount(1);
  sampleQueue.discardToRead();
  assertAllocationCount(0);
}
