@Test public void testDiscardUpstream(){
  writeTestData();
  sampleQueue.discardUpstreamSamples(8);
  assertAllocationCount(10);
  sampleQueue.discardUpstreamSamples(7);
  assertAllocationCount(9);
  sampleQueue.discardUpstreamSamples(6);
  assertAllocationCount(7);
  sampleQueue.discardUpstreamSamples(5);
  assertAllocationCount(5);
  sampleQueue.discardUpstreamSamples(4);
  assertAllocationCount(4);
  sampleQueue.discardUpstreamSamples(3);
  assertAllocationCount(3);
  sampleQueue.discardUpstreamSamples(2);
  assertAllocationCount(2);
  sampleQueue.discardUpstreamSamples(1);
  assertAllocationCount(1);
  sampleQueue.discardUpstreamSamples(0);
  assertAllocationCount(0);
  assertReadFormat(false,FORMAT_2);
  assertNoSamplesToRead(FORMAT_2);
}
