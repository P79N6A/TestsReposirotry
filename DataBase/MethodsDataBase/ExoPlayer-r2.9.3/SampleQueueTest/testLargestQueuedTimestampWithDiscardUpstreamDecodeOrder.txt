@Test public void testLargestQueuedTimestampWithDiscardUpstreamDecodeOrder(){
  long[] decodeOrderTimestamps=new long[]{0,3000,2000,1000,4000,7000,6000,5000};
  writeTestData(DATA,SAMPLE_SIZES,SAMPLE_OFFSETS,decodeOrderTimestamps,SAMPLE_FORMATS,SAMPLE_FLAGS);
  assertThat(sampleQueue.getLargestQueuedTimestampUs()).isEqualTo(7000);
  sampleQueue.discardUpstreamSamples(SAMPLE_TIMESTAMPS.length - 2);
  assertThat(sampleQueue.getLargestQueuedTimestampUs()).isEqualTo(7000);
  sampleQueue.discardUpstreamSamples(SAMPLE_TIMESTAMPS.length - 3);
  assertThat(sampleQueue.getLargestQueuedTimestampUs()).isEqualTo(4000);
  sampleQueue.discardUpstreamSamples(0);
  assertThat(sampleQueue.getLargestQueuedTimestampUs()).isEqualTo(MIN_VALUE);
}
