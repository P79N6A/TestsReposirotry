@Test public void testAdaptiveDataSetTrailingSmallChunk(){
  long chunkDuration=3 * C.MICROS_PER_SECOND;
  FakeAdaptiveDataSet dataSet=new FakeAdaptiveDataSet(TRACK_GROUP,10 * C.MICROS_PER_SECOND,chunkDuration,0.0,new Random(0));
  assertThat(dataSet.getAllData().size()).isEqualTo(TEST_FORMATS.length);
  assertThat(dataSet.getUri(0).equals(dataSet.getUri(1))).isFalse();
  assertThat(dataSet.getChunkCount()).isEqualTo(4);
  assertThat(dataSet.getChunkIndexByPosition(4 * C.MICROS_PER_SECOND)).isEqualTo(1);
  assertThat(dataSet.getChunkIndexByPosition(9 * C.MICROS_PER_SECOND)).isEqualTo(3);
  for (int i=0; i < dataSet.getChunkCount() - 1; i++) {
    assertThat(dataSet.getChunkDuration(i)).isEqualTo(chunkDuration);
  }
  assertThat(dataSet.getChunkDuration(3)).isEqualTo(1 * C.MICROS_PER_SECOND);
  assertChunkData(dataSet,chunkDuration);
}
