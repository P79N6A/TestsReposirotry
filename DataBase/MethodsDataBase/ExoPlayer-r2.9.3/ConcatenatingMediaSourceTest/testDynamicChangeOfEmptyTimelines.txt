@Test public void testDynamicChangeOfEmptyTimelines() throws IOException {
  FakeMediaSource[] childSources=new FakeMediaSource[]{new FakeMediaSource(Timeline.EMPTY,null),new FakeMediaSource(Timeline.EMPTY,null),new FakeMediaSource(Timeline.EMPTY,null)};
  Timeline nonEmptyTimeline=new FakeTimeline(1);
  mediaSource.addMediaSources(Arrays.asList(childSources));
  Timeline timeline=testRunner.prepareSource();
  TimelineAsserts.assertEmpty(timeline);
  childSources[0].setNewSourceInfo(nonEmptyTimeline,null);
  timeline=testRunner.assertTimelineChangeBlocking();
  TimelineAsserts.assertPeriodCounts(timeline,1);
  childSources[2].setNewSourceInfo(nonEmptyTimeline,null);
  timeline=testRunner.assertTimelineChangeBlocking();
  TimelineAsserts.assertPeriodCounts(timeline,1,1);
  childSources[1].setNewSourceInfo(nonEmptyTimeline,null);
  timeline=testRunner.assertTimelineChangeBlocking();
  TimelineAsserts.assertPeriodCounts(timeline,1,1,1);
}
