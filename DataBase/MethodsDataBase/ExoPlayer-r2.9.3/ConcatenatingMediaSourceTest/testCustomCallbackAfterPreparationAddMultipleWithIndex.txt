@Test public void testCustomCallbackAfterPreparationAddMultipleWithIndex() throws IOException {
  DummyMainThread dummyMainThread=new DummyMainThread();
  try {
    testRunner.prepareSource();
    final TimelineGrabber timelineGrabber=new TimelineGrabber(testRunner);
    dummyMainThread.runOnMainThread(() -> mediaSource.addMediaSources(0,Arrays.asList(new MediaSource[]{createFakeMediaSource(),createFakeMediaSource()}),timelineGrabber));
    Timeline timeline=timelineGrabber.assertTimelineChangeBlocking();
    assertThat(timeline.getWindowCount()).isEqualTo(2);
  }
  finally {
    dummyMainThread.release();
  }
}
