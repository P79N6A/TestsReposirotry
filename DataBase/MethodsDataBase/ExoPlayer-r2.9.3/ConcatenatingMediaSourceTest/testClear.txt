@Test public void testClear() throws IOException {
  DummyMainThread dummyMainThread=new DummyMainThread();
  final FakeMediaSource preparedChildSource=createFakeMediaSource();
  final FakeMediaSource unpreparedChildSource=new FakeMediaSource(null,null);
  dummyMainThread.runOnMainThread(() -> {
    mediaSource.addMediaSource(preparedChildSource);
    mediaSource.addMediaSource(unpreparedChildSource);
  }
);
  testRunner.prepareSource();
  final TimelineGrabber timelineGrabber=new TimelineGrabber(testRunner);
  dummyMainThread.runOnMainThread(() -> mediaSource.clear(timelineGrabber));
  Timeline timeline=timelineGrabber.assertTimelineChangeBlocking();
  assertThat(timeline.isEmpty()).isTrue();
  preparedChildSource.assertReleased();
  unpreparedChildSource.assertReleased();
}
