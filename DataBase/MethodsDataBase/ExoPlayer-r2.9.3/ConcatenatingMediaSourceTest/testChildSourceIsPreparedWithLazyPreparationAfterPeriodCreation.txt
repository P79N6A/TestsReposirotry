@Test public void testChildSourceIsPreparedWithLazyPreparationAfterPeriodCreation() throws IOException {
  FakeMediaSource[] childSources=createMediaSources(2);
  mediaSource=new ConcatenatingMediaSource(false,true,new DefaultShuffleOrder(0),childSources);
  testRunner=new MediaSourceTestRunner(mediaSource,null);
  Timeline timeline=testRunner.prepareSource();
  testRunner.createPeriod(new MediaPeriodId(timeline.getUidOfPeriod(0),0));
  assertThat(childSources[0].isPrepared()).isTrue();
  assertThat(childSources[1].isPrepared()).isFalse();
}
