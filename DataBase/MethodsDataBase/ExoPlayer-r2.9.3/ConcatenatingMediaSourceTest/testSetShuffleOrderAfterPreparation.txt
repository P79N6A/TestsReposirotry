@Test public void testSetShuffleOrderAfterPreparation() throws Exception {
  mediaSource.addMediaSources(Arrays.asList(createFakeMediaSource(),createFakeMediaSource(),createFakeMediaSource()));
  testRunner.prepareSource();
  mediaSource.setShuffleOrder(new ShuffleOrder.UnshuffledShuffleOrder(3));
  Timeline timeline=testRunner.assertTimelineChangeBlocking();
  assertThat(timeline.getFirstWindowIndex(true)).isEqualTo(0);
}
