@Test public void testCachePolling() throws Exception {
  final CachingCounters counters=new CachingCounters();
  FakeDataSet fakeDataSet=new FakeDataSet().newData("test_data").appendReadData(TestUtil.buildTestData(100)).appendReadAction(() -> assertCounters(counters,0,100,300)).appendReadData(TestUtil.buildTestData(100)).appendReadAction(() -> assertCounters(counters,0,200,300)).appendReadData(TestUtil.buildTestData(100)).endData();
  FakeDataSource dataSource=new FakeDataSource(fakeDataSet);
  CacheUtil.cache(new DataSpec(Uri.parse("test_data")),cache,dataSource,counters,null);
  assertCounters(counters,0,300,300);
  assertCachedData(cache,fakeDataSet);
}
