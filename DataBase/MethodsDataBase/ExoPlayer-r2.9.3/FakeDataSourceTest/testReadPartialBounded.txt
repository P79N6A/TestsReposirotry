@Test public void testReadPartialBounded() throws IOException {
  FakeDataSource dataSource=new FakeDataSource(fakeDataSet);
  assertThat(dataSource.open(new DataSpec(uri,9,3,null))).isEqualTo(3);
  assertThat(dataSource.read(BUFFER,0,BUFFER.length)).isEqualTo(1);
  assertBuffer(TEST_DATA_PART_1,9,1);
  assertThat(dataSource.read(BUFFER,0,BUFFER.length)).isEqualTo(2);
  assertBuffer(TEST_DATA_PART_2,0,2);
  assertThat(dataSource.read(BUFFER,0,BUFFER.length)).isEqualTo(C.RESULT_END_OF_INPUT);
  dataSource.close();
  assertThat(dataSource.open(new DataSpec(uri,11,4,null))).isEqualTo(4);
  assertThat(dataSource.read(BUFFER,0,BUFFER.length)).isEqualTo(4);
  assertBuffer(TEST_DATA_PART_2,1,4);
  assertThat(dataSource.read(BUFFER,0,BUFFER.length)).isEqualTo(C.RESULT_END_OF_INPUT);
  dataSource.close();
}
