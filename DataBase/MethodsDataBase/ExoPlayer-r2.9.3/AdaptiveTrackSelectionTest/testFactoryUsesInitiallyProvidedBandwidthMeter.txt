@Test public void testFactoryUsesInitiallyProvidedBandwidthMeter(){
  BandwidthMeter initialBandwidthMeter=mock(BandwidthMeter.class);
  BandwidthMeter injectedBandwidthMeter=mock(BandwidthMeter.class);
  Format format=videoFormat(500,320,240);
  @SuppressWarnings("deprecation") AdaptiveTrackSelection adaptiveTrackSelection=new AdaptiveTrackSelection.Factory(initialBandwidthMeter).createTrackSelection(new TrackGroup(format),injectedBandwidthMeter,0);
  adaptiveTrackSelection.updateSelectedTrack(0,0,C.TIME_UNSET,Collections.emptyList(),new MediaChunkIterator[]{MediaChunkIterator.EMPTY});
  verify(initialBandwidthMeter,atLeastOnce()).getBitrateEstimate();
  verifyZeroInteractions(injectedBandwidthMeter);
}
