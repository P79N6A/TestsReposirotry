@Test public void testUpdateSelectedTrackSwitchUpIfBufferedEnough(){
  Format format1=videoFormat(500,320,240);
  Format format2=videoFormat(1000,640,480);
  Format format3=videoFormat(2000,960,720);
  TrackGroup trackGroup=new TrackGroup(format1,format2,format3);
  when(mockBandwidthMeter.getBitrateEstimate()).thenReturn(1000L,2000L);
  adaptiveTrackSelection=adaptiveTrackSelectionWithMinDurationForQualityIncreaseMs(trackGroup,10_000);
  adaptiveTrackSelection.updateSelectedTrack(0,10_000_000,C.TIME_UNSET,Collections.emptyList(),THREE_EMPTY_MEDIA_CHUNK_ITERATORS);
  assertThat(adaptiveTrackSelection.getSelectedFormat()).isEqualTo(format3);
  assertThat(adaptiveTrackSelection.getSelectionReason()).isEqualTo(C.SELECTION_REASON_ADAPTIVE);
}
