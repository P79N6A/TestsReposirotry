@Test public void testSeeking_handlesRandomSeeks_extractsCorrectFrames_forNarrowBandAmr() throws IOException, InterruptedException {
  String fileName=NARROW_BAND_AMR_FILE;
  Uri fileUri=TestUtil.buildAssetUri(fileName);
  expectedTrackOutput=TestUtil.extractAllSamplesFromFile(createAmrExtractor(),RuntimeEnvironment.application,fileName).trackOutputs.get(0);
  AmrExtractor extractor=createAmrExtractor();
  FakeExtractorOutput extractorOutput=new FakeExtractorOutput();
  SeekMap seekMap=TestUtil.extractSeekMap(extractor,extractorOutput,dataSource,fileUri);
  FakeTrackOutput trackOutput=extractorOutput.trackOutputs.get(0);
  long numSeek=100;
  for (long i=0; i < numSeek; i++) {
    long targetSeekTimeUs=random.nextInt(NARROW_BAND_FILE_DURATION_US + 1);
    int extractedFrameIndex=TestUtil.seekToTimeUs(extractor,seekMap,targetSeekTimeUs,dataSource,trackOutput,fileUri);
    assertThat(extractedFrameIndex).isNotEqualTo(-1);
    assertFirstFrameAfterSeekContainTargetSeekTime(trackOutput,targetSeekTimeUs,extractedFrameIndex);
  }
}
