@Test public void testDecodeWithMultipleStyl() throws IOException, SubtitleDecoderException {
  Tx3gDecoder decoder=new Tx3gDecoder(Collections.emptyList());
  byte[] bytes=TestUtil.getByteArray(RuntimeEnvironment.application,SAMPLE_WITH_MULTIPLE_STYL);
  Subtitle subtitle=decoder.decode(bytes,bytes.length,false);
  SpannedString text=new SpannedString(subtitle.getCues(0).get(0).text);
  assertThat(text.toString()).isEqualTo("Line 2\nLine 3");
  assertThat(text.getSpans(0,text.length(),Object.class)).hasLength(4);
  StyleSpan styleSpan=findSpan(text,0,5,StyleSpan.class);
  assertThat(styleSpan.getStyle()).isEqualTo(Typeface.ITALIC);
  findSpan(text,7,12,UnderlineSpan.class);
  ForegroundColorSpan colorSpan=findSpan(text,0,5,ForegroundColorSpan.class);
  assertThat(colorSpan.getForegroundColor()).isEqualTo(Color.GREEN);
  colorSpan=findSpan(text,7,12,ForegroundColorSpan.class);
  assertThat(colorSpan.getForegroundColor()).isEqualTo(Color.GREEN);
  assertFractionalLinePosition(subtitle.getCues(0).get(0),0.85f);
}
