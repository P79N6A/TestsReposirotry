@Test public void testReadInterrupted() throws HttpDataSourceException, InterruptedException {
  mockResponseStartSuccess();
  dataSourceUnderTest.open(testDataSpec);
  final ConditionVariable startCondition=buildReadStartedCondition();
  final CountDownLatch timedOutLatch=new CountDownLatch(1);
  byte[] returnedBuffer=new byte[8];
  Thread thread=new Thread(){
    @Override public void run(){
      try {
        dataSourceUnderTest.read(returnedBuffer,0,8);
        fail();
      }
 catch (      HttpDataSourceException e) {
        assertThat(e.getCause() instanceof CronetDataSource.InterruptedIOException).isTrue();
        timedOutLatch.countDown();
      }
    }
  }
;
  thread.start();
  startCondition.block();
  assertNotCountedDown(timedOutLatch);
  thread.interrupt();
  timedOutLatch.await();
}
