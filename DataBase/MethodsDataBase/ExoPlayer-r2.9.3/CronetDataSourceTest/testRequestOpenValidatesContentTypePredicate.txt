@Test public void testRequestOpenValidatesContentTypePredicate(){
  mockResponseStartSuccess();
  when(mockContentTypePredicate.evaluate(anyString())).thenReturn(false);
  try {
    dataSourceUnderTest.open(testDataSpec);
    fail("HttpDataSource.HttpDataSourceException expected");
  }
 catch (  HttpDataSourceException e) {
    assertThat(e instanceof HttpDataSource.InvalidContentTypeException).isTrue();
    verify(mockUrlRequest,never()).cancel();
    verify(mockContentTypePredicate).evaluate(TEST_CONTENT_TYPE);
  }
}
