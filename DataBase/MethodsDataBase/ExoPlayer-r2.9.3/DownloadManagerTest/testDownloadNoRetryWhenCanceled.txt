@Test public void testDownloadNoRetryWhenCanceled() throws Throwable {
  FakeDownloadAction downloadAction=createDownloadAction(uri1).ignoreInterrupts();
  downloadAction.getFakeDownloader().enableDownloadIOException=true;
  downloadAction.post().assertStarted();
  FakeDownloadAction removeAction=createRemoveAction(uri1).post();
  downloadAction.unblock().assertCanceled();
  removeAction.unblock();
  downloadManagerListener.blockUntilTasksCompleteAndThrowAnyDownloadError();
}
