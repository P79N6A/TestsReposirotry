@Test public void testSameMediaMultipleActions() throws Throwable {
  FakeDownloadAction downloadAction1=createDownloadAction(uri1).ignoreInterrupts();
  FakeDownloadAction downloadAction2=createDownloadAction(uri1).ignoreInterrupts();
  FakeDownloadAction removeAction1=createRemoveAction(uri1);
  FakeDownloadAction downloadAction3=createDownloadAction(uri1);
  FakeDownloadAction removeAction2=createRemoveAction(uri1);
  downloadAction1.post().assertStarted();
  downloadAction2.post().assertStarted();
  removeAction1.post().assertDoesNotStart();
  downloadAction2.unblock().assertCanceled();
  removeAction1.assertDoesNotStart();
  downloadAction3.post().assertDoesNotStart();
  downloadAction1.unblock().assertCanceled();
  removeAction1.assertStarted();
  downloadAction3.assertDoesNotStart();
  removeAction2.post();
  removeAction1.assertCanceled();
  downloadAction3.assertCanceled();
  removeAction2.assertStarted().unblock().assertCompleted();
  downloadManagerListener.blockUntilTasksCompleteAndThrowAnyDownloadError();
}
