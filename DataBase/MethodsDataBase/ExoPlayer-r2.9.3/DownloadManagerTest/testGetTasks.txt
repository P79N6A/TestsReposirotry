@Test public void testGetTasks() throws Throwable {
  FakeDownloadAction removeAction=createRemoveAction(uri1);
  FakeDownloadAction downloadAction1=createDownloadAction(uri1);
  FakeDownloadAction downloadAction2=createDownloadAction(uri1);
  removeAction.post().assertStarted();
  downloadAction1.post().assertDoesNotStart();
  downloadAction2.post().assertDoesNotStart();
  TaskState[] states=downloadManager.getAllTaskStates();
  assertThat(states).hasLength(3);
  assertThat(states[0].action).isEqualTo(removeAction);
  assertThat(states[1].action).isEqualTo(downloadAction1);
  assertThat(states[2].action).isEqualTo(downloadAction2);
}
