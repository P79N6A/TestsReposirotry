@Test public void testDownloadRepresentationFailure() throws Exception {
  FakeDataSet fakeDataSet=new FakeDataSet().setData(TEST_MPD_URI,TEST_MPD).setRandomData("audio_init_data",10).setRandomData("audio_segment_1",4).newData("audio_segment_2").appendReadData(TestUtil.buildTestData(2)).appendReadError(new IOException()).appendReadData(TestUtil.buildTestData(3)).endData().setRandomData("audio_segment_3",6);
  DashDownloader dashDownloader=getDashDownloader(fakeDataSet,new StreamKey(0,0,0));
  try {
    dashDownloader.download();
    fail();
  }
 catch (  IOException e) {
  }
  dashDownloader.download();
  assertCachedData(cache,fakeDataSet);
}
