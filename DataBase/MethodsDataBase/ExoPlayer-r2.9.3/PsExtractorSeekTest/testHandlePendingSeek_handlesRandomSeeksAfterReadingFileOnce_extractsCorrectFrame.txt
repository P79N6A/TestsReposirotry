@Test public void testHandlePendingSeek_handlesRandomSeeksAfterReadingFileOnce_extractsCorrectFrame() throws IOException, InterruptedException {
  PsExtractor extractor=new PsExtractor();
  FakeExtractorOutput extractorOutput=new FakeExtractorOutput();
  readInputFileOnce(extractor,extractorOutput);
  SeekMap seekMap=extractorOutput.seekMap;
  FakeTrackOutput trackOutput=extractorOutput.trackOutputs.get(VIDEO_TRACK_ID);
  long numSeek=100;
  for (long i=0; i < numSeek; i++) {
    long targetSeekTimeUs=random.nextInt(DURATION_US + 1);
    int extractedFrameIndex=seekToTimeUs(extractor,seekMap,targetSeekTimeUs,trackOutput);
    assertThat(extractedFrameIndex).isNotEqualTo(-1);
    assertFirstFrameAfterSeekContainsTargetSeekTime(trackOutput,targetSeekTimeUs,extractedFrameIndex);
  }
}
