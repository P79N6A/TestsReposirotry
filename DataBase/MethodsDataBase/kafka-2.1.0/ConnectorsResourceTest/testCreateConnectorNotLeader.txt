@Test public void testCreateConnectorNotLeader() throws Throwable {
  CreateConnectorRequest body=new CreateConnectorRequest(CONNECTOR_NAME,Collections.singletonMap(ConnectorConfig.NAME_CONFIG,CONNECTOR_NAME));
  final Capture<Callback<Herder.Created<ConnectorInfo>>> cb=Capture.newInstance();
  herder.putConnectorConfig(EasyMock.eq(CONNECTOR_NAME),EasyMock.eq(body.config()),EasyMock.eq(false),EasyMock.capture(cb));
  expectAndCallbackNotLeaderException(cb);
  EasyMock.expect(RestClient.httpRequest(EasyMock.eq("http://leader:8083/connectors?forward=false"),EasyMock.eq("POST"),EasyMock.eq(body),EasyMock.<TypeReference>anyObject(),EasyMock.anyObject(WorkerConfig.class))).andReturn(new RestClient.HttpResponse<>(201,new HashMap<String,String>(),new ConnectorInfo(CONNECTOR_NAME,CONNECTOR_CONFIG,CONNECTOR_TASK_NAMES,ConnectorType.SOURCE)));
  PowerMock.replayAll();
  connectorsResource.createConnector(FORWARD,body);
  PowerMock.verifyAll();
}
