@Test public void testListConnectorsNotLeader() throws Throwable {
  final Capture<Callback<Collection<String>>> cb=Capture.newInstance();
  herder.connectors(EasyMock.capture(cb));
  expectAndCallbackNotLeaderException(cb);
  EasyMock.expect(RestClient.httpRequest(EasyMock.eq("http://leader:8083/connectors?forward=false"),EasyMock.eq("GET"),EasyMock.isNull(),EasyMock.anyObject(TypeReference.class),EasyMock.anyObject(WorkerConfig.class))).andReturn(new RestClient.HttpResponse<>(200,new HashMap<String,String>(),Arrays.asList(CONNECTOR2_NAME,CONNECTOR_NAME)));
  PowerMock.replayAll();
  Collection<String> connectors=connectorsResource.listConnectors(FORWARD);
  assertEquals(new HashSet<>(Arrays.asList(CONNECTOR_NAME,CONNECTOR2_NAME)),new HashSet<>(connectors));
  PowerMock.verifyAll();
}
