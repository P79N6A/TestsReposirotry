@Test public void shouldNotWriteCheckpointForNonPersistent() throws IOException {
  final TopicPartition topicPartition=new TopicPartition(nonPersistentStoreTopicName,1);
  final ProcessorStateManager stateMgr=new ProcessorStateManager(taskId,noPartitions,true,stateDirectory,Collections.singletonMap(nonPersistentStoreName,nonPersistentStoreTopicName),changelogReader,false,logContext);
  stateMgr.register(nonPersistentStore,nonPersistentStore.stateRestoreCallback);
  stateMgr.checkpoint(Collections.singletonMap(topicPartition,876L));
  final Map<TopicPartition,Long> read=checkpoint.read();
  assertThat(read,equalTo(Collections.emptyMap()));
}
