@Test public void shouldDeleteCheckpointFileOnCreationIfEosEnabled() throws IOException {
  checkpoint.write(Collections.singletonMap(new TopicPartition(persistentStoreTopicName,1),123L));
  assertTrue(checkpointFile.exists());
  ProcessorStateManager stateManager=null;
  try {
    stateManager=new ProcessorStateManager(taskId,noPartitions,false,stateDirectory,Collections.emptyMap(),changelogReader,true,logContext);
    assertFalse(checkpointFile.exists());
  }
  finally {
    if (stateManager != null) {
      stateManager.close(null);
    }
  }
}
