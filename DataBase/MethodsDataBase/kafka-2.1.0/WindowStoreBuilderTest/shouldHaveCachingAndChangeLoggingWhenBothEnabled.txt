@Test public void shouldHaveCachingAndChangeLoggingWhenBothEnabled(){
  final WindowStore<String,String> store=builder.withLoggingEnabled(Collections.<String,String>emptyMap()).withCachingEnabled().build();
  final WrappedStateStore caching=(WrappedStateStore)((WrappedStateStore)store).wrappedStore();
  final WrappedStateStore changeLogging=(WrappedStateStore)caching.wrappedStore();
  assertThat(store,instanceOf(MeteredWindowStore.class));
  assertThat(caching,instanceOf(CachingWindowStore.class));
  assertThat(changeLogging,instanceOf(ChangeLoggingWindowBytesStore.class));
  assertThat(changeLogging.wrappedStore(),CoreMatchers.<StateStore>equalTo(inner));
}
