@Test public void testReadStringSizeTooLarge(){
  byte[] stringBytes="foo".getBytes();
  ByteBuffer invalidBuffer=ByteBuffer.allocate(2 + stringBytes.length);
  invalidBuffer.putShort((short)(stringBytes.length * 5));
  invalidBuffer.put(stringBytes);
  invalidBuffer.rewind();
  try {
    Type.STRING.read(invalidBuffer);
    fail("String size not validated");
  }
 catch (  SchemaException e) {
  }
  invalidBuffer.rewind();
  try {
    Type.NULLABLE_STRING.read(invalidBuffer);
    fail("String size not validated");
  }
 catch (  SchemaException e) {
  }
}
