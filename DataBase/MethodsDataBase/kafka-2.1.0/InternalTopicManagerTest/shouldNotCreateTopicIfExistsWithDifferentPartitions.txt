@Test public void shouldNotCreateTopicIfExistsWithDifferentPartitions(){
  mockAdminClient.addTopic(false,topic,new ArrayList<TopicPartitionInfo>(){
{
      add(new TopicPartitionInfo(0,broker1,singleReplica,Collections.<Node>emptyList()));
      add(new TopicPartitionInfo(1,broker1,singleReplica,Collections.<Node>emptyList()));
    }
  }
,null);
  try {
    final InternalTopicConfig internalTopicConfig=new RepartitionTopicConfig(topic,Collections.<String,String>emptyMap());
    internalTopicConfig.setNumberOfPartitions(1);
    internalTopicManager.makeReady(Collections.singletonMap(topic,internalTopicConfig));
    fail("Should have thrown StreamsException");
  }
 catch (  final StreamsException expected) {
  }
}
