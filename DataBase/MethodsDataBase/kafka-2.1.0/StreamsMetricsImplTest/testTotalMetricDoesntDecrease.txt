@Test public void testTotalMetricDoesntDecrease(){
  final MockTime time=new MockTime(1);
  final MetricConfig config=new MetricConfig().timeWindow(1,TimeUnit.MILLISECONDS);
  final Metrics metrics=new Metrics(config,time);
  final StreamsMetricsImpl streamsMetrics=new StreamsMetricsImpl(metrics,"");
  final String scope="scope";
  final String entity="entity";
  final String operation="op";
  final Sensor sensor=streamsMetrics.addLatencyAndThroughputSensor(scope,entity,operation,Sensor.RecordingLevel.INFO);
  final double latency=100.0;
  final MetricName totalMetricName=metrics.metricName("op-total","stream-scope-metrics","","client-id","","scope-id","entity");
  final KafkaMetric totalMetric=metrics.metric(totalMetricName);
  for (int i=0; i < 10; i++) {
    assertEquals(i,Math.round(totalMetric.measurable().measure(config,time.milliseconds())));
    sensor.record(latency,time.milliseconds());
  }
}
