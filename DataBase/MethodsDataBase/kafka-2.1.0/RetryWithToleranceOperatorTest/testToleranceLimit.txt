@Test public void testToleranceLimit(){
  RetryWithToleranceOperator retryWithToleranceOperator=new RetryWithToleranceOperator(ERRORS_RETRY_TIMEOUT_DEFAULT,ERRORS_RETRY_MAX_DELAY_DEFAULT,NONE,SYSTEM);
  retryWithToleranceOperator.metrics(errorHandlingMetrics);
  retryWithToleranceOperator.markAsFailed();
  assertFalse("should not tolerate any errors",retryWithToleranceOperator.withinToleranceLimits());
  retryWithToleranceOperator=new RetryWithToleranceOperator(ERRORS_RETRY_TIMEOUT_DEFAULT,ERRORS_RETRY_MAX_DELAY_DEFAULT,ALL,SYSTEM);
  retryWithToleranceOperator.metrics(errorHandlingMetrics);
  retryWithToleranceOperator.markAsFailed();
  retryWithToleranceOperator.markAsFailed();
  assertTrue("should tolerate all errors",retryWithToleranceOperator.withinToleranceLimits());
  retryWithToleranceOperator=new RetryWithToleranceOperator(ERRORS_RETRY_TIMEOUT_DEFAULT,ERRORS_RETRY_MAX_DELAY_DEFAULT,NONE,SYSTEM);
  assertTrue("no tolerance is within limits if no failures",retryWithToleranceOperator.withinToleranceLimits());
}
