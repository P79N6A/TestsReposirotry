/** 
 * Test that calling FetchSessionHandler#Builder#build twice fails.
 */
@Test public void testDoubleBuild(){
  FetchSessionHandler handler=new FetchSessionHandler(LOG_CONTEXT,1);
  FetchSessionHandler.Builder builder=handler.newBuilder();
  builder.add(new TopicPartition("foo",0),new FetchRequest.PartitionData(0,100,200,Optional.empty()));
  builder.build();
  try {
    builder.build();
    fail("Expected calling build twice to fail.");
  }
 catch (  Throwable t) {
  }
}
