@Test public void testRestartConnectorFailureOnStart() throws Exception {
  expectAdd(SourceSink.SOURCE);
  Map<String,String> config=connectorConfig(SourceSink.SOURCE);
  Connector connectorMock=PowerMock.createMock(SourceConnector.class);
  expectConfigValidation(connectorMock,true,config);
  worker.stopConnector(CONNECTOR_NAME);
  EasyMock.expectLastCall().andReturn(true);
  worker.startConnector(EasyMock.eq(CONNECTOR_NAME),EasyMock.eq(config),EasyMock.anyObject(HerderConnectorContext.class),EasyMock.eq(herder),EasyMock.eq(TargetState.STARTED));
  EasyMock.expectLastCall().andReturn(false);
  PowerMock.replayAll();
  herder.putConnectorConfig(CONNECTOR_NAME,config,false,createCallback);
  FutureCallback<Void> cb=new FutureCallback<>();
  herder.restartConnector(CONNECTOR_NAME,cb);
  try {
    cb.get(1000L,TimeUnit.MILLISECONDS);
    fail();
  }
 catch (  ExecutionException exception) {
    assertEquals(ConnectException.class,exception.getCause().getClass());
  }
  PowerMock.verifyAll();
}
