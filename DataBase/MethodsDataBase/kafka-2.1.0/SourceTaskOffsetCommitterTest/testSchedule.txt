@Test public void testSchedule(){
  Capture<Runnable> taskWrapper=EasyMock.newCapture();
  EasyMock.expect(executor.scheduleWithFixedDelay(EasyMock.capture(taskWrapper),eq(DEFAULT_OFFSET_COMMIT_INTERVAL_MS),eq(DEFAULT_OFFSET_COMMIT_INTERVAL_MS),eq(TimeUnit.MILLISECONDS))).andReturn(commitFuture);
  PowerMock.replayAll();
  committer.schedule(taskId,task);
  assertTrue(taskWrapper.hasCaptured());
  assertNotNull(taskWrapper.getValue());
  assertEquals(singletonMap(taskId,commitFuture),committers);
  PowerMock.verifyAll();
}
