@Test public void shouldMaterializeReduced(){
  windowedStream.reduce(MockReducer.STRING_ADDER,Materialized.<String,String,WindowStore<Bytes,byte[]>>as("reduced").withKeySerde(Serdes.String()).withValueSerde(Serdes.String()));
  try (final TopologyTestDriver driver=new TopologyTestDriver(builder.build(),props,0L)){
    processData(driver);
    final WindowStore<String,String> windowStore=driver.getWindowStore("reduced");
    final List<KeyValue<Windowed<String>,String>> data=StreamsTestUtils.toList(windowStore.fetch("1","2",ofEpochMilli(0),ofEpochMilli(1000L)));
    assertThat(data,equalTo(Arrays.asList(KeyValue.pair(new Windowed<>("1",new TimeWindow(0,500)),"1+2"),KeyValue.pair(new Windowed<>("1",new TimeWindow(500,1000)),"3"),KeyValue.pair(new Windowed<>("2",new TimeWindow(500,1000)),"1"))));
  }
 }
