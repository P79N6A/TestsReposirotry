@Test public void testMetricsReporterAutoGeneratedClientId(){
  Properties props=new Properties();
  props.setProperty(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG,"localhost:9999");
  props.setProperty(ConsumerConfig.METRIC_REPORTER_CLASSES_CONFIG,MockMetricsReporter.class.getName());
  KafkaConsumer<String,String> consumer=new KafkaConsumer<>(props,new StringDeserializer(),new StringDeserializer());
  MockMetricsReporter mockMetricsReporter=(MockMetricsReporter)consumer.metrics.reporters().get(0);
  Assert.assertEquals(consumer.getClientId(),mockMetricsReporter.clientId);
  consumer.close();
}
