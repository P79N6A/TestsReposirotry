@Test public void testMultipleIPsWithUseAll() throws UnknownHostException {
  assertEquals(2,ClientUtils.resolve(hostTwoIps,ClientDnsLookup.USE_ALL_DNS_IPS).size());
  connectionStates.connecting(nodeId1,time.milliseconds(),hostTwoIps,ClientDnsLookup.USE_ALL_DNS_IPS);
  InetAddress addr1=connectionStates.currentAddress(nodeId1);
  connectionStates.connecting(nodeId1,time.milliseconds(),hostTwoIps,ClientDnsLookup.USE_ALL_DNS_IPS);
  InetAddress addr2=connectionStates.currentAddress(nodeId1);
  assertNotSame(addr1,addr2);
  connectionStates.connecting(nodeId1,time.milliseconds(),hostTwoIps,ClientDnsLookup.USE_ALL_DNS_IPS);
  InetAddress addr3=connectionStates.currentAddress(nodeId1);
  assertSame(addr1,addr3);
}
