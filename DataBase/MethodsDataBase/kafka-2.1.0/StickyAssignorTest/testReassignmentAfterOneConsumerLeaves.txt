@Test public void testReassignmentAfterOneConsumerLeaves(){
  Map<String,Integer> partitionsPerTopic=new HashMap<>();
  for (int i=1; i < 20; i++)   partitionsPerTopic.put(getTopicName(i,20),i);
  Map<String,Subscription> subscriptions=new HashMap<>();
  for (int i=1; i < 20; i++) {
    List<String> topics=new ArrayList<String>();
    for (int j=1; j <= i; j++)     topics.add(getTopicName(j,20));
    subscriptions.put(getConsumerName(i,20),new Subscription(topics));
  }
  Map<String,List<TopicPartition>> assignment=assignor.assign(partitionsPerTopic,subscriptions);
  verifyValidityAndBalance(subscriptions,assignment);
  for (int i=1; i < 20; i++) {
    String consumer=getConsumerName(i,20);
    subscriptions.put(consumer,new Subscription(subscriptions.get(consumer).topics(),StickyAssignor.serializeTopicPartitionAssignment(assignment.get(consumer))));
  }
  subscriptions.remove("consumer10");
  assignment=assignor.assign(partitionsPerTopic,subscriptions);
  verifyValidityAndBalance(subscriptions,assignment);
  assertTrue(assignor.isSticky());
}
