@Test public void testHasOngoingTransactionAbortableError(){
  long pid=13131L;
  short epoch=1;
  TopicPartition partition=new TopicPartition("foo",0);
  assertFalse(transactionManager.hasOngoingTransaction());
  doInitTransactions(pid,epoch);
  assertFalse(transactionManager.hasOngoingTransaction());
  transactionManager.beginTransaction();
  assertTrue(transactionManager.hasOngoingTransaction());
  transactionManager.maybeAddPartitionToTransaction(partition);
  assertTrue(transactionManager.hasOngoingTransaction());
  prepareAddPartitionsToTxn(partition,Errors.NONE);
  sender.run(time.milliseconds());
  transactionManager.transitionToAbortableError(new KafkaException());
  assertTrue(transactionManager.hasOngoingTransaction());
  transactionManager.beginAbort();
  assertTrue(transactionManager.hasOngoingTransaction());
  prepareEndTxnResponse(Errors.NONE,TransactionResult.ABORT,pid,epoch);
  sender.run(time.milliseconds());
  assertFalse(transactionManager.hasOngoingTransaction());
}
