@Test public void testTransactionalIdAuthorizationFailureInFindCoordinator(){
  TransactionalRequestResult initPidResult=transactionManager.initializeTransactions();
  prepareFindCoordinatorResponse(Errors.TRANSACTIONAL_ID_AUTHORIZATION_FAILED,false,CoordinatorType.TRANSACTION,transactionalId);
  sender.run(time.milliseconds());
  sender.run(time.milliseconds());
  assertTrue(transactionManager.hasError());
  assertTrue(transactionManager.lastError() instanceof TransactionalIdAuthorizationException);
  sender.run(time.milliseconds());
  assertTrue(initPidResult.isCompleted());
  assertFalse(initPidResult.isSuccessful());
  assertTrue(initPidResult.error() instanceof TransactionalIdAuthorizationException);
  assertFatalError(TransactionalIdAuthorizationException.class);
}
