@Test public void shouldMaterializeCount(){
  stream.count(Materialized.<String,Long,SessionStore<Bytes,byte[]>>as("count-store"));
  try (final TopologyTestDriver driver=new TopologyTestDriver(builder.build(),props,0L)){
    processData(driver);
    final SessionStore<String,Long> store=driver.getSessionStore("count-store");
    final List<KeyValue<Windowed<String>,Long>> data=StreamsTestUtils.toList(store.fetch("1","2"));
    assertThat(data,equalTo(Arrays.asList(KeyValue.pair(new Windowed<>("1",new SessionWindow(10,15)),2L),KeyValue.pair(new Windowed<>("1",new SessionWindow(600,600)),1L),KeyValue.pair(new Windowed<>("2",new SessionWindow(600,600)),1L))));
  }
 }
