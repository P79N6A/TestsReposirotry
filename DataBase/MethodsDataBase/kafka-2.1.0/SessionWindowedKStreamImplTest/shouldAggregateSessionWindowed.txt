@Test public void shouldAggregateSessionWindowed(){
  final Map<Windowed<String>,String> results=new HashMap<>();
  stream.aggregate(MockInitializer.STRING_INIT,MockAggregator.TOSTRING_ADDER,sessionMerger,Materialized.<String,String,SessionStore<Bytes,byte[]>>with(Serdes.String(),Serdes.String())).toStream().foreach(new ForeachAction<Windowed<String>,String>(){
    @Override public void apply(    final Windowed<String> key,    final String value){
      results.put(key,value);
    }
  }
);
  try (final TopologyTestDriver driver=new TopologyTestDriver(builder.build(),props,0L)){
    processData(driver);
  }
   assertThat(results.get(new Windowed<>("1",new SessionWindow(10,15))),equalTo("0+0+1+2"));
  assertThat(results.get(new Windowed<>("2",new SessionWindow(600,600))),equalTo("0+1"));
  assertThat(results.get(new Windowed<>("1",new SessionWindow(600,600))),equalTo("0+3"));
}
