@Test public void updateMetricsOnListenerEventsForStartupPauseResumeAndShutdown(){
  ConnectorTaskId taskId=new ConnectorTaskId("foo",0);
  ConnectMetrics metrics=new MockConnectMetrics();
  TaskMetricsGroup group=new TaskMetricsGroup(taskId,metrics,statusListener);
  statusListener.onStartup(taskId);
  expectLastCall();
  statusListener.onPause(taskId);
  expectLastCall();
  statusListener.onResume(taskId);
  expectLastCall();
  statusListener.onShutdown(taskId);
  expectLastCall();
  replay(statusListener);
  group.onStartup(taskId);
  assertRunningMetric(group);
  group.onPause(taskId);
  assertPausedMetric(group);
  group.onResume(taskId);
  assertRunningMetric(group);
  group.onShutdown(taskId);
  assertStoppedMetric(group);
  verify(statusListener);
}
