@Test public void testSizeInBytes(){
  Header[] headers=new Header[]{new RecordHeader("foo","value".getBytes()),new RecordHeader("bar",(byte[])null)};
  long timestamp=System.currentTimeMillis();
  SimpleRecord[] records=new SimpleRecord[]{new SimpleRecord(timestamp,"key".getBytes(),"value".getBytes()),new SimpleRecord(timestamp + 30000,null,"value".getBytes()),new SimpleRecord(timestamp + 60000,"key".getBytes(),null),new SimpleRecord(timestamp + 60000,"key".getBytes(),"value".getBytes(),headers)};
  int actualSize=MemoryRecords.withRecords(CompressionType.NONE,records).sizeInBytes();
  assertEquals(actualSize,DefaultRecordBatch.sizeInBytes(Arrays.asList(records)));
}
