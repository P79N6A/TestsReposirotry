@Test public void shouldMergeSessions(){
  context.setTime(0);
  final String sessionId="mel";
  processor.process(sessionId,"first");
  assertTrue(sessionStore.findSessions(sessionId,0,0).hasNext());
  context.setTime(GAP_MS + 1);
  processor.process(sessionId,"second");
  assertTrue(sessionStore.findSessions(sessionId,GAP_MS + 1,GAP_MS + 1).hasNext());
  assertTrue(sessionStore.findSessions(sessionId,0,0).hasNext());
  context.setTime(GAP_MS / 2);
  processor.process(sessionId,"third");
  final KeyValueIterator<Windowed<String>,Long> iterator=sessionStore.findSessions(sessionId,0,GAP_MS + 1);
  final KeyValue<Windowed<String>,Long> kv=iterator.next();
  assertEquals(Long.valueOf(3),kv.value);
  assertFalse(iterator.hasNext());
}
