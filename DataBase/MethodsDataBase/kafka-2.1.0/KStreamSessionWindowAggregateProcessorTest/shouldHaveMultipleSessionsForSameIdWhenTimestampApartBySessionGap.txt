@Test public void shouldHaveMultipleSessionsForSameIdWhenTimestampApartBySessionGap(){
  final String sessionId="mel";
  long time=0;
  context.setTime(time);
  processor.process(sessionId,"first");
  context.setTime(time+=GAP_MS + 1);
  processor.process(sessionId,"second");
  processor.process(sessionId,"second");
  context.setTime(time+=GAP_MS + 1);
  processor.process(sessionId,"third");
  processor.process(sessionId,"third");
  processor.process(sessionId,"third");
  sessionStore.flush();
  assertEquals(Arrays.asList(KeyValue.pair(new Windowed<>(sessionId,new SessionWindow(0,0)),new Change<>(1L,null)),KeyValue.pair(new Windowed<>(sessionId,new SessionWindow(GAP_MS + 1,GAP_MS + 1)),new Change<>(2L,null)),KeyValue.pair(new Windowed<>(sessionId,new SessionWindow(time,time)),new Change<>(3L,null))),results);
}
