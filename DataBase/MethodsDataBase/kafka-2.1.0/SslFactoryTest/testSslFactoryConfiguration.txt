@Test public void testSslFactoryConfiguration() throws Exception {
  File trustStoreFile=File.createTempFile("truststore",".jks");
  Map<String,Object> serverSslConfig=TestSslUtils.createSslConfig(false,true,Mode.SERVER,trustStoreFile,"server");
  SslFactory sslFactory=new SslFactory(Mode.SERVER);
  sslFactory.configure(serverSslConfig);
  SSLEngine engine=sslFactory.createSslEngine("localhost",0);
  assertNotNull(engine);
  String[] expectedProtocols={"TLSv1.2"};
  assertArrayEquals(expectedProtocols,engine.getEnabledProtocols());
  assertEquals(false,engine.getUseClientMode());
}
