@Test public void testCertificateEntriesValidation() throws Exception {
  File trustStoreFile=File.createTempFile("truststore",".jks");
  Map<String,Object> serverSslConfig=TestSslUtils.createSslConfig(false,true,Mode.SERVER,trustStoreFile,"server");
  Map<String,Object> newCnConfig=TestSslUtils.createSslConfig(false,true,Mode.SERVER,File.createTempFile("truststore",".jks"),"server","Another CN");
  KeyStore ks1=sslKeyStore(serverSslConfig).load();
  KeyStore ks2=sslKeyStore(serverSslConfig).load();
  assertEquals(SslFactory.CertificateEntries.create(ks1),SslFactory.CertificateEntries.create(ks2));
  ks2.setCertificateEntry("another",ks1.getCertificate("localhost"));
  assertEquals(SslFactory.CertificateEntries.create(ks1),SslFactory.CertificateEntries.create(ks2));
  KeyStore ks3=sslKeyStore(newCnConfig).load();
  assertNotEquals(SslFactory.CertificateEntries.create(ks1),SslFactory.CertificateEntries.create(ks3));
}
