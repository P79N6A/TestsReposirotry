/** 
 * Tests that connections cannot be made with unsupported TLS cipher suites
 */
@Test public void testUnsupportedCiphers() throws Exception {
  String node="0";
  SSLContext context=SSLContext.getInstance("TLSv1.2");
  context.init(null,null,null);
  String[] cipherSuites=context.getDefaultSSLParameters().getCipherSuites();
  sslServerConfigs.put(SslConfigs.SSL_CIPHER_SUITES_CONFIG,Arrays.asList(cipherSuites[0]));
  server=createEchoServer(SecurityProtocol.SSL);
  sslClientConfigs.put(SslConfigs.SSL_CIPHER_SUITES_CONFIG,Arrays.asList(cipherSuites[1]));
  createSelector(sslClientConfigs);
  InetSocketAddress addr=new InetSocketAddress("localhost",server.port());
  selector.connect(node,addr,BUFFER_SIZE,BUFFER_SIZE);
  NetworkTestUtils.waitForChannelClose(selector,node,ChannelState.State.AUTHENTICATION_FAILED);
  server.verifyAuthenticationMetrics(0,1);
}
