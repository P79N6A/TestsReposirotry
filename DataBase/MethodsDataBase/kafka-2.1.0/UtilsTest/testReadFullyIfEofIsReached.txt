@Test public void testReadFullyIfEofIsReached() throws IOException {
  final FileChannel channelMock=mock(FileChannel.class);
  final int bufferSize=100;
  final String fileChannelContent="abcdefghkl";
  ByteBuffer buffer=ByteBuffer.allocate(bufferSize);
  when(channelMock.read(any(),anyLong())).then(invocation -> {
    ByteBuffer bufferArg=invocation.getArgument(0);
    bufferArg.put(fileChannelContent.getBytes());
    return -1;
  }
);
  Utils.readFully(channelMock,buffer,0L);
  assertEquals("abcdefghkl",new String(buffer.array(),0,buffer.position()));
  assertEquals(fileChannelContent.length(),buffer.position());
  assertTrue(buffer.hasRemaining());
  verify(channelMock,atLeastOnce()).read(any(),anyLong());
}
