@Test public void shouldCloseTaskOnMaybePunctuateSystemTimeIfTaskMigratedException(){
  mockTaskInitialization();
  EasyMock.expect(t1.maybePunctuateStreamTime()).andReturn(true);
  t1.maybePunctuateSystemTime();
  EasyMock.expectLastCall().andThrow(new TaskMigratedException());
  t1.close(false,true);
  EasyMock.expectLastCall();
  EasyMock.replay(t1);
  addAndInitTask();
  try {
    assignedTasks.punctuate();
    fail("Should have thrown TaskMigratedException.");
  }
 catch (  final TaskMigratedException expected) {
  }
  EasyMock.verify(t1);
}
