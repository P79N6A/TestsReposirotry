@Test public void shouldCloseTaskOnSuspendIfTaskMigratedException(){
  mockTaskInitialization();
  t1.suspend();
  EasyMock.expectLastCall().andThrow(new TaskMigratedException());
  t1.close(false,true);
  EasyMock.expectLastCall();
  EasyMock.replay(t1);
  assertThat(suspendTask(),nullValue());
  assertTrue(assignedTasks.previousTaskIds().isEmpty());
  EasyMock.verify(t1);
}
