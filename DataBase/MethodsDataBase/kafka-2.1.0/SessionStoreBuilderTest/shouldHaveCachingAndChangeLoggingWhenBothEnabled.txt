@Test public void shouldHaveCachingAndChangeLoggingWhenBothEnabled(){
  final SessionStore<String,String> store=builder.withLoggingEnabled(Collections.<String,String>emptyMap()).withCachingEnabled().build();
  final WrappedStateStore caching=(WrappedStateStore)((WrappedStateStore)store).wrappedStore();
  final WrappedStateStore changeLogging=(WrappedStateStore)caching.wrappedStore();
  assertThat(store,instanceOf(MeteredSessionStore.class));
  assertThat(caching,instanceOf(CachingSessionStore.class));
  assertThat(changeLogging,instanceOf(ChangeLoggingSessionBytesStore.class));
  assertThat(changeLogging.wrappedStore(),CoreMatchers.<StateStore>equalTo(inner));
}
