@Test public void testInitProducerIdRequest() throws Exception {
  final long producerId=343434L;
  TransactionManager transactionManager=new TransactionManager();
  setupWithTransactionState(transactionManager);
  client.setNode(new Node(1,"localhost",33343));
  prepareAndReceiveInitProducerId(producerId,Errors.NONE);
  assertTrue(transactionManager.hasProducerId());
  assertEquals(producerId,transactionManager.producerIdAndEpoch().producerId);
  assertEquals((short)0,transactionManager.producerIdAndEpoch().epoch);
}
