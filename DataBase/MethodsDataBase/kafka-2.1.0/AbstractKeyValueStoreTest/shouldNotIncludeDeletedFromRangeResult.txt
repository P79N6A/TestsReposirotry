@Test public void shouldNotIncludeDeletedFromRangeResult(){
  store.close();
  final Serializer<String> serializer=new StringSerializer(){
    private int numCalls=0;
    @Override public byte[] serialize(    final String topic,    final String data){
      if (++numCalls > 3) {
        fail("Value serializer is called; it should never happen");
      }
      return super.serialize(topic,data);
    }
  }
;
  context.setValueSerde(Serdes.serdeFrom(serializer,new StringDeserializer()));
  store=createKeyValueStore(driver.context());
  store.put(0,"zero");
  store.put(1,"one");
  store.put(2,"two");
  store.delete(0);
  store.delete(1);
  final Map<Integer,String> expectedContents=Collections.singletonMap(2,"two");
  assertEquals(expectedContents,getContents(store.all()));
}
