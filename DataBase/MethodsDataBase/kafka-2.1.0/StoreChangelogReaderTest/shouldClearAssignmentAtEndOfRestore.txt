@Test public void shouldClearAssignmentAtEndOfRestore(){
  final int messages=1;
  setupConsumer(messages,topicPartition);
  changelogReader.register(new StateRestorer(topicPartition,restoreListener,null,Long.MAX_VALUE,true,"storeName"));
  expect(active.restoringTaskFor(topicPartition)).andStubReturn(task);
  replay(active,task);
  changelogReader.restore(active);
  assertThat(consumer.assignment(),equalTo(Collections.<TopicPartition>emptySet()));
}
