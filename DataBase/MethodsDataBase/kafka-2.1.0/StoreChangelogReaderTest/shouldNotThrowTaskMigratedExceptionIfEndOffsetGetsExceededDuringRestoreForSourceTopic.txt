@Test public void shouldNotThrowTaskMigratedExceptionIfEndOffsetGetsExceededDuringRestoreForSourceTopic(){
  final int messages=10;
  setupConsumer(messages,topicPartition);
  changelogReader.register(new StateRestorer(topicPartition,restoreListener,null,5,true,"storeName"));
  expect(active.restoringTaskFor(topicPartition)).andReturn(task);
  replay(active);
  changelogReader.restore(active);
  assertThat(callback.restored.size(),equalTo(5));
}
