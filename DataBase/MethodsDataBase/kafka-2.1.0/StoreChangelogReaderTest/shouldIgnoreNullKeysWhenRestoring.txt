@Test public void shouldIgnoreNullKeysWhenRestoring(){
  assignPartition(3,topicPartition);
  final byte[] bytes=new byte[0];
  consumer.addRecord(new ConsumerRecord<>(topicPartition.topic(),topicPartition.partition(),0,bytes,bytes));
  consumer.addRecord(new ConsumerRecord<>(topicPartition.topic(),topicPartition.partition(),1,(byte[])null,bytes));
  consumer.addRecord(new ConsumerRecord<>(topicPartition.topic(),topicPartition.partition(),2,bytes,bytes));
  consumer.assign(Collections.singletonList(topicPartition));
  changelogReader.register(new StateRestorer(topicPartition,restoreListener,null,Long.MAX_VALUE,false,"storeName"));
  expect(active.restoringTaskFor(topicPartition)).andStubReturn(task);
  replay(active,task);
  changelogReader.restore(active);
  assertThat(callback.restored,CoreMatchers.equalTo(Utils.mkList(KeyValue.pair(bytes,bytes),KeyValue.pair(bytes,bytes))));
}
