@Test public void shouldRestoreToLimitWhenSupplied(){
  setupConsumer(10,topicPartition);
  final StateRestorer restorer=new StateRestorer(topicPartition,restoreListener,null,3,true,"storeName");
  changelogReader.register(restorer);
  expect(active.restoringTaskFor(topicPartition)).andStubReturn(task);
  replay(active,task);
  changelogReader.restore(active);
  assertThat(callback.restored.size(),equalTo(3));
  assertThat(restorer.restoredOffset(),equalTo(3L));
}
