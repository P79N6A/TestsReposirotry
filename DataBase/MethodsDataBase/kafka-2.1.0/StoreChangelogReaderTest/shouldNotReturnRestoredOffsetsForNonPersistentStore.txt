@Test public void shouldNotReturnRestoredOffsetsForNonPersistentStore(){
  setupConsumer(10,topicPartition);
  changelogReader.register(new StateRestorer(topicPartition,restoreListener,null,Long.MAX_VALUE,false,"storeName"));
  expect(active.restoringTaskFor(topicPartition)).andStubReturn(task);
  replay(active,task);
  changelogReader.restore(active);
  final Map<TopicPartition,Long> restoredOffsets=changelogReader.restoredOffsets();
  assertThat(restoredOffsets,equalTo(Collections.<TopicPartition,Long>emptyMap()));
}
