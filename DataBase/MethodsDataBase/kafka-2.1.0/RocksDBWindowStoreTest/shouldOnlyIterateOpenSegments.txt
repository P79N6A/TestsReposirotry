@Test public void shouldOnlyIterateOpenSegments(){
  windowStore=createWindowStore(context,false);
  long currentTime=0;
  setCurrentTime(currentTime);
  windowStore.put(1,"one");
  currentTime=currentTime + segmentInterval;
  setCurrentTime(currentTime);
  windowStore.put(1,"two");
  currentTime=currentTime + segmentInterval;
  setCurrentTime(currentTime);
  windowStore.put(1,"three");
  final WindowStoreIterator<String> iterator=windowStore.fetch(1,ofEpochMilli(0),ofEpochMilli(currentTime));
  currentTime=currentTime + segmentInterval;
  setCurrentTime(currentTime);
  windowStore.put(1,"four");
  assertEquals(new KeyValue<>(segmentInterval,"two"),iterator.next());
  assertEquals(new KeyValue<>(2 * segmentInterval,"three"),iterator.next());
  assertFalse(iterator.hasNext());
}
