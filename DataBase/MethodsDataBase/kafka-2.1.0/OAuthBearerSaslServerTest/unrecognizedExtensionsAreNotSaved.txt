/** 
 * SASL Extensions that were not recognized (neither validated nor invalidated) by the callback handler must not be accessible through the  {@code #getNegotiatedProperty()} method
 */
@Test public void unrecognizedExtensionsAreNotSaved() throws Exception {
  saslServer=new OAuthBearerSaslServer(EXTENSIONS_VALIDATOR_CALLBACK_HANDLER);
  Map<String,String> customExtensions=new HashMap<>();
  customExtensions.put("firstKey","value1");
  customExtensions.put("secondKey","value1");
  customExtensions.put("thirdKey","value1");
  byte[] nextChallenge=saslServer.evaluateResponse(clientInitialResponse(null,false,customExtensions));
  assertTrue("Next challenge is not empty",nextChallenge.length == 0);
  assertNull("Extensions not recognized by the server must be ignored",saslServer.getNegotiatedProperty("thirdKey"));
}
