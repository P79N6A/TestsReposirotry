/** 
 * SASL Extensions that are validated by the callback handler should be accessible through the  {@code #getNegotiatedProperty()} method
 */
@Test public void savesCustomExtensionAsNegotiatedProperty() throws Exception {
  Map<String,String> customExtensions=new HashMap<>();
  customExtensions.put("firstKey","value1");
  customExtensions.put("secondKey","value2");
  byte[] nextChallenge=saslServer.evaluateResponse(clientInitialResponse(null,false,customExtensions));
  assertTrue("Next challenge is not empty",nextChallenge.length == 0);
  assertEquals("value1",saslServer.getNegotiatedProperty("firstKey"));
  assertEquals("value2",saslServer.getNegotiatedProperty("secondKey"));
}
