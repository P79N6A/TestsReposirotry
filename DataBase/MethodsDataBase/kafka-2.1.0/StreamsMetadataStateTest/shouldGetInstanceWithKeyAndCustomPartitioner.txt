@Test public void shouldGetInstanceWithKeyAndCustomPartitioner(){
  final TopicPartition tp4=new TopicPartition("topic-three",1);
  hostToPartitions.put(hostTwo,Utils.mkSet(topic2P0,tp4));
  metadataState.onChange(hostToPartitions,cluster.withPartitions(Collections.singletonMap(tp4,new PartitionInfo("topic-three",1,null,null,null))));
  final StreamsMetadata expected=new StreamsMetadata(hostTwo,Utils.mkSet(globalTable,"table-two","table-three","merged-table"),Utils.mkSet(topic2P0,tp4));
  final StreamsMetadata actual=metadataState.getMetadataWithKey("table-three","the-key",partitioner);
  assertEquals(expected,actual);
}
