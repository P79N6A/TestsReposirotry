@Test public void testOnAcknowledgementChain(){
  List<ProducerInterceptor<Integer,String>> interceptorList=new ArrayList<>();
  AppendProducerInterceptor interceptor1=new AppendProducerInterceptor("One");
  AppendProducerInterceptor interceptor2=new AppendProducerInterceptor("Two");
  interceptorList.add(interceptor1);
  interceptorList.add(interceptor2);
  ProducerInterceptors<Integer,String> interceptors=new ProducerInterceptors<>(interceptorList);
  RecordMetadata meta=new RecordMetadata(tp,0,0,0,Long.valueOf(0L),0,0);
  interceptors.onAcknowledgement(meta,null);
  assertEquals(2,onAckCount);
  interceptor1.injectOnAcknowledgementError(true);
  interceptors.onAcknowledgement(meta,null);
  assertEquals(4,onAckCount);
  interceptor2.injectOnAcknowledgementError(true);
  interceptors.onAcknowledgement(meta,null);
  assertEquals(6,onAckCount);
  interceptors.close();
}
