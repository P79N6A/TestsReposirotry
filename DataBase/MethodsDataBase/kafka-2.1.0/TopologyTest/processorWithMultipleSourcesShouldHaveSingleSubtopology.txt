@Test public void processorWithMultipleSourcesShouldHaveSingleSubtopology(){
  final TopologyDescription.Source expectedSourceNode1=addSource("source1","topic0");
  final TopologyDescription.Source expectedSourceNode2=addSource("source2",Pattern.compile("topic[1-9]"));
  final TopologyDescription.Processor expectedProcessorNode=addProcessor("processor",expectedSourceNode1,expectedSourceNode2);
  final Set<TopologyDescription.Node> allNodes=new HashSet<>();
  allNodes.add(expectedSourceNode1);
  allNodes.add(expectedSourceNode2);
  allNodes.add(expectedProcessorNode);
  expectedDescription.addSubtopology(new InternalTopologyBuilder.Subtopology(0,allNodes));
  assertThat(topology.describe(),equalTo(expectedDescription));
}
