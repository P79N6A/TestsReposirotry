@Test public void sourceAndProcessorWithMultipleStatesShouldHaveSingleSubtopology(){
  final TopologyDescription.Source expectedSourceNode=addSource("source","topic");
  final String[] stores=new String[]{"store1","store2"};
  final TopologyDescription.Processor expectedProcessorNode=addProcessorWithNewStore("processor",stores,expectedSourceNode);
  final Set<TopologyDescription.Node> allNodes=new HashSet<>();
  allNodes.add(expectedSourceNode);
  allNodes.add(expectedProcessorNode);
  expectedDescription.addSubtopology(new InternalTopologyBuilder.Subtopology(0,allNodes));
  assertThat(topology.describe(),equalTo(expectedDescription));
}
