@Test public void shouldOpenExistingSegments(){
  segments=new Segments("test",4,1);
  segments.getOrCreateSegmentIfLive(0,context);
  segments.getOrCreateSegmentIfLive(1,context);
  segments.getOrCreateSegmentIfLive(2,context);
  segments.getOrCreateSegmentIfLive(3,context);
  segments.getOrCreateSegmentIfLive(4,context);
  segments.close();
  segments=new Segments("test",4,1);
  segments.openExisting(context);
  assertTrue(segments.getSegmentForTimestamp(0).isOpen());
  assertTrue(segments.getSegmentForTimestamp(1).isOpen());
  assertTrue(segments.getSegmentForTimestamp(2).isOpen());
  assertTrue(segments.getSegmentForTimestamp(3).isOpen());
  assertTrue(segments.getSegmentForTimestamp(4).isOpen());
}
