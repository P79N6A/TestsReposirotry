@Test public void shouldGetSegmentsWithinTimeRange(){
  updateStreamTimeAndCreateSegment(0);
  updateStreamTimeAndCreateSegment(1);
  updateStreamTimeAndCreateSegment(2);
  updateStreamTimeAndCreateSegment(3);
  updateStreamTimeAndCreateSegment(4);
  segments.getOrCreateSegmentIfLive(0,context);
  segments.getOrCreateSegmentIfLive(1,context);
  segments.getOrCreateSegmentIfLive(2,context);
  segments.getOrCreateSegmentIfLive(3,context);
  segments.getOrCreateSegmentIfLive(4,context);
  final List<Segment> segments=this.segments.segments(0,2 * SEGMENT_INTERVAL);
  assertEquals(3,segments.size());
  assertEquals(0,segments.get(0).id);
  assertEquals(1,segments.get(1).id);
  assertEquals(2,segments.get(2).id);
}
