@Test(expected=RuntimeException.class) public void testLog4jAppendsWithSyncSendAndSimulateProducerFailShouldThrowException(){
  Properties props=getLog4jConfig(true);
  props.put("log4j.appender.KAFKA.IgnoreExceptions","false");
  PropertyConfigurator.configure(props);
  MockKafkaLog4jAppender mockKafkaLog4jAppender=getMockKafkaLog4jAppender();
  replaceProducerWithMocked(mockKafkaLog4jAppender,false);
  logger.error(getMessage(0));
}
