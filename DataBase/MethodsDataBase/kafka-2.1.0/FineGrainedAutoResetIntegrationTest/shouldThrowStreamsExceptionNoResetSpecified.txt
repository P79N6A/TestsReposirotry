@Test public void shouldThrowStreamsExceptionNoResetSpecified() throws InterruptedException {
  final Properties props=new Properties();
  props.put(StreamsConfig.CACHE_MAX_BYTES_BUFFERING_CONFIG,0);
  props.put(StreamsConfig.COMMIT_INTERVAL_MS_CONFIG,100);
  props.put(ConsumerConfig.METADATA_MAX_AGE_CONFIG,"1000");
  props.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG,"none");
  final Properties localConfig=StreamsTestUtils.getStreamsConfig("testAutoOffsetWithNone",CLUSTER.bootstrapServers(),STRING_SERDE_CLASSNAME,STRING_SERDE_CLASSNAME,props);
  final StreamsBuilder builder=new StreamsBuilder();
  final KStream<String,String> exceptionStream=builder.stream(NOOP);
  exceptionStream.to(DEFAULT_OUTPUT_TOPIC,Produced.with(stringSerde,stringSerde));
  final KafkaStreams streams=new KafkaStreams(builder.build(),localConfig);
  final TestingUncaughtExceptionHandler uncaughtExceptionHandler=new TestingUncaughtExceptionHandler();
  final TestCondition correctExceptionThrownCondition=new TestCondition(){
    @Override public boolean conditionMet(){
      return uncaughtExceptionHandler.correctExceptionThrown;
    }
  }
;
  streams.setUncaughtExceptionHandler(uncaughtExceptionHandler);
  streams.start();
  TestUtils.waitForCondition(correctExceptionThrownCondition,"The expected NoOffsetForPartitionException was never thrown");
  streams.close();
}
