@SuppressWarnings("unchecked") @Test public void testUpdateNonInitializedStore() throws IOException {
  final StreamsConfig config=createConfig(baseDir);
  final StandbyTask task=new StandbyTask(taskId,topicPartitions,topology,consumer,changelogReader,config,null,stateDirectory);
  restoreStateConsumer.assign(new ArrayList<>(task.checkpointedOffsets().keySet()));
  try {
    task.update(partition1,singletonList(new ConsumerRecord<>(partition1.topic(),partition1.partition(),10,0L,TimestampType.CREATE_TIME,0L,0,0,recordKey,recordValue)));
    fail("expected an exception");
  }
 catch (  final NullPointerException npe) {
    assertThat(npe.getMessage(),containsString("stateRestoreCallback must not be null"));
  }
}
