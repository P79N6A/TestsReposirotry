@Test public void testDisconnectWithUnsentRequests(){
  RequestFuture<ClientResponse> future=consumerClient.send(node,heartbeat());
  assertTrue(consumerClient.hasPendingRequests(node));
  assertFalse(client.hasInFlightRequests(node.idString()));
  consumerClient.disconnectAsync(node);
  consumerClient.pollNoWakeup();
  assertTrue(future.failed());
  assertTrue(future.exception() instanceof DisconnectException);
}
