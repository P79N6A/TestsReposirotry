@Test public void multiSend(){
  client.prepareResponse(heartbeatResponse(Errors.NONE));
  client.prepareResponse(heartbeatResponse(Errors.NONE));
  RequestFuture<ClientResponse> future1=consumerClient.send(node,heartbeat());
  RequestFuture<ClientResponse> future2=consumerClient.send(node,heartbeat());
  assertEquals(2,consumerClient.pendingRequestCount());
  assertEquals(2,consumerClient.pendingRequestCount(node));
  consumerClient.awaitPendingRequests(node,time.timer(Long.MAX_VALUE));
  assertTrue(future1.succeeded());
  assertTrue(future2.succeeded());
}
