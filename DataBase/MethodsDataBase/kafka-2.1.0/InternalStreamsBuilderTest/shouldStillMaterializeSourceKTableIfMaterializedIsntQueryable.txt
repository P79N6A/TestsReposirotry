@Test public void shouldStillMaterializeSourceKTableIfMaterializedIsntQueryable(){
  final MaterializedInternal<String,String,KeyValueStore<Bytes,byte[]>> materializedInternal=new MaterializedInternal<>(Materialized.with(null,null));
  materializedInternal.generateStoreNameIfNeeded(builder,storePrefix);
  final KTable table1=builder.table("topic2",consumed,materializedInternal);
  builder.buildAndOptimizeTopology();
  final ProcessorTopology topology=builder.internalTopologyBuilder.rewriteTopology(new StreamsConfig(StreamsTestUtils.getStreamsConfig(APP_ID))).build(null);
  assertEquals(1,topology.stateStores().size());
  final String storeName="prefix-STATE-STORE-0000000000";
  assertEquals(storeName,topology.stateStores().get(0).name());
  assertEquals(1,topology.storeToChangelogTopic().size());
  assertEquals("app-id-prefix-STATE-STORE-0000000000-changelog",topology.storeToChangelogTopic().get(storeName));
  assertNull(table1.queryableStoreName());
}
