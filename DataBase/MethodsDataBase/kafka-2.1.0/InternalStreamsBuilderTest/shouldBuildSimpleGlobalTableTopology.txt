@Test public void shouldBuildSimpleGlobalTableTopology(){
  final MaterializedInternal<String,String,KeyValueStore<Bytes,byte[]>> materializedInternal=new MaterializedInternal<>(Materialized.as("globalTable"));
  materializedInternal.generateStoreNameIfNeeded(builder,storePrefix);
  builder.globalTable("table",consumed,materializedInternal);
  builder.buildAndOptimizeTopology();
  final ProcessorTopology topology=builder.internalTopologyBuilder.rewriteTopology(new StreamsConfig(StreamsTestUtils.getStreamsConfig(APP_ID))).buildGlobalStateTopology();
  final List<StateStore> stateStores=topology.globalStateStores();
  assertEquals(1,stateStores.size());
  assertEquals("globalTable",stateStores.get(0).name());
}
