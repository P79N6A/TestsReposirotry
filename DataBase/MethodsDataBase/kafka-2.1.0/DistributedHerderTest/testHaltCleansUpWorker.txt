@Test public void testHaltCleansUpWorker(){
  EasyMock.expect(worker.connectorNames()).andReturn(Collections.singleton(CONN1));
  worker.stopConnector(CONN1);
  PowerMock.expectLastCall().andReturn(true);
  EasyMock.expect(worker.taskIds()).andReturn(Collections.singleton(TASK1));
  worker.stopAndAwaitTask(TASK1);
  PowerMock.expectLastCall();
  member.stop();
  PowerMock.expectLastCall();
  configBackingStore.stop();
  PowerMock.expectLastCall();
  statusBackingStore.stop();
  PowerMock.expectLastCall();
  worker.stop();
  PowerMock.expectLastCall();
  PowerMock.replayAll();
  herder.halt();
  PowerMock.verifyAll();
}
