@Test public void shouldSendDataThroughTopicUsingProduced(){
  final StreamsBuilder builder=new StreamsBuilder();
  final String input="topic";
  final KStream<String,String> stream=builder.stream(input,stringConsumed);
  stream.through("through-topic",Produced.with(Serdes.String(),Serdes.String())).process(processorSupplier);
  try (final TopologyTestDriver driver=new TopologyTestDriver(builder.build(),props)){
    driver.pipeInput(recordFactory.create(input,"a","b"));
  }
   assertThat(processorSupplier.theCapturedProcessor().processed,equalTo(Collections.singletonList("a:b")));
}
