/** 
 * Test that we cannot try to allocate more memory then we have in the whole pool
 */
@Test(expected=IllegalArgumentException.class) public void testCantAllocateMoreMemoryThanWeHave() throws Exception {
  BufferPool pool=new BufferPool(1024,512,metrics,time,metricGroup);
  ByteBuffer buffer=pool.allocate(1024,maxBlockTimeMs);
  assertEquals(1024,buffer.limit());
  pool.deallocate(buffer);
  pool.allocate(1025,maxBlockTimeMs);
}
