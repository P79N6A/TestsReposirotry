@Test public void outOfMemoryOnAllocation(){
  BufferPool bufferPool=new BufferPool(1024,1024,metrics,time,metricGroup){
    @Override protected ByteBuffer allocateByteBuffer(    int size){
      throw new OutOfMemoryError();
    }
  }
;
  try {
    bufferPool.allocateByteBuffer(1024);
    fail("Should have thrown OutOfMemoryError");
  }
 catch (  OutOfMemoryError ignored) {
  }
  assertEquals(bufferPool.availableMemory(),1024);
}
