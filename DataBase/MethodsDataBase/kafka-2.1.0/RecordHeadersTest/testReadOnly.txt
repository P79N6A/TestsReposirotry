@Test public void testReadOnly() throws IOException {
  RecordHeaders headers=new RecordHeaders();
  headers.add(new RecordHeader("key","value".getBytes()));
  Iterator<Header> headerIteratorBeforeClose=headers.iterator();
  headers.setReadOnly();
  try {
    headers.add(new RecordHeader("key","value".getBytes()));
    fail("IllegalStateException expected as headers are closed");
  }
 catch (  IllegalStateException ise) {
  }
  try {
    headers.remove("key");
    fail("IllegalStateException expected as headers are closed");
  }
 catch (  IllegalStateException ise) {
  }
  try {
    Iterator<Header> headerIterator=headers.iterator();
    headerIterator.next();
    headerIterator.remove();
    fail("IllegalStateException expected as headers are closed");
  }
 catch (  IllegalStateException ise) {
  }
  try {
    headerIteratorBeforeClose.next();
    headerIteratorBeforeClose.remove();
    fail("IllegalStateException expected as headers are closed");
  }
 catch (  IllegalStateException ise) {
  }
}
