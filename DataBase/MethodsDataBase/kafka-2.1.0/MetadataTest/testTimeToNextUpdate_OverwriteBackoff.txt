@Test public void testTimeToNextUpdate_OverwriteBackoff(){
  long now=10000;
  metadata.update(Cluster.empty(),Collections.<String>emptySet(),now);
  metadata.add("new-topic");
  assertEquals(0,metadata.timeToNextUpdate(now));
  metadata.update(Cluster.empty(),Collections.<String>emptySet(),now);
  metadata.setTopics(metadata.topics());
  assertEquals(metadataExpireMs,metadata.timeToNextUpdate(now));
  metadata.setTopics(Collections.singletonList("another-new-topic"));
  assertEquals(0,metadata.timeToNextUpdate(now));
  metadata.update(Cluster.empty(),Collections.<String>emptySet(),now);
  metadata.needMetadataForAllTopics(true);
  assertEquals(0,metadata.timeToNextUpdate(now));
  metadata.update(Cluster.empty(),Collections.<String>emptySet(),now);
  metadata.needMetadataForAllTopics(true);
  assertEquals(metadataExpireMs,metadata.timeToNextUpdate(now));
}
