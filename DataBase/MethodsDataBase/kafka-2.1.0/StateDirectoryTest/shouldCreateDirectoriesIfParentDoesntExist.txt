@Test public void shouldCreateDirectoriesIfParentDoesntExist(){
  final File tempDir=TestUtils.tempDirectory();
  final File stateDir=new File(new File(tempDir,"foo"),"state-dir");
  final StateDirectory stateDirectory=new StateDirectory(new StreamsConfig(new Properties(){
{
      put(StreamsConfig.APPLICATION_ID_CONFIG,applicationId);
      put(StreamsConfig.BOOTSTRAP_SERVERS_CONFIG,"dummy:1234");
      put(StreamsConfig.STATE_DIR_CONFIG,stateDir.getPath());
    }
  }
),time);
  final File taskDir=stateDirectory.directoryForTask(new TaskId(0,0));
  assertTrue(stateDir.exists());
  assertTrue(taskDir.exists());
}
