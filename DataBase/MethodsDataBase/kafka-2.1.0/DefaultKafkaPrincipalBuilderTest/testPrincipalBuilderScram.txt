@Test public void testPrincipalBuilderScram() throws Exception {
  SaslServer server=mock(SaslServer.class);
  when(server.getMechanismName()).thenReturn(ScramMechanism.SCRAM_SHA_256.mechanismName());
  when(server.getAuthorizationID()).thenReturn("foo");
  DefaultKafkaPrincipalBuilder builder=new DefaultKafkaPrincipalBuilder(null);
  KafkaPrincipal principal=builder.build(new SaslAuthenticationContext(server,SecurityProtocol.SASL_PLAINTEXT,InetAddress.getLocalHost(),SecurityProtocol.SASL_PLAINTEXT.name()));
  assertEquals(KafkaPrincipal.USER_TYPE,principal.getPrincipalType());
  assertEquals("foo",principal.getName());
  builder.close();
  verify(server,atLeastOnce()).getMechanismName();
  verify(server,atLeastOnce()).getAuthorizationID();
}
