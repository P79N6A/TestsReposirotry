@Test public void testLoginManagerReleasedIfConfigureThrowsException(){
  SaslChannelBuilder builder=createChannelBuilder(SecurityProtocol.SASL_SSL);
  try {
    builder.configure(Collections.singletonMap(SslConfigs.SSL_ENABLED_PROTOCOLS_CONFIG,"1"));
    fail("Exception should have been thrown");
  }
 catch (  KafkaException e) {
    assertTrue(builder.loginManagers().isEmpty());
  }
  builder.close();
  assertTrue(builder.loginManagers().isEmpty());
}
