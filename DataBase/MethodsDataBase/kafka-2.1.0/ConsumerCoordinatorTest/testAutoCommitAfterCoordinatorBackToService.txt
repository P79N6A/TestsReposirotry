@Test public void testAutoCommitAfterCoordinatorBackToService(){
  ConsumerCoordinator coordinator=buildCoordinator(new Metrics(),assignors,ConsumerConfig.DEFAULT_EXCLUDE_INTERNAL_TOPICS,true,true);
  subscriptions.assignFromUser(Collections.singleton(t1p));
  subscriptions.seek(t1p,100L);
  coordinator.markCoordinatorUnknown();
  assertTrue(coordinator.coordinatorUnknown());
  client.prepareResponse(groupCoordinatorResponse(node,Errors.NONE));
  prepareOffsetCommitRequest(singletonMap(t1p,100L),Errors.NONE);
  time.sleep(autoCommitIntervalMs);
  coordinator.maybeAutoCommitOffsetsAsync(time.milliseconds());
  assertFalse(coordinator.coordinatorUnknown());
  assertEquals(100L,subscriptions.position(t1p).longValue());
}
