@Test(expected=KafkaException.class) public void testUnexpectedErrorOnSyncGroup(){
  final String consumerId="consumer";
  subscriptions.subscribe(singleton(topic1),rebalanceListener);
  client.prepareResponse(groupCoordinatorResponse(node,Errors.NONE));
  coordinator.ensureCoordinatorReady(time.timer(Long.MAX_VALUE));
  client.prepareResponse(joinGroupFollowerResponse(1,consumerId,"leader",Errors.NONE));
  client.prepareResponse(syncGroupResponse(Collections.emptyList(),Errors.UNKNOWN_SERVER_ERROR));
  coordinator.joinGroupIfNeeded(time.timer(Long.MAX_VALUE));
}
