@Test public void testAutoCommitAwaitsInterval(){
  final String consumerId="consumer";
  ConsumerCoordinator coordinator=buildCoordinator(new Metrics(),assignors,ConsumerConfig.DEFAULT_EXCLUDE_INTERNAL_TOPICS,true,true);
  subscriptions.subscribe(singleton(topic1),rebalanceListener);
  joinAsFollowerAndReceiveAssignment(consumerId,coordinator,singletonList(t1p));
  subscriptions.seek(t1p,100);
  time.sleep(autoCommitIntervalMs);
  coordinator.poll(time.timer(Long.MAX_VALUE));
  assertEquals(1,client.inFlightRequestCount());
  time.sleep(autoCommitIntervalMs / 2);
  coordinator.poll(time.timer(Long.MAX_VALUE));
  assertEquals(1,client.inFlightRequestCount());
  respondToOffsetCommitRequest(singletonMap(t1p,100L),Errors.NONE);
  coordinator.poll(time.timer(Long.MAX_VALUE));
  assertEquals(0,client.inFlightRequestCount());
  subscriptions.seek(t1p,200);
  coordinator.poll(time.timer(Long.MAX_VALUE));
  assertEquals(0,client.inFlightRequestCount());
  time.sleep(autoCommitIntervalMs / 2);
  coordinator.poll(time.timer(Long.MAX_VALUE));
  assertEquals(1,client.inFlightRequestCount());
  respondToOffsetCommitRequest(singletonMap(t1p,200L),Errors.NONE);
}
