@Test public void testNoCoordinatorDiscoveryIfPartitionAwaitingReset(){
  assertTrue(coordinator.coordinatorUnknown());
  subscriptions.assignFromUser(singleton(t1p));
  subscriptions.requestOffsetReset(t1p,OffsetResetStrategy.EARLIEST);
  coordinator.refreshCommittedOffsetsIfNeeded(time.timer(Long.MAX_VALUE));
  assertEquals(Collections.emptySet(),subscriptions.missingFetchPositions());
  assertFalse(subscriptions.hasAllFetchPositions());
  assertEquals(Collections.singleton(t1p),subscriptions.partitionsNeedingReset(time.milliseconds()));
  assertEquals(OffsetResetStrategy.EARLIEST,subscriptions.resetStrategy(t1p));
  assertTrue(coordinator.coordinatorUnknown());
}
