@Test(expected=GroupAuthorizationException.class) public void testGroupReadUnauthorized(){
  subscriptions.subscribe(singleton(topic1),rebalanceListener);
  client.prepareResponse(groupCoordinatorResponse(node,Errors.NONE));
  coordinator.ensureCoordinatorReady(time.timer(Long.MAX_VALUE));
  client.prepareResponse(joinGroupLeaderResponse(0,"memberId",Collections.<String,List<String>>emptyMap(),Errors.GROUP_AUTHORIZATION_FAILED));
  coordinator.poll(time.timer(Long.MAX_VALUE));
}
