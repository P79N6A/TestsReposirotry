/** 
 * Expect a KafkaException if targetSize is bigger than the size of the FileRecords.
 */
@Test public void testTruncateNotCalledIfSizeIsBiggerThanTargetSize() throws IOException {
  FileChannel channelMock=mock(FileChannel.class);
  when(channelMock.size()).thenReturn(42L);
  FileRecords fileRecords=new FileRecords(tempFile(),channelMock,0,Integer.MAX_VALUE,false);
  try {
    fileRecords.truncateTo(43);
    fail("Should throw KafkaException");
  }
 catch (  KafkaException e) {
  }
  verify(channelMock,atLeastOnce()).size();
}
