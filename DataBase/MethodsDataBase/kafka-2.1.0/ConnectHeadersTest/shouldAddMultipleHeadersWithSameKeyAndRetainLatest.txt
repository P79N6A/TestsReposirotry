@Test public void shouldAddMultipleHeadersWithSameKeyAndRetainLatest(){
  populate(headers);
  Header header=headers.lastWithName(key);
  assertHeader(header,key,Schema.STRING_SCHEMA,"third");
  iter=headers.allWithName(key);
  assertNextHeader(iter,key,Schema.BOOLEAN_SCHEMA,true);
  assertNextHeader(iter,key,Schema.INT32_SCHEMA,0);
  assertNextHeader(iter,key,Schema.OPTIONAL_STRING_SCHEMA,null);
  assertNextHeader(iter,key,Schema.STRING_SCHEMA,"third");
  assertNoNextHeader(iter);
  iter=headers.allWithName(other);
  assertOnlyNextHeader(iter,other,Schema.STRING_SCHEMA,"other value");
  headers.retainLatest(other);
  assertOnlySingleHeader(other,Schema.STRING_SCHEMA,"other value");
  headers.retainLatest(key);
  assertOnlySingleHeader(key,Schema.STRING_SCHEMA,"third");
  headers.retainLatest();
  assertOnlySingleHeader(other,Schema.STRING_SCHEMA,"other value");
  assertOnlySingleHeader(key,Schema.STRING_SCHEMA,"third");
}
