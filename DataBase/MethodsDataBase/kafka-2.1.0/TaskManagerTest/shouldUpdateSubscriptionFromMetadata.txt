@Test public void shouldUpdateSubscriptionFromMetadata(){
  mockTopologyBuilder();
  expect(subscriptionUpdates.getUpdates()).andReturn(Utils.mkSet(topic1));
  topologyBuilder.updateSubscribedTopics(EasyMock.eq(Utils.mkSet(topic1,topic2)),EasyMock.anyString());
  expectLastCall().once();
  EasyMock.replay(activeTaskCreator,topologyBuilder,subscriptionUpdates);
  taskManager.updateSubscriptionsFromMetadata(Utils.mkSet(topic1,topic2));
  EasyMock.verify(activeTaskCreator,topologyBuilder,subscriptionUpdates);
}
