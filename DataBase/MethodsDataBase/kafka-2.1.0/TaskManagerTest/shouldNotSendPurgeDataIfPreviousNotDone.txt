@Test public void shouldNotSendPurgeDataIfPreviousNotDone(){
  final KafkaFuture<DeletedRecords> futureDeletedRecords=new KafkaFutureImpl<>();
  final Map<TopicPartition,RecordsToDelete> recordsToDelete=Collections.singletonMap(t1p1,RecordsToDelete.beforeOffset(5L));
  final DeleteRecordsResult deleteRecordsResult=new DeleteRecordsResult(Collections.singletonMap(t1p1,futureDeletedRecords));
  EasyMock.expect(active.recordsToDelete()).andReturn(Collections.singletonMap(t1p1,5L)).once();
  EasyMock.expect(adminClient.deleteRecords(recordsToDelete)).andReturn(deleteRecordsResult).once();
  replay();
  taskManager.maybePurgeCommitedRecords();
  taskManager.maybePurgeCommitedRecords();
  verify(active,adminClient);
}
