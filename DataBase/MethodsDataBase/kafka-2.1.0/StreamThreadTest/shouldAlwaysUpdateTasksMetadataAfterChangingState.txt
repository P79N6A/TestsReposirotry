@Test public void shouldAlwaysUpdateTasksMetadataAfterChangingState(){
  final StreamThread thread=createStreamThread(clientId,config,false);
  ThreadMetadata metadata=thread.threadMetadata();
  assertEquals(StreamThread.State.CREATED.name(),metadata.threadState());
  thread.setState(StreamThread.State.RUNNING);
  metadata=thread.threadMetadata();
  assertEquals(StreamThread.State.RUNNING.name(),metadata.threadState());
}
