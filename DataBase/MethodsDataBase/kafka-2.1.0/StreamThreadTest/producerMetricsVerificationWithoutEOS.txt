@Test public void producerMetricsVerificationWithoutEOS(){
  final MockProducer<byte[],byte[]> producer=new MockProducer<>();
  final Consumer<byte[],byte[]> consumer=EasyMock.createNiceMock(Consumer.class);
  final TaskManager taskManager=mockTaskManagerCommit(consumer,1,0);
  final StreamThread.StreamsMetricsThreadImpl streamsMetrics=new StreamThread.StreamsMetricsThreadImpl(metrics,"");
  final StreamThread thread=new StreamThread(mockTime,config,producer,consumer,consumer,null,taskManager,streamsMetrics,internalTopologyBuilder,clientId,new LogContext(""),new AtomicInteger());
  final MetricName testMetricName=new MetricName("test_metric","","",new HashMap<String,String>());
  final Metric testMetric=new KafkaMetric(new Object(),testMetricName,new Measurable(){
    @Override public double measure(    final MetricConfig config,    final long now){
      return 0;
    }
  }
,null,new MockTime());
  producer.setMockMetrics(testMetricName,testMetric);
  final Map<MetricName,Metric> producerMetrics=thread.producerMetrics();
  assertEquals(testMetricName,producerMetrics.get(testMetricName).metricName());
}
