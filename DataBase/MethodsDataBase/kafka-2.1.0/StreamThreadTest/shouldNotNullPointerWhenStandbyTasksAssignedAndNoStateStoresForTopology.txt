@Test public void shouldNotNullPointerWhenStandbyTasksAssignedAndNoStateStoresForTopology(){
  internalTopologyBuilder.addSource(null,"name",null,null,null,"topic");
  internalTopologyBuilder.addSink("out","output",null,null,null,"name");
  final StreamThread thread=createStreamThread(clientId,config,false);
  thread.setState(StreamThread.State.RUNNING);
  thread.rebalanceListener.onPartitionsRevoked(Collections.<TopicPartition>emptyList());
  final Map<TaskId,Set<TopicPartition>> standbyTasks=new HashMap<>();
  standbyTasks.put(task1,Collections.singleton(t1p1));
  thread.taskManager().setAssignmentMetadata(Collections.<TaskId,Set<TopicPartition>>emptyMap(),standbyTasks);
  thread.taskManager().createTasks(Collections.<TopicPartition>emptyList());
  thread.rebalanceListener.onPartitionsAssigned(Collections.<TopicPartition>emptyList());
}
