@Test public void shouldFetchAllWithinTimestampRange(){
  final String[] array={"a","b","c","d","e","f","g","h"};
  for (int i=0; i < array.length; i++) {
    context.setTime(i);
    cachingStore.put(bytesKey(array[i]),bytesValue(array[i]));
  }
  final KeyValueIterator<Windowed<Bytes>,byte[]> iterator=cachingStore.fetchAll(ofEpochMilli(0),ofEpochMilli(7));
  for (int i=0; i < array.length; i++) {
    final String str=array[i];
    verifyWindowedKeyValue(iterator.next(),new Windowed<>(bytesKey(str),new TimeWindow(i,i + WINDOW_SIZE)),str);
  }
  assertFalse(iterator.hasNext());
  final KeyValueIterator<Windowed<Bytes>,byte[]> iterator1=cachingStore.fetchAll(ofEpochMilli(2),ofEpochMilli(4));
  for (int i=2; i <= 4; i++) {
    final String str=array[i];
    verifyWindowedKeyValue(iterator1.next(),new Windowed<>(bytesKey(str),new TimeWindow(i,i + WINDOW_SIZE)),str);
  }
  assertFalse(iterator1.hasNext());
  final KeyValueIterator<Windowed<Bytes>,byte[]> iterator2=cachingStore.fetchAll(ofEpochMilli(5),ofEpochMilli(7));
  for (int i=5; i <= 7; i++) {
    final String str=array[i];
    verifyWindowedKeyValue(iterator2.next(),new Windowed<>(bytesKey(str),new TimeWindow(i,i + WINDOW_SIZE)),str);
  }
  assertFalse(iterator2.hasNext());
}
