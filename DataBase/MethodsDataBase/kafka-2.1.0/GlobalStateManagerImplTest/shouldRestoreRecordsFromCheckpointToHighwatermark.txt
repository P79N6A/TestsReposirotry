@Test public void shouldRestoreRecordsFromCheckpointToHighwatermark() throws IOException {
  initializeConsumer(5,6,t1);
  final OffsetCheckpoint offsetCheckpoint=new OffsetCheckpoint(new File(stateManager.baseDir(),ProcessorStateManager.CHECKPOINT_FILE_NAME));
  offsetCheckpoint.write(Collections.singletonMap(t1,6L));
  stateManager.initialize();
  stateManager.register(store1,stateRestoreCallback);
  assertEquals(5,stateRestoreCallback.restored.size());
}
