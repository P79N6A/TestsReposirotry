@Test public void shouldNotCloseStoresIfCloseAlreadyCalled() throws IOException {
  stateManager.initialize();
  initializeConsumer(1,1,t1);
  stateManager.register(new NoOpReadOnlyStore("t1-store"){
    @Override public void close(){
      if (!isOpen()) {
        throw new RuntimeException("store already closed");
      }
      super.close();
    }
  }
,stateRestoreCallback);
  stateManager.close(Collections.<TopicPartition,Long>emptyMap());
  stateManager.close(Collections.<TopicPartition,Long>emptyMap());
}
