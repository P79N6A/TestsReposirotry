@Test public void shouldWriteCheckpointsOnClose() throws IOException {
  stateManager.initialize();
  initializeConsumer(1,1,t1);
  stateManager.register(store1,stateRestoreCallback);
  final Map<TopicPartition,Long> expected=Collections.singletonMap(t1,25L);
  stateManager.close(expected);
  final Map<TopicPartition,Long> result=readOffsetsCheckpoint();
  assertEquals(expected,result);
}
