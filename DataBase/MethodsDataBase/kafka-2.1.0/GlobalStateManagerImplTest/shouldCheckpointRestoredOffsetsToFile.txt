@Test public void shouldCheckpointRestoredOffsetsToFile() throws IOException {
  stateManager.initialize();
  initializeConsumer(10,1,t1);
  stateManager.register(store1,stateRestoreCallback);
  stateManager.close(Collections.<TopicPartition,Long>emptyMap());
  final Map<TopicPartition,Long> checkpointMap=stateManager.checkpointed();
  assertThat(checkpointMap,equalTo(Collections.singletonMap(t1,11L)));
  assertThat(readOffsetsCheckpoint(),equalTo(checkpointMap));
}
