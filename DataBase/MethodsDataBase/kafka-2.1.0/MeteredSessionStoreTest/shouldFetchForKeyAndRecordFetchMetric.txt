@Test public void shouldFetchForKeyAndRecordFetchMetric(){
  EasyMock.expect(inner.findSessions(Bytes.wrap(keyBytes),0,Long.MAX_VALUE)).andReturn(new KeyValueIteratorStub<>(Collections.singleton(KeyValue.pair(windowedKeyBytes,keyBytes)).iterator()));
  init();
  final KeyValueIterator<Windowed<String>,String> iterator=metered.fetch(key);
  assertThat(iterator.next().value,equalTo(key));
  assertFalse(iterator.hasNext());
  iterator.close();
  final KafkaMetric metric=metric("fetch-rate");
  assertTrue((Double)metric.metricValue() > 0);
  EasyMock.verify(inner);
}
