@Test public void shouldHaveCachingAndChangeLoggingWhenBothEnabled(){
  final KeyValueStore<String,String> store=builder.withLoggingEnabled(Collections.emptyMap()).withCachingEnabled().build();
  final WrappedStateStore caching=(WrappedStateStore)((WrappedStateStore)store).wrappedStore();
  final WrappedStateStore changeLogging=(WrappedStateStore)caching.wrappedStore();
  assertThat(store,instanceOf(MeteredKeyValueStore.class));
  assertThat(caching,instanceOf(CachingKeyValueStore.class));
  assertThat(changeLogging,instanceOf(ChangeLoggingKeyValueBytesStore.class));
  assertThat(changeLogging.wrappedStore(),CoreMatchers.equalTo(inner));
}
