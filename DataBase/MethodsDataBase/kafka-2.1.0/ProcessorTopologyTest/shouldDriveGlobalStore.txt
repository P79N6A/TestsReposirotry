@Test public void shouldDriveGlobalStore(){
  final String storeName="my-store";
  final String global="global";
  final String topic="topic";
  topology.addGlobalStore(Stores.keyValueStoreBuilder(Stores.inMemoryKeyValueStore(storeName),Serdes.String(),Serdes.String()).withLoggingDisabled(),global,STRING_DESERIALIZER,STRING_DESERIALIZER,topic,"processor",define(new StatefulProcessor(storeName)));
  driver=new TopologyTestDriver(topology,props);
  final KeyValueStore<String,String> globalStore=driver.getKeyValueStore(storeName);
  driver.pipeInput(recordFactory.create(topic,"key1","value1"));
  driver.pipeInput(recordFactory.create(topic,"key2","value2"));
  assertEquals("value1",globalStore.get("key1"));
  assertEquals("value2",globalStore.get("key2"));
}
