@Test public void testThrottle() throws Exception {
  MockTime time=new MockTime(0,0,0);
  ThrottleMock throttle=new ThrottleMock(time,3);
  Assert.assertFalse(throttle.increment());
  Assert.assertEquals(0,time.milliseconds());
  Assert.assertFalse(throttle.increment());
  Assert.assertEquals(0,time.milliseconds());
  Assert.assertFalse(throttle.increment());
  Assert.assertEquals(0,time.milliseconds());
  Assert.assertTrue(throttle.increment());
  Assert.assertEquals(100,time.milliseconds());
  time.sleep(50);
  Assert.assertFalse(throttle.increment());
  Assert.assertEquals(150,time.milliseconds());
  Assert.assertFalse(throttle.increment());
  Assert.assertEquals(150,time.milliseconds());
  Assert.assertTrue(throttle.increment());
  Assert.assertEquals(200,time.milliseconds());
}
