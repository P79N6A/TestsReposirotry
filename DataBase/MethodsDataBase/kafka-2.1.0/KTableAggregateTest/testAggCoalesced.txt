@Test public void testAggCoalesced(){
  final StreamsBuilder builder=new StreamsBuilder();
  final String topic1="topic1";
  final KTable<String,String> table1=builder.table(topic1,consumed);
  final KTable<String,String> table2=table1.groupBy(MockMapper.<String,String>noOpKeyValueMapper(),stringSerialzied).aggregate(MockInitializer.STRING_INIT,MockAggregator.TOSTRING_ADDER,MockAggregator.TOSTRING_REMOVER,Materialized.<String,String,KeyValueStore<Bytes,byte[]>>as("topic1-Canonized").withValueSerde(stringSerde));
  table2.toStream().process(supplier);
  driver.setUp(builder,stateDir);
  driver.process(topic1,"A","1");
  driver.process(topic1,"A","3");
  driver.process(topic1,"A","4");
  driver.flushState();
  assertEquals(Utils.mkList("A:0+4"),supplier.theCapturedProcessor().processed);
}
