@Test @SuppressWarnings("deprecation") public void testConstructionWithMissingRelativeOffset(){
  TopicPartition tp=new TopicPartition("foo",0);
  long timestamp=2340234L;
  int keySize=3;
  int valueSize=5;
  Long checksum=908923L;
  RecordMetadata metadata=new RecordMetadata(tp,-1L,-1L,timestamp,checksum,keySize,valueSize);
  assertEquals(tp.topic(),metadata.topic());
  assertEquals(tp.partition(),metadata.partition());
  assertEquals(timestamp,metadata.timestamp());
  assertFalse(metadata.hasOffset());
  assertEquals(-1L,metadata.offset());
  assertEquals(checksum.longValue(),metadata.checksum());
  assertEquals(keySize,metadata.serializedKeySize());
  assertEquals(valueSize,metadata.serializedValueSize());
}
