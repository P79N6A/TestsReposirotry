@Test public void testCreateTopics() throws Exception {
  try (AdminClientUnitTestEnv env=mockClientEnv()){
    env.kafkaClient().setNodeApiVersions(NodeApiVersions.create());
    env.kafkaClient().setNode(env.cluster().controller());
    env.kafkaClient().prepareResponse(body -> body instanceof CreateTopicsRequest,new CreateTopicsResponse(Collections.singletonMap("myTopic",new ApiError(Errors.NONE,""))));
    KafkaFuture<Void> future=env.adminClient().createTopics(Collections.singleton(new NewTopic("myTopic",Collections.singletonMap(0,asList(0,1,2)))),new CreateTopicsOptions().timeoutMs(10000)).all();
    future.get();
  }
 }
