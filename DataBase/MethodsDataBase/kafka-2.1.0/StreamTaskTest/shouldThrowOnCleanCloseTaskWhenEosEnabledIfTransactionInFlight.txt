@Test public void shouldThrowOnCleanCloseTaskWhenEosEnabledIfTransactionInFlight(){
  task=createStatelessTask(createConfig(true));
  try {
    task.close(true,false);
    fail("should have throw IllegalStateException");
  }
 catch (  final IllegalStateException expected) {
  }
  task=null;
  assertTrue(producer.closed());
}
