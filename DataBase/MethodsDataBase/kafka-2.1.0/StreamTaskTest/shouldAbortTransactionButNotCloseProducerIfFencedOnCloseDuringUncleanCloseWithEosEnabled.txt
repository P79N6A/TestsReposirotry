@Test public void shouldAbortTransactionButNotCloseProducerIfFencedOnCloseDuringUncleanCloseWithEosEnabled(){
  task=createStatelessTask(createConfig(true));
  task.initializeTopology();
  producer.fenceProducerOnClose();
  task.close(false,false);
  task=null;
  assertTrue(producer.transactionAborted());
  assertFalse(producer.closed());
}
