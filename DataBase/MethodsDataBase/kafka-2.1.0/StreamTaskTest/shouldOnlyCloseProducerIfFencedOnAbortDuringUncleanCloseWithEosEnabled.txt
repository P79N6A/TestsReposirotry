@Test public void shouldOnlyCloseProducerIfFencedOnAbortDuringUncleanCloseWithEosEnabled(){
  task=createStatelessTask(createConfig(true));
  task.initializeTopology();
  producer.fenceProducer();
  task.close(false,false);
  task=null;
  assertTrue(producer.transactionInFlight());
  assertFalse(producer.transactionAborted());
  assertFalse(producer.transactionCommitted());
  assertTrue(producer.closed());
}
