@Test public void shouldWrapProducerFencedExceptionWithTaskMigragedExceptionInSuspendWhenCommitting(){
  task=createStatelessTask(createConfig(true));
  producer.fenceProducer();
  try {
    task.suspend();
    fail("Should have throws TaskMigratedException");
  }
 catch (  final TaskMigratedException expected) {
    assertTrue(expected.getCause() instanceof ProducerFencedException);
  }
  task=null;
  assertFalse(producer.transactionCommitted());
}
