@Test public void shouldRespectPunctuateCancellationStreamTime(){
  task=createStatelessTask(createConfig(false));
  task.initializeStateStores();
  task.initializeTopology();
  task.addRecords(partition1,Arrays.asList(getConsumerRecord(partition1,20),getConsumerRecord(partition1,30),getConsumerRecord(partition1,40)));
  task.addRecords(partition2,Arrays.asList(getConsumerRecord(partition2,25),getConsumerRecord(partition2,35),getConsumerRecord(partition2,45)));
  assertFalse(task.maybePunctuateStreamTime());
  assertTrue(task.process());
  assertTrue(task.maybePunctuateStreamTime());
  assertTrue(task.process());
  assertFalse(task.maybePunctuateStreamTime());
  assertTrue(task.process());
  processorStreamTime.mockProcessor.scheduleCancellable.cancel();
  assertFalse(task.maybePunctuateStreamTime());
  processorStreamTime.mockProcessor.checkAndClearPunctuateResult(PunctuationType.STREAM_TIME,20L);
}
