@Test public void shouldNotAbortTransactionAndNotCloseProducerOnErrorDuringCleanCloseWithEosEnabled(){
  task=createTaskThatThrowsException(true);
  task.initializeTopology();
  try {
    task.close(true,false);
    fail("should have thrown runtime exception");
  }
 catch (  final RuntimeException expected) {
    task=null;
  }
  assertTrue(producer.transactionInFlight());
  assertFalse(producer.closed());
}
