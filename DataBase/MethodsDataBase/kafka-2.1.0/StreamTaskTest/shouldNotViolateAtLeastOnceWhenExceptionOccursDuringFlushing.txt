@Test public void shouldNotViolateAtLeastOnceWhenExceptionOccursDuringFlushing(){
  task=createTaskThatThrowsException(false);
  task.initializeStateStores();
  task.initializeTopology();
  try {
    task.commit();
    fail("should have thrown an exception");
  }
 catch (  final Exception e) {
  }
}
