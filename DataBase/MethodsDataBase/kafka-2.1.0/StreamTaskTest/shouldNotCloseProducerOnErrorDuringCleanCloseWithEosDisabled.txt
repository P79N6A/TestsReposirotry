@Test public void shouldNotCloseProducerOnErrorDuringCleanCloseWithEosDisabled(){
  task=createTaskThatThrowsException(false);
  try {
    task.close(true,false);
    fail("should have thrown runtime exception");
  }
 catch (  final RuntimeException expected) {
    task=null;
  }
  assertFalse(producer.closed());
}
