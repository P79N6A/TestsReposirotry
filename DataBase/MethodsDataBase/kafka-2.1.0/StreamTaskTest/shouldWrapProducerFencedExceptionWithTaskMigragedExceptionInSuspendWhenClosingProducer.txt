@Test public void shouldWrapProducerFencedExceptionWithTaskMigragedExceptionInSuspendWhenClosingProducer(){
  task=createStatelessTask(createConfig(true));
  task.initializeTopology();
  producer.fenceProducerOnClose();
  try {
    task.suspend();
    fail("Should have throws TaskMigratedException");
  }
 catch (  final TaskMigratedException expected) {
    assertTrue(expected.getCause() instanceof ProducerFencedException);
  }
  assertTrue(producer.transactionCommitted());
}
