@Test public void shouldAlwaysCommitIfEosEnabled(){
  task=createStatelessTask(createConfig(true));
  final RecordCollectorImpl recordCollector=new RecordCollectorImpl("StreamTask",new LogContext("StreamTaskTest "),new DefaultProductionExceptionHandler(),new Metrics().sensor("skipped-records"));
  recordCollector.init(producer);
  task.initializeStateStores();
  task.initializeTopology();
  task.punctuate(processorSystemTime,5,PunctuationType.WALL_CLOCK_TIME,new Punctuator(){
    @Override public void punctuate(    final long timestamp){
      recordCollector.send("result-topic1",3,5,null,0,time.milliseconds(),new IntegerSerializer(),new IntegerSerializer());
    }
  }
);
  task.commit();
  assertEquals(1,producer.history().size());
}
