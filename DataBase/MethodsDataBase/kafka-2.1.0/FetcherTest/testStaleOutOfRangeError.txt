@Test public void testStaleOutOfRangeError(){
  subscriptions.assignFromUser(singleton(tp0));
  subscriptions.seek(tp0,0);
  assertEquals(1,fetcher.sendFetches());
  client.prepareResponse(fullFetchResponse(tp0,this.records,Errors.OFFSET_OUT_OF_RANGE,100L,0));
  subscriptions.seek(tp0,1);
  consumerClient.poll(time.timer(0));
  assertEquals(0,fetcher.fetchedRecords().size());
  assertFalse(subscriptions.isOffsetResetNeeded(tp0));
  assertEquals(1,subscriptions.position(tp0).longValue());
}
