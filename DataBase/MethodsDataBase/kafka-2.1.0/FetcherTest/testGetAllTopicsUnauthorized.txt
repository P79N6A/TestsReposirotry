@Test public void testGetAllTopicsUnauthorized(){
  client.prepareResponse(newMetadataResponse(topicName,Errors.TOPIC_AUTHORIZATION_FAILED));
  try {
    fetcher.getAllTopicMetadata(time.timer(10L));
    fail();
  }
 catch (  TopicAuthorizationException e) {
    assertEquals(singleton(topicName),e.unauthorizedTopics());
  }
}
