@Test public void testGetTopicMetadataLeaderNotAvailable(){
  client.prepareResponse(newMetadataResponse(topicName,Errors.LEADER_NOT_AVAILABLE));
  client.prepareResponse(newMetadataResponse(topicName,Errors.NONE));
  Map<String,List<PartitionInfo>> topicMetadata=fetcher.getTopicMetadata(new MetadataRequest.Builder(Collections.singletonList(topicName),true),time.timer(5000L));
  assertTrue(topicMetadata.containsKey(topicName));
}
