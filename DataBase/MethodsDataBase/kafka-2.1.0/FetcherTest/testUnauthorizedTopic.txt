@Test public void testUnauthorizedTopic(){
  subscriptions.assignFromUser(singleton(tp0));
  subscriptions.seek(tp0,0);
  assertEquals(1,fetcher.sendFetches());
  client.prepareResponse(fullFetchResponse(tp0,this.records,Errors.TOPIC_AUTHORIZATION_FAILED,100L,0));
  consumerClient.poll(time.timer(0));
  try {
    fetcher.fetchedRecords();
    fail("fetchedRecords should have thrown");
  }
 catch (  TopicAuthorizationException e) {
    assertEquals(singleton(topicName),e.unauthorizedTopics());
  }
}
