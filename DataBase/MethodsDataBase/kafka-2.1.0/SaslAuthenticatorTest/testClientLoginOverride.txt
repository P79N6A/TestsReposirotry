/** 
 * Tests SASL login class override.
 */
@Test public void testClientLoginOverride() throws Exception {
  SecurityProtocol securityProtocol=SecurityProtocol.SASL_PLAINTEXT;
  TestJaasConfig jaasConfig=configureMechanisms("PLAIN",Collections.singletonList("PLAIN"));
  jaasConfig.setClientOptions("PLAIN","invaliduser","invalidpassword");
  server=createEchoServer(securityProtocol);
  saslClientConfigs.put(SaslConfigs.SASL_LOGIN_CLASS,TestLogin.class.getName());
  createAndCheckClientConnection(securityProtocol,"1");
  assertEquals(1,TestLogin.loginCount.get());
  saslClientConfigs.remove(SaslConfigs.SASL_LOGIN_CLASS);
  createAndCheckClientConnectionFailure(securityProtocol,"invalid");
  assertEquals(1,TestLogin.loginCount.get());
}
