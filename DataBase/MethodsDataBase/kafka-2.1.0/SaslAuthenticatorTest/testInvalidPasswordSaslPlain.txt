/** 
 * Tests that SASL/PLAIN clients with invalid password fail authentication.
 */
@Test public void testInvalidPasswordSaslPlain() throws Exception {
  String node="0";
  SecurityProtocol securityProtocol=SecurityProtocol.SASL_SSL;
  TestJaasConfig jaasConfig=configureMechanisms("PLAIN",Arrays.asList("PLAIN"));
  jaasConfig.setClientOptions("PLAIN",TestJaasConfig.USERNAME,"invalidpassword");
  server=createEchoServer(securityProtocol);
  createAndCheckClientAuthenticationFailure(securityProtocol,node,"PLAIN","Authentication failed: Invalid username or password");
  server.verifyAuthenticationMetrics(0,1);
}
