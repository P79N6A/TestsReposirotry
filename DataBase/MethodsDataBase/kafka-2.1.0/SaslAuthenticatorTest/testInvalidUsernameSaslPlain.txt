/** 
 * Tests that SASL/PLAIN clients with invalid username fail authentication.
 */
@Test public void testInvalidUsernameSaslPlain() throws Exception {
  String node="0";
  SecurityProtocol securityProtocol=SecurityProtocol.SASL_SSL;
  TestJaasConfig jaasConfig=configureMechanisms("PLAIN",Arrays.asList("PLAIN"));
  jaasConfig.setClientOptions("PLAIN","invaliduser",TestJaasConfig.PASSWORD);
  server=createEchoServer(securityProtocol);
  createAndCheckClientAuthenticationFailure(securityProtocol,node,"PLAIN","Authentication failed: Invalid username or password");
  server.verifyAuthenticationMetrics(0,1);
}
