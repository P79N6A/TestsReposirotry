/** 
 * Tests SASL/SCRAM with username containing characters that need to be encoded.
 */
@Test public void testScramUsernameWithSpecialCharacters() throws Exception {
  SecurityProtocol securityProtocol=SecurityProtocol.SASL_SSL;
  String username="special user= test,scram";
  String password=username + "-password";
  TestJaasConfig jaasConfig=configureMechanisms("SCRAM-SHA-256",Arrays.asList("SCRAM-SHA-256"));
  Map<String,Object> options=new HashMap<>();
  options.put("username",username);
  options.put("password",password);
  jaasConfig.createOrUpdateEntry(TestJaasConfig.LOGIN_CONTEXT_CLIENT,ScramLoginModule.class.getName(),options);
  server=createEchoServer(securityProtocol);
  updateScramCredentialCache(username,password);
  createAndCheckClientConnection(securityProtocol,"0");
}
