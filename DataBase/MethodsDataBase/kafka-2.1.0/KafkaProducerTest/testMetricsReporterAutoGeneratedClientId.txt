@Test public void testMetricsReporterAutoGeneratedClientId(){
  Properties props=new Properties();
  props.setProperty(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG,"localhost:9999");
  props.setProperty(ProducerConfig.METRIC_REPORTER_CLASSES_CONFIG,MockMetricsReporter.class.getName());
  KafkaProducer<String,String> producer=new KafkaProducer<>(props,new StringSerializer(),new StringSerializer());
  MockMetricsReporter mockMetricsReporter=(MockMetricsReporter)producer.metrics.reporters().get(0);
  Assert.assertEquals(producer.getClientId(),mockMetricsReporter.clientId);
  producer.close();
}
