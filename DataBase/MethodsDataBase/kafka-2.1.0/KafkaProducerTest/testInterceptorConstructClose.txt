@Test public void testInterceptorConstructClose(){
  try {
    Properties props=new Properties();
    props.setProperty(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG,"localhost:9999");
    props.setProperty(ProducerConfig.INTERCEPTOR_CLASSES_CONFIG,MockProducerInterceptor.class.getName());
    props.setProperty(MockProducerInterceptor.APPEND_STRING_PROP,"something");
    KafkaProducer<String,String> producer=new KafkaProducer<>(props,new StringSerializer(),new StringSerializer());
    assertEquals(1,MockProducerInterceptor.INIT_COUNT.get());
    assertEquals(0,MockProducerInterceptor.CLOSE_COUNT.get());
    Assert.assertNull(MockProducerInterceptor.CLUSTER_META.get());
    producer.close();
    assertEquals(1,MockProducerInterceptor.INIT_COUNT.get());
    assertEquals(1,MockProducerInterceptor.CLOSE_COUNT.get());
  }
  finally {
    MockProducerInterceptor.resetCounters();
  }
}
