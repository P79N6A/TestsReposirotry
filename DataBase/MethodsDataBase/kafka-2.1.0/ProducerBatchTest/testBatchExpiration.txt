/** 
 * A  {@link ProducerBatch} configured using a timestamp preceding its create time is interpreted correctlyas not expired by  {@link ProducerBatch#hasReachedDeliveryTimeout(long,long)}.
 */
@Test public void testBatchExpiration(){
  long deliveryTimeoutMs=10240;
  ProducerBatch batch=new ProducerBatch(new TopicPartition("topic",1),memoryRecordsBuilder,now);
  assertFalse(batch.hasReachedDeliveryTimeout(deliveryTimeoutMs,now - 2));
  assertTrue(batch.hasReachedDeliveryTimeout(deliveryTimeoutMs,now + deliveryTimeoutMs));
}
