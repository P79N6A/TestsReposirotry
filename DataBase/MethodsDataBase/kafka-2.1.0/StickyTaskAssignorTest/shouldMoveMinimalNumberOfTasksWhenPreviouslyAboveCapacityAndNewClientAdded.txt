@Test public void shouldMoveMinimalNumberOfTasksWhenPreviouslyAboveCapacityAndNewClientAdded(){
  final Set<TaskId> p1PrevTasks=Utils.mkSet(task00,task02);
  final Set<TaskId> p2PrevTasks=Utils.mkSet(task01,task03);
  createClientWithPreviousActiveTasks(p1,1,task00,task02);
  createClientWithPreviousActiveTasks(p2,1,task01,task03);
  createClientWithPreviousActiveTasks(p3,1);
  final StickyTaskAssignor<Integer> taskAssignor=createTaskAssignor(task00,task02,task01,task03);
  taskAssignor.assign(0);
  final Set<TaskId> p3ActiveTasks=clients.get(p3).activeTasks();
  assertThat(p3ActiveTasks.size(),equalTo(1));
  if (p1PrevTasks.removeAll(p3ActiveTasks)) {
    assertThat(clients.get(p2).activeTasks(),equalTo(p2PrevTasks));
  }
 else {
    assertThat(clients.get(p1).activeTasks(),equalTo(p1PrevTasks));
  }
}
