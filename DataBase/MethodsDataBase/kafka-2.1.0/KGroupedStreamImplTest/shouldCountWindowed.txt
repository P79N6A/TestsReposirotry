@Test public void shouldCountWindowed(){
  final List<KeyValue<Windowed<String>,Long>> results=new ArrayList<>();
  groupedStream.windowedBy(TimeWindows.of(ofMillis(500L))).count(Materialized.<String,Long,WindowStore<Bytes,byte[]>>as("aggregate-by-key-windowed")).toStream().foreach(new ForeachAction<Windowed<String>,Long>(){
    @Override public void apply(    final Windowed<String> key,    final Long value){
      results.add(KeyValue.pair(key,value));
    }
  }
);
  doCountWindowed(results);
}
