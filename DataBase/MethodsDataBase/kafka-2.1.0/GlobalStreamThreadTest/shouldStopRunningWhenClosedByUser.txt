@Test(timeout=30000) public void shouldStopRunningWhenClosedByUser() throws InterruptedException {
  initializeConsumer();
  globalStreamThread.start();
  globalStreamThread.shutdown();
  globalStreamThread.join();
  assertEquals(GlobalStreamThread.State.DEAD,globalStreamThread.state());
}
