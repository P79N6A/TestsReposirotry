@SuppressWarnings("unchecked") @Test public void shouldStayDeadAfterTwoCloses() throws InterruptedException {
  initializeConsumer();
  globalStreamThread.start();
  globalStreamThread.shutdown();
  globalStreamThread.join();
  globalStreamThread.shutdown();
  assertEquals(GlobalStreamThread.State.DEAD,globalStreamThread.state());
}
