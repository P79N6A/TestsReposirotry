@SuppressWarnings("unchecked") @Test public void shouldTransitionToRunningOnStart() throws InterruptedException {
  initializeConsumer();
  globalStreamThread.start();
  TestUtils.waitForCondition(new TestCondition(){
    @Override public boolean conditionMet(){
      return globalStreamThread.state() == RUNNING;
    }
  }
,10 * 1000,"Thread never started.");
  globalStreamThread.shutdown();
}
