@Test public void testComposeSuccessCase(){
  RequestFuture<String> future=new RequestFuture<>();
  RequestFuture<Integer> composed=future.compose(new RequestFutureAdapter<String,Integer>(){
    @Override public void onSuccess(    String value,    RequestFuture<Integer> future){
      future.complete(value.length());
    }
  }
);
  future.complete("hello");
  assertTrue(composed.isDone());
  assertTrue(composed.succeeded());
  assertEquals(5,(int)composed.value());
}
