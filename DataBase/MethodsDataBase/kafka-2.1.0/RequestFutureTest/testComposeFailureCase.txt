@Test public void testComposeFailureCase(){
  RequestFuture<String> future=new RequestFuture<>();
  RequestFuture<Integer> composed=future.compose(new RequestFutureAdapter<String,Integer>(){
    @Override public void onSuccess(    String value,    RequestFuture<Integer> future){
      future.complete(value.length());
    }
  }
);
  RuntimeException e=new RuntimeException();
  future.raise(e);
  assertTrue(composed.isDone());
  assertTrue(composed.failed());
  assertEquals(e,composed.exception());
}
