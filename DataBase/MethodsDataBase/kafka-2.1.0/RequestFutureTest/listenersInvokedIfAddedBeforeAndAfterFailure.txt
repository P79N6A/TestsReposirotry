@Test public void listenersInvokedIfAddedBeforeAndAfterFailure(){
  RequestFuture<Void> future=new RequestFuture<>();
  MockRequestFutureListener<Void> beforeListener=new MockRequestFutureListener<>();
  future.addListener(beforeListener);
  future.raise(new RuntimeException());
  MockRequestFutureListener<Void> afterListener=new MockRequestFutureListener<>();
  future.addListener(afterListener);
  assertOnFailureInvoked(beforeListener);
  assertOnFailureInvoked(afterListener);
}
