@Test public void shouldAllowJoinMaterializedSourceKTable(){
  final KTable<Bytes,String> table=builder.table("table-topic");
  builder.<Bytes,String>stream("stream-topic").join(table,MockValueJoiner.TOSTRING_JOINER);
  builder.build();
  final ProcessorTopology topology=builder.internalTopologyBuilder.rewriteTopology(new StreamsConfig(props)).build();
  assertThat(topology.stateStores().size(),equalTo(1));
  assertThat(topology.processorConnectedStateStores("KTABLE-SOURCE-0000000002"),equalTo(Collections.singleton(topology.stateStores().get(0).name())));
  assertThat(topology.processorConnectedStateStores("KSTREAM-JOIN-0000000004"),equalTo(Collections.singleton(topology.stateStores().get(0).name())));
}
