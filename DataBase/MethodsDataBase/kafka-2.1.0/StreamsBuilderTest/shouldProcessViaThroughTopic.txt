@Test public void shouldProcessViaThroughTopic(){
  final KStream<String,String> source=builder.stream("topic-source");
  final KStream<String,String> through=source.through("topic-sink");
  final MockProcessorSupplier<String,String> sourceProcessorSupplier=new MockProcessorSupplier<>();
  final MockProcessorSupplier<String,String> throughProcessorSupplier=new MockProcessorSupplier<>();
  source.process(sourceProcessorSupplier);
  through.process(throughProcessorSupplier);
  try (final TopologyTestDriver driver=new TopologyTestDriver(builder.build(),props)){
    final ConsumerRecordFactory<String,String> recordFactory=new ConsumerRecordFactory<>(new StringSerializer(),new StringSerializer());
    driver.pipeInput(recordFactory.create("topic-source","A","aa"));
  }
   assertEquals(Utils.mkList("A:aa"),sourceProcessorSupplier.theCapturedProcessor().processed);
  assertEquals(Utils.mkList("A:aa"),throughProcessorSupplier.theCapturedProcessor().processed);
}
