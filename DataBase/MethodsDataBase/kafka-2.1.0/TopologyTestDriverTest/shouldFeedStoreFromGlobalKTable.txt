@Test public void shouldFeedStoreFromGlobalKTable(){
  final StreamsBuilder builder=new StreamsBuilder();
  builder.globalTable("topic",Consumed.with(Serdes.String(),Serdes.String()),Materialized.as("globalStore"));
  try (final TopologyTestDriver testDriver=new TopologyTestDriver(builder.build(),config)){
    final KeyValueStore<String,String> globalStore=testDriver.getKeyValueStore("globalStore");
    Assert.assertNotNull(globalStore);
    Assert.assertNotNull(testDriver.getAllStateStores().get("globalStore"));
    final ConsumerRecordFactory<String,String> recordFactory=new ConsumerRecordFactory<>(new StringSerializer(),new StringSerializer());
    testDriver.pipeInput(recordFactory.create("topic","k1","value1"));
    Assert.assertEquals("value1",globalStore.get("k1"));
  }
 }
