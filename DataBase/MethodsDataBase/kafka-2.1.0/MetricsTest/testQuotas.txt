@Test public void testQuotas(){
  Sensor sensor=metrics.sensor("test");
  sensor.add(metrics.metricName("test1.total","grp1"),new Total(),new MetricConfig().quota(Quota.upperBound(5.0)));
  sensor.add(metrics.metricName("test2.total","grp1"),new Total(),new MetricConfig().quota(Quota.lowerBound(0.0)));
  sensor.record(5.0);
  try {
    sensor.record(1.0);
    fail("Should have gotten a quota violation.");
  }
 catch (  QuotaViolationException e) {
  }
  assertEquals(6.0,(Double)metrics.metrics().get(metrics.metricName("test1.total","grp1")).metricValue(),EPS);
  sensor.record(-6.0);
  try {
    sensor.record(-1.0);
    fail("Should have gotten a quota violation.");
  }
 catch (  QuotaViolationException e) {
  }
}
