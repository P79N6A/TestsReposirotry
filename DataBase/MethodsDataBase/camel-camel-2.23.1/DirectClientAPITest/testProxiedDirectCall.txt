@Test public void testProxiedDirectCall() throws Exception {
  context.start();
  new RouteBuilder(){
    @Override public void configure() throws Exception {
      from("direct:proxy").to("bean:hello").setBody().simple("proxy to ${body}");
    }
  }
.addRoutesToCamelContext(context);
  BlockingQueue<String> queue=new LinkedBlockingDeque<>();
  Flowable.just(1,2,3).flatMap(camel.to("direct:proxy",String.class)::apply).doOnNext(queue::add).subscribe();
  for (int i=1; i <= 3; i++) {
    String res=queue.poll(1,TimeUnit.SECONDS);
    assertEquals("proxy to Hello " + i,res);
  }
}
