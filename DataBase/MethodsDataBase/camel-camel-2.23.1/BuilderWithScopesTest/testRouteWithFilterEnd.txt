@Test public void testRouteWithFilterEnd() throws Exception {
  List<String> expected=new ArrayList<>();
  expected.add("TO");
  runTest(new RouteBuilder(){
    public void configure(){
      errorHandler(deadLetterChannel("mock:error").redeliveryDelay(0).maximumRedeliveries(3));
      from("direct:a").filter(header("foo").isEqualTo("bar")).process(orderProcessor).end().process(toProcessor);
    }
  }
,expected,"banana");
}
