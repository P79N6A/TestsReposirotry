@Test public void testProducerBlocksResumeTest() throws Exception {
  context.suspendRoute("foo");
  ExecutorService executor=Executors.newSingleThreadExecutor();
  executor.submit(new Runnable(){
    @Override public void run(){
      try {
        Thread.sleep(200);
        log.info("Resuming consumer");
        context.resumeRoute("foo");
      }
 catch (      Exception e) {
      }
    }
  }
);
  getMockEndpoint("mock:result").expectedMessageCount(1);
  template.sendBody("direct:suspended?block=true&timeout=1000","hello world");
  assertMockEndpointsSatisfied();
  executor.shutdownNow();
}
