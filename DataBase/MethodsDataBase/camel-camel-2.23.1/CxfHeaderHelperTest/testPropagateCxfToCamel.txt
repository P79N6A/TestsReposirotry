@Test public void testPropagateCxfToCamel(){
  Exchange exchange=new DefaultExchange(context);
  org.apache.cxf.message.Message cxfMessage=new org.apache.cxf.message.MessageImpl();
  Map<String,List<String>> cxfHeaders=new TreeMap<>(String.CASE_INSENSITIVE_ORDER);
  cxfHeaders.put("Content-Length",Arrays.asList("241"));
  cxfHeaders.put("soapAction",Arrays.asList("urn:hello:world"));
  cxfHeaders.put("myfruitheader",Arrays.asList("peach"));
  cxfHeaders.put("mybrewheader",Arrays.asList("cappuccino","espresso"));
  cxfHeaders.put(Message.CONTENT_TYPE,Arrays.asList("text/xml"));
  cxfHeaders.put(Message.ENCODING,Arrays.asList("UTF-8"));
  cxfHeaders.put(Message.RESPONSE_CODE,Arrays.asList("201"));
  cxfHeaders.put(Message.REQUEST_URI,Arrays.asList("/base/hello/cxf"));
  cxfHeaders.put(Message.HTTP_REQUEST_METHOD,Arrays.asList("GET"));
  cxfHeaders.put(Message.PATH_INFO,Arrays.asList("/base/hello/cxf"));
  cxfHeaders.put(Message.BASE_PATH,Arrays.asList("/base"));
  cxfMessage.put(org.apache.cxf.message.Message.PROTOCOL_HEADERS,cxfHeaders);
  cxfMessage.put(Message.RESPONSE_CODE,"200");
  Map<String,Object> requestContext=Collections.singletonMap("request","true");
  Map<String,Object> responseContext=Collections.singletonMap("response","true");
  cxfMessage.put(Client.REQUEST_CONTEXT,requestContext);
  cxfMessage.put(Client.RESPONSE_CONTEXT,responseContext);
  CxfHeaderHelper.propagateCxfToCamel(new DefaultHeaderFilterStrategy(),cxfMessage,exchange.getIn(),exchange);
  Map<String,Object> camelHeaders=exchange.getIn().getHeaders();
  assertEquals("urn:hello:world",camelHeaders.get("soapaction"));
  assertEquals("urn:hello:world",camelHeaders.get("SoapAction"));
  assertEquals("241",camelHeaders.get("content-length"));
  assertEquals("peach",camelHeaders.get("MyFruitHeader"));
  assertEquals(Arrays.asList("cappuccino","espresso"),camelHeaders.get("MyBrewHeader"));
  assertEquals("text/xml; charset=UTF-8",camelHeaders.get(Exchange.CONTENT_TYPE));
  assertEquals("/base/hello/cxf",camelHeaders.get(Exchange.HTTP_URI));
  assertEquals("GET",camelHeaders.get(Exchange.HTTP_METHOD));
  assertEquals("/hello/cxf",camelHeaders.get(Exchange.HTTP_PATH));
  assertEquals("200",camelHeaders.get(Exchange.HTTP_RESPONSE_CODE));
  assertEquals(requestContext,camelHeaders.get(Client.REQUEST_CONTEXT));
  assertEquals(responseContext,camelHeaders.get(Client.RESPONSE_CONTEXT));
  assertNull(camelHeaders.get(Message.RESPONSE_CODE));
  assertNull(camelHeaders.get(Message.REQUEST_URI));
  assertNull(camelHeaders.get(Message.HTTP_REQUEST_METHOD));
  assertNull(camelHeaders.get(Message.PATH_INFO));
  assertNull(camelHeaders.get(Message.RESPONSE_CODE));
}
