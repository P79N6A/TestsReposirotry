@Test public void testWorking() throws Exception {
  int count=2;
  MockEndpoint e1=getMockEndpoint("mock:sub1");
  e1.expectedMinimumMessageCount(count);
  e1.assertIsSatisfied();
  MockEndpoint e2=getMockEndpoint("mock:sub2");
  e2.expectedMinimumMessageCount(count);
  e2.assertIsSatisfied();
  MockEndpoint e3=getMockEndpoint("mock:sub3");
  e3.expectedMinimumMessageCount(count);
  e3.assertIsSatisfied();
  for (int i=0; i < count; i++) {
    Exchange ex1=e1.getExchanges().get(i);
    Exchange ex2=e2.getExchanges().get(i);
    Exchange ex3=e3.getExchanges().get(i);
    assertEquals(ex1.getIn().getBody(),ex2.getIn().getBody());
    assertEquals(ex1.getIn().getBody(),ex3.getIn().getBody());
  }
}
