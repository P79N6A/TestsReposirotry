@Test public void testPollingConsumerWithoutLock() throws Exception {
  MockEndpoint mock=getMockEndpoint("mock:not-locked");
  MockEndpoint errMock=getMockEndpoint("mock:error");
  mock.expectedBodiesReceived("orders: 1");
  errMock.expectedMessageCount(1);
  errMock.message(0).body().isInstanceOf(OptimisticLockException.class);
  Map<String,Object> headers=new HashMap<>();
  headers.put("name","Donald%");
  template.asyncRequestBodyAndHeaders("direct:not-locked","message",headers);
  template.asyncRequestBodyAndHeaders("direct:not-locked","message",headers);
  assertMockEndpointsSatisfied();
}
