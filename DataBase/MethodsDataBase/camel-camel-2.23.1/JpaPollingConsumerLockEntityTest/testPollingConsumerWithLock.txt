@Test public void testPollingConsumerWithLock() throws Exception {
  MockEndpoint mock=getMockEndpoint("mock:locked");
  mock.expectedBodiesReceived("orders: 1","orders: 2");
  Map<String,Object> headers=new HashMap<>();
  headers.put("name","Donald%");
  template.asyncRequestBodyAndHeaders("direct:locked","message",headers);
  template.asyncRequestBodyAndHeaders("direct:locked","message",headers);
  assertMockEndpointsSatisfied();
}
