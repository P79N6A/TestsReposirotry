@Test public void testTimeOutRetryToException() throws Exception {
  when(of.get()).thenAnswer(new Answer<Object>(){
    @Override public Object answer(    InvocationOnMock invocation) throws Exception {
      throw new RuntimeException("Timed out waiting for operation");
    }
  }
);
  when(client.set(anyString(),anyInt(),any(),any(),any())).thenReturn(of);
  when(endpoint.getId()).thenReturn("123");
  when(endpoint.getOperation()).thenReturn("CCB_PUT");
  try {
    producer.process(exchange);
  }
 catch (  Exception e) {
    verify(of,times(3)).get();
  }
}
