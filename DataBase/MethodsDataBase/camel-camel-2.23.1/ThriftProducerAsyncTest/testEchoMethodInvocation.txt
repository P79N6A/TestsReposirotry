@Test @SuppressWarnings({"rawtypes","unchecked"}) public void testEchoMethodInvocation() throws Exception {
  LOG.info("Thrift echo method (return output as pass input parameter) async test start");
  final CountDownLatch latch=new CountDownLatch(1);
  List requestBody=new ArrayList();
  requestBody.add(new Work(THRIFT_TEST_NUM1,THRIFT_TEST_NUM2,Operation.MULTIPLY));
  responseBody=new Object();
  template.asyncCallbackSendBody("direct:thrift-echo",requestBody,new SynchronizationAdapter(){
    @Override public void onComplete(    Exchange exchange){
      responseBody=exchange.getOut().getBody();
      latch.countDown();
    }
    @Override public void onFailure(    Exchange exchange){
      responseBody=exchange.getException();
      latch.countDown();
    }
  }
);
  latch.await(5,TimeUnit.SECONDS);
  assertNotNull(responseBody);
  assertTrue(responseBody instanceof Work);
  assertEquals(THRIFT_TEST_NUM1,((Work)responseBody).num1);
  assertEquals(Operation.MULTIPLY,((Work)responseBody).op);
}
