@Test public void testEndpoint() throws Exception {
  List<Route> registeredRoutes=camelContext.getRoutes();
  assertEquals("number of routes",1,registeredRoutes.size());
  MasterEndpoint endpoint=(MasterEndpoint)registeredRoutes.get(0).getEndpoint();
  assertEquals("wrong endpoint uri","seda:bar",endpoint.getConsumerEndpointUri());
  String expectedBody="<matched/>";
  resultEndpoint.expectedBodiesReceived(expectedBody);
  Thread.sleep(5000);
  template.sendBodyAndHeader(expectedBody,"foo","bar");
  MockEndpoint.assertIsSatisfied(camelContext);
}
