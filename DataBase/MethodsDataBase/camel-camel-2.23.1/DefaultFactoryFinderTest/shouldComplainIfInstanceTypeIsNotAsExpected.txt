@Test public void shouldComplainIfInstanceTypeIsNotAsExpected() throws ClassNotFoundException, IOException {
  final Injector injector=mock(Injector.class);
  final TestImplA expected=new TestImplA();
  when(injector.newInstance(TestImplA.class)).thenReturn(expected);
  try {
    factoryFinder.newInstances("TestImplA",injector,TestImplB.class);
    fail("ClassCastException should have been thrown");
  }
 catch (  final ClassCastException e) {
    final String message=e.getMessage();
    assertThat(message,matchesPattern("Not instanceof org\\.apache\\.camel\\.impl\\.DefaultFactoryFinderTest\\$TestImplB " + "value: org\\.apache\\.camel\\.impl\\.DefaultFactoryFinderTest\\$TestImplA.*"));
  }
}
