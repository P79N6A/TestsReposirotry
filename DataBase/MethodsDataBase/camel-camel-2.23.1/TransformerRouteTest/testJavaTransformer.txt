@Test public void testJavaTransformer() throws Exception {
  MockEndpoint abcresult=getMockEndpoint("mock:abcresult");
  abcresult.expectedMessageCount(1);
  abcresult.whenAnyExchangeReceived(new Processor(){
    @Override public void process(    Exchange exchange) throws Exception {
      LOG.info("Asserting String -> XOrderResponse convertion");
      assertEquals(XOrderResponse.class,exchange.getIn().getBody().getClass());
    }
  }
);
  MockEndpoint xyzresult=getMockEndpoint("mock:xyzresult");
  xyzresult.expectedMessageCount(1);
  xyzresult.whenAnyExchangeReceived(new Processor(){
    @Override public void process(    Exchange exchange) throws Exception {
      LOG.info("Asserting String -> XOrderResponse convertion is not yet performed");
      assertEquals("response",exchange.getIn().getBody());
    }
  }
);
  Exchange exchange=new DefaultExchange(context,ExchangePattern.InOut);
  exchange.getIn().setBody(new AOrder());
  Exchange answerEx=template.send("direct:abc",exchange);
  if (answerEx.getException() != null) {
    throw answerEx.getException();
  }
  assertEquals(AOrderResponse.class,answerEx.getOut().getBody().getClass());
  assertMockEndpointsSatisfied();
}
