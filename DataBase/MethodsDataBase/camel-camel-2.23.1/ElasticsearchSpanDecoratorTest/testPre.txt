@Test public void testPre(){
  String indexName="twitter";
  String cluster="local";
  Endpoint endpoint=Mockito.mock(Endpoint.class);
  Exchange exchange=Mockito.mock(Exchange.class);
  Message message=Mockito.mock(Message.class);
  Mockito.when(endpoint.getEndpointUri()).thenReturn("elasticsearch://" + cluster + "?operation=INDEX&indexName="+ indexName+ "&indexType=tweet");
  Mockito.when(exchange.getIn()).thenReturn(message);
  SpanDecorator decorator=new ElasticsearchSpanDecorator();
  MockTracer tracer=new MockTracer();
  MockSpan span=tracer.buildSpan("TestSpan").start();
  decorator.pre(span,exchange,endpoint);
  assertEquals(ElasticsearchSpanDecorator.ELASTICSEARCH_DB_TYPE,span.tags().get(Tags.DB_TYPE.getKey()));
  assertEquals(indexName,span.tags().get(Tags.DB_INSTANCE.getKey()));
  assertEquals(cluster,span.tags().get(ElasticsearchSpanDecorator.ELASTICSEARCH_CLUSTER_TAG));
}
