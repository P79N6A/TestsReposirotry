@Test public void testCorsWithOrigin() throws Exception {
  getMockEndpoint("mock:update").expectedMessageCount(1);
  Exchange out=template.request("seda:post-say-bye",new Processor(){
    @Override public void process(    Exchange exchange) throws Exception {
      exchange.getIn().setHeader("Origin","mydomain");
      exchange.getIn().setBody("I was here");
    }
  }
);
  assertNotNull(out);
  assertEquals(RestConfiguration.CORS_ACCESS_CONTROL_ALLOW_METHODS,out.getOut().getHeader("Access-Control-Allow-Methods"));
  assertEquals(RestConfiguration.CORS_ACCESS_CONTROL_ALLOW_HEADERS,out.getOut().getHeader("Access-Control-Allow-Headers"));
  assertEquals(RestConfiguration.CORS_ACCESS_CONTROL_MAX_AGE,out.getOut().getHeader("Access-Control-Max-Age"));
  assertEquals("true",out.getOut().getHeader("Access-Control-Allow-Credentials"));
  assertEquals("mydomain",out.getOut().getHeader("Access-Control-Allow-Origin"));
  assertMockEndpointsSatisfied();
}
