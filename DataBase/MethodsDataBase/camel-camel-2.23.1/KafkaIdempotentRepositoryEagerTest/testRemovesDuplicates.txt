@Test public void testRemovesDuplicates() throws InterruptedException {
  for (int i=0; i < 10; i++) {
    template.sendBodyAndHeader("direct:in","Test message","id",i % 5);
  }
  assertEquals(5,kafkaIdempotentRepository.getDuplicateCount());
  assertEquals(5,mockOut.getReceivedCounter());
  assertEquals(10,mockBefore.getReceivedCounter());
}
