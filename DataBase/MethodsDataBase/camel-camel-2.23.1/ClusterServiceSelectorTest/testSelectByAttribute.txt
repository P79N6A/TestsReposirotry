@Test public void testSelectByAttribute() throws Exception {
  CamelContext context=null;
  try {
    DummyClusterService1 service1=new DummyClusterService1();
    service1.setAttribute("service.type","zookeeper");
    DummyClusterService2 service2=new DummyClusterService2();
    service2.setAttribute("service.type","file");
    context=new DefaultCamelContext();
    context.addService(service1);
    context.addService(service2);
    Optional<CamelClusterService> lookup;
    lookup=lookupService(context,ClusterServiceSelectors.attribute("service.type","zookeeper"));
    Assert.assertTrue(lookup.isPresent());
    Assert.assertEquals(service1,lookup.get());
    lookup=lookupService(context,ClusterServiceSelectors.attribute("service.type","file"));
    Assert.assertTrue(lookup.isPresent());
    Assert.assertEquals(service2,lookup.get());
    lookup=lookupService(context,ClusterServiceSelectors.attribute("service.type","consul"));
    Assert.assertFalse(lookup.isPresent());
  }
  finally {
    if (context != null) {
      context.stop();
    }
  }
}
