@Test public void testValidFilenameOnExchange() throws Exception {
  MockEndpoint mock=getMockEndpoint("mock:result");
  mock.expectedMessageCount(2);
  mock.allMessages().header(Exchange.FILE_NAME).isNotNull();
  template.sendBodyAndHeader("file:target/filename-consumer","Hello World",Exchange.FILE_NAME,"target/filename-consumer-hello.txt");
  template.sendBodyAndHeader("file:target/filename-consumer","Bye World",Exchange.FILE_NAME,"target/filename-consumer-bye.txt");
  context.startAllRoutes();
  assertMockEndpointsSatisfied();
  assertDirectoryEquals("target/filename-consumer-bye.txt",mock.getReceivedExchanges().get(0).getIn().getHeader(Exchange.FILE_NAME,String.class));
  assertDirectoryEquals("target/filename-consumer-hello.txt",mock.getReceivedExchanges().get(1).getIn().getHeader(Exchange.FILE_NAME,String.class));
}
