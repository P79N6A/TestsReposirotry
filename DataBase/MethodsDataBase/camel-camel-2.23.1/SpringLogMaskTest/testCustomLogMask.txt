@Test public void testCustomLogMask() throws Exception {
  final AbstractXmlApplicationContext applicationContext=new ClassPathXmlApplicationContext("org/apache/camel/component/log/SpringCustomLogMaskTest-context.xml");
  SpringCamelContext context=SpringCamelContext.springCamelContext(applicationContext);
  MockMaskingFormatter customFormatter=applicationContext.getBean(Constants.CUSTOM_LOG_MASK_REF,MockMaskingFormatter.class);
  context.start();
  ProducerTemplate template=context.createProducerTemplate();
  template.sendBodyAndHeader("direct:mock","password=passw0rd@","headerPassword","#header-password$");
  context.stop();
  Assert.assertTrue(customFormatter.received.contains("password=passw0rd@"));
}
