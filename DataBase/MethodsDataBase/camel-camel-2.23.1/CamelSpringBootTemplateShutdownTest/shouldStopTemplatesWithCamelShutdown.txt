@Test public void shouldStopTemplatesWithCamelShutdown() throws Exception {
  assertTrue(((ServiceSupport)consumerTemplate).isStarted());
  assertTrue(((ServiceSupport)producerTemplate).isStarted());
  assertTrue(((ServiceSupport)fluentProducerTemplate).isStarted());
  camelContext.stop();
  assertTrue(((ServiceSupport)camelContext).isStopped());
  assertTrue(((ServiceSupport)consumerTemplate).isStopped());
  assertTrue(((ServiceSupport)producerTemplate).isStopped());
  assertTrue(((ServiceSupport)fluentProducerTemplate).isStopped());
}
