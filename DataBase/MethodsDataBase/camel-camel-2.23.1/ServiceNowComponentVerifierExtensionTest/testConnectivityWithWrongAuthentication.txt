@Test public void testConnectivityWithWrongAuthentication(){
  Map<String,Object> parameters=getParameters();
  parameters.put("userName","unknown-user");
  parameters.remove("oauthClientId");
  parameters.remove("oauthClientSecret");
  ComponentVerifierExtension.Result result=getExtension().verify(ComponentVerifierExtension.Scope.CONNECTIVITY,parameters);
  Assert.assertEquals(ComponentVerifierExtension.Result.Status.ERROR,result.getStatus());
  Assert.assertEquals(1,result.getErrors().size());
  Assert.assertEquals(ComponentVerifierExtension.VerificationError.StandardCode.AUTHENTICATION,result.getErrors().get(0).getCode());
  Assert.assertNotNull(result.getErrors().get(0).getDetails().get(ComponentVerifierExtension.VerificationError.ExceptionAttribute.EXCEPTION_INSTANCE));
  Assert.assertEquals(401,result.getErrors().get(0).getDetails().get(ComponentVerifierExtension.VerificationError.HttpAttribute.HTTP_CODE));
  Assert.assertTrue(result.getErrors().get(0).getDetails().get(ComponentVerifierExtension.VerificationError.ExceptionAttribute.EXCEPTION_INSTANCE) instanceof ServiceNowException);
  Assert.assertTrue(result.getErrors().get(0).getParameterKeys().contains("userName"));
  Assert.assertTrue(result.getErrors().get(0).getParameterKeys().contains("password"));
  Assert.assertTrue(result.getErrors().get(0).getParameterKeys().contains("oauthClientId"));
  Assert.assertTrue(result.getErrors().get(0).getParameterKeys().contains("oauthClientSecret"));
}
