@Test public void testMultipleViewListeners() throws Exception {
  final TestClusterService service=new TestClusterService(UUID.randomUUID().toString());
  final TestClusterView view=service.getView("ns1").unwrap(TestClusterView.class);
  final int events=1 + new Random().nextInt(10);
  final Set<Integer> results=new HashSet<>();
  final CountDownLatch latch=new CountDownLatch(events);
  IntStream.range(0,events).forEach(i -> view.addEventListener((CamelClusterEventListener.Leadership)(v,l) -> {
    results.add(i);
    latch.countDown();
  }
));
  service.start();
  view.setLeader(true);
  latch.await(10,TimeUnit.SECONDS);
  IntStream.range(0,events).forEach(i -> Assert.assertTrue(results.contains(i)));
}
