@Test public void testMemberChanging() throws Exception {
  Set<String> members1=Collections.singleton("one");
  Set<String> members2=new TreeSet<>(Arrays.asList("one","two"));
  notifier.refreshLeadership(Optional.of("one"),System.currentTimeMillis(),50L,members1);
  notifier.refreshLeadership(Optional.of("two"),System.currentTimeMillis(),5000L,members2);
  Thread.sleep(80);
  assertEquals(Optional.of("two"),currentLeader);
  assertEquals(members2,currentMembers);
}
