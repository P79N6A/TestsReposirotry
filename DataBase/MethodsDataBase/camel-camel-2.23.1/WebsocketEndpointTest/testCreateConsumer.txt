/** 
 * Test method for  {@link org.apache.camel.component.websocket.WebsocketEndpoint#createConsumer(org.apache.camel.Processor)} .
 */
@Test public void testCreateConsumer() throws Exception {
  Consumer consumer=websocketEndpoint.createConsumer(processor);
  component.connect((WebsocketProducerConsumer)consumer);
  assertNotNull(consumer);
  assertEquals(WebsocketConsumer.class,consumer.getClass());
  InOrder inOrder=inOrder(component,processor);
  ArgumentCaptor<NodeSynchronization> synchronizationCaptor=ArgumentCaptor.forClass(NodeSynchronization.class);
  ArgumentCaptor<WebsocketConsumer> consumerCaptor=ArgumentCaptor.forClass(WebsocketConsumer.class);
  inOrder.verify(component,times(1)).addServlet(synchronizationCaptor.capture(),consumerCaptor.capture(),eq(REMAINING));
  inOrder.verifyNoMoreInteractions();
  assertEquals(DefaultNodeSynchronization.class,synchronizationCaptor.getValue().getClass());
  assertEquals(consumer,consumerCaptor.getValue());
}
