@Test public void testEnabledCamelServiceRegistry(){
  new ApplicationContextRunner().withConfiguration(AutoConfigurations.of(CamelAutoConfiguration.class,CamelCloudAutoConfiguration.class,CamelSpringCloudServiceRegistryAutoConfiguration.class)).withUserConfiguration(TestConfiguration.class).withPropertyValues("spring.main.banner-mode=off","ribbon.eureka.enabled=false","ribbon.enabled=false","camel.cloud.enabled=false","camel.cloud.service-registry.enabled=true").run(context -> {
    assertThat(context).hasSingleBean(org.springframework.cloud.client.serviceregistry.ServiceRegistry.class);
    assertThat(context).getBean(org.springframework.cloud.client.serviceregistry.ServiceRegistry.class).isInstanceOf(MyServiceRegistry.class);
    assertThat(context).hasSingleBean(org.apache.camel.cloud.ServiceRegistry.class);
    assertThat(context).getBean(org.apache.camel.cloud.ServiceRegistry.class).isInstanceOf(CamelSpringCloudServiceRegistry.class);
    assertThat(context).getBean(org.apache.camel.cloud.ServiceRegistry.class).hasFieldOrPropertyWithValue("nativeServiceRegistry",context.getBean(org.springframework.cloud.client.serviceregistry.ServiceRegistry.class));
  }
);
}
