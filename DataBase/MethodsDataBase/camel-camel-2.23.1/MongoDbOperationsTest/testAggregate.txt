@Test public void testAggregate() throws Exception {
  assertEquals(0,testCollection.count());
  pumpDataIntoTestCollection();
  List<Bson> aggregate=Arrays.asList(match(or(eq("scientist","Darwin"),eq("scientist","Einstein"))),group("$scientist",sum("count",1)));
  Object result=template.requestBody("direct:aggregate",aggregate);
  assertTrue("Result is not of type List",result instanceof List);
  @SuppressWarnings("unchecked") List<Document> resultList=(List<Document>)result;
  assertListSize("Result does not contain 2 elements",resultList,2);
}
