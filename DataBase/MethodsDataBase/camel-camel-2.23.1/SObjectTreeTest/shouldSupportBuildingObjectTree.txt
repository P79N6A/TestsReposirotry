@Test public void shouldSupportBuildingObjectTree(){
  final SObjectTree tree=new SObjectTree();
  tree.addObject(simpleAccount).addChildren("Contacts",smith,evans);
  tree.addObject(simpleAccount2);
  final SObjectNode firstAccountFromTree=tree.records.get(0);
  assertSame(simpleAccount,firstAccountFromTree.getObject());
  assertEquals("Account",firstAccountFromTree.getObjectType());
  final Iterator<SObjectNode> simpleAccountNodes=firstAccountFromTree.getChildNodes().iterator();
  final SObjectNode smithNode=simpleAccountNodes.next();
  assertSame(smith,smithNode.getObject());
  assertEquals("Contact",smithNode.getObjectType());
  final SObjectNode evansNode=simpleAccountNodes.next();
  assertSame(evans,evansNode.getObject());
  assertEquals("Contact",evansNode.getObjectType());
  final SObjectNode secondAccountFromTree=tree.records.get(1);
  assertSame(simpleAccount2,secondAccountFromTree.getObject());
  assertEquals("Account",secondAccountFromTree.getObjectType());
}
