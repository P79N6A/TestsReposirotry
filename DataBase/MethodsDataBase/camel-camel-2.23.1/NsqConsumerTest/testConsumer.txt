@Test public void testConsumer() throws NSQException, TimeoutException, InterruptedException {
  mockResultEndpoint.expectedMessageCount(1);
  mockResultEndpoint.setAssertPeriod(5000);
  NSQProducer producer=new NSQProducer();
  producer.addAddress("localhost",4150);
  producer.start();
  producer.produce(TOPIC,"Hello NSQ!".getBytes());
  mockResultEndpoint.assertIsSatisfied();
  assertEquals("Hello NSQ!",mockResultEndpoint.getReceivedExchanges().get(0).getIn().getBody(String.class));
}
