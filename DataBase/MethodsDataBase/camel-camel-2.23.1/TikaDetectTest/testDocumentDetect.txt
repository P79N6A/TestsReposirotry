@Test public void testDocumentDetect() throws Exception {
  File document=new File("src/test/resources/test.doc");
  template.sendBody("direct:start",document);
  resultEndpoint.setExpectedMessageCount(1);
  resultEndpoint.expectedMessagesMatches(new Predicate(){
    @Override public boolean matches(    Exchange exchange){
      Object body=exchange.getIn().getBody(String.class);
      assertThat(body,instanceOf(String.class));
      assertThat((String)body,containsString("application/x-tika-msoffice"));
      return true;
    }
  }
);
  resultEndpoint.assertIsSatisfied();
}
