@Test public void testLogListener() throws Exception {
  listenerFired=false;
  CamelContext context=createCamelContext();
  MockEndpoint mock=context.getEndpoint("mock:foo",MockEndpoint.class);
  mock.expectedMessageCount(1);
  context.addLogListener((exchange,camelLogger,message) -> {
    Assert.assertEquals("Got hello",message);
    listenerFired=true;
    return message + " - modified by listener";
  }
);
  context.start();
  context.createProducerTemplate().sendBody("direct:foo","hello");
  mock.assertIsSatisfied();
  Assert.assertEquals(true,listenerFired);
  context.stop();
}
