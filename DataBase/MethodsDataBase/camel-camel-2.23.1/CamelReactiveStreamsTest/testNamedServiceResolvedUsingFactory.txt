@Test public void testNamedServiceResolvedUsingFactory() throws Exception {
  ReactiveStreamsComponent component=new ReactiveStreamsComponent();
  component.setServiceType("test-service");
  DefaultCamelContext context=new DefaultCamelContext();
  context.addComponent(ReactiveStreamsConstants.SCHEME,component);
  try {
    context.start();
    CamelReactiveStreamsService service1=CamelReactiveStreams.get(context);
    CamelReactiveStreamsService service2=CamelReactiveStreams.get(context);
    Assert.assertEquals(service1,service2);
    Assert.assertTrue(service1 instanceof ReactiveStreamsTestService);
    Assert.assertEquals("test-service",service1.getId());
  }
  finally {
    context.stop();
  }
}
