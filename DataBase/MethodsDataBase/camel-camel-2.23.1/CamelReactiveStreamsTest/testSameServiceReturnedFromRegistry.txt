@Test public void testSameServiceReturnedFromRegistry() throws Exception {
  ReactiveStreamsComponent component=new ReactiveStreamsComponent();
  SimpleRegistry registry=new SimpleRegistry();
  registry.put("dummy",new ReactiveStreamsTestService("from-registry"));
  DefaultCamelContext context=new DefaultCamelContext(registry);
  context.addComponent(ReactiveStreamsConstants.SCHEME,component);
  try {
    context.start();
    CamelReactiveStreamsService service1=CamelReactiveStreams.get(context);
    CamelReactiveStreamsService service2=CamelReactiveStreams.get(context);
    Assert.assertEquals(service1,service2);
    Assert.assertTrue(service1 instanceof ReactiveStreamsTestService);
    Assert.assertEquals("from-registry",service1.getId());
  }
  finally {
    context.stop();
  }
}
