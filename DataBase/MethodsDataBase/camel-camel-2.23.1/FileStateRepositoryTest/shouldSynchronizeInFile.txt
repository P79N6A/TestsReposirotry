@Test public void shouldSynchronizeInFile() throws Exception {
  FileStateRepository repository=createRepository();
  repository.setState("key1","value1");
  repository.setState("key2","value2");
  repository.setState("key3","value3");
  FileStateRepository newRepository=createRepository();
  assertEquals("value1",newRepository.getState("key1"));
  assertEquals("value2",newRepository.getState("key2"));
  assertEquals("value3",newRepository.getState("key3"));
}
