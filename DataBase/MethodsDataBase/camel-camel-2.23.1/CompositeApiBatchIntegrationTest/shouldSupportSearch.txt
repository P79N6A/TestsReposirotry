@Test public void shouldSupportSearch(){
  final SObjectBatch batch=new SObjectBatch(version);
  batch.addSearch("FIND {United} IN Name Fields RETURNING Account (Name)");
  final SObjectBatchResponse response=testBatch(batch);
  final List<SObjectBatchResult> results=response.getResults();
  final SObjectBatchResult batchResult=results.get(0);
  final Object firstBatchResult=batchResult.getResult();
  final Object searchResult;
  if (firstBatchResult instanceof Map) {
    @SuppressWarnings("unchecked") final Map<String,Object> tmp=(Map<String,Object>)firstBatchResult;
    @SuppressWarnings("unchecked") final Map<String,Object> nested=(Map<String,Object>)tmp.getOrDefault("SearchResultWithMetadata",tmp);
    searchResult=nested.getOrDefault("searchRecords",nested.getOrDefault("SearchResults",nested));
  }
 else {
    searchResult=firstBatchResult;
  }
  final Map<String,Object> result;
  if (searchResult instanceof List) {
    @SuppressWarnings("unchecked") final Map<String,Object> tmp=(Map<String,Object>)((List)searchResult).get(0);
    result=tmp;
  }
 else {
    @SuppressWarnings("unchecked") final Map<String,Object> tmp=(Map<String,Object>)searchResult;
    result=tmp;
  }
  assertNotNull(result.get("Name"));
}
