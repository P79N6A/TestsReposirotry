@Test public void createKeypair() throws Exception {
  final String fingerPrint="fp";
  final String privatecKey="prk";
  when(osTestKeypair.getName()).thenReturn(KEYPAIR_NAME);
  when(osTestKeypair.getPublicKey()).thenReturn(dummyKeypair.getPublicKey());
  when(osTestKeypair.getFingerprint()).thenReturn(fingerPrint);
  when(osTestKeypair.getPrivateKey()).thenReturn(privatecKey);
  msg.setHeader(OpenstackConstants.OPERATION,OpenstackConstants.CREATE);
  msg.setHeader(OpenstackConstants.NAME,KEYPAIR_NAME);
  producer.process(exchange);
  verify(keypairService).create(nameCaptor.capture(),keypairCaptor.capture());
  assertEquals(KEYPAIR_NAME,nameCaptor.getValue());
  assertNull(keypairCaptor.getValue());
  Keypair result=msg.getBody(Keypair.class);
  assertEquals(fingerPrint,result.getFingerprint());
  assertEquals(privatecKey,result.getPrivateKey());
  assertEquals(dummyKeypair.getName(),result.getName());
  assertEquals(dummyKeypair.getPublicKey(),result.getPublicKey());
}
