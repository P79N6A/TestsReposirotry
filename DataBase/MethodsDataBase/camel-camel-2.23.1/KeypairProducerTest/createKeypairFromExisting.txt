@Test public void createKeypairFromExisting() throws Exception {
  msg.setHeader(OpenstackConstants.OPERATION,OpenstackConstants.CREATE);
  msg.setHeader(OpenstackConstants.NAME,KEYPAIR_NAME);
  String key="existing public key string";
  when(osTestKeypair.getPublicKey()).thenReturn(key);
  msg.setBody(key);
  producer.process(exchange);
  verify(keypairService).create(nameCaptor.capture(),keypairCaptor.capture());
  assertEquals(KEYPAIR_NAME,nameCaptor.getValue());
  assertEquals(key,keypairCaptor.getValue());
  Keypair result=msg.getBody(Keypair.class);
  assertEquals(dummyKeypair.getName(),result.getName());
  assertEquals(dummyKeypair.getFingerprint(),result.getFingerprint());
  assertEquals(dummyKeypair.getPrivateKey(),result.getPrivateKey());
  assertEquals(key,result.getPublicKey());
}
