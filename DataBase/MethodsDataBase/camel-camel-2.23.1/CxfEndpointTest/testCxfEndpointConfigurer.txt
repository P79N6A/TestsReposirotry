@Test public void testCxfEndpointConfigurer() throws Exception {
  SimpleRegistry registry=new SimpleRegistry();
  CxfEndpointConfigurer configurer=mock(CxfEndpointConfigurer.class);
  Processor processor=mock(Processor.class);
  registry.put("myConfigurer",configurer);
  CamelContext camelContext=new DefaultCamelContext(registry);
  CxfComponent cxfComponent=new CxfComponent(camelContext);
  CxfEndpoint endpoint=(CxfEndpoint)cxfComponent.createEndpoint(routerEndpointURI + "&cxfEndpointConfigurer=#myConfigurer");
  endpoint.createConsumer(processor);
  verify(configurer).configure(isA(AbstractWSDLBasedEndpointFactory.class));
  verify(configurer).configureServer(isA(Server.class));
  reset(configurer);
  Producer producer=endpoint.createProducer();
  producer.start();
  verify(configurer).configure(isA(AbstractWSDLBasedEndpointFactory.class));
  verify(configurer).configureClient(isA(Client.class));
}
