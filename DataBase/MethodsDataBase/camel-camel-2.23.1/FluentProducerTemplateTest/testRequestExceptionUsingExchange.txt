@Test public void testRequestExceptionUsingExchange() throws Exception {
  MockEndpoint mock=getMockEndpoint("mock:result");
  mock.expectedMessageCount(0);
  Exchange out=DefaultFluentProducerTemplate.on(context).withExchange(() -> {
    Exchange exchange=context.getEndpoint("direct:exception").createExchange(ExchangePattern.InOut);
    exchange.getIn().setBody("Hello World");
    return exchange;
  }
).to("direct:exception").send();
  assertTrue(out.isFailed());
  assertEquals("Forced exception by unit test",out.getException().getMessage());
  assertMockEndpointsSatisfied();
}
