@Test public void testRepositories(){
  CamelContext context=createContext("org/apache/camel/spring/health/HealthCheckRegistryTest.xml");
  Collection<HealthCheckRepository> repos=context.getHealthCheckRegistry().getRepositories();
  Assert.assertNotNull(repos);
  Assert.assertEquals(2,repos.size());
  Assert.assertTrue(repos.stream().anyMatch(RegistryRepository.class::isInstance));
  Assert.assertTrue(repos.stream().anyMatch(RoutesHealthCheckRepository.class::isInstance));
  Optional<RoutesHealthCheckRepository> repo=repos.stream().filter(RoutesHealthCheckRepository.class::isInstance).map(RoutesHealthCheckRepository.class::cast).findFirst();
  Assert.assertTrue(repo.isPresent());
  Assert.assertEquals(2,repo.get().evaluators().count());
  Assert.assertEquals(1,repo.get().evaluators().filter(RoutePerformanceCounterEvaluators.ExchangesFailed.class::isInstance).count());
  Assert.assertEquals(1,repo.get().evaluators().filter(RoutePerformanceCounterEvaluators.LastProcessingTime.class::isInstance).count());
  Assert.assertEquals(1,repo.get().evaluators("route-1").count());
  Assert.assertEquals(1,repo.get().evaluators("route-1").filter(RoutePerformanceCounterEvaluators.ExchangesInflight.class::isInstance).count());
}
