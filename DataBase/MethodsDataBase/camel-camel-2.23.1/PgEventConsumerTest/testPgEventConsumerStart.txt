@Test public void testPgEventConsumerStart() throws Exception {
  PGDataSource dataSource=mock(PGDataSource.class);
  PGConnection connection=mock(PGConnection.class);
  PreparedStatement statement=mock(PreparedStatement.class);
  PgEventEndpoint endpoint=mock(PgEventEndpoint.class);
  Processor processor=mock(Processor.class);
  when(endpoint.getDatasource()).thenReturn(dataSource);
  when(dataSource.getConnection()).thenReturn(connection);
  when(connection.prepareStatement("LISTEN camel")).thenReturn(statement);
  when(endpoint.getChannel()).thenReturn("camel");
  PgEventConsumer consumer=new PgEventConsumer(endpoint,processor);
  consumer.start();
  verify(connection).addNotificationListener("camel","camel",consumer);
  assertTrue(consumer.isStarted());
}
