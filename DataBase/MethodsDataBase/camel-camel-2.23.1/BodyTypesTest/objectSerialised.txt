@Test public void objectSerialised() throws Exception {
  Exchange exchange=new DefaultExchange(context);
  Map<String,String> body=new HashMap<>();
  body.put("KEY","VALUE1212");
  exchange.getIn().setBody(body);
  receiveResult.expectedMessageCount(1);
  producer.send(exchange);
  List<Exchange> sentExchanges=sendResult.getExchanges();
  assertEquals("Sent exchanges",1,sentExchanges.size());
  Exchange sentExchange=sentExchanges.get(0);
  assertTrue("Sent body type is byte[]",sentExchange.getIn().getBody() instanceof Map);
  receiveResult.assertIsSatisfied(5000);
  List<Exchange> receivedExchanges=receiveResult.getExchanges();
  assertNotNull("Received exchanges",receivedExchanges);
  Exchange receivedExchange=receivedExchanges.get(0);
  assertTrue("Received body is of byte[] type",receivedExchange.getIn().getBody() instanceof byte[]);
  Object bodyReceived=deserialize((byte[])receivedExchange.getIn().getBody());
  assertTrue("Received body is a Map ",((Map)bodyReceived).get("KEY").equals("VALUE1212"));
}
