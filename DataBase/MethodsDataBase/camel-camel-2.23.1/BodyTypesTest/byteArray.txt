@Test public void byteArray() throws Exception {
  Exchange exchange=new DefaultExchange(context);
  byte[] body={1,2,3};
  exchange.getIn().setBody(body);
  receiveResult.expectedMessageCount(1);
  producer.send(exchange);
  List<Exchange> sentExchanges=sendResult.getExchanges();
  assertEquals("Sent exchanges",1,sentExchanges.size());
  Exchange sentExchange=sentExchanges.get(0);
  assertTrue("Sent body type is byte[]",sentExchange.getIn().getBody() instanceof byte[]);
  assertTrue("Sent body type is the one sent",sentExchange.getIn().getBody() == body);
  receiveResult.assertIsSatisfied(5000);
  List<Exchange> receivedExchanges=receiveResult.getExchanges();
  assertNotNull("Received exchanges",receivedExchanges);
  Exchange receivedExchange=receivedExchanges.get(0);
  assertTrue("Received body is of byte[] type",receivedExchange.getIn().getBody() instanceof byte[]);
  assertTrue("Received body equals sent",Arrays.equals(body,(byte[])receivedExchange.getIn().getBody()));
}
