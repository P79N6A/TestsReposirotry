/** 
 * Verify that after processing a  {@link BatchMessage} twice with 30messages in for a total of 60 delivery attempts that we only see 30 messages end up at the final consumer. This is due to an exception being thrown during the processing of the first 30 messages which causes a redelivery.
 * @throws Exception
 */
@Test public void testRoute() throws Exception {
  final String destinationName="sjms:topic:one.consumer.two.route.batch.tx.test";
  int consumerRouteCount=2;
  int messageCount=20;
  int totalAttempts=2;
  runTest(destinationName,consumerRouteCount,messageCount,totalAttempts);
}
