@Test public void testSetEndpoints() throws Exception {
  CamelContextFactoryBean camelContext=new CamelContextFactoryBean();
  List<CamelEndpointFactoryBean> endpoints=new LinkedList<>();
  CamelEndpointFactoryBean endpoint=new CamelEndpointFactoryBean();
  endpoint.setId("endpoint1");
  endpoint.setUri("mock:end");
  endpoints.add(endpoint);
  camelContext.setEndpoints(endpoints);
  URL expectedContext=getClass().getResource("/org/apache/camel/spring/context-with-endpoint.xml");
  Diff diff=DiffBuilder.compare(expectedContext).withTest(Input.fromJaxb(camelContext)).ignoreWhitespace().ignoreComments().checkForSimilar().build();
  assertFalse("Expected context and actual context differ:\n" + diff.toString(),diff.hasDifferences());
}
