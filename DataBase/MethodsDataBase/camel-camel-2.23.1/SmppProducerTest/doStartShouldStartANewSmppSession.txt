@Test public void doStartShouldStartANewSmppSession() throws Exception {
  when(endpoint.getConnectionString()).thenReturn("smpp://smppclient@localhost:2775");
  BindParameter expectedBindParameters=new BindParameter(BindType.BIND_TX,"smppclient","password","cp",TypeOfNumber.UNKNOWN,NumberingPlanIndicator.UNKNOWN,"");
  when(session.connectAndBind("localhost",new Integer(2775),expectedBindParameters)).thenReturn("1");
  when(endpoint.isSingleton()).thenReturn(true);
  producer.doStart();
  verify(session).setEnquireLinkTimer(5000);
  verify(session).setTransactionTimer(10000);
  verify(session).addSessionStateListener(isA(SessionStateListener.class));
  verify(session).connectAndBind("localhost",new Integer(2775),expectedBindParameters);
}
