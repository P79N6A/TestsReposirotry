@SuppressWarnings("unchecked") @Test public void testEndpointHttpHeaders() throws Exception {
  final Map<String,Object> headers=new HashMap<>();
  final ClientEntity entity=(ClientEntity)requestBodyAndHeaders("direct:read-etag",null,headers);
  MockEndpoint mockEndpoint=getMockEndpoint("mock:check-etag-header");
  mockEndpoint.expectedMessageCount(1);
  mockEndpoint.assertIsSatisfied();
  Map<String,String> responseHttpHeaders=(Map<String,String>)mockEndpoint.getExchanges().get(0).getIn().getHeader("CamelOlingo4.responseHttpHeaders");
  assertEquals(responseHttpHeaders.get("ETag"),entity.getETag());
  Map<String,String> endpointHttpHeaders=new HashMap<>();
  endpointHttpHeaders.put("If-Match",entity.getETag());
  headers.put("CamelOlingo4.endpointHttpHeaders",endpointHttpHeaders);
  requestBodyAndHeaders("direct:delete-with-etag",null,headers);
  try {
    requestBody("direct:read-etag",null);
  }
 catch (  CamelExecutionException e) {
    assertStringContains(e.getCause().getMessage(),"The request resource is not found.");
  }
}
