@Test public void serverAction() throws Exception {
  when(serverService.action(anyString(),any())).thenReturn(ActionResponse.actionSuccess());
  when(endpoint.getOperation()).thenReturn(NovaConstants.ACTION);
  String id="myID";
  msg.setHeader(NovaConstants.ACTION,Action.PAUSE);
  msg.setHeader(OpenstackConstants.ID,id);
  producer.process(exchange);
  verify(serverService).action(idArgumentCaptor.capture(),actionArgumentCaptor.capture());
  assertEquals(id,idArgumentCaptor.getValue());
  assertTrue(actionArgumentCaptor.getValue() == Action.PAUSE);
  assertFalse(msg.isFault());
  assertNull(msg.getBody());
  final String failReason="fr";
  when(serverService.action(anyString(),any())).thenReturn(ActionResponse.actionFailed(failReason,401));
  producer.process(exchange);
  assertTrue(msg.isFault());
  assertTrue(msg.getBody(String.class).contains(failReason));
}
