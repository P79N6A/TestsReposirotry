@Test public void kafkaManualCommit() throws InterruptedException, IOException {
  to.expectedMessageCount(5);
  to.expectedBodiesReceivedInAnyOrder("message-0","message-1","message-2","message-3","message-4");
  to.allMessages().header(KafkaConstants.LAST_RECORD_BEFORE_COMMIT).isNotNull();
  for (int k=0; k < 5; k++) {
    String msg="message-" + k;
    ProducerRecord<String,String> data=new ProducerRecord<>(TOPIC,"1",msg);
    producer.send(data);
  }
  to.assertIsSatisfied(3000);
  assertEquals(5,StreamSupport.stream(MockConsumerInterceptor.recordsCaptured.get(0).records(TOPIC).spliterator(),false).count());
}
