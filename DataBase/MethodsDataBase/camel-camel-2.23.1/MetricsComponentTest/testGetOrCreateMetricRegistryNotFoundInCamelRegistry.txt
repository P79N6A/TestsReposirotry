@Test public void testGetOrCreateMetricRegistryNotFoundInCamelRegistry() throws Exception {
  when(camelRegistry.lookupByNameAndType("name",MetricRegistry.class)).thenReturn(null);
  when(camelRegistry.findByType(MetricRegistry.class)).thenReturn(Collections.<MetricRegistry>emptySet());
  MetricRegistry result=component.getOrCreateMetricRegistry(camelRegistry,"name");
  assertThat(result,is(notNullValue()));
  assertThat(result,is(not(metricRegistry)));
  inOrder.verify(camelRegistry,times(1)).lookupByNameAndType("name",MetricRegistry.class);
  inOrder.verify(camelRegistry,times(1)).findByType(MetricRegistry.class);
  inOrder.verifyNoMoreInteractions();
}
