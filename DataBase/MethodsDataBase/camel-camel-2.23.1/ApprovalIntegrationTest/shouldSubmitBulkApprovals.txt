@Test public void shouldSubmitBulkApprovals(){
  final List<ApprovalRequest> approvalRequests=accountIds.stream().map(id -> {
    final ApprovalRequest request=new ApprovalRequest();
    request.setContextId(id);
    request.setComments("Approval for " + id);
    request.setActionType(Action.Submit);
    return request;
  }
).collect(Collectors.toList());
  final ApprovalResult approvalResult=template.requestBody(String.format("salesforce:approval?" + "format=%s" + "&approvalActionType=Submit"+ "&approvalNextApproverIds=%s"+ "&approvalProcessDefinitionNameOrId=Test_Account_Process",format,userId),approvalRequests,ApprovalResult.class);
  assertEquals("Should have same number of approval results as requests",approvalRequests.size(),approvalResult.size());
}
