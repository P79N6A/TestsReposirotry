@Test public void shouldApplyValuesFromTemplate(){
  final ApprovalRequest request=new ApprovalRequest();
  request.setActionType(Action.Approve);
  request.setComments("Comment");
  request.setContextId("Context Id");
  final ApprovalRequest template=new ApprovalRequest();
  template.setActionType(Action.Reject);
  template.setComments("Template comment");
  template.setNextApproverIds(Collections.singletonList("Next approver "));
  final ApprovalRequest combined=request.applyTemplate(template);
  assertThat("Combined approval request should be a new instance",combined,both(not(sameInstance(request))).and(not(sameInstance(template))));
  assertEquals("Action type should not be overwritten",request.getActionType(),combined.getActionType());
  assertEquals("Comment should not be overwritten",request.getComments(),combined.getComments());
  assertEquals("Context id should not be overwritten",request.getContextId(),combined.getContextId());
  assertEquals("Next approver id should be taken from template",template.getNextApproverIds(),combined.getNextApproverIds());
}
