@Test public void testNonBatchMode() throws InterruptedException {
  MockEndpoint mock=getMockEndpoint("mock:result");
  mock.expectedMessageCount(1);
  mock.message(0).header(SqlConstants.SQL_UPDATE_COUNT).isEqualTo(1);
  mock.message(0).header("id").isEqualTo("4");
  mock.message(0).header("license").isEqualTo("GNU");
  mock.message(0).header("project").isEqualTo("nonBatch");
  Map<String,Object> headers=new HashMap<>();
  headers.put("id","4");
  headers.put("license","GNU");
  headers.put("project","nonBatch");
  template.sendBodyAndHeaders("direct:nonBatch","",headers);
  mock.assertIsSatisfied();
}
