@Test public void testNoAssertPeriodSecondMessageArrives() throws Exception {
  MockEndpoint mock=getMockEndpoint("mock:result");
  mock.expectedMessageCount(1);
  template.sendBody("direct:a","A");
  final CountDownLatch latch=new CountDownLatch(1);
  ExecutorService executor=Executors.newSingleThreadExecutor();
  executor.execute(new Runnable(){
    public void run(){
      try {
        latch.await();
        if (isStarted(template)) {
          template.sendBody("direct:a","B");
        }
      }
 catch (      Exception e) {
      }
    }
  }
);
  assertMockEndpointsSatisfied();
  latch.countDown();
  executor.shutdownNow();
}
