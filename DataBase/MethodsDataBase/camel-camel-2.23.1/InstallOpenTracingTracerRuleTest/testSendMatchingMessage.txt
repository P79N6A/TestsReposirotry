@Test public void testSendMatchingMessage() throws Exception {
  String expectedBody="<matched/>";
  resultEndpoint.expectedBodiesReceived(expectedBody);
  template.sendBodyAndHeader(expectedBody,"foo","bar");
  resultEndpoint.assertIsSatisfied();
  List<MockSpan> spans=getTracer().finishedSpans();
  assertEquals(3,spans.size());
  assertEquals("mock",spans.get(0).operationName());
  assertEquals("start",spans.get(1).operationName());
  assertEquals("start",spans.get(2).operationName());
  assertEquals(Tags.SPAN_KIND_CLIENT,spans.get(0).tags().get(Tags.SPAN_KIND.getKey()));
  assertEquals(Tags.SPAN_KIND_SERVER,spans.get(1).tags().get(Tags.SPAN_KIND.getKey()));
  assertEquals(Tags.SPAN_KIND_CLIENT,spans.get(2).tags().get(Tags.SPAN_KIND.getKey()));
}
