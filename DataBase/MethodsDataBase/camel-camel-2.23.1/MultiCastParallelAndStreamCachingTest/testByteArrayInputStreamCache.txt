/** 
 * Tests the ByteArrayInputStreamCache. The send byte array is transformed to a ByteArrayInputStreamCache before the multi-cast processor is called.
 * @throws Exception
 */
@Test public void testByteArrayInputStreamCache() throws Exception {
  MockEndpoint mock=getMockEndpoint("mock:resulta");
  mock.expectedBodiesReceived("<start></start>");
  mock=getMockEndpoint("mock:resultb");
  mock.expectedBodiesReceived("<start></start>");
  template.sendBody("direct:start",new ByteArrayInputStream("<start></start>".getBytes("UTF-8")));
  assertMockEndpointsSatisfied();
}
