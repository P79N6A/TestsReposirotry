@Test public void testRouteWithDocument() throws Exception {
  TelegramService service=mockTelegramService();
  Exchange ex=endpoint.createExchange();
  ex.getIn().setHeader(TelegramConstants.TELEGRAM_MEDIA_TITLE_CAPTION,"Document");
  ex.getIn().setHeader(TelegramConstants.TELEGRAM_MEDIA_TYPE,TelegramMediaType.DOCUMENT);
  byte[] document=TelegramTestUtil.createSampleDocument();
  ex.getIn().setBody(document);
  context().createProducerTemplate().send(endpoint,ex);
  ArgumentCaptor<OutgoingDocumentMessage> captor=ArgumentCaptor.forClass(OutgoingDocumentMessage.class);
  Mockito.verify(service).sendMessage(eq("mock-token"),captor.capture());
  assertEquals("my-id",captor.getValue().getChatId());
  assertEquals(document,captor.getValue().getDocument());
  assertEquals("file",captor.getValue().getFilenameWithExtension());
  assertEquals("Document",captor.getValue().getCaption());
}
