@Test public void beanCallHeaderMappingTest() throws Exception {
  new RouteBuilder(){
    @Override public void configure() throws Exception {
      onException(Throwable.class).to("direct:handle").handled(true);
      from("direct:num").bean(BeanCallTest.this,"processHeader").process(new UnwrapStreamProcessor()).to("mock:endpoint");
      from("direct:handle").setBody().constant("ERR").to("mock:endpoint");
    }
  }
.addRoutesToCamelContext(context);
  MockEndpoint mock=getMockEndpoint("mock:endpoint");
  mock.expectedMessageCount(1);
  context.start();
  template.sendBodyAndHeader("direct:num",1,"myheader",2);
  mock.assertIsSatisfied();
  Exchange exchange=mock.getExchanges().get(0);
  assertEquals("HelloHeader 2",exchange.getIn().getBody());
}
