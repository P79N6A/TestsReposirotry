@Test public void testIrcMessages() throws Exception {
  resetMock(joined);
  joined.expectedMessageCount(2);
  joined.expectedHeaderValuesReceivedInAnyOrder(IrcConstants.IRC_TARGET,properties.get("channel1"),properties.get("channel2"));
  joined.assertIsSatisfied();
  sendMessages();
  resultEndpoint.expectedBodiesReceivedInAnyOrder(body1,body2,body3,body3);
  resultEndpoint.assertIsSatisfied();
  List<Exchange> list=resultEndpoint.getReceivedExchanges();
  for (  Exchange exchange : list) {
    log.info("Received exchange: " + exchange + " headers: "+ exchange.getIn().getHeaders());
  }
}
