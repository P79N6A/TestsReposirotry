@Test public void testAutoCompensationIsTriggeredOnly() throws InterruptedException {
  MockEndpoint completed=getMockEndpoint("mock:completed");
  completed.expectedMessageCount(1);
  completed.setResultWaitTime(1000);
  MockEndpoint compensated=getMockEndpoint("mock:compensated");
  compensated.expectedMessageCount(1);
  try {
    template.sendBody("direct:auto-workflow","auto-compensate");
    Assert.fail("Should throw an exception");
  }
 catch (  Exception ex) {
  }
  completed.assertIsNotSatisfied();
  compensated.assertIsSatisfied();
}
