@Test public void testGetCustomerWithCxfRsEndpoint(){
  Exchange exchange=template.send("cxfrs://http://localhost:" + getPort1() + "/"+ getClass().getSimpleName()+ "/?httpClientAPI=true",newExchange -> {
    newExchange.setPattern(ExchangePattern.InOut);
    Message inMessage=newExchange.getIn();
    inMessage.setHeader(Exchange.HTTP_METHOD,"GET");
    inMessage.setHeader(Exchange.HTTP_PATH,"/customerservice/customers/123");
    inMessage.setHeader(CxfConstants.CAMEL_CXF_RS_RESPONSE_CLASS,Customer.class);
    inMessage.setBody(null);
  }
);
  Customer response=(Customer)exchange.getOut().getBody();
  assertNotNull("The response should not be null ",response);
  assertEquals("Get a wrong customer id ",123,response.getId());
  assertEquals("Get a wrong customer name","John",response.getName());
  assertEquals("Get a wrong response code",200,exchange.getOut().getHeader(Exchange.HTTP_RESPONSE_CODE));
}
