@Test public void shouldAdaptFromXForwardHeaders(){
  final Swagger swagger=spy(new Swagger().basePath("/base"));
  final Map<String,Object> headers=new HashMap<>();
  headers.put(RestSwaggerSupport.HEADER_X_FORWARDED_PREFIX,"/prefix");
  headers.put(RestSwaggerSupport.HEADER_X_FORWARDED_HOST,"host");
  headers.put(RestSwaggerSupport.HEADER_X_FORWARDED_PROTO,"http, HTTPS ");
  RestSwaggerSupport.setupXForwardedHeaders(swagger,headers);
  verify(swagger).getBasePath();
  verify(swagger).setBasePath("/prefix/base");
  verify(swagger).setHost("host");
  verify(swagger).addScheme(Scheme.HTTP);
  verify(swagger).addScheme(Scheme.HTTPS);
  verifyNoMoreInteractions(swagger);
}
