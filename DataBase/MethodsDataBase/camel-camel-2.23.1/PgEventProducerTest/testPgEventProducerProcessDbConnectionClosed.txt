@Test public void testPgEventProducerProcessDbConnectionClosed() throws Exception {
  PGConnection connectionNew=mock(PGConnection.class);
  when(endpoint.getDatasource()).thenReturn(dataSource);
  when(dataSource.getConnection()).thenReturn(connection,connectionNew);
  when(connection.isClosed()).thenReturn(true);
  when(exchange.getIn()).thenReturn(message);
  when(message.getBody(String.class)).thenReturn("pgevent");
  when(endpoint.getChannel()).thenReturn("camel");
  when(connectionNew.prepareStatement("NOTIFY camel, 'pgevent'")).thenReturn(statement);
  PgEventProducer producer=new PgEventProducer(endpoint);
  producer.start();
  producer.process(exchange);
  verify(statement).execute();
}
