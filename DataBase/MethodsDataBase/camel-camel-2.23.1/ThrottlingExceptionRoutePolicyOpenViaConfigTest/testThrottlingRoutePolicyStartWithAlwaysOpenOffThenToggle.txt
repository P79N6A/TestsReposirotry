@Test public void testThrottlingRoutePolicyStartWithAlwaysOpenOffThenToggle() throws Exception {
  for (int i=0; i < size; i++) {
    template.sendBody(url,"MessageRound1 " + i);
    Thread.sleep(3);
  }
  result.expectedMessageCount(size);
  result.setResultWaitTime(1000);
  assertMockEndpointsSatisfied();
  policy.setKeepOpen(true);
  template.sendBody(url,"MessageTrigger");
  Thread.sleep(500);
  for (int i=0; i < size; i++) {
    template.sendBody(url,"MessageRound2 " + i);
    Thread.sleep(3);
  }
  Thread.sleep(500);
  result.expectedMessageCount(size + 1);
  result.setResultWaitTime(1000);
  assertMockEndpointsSatisfied();
  policy.setKeepOpen(false);
  result.expectedMessageCount(size * 2 + 1);
  result.setResultWaitTime(1000);
  assertMockEndpointsSatisfied();
}
