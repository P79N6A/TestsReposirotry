@Test public void testGenerateInvalidPayloadExceptionMessageWithInvalidStartingSegment() throws Exception {
  byte[] invalidStartingSegment="MSA|AA|00001|\r".getBytes();
  byte[] basePayload=TEST_MESSAGE.getBytes();
  ByteArrayOutputStream payloadStream=new ByteArrayOutputStream(invalidStartingSegment.length + basePayload.length);
  payloadStream.write(invalidStartingSegment);
  payloadStream.write(basePayload.length);
  assertEquals("The first segment of the HL7 payload {MSA} is not an MSH segment",Hl7Util.generateInvalidPayloadExceptionMessage(payloadStream.toByteArray()));
}
