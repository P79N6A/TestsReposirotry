@Test public void testExceptionForwardedToExchange() throws IOException {
  final RuntimeException expectedException=new RuntimeException("We simulate an exception in CXF processing");
  DefaultCamelContext camelContext=new DefaultCamelContext();
  CamelDestination dest=mock(CamelDestination.class);
  doThrow(expectedException).when(dest).incoming(isA(org.apache.camel.Exchange.class));
  ConsumerProcessor consumerProcessor=dest.new ConsumerProcessor();
  DefaultExchange exchange=new DefaultExchange(camelContext);
  consumerProcessor.process(exchange);
  Exception exc=exchange.getException();
  assertNotNull(exc);
  assertEquals(expectedException,exc);
}
