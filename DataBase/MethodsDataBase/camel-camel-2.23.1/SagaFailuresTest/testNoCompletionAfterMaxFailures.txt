@Test public void testNoCompletionAfterMaxFailures() throws Exception {
  maxFailures=new AtomicInteger(3);
  MockEndpoint complete=getMockEndpoint("mock:complete");
  complete.expectedMessageCount(1);
  complete.setResultWaitTime(200);
  MockEndpoint end=getMockEndpoint("mock:end");
  end.expectedBodiesReceived("hello");
  sendBody("direct:saga-complete","hello");
  complete.assertIsNotSatisfied();
  end.assertIsSatisfied();
}
