@Test public void testConsumeAndDelete() throws Exception {
  MockEndpoint mock=getMockEndpoint("mock:result");
  mock.expectedBodiesReceived("Hello World");
  template.sendBodyAndHeader("file://target/files","Bye World",Exchange.FILE_NAME,"report2.txt");
  template.sendBodyAndHeader("file://target/files","Hello World",Exchange.FILE_NAME,"report.txt");
  template.sendBodyAndHeader("file://target/files/2008","2008 Report",Exchange.FILE_NAME,"report2008.txt");
  assertMockEndpointsSatisfied();
  oneExchangeDone.matchesMockWaitTime();
  assertFalse("File should been deleted",new File("target/files/report.txt").exists());
}
