@Test public void testCompensationWithinASaga() throws Exception {
  MockEndpoint resultEndpoint=getMockEndpoint("mock:end");
  resultEndpoint.expectedMessageCount(1);
  resultEndpoint.setResultWaitTime(100);
  MockEndpoint compensationEndpoint=getMockEndpoint("mock:compensation");
  compensationEndpoint.expectedMessageCount(1);
  compensationEndpoint.expectedHeaderReceived("myOptionKey","myOptionValue");
  compensationEndpoint.expectedHeaderReceived("myOptionKey2","myOptionValue2");
  sendBody("direct:start","fail");
  compensationEndpoint.assertIsSatisfied();
  resultEndpoint.assertIsNotSatisfied();
}
