@Test public void testSendMessageConnetionIsClosed() throws Exception {
  when(defaultWebsocket1.getSession()).thenReturn(session);
  when(session.isOpen()).thenReturn(false);
  websocketProducer.sendMessage(defaultWebsocket1,MESSAGE);
  InOrder inOrder=inOrder(endpoint,store,session,defaultWebsocket1,defaultWebsocket2,exchange,inMessage,remoteEndpoint);
  inOrder.verify(defaultWebsocket1,times(1)).getSession();
  inOrder.verify(session,times(1)).isOpen();
  inOrder.verifyNoMoreInteractions();
}
