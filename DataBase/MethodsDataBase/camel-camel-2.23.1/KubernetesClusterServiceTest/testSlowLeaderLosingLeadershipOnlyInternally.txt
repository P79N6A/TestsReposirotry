@Test public void testSlowLeaderLosingLeadershipOnlyInternally() throws Exception {
  LeaderRecorder mypod1=addMember("mypod1");
  LeaderRecorder mypod2=addMember("mypod2");
  context.start();
  mypod1.waitForAnyLeader(2,TimeUnit.SECONDS);
  mypod2.waitForAnyLeader(2,TimeUnit.SECONDS);
  String firstLeader=mypod1.getCurrentLeader();
  LeaderRecorder formerLeaderRecorder=firstLeader.equals("mypod1") ? mypod1 : mypod2;
  LeaderRecorder formerLoserRecorder=firstLeader.equals("mypod1") ? mypod2 : mypod1;
  delayRequestsFromPod(firstLeader,10,TimeUnit.SECONDS);
  Thread.sleep(LEASE_TIME_MILLIS);
  assertNull(formerLeaderRecorder.getCurrentLeader());
  assertEquals(firstLeader,formerLoserRecorder.getCurrentLeader());
}
