@Test public void testXML() throws Exception {
  mockCsv.whenAnyExchangeReceived(new Processor(){
    public void process(    Exchange exchange){
      Object mockBody=exchange.getIn().getBody();
      assertEquals(Order.class,mockBody.getClass());
      Order mockOrder=(Order)mockBody;
      assertEquals("Order-XML-0001",mockOrder.getOrderId());
      assertEquals("MIKAN",mockOrder.getItemId());
      assertEquals(365,mockOrder.getQuantity());
    }
  }
);
  mockCsv.setExpectedMessageCount(1);
  String order="<order orderId=\"Order-XML-0001\" itemId=\"MIKAN\" quantity=\"365\"/>";
  String expectedAnswer="<orderResponse orderId=\"Order-XML-0001\" accepted=\"true\" description=\"Order accepted:[item='MIKAN' quantity='365']\"/>";
  Exchange answer=xmlProducer.send("direct:xml",ex -> {
    ((DataTypeAware)ex.getIn()).setBody(order,new DataType("xml:XMLOrder"));
  }
);
  XMLUnit.compareXML(expectedAnswer,answer.getOut().getBody(String.class));
  mockCsv.assertIsSatisfied();
}
