@Test public void createEndpointWithMinimalS3ClientConfiguration() throws Exception {
  AmazonS3ClientMock mock=new AmazonS3ClientMock();
  ((JndiRegistry)((PropertyPlaceholderDelegateRegistry)context.getRegistry()).getRegistry()).bind("amazonS3Client",mock);
  S3Component component=new S3Component(context);
  S3Endpoint endpoint=(S3Endpoint)component.createEndpoint("aws-s3://MyBucket?amazonS3Client=#amazonS3Client&accessKey=xxx&secretKey=yyy");
  assertEquals("MyBucket",endpoint.getConfiguration().getBucketName());
  assertEquals("xxx",endpoint.getConfiguration().getAccessKey());
  assertEquals("yyy",endpoint.getConfiguration().getSecretKey());
  assertNotNull(endpoint.getConfiguration().getAmazonS3Client());
  assertNull(endpoint.getConfiguration().getRegion());
  assertTrue(endpoint.getConfiguration().isDeleteAfterRead());
  assertEquals(10,endpoint.getMaxMessagesPerPoll());
  assertNull(endpoint.getConfiguration().getPolicy());
  assertNull(endpoint.getConfiguration().getPrefix());
  assertTrue(endpoint.getConfiguration().isIncludeBody());
}
