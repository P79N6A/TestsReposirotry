@Test public void testMessaging() throws Exception {
  MockEndpoint mock1=getMockEndpoint("mock:member-1");
  mock1.expectedMessageCount(2);
  mock1.expectedBodiesReceived("direct-message","broadcast-message");
  MockEndpoint mock2=getMockEndpoint("mock:member-2");
  mock2.expectedMessageCount(1);
  mock2.expectedBodiesReceived("broadcast-message");
  template.clearAll().withHeader(AtomixClientConstants.RESOURCE_ACTION,AtomixMessaging.Action.DIRECT).withHeader(AtomixClientConstants.MEMBER_NAME,"member-1").withHeader(AtomixClientConstants.CHANNEL_NAME,"channel").withBody("direct-message").send();
  template.clearAll().withHeader(AtomixClientConstants.RESOURCE_ACTION,AtomixMessaging.Action.BROADCAST).withHeader(AtomixClientConstants.CHANNEL_NAME,"channel").withBody("direct-message").send();
}
