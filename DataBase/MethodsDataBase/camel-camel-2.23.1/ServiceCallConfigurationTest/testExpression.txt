@Test public void testExpression() throws Exception {
  CamelContext context=null;
  try {
    ServiceCallConfigurationDefinition config=new ServiceCallConfigurationDefinition();
    config.setServiceDiscovery(new StaticServiceDiscovery());
    config.setExpressionConfiguration(new ServiceCallExpressionConfiguration().expression(new SimpleExpression("file:${header.CamelServiceCallServiceHost}:${header.CamelServiceCallServicePort}")));
    context=new DefaultCamelContext();
    context.setServiceCallConfiguration(config);
    context.addRoutes(new RouteBuilder(){
      @Override public void configure() throws Exception {
        from("direct:start").routeId("default").serviceCall("scall");
      }
    }
);
    context.start();
    DefaultServiceCallProcessor proc=findServiceCallProcessor(context.getRoute("default"));
    Assert.assertNotNull(proc);
    Assert.assertTrue(proc.getExpression() instanceof SimpleExpression);
  }
  finally {
    if (context != null) {
      context.stop();
    }
  }
  context.stop();
}
