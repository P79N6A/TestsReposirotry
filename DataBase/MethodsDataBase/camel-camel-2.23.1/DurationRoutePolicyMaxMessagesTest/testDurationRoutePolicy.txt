@Test public void testDurationRoutePolicy() throws Exception {
  assertTrue(context.getRouteStatus("foo").isStarted());
  assertFalse(context.getRouteStatus("foo").isStopped());
  getMockEndpoint("mock:foo").expectedMinimumMessageCount(5);
  assertMockEndpointsSatisfied();
  await().atMost(5,TimeUnit.SECONDS).untilAsserted(() -> {
    assertFalse(context.getRouteStatus("foo").isStarted());
    assertTrue(context.getRouteStatus("foo").isStopped());
  }
);
}
