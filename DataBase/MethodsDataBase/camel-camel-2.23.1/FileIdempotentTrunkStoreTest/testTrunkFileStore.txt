@Test public void testTrunkFileStore() throws Exception {
  resultEndpoint.expectedBodiesReceived("A","B","C","D","E");
  sendMessage("AAAAAAAAAA","A");
  sendMessage("BBBBBBBBBB","B");
  sendMessage("CCCCCCCCCC","C");
  sendMessage("AAAAAAAAAA","A");
  sendMessage("DDDDDDDDDD","D");
  sendMessage("BBBBBBBBBB","B");
  sendMessage("EEEEEEEEEE","E");
  resultEndpoint.assertIsSatisfied();
  resultEndpoint.reset();
  resultEndpoint.expectedBodiesReceived("Z","X");
  sendMessage("ZZZZZZZZZZ","Z");
  sendMessage("XXXXXXXXXX","X");
  resultEndpoint.assertIsSatisfied();
  assertTrue(repo.contains("XXXXXXXXXX"));
  Stream<String> fileContent=Files.lines(store.toPath());
  List<String> fileEntries=fileContent.collect(Collectors.toList());
  fileContent.close();
  Assert.assertThat(fileEntries,IsIterableContainingInOrder.contains("ZZZZZZZZZZ","XXXXXXXXXX"));
}
