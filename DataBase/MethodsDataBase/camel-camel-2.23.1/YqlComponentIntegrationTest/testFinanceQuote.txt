@Test public void testFinanceQuote() throws UnsupportedEncodingException {
  templateFinance.sendBody("");
  final Exchange exchange=endFinance.getReceivedExchanges().get(0);
  final String body=exchange.getIn().getBody(String.class);
  final Integer status=exchange.getIn().getHeader(CAMEL_YQL_HTTP_STATUS,Integer.class);
  final String httpRequest=exchange.getIn().getHeader(CAMEL_YQL_HTTP_REQUEST,String.class);
  assertThat(httpRequest,containsString("http"));
  assertThat(httpRequest,containsString("q=" + URLEncoder.encode(FINANCE_QUERY,"UTF-8")));
  assertThat(httpRequest,containsString("format=json"));
  assertThat(httpRequest,containsString("callback=" + CALLBACK));
  assertThat(httpRequest,containsString("diagnostics=false"));
  assertThat(httpRequest,containsString("debug=false"));
  assertThat(httpRequest,containsString("env=" + URLEncoder.encode(ENV,"UTF-8")));
  assertNotNull(body);
  assertThat(body,containsString(CALLBACK + "("));
  assertEquals(HttpStatus.SC_OK,status.intValue());
}
