@Test public void testBook() throws UnsupportedEncodingException {
  templateBook.sendBody("");
  final Exchange exchange=endBook.getReceivedExchanges().get(0);
  final String body=exchange.getIn().getBody(String.class);
  final Integer status=exchange.getIn().getHeader(CAMEL_YQL_HTTP_STATUS,Integer.class);
  final String httpRequest=exchange.getIn().getHeader(CAMEL_YQL_HTTP_REQUEST,String.class);
  assertThat(httpRequest,containsString("https"));
  assertThat(httpRequest,containsString("q=" + URLEncoder.encode(BOOK_QUERY,"UTF-8")));
  assertThat(httpRequest,containsString("format=xml"));
  assertThat(httpRequest,containsString("diagnostics=false"));
  assertThat(httpRequest,containsString("debug=false"));
  assertThat(httpRequest,containsString("crossProduct=optimized"));
  assertNotNull(body);
  assertEquals(HttpStatus.SC_OK,status.intValue());
}
