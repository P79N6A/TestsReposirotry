@Test public void testWriteOutsideStartingDirectory() throws Exception {
  MockEndpoint mock=getMockEndpoint("mock:result");
  mock.expectedMessageCount(0);
  try {
    template.sendBodyAndHeader("direct:start","Hello World",Exchange.FILE_NAME,"hello.txt");
    fail("Should have thrown exception");
  }
 catch (  Exception e) {
    IllegalArgumentException iae=assertIsInstanceOf(IllegalArgumentException.class,e.getCause());
    assertTrue(iae.getMessage().contains("as the filename is jailed to the starting directory"));
  }
  assertMockEndpointsSatisfied();
}
