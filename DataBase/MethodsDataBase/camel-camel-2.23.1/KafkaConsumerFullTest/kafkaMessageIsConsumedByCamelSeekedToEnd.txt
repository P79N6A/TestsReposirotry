@Test @Ignore("Currently there is a bug in kafka which leads to an uninterruptable thread so a resub take too long (works manually)") public void kafkaMessageIsConsumedByCamelSeekedToEnd() throws Exception {
  to.expectedMessageCount(5);
  to.expectedBodiesReceivedInAnyOrder("message-0","message-1","message-2","message-3","message-4");
  for (int k=0; k < 5; k++) {
    String msg="message-" + k;
    ProducerRecord<String,String> data=new ProducerRecord<>(TOPIC,"1",msg);
    producer.send(data);
  }
  to.assertIsSatisfied(3000);
  to.reset();
  to.expectedMessageCount(0);
  context.stopRoute("foo");
  KafkaEndpoint kafkaEndpoint=(KafkaEndpoint)from;
  kafkaEndpoint.getConfiguration().setSeekTo("end");
  context.startRoute("foo");
synchronized (this) {
    Thread.sleep(1000);
  }
  to.assertIsSatisfied(3000);
}
