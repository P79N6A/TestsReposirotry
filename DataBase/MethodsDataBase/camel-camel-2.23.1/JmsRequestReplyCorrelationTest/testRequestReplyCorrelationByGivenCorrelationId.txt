/** 
 * When the setting useMessageIdAsCorrelationid is false and a correlation id is set on the message then we expect the reply to contain the same correlation id.
 */
@Test public void testRequestReplyCorrelationByGivenCorrelationId() throws Exception {
  MockEndpoint result=getMockEndpoint("mock:result");
  result.expectedMessageCount(1);
  Exchange out=template.send("jms:queue:hello",ExchangePattern.InOut,new Processor(){
    public void process(    Exchange exchange) throws Exception {
      Message in=exchange.getIn();
      in.setBody("Hello World");
      in.setHeader("JMSCorrelationID","a");
    }
  }
);
  result.assertIsSatisfied();
  assertNotNull(out);
  assertEquals(REPLY_BODY,out.getOut().getBody(String.class));
  assertEquals("a",out.getOut().getHeader("JMSCorrelationID"));
}
