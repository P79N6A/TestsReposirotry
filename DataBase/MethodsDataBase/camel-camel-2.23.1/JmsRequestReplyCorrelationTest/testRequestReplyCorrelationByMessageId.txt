/** 
 * When the setting useMessageIdAsCorrelationid is true and a correlation id is set on the message then we expect the reply to contain the messageId of the sent message. Here we test only that it is not the correlation id given as the messageId is not know beforehand.
 */
@Test public void testRequestReplyCorrelationByMessageId() throws Exception {
  MockEndpoint result=getMockEndpoint("mock:result");
  result.expectedMessageCount(1);
  Exchange out=template.send("jms2:queue:hello2",ExchangePattern.InOut,new Processor(){
    public void process(    Exchange exchange) throws Exception {
      Message in=exchange.getIn();
      in.setBody("Hello World");
      in.setHeader("JMSCorrelationID","a");
    }
  }
);
  result.assertIsSatisfied();
  assertNotNull(out);
  assertEquals(REPLY_BODY,out.getOut().getBody(String.class));
  assertEquals("a",out.getOut().getHeader("JMSCorrelationID"));
}
