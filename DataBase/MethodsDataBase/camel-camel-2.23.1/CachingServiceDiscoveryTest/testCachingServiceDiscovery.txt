@Test public void testCachingServiceDiscovery() throws Exception {
  StaticServiceDiscovery discovery=new StaticServiceDiscovery();
  CachingServiceDiscovery caching=CachingServiceDiscovery.wrap(discovery,50,TimeUnit.MILLISECONDS);
  discovery.addServer(new DefaultServiceDefinition("noname","localhost",1111));
  Assert.assertEquals(1,caching.getServices("noname").size());
  discovery.addServer(new DefaultServiceDefinition("noname","localhost",1112));
  Assert.assertEquals(1,caching.getServices("noname").size());
  Thread.sleep(100);
  Assert.assertEquals(2,caching.getServices("noname").size());
}
