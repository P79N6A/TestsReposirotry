@Test public void addOne() throws Exception {
  camel.addRoutes(createRouteBuilder(ENDPOINT_LDIF));
  camel.start();
  Endpoint endpoint=camel.getEndpoint(ENDPOINT_START);
  Exchange exchange=endpoint.createExchange();
  URL loc=this.getClass().getResource("/org/apache/camel/component/ldif/AddOne.ldif");
  exchange.getIn().setBody(loc.toString());
  Exchange out=template.send(endpoint,exchange);
  List<String> ldifResults=defaultLdapModuleOutAssertions(out);
  assertThat(ldifResults,notNullValue());
  assertThat(ldifResults.size(),equalTo(2));
  assertThat(ldifResults.get(0),equalTo("success"));
  assertThat(ldifResults.get(1),equalTo("success"));
  SearchResult sr;
  NamingEnumeration<SearchResult> searchResults=ldapContext.search("","(uid=test*)",SEARCH_CONTROLS);
  assertNotNull(searchResults);
  sr=searchResults.next();
  assertNotNull(sr);
  assertThat("uid=test1,ou=test,ou=system",equalTo(sr.getName()));
  assertThat(false,equalTo(searchResults.hasMore()));
}
