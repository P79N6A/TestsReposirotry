@Test public void testJettyProducerAcceptInvalid() throws Exception {
  try {
    fluentTemplate.withHeader(Exchange.CONTENT_TYPE,"application/json").withHeader("Accept","application/xml").withHeader(Exchange.HTTP_METHOD,"post").withBody("{ \"name\": \"Donald Duck\" }").to("http://localhost:" + getPort() + "/users/123/update").request(String.class);
    fail("Should have thrown exception");
  }
 catch (  CamelExecutionException e) {
    HttpOperationFailedException cause=assertIsInstanceOf(HttpOperationFailedException.class,e.getCause());
    assertEquals(406,cause.getStatusCode());
    assertEquals("",cause.getResponseBody());
  }
}
