/** 
 * Expecting two messages received for the one sent. With Ack mode set to NONE the same message will be delivered again and again, after the deadline expiration. Setting deadline to 1 second and waiting for more than 2 to ensure the message has been resent.
 * @throws Exception
 */
@Test public void singleMessage() throws Exception {
  Exchange exchange=new DefaultExchange(context);
  exchange.getIn().setBody("ACK NONE  : " + exchange.getExchangeId());
  receiveResult.expectedMessageCount(2);
  producer.send(exchange);
  receiveResult.assertIsSatisfied(4000);
}
