@Test public void testBindingModeJsonWithContract() throws Exception {
  MockEndpoint mock=getMockEndpoint("mock:input");
  mock.expectedMessageCount(1);
  mock.message(0).body().isInstanceOf(UserPojoEx.class);
  String body="{\"id\": 123, \"name\": \"Donald Duck\"}";
  Object answer=template.requestBody("http://localhost:" + getPort() + "/users/new",body);
  assertNotNull(answer);
  BufferedReader reader=new BufferedReader(new InputStreamReader((InputStream)answer));
  String line;
  String answerString="";
  while ((line=reader.readLine()) != null) {
    answerString+=line;
  }
  assertTrue("Unexpected response: " + answerString,answerString.contains("\"active\":true"));
  assertMockEndpointsSatisfied();
  Object obj=mock.getReceivedExchanges().get(0).getIn().getBody();
  assertEquals(UserPojoEx.class,obj.getClass());
  UserPojoEx user=(UserPojoEx)obj;
  assertNotNull(user);
  assertEquals(123,user.getId());
  assertEquals("Donald Duck",user.getName());
  assertEquals(true,user.isActive());
}
