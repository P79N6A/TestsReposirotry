@Test public void updateTest() throws Exception {
  msg.setHeader(OpenstackConstants.OPERATION,OpenstackConstants.UPDATE);
  when(imageService.update(any())).thenReturn(osImage);
  final String newName="newName";
  when(osImage.getName()).thenReturn(newName);
  dummyImage.setName(newName);
  msg.setBody(dummyImage);
  producer.process(exchange);
  verify(imageService).update(imageCaptor.capture());
  assertEquals(dummyImage,imageCaptor.getValue());
  assertEqualsImages(dummyImage,msg.getBody(Image.class));
}
