@Test public void reserveTest() throws Exception {
  when(endpoint.getOperation()).thenReturn(GlanceConstants.RESERVE);
  msg.setBody(dummyImage);
  producer.process(exchange);
  verify(imageService).reserve(captor.capture());
  assertEquals(dummyImage,captor.getValue());
  Image result=msg.getBody(Image.class);
  assertNotNull(result.getId());
  assertEqualsImages(dummyImage,result);
}
