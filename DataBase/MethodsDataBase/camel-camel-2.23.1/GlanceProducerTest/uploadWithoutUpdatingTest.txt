@Test public void uploadWithoutUpdatingTest() throws Exception {
  msg.setHeader(OpenstackConstants.OPERATION,GlanceConstants.UPLOAD);
  final String id="id";
  msg.setHeader(OpenstackConstants.ID,id);
  final File file=File.createTempFile("image",".iso");
  msg.setBody(file);
  producer.process(exchange);
  verify(imageService).upload(imageIdCaptor.capture(),payloadCaptor.capture(),imageCaptor.capture());
  assertEquals(file,payloadCaptor.getValue().getRaw());
  assertEquals(id,imageIdCaptor.getValue());
  assertNull(imageCaptor.getValue());
  final Image result=msg.getBody(Image.class);
  assertNotNull(result.getId());
  assertEqualsImages(dummyImage,result);
}
