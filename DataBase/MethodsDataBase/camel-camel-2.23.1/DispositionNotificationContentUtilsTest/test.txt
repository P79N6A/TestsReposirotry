@Test public void test() throws Exception {
  InputStream is=new ByteArrayInputStream(DISPOSITION_NOTIFICATION_CONTENT.getBytes());
  AS2SessionInputBuffer inbuffer=new AS2SessionInputBuffer(new HttpTransportMetricsImpl(),8 * 1024);
  inbuffer.bind(is);
  List<CharArrayBuffer> dispositionNotificationFields=EntityParser.parseBodyPartFields(inbuffer,null,BasicLineParser.INSTANCE,new ArrayList<CharArrayBuffer>());
  AS2MessageDispositionNotificationEntity messageDispositionNotificationEntity=DispositionNotificationContentUtils.parseDispositionNotification(dispositionNotificationFields);
  assertEquals("Unexpected Reporting UA value",EXPECTED_REPORTING_UA,messageDispositionNotificationEntity.getReportingUA());
  assertEquals("Unexpected MTN Name",EXPECTED_MTN_NAME,messageDispositionNotificationEntity.getMtnName());
  assertEquals("Unexpected Original Recipient",EXPECTED_ORIGINAL_RECIPIENT,messageDispositionNotificationEntity.getExtensionFields().get("Original-Recipient"));
  assertEquals("Unexpected Final Reciptient",EXPECTED_FINAL_RECIPIENT,messageDispositionNotificationEntity.getFinalRecipient());
  assertEquals("Unexpected Original Message ID",EXPECTED_ORIGINAL_MESSAGE_ID,messageDispositionNotificationEntity.getOriginalMessageId());
  assertEquals("Unexpected Disposition Mode",EXPECTED_DISPOSITION_MODE,messageDispositionNotificationEntity.getDispositionMode());
  assertNotNull("Unexpected Null Disposition Modifier",messageDispositionNotificationEntity.getDispositionModifier());
  assertEquals("Unexpected Disposition Modifier",EXPECTED_DISPOSITION_MODIFIER,messageDispositionNotificationEntity.getDispositionModifier().getModifier());
  assertEquals("Unexpected Disposition Type",EXPECTED_DISPOSITION_TYPE,messageDispositionNotificationEntity.getDispositionType());
  assertArrayEquals("Unexpected Failure Array value",EXPECTED_FAILURE,messageDispositionNotificationEntity.getFailureFields());
  assertArrayEquals("Unexpected Error Array value",EXPECTED_ERROR,messageDispositionNotificationEntity.getErrorFields());
  assertArrayEquals("Unexpected Warning Array value",EXPECTED_WARNING,messageDispositionNotificationEntity.getWarningFields());
  assertNotNull("Unexpected Null Received Content MIC",messageDispositionNotificationEntity.getReceivedContentMic());
  assertEquals("Unexpected Encoded Message Digest",EXPECTED_ENCODED_MESSAGE_DIGEST,messageDispositionNotificationEntity.getReceivedContentMic().getEncodedMessageDigest());
  assertEquals("Unexpected Digest Algorithm ID",EXPECTED_DIGEST_ALGORITHM_ID,messageDispositionNotificationEntity.getReceivedContentMic().getDigestAlgorithmId());
}
