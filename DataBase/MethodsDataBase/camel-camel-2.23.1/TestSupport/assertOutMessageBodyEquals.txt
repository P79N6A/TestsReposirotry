/** 
 * Asserts that the given exchange has an OUT message of the given body value
 * @param exchange the exchange which should have an OUT message
 * @param expected the expected value of the OUT message
 * @throws InvalidPayloadException is thrown if the payload is not the expected class type
 */
public static void assertOutMessageBodyEquals(Exchange exchange,Object expected) throws InvalidPayloadException {
  assertNotNull("Should have a response exchange!",exchange);
  Object actual;
  if (expected == null) {
    actual=ExchangeHelper.getMandatoryOutBody(exchange);
    assertEquals("output body of: " + exchange,expected,actual);
  }
 else {
    actual=ExchangeHelper.getMandatoryOutBody(exchange,expected.getClass());
  }
  assertEquals("output body of: " + exchange,expected,actual);
  LOG.debug("Received response: " + exchange + " with out: "+ exchange.getOut());
}
