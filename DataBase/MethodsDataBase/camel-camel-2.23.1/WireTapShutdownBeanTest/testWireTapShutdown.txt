@Test public void testWireTapShutdown() throws Exception {
  final MyTapBean tapBean=(MyTapBean)context.getRegistry().lookupByName("tap");
  getMockEndpoint("mock:result").expectedBodiesReceived("Hello World");
  template.sendBody("direct:start","Hello World");
  assertMockEndpointsSatisfied();
  LATCH.countDown();
  context.stop();
  await().atMost(10,TimeUnit.SECONDS).untilAsserted(() -> {
    assertEquals("Hello World",tapBean.getTapped());
  }
);
}
