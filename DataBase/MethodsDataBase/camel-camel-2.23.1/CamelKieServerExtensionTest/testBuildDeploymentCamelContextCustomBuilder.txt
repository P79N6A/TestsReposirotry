@Test public void testBuildDeploymentCamelContextCustomBuilder() throws Exception {
  when(runtimeManager.getIdentifier()).thenReturn(identifier);
  when(runtimeManager.getEnvironment()).thenReturn(runtimeEnvironment);
  Environment environment=KieServices.get().newEnvironment();
  environment.set(JBPMConstants.CAMEL_CONTEXT_BUILDER_KEY,new CamelContextBuilder(){
    @Override public CamelContext buildCamelContext(){
      return null;
    }
  }
);
  when(runtimeEnvironment.getEnvironment()).thenReturn(environment);
  RuntimeManagerRegistry.get().register(runtimeManager);
  CamelKieServerExtension extension=new CamelKieServerExtension();
  CamelContext context=extension.buildDeploymentContext(identifier);
  assertNull(context);
}
