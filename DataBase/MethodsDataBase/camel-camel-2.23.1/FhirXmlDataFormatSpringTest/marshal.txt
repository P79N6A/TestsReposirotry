@Test public void marshal() throws Exception {
  mockEndpoint.expectedMessageCount(1);
  Patient patient=getPatient();
  template.sendBody("direct:marshal",patient);
  mockEndpoint.assertIsSatisfied();
  Exchange exchange=mockEndpoint.getExchanges().get(0);
  InputStream inputStream=exchange.getIn().getBody(InputStream.class);
  final IBaseResource iBaseResource=FhirContext.forDstu3().newXmlParser().parseResource(new InputStreamReader(inputStream));
  assertTrue("Patients should be equal!",patient.equalsDeep((Base)iBaseResource));
}
