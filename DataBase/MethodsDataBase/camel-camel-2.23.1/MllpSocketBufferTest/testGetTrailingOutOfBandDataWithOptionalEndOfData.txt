/** 
 * Description of test.
 * @throws Exception in the event of a test error.
 */
@Test public void testGetTrailingOutOfBandDataWithOptionalEndOfData() throws Exception {
  endpoint.setRequireEndOfData(false);
  assertNull("Unexpected initial value",instance.getTrailingOutOfBandData());
  instance.write(buildTestBytes(true,true,true));
  assertNull(instance.getTrailingOutOfBandData());
  byte[] expected="BLAH".getBytes();
  instance.write(expected);
  assertArrayEquals(expected,instance.getTrailingOutOfBandData());
  instance.reset();
  assertNull(instance.getTrailingOutOfBandData());
  instance.write(buildTestBytes(true,true,false));
  instance.write(expected);
  assertArrayEquals(expected,instance.getTrailingOutOfBandData());
  instance.reset();
  instance.write(buildTestBytes(true,false,true));
  assertNull(instance.getTrailingOutOfBandData());
  instance.reset();
  instance.write(buildTestBytes(true,false,false));
  assertNull(instance.getTrailingOutOfBandData());
  instance.reset();
  instance.write(expected);
  instance.write(buildTestBytes(true,true,true));
  assertNull(instance.getTrailingOutOfBandData());
  instance.reset();
  instance.write(buildTestBytes(true,true,true));
  assertNull(instance.getTrailingOutOfBandData());
}
