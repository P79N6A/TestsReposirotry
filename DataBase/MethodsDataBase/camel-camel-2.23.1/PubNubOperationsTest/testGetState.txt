@Test public void testGetState() throws Exception {
  stubFor(get(urlPathEqualTo("/v2/presence/sub-key/mySubscribeKey/channel/myChannel/uuid/myuuid")).willReturn(aResponse().withBody("{ \"status\": 200, \"message\": \"OK\", \"payload\": " + "{ \"myChannel\": { \"age\" : 20, \"status\" : \"online\"}, \"ch2\": { \"age\": 100, \"status\": \"offline\" } }, \"service\": \"Presence\"}")));
  Map<String,Object> headers=new HashMap<>();
  headers.put(PubNubConstants.OPERATION,"GETSTATE");
  PNGetStateResult response=template.requestBodyAndHeaders("direct:publish",null,headers,PNGetStateResult.class);
  assertNotNull(response);
  assertNotNull(response.getStateByUUID().get("myChannel"));
}
