@Test public void testHereNow() throws Exception {
  stubFor(get(urlPathEqualTo("/v2/presence/sub_key/mySubscribeKey/channel/myChannel")).willReturn(aResponse().withBody("{\"status\" : 200, \"message\" : \"OK\", \"service\" : \"Presence\", \"uuids\" : [{\"uuid\" : \"myUUID0\"}, {\"state\" : {\"abcd\" : {\"age\" : 15}}, " + "\"uuid\" : \"myUUID1\"}, {\"uuid\" : \"b9eb408c-bcec-4d34-b4c4-fabec057ad0d\"}, {\"state\" : {\"abcd\" : {\"age\" : 15}}, \"uuid\" : \"myUUID2\"}," + " {\"state\" : {\"abcd\" : {\"age\" : 24}}, \"uuid\" : \"myUUID9\"}], \"occupancy\" : 5} Return Occupancy O")));
  Map<String,Object> headers=new HashMap<>();
  headers.put(PubNubConstants.OPERATION,"HERENOW");
  PNHereNowResult response=template.requestBodyAndHeaders("direct:publish",null,headers,PNHereNowResult.class);
  assertNotNull(response);
  assertEquals(5,response.getTotalOccupancy());
}
