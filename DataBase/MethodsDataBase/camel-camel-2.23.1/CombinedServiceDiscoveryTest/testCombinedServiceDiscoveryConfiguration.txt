@Test public void testCombinedServiceDiscoveryConfiguration() throws Exception {
  StaticServiceCallServiceDiscoveryConfiguration staticConf1=new StaticServiceCallServiceDiscoveryConfiguration();
  staticConf1.setServers(Arrays.asList("discovery1@localhost:1111","discovery1@localhost:1112"));
  StaticServiceCallServiceDiscoveryConfiguration staticConf2=new StaticServiceCallServiceDiscoveryConfiguration();
  staticConf2.setServers(Arrays.asList("discovery1@localhost:1113","discovery2@localhost:1114"));
  CombinedServiceCallServiceDiscoveryConfiguration multiConf=new CombinedServiceCallServiceDiscoveryConfiguration();
  multiConf.setServiceDiscoveryConfigurations(Arrays.asList(staticConf1,staticConf2));
  CombinedServiceDiscovery discovery=(CombinedServiceDiscovery)multiConf.newInstance(context);
  Assert.assertEquals(2,discovery.getDelegates().size());
  Assert.assertEquals(3,discovery.getServices("discovery1").size());
  Assert.assertEquals(1,discovery.getServices("discovery2").size());
}
