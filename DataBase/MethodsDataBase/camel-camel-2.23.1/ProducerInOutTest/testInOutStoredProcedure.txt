@Test public void testInOutStoredProcedure() throws InterruptedException {
  MockEndpoint mock=getMockEndpoint("mock:query");
  mock.expectedMessageCount(1);
  Map<String,Object> headers=new HashMap<>();
  headers.put("in1",0);
  headers.put("in2",0);
  template.requestBodyAndHeaders("direct:query",null,headers);
  assertMockEndpointsSatisfied();
  Exchange exchange=mock.getExchanges().get(0);
  Map results=exchange.getIn().getBody(Map.class);
  assertEquals(1,results.get("out1"));
  assertEquals(2,results.get("out2"));
  assertNotNull(exchange.getIn().getHeader(SqlStoredConstants.SQL_STORED_UPDATE_COUNT));
}
