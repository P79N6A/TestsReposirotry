@Test public void shouldProcessPushTopicMessages() throws Exception {
  when(endpoint.getTopicName()).thenReturn("AccountUpdates");
  final SalesforceConsumer consumer=new SalesforceConsumer(endpoint,processor,NOT_USED);
  consumer.processMessage(mock(ClientSessionChannel.class),pushTopicMessage);
  @SuppressWarnings("unchecked") final Object sobject=((Map<String,Object>)pushTopicMessage.get("data")).get("sobject");
  verify(in).setBody(sobject);
  verify(in).setHeader("CamelSalesforceEventType","created");
  verify(in).setHeader("CamelSalesforceCreatedDate","2016-09-16T19:45:27.454Z");
  verify(in).setHeader("CamelSalesforceReplayId",1L);
  verify(in).setHeader("CamelSalesforceTopicName","AccountUpdates");
  verify(in).setHeader("CamelSalesforceChannel","/topic/AccountUpdates");
  verify(in).setHeader("CamelSalesforceClientId","lxdl9o32njygi1gj47kgfaga4k");
  verify(processor).process(same(exchange),any());
}
