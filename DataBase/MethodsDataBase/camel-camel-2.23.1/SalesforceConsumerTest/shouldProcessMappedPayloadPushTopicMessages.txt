@Test public void shouldProcessMappedPayloadPushTopicMessages() throws Exception {
  when(endpoint.getTopicName()).thenReturn("AccountUpdates");
  configuration.setSObjectClass(AccountUpdates.class.getName());
  final SalesforceConsumer consumer=new SalesforceConsumer(endpoint,processor,NOT_USED);
  consumer.processMessage(mock(ClientSessionChannel.class),pushTopicMessage);
  final AccountUpdates accountUpdates=new AccountUpdates();
  accountUpdates.phone="(415) 555-1212";
  accountUpdates.id="001D000000KneakIAB";
  accountUpdates.name="Blackbeard";
  verify(in).setBody(accountUpdates);
  verify(in).setHeader("CamelSalesforceEventType","created");
  verify(in).setHeader("CamelSalesforceCreatedDate","2016-09-16T19:45:27.454Z");
  verify(in).setHeader("CamelSalesforceReplayId",1L);
  verify(in).setHeader("CamelSalesforceTopicName","AccountUpdates");
  verify(in).setHeader("CamelSalesforceChannel","/topic/AccountUpdates");
  verify(in).setHeader("CamelSalesforceClientId","lxdl9o32njygi1gj47kgfaga4k");
  verify(processor).process(same(exchange),any());
}
