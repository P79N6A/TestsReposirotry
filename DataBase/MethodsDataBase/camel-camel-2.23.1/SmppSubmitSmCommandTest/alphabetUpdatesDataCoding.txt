@Test public void alphabetUpdatesDataCoding() throws Exception {
  final byte incorrectDataCoding=(byte)0x00;
  byte[] body={'A','B','C'};
  Exchange exchange=new DefaultExchange(new DefaultCamelContext(),ExchangePattern.InOut);
  exchange.getIn().setHeader(SmppConstants.COMMAND,"SubmitSm");
  exchange.getIn().setHeader(SmppConstants.ALPHABET,Alphabet.ALPHA_8_BIT.value());
  exchange.getIn().setBody(body);
  when(session.submitShortMessage(eq("CMT"),eq(TypeOfNumber.UNKNOWN),eq(NumberingPlanIndicator.UNKNOWN),eq("1616"),eq(TypeOfNumber.UNKNOWN),eq(NumberingPlanIndicator.UNKNOWN),eq("1717"),eq(new ESMClass()),eq((byte)0),eq((byte)1),(String)isNull(),(String)isNull(),eq(new RegisteredDelivery(SMSCDeliveryReceipt.SUCCESS_FAILURE)),eq(ReplaceIfPresentFlag.DEFAULT.value()),argThat(not(DataCodings.newInstance(incorrectDataCoding))),eq((byte)0),eq(body))).thenReturn("1");
  command.execute(exchange);
  assertEquals(Arrays.asList("1"),exchange.getOut().getHeader(SmppConstants.ID));
}
