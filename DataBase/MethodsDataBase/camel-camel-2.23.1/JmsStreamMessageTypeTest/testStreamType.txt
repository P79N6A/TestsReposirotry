@Test public void testStreamType() throws Exception {
  getMockEndpoint("mock:result").expectedMessageCount(1);
  FileUtil.copyFile(new File("src/test/data/message1.xml"),new File("target/stream/in/message1.xml"));
  assertMockEndpointsSatisfied();
  Object body=getMockEndpoint("mock:result").getReceivedExchanges().get(0).getIn().getBody();
  StreamMessageInputStream is=assertIsInstanceOf(StreamMessageInputStream.class,body);
  assertEquals(0,is.available());
  String srcContent=context.getTypeConverter().mandatoryConvertTo(String.class,new File("src/test/data/message1.xml"));
  String dstContent=context.getTypeConverter().mandatoryConvertTo(String.class,new File("target/stream/out/message1.xml"));
  assertEquals("both the source and destination files should have the same content",srcContent,dstContent);
}
