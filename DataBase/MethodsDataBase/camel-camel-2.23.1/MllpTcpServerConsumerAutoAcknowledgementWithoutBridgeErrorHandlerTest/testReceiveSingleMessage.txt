@Test public void testReceiveSingleMessage() throws Exception {
  result.expectedBodiesReceived(TEST_MESSAGE);
  complete.expectedBodiesReceived(TEST_MESSAGE);
  complete.expectedHeaderReceived(MllpConstants.MLLP_ACKNOWLEDGEMENT_TYPE,"AA");
  receiveSingleMessage();
  Exchange completeExchange=complete.getReceivedExchanges().get(0);
  assertNotNull(completeExchange.getIn().getHeader(MllpConstants.MLLP_ACKNOWLEDGEMENT));
  assertNotNull(completeExchange.getIn().getHeader(MllpConstants.MLLP_ACKNOWLEDGEMENT_STRING));
  String acknowledgement=completeExchange.getIn().getHeader(MllpConstants.MLLP_ACKNOWLEDGEMENT_STRING,String.class);
  assertThat(acknowledgement,startsWith("MSH|^~\\&|^org^sys||APP_A|FAC_A|"));
  assertThat(acknowledgement,endsWith("||ACK^A04^ADT_A04|||2.6\rMSA|AA|\r"));
}
