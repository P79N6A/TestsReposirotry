@Test public void testTrunkStoreFileMaxHit() throws Exception {
  deleteDirectory("target/mystore");
  createDirectory("target/mystore");
  File fileStore=new File("target/mystore/data.dat");
  fileIdempotentRepository.setFileStore(fileStore);
  fileIdempotentRepository.setCacheSize(5);
  fileIdempotentRepository.setMaxFileStoreSize(128);
  fileIdempotentRepository.setDropOldestFileStore(1000);
  fileIdempotentRepository.start();
  files.forEach(e -> fileIdempotentRepository.add(e));
  fileIdempotentRepository.cleanup();
  fileIdempotentRepository.trunkStore();
  fileIdempotentRepository.stop();
  Stream<String> fileContent=Files.lines(fileStore.toPath());
  List<String> fileEntries=fileContent.collect(Collectors.toList());
  fileContent.close();
  Assert.assertEquals(0,fileEntries.size());
}
