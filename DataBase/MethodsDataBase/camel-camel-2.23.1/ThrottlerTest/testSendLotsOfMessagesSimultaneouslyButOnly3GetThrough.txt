@Test public void testSendLotsOfMessagesSimultaneouslyButOnly3GetThrough() throws Exception {
  if (!canTest()) {
    return;
  }
  MockEndpoint resultEndpoint=resolveMandatoryEndpoint("mock:result",MockEndpoint.class);
  long elapsed=sendMessagesAndAwaitDelivery(MESSAGE_COUNT,"direct:a",MESSAGE_COUNT,resultEndpoint);
  assertThrottlerTiming(elapsed,5,INTERVAL,MESSAGE_COUNT);
}
