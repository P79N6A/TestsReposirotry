@Test public void createFlavorWithHeaders() throws Exception {
  Map<String,Object> headers=new HashMap<>();
  headers.put(OpenstackConstants.OPERATION,OpenstackConstants.CREATE);
  headers.put(OpenstackConstants.NAME,dummyFlavor.getName());
  headers.put(NovaConstants.VCPU,dummyFlavor.getVcpus());
  headers.put(NovaConstants.DISK,dummyFlavor.getDisk());
  headers.put(NovaConstants.SWAP,dummyFlavor.getSwap());
  headers.put(NovaConstants.RAM,dummyFlavor.getRam());
  msg.setHeaders(headers);
  producer.process(exchange);
  verify(flavorService).create(flavorCaptor.capture());
  assertEqualsFlavors(dummyFlavor,flavorCaptor.getValue());
  final Flavor created=msg.getBody(Flavor.class);
  assertNotNull(created.getId());
  assertEqualsFlavors(dummyFlavor,created);
}
