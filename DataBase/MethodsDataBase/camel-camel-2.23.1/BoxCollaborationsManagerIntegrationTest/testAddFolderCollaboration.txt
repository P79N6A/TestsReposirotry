@Test public void testAddFolderCollaboration() throws Exception {
  deleteTestCollaborator();
  BoxUser user=null;
  try {
    CreateUserParams params=new CreateUserParams();
    params.setSpaceAmount(1073741824);
    user=BoxUser.createAppUser(getConnection(),CAMEL_TEST_COLLABORATOR_NAME,params).getResource();
    final Map<String,Object> headers=new HashMap<>();
    headers.put("CamelBox.folderId",testFolder.getID());
    headers.put("CamelBox.collaborator",user);
    headers.put("CamelBox.role",BoxCollaboration.Role.EDITOR);
    final com.box.sdk.BoxCollaboration result=requestBodyAndHeaders("direct://ADDFOLDERCOLLABORATION",testFolder.getID(),headers);
    assertNotNull("addFolderCollaboration result",result);
    LOG.debug("addFolderCollaboration: " + result);
  }
 catch (  BoxAPIException e) {
    throw new RuntimeException(String.format("Box API returned the error code %d\n\n%s",e.getResponseCode(),e.getResponse()),e);
  }
 finally {
    if (user != null) {
      user.delete(false,true);
    }
  }
}
