@Test public void testReceptionOfMessageWithADocument() throws Exception {
  endpoint.expectedMinimumMessageCount(1);
  endpoint.assertIsSatisfied();
  Exchange mediaExchange=endpoint.getExchanges().get(0);
  IncomingMessage msg=mediaExchange.getIn().getBody(IncomingMessage.class);
  IncomingDocument document=msg.getDocument();
  assertNotNull(document);
  assertEquals("AgADBAADq6cxG0bQcwnUb4Cga-eXxnodQxkABLXiiSI1vzZK8XXXXXXX",document.getFileId());
  assertEquals(Long.valueOf(12530),document.getFileSize());
  assertEquals("file.png",document.getFileName());
  assertEquals("image/png",document.getMimeType());
  assertNotNull(document.getThumb());
  assertEquals(Integer.valueOf(90),document.getThumb().getWidth());
  assertEquals(Integer.valueOf(80),document.getThumb().getHeight());
  assertEquals(Long.valueOf(1253),document.getThumb().getFileSize());
  assertEquals("AgADBAADq6cxG0bQcwnUb4Cga-eXxnodQxkABLXiiSI1vzZK9XXXXXXX",document.getThumb().getFileId());
}
