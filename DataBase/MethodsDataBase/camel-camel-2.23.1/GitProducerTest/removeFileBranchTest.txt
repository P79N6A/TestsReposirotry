@Test public void removeFileBranchTest() throws Exception {
  Git git=getGitTestRepository();
  File gitDir=new File(gitLocalRepo,".git");
  assertEquals(gitDir.exists(),true);
  File fileToAdd=new File(gitLocalRepo,filenameToAdd);
  fileToAdd.createNewFile();
  git.add().addFilepattern(filenameToAdd).call();
  Status status=git.status().call();
  assertTrue(status.getAdded().contains(filenameToAdd));
  git.commit().setMessage(commitMessage).call();
  validateGitLogs(git,commitMessage);
  git.checkout().setCreateBranch(true).setName(branchTest).setUpstreamMode(SetupUpstreamMode.SET_UPSTREAM).call();
  File fileToAdd1=new File(gitLocalRepo,filenameBranchToAdd);
  fileToAdd1.createNewFile();
  git.add().addFilepattern(filenameBranchToAdd).call();
  git.commit().setMessage(commitMessageAll).call();
  validateGitLogs(git,commitMessageAll,commitMessage);
  template.send("direct:remove-on-branch",new Processor(){
    @Override public void process(    Exchange exchange) throws Exception {
      exchange.getIn().setHeader(GitConstants.GIT_FILE_NAME,filenameToAdd);
    }
  }
);
  git.checkout().setCreateBranch(false).setName(branchTest).call();
  status=git.status().call();
  assertFalse(status.getAdded().contains(filenameToAdd));
  git.close();
}
