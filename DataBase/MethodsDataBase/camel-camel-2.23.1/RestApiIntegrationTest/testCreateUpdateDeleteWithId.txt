@Test public void testCreateUpdateDeleteWithId() throws Exception {
  Line_Item__c lineItem=new Line_Item__c();
  final String lineItemId=String.valueOf(TEST_LINE_ITEM_ID.incrementAndGet());
  lineItem.setName(lineItemId);
  CreateSObjectResult result=template().requestBody("direct:createLineItem",lineItem,CreateSObjectResult.class);
  assertNotNull(result);
  assertTrue(result.getSuccess());
  lineItem=template().requestBody("direct:getSObjectWithId",lineItemId,Line_Item__c.class);
  assertNotNull(lineItem);
  lineItem.setUnit_Price__c(1000.0);
  lineItem.setUnits_Sold__c(50.0);
  final String newLineItemId=String.valueOf(NEW_LINE_ITEM_ID.incrementAndGet());
  lineItem.setName(newLineItemId);
  result=template().requestBodyAndHeader("direct:upsertSObject",lineItem,SalesforceEndpointConfig.SOBJECT_EXT_ID_VALUE,newLineItemId,CreateSObjectResult.class);
  assertNotNull(result);
  assertTrue(result.getSuccess());
  lineItem.setInvoice_Statement__c(null);
  lineItem.setMerchandise__c(null);
  lineItem.setUnits_Sold__c(25.0);
  result=template().requestBodyAndHeader("direct:upsertSObject",lineItem,SalesforceEndpointConfig.SOBJECT_EXT_ID_VALUE,newLineItemId,CreateSObjectResult.class);
  assertNull(result);
  assertNull(template().requestBody("direct:deleteSObjectWithId",newLineItemId));
}
