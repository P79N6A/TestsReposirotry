@Test public void testCxfRsEndpointConfigurerHttpApi() throws InterruptedException {
  template.send("direct:start",exchange -> {
    exchange.setPattern(ExchangePattern.InOut);
    Message inMessage=exchange.getIn();
    inMessage.setHeader(Exchange.HTTP_PATH,"/customerservice/customers/1");
    inMessage.setHeader(Exchange.HTTP_METHOD,HttpMethod.GET);
    inMessage.setHeader(CxfConstants.CAMEL_CXF_RS_USING_HTTP_API,Boolean.TRUE);
    inMessage.setHeader(CxfConstants.CAMEL_CXF_RS_RESPONSE_CLASS,Customer.class);
  }
);
  getMockEndpoint("mock:result").expectedHeaderReceived("foo","bar");
  getMockEndpoint("mock:end").expectedMessageCount(1);
  assertMockEndpointsSatisfied();
}
