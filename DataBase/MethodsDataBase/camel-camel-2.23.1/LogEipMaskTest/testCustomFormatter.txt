@Test public void testCustomFormatter() throws Exception {
  CamelContext context=createCamelContext();
  MockMaskingFormatter customFormatter=new MockMaskingFormatter();
  registry.bind(Constants.CUSTOM_LOG_MASK_REF,customFormatter);
  context.setLogMask(true);
  context.start();
  context.createProducerTemplate().sendBody("direct:foo","mock password=\"my passw0rd!\"");
  Assert.assertEquals("Got mock password=\"my passw0rd!\"",customFormatter.received);
  context.stop();
}
