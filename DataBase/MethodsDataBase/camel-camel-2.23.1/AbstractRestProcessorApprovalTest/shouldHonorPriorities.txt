@Test public void shouldHonorPriorities() throws SalesforceException {
  final ApprovalRequest template=new ApprovalRequest();
  template.setComments("third priority");
  final ApprovalRequest body=new ApprovalRequest();
  body.setComments("first priority");
  final Map<String,Object> headers=Collections.singletonMap("approval.Comments","second priority");
  final TestRestProcessor processor1=sendBodyAndHeaders(null,template,null);
  verify(processor1).getRequestStream(any(Message.class),eq(new ApprovalRequests(requestWithComment("third priority"))));
  final TestRestProcessor processor2=sendBodyAndHeaders(null,template,headers);
  verify(processor2).getRequestStream(any(Message.class),eq(new ApprovalRequests(requestWithComment("second priority"))));
  final TestRestProcessor processor3=sendBodyAndHeaders(body,template,headers);
  verify(processor3).getRequestStream(any(Message.class),eq(new ApprovalRequests(requestWithComment("first priority"))));
}
