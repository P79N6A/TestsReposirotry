@Test public void shouldApplyTemplateToRequestsFromBody() throws SalesforceException {
  final ApprovalRequest template=new ApprovalRequest();
  template.setActionType(Action.Submit);
  final ApprovalRequest approvalRequest1=new ApprovalRequest();
  approvalRequest1.setComments("it should be me first");
  final ApprovalRequest approvalRequest2=new ApprovalRequest();
  approvalRequest2.setComments("it should be me second");
  final TestRestProcessor processor=sendBodyAndHeader(Arrays.asList(approvalRequest1,approvalRequest2),template);
  verify(processor).getRequestStream(any(Message.class),eq(new ApprovalRequests(Arrays.asList(approvalRequest1.applyTemplate(template),approvalRequest2.applyTemplate(template)))));
}
