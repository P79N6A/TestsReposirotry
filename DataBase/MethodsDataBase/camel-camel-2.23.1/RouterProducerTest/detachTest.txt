@Test public void detachTest() throws Exception {
  final String routerID="myRouterID";
  final String portId="port";
  final String subnetId="subnet";
  final RouterInterface ifce=new NeutronRouterInterface(subnetId,portId);
  when(routerService.detachInterface(anyString(),anyString(),anyString())).thenReturn(ifce);
  msg.setHeader(OpenstackConstants.OPERATION,NeutronConstants.DETACH_INTERFACE);
  msg.setHeader(NeutronConstants.ROUTER_ID,routerID);
  msg.setHeader(NeutronConstants.SUBNET_ID,subnetId);
  msg.setHeader(NeutronConstants.PORT_ID,portId);
  producer.process(exchange);
  verify(routerService).detachInterface(routerIdCaptor.capture(),subnetIdCaptor.capture(),portIdCaptor.capture());
  assertEquals(routerID,routerIdCaptor.getValue());
  assertEquals(subnetId,subnetIdCaptor.getValue());
  assertEquals(portId,portIdCaptor.getValue());
  assertEquals(ifce,msg.getBody(RouterInterface.class));
}
