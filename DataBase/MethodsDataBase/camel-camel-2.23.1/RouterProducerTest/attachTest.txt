@Test public void attachTest() throws Exception {
  final String routerID="myRouterID";
  final String subnetId="subnet";
  final RouterInterface ifce=new NeutronRouterInterface(subnetId,null);
  when(routerService.attachInterface(anyString(),any(),anyString())).thenReturn(ifce);
  msg.setHeader(OpenstackConstants.OPERATION,NeutronConstants.ATTACH_INTERFACE);
  msg.setHeader(NeutronConstants.ROUTER_ID,routerID);
  msg.setHeader(NeutronConstants.SUBNET_ID,subnetId);
  msg.setHeader(NeutronConstants.ITERFACE_TYPE,AttachInterfaceType.SUBNET);
  producer.process(exchange);
  verify(routerService).attachInterface(routerIdCaptor.capture(),itfTypeCaptor.capture(),subnetIdCaptor.capture());
  assertEquals(routerID,routerIdCaptor.getValue());
  assertEquals(AttachInterfaceType.SUBNET,itfTypeCaptor.getValue());
  assertEquals(subnetId,subnetIdCaptor.getValue());
  assertEquals(ifce,msg.getBody(RouterInterface.class));
}
