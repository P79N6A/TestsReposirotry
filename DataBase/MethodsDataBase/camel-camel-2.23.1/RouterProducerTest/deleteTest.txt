@Test public void deleteTest() throws Exception {
  when(routerService.delete(anyString())).thenReturn(ActionResponse.actionSuccess());
  final String routerID="myRouterID";
  msg.setHeader(OpenstackConstants.OPERATION,OpenstackConstants.DELETE);
  msg.setHeader(OpenstackConstants.ID,routerID);
  producer.process(exchange);
  verify(routerService).delete(routerIdCaptor.capture());
  assertEquals(routerID,routerIdCaptor.getValue());
  assertFalse(msg.isFault());
  final String failureMessage="fail";
  when(routerService.delete(anyString())).thenReturn(ActionResponse.actionFailed(failureMessage,404));
  producer.process(exchange);
  assertTrue(msg.isFault());
  assertTrue(msg.getBody(String.class).contains(failureMessage));
}
