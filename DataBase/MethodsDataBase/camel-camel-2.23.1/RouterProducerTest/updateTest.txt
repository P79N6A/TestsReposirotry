@Test public void updateTest() throws Exception {
  final String routerID="myRouterID";
  msg.setHeader(OpenstackConstants.OPERATION,OpenstackConstants.UPDATE);
  final Router tmp=createRouter();
  final String newName="newName";
  tmp.setName(newName);
  when(routerService.update(any())).thenReturn(tmp);
  dummyRouter.setId(routerID);
  msg.setBody(dummyRouter);
  producer.process(exchange);
  verify(routerService).update(routerCaptor.capture());
  assertEqualsRouter(dummyRouter,routerCaptor.getValue());
  assertNotNull(routerCaptor.getValue().getId());
  assertEquals(newName,msg.getBody(Router.class).getName());
}
