@Test public void testToInputStreamFileWithCharsetLatin1() throws Exception {
  switchToDefaultCharset(StandardCharsets.UTF_8);
  File file=new File("src/test/resources/org/apache/camel/converter/german.iso-8859-1.txt");
  try (InputStream in=IOConverter.toInputStream(file,"ISO-8859-1");BufferedReader reader=new BufferedReader(new InputStreamReader(in,StandardCharsets.UTF_8));BufferedReader naiveReader=new BufferedReader(new InputStreamReader(Files.newInputStream(Paths.get(file.getAbsolutePath())),"ISO-8859-1"))){
    String line=reader.readLine();
    String naiveLine=naiveReader.readLine();
    assertEquals(naiveLine,line);
    assertEquals(CONTENT,line);
  }
 }
