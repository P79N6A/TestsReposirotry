@Test public void testXPathNamespaceLoggingEnabledJavaDSL() throws Exception {
  Logger l=mock(Logger.class);
  when(l.isInfoEnabled()).thenReturn(true);
  String body="<aRoot xmlns:nsa=\"http://namespacec.net\"><nsa:a xmlns:nsa=\"http://namespacea.net\">Hello|there|Camel</nsa:a>" + "<nsb:a xmlns:nsb=\"http://namespaceb.net\">Hello|there|Camel</nsb:a><nsb:a xmlns:nsb=\"http://namespaceb.net\">Hello|there|Camel</nsb:a>" + "<a xmlns=\"http://defaultNamespace.net\">Hello|there|Camel</a><a>Hello|there|Camel</a></aRoot>";
  Document doc=context.getTypeConverter().convertTo(Document.class,body);
  Field logField=XPathBuilder.class.getDeclaredField("LOG");
  logField.setAccessible(true);
  Field modifiers=Field.class.getDeclaredField("modifiers");
  modifiers.setAccessible(true);
  modifiers.setInt(logField,logField.getModifiers() & ~Modifier.FINAL);
  logField.set(null,l);
  NodeList list=XPathBuilder.xpath("//*",NodeList.class).logNamespaces().evaluate(context,doc,NodeList.class);
  assertNotNull(list);
  verify(l).info(argThat(containsString("Namespaces discovered in message")),any(Object.class));
}
