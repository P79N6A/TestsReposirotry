@Test public void testTarWithPreservedPathElements() throws Exception {
  MockEndpoint mock=getMockEndpoint("mock:tar");
  mock.expectedMessageCount(1);
  mock.expectedHeaderReceived(FILE_NAME,"poem.txt.tar");
  tar.setPreservePathElements(true);
  template.sendBodyAndHeader("direct:tar",TEXT,FILE_NAME,"poems/poem.txt");
  assertMockEndpointsSatisfied();
  Exchange exchange=mock.getReceivedExchanges().get(0);
  assertTrue(ObjectHelper.equalByteArray(getTaredTextInFolder("poems/","poems/poem.txt"),(byte[])exchange.getIn().getBody()));
}
