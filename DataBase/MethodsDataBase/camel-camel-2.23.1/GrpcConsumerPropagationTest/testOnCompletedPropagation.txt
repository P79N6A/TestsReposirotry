@Test public void testOnCompletedPropagation() throws Exception {
  LOG.info("gRPC pingAsyncAsync method aync test start");
  final CountDownLatch latch=new CountDownLatch(1);
  PingRequest pingRequest=PingRequest.newBuilder().setPingName(GRPC_TEST_PING_VALUE).setPingId(GRPC_TEST_PING_ID).build();
  PongResponseStreamObserver responseObserver=new PongResponseStreamObserver(latch);
  StreamObserver<PingRequest> requestObserver=asyncOnCompletedStub.pingAsyncAsync(responseObserver);
  requestObserver.onCompleted();
  latch.await(5,TimeUnit.SECONDS);
  MockEndpoint mockEndpoint=getMockEndpoint("mock:async-on-completed-propagation");
  mockEndpoint.expectedMessageCount(1);
  mockEndpoint.expectedHeaderValuesReceivedInAnyOrder(GrpcConstants.GRPC_EVENT_TYPE_HEADER,GrpcConstants.GRPC_EVENT_TYPE_ON_COMPLETED);
  mockEndpoint.expectedHeaderValuesReceivedInAnyOrder(GrpcConstants.GRPC_METHOD_NAME_HEADER,"pingAsyncAsync");
  mockEndpoint.assertIsSatisfied();
}
