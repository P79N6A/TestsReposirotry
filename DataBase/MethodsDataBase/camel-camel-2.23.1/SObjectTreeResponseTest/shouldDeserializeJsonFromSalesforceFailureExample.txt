@Test public void shouldDeserializeJsonFromSalesforceFailureExample() throws Exception {
  final String json="{\n" + "   \"hasErrors\" : true,\n" + "   \"results\" : [{\n"+ "     \"referenceId\" : \"ref2\",\n"+ "     \"errors\" : [{\n"+ "       \"statusCode\" : \"INVALID_EMAIL_ADDRESS\",\n"+ "       \"message\" : \"Email: invalid email address: 123\",\n"+ "       \"fields\" : [ \"Email\" ]\n"+ "       }]\n"+ "     }]\n"+ "}";
  final ObjectMapper mapper=JsonUtils.createObjectMapper();
  final ObjectReader reader=mapper.readerFor(SObjectTreeResponse.class);
  final SObjectTreeResponse response=reader.readValue(json);
  assertNotNull("Response should be parsed",response);
  assertTrue("`hasErrors` flag should be true",response.hasErrors());
  assertEquals("Should read one reference",1,response.getResults().size());
  assertThat("The reference should be read as expected",response.getResults(),hasItems(new ReferenceId("ref2",null,Arrays.asList(new RestError("INVALID_EMAIL_ADDRESS","Email: invalid email address: 123",Arrays.asList("Email"))))));
}
