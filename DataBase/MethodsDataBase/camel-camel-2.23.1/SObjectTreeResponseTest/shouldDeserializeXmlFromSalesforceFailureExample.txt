@Test public void shouldDeserializeXmlFromSalesforceFailureExample() throws Exception {
  final String xml="<Result>\n" + "    <hasErrors>true</hasErrors>\n" + "    <results>\n"+ "        <errors>\n"+ "            <fields>Email</fields>\n"+ "            <message>Email: invalid email address: 123</message>\n"+ "            <statusCode>INVALID_EMAIL_ADDRESS</statusCode>\n"+ "        </errors>\n"+ "        <referenceId>ref2</referenceId>\n"+ "    </results>\n"+ "</Result>";
  final XStream xStream=XStreamUtils.createXStream(SObjectTreeResponse.class);
  final SObjectTreeResponse response=(SObjectTreeResponse)xStream.fromXML(xml);
  assertNotNull("Response should be parsed",response);
  assertTrue("`hasErrors` flag should be true",response.hasErrors());
  assertEquals("Should read one reference",1,response.getResults().size());
  assertThat("The reference should be read as expected",response.getResults(),hasItems(new ReferenceId("ref2",null,Arrays.asList(new RestError("INVALID_EMAIL_ADDRESS","Email: invalid email address: 123",Arrays.asList("Email"))))));
}
