@Test public void testEndpointValidator() throws Exception {
  Exchange exchange=new DefaultExchange(context,ExchangePattern.InOut);
  exchange.getIn().setBody("<XOrder/>");
  Exchange answerEx=template.send("direct:endpoint",exchange);
  if (answerEx.getException() != null) {
    throw answerEx.getException();
  }
  assertEquals("<XOrderResponse/>",answerEx.getOut().getBody(String.class));
  assertEquals(MyXmlEndpoint.class,answerEx.getProperty(VALIDATOR_INVOKED));
}
