@Test public void testConsume() throws Exception {
  final MockEndpoint mockEndpoint=camelContext.getEndpoint("mock:results",MockEndpoint.class);
  mockEndpoint.expectedMessageCount(4);
  Observable<Message> observableMessage=reactiveCamel.toObservable("timer://foo?fixedRate=true&period=100");
  Observable<String> observable=observableMessage.map(message -> "Transformed value: headers " + message.getHeaders());
  observable.take(4).subscribe(body -> {
    LOG.info(body);
    producerTemplate.sendBody(mockEndpoint,body);
  }
);
  mockEndpoint.assertIsSatisfied();
}
