@Test public void testExponentialBackOffMaximumRetryDelay() throws Exception {
  OptimisticLockRetryPolicy policy=new OptimisticLockRetryPolicy();
  policy.setRandomBackOff(false);
  policy.setExponentialBackOff(true);
  policy.setMaximumRetryDelay(100L);
  policy.setRetryDelay(50L);
  for (int i=0; i < 10; i++) {
    long elapsed=doDelay(policy,i);
switch (i) {
case 0:
      assertDelay(50L,elapsed);
    break;
case 1:
  assertDelay(100L,elapsed);
break;
default :
assertDelay(100L,elapsed);
break;
}
}
}
