@Test public void testServiceCall() throws Exception {
  getMockEndpoint("mock:app1").expectedMessageCount(1);
  getMockEndpoint("mock:app2").expectedMessageCount(1);
  getMockEndpoint("mock:result").expectedMessageCount(2);
  String out=template.requestBody("direct:start",null,String.class);
  String out2=template.requestBody("direct:start",null,String.class);
  assertEquals("app2",out);
  assertEquals("app1",out2);
  assertMockEndpointsSatisfied();
}
