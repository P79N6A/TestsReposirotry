@Test public void testReauthorizationWithSameFbidSucceeds() throws Exception {
  FacebookSdk.setApplicationId("123456789");
  FacebookSdk.setAutoLogAppEventsEnabled(false);
  FacebookSdk.sdkInitialize(RuntimeEnvironment.application);
  LoginClient.Request request=createRequest(ACCESS_TOKEN);
  AccessToken token=new AccessToken(ACCESS_TOKEN,APP_ID,USER_ID,PERMISSIONS,null,null,null,null,null);
  LoginClient.Result result=LoginClient.Result.createTokenResult(request,token);
  LoginClient.OnCompletedListener listener=mock(LoginClient.OnCompletedListener.class);
  LoginClient client=new LoginClient(mockFragment);
  client.setOnCompletedListener(listener);
  client.completeAndValidate(result);
  ArgumentCaptor<LoginClient.Result> resultArgumentCaptor=ArgumentCaptor.forClass(LoginClient.Result.class);
  verify(listener).onCompleted(resultArgumentCaptor.capture());
  result=resultArgumentCaptor.getValue();
  assertNotNull(result);
  assertEquals(LoginClient.Result.Code.SUCCESS,result.code);
  AccessToken resultToken=result.token;
  assertNotNull(resultToken);
  assertEquals(ACCESS_TOKEN,resultToken.getToken());
  assertEquals(PERMISSIONS,resultToken.getPermissions());
}
