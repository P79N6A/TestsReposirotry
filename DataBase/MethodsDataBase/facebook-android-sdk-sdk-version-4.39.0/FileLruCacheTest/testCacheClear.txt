@Test public void testCacheClear() throws Exception {
  int dataSize=1024;
  byte[] data=generateBytes(dataSize);
  String key="a";
  FileLruCache cache=new FileLruCache("testCacheClear",limitCacheSize(2 * dataSize));
  try {
    TestUtils.clearFileLruCache(cache);
    put(cache,key,data);
    checkValue(cache,key,data);
    TestUtils.clearFileLruCache(cache);
    assertEquals(false,hasValue(cache,key));
    assertEquals(0,cache.sizeInBytesForTest());
  }
  finally {
    TestUtils.clearAndDeleteLruCacheDirectory(cache);
  }
}
