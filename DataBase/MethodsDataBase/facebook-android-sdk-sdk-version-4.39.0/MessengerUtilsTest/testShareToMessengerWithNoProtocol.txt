@Test public void testShareToMessengerWithNoProtocol() throws Exception {
  setupPackageManagerForMessenger(true);
  setupContentResolverForProtocolVersions();
  Uri uri=Uri.parse("file:///foo.jpeg");
  Uri externalUri=Uri.parse("http://example.com/foo.jpeg");
  ShareToMessengerParams params=ShareToMessengerParams.newBuilder(uri,"image/jpeg").setMetaData("{}").setExternalUri(externalUri).build();
  MessengerUtils.shareToMessenger(mMockActivity,1,params);
  ArgumentCaptor<Intent> intentArgumentCaptor=ArgumentCaptor.forClass(Intent.class);
  verify(mMockActivity).startActivity(intentArgumentCaptor.capture());
  Intent intent=intentArgumentCaptor.getValue();
  assertEquals(Intent.ACTION_VIEW,intent.getAction());
  assertEquals(Uri.parse("market://details?id=com.facebook.orca"),intent.getData());
}
