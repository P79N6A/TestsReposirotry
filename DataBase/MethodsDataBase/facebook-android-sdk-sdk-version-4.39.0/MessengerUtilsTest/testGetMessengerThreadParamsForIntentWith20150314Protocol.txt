@Test public void testGetMessengerThreadParamsForIntentWith20150314Protocol() throws Exception {
  Intent intent=new Intent();
  intent.addCategory("com.facebook.orca.category.PLATFORM_THREAD_20150314");
  Bundle extrasBundle=setupIntentWithAppLinkExtrasBundle(intent);
  extrasBundle.putString("com.facebook.orca.extra.THREAD_TOKEN","thread_token");
  extrasBundle.putString("com.facebook.orca.extra.METADATA","{}");
  extrasBundle.putString("com.facebook.orca.extra.PARTICIPANTS","100,400,500");
  extrasBundle.putBoolean("com.facebook.orca.extra.IS_REPLY",true);
  MessengerThreadParams params=MessengerUtils.getMessengerThreadParamsForIntent(intent);
  assertEquals(MessengerThreadParams.Origin.REPLY_FLOW,params.origin);
  assertEquals("thread_token",params.threadToken);
  assertEquals("{}",params.metadata);
  assertEquals(Arrays.asList("100","400","500"),params.participants);
}
