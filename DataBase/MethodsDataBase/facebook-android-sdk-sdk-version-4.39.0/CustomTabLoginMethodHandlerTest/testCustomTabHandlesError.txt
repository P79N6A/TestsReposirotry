@Test public void testCustomTabHandlesError(){
  handler.onComplete(request,null,new FacebookException(ERROR_MESSAGE));
  final ArgumentCaptor<LoginClient.Result> resultArgumentCaptor=ArgumentCaptor.forClass(LoginClient.Result.class);
  verify(mockLoginClient,times(1)).completeAndValidate(resultArgumentCaptor.capture());
  final LoginClient.Result result=resultArgumentCaptor.getValue();
  assertNotNull(result);
  assertEquals(LoginClient.Result.Code.ERROR,result.code);
  assertNull(result.token);
  assertNotNull(result.errorMessage);
  assertEquals(ERROR_MESSAGE,result.errorMessage);
}
