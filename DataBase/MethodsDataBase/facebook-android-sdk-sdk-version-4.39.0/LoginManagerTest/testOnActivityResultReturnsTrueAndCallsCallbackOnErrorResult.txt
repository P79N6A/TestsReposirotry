@Test public void testOnActivityResultReturnsTrueAndCallsCallbackOnErrorResult(){
  LoginManager loginManager=new LoginManager();
  loginManager.logInWithReadPermissions(mockActivity,Arrays.asList("public_profile","user_friends"));
  boolean result=loginManager.onActivityResult(Activity.RESULT_OK,createErrorResultIntent(),mockCallback);
  ArgumentCaptor<FacebookException> exceptionArgumentCaptor=ArgumentCaptor.forClass(FacebookException.class);
  assertTrue(result);
  verify(mockCallback,times(1)).onError(exceptionArgumentCaptor.capture());
  verify(mockCallback,never()).onSuccess(isA(LoginResult.class));
  assertEquals("foo: bar",exceptionArgumentCaptor.getValue().getMessage());
}
