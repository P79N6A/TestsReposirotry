@Test public void testBatchRequest() throws JSONException {
  JSONArray batchResponse=new JSONArray(ERROR_BATCH_RESPONSE);
  assertEquals(2,batchResponse.length());
  JSONObject firstResponse=(JSONObject)batchResponse.get(0);
  FacebookRequestError error=FacebookRequestError.checkResponseAndCreateError(firstResponse,batchResponse,null);
  assertNotNull(error);
  assertEquals(400,error.getRequestStatusCode());
  assertEquals("An active access token must be used to query information about the current user.",error.getErrorMessage());
  assertEquals("OAuthException",error.getErrorType());
  assertEquals(2500,error.getErrorCode());
  assertTrue(error.getBatchRequestResult() instanceof JSONArray);
  assertEquals(FacebookRequestError.Category.OTHER,error.getCategory());
}
