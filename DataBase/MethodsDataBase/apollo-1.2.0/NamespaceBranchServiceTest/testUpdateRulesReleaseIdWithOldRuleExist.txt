@Test @Sql(scripts="/sql/namespace-branch-test.sql",executionPhase=Sql.ExecutionPhase.BEFORE_TEST_METHOD) @Sql(scripts="/sql/clean.sql",executionPhase=Sql.ExecutionPhase.AFTER_TEST_METHOD) public void testUpdateRulesReleaseIdWithOldRuleExist(){
  GrayReleaseRule rule=instanceGrayReleaseRule();
  namespaceBranchService.updateBranchGrayRules(testApp,testCluster,testNamespace,testBranchName,rule);
  long latestReleaseId=100;
  namespaceBranchService.updateRulesReleaseId(testApp,testCluster,testNamespace,testBranchName,latestReleaseId,operator);
  GrayReleaseRule activeRule=namespaceBranchService.findBranchGrayRules(testApp,testCluster,testNamespace,testBranchName);
  Assert.assertNotNull(activeRule);
  Assert.assertEquals(Long.valueOf(latestReleaseId),activeRule.getReleaseId());
  Assert.assertEquals(rule.getRules(),activeRule.getRules());
  Assert.assertEquals(NamespaceBranchStatus.ACTIVE,activeRule.getBranchStatus());
}
