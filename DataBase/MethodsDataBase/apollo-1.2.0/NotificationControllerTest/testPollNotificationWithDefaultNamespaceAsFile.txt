@Test public void testPollNotificationWithDefaultNamespaceAsFile() throws Exception {
  String namespace=String.format("%s.%s",defaultNamespace,"properties");
  when(namespaceUtil.filterNamespaceName(namespace)).thenReturn(defaultNamespace);
  String someWatchKey="someKey";
  String anotherWatchKey="anotherKey";
  Set<String> watchKeys=Sets.newHashSet(someWatchKey,anotherWatchKey);
  when(watchKeysUtil.assembleAllWatchKeys(someAppId,someCluster,defaultNamespace,someDataCenter)).thenReturn(watchKeys);
  DeferredResult<ResponseEntity<ApolloConfigNotification>> deferredResult=controller.pollNotification(someAppId,someCluster,namespace,someDataCenter,someNotificationId,someClientIp);
  assertEquals(watchKeys.size(),deferredResults.size());
  for (  String watchKey : watchKeys) {
    assertTrue(deferredResults.get(watchKey).contains(deferredResult));
  }
}
