@Test public void testQueryConfigWithAppOwnNamespace() throws Exception {
  String someClientSideReleaseKey="1";
  String someServerSideReleaseKey="2";
  String someAppOwnNamespaceName="someAppOwn";
  HttpServletResponse someResponse=mock(HttpServletResponse.class);
  AppNamespace someAppOwnNamespace=assemblePublicAppNamespace(someAppId,someAppOwnNamespaceName);
  when(configService.loadConfig(someAppId,someClientIp,someAppId,someClusterName,someAppOwnNamespaceName,someDataCenter,someNotificationMessages)).thenReturn(someRelease);
  when(appNamespaceService.findPublicNamespaceByName(someAppOwnNamespaceName)).thenReturn(someAppOwnNamespace);
  when(someRelease.getReleaseKey()).thenReturn(someServerSideReleaseKey);
  when(namespaceUtil.filterNamespaceName(someAppOwnNamespaceName)).thenReturn(someAppOwnNamespaceName);
  when(namespaceUtil.normalizeNamespace(someAppId,someAppOwnNamespaceName)).thenReturn(someAppOwnNamespaceName);
  ApolloConfig result=configController.queryConfig(someAppId,someClusterName,someAppOwnNamespaceName,someDataCenter,someClientSideReleaseKey,someClientIp,someMessagesAsString,someRequest,someResponse);
  assertEquals(someServerSideReleaseKey,result.getReleaseKey());
  assertEquals(someAppId,result.getAppId());
  assertEquals(someClusterName,result.getCluster());
  assertEquals(someAppOwnNamespaceName,result.getNamespaceName());
  assertEquals("foo",result.getConfigurations().get("apollo.bar"));
}
