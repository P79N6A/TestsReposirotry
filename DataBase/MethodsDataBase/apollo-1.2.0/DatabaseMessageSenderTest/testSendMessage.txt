@Test public void testSendMessage() throws Exception {
  String someMessage="some-message";
  long someId=1;
  ReleaseMessage someReleaseMessage=mock(ReleaseMessage.class);
  when(someReleaseMessage.getId()).thenReturn(someId);
  when(releaseMessageRepository.save(any(ReleaseMessage.class))).thenReturn(someReleaseMessage);
  ArgumentCaptor<ReleaseMessage> captor=ArgumentCaptor.forClass(ReleaseMessage.class);
  messageSender.sendMessage(someMessage,Topics.APOLLO_RELEASE_TOPIC);
  verify(releaseMessageRepository,times(1)).save(captor.capture());
  assertEquals(someMessage,captor.getValue().getMessage());
}
