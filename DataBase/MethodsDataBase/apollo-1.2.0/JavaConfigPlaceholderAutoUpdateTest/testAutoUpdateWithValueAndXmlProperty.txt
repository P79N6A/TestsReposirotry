@Test public void testAutoUpdateWithValueAndXmlProperty() throws Exception {
  int initialTimeout=1000;
  int initialBatch=2000;
  int newTimeout=1001;
  int newBatch=2001;
  Properties properties=assembleProperties(TIMEOUT_PROPERTY,String.valueOf(initialTimeout),BATCH_PROPERTY,String.valueOf(initialBatch));
  SimpleConfig config=prepareConfig(ConfigConsts.NAMESPACE_APPLICATION,properties);
  AnnotationConfigApplicationContext context=new AnnotationConfigApplicationContext(AppConfig8.class);
  TestJavaConfigBean javaConfigBean=context.getBean(TestJavaConfigBean.class);
  TestXmlBean xmlBean=context.getBean(TestXmlBean.class);
  assertEquals(initialTimeout,javaConfigBean.getTimeout());
  assertEquals(initialBatch,javaConfigBean.getBatch());
  assertEquals(initialTimeout,xmlBean.getTimeout());
  assertEquals(initialBatch,xmlBean.getBatch());
  Properties newProperties=assembleProperties(TIMEOUT_PROPERTY,String.valueOf(newTimeout),BATCH_PROPERTY,String.valueOf(newBatch));
  config.onRepositoryChange(ConfigConsts.NAMESPACE_APPLICATION,newProperties);
  TimeUnit.MILLISECONDS.sleep(100);
  assertEquals(newTimeout,javaConfigBean.getTimeout());
  assertEquals(newBatch,javaConfigBean.getBatch());
  assertEquals(newTimeout,xmlBean.getTimeout());
  assertEquals(newBatch,xmlBean.getBatch());
}
