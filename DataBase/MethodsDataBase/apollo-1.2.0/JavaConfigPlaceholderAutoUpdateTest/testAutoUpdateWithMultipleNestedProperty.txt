@Test public void testAutoUpdateWithMultipleNestedProperty() throws Exception {
  String someKeyValue="someKeyValue";
  String someNewKeyValue="someNewKeyValue";
  String anotherKeyValue="anotherKeyValue";
  String someNestedKey="someNestedKey";
  String someNestedPlaceholder=String.format("${%s}",someNestedKey);
  String anotherNestedKey="anotherNestedKey";
  String anotherNestedPlaceholder=String.format("${%s}",anotherNestedKey);
  int someValue=1234;
  int someNewValue=2345;
  Properties properties=assembleProperties(SOME_KEY_PROPERTY,someKeyValue,ANOTHER_KEY_PROPERTY,anotherKeyValue,someKeyValue,someNestedPlaceholder);
  properties.setProperty(someNestedKey,String.valueOf(someValue));
  SimpleConfig config=prepareConfig(ConfigConsts.NAMESPACE_APPLICATION,properties);
  AnnotationConfigApplicationContext context=new AnnotationConfigApplicationContext(NestedPropertyConfig2.class);
  TestNestedPropertyBeanWithDefaultValue bean=context.getBean(TestNestedPropertyBeanWithDefaultValue.class);
  assertEquals(someValue,bean.getNestedProperty());
  Properties newProperties=assembleProperties(SOME_KEY_PROPERTY,someNewKeyValue,ANOTHER_KEY_PROPERTY,anotherKeyValue,someNewKeyValue,anotherNestedPlaceholder);
  newProperties.setProperty(anotherNestedKey,String.valueOf(someNewValue));
  config.onRepositoryChange(ConfigConsts.NAMESPACE_APPLICATION,newProperties);
  TimeUnit.MILLISECONDS.sleep(100);
  assertEquals(someNewValue,bean.getNestedProperty());
}
