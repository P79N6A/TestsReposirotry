@Test public void testFindPublicAppNamespace(){
  AppNamespace publicAppNamespace=MockBeanFactory.mockAppNamespace(null,testPublicAppNamespace,true);
  when(appNamespaceService.findPublicNamespaceByName(testPublicAppNamespace)).thenReturn(publicAppNamespace);
  Namespace firstParentNamespace=MockBeanFactory.mockNamespace("app",ConfigConsts.CLUSTER_NAME_DEFAULT,testPublicAppNamespace);
  Namespace secondParentNamespace=MockBeanFactory.mockNamespace("app1",ConfigConsts.CLUSTER_NAME_DEFAULT,testPublicAppNamespace);
  Namespace childNamespace=MockBeanFactory.mockNamespace("app2",ConfigConsts.CLUSTER_NAME_DEFAULT,testPublicAppNamespace);
  Pageable page=PageRequest.of(0,10);
  when(namespaceRepository.findByNamespaceName(testPublicAppNamespace,page)).thenReturn(Arrays.asList(firstParentNamespace,secondParentNamespace));
  doReturn(false).when(namespaceService).isChildNamespace(firstParentNamespace);
  doReturn(false).when(namespaceService).isChildNamespace(secondParentNamespace);
  doReturn(true).when(namespaceService).isChildNamespace(childNamespace);
  List<Namespace> namespaces=namespaceService.findPublicAppNamespaceAllNamespaces(testPublicAppNamespace,page);
  assertEquals(2,namespaces.size());
}
