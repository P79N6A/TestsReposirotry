@Test(expected=BadRequestException.class) public void testDeleteNamespaceBranchHasInstance(){
  AppNamespace publicNamespace=createAppNamespace(testAppId,testNamespaceName,true);
  String branchName="branch";
  NamespaceDTO branch=createNamespace(testAppId,branchName,testNamespaceName);
  when(appNamespaceService.findByAppIdAndName(testAppId,testNamespaceName)).thenReturn(publicNamespace);
  when(instanceService.getInstanceCountByNamepsace(testAppId,testEnv,testClusterName,testNamespaceName)).thenReturn(0);
  when(branchService.findBranchBaseInfo(testAppId,testEnv,testClusterName,testNamespaceName)).thenReturn(branch);
  when(instanceService.getInstanceCountByNamepsace(testAppId,testEnv,branchName,testNamespaceName)).thenReturn(10);
  namespaceService.deleteNamespace(testAppId,testEnv,testClusterName,testNamespaceName);
}
