@Test public void testAuthFailed() throws Exception {
  String someInvalidToken="someInvalidToken";
  when(request.getHeader("Authorization")).thenReturn(someInvalidToken);
  when(consumerAuthUtil.getConsumerId(someInvalidToken)).thenReturn(null);
  authenticationFilter.doFilter(request,response,filterChain);
  verify(response,times(1)).sendError(eq(HttpServletResponse.SC_UNAUTHORIZED),anyString());
  verify(consumerAuthUtil,never()).storeConsumerId(eq(request),anyLong());
  verify(consumerAuditUtil,never()).audit(eq(request),anyLong());
  verify(filterChain,never()).doFilter(request,response);
}
