@Test @Sql(scripts="/sql/permission/insert-test-roles.sql",executionPhase=Sql.ExecutionPhase.BEFORE_TEST_METHOD) @Sql(scripts="/sql/permission/insert-test-userroles.sql",executionPhase=Sql.ExecutionPhase.BEFORE_TEST_METHOD) @Sql(scripts="/sql/cleanup.sql",executionPhase=Sql.ExecutionPhase.AFTER_TEST_METHOD) public void testQueryUsersWithRole() throws Exception {
  String someRoleName="someRoleName";
  Set<UserInfo> users=rolePermissionService.queryUsersWithRole(someRoleName);
  Set<String> userIds=FluentIterable.from(users).transform(UserInfo::getUserId).toSet();
  assertTrue(userIds.containsAll(Sets.newHashSet("someUser","anotherUser")));
}
