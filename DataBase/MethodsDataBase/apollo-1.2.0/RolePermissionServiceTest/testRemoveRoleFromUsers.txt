@Test @Sql(scripts="/sql/permission/insert-test-roles.sql",executionPhase=Sql.ExecutionPhase.BEFORE_TEST_METHOD) @Sql(scripts="/sql/permission/insert-test-userroles.sql",executionPhase=Sql.ExecutionPhase.BEFORE_TEST_METHOD) @Sql(scripts="/sql/cleanup.sql",executionPhase=Sql.ExecutionPhase.AFTER_TEST_METHOD) public void testRemoveRoleFromUsers() throws Exception {
  String someRoleName="someRoleName";
  String someUser="someUser";
  String anotherUser="anotherUser";
  String operator="operator";
  Set<String> users=Sets.newHashSet(someUser,anotherUser);
  List<UserRole> userRoles=userRoleRepository.findByRoleId(990);
  assertFalse(userRoles.isEmpty());
  rolePermissionService.removeRoleFromUsers(someRoleName,users,operator);
  List<UserRole> userRolesAfterRemoval=userRoleRepository.findByRoleId(990);
  assertTrue(userRolesAfterRemoval.isEmpty());
}
