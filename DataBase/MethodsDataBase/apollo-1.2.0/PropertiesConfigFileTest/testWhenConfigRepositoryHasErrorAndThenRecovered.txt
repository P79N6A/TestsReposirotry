@Test public void testWhenConfigRepositoryHasErrorAndThenRecovered() throws Exception {
  Properties someProperties=new Properties();
  String someKey="someKey";
  String someValue="someValue";
  someProperties.setProperty(someKey,someValue);
  when(configRepository.getConfig()).thenThrow(new RuntimeException("someError"));
  PropertiesConfigFile configFile=new PropertiesConfigFile(someNamespace,configRepository);
  assertFalse(configFile.hasContent());
  assertNull(configFile.getContent());
  configFile.onRepositoryChange(someNamespace,someProperties);
  assertTrue(configFile.hasContent());
  assertTrue(configFile.getContent().contains(String.format("%s=%s",someKey,someValue)));
}
