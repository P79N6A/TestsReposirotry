@Test public void testMultipleNestedPropertyWithDefaultValue() throws Exception {
  String a="a";
  String b="b";
  String nestedKey="c.d";
  int someValue=1234;
  String nestedProperty=String.format("${%s:%d}",nestedKey,someValue);
  Config config=mock(Config.class);
  when(config.getProperty(eq(a),anyString())).thenReturn(a);
  when(config.getProperty(eq(b),anyString())).thenReturn(b);
  when(config.getProperty(eq(String.format("%s.%s",a,b)),anyString())).thenReturn(nestedProperty);
  mockConfig(ConfigConsts.NAMESPACE_APPLICATION,config);
  AnnotationConfigApplicationContext context=new AnnotationConfigApplicationContext(NestedPropertyConfig1.class);
  TestNestedPropertyBean bean=context.getBean(TestNestedPropertyBean.class);
  assertEquals(someValue,bean.getNestedProperty());
}
