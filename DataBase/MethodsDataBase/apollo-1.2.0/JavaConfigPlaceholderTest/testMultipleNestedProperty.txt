@Test public void testMultipleNestedProperty() throws Exception {
  String a="a";
  String b="b";
  String nestedKey="c.d";
  String nestedProperty=String.format("${%s}",nestedKey);
  int someValue=1234;
  Config config=mock(Config.class);
  when(config.getProperty(eq(a),anyString())).thenReturn(a);
  when(config.getProperty(eq(b),anyString())).thenReturn(b);
  when(config.getProperty(eq(String.format("%s.%s",a,b)),anyString())).thenReturn(nestedProperty);
  when(config.getProperty(eq(nestedKey),anyString())).thenReturn(String.valueOf(someValue));
  mockConfig(ConfigConsts.NAMESPACE_APPLICATION,config);
  AnnotationConfigApplicationContext context=new AnnotationConfigApplicationContext(NestedPropertyConfig1.class);
  TestNestedPropertyBean bean=context.getBean(TestNestedPropertyBean.class);
  assertEquals(someValue,bean.getNestedProperty());
}
