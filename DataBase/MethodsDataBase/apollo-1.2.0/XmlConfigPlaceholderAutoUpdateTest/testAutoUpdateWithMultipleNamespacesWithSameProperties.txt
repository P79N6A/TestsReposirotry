@Test public void testAutoUpdateWithMultipleNamespacesWithSameProperties() throws Exception {
  int someTimeout=1000;
  int someBatch=2000;
  int anotherBatch=3000;
  int someNewTimeout=1001;
  int someNewBatch=2001;
  Properties applicationProperties=assembleProperties(BATCH_PROPERTY,String.valueOf(someBatch));
  Properties fxApolloProperties=assembleProperties(TIMEOUT_PROPERTY,String.valueOf(someTimeout),BATCH_PROPERTY,String.valueOf(anotherBatch));
  prepareConfig(ConfigConsts.NAMESPACE_APPLICATION,applicationProperties);
  SimpleConfig fxApolloConfig=prepareConfig(FX_APOLLO_NAMESPACE,fxApolloProperties);
  ClassPathXmlApplicationContext context=new ClassPathXmlApplicationContext("spring/XmlConfigPlaceholderTest3.xml");
  TestXmlBean bean=context.getBean(TestXmlBean.class);
  assertEquals(someTimeout,bean.getTimeout());
  assertEquals(someBatch,bean.getBatch());
  Properties newFxApolloProperties=assembleProperties(TIMEOUT_PROPERTY,String.valueOf(someNewTimeout),BATCH_PROPERTY,String.valueOf(someNewBatch));
  fxApolloConfig.onRepositoryChange(FX_APOLLO_NAMESPACE,newFxApolloProperties);
  TimeUnit.MILLISECONDS.sleep(100);
  assertEquals(someNewTimeout,bean.getTimeout());
  assertEquals(someBatch,bean.getBatch());
}
