@Test public void testNormalizeNamespaceWithPublicNamespace() throws Exception {
  String someAppId="someAppId";
  String someNamespaceName="someNamespaceName";
  String someNormalizedNamespaceName="someNormalizedNamespaceName";
  AppNamespace someAppNamespace=mock(AppNamespace.class);
  when(someAppNamespace.getName()).thenReturn(someNormalizedNamespaceName);
  when(appNamespaceServiceWithCache.findByAppIdAndNamespace(someAppId,someNamespaceName)).thenReturn(null);
  when(appNamespaceServiceWithCache.findPublicNamespaceByName(someNamespaceName)).thenReturn(someAppNamespace);
  assertEquals(someNormalizedNamespaceName,namespaceUtil.normalizeNamespace(someAppId,someNamespaceName));
  verify(appNamespaceServiceWithCache,times(1)).findByAppIdAndNamespace(someAppId,someNamespaceName);
  verify(appNamespaceServiceWithCache,times(1)).findPublicNamespaceByName(someNamespaceName);
}
