@Test @Rollback public void testCreateAndFindInstanceConfig() throws Exception {
  long someInstanceId=1;
  String someConfigAppId="someConfigAppId";
  String someConfigClusterName="someConfigClusterName";
  String someConfigNamespaceName="someConfigNamespaceName";
  String someReleaseKey="someReleaseKey";
  String anotherReleaseKey="anotherReleaseKey";
  InstanceConfig instanceConfig=instanceService.findInstanceConfig(someInstanceId,someConfigAppId,someConfigNamespaceName);
  assertNull(instanceConfig);
  instanceService.createInstanceConfig(assembleInstanceConfig(someInstanceId,someConfigAppId,someConfigClusterName,someConfigNamespaceName,someReleaseKey));
  instanceConfig=instanceService.findInstanceConfig(someInstanceId,someConfigAppId,someConfigNamespaceName);
  assertNotEquals(0,instanceConfig.getId());
  assertEquals(someReleaseKey,instanceConfig.getReleaseKey());
  instanceConfig.setReleaseKey(anotherReleaseKey);
  instanceService.updateInstanceConfig(instanceConfig);
  InstanceConfig updated=instanceService.findInstanceConfig(someInstanceId,someConfigAppId,someConfigNamespaceName);
  assertEquals(instanceConfig.getId(),updated.getId());
  assertEquals(anotherReleaseKey,updated.getReleaseKey());
}
