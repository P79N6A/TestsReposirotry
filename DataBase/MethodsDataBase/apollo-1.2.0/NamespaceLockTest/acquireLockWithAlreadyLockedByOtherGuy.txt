@Test(expected=BadRequestException.class) public void acquireLockWithAlreadyLockedByOtherGuy(){
  when(bizConfig.isNamespaceLockSwitchOff()).thenReturn(false);
  when(namespaceService.findOne(APP,CLUSTER,NAMESPACE)).thenReturn(mockNamespace());
  when(namespaceLockService.findLock(NAMESPACE_ID)).thenReturn(mockNamespaceLock(ANOTHER_USER));
  namespaceLockAspect.acquireLock(APP,CLUSTER,NAMESPACE,CURRENT_USER);
  verify(bizConfig).isNamespaceLockSwitchOff();
  verify(namespaceService).findOne(APP,CLUSTER,NAMESPACE);
  verify(namespaceLockService).findLock(NAMESPACE_ID);
}
