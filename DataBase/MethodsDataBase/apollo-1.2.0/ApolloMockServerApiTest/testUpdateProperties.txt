@Test public void testUpdateProperties() throws Exception {
  String someNewValue="someNewValue";
  Config otherConfig=ConfigService.getConfig(anotherNamespace);
  final SettableFuture<ConfigChangeEvent> future=SettableFuture.create();
  otherConfig.addChangeListener(new ConfigChangeListener(){
    @Override public void onChange(    ConfigChangeEvent changeEvent){
      future.set(changeEvent);
    }
  }
);
  assertEquals("otherValue1",otherConfig.getProperty("key1",null));
  assertEquals("otherValue2",otherConfig.getProperty("key2",null));
  embeddedApollo.addOrModifyProperty(anotherNamespace,"key1",someNewValue);
  ConfigChangeEvent changeEvent=future.get(5,TimeUnit.SECONDS);
  assertEquals(someNewValue,otherConfig.getProperty("key1",null));
  assertEquals("otherValue2",otherConfig.getProperty("key2",null));
  assertTrue(changeEvent.isChanged("key1"));
}
