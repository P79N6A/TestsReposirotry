@Test public void testFillFromEnvironmentWithSystemPropertyAlreadyFilled() throws Exception {
  String someAppId="someAppId";
  String someCluster="someCluster";
  String someCacheDir="someCacheDir";
  String someApolloMeta="someApolloMeta";
  System.setProperty("app.id",someAppId);
  System.setProperty(ConfigConsts.APOLLO_CLUSTER_KEY,someCluster);
  System.setProperty("apollo.cacheDir",someCacheDir);
  System.setProperty(ConfigConsts.APOLLO_META_KEY,someApolloMeta);
  String anotherAppId="anotherAppId";
  String anotherCluster="anotherCluster";
  String anotherCacheDir="anotherCacheDir";
  String anotherApolloMeta="anotherApolloMeta";
  ConfigurableEnvironment environment=mock(ConfigurableEnvironment.class);
  when(environment.getProperty("app.id")).thenReturn(anotherAppId);
  when(environment.getProperty(ConfigConsts.APOLLO_CLUSTER_KEY)).thenReturn(anotherCluster);
  when(environment.getProperty("apollo.cacheDir")).thenReturn(anotherCacheDir);
  when(environment.getProperty(ConfigConsts.APOLLO_META_KEY)).thenReturn(anotherApolloMeta);
  apolloApplicationContextInitializer.initializeSystemProperty(environment);
  assertEquals(someAppId,System.getProperty("app.id"));
  assertEquals(someCluster,System.getProperty(ConfigConsts.APOLLO_CLUSTER_KEY));
  assertEquals(someCacheDir,System.getProperty("apollo.cacheDir"));
  assertEquals(someApolloMeta,System.getProperty(ConfigConsts.APOLLO_META_KEY));
}
