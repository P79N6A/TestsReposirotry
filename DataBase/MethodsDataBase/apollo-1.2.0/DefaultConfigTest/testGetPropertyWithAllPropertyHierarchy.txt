@Test public void testGetPropertyWithAllPropertyHierarchy() throws Exception {
  String someKey="someKey";
  String someSystemPropertyValue="system-property-value";
  String anotherKey="anotherKey";
  String someLocalFileValue="local-file-value";
  String lastKey="lastKey";
  String someResourceValue="resource-value";
  System.setProperty(someKey,someSystemPropertyValue);
  someProperties=new Properties();
  someProperties.setProperty(someKey,someLocalFileValue);
  someProperties.setProperty(anotherKey,someLocalFileValue);
  when(configRepository.getConfig()).thenReturn(someProperties);
  someSourceType=ConfigSourceType.LOCAL;
  when(configRepository.getSourceType()).thenReturn(someSourceType);
  File resourceFile=new File(someResourceDir,someNamespace + ".properties");
  Files.write(someKey + "=" + someResourceValue,resourceFile,Charsets.UTF_8);
  Files.append(System.getProperty("line.separator"),resourceFile,Charsets.UTF_8);
  Files.append(anotherKey + "=" + someResourceValue,resourceFile,Charsets.UTF_8);
  Files.append(System.getProperty("line.separator"),resourceFile,Charsets.UTF_8);
  Files.append(lastKey + "=" + someResourceValue,resourceFile,Charsets.UTF_8);
  DefaultConfig defaultConfig=new DefaultConfig(someNamespace,configRepository);
  String someKeyValue=defaultConfig.getProperty(someKey,null);
  String anotherKeyValue=defaultConfig.getProperty(anotherKey,null);
  String lastKeyValue=defaultConfig.getProperty(lastKey,null);
  System.clearProperty(someKey);
  assertEquals(someSystemPropertyValue,someKeyValue);
  assertEquals(someLocalFileValue,anotherKeyValue);
  assertEquals(someResourceValue,lastKeyValue);
  assertEquals(someSourceType,defaultConfig.getSourceType());
}
