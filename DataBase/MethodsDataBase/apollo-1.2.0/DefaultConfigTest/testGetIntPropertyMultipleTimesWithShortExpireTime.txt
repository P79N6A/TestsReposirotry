@Test public void testGetIntPropertyMultipleTimesWithShortExpireTime() throws Exception {
  String someKey="someKey";
  Integer someValue=2;
  Integer someDefaultValue=-1;
  MockInjector.setInstance(ConfigUtil.class,new MockConfigUtilWithShortExpireTime());
  someProperties=mock(Properties.class);
  when(someProperties.getProperty(someKey)).thenReturn(String.valueOf(someValue));
  when(configRepository.getConfig()).thenReturn(someProperties);
  DefaultConfig defaultConfig=new DefaultConfig(someNamespace,configRepository);
  assertEquals(someValue,defaultConfig.getIntProperty(someKey,someDefaultValue));
  assertEquals(someValue,defaultConfig.getIntProperty(someKey,someDefaultValue));
  verify(someProperties,times(1)).getProperty(someKey);
  TimeUnit.MILLISECONDS.sleep(50);
  assertEquals(someValue,defaultConfig.getIntProperty(someKey,someDefaultValue));
  assertEquals(someValue,defaultConfig.getIntProperty(someKey,someDefaultValue));
  verify(someProperties,times(2)).getProperty(someKey);
}
