@Test public void testGetArrayPropertyMultipleTimesWithCacheAndValueChanges() throws Exception {
  String someKey="someKey";
  String someDelimiter=",";
  String[] values=new String[]{"a","b","c"};
  String[] anotherValues=new String[]{"b","c","d"};
  String someValue=Joiner.on(someDelimiter).join(values);
  String anotherValue=Joiner.on(someDelimiter).join(anotherValues);
  String[] someDefaultValue=new String[]{"1","2"};
  someProperties=new Properties();
  someProperties.setProperty(someKey,someValue);
  when(configRepository.getConfig()).thenReturn(someProperties);
  Properties anotherProperties=new Properties();
  anotherProperties.setProperty(someKey,anotherValue);
  DefaultConfig defaultConfig=new DefaultConfig(someNamespace,configRepository);
  assertArrayEquals(values,defaultConfig.getArrayProperty(someKey,someDelimiter,someDefaultValue));
  defaultConfig.onRepositoryChange(someNamespace,anotherProperties);
  assertArrayEquals(anotherValues,defaultConfig.getArrayProperty(someKey,someDelimiter,someDefaultValue));
}
