@Test public void testGetPropertyWithFunction() throws Exception {
  String someKey="someKey";
  String someValue="a,b,c";
  String someNullKey="someNullKey";
  someProperties=new Properties();
  someProperties.setProperty(someKey,someValue);
  when(configRepository.getConfig()).thenReturn(someProperties);
  DefaultConfig defaultConfig=new DefaultConfig(someNamespace,configRepository);
  assertEquals(defaultConfig.getProperty(someKey,new Function<String,List<String>>(){
    @Override public List<String> apply(    String s){
      return Splitter.on(",").trimResults().omitEmptyStrings().splitToList(s);
    }
  }
,Lists.<String>newArrayList()),Lists.newArrayList("a","b","c"));
  assertEquals(defaultConfig.getProperty(someNullKey,new Function<String,List<String>>(){
    @Override public List<String> apply(    String s){
      return Splitter.on(",").trimResults().omitEmptyStrings().splitToList(s);
    }
  }
,Lists.<String>newArrayList()),Lists.newArrayList());
}
