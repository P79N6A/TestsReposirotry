@Test public void testGetArrayPropertyMultipleTimesWithCache() throws Exception {
  String someKey="someKey";
  String someDelimiter=",";
  String someInvalidDelimiter="{";
  String[] values=new String[]{"a","b","c"};
  String someValue=Joiner.on(someDelimiter).join(values);
  String[] someDefaultValue=new String[]{"1","2"};
  someProperties=mock(Properties.class);
  when(someProperties.getProperty(someKey)).thenReturn(someValue);
  when(configRepository.getConfig()).thenReturn(someProperties);
  DefaultConfig defaultConfig=new DefaultConfig(someNamespace,configRepository);
  assertArrayEquals(values,defaultConfig.getArrayProperty(someKey,someDelimiter,someDefaultValue));
  assertArrayEquals(values,defaultConfig.getArrayProperty(someKey,someDelimiter,someDefaultValue));
  verify(someProperties,times(1)).getProperty(someKey);
  assertArrayEquals(someDefaultValue,defaultConfig.getArrayProperty(someKey,someInvalidDelimiter,someDefaultValue));
  assertArrayEquals(someDefaultValue,defaultConfig.getArrayProperty(someKey,someInvalidDelimiter,someDefaultValue));
  verify(someProperties,times(3)).getProperty(someKey);
}
