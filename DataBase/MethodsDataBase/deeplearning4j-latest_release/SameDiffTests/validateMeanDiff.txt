@Test public void validateMeanDiff(){
  Nd4j.getRandom().setSeed(12345);
  INDArray arr=Nd4j.rand(3,4);
  SameDiff sd=SameDiff.create();
  SDVariable v=sd.var("in",arr);
  SDVariable mean=sd.mean("mean",v);
  INDArray out=sd.execAndEndResult();
  assertEquals(out,arr.mean(Integer.MAX_VALUE));
  sd.execBackwards();
  INDArray dLdIn=sd.grad("in").getArr();
  assertEquals(Nd4j.valueArrayOf(arr.shape(),1.0 / arr.length()),dLdIn);
}
