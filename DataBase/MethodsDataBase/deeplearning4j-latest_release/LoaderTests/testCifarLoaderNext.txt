@Test public void testCifarLoaderNext() throws Exception {
  boolean train=true;
  boolean preProcessCifar=false;
  int numExamples=10;
  int row=28;
  int col=28;
  int channels=1;
  CifarLoader loader=new CifarLoader(row,col,channels,train,preProcessCifar);
  DataSet data=loader.next(numExamples);
  assertEquals(numExamples,data.getLabels().size(0));
  assertEquals(channels,data.getFeatures().size(1));
  train=true;
  preProcessCifar=true;
  row=32;
  col=32;
  channels=3;
  loader=new CifarLoader(row,col,channels,train,preProcessCifar);
  data=loader.next(1);
  assertEquals(1,data.getFeatures().size(0));
  assertEquals(channels * row * col,data.getFeatures().ravel().length());
  train=false;
  preProcessCifar=false;
  loader=new CifarLoader(row,col,channels,train,preProcessCifar);
  data=loader.next(numExamples);
  assertEquals(row,data.getFeatures().size(2));
  train=false;
  preProcessCifar=true;
  loader=new CifarLoader(row,col,channels,train,preProcessCifar);
  data=loader.next(numExamples);
  assertEquals(numExamples,data.getLabels().size(0));
  assertEquals(col,data.getFeatures().size(3));
}
