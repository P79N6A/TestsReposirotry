@Test public void testNestedWorkspaces10() throws Exception {
  for (int x=1; x < 10; x++) {
    try (MemoryWorkspace ws1=Nd4j.getWorkspaceManager().getAndActivateWorkspace(basicConfiguration,"WS_1")){
      INDArray array1=Nd4j.create(100 * x);
      try (MemoryWorkspace ws2=Nd4j.getWorkspaceManager().getAndActivateWorkspace(basicConfiguration,"WS_1")){
        INDArray array2=Nd4j.create(100 * x);
        try (MemoryWorkspace ws3=Nd4j.getWorkspaceManager().getWorkspaceForCurrentThread(basicConfiguration,"WS_1").notifyScopeBorrowed()){
          INDArray array3=Nd4j.create(100 * x);
        }
       }
     }
   }
}
