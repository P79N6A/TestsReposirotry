@Test public void testUnboundedLoop1() throws Exception {
  WorkspaceConfiguration configuration=WorkspaceConfiguration.builder().initialSize(100 * 100 * Nd4j.sizeOfDataType()).policyReset(ResetPolicy.ENDOFBUFFER_REACHED).policyAllocation(AllocationPolicy.STRICT).build();
  for (int x=0; x < 100; x++) {
    try (Nd4jWorkspace ws1=(Nd4jWorkspace)Nd4j.getWorkspaceManager().getWorkspaceForCurrentThread(configuration,"ITER").notifyScopeEntered()){
      INDArray array=Nd4j.create(100);
    }
     Nd4jWorkspace ws1=(Nd4jWorkspace)Nd4j.getWorkspaceManager().getWorkspaceForCurrentThread(configuration,"ITER");
    assertEquals((x + 1) * 100 * Nd4j.sizeOfDataType(),ws1.getHostOffset());
  }
  Nd4jWorkspace ws1=(Nd4jWorkspace)Nd4j.getWorkspaceManager().getWorkspaceForCurrentThread(configuration,"ITER");
  assertEquals(100 * 100 * Nd4j.sizeOfDataType(),ws1.getHostOffset());
  ws1.notifyScopeEntered();
  ws1.notifyScopeLeft();
  assertNull(Nd4j.getMemoryManager().getCurrentWorkspace());
}
