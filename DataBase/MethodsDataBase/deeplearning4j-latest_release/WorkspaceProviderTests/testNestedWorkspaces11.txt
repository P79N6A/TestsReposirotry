@Test public void testNestedWorkspaces11() throws Exception {
  for (int x=1; x < 10; x++) {
    try (MemoryWorkspace ws1=Nd4j.getWorkspaceManager().getAndActivateWorkspace(basicConfiguration,"WS_1")){
      INDArray array1=Nd4j.create(100 * x);
      for (int i=1; i < 10; i++) {
        try (MemoryWorkspace ws2=Nd4j.getWorkspaceManager().getAndActivateWorkspace(basicConfiguration,"WS_1")){
          INDArray array2=Nd4j.create(100 * x);
          for (int e=1; e < 10; e++) {
            try (MemoryWorkspace ws3=Nd4j.getWorkspaceManager().getWorkspaceForCurrentThread(basicConfiguration,"WS_1").notifyScopeBorrowed()){
              INDArray array3=Nd4j.create(100 * x);
            }
           }
        }
       }
    }
   }
}
