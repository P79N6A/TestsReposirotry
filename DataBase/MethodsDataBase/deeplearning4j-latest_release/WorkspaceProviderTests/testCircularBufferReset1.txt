@Test public void testCircularBufferReset1() throws Exception {
  Nd4jWorkspace workspace=(Nd4jWorkspace)Nd4j.getWorkspaceManager().getWorkspaceForCurrentThread(circularConfiguration,"WSR_1");
  try (MemoryWorkspace ws=Nd4j.getWorkspaceManager().getAndActivateWorkspace("WSR_1")){
    Nd4j.create(10000);
    assertEquals(0,workspace.getCurrentSize());
    assertEquals(1,workspace.getNumberOfExternalAllocations());
  }
   assertEquals(10 * 1024L * 1024L,workspace.getCurrentSize());
  assertEquals(0,workspace.getHostOffset());
  assertEquals(1,workspace.getNumberOfExternalAllocations());
  for (int i=0; i < 11 * 1024 * 1024; i+=10000 * Nd4j.sizeOfDataType()) {
    try (MemoryWorkspace ws=Nd4j.getWorkspaceManager().getAndActivateWorkspace("WSR_1")){
      Nd4j.create(10000);
    }
   }
  assertEquals(0,workspace.getNumberOfExternalAllocations());
}
