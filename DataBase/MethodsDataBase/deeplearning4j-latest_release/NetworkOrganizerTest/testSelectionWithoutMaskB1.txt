/** 
 * In this test we'll check shards selection in "casual" AWS setup By default AWS box has only one IP from 172.16.0.0/12 space + local loopback IP, which isn't exposed
 * @throws Exception
 */
@Test public void testSelectionWithoutMaskB1() throws Exception {
  List<NetworkInformation> collection=new ArrayList<>();
  for (int i=0; i < 512; i++) {
    NetworkInformation information=new NetworkInformation();
    information.addIpAddress(getRandomAwsIp());
    collection.add(information);
  }
  NetworkOrganizer organizer=new NetworkOrganizer(collection);
  List<String> shards=organizer.getSubset(10);
  assertEquals(10,shards.size());
  List<String> backup=organizer.getSubset(10,shards);
  assertEquals(10,backup.size());
  for (  String ip : backup) {
    assertNotEquals(null,ip);
    assertTrue(ip.startsWith("172."));
    assertFalse(shards.contains(ip));
  }
}
