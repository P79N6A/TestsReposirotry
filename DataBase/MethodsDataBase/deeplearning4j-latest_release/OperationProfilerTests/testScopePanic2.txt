@Test(expected=ND4JIllegalStateException.class) public void testScopePanic2() throws Exception {
  Nd4j.getExecutioner().setProfilingMode(OpExecutioner.ProfilingMode.SCOPE_PANIC);
  INDArray array;
  try (MemoryWorkspace workspace=Nd4j.getWorkspaceManager().getAndActivateWorkspace("WS120")){
    array=Nd4j.create(10);
    assertTrue(array.isAttached());
    assertEquals(1,workspace.getGenerationId());
  }
   try (MemoryWorkspace workspace=Nd4j.getWorkspaceManager().getAndActivateWorkspace("WS120")){
    assertEquals(2,workspace.getGenerationId());
    array.add(1.0);
    assertTrue(array.isAttached());
  }
 }
