@Test public void testAllocation5() throws Exception {
  Nd4jWorkspace workspace=(Nd4jWorkspace)Nd4j.getWorkspaceManager().getAndActivateWorkspace(basicConfig,"testAllocation5");
  Nd4j.getMemoryManager().setCurrentWorkspace(workspace);
  assertNotEquals(null,Nd4j.getMemoryManager().getCurrentWorkspace());
  assertEquals(0,workspace.getHostOffset());
  INDArray array=Nd4j.create(new int[]{1,5},'c');
  long reqMemory=5 * Nd4j.sizeOfDataType();
  assertEquals(reqMemory + reqMemory % 8,workspace.getHostOffset());
  array.assign(1.0f);
  INDArray dup=array.dup();
  assertEquals((reqMemory + reqMemory % 8) * 2,workspace.getHostOffset());
  assertEquals(5,dup.sumNumber().doubleValue(),0.01);
  workspace.close();
}
