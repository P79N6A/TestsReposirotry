@Test public void testDetach1() throws Exception {
  INDArray array=null;
  INDArray copy=null;
  try (Nd4jWorkspace wsI=(Nd4jWorkspace)Nd4j.getWorkspaceManager().getAndActivateWorkspace(basicConfig,"ITER")){
    array=Nd4j.create(new float[]{1f,2f,3f,4f,5f});
    assertTrue(array.isInScope());
    assertTrue(array.isAttached());
    long reqMemory=5 * Nd4j.sizeOfDataType();
    assertEquals(reqMemory + reqMemory % 8,wsI.getHostOffset());
    copy=array.detach();
    assertTrue(array.isInScope());
    assertTrue(array.isAttached());
    assertEquals(reqMemory + reqMemory % 8,wsI.getHostOffset());
    assertFalse(copy.isAttached());
    assertTrue(copy.isInScope());
    assertEquals(reqMemory + reqMemory % 8,wsI.getHostOffset());
  }
   assertEquals(15.0f,copy.sumNumber().floatValue(),0.01f);
  assertFalse(array == copy);
}
