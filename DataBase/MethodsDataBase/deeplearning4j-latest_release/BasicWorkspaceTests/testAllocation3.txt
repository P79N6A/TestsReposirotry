@Test public void testAllocation3() throws Exception {
  Nd4jWorkspace workspace=(Nd4jWorkspace)Nd4j.getWorkspaceManager().getAndActivateWorkspace(basicConfig,"testAllocation2");
  Nd4j.getMemoryManager().setCurrentWorkspace(workspace);
  assertNotEquals(null,Nd4j.getMemoryManager().getCurrentWorkspace());
  assertEquals(0,workspace.getHostOffset());
  INDArray array=Nd4j.create(new int[]{1,5},'c');
  long reqMem=5 * Nd4j.sizeOfDataType();
  assertEquals(reqMem + reqMem % 8,workspace.getHostOffset());
  array.assign(1.0f);
  assertEquals(5,array.sumNumber().doubleValue(),0.01);
  workspace.close();
}
