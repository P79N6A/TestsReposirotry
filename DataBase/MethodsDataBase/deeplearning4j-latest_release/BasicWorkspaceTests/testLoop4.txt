@Test public void testLoop4() throws Exception {
  Nd4jWorkspace workspace=(Nd4jWorkspace)Nd4j.getWorkspaceManager().createNewWorkspace(loopFirstConfig);
  Nd4j.getMemoryManager().setCurrentWorkspace(workspace);
  assertNotEquals(null,Nd4j.getMemoryManager().getCurrentWorkspace());
  assertEquals(0,workspace.getHostOffset());
  try (MemoryWorkspace cW=workspace.notifyScopeEntered()){
    INDArray array1=Nd4j.create(100);
    INDArray array2=Nd4j.create(100);
  }
   assertEquals(0,workspace.getHostOffset());
  assertEquals(200 * Nd4j.sizeOfDataType(),workspace.getCurrentSize());
  try (MemoryWorkspace cW=workspace.notifyScopeEntered()){
    INDArray array1=Nd4j.create(100);
    assertEquals(100 * Nd4j.sizeOfDataType(),workspace.getHostOffset());
  }
   assertEquals(0,workspace.getHostOffset());
}
