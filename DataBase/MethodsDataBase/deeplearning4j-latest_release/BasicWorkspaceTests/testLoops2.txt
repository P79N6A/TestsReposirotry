@Test public void testLoops2() throws Exception {
  Nd4jWorkspace workspace=(Nd4jWorkspace)Nd4j.getWorkspaceManager().createNewWorkspace(loopOverTimeConfig);
  Nd4j.getMemoryManager().setCurrentWorkspace(workspace);
  assertNotEquals(null,Nd4j.getMemoryManager().getCurrentWorkspace());
  assertEquals(0,workspace.getHostOffset());
  for (int x=1; x <= 100; x++) {
    workspace.notifyScopeEntered();
    INDArray arrayCold=Nd4j.create(x);
    assertEquals(0,workspace.getHostOffset());
    assertEquals(0,workspace.getCurrentSize());
    workspace.notifyScopeLeft();
  }
  workspace.initializeWorkspace();
  long reqMem=100 * Nd4j.sizeOfDataType();
  assertEquals(0,workspace.getHostOffset());
  workspace.notifyScopeEntered();
  INDArray arrayHot=Nd4j.create(10);
  reqMem=10 * Nd4j.sizeOfDataType();
  assertEquals(reqMem + reqMem % 8,workspace.getHostOffset());
  workspace.notifyScopeLeft();
}
