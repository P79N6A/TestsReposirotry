@Test public void testModelGuesserDl4jModelInputStream() throws Exception {
  MultiLayerNetwork net=getNetwork();
  File tempFile=testDir.newFile("testModelGuesserDl4jModelInputStream.bin");
  ModelSerializer.writeModel(net,tempFile,true);
  try (InputStream inputStream=new FileInputStream(tempFile)){
    MultiLayerNetwork network=(MultiLayerNetwork)ModelGuesser.loadModelGuess(inputStream);
    assumeNotNull(network);
    assertEquals(network.getLayerWiseConfigurations().toJson(),net.getLayerWiseConfigurations().toJson());
    assertEquals(net.params(),network.params());
    assertEquals(net.getUpdater().getStateViewArray(),network.getUpdater().getStateViewArray());
  }
 }
