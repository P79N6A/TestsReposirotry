@Test public void testFlipImageTransform() throws Exception {
  ImageWritable writable=makeRandomImage(0,0,3);
  Frame frame=writable.getFrame();
  ImageTransform transform=new FlipImageTransform(rng);
  for (int i=0; i < 100; i++) {
    ImageWritable w=transform.transform(writable);
    Frame f=w.getFrame();
    assertEquals(f.imageHeight,frame.imageHeight);
    assertEquals(f.imageWidth,frame.imageWidth);
    assertEquals(f.imageChannels,frame.imageChannels);
  }
  assertEquals(null,transform.transform(null));
  transform=new FlipImageTransform(-2);
  writable=transform.transform(writable);
  float[] transformed=transform.query(new float[]{10,20});
  assertEquals(10,transformed[0],0);
  assertEquals(20,transformed[1],0);
  transform=new FlipImageTransform(0);
  writable=transform.transform(writable);
  transformed=transform.query(new float[]{30,40});
  assertEquals(30,transformed[0],0);
  assertEquals(frame.imageHeight - 40 - 1,transformed[1],0);
  transform=new FlipImageTransform(1);
  writable=transform.transform(writable);
  transformed=transform.query(new float[]{50,60});
  assertEquals(frame.imageWidth - 50 - 1,transformed[0],0);
  assertEquals(60,transformed[1],0);
  transform=new FlipImageTransform(-1);
  writable=transform.transform(writable);
  transformed=transform.query(new float[]{70,80});
  assertEquals(frame.imageWidth - 70 - 1,transformed[0],0);
  assertEquals(frame.imageHeight - 80 - 1,transformed[1],0);
}
