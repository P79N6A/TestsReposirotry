@Test public void testWarpImageTransform() throws Exception {
  ImageWritable writable=makeRandomImage(0,0,1);
  Frame frame=writable.getFrame();
  ImageTransform transform=new WarpImageTransform(rng,frame.imageWidth / 10).interMode(INTER_CUBIC).borderMode(BORDER_REPLICATE);
  for (int i=0; i < 100; i++) {
    ImageWritable w=transform.transform(writable);
    Frame f=w.getFrame();
    assertEquals(f.imageHeight,frame.imageHeight);
    assertEquals(f.imageWidth,frame.imageWidth);
    assertEquals(f.imageChannels,frame.imageChannels);
  }
  assertEquals(null,transform.transform(null));
  transform=new WarpImageTransform(1,2,3,4,5,6,7,8);
  writable=transform.transform(writable);
  float[] coordinates={0,0,frame.imageWidth,0,frame.imageWidth,frame.imageHeight,0,frame.imageHeight};
  float[] transformed=transform.query(coordinates);
  assertEquals(1,transformed[0],0);
  assertEquals(2,transformed[1],0);
  assertEquals(3 + frame.imageWidth,transformed[2],0);
  assertEquals(4,transformed[3],0);
  assertEquals(5 + frame.imageWidth,transformed[4],0);
  assertEquals(6 + frame.imageHeight,transformed[5],0);
  assertEquals(7,transformed[6],0);
  assertEquals(8 + frame.imageHeight,transformed[7],0);
}
