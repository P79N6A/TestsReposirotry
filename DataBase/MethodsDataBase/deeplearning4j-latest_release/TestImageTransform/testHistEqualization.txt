@Test public void testHistEqualization() throws CanvasFrame.Exception {
  if (GraphicsEnvironment.isHeadless()) {
    return;
  }
  ImageWritable writable=makeRandomImage(32,32,3);
  Frame frame=writable.getFrame();
  ImageTransform showOrig=new ShowImageTransform("Original Image",50);
  showOrig.transform(writable);
  ImageTransform transform=new EqualizeHistTransform(new Random(42),COLOR_BGR2YCrCb);
  ImageWritable w=transform.transform(writable);
  ImageTransform showTrans=new ShowImageTransform("LUV Image",50);
  showTrans.transform(writable);
  Frame newframe=w.getFrame();
  assertNotEquals(frame,newframe);
  assertEquals(null,transform.transform(null));
  float[] transformed=transform.query(new float[]{66,77});
  assertEquals(66,transformed[0],0);
  assertEquals(77,transformed[1],0);
}
