/** 
 * This test code is kind of a manual test using specific image(largestblobtest.jpg) with particular thresholds(blur size, thresholds for edge detector) The cropped largest blob size should be 74x61 because we use a specific image and thresholds
 * @throws Exception
 */
@Test public void testLargestBlobCropTransform() throws Exception {
  if (GraphicsEnvironment.isHeadless()) {
    return;
  }
  java.io.File f1=new ClassPathResource("datavec-data-image/testimages2/largestblobtest.jpg").getFile();
  NativeImageLoader loader=new NativeImageLoader();
  ImageWritable writable=loader.asWritable(f1);
  ImageTransform showOrig=new ShowImageTransform("Original Image",50);
  showOrig.transform(writable);
  ImageTransform transform=new LargestBlobCropTransform(null,CV_RETR_CCOMP,CV_CHAIN_APPROX_SIMPLE,3,3,100,300,true);
  ImageWritable w=transform.transform(writable);
  ImageTransform showTrans=new ShowImageTransform("Largest Blob",50);
  showTrans.transform(w);
  Frame newFrame=w.getFrame();
  assertEquals(newFrame.imageHeight,74);
  assertEquals(newFrame.imageWidth,61);
  float[] transformed=transform.query(new float[]{88,32});
  assertEquals(0,transformed[0],0);
  assertEquals(0,transformed[1],0);
}
