@Test public void testPretrainFitMethods(){
  MultiLayerConfiguration conf=new NeuralNetConfiguration.Builder().list().layer(new VariationalAutoencoder.Builder().nIn(10).nOut(10).encoderLayerSizes(10).decoderLayerSizes(10).build()).layer(new OutputLayer.Builder().nIn(10).nOut(10).activation(Activation.SOFTMAX).build()).pretrain(true).build();
  MultiLayerNetwork net=new MultiLayerNetwork(conf);
  net.init();
  Set<Class<?>> exp=new HashSet<>();
  exp.add(MultiLayerNetwork.class);
  CheckModelsListener listener=new CheckModelsListener();
  net.setListeners(listener);
  INDArray f=Nd4j.create(1,10);
  INDArray l=Nd4j.create(1,10);
  DataSet ds=new DataSet(f,l);
  MultiDataSet mds=new org.nd4j.linalg.dataset.MultiDataSet(f,l);
  DataSetIterator iter=new ExistingDataSetIterator(Collections.singletonList(ds));
  net.fit(iter);
  assertEquals(exp,listener.getModelClasses());
  net.fit(ds);
  assertEquals(exp,listener.getModelClasses());
  net.fit(f,l);
  assertEquals(exp,listener.getModelClasses());
  net.fit(f,l,null,null);
  assertEquals(exp,listener.getModelClasses());
  net.fit(mds);
  assertEquals(exp,listener.getModelClasses());
  net.fit(new SingletonMultiDataSetIterator(mds));
  assertEquals(exp,listener.getModelClasses());
}
