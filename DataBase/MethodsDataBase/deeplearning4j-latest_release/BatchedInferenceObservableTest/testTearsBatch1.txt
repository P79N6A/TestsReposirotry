@Test public void testTearsBatch1() throws Exception {
  BatchedInferenceObservable observable=new BatchedInferenceObservable();
  INDArray output0=Nd4j.create(32,10);
  INDArray output1=Nd4j.create(32,15);
  for (int i=0; i < 32; i++) {
    INDArray t0=output0.tensorAlongDimension(i,1).assign(i);
    INDArray t1=output1.tensorAlongDimension(i,1).assign(i);
    observable.addInput(new INDArray[]{t0,t1},null);
  }
  Field f=BatchedInferenceObservable.class.getDeclaredField("outputBatchInputArrays");
  f.setAccessible(true);
  List<int[]> l=new ArrayList<>();
  l.add(new int[]{0,31});
  f.set(observable,l);
  observable.setCounter(32);
  observable.setOutputBatches(Collections.singletonList(new INDArray[]{output0,output1}));
  List<INDArray[]> outputs=observable.getOutputs();
  for (int i=0; i < 32; i++) {
    assertEquals(2,outputs.get(i).length);
    assertEquals((float)i,outputs.get(i)[0].meanNumber().floatValue(),0.001f);
    assertEquals((float)i,outputs.get(i)[1].meanNumber().floatValue(),0.001f);
  }
}
