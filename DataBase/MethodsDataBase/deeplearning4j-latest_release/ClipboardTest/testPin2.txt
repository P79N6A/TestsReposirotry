@Test public void testPin2() throws Exception {
  Clipboard clipboard=new Clipboard();
  Random rng=new Random(12345L);
  Long validId=123L;
  short shardIdx=0;
  for (int i=0; i < 300; i++) {
    VectorAggregation aggregation=new VectorAggregation(rng.nextLong(),(short)100,(short)1,Nd4j.create(5));
    if (i % 2 == 0 && shardIdx < 100) {
      aggregation.setTaskId(validId);
      aggregation.setShardIndex(shardIdx++);
    }
    clipboard.pin(aggregation);
  }
  VoidAggregation aggregation=clipboard.getStackFromClipboard(0L,validId);
  assertNotEquals(null,aggregation);
  assertEquals(0,aggregation.getMissingChunks());
  assertEquals(true,clipboard.hasCandidates());
  assertEquals(1,clipboard.getNumberOfCompleteStacks());
}
