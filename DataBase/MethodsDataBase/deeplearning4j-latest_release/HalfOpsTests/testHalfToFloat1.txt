@Test public void testHalfToFloat1() throws Exception {
  File tempFile=File.createTempFile("dsadasd","dsdfasd");
  tempFile.deleteOnExit();
  INDArray array=Nd4j.linspace(1,100,100);
  DataOutputStream stream=new DataOutputStream(new FileOutputStream(tempFile));
  Nd4j.write(array,stream);
  DataInputStream dis=new DataInputStream(new FileInputStream(tempFile));
  INDArray restoredFP16=Nd4j.read(dis);
  DataTypeUtil.setDTypeForContext(DataBuffer.Type.FLOAT);
  assertEquals(DataBuffer.Type.FLOAT,Nd4j.dataType());
  log.error("--------------------");
  dis=new DataInputStream(new FileInputStream(tempFile));
  INDArray expFP32=Nd4j.linspace(1,100,100);
  INDArray restoredFP32=Nd4j.read(dis);
  CudaContext context=(CudaContext)AtomicAllocator.getInstance().getDeviceContext().getContext();
  assertTrue(AtomicAllocator.getInstance().getPointer(expFP32,context) instanceof FloatPointer);
  assertTrue(AtomicAllocator.getInstance().getPointer(restoredFP32,context) instanceof FloatPointer);
  assertEquals(DataBuffer.Type.FLOAT,expFP32.data().dataType());
  assertEquals(DataBuffer.Type.FLOAT,restoredFP32.data().dataType());
  assertEquals(expFP32,restoredFP32);
  DataTypeUtil.setDTypeForContext(DataBuffer.Type.HALF);
}
