@Test public void testMessageSplit_1() throws Exception {
  val array=Nd4j.linspace(1,100000,100000).reshape(-1,1000);
  val splitter=new MessageSplitter();
  val message=new GradientsUpdateMessage("123",array);
  val messages=splitter.split(message,16384);
  assertNotNull(messages);
  assertFalse(messages.isEmpty());
  log.info("Number of messages: {}",messages.size());
  for (  val m : messages)   assertEquals("123",m.getOriginalId());
  Optional<GradientsUpdateMessage> dec=null;
  for (  val m : messages)   dec=splitter.merge(m);
  assertNotNull(dec);
  assertTrue(dec.isPresent());
}
