@Test public void testListenersViaModel(){
  TestListener.clearCounts();
  MultiLayerConfiguration.Builder builder=new NeuralNetConfiguration.Builder().list().layer(0,new OutputLayer.Builder(LossFunctions.LossFunction.MSE).nIn(10).nOut(10).activation(Activation.TANH).build());
  MultiLayerConfiguration conf=builder.build();
  MultiLayerNetwork model=new MultiLayerNetwork(conf);
  model.init();
  StatsStorage ss=new InMemoryStatsStorage();
  model.setListeners(new TestListener(),new StatsListener(ss));
  testListenersForModel(model,null);
  assertEquals(1,ss.listSessionIDs().size());
  assertEquals(2,ss.listWorkerIDsForSession(ss.listSessionIDs().get(0)).size());
}
