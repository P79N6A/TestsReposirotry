@Test public void testListenersViaModelGraph(){
  TestListener.clearCounts();
  ComputationGraphConfiguration conf=new NeuralNetConfiguration.Builder().graphBuilder().addInputs("in").addLayer("0",new OutputLayer.Builder(LossFunctions.LossFunction.MSE).nIn(10).nOut(10).activation(Activation.TANH).build(),"in").setOutputs("0").build();
  ComputationGraph model=new ComputationGraph(conf);
  model.init();
  StatsStorage ss=new InMemoryStatsStorage();
  model.setListeners(new TestListener(),new StatsListener(ss));
  testListenersForModel(model,null);
  assertEquals(1,ss.listSessionIDs().size());
  assertEquals(2,ss.listWorkerIDsForSession(ss.listSessionIDs().get(0)).size());
}
