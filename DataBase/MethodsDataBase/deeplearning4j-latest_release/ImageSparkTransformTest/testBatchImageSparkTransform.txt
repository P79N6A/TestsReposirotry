@Test public void testBatchImageSparkTransform() throws Exception {
  int seed=12345;
  File f0=new ClassPathResource("datavec-spark-inference/testimages/class1/A.jpg").getFile();
  File f1=new ClassPathResource("datavec-spark-inference/testimages/class1/B.png").getFile();
  File f2=new ClassPathResource("datavec-spark-inference/testimages/class1/C.jpg").getFile();
  BatchImageRecord batch=new BatchImageRecord();
  batch.add(f0.toURI());
  batch.add(f1.toURI());
  batch.add(f2.toURI());
  ImageTransformProcess imgTransformProcess=new ImageTransformProcess.Builder().seed(seed).scaleImageTransform(10).cropImageTransform(5).build();
  ImageSparkTransform imgSparkTransform=new ImageSparkTransform(imgTransformProcess);
  Base64NDArrayBody body=imgSparkTransform.toArray(batch);
  INDArray fromBase64=Nd4jBase64.fromBase64(body.getNdarray());
  System.out.println("Base 64ed array " + fromBase64);
  assertEquals(3,fromBase64.size(0));
}
