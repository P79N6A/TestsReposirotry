@Test public void testSerialization() throws Exception {
  Nd4j.getRandom().setSeed(12345);
  INDArray arr=Nd4j.rand(1,20);
  String temp=System.getProperty("java.io.tmpdir");
  String outPath=FilenameUtils.concat(temp,"dl4jtestserialization.bin");
  try (DataOutputStream dos=new DataOutputStream(Files.newOutputStream(Paths.get(outPath)))){
    Nd4j.write(arr,dos);
  }
   INDArray in;
  try (DataInputStream dis=new DataInputStream(new FileInputStream(outPath))){
    in=Nd4j.read(dis);
  }
   INDArray inDup=in.dup();
  System.out.println(in);
  System.out.println(inDup);
  assertEquals(arr,in);
  assertEquals(in,inDup);
}
