@Test public void testBasicSerde1() throws Exception {
  DataBuffer dataBuffer=Nd4j.createBuffer(new int[]{1,2,3,4,5});
  DataBuffer shapeBuffer=Nd4j.getShapeInfoProvider().createShapeInformation(new int[]{1,5}).getFirst();
  INDArray intArray=Nd4j.createArrayFromShapeBuffer(dataBuffer,shapeBuffer);
  File tempFile=File.createTempFile("test","test");
  tempFile.deleteOnExit();
  Nd4j.saveBinary(intArray,tempFile);
  InputStream stream=new FileInputStream(tempFile);
  BufferedInputStream bis=new BufferedInputStream(stream);
  DataInputStream dis=new DataInputStream(bis);
  INDArray loaded=Nd4j.read(dis);
  assertEquals(DataBuffer.Type.INT,loaded.data().dataType());
  assertEquals(DataBuffer.Type.LONG,loaded.shapeInfoDataBuffer().dataType());
  assertEquals(intArray.data().length(),loaded.data().length());
  assertArrayEquals(intArray.data().asInt(),loaded.data().asInt());
}
