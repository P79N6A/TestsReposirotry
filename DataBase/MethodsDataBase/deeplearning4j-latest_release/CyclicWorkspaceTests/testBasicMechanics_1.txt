@Test public void testBasicMechanics_1() throws Exception {
  val fShape=new long[]{128,784};
  val lShape=new long[]{128,10};
  val prefetchSize=24;
  val configuration=WorkspaceConfiguration.builder().minSize(10 * 1024L * 1024L).overallocationLimit(prefetchSize + 1).policyReset(ResetPolicy.ENDOFBUFFER_REACHED).policyLearning(LearningPolicy.FIRST_LOOP).policyAllocation(AllocationPolicy.OVERALLOCATE).policySpill(SpillPolicy.REALLOCATE).build();
  for (int e=0; e < 100; e++) {
    try (val ws=Nd4j.getWorkspaceManager().getAndActivateWorkspace(configuration,"randomNameHere" + 119)){
      val fArray=Nd4j.create(fShape).assign(e);
      val lArray=Nd4j.create(lShape).assign(e);
      log.info("Current offset: {}; Current size: {};",ws.getCurrentOffset(),ws.getCurrentSize());
    }
   }
}
