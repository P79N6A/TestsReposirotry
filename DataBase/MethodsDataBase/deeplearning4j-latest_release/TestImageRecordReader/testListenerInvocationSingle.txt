@Test public void testListenerInvocationSingle() throws IOException {
  ParentPathLabelGenerator labelMaker=new ParentPathLabelGenerator();
  ImageRecordReader rr=new ImageRecordReader(32,32,3,labelMaker);
  File parent=testDir.newFolder();
  new ClassPathResource("datavec-data-image/testimages/class0/").copyDirectory(parent);
  int numFiles=parent.list().length;
  rr.initialize(new FileSplit(parent));
  CountingListener counting=new CountingListener(new LogRecordListener());
  rr.setListeners(counting);
  while (rr.hasNext()) {
    rr.next();
  }
  assertEquals(numFiles,counting.getCount());
}
