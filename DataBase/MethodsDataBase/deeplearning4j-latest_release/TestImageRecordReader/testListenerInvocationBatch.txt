@Test public void testListenerInvocationBatch() throws IOException {
  ParentPathLabelGenerator labelMaker=new ParentPathLabelGenerator();
  ImageRecordReader rr=new ImageRecordReader(32,32,3,labelMaker);
  File f=testDir.newFolder();
  new ClassPathResource("datavec-data-image/testimages/").copyDirectory(f);
  File parent=f;
  int numFiles=6;
  rr.initialize(new FileSplit(parent));
  CountingListener counting=new CountingListener(new LogRecordListener());
  rr.setListeners(counting);
  rr.next(numFiles + 1);
  assertEquals(numFiles,counting.getCount());
}
