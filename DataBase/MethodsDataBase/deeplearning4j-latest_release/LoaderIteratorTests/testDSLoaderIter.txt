@Test public void testDSLoaderIter(){
  for (  boolean r : new boolean[]{false,true}) {
    List<String> l=Arrays.asList("3","0","1");
    Random rng=r ? new Random(12345) : null;
    DataSetIterator iter=new DataSetLoaderIterator(l,rng,new Loader<DataSet>(){
      @Override public DataSet load(      Source source) throws IOException {
        INDArray i=Nd4j.scalar(Integer.valueOf(source.getPath()));
        return new DataSet(i,i);
      }
    }
,new LocalFileSourceFactory());
    int count=0;
    int[] exp={3,0,1};
    while (iter.hasNext()) {
      DataSet ds=iter.next();
      if (!r) {
        assertEquals(exp[count],ds.getFeatures().getInt(0));
      }
      count++;
    }
    assertEquals(3,count);
    iter.reset();
    assertTrue(iter.hasNext());
  }
}
