@Test(timeout=60000L) public void remoteTests() throws Exception {
  if (masterStatus.get() != 0 || slaveStatus.get() != 0)   throw new IllegalStateException("Master or slave failed to start. Exiting");
  ParameterServerClient client=ParameterServerClient.builder().aeron(aeron).ndarrayRetrieveUrl(BackgroundDaemonStarter.masterResponderUrl()).ndarraySendUrl(BackgroundDaemonStarter.slaveConnectionUrl()).subscriberHost("localhost").masterStatusHost("localhost").masterStatusPort(9200).subscriberPort(40125).subscriberStream(12).build();
  assertEquals("localhost:40125:12",client.connectionUrl());
  while (!client.masterStarted()) {
    Thread.sleep(1000);
    log.info("Waiting on master starting.");
  }
  log.info("Pushing ndarray");
  client.pushNDArray(Nd4j.ones(parameterLength));
  while (client.arraysSentToResponder() < 1) {
    Thread.sleep(1000);
    log.info("Waiting on ndarray responder to receive array");
  }
  log.info("Pushed ndarray");
  INDArray arr=client.getArray();
  assertEquals(Nd4j.ones(1000),arr);
}
