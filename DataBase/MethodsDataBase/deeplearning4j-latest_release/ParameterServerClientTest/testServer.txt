@Test(timeout=60000L) public void testServer() throws Exception {
  int subscriberPort=40625 + new java.util.Random().nextInt(100);
  ParameterServerClient client=ParameterServerClient.builder().aeron(aeron).ndarrayRetrieveUrl(masterNode.getResponder().connectionUrl()).ndarraySendUrl(slaveNode.getSubscriber().connectionUrl()).subscriberHost("localhost").subscriberPort(subscriberPort).subscriberStream(12).build();
  assertEquals(String.format("localhost:%d:12",subscriberPort),client.connectionUrl());
  client.pushNDArray(Nd4j.ones(parameterLength));
  log.info("Pushed ndarray");
  Thread.sleep(30000);
  ParameterServerListener listener=(ParameterServerListener)masterNode.getCallback();
  assertEquals(1,listener.getUpdater().numUpdates());
  assertEquals(Nd4j.ones(parameterLength),listener.getUpdater().ndArrayHolder().get());
  INDArray arr=client.getArray();
  assertEquals(Nd4j.ones(1000),arr);
}
