@Test public void testImagesRRDSI() throws Exception {
  File parentDir=temporaryFolder.newFolder();
  parentDir.deleteOnExit();
  String str1=FilenameUtils.concat(parentDir.getAbsolutePath(),"Zico/");
  String str2=FilenameUtils.concat(parentDir.getAbsolutePath(),"Ziwang_Xu/");
  File f2=new File(str2);
  File f1=new File(str1);
  f1.mkdirs();
  f2.mkdirs();
  TestUtils.writeStreamToFile(new File(FilenameUtils.concat(f1.getPath(),"Zico_0001.jpg")),new ClassPathResource("lfwtest/Zico/Zico_0001.jpg").getInputStream());
  TestUtils.writeStreamToFile(new File(FilenameUtils.concat(f2.getPath(),"Ziwang_Xu_0001.jpg")),new ClassPathResource("lfwtest/Ziwang_Xu/Ziwang_Xu_0001.jpg").getInputStream());
  Random r=new Random(12345);
  ParentPathLabelGenerator labelMaker=new ParentPathLabelGenerator();
  ImageRecordReader rr1=new ImageRecordReader(28,28,3,labelMaker);
  rr1.initialize(new FileSplit(parentDir));
  RecordReaderDataSetIterator rrdsi=new RecordReaderDataSetIterator(rr1,2);
  DataSet ds=rrdsi.next();
  assertArrayEquals(new long[]{2,3,28,28},ds.getFeatures().shape());
  assertArrayEquals(new long[]{2,2},ds.getLabels().shape());
  rr1.reset();
  rrdsi=new RecordReaderDataSetIterator.Builder(rr1,2).classification(1,2).build();
  ds=rrdsi.next();
  assertArrayEquals(new long[]{2,3,28,28},ds.getFeatures().shape());
  assertArrayEquals(new long[]{2,2},ds.getLabels().shape());
}
