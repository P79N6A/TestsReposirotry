@Test public void testConvCacheModeSimple(){
  MultiLayerConfiguration conf1=getConf(CacheMode.NONE);
  MultiLayerConfiguration conf2=getConf(CacheMode.DEVICE);
  MultiLayerNetwork net1=new MultiLayerNetwork(conf1);
  net1.init();
  MultiLayerNetwork net2=new MultiLayerNetwork(conf2);
  net2.init();
  INDArray in=Nd4j.rand(3,28 * 28);
  INDArray labels=TestUtils.randomOneHot(3,10);
  INDArray out1=net1.output(in);
  INDArray out2=net2.output(in);
  assertEquals(out1,out2);
  assertEquals(net1.params(),net2.params());
  net1.fit(in,labels);
  net2.fit(in,labels);
  assertEquals(net1.params(),net2.params());
}
