@Test public void testConvCacheModeSimpleCG(){
  ComputationGraphConfiguration conf1=getConfCG(CacheMode.NONE);
  ComputationGraphConfiguration conf2=getConfCG(CacheMode.DEVICE);
  ComputationGraph net1=new ComputationGraph(conf1);
  net1.init();
  ComputationGraph net2=new ComputationGraph(conf2);
  net2.init();
  INDArray in=Nd4j.rand(3,28 * 28);
  INDArray labels=TestUtils.randomOneHot(3,10);
  INDArray out1=net1.outputSingle(in);
  INDArray out2=net2.outputSingle(in);
  assertEquals(out1,out2);
  assertEquals(net1.params(),net2.params());
  net1.fit(new DataSet(in,labels));
  net2.fit(new DataSet(in,labels));
  assertEquals(net1.params(),net2.params());
}
