@Test public void testInverseComparison(){
  List<Pair<INDArray,String>> list=NDArrayCreationUtil.getAllTestMatricesWithShape(10,10,12345);
  for (  Pair<INDArray,String> p : list) {
    INDArray orig=p.getFirst();
    orig.assign(Nd4j.rand(orig.shape()));
    INDArray inverse=InvertMatrix.invert(orig,false);
    RealMatrix rm=CheckUtil.convertToApacheMatrix(orig);
    RealMatrix rmInverse=new LUDecomposition(rm).getSolver().getInverse();
    INDArray expected=CheckUtil.convertFromApacheMatrix(rmInverse);
    assertTrue(p.getSecond(),CheckUtil.checkEntries(expected,inverse,1e-3,1e-4));
  }
}
