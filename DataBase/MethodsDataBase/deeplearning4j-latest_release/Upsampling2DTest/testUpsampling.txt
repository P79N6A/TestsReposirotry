@Test public void testUpsampling() throws Exception {
  double[] outArray=new double[]{1.,1.,2.,2.,1.,1.,2.,2.,3.,3.,4.,4.,3.,3.,4.,4.};
  INDArray containedExpectedOut=Nd4j.create(outArray,new int[]{1,1,4,4});
  INDArray containedInput=getContainedData();
  INDArray input=getData();
  Layer layer=getUpsamplingLayer();
  INDArray containedOutput=layer.activate(containedInput,false,LayerWorkspaceMgr.noWorkspaces());
  assertTrue(Arrays.equals(containedExpectedOut.shape(),containedOutput.shape()));
  assertEquals(containedExpectedOut,containedOutput);
  INDArray output=layer.activate(input,false,LayerWorkspaceMgr.noWorkspaces());
  assertTrue(Arrays.equals(new long[]{nExamples,nChannelsIn,outputWidth,outputHeight},output.shape()));
  assertEquals(nChannelsIn,output.size(1),1e-4);
}
