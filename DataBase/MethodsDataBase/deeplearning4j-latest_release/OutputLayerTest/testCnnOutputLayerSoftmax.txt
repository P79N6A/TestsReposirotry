@Test public void testCnnOutputLayerSoftmax(){
  MultiLayerConfiguration conf=new NeuralNetConfiguration.Builder().seed(12345L).updater(new NoOp()).convolutionMode(ConvolutionMode.Same).list().layer(new ConvolutionLayer.Builder().nIn(3).nOut(4).activation(Activation.IDENTITY).weightInit(WeightInit.DISTRIBUTION).dist(new NormalDistribution(0,1.0)).updater(new NoOp()).build()).layer(new CnnLossLayer.Builder(LossFunction.MSE).activation(Activation.SOFTMAX).build()).build();
  MultiLayerNetwork net=new MultiLayerNetwork(conf);
  net.init();
  INDArray in=Nd4j.rand(new int[]{2,3,4,5});
  INDArray out=net.output(in);
  double min=out.minNumber().doubleValue();
  double max=out.maxNumber().doubleValue();
  assertTrue(min >= 0 && max <= 1.0);
  INDArray sum=out.sum(1);
  assertEquals(Nd4j.ones(2,4,5),sum);
}
