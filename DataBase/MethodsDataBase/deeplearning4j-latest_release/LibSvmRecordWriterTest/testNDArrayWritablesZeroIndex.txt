@Test public void testNDArrayWritablesZeroIndex() throws Exception {
  INDArray arr2=Nd4j.zeros(2);
  arr2.putScalar(0,11);
  arr2.putScalar(1,12);
  INDArray arr3=Nd4j.zeros(3);
  arr3.putScalar(0,0);
  arr3.putScalar(1,1);
  arr3.putScalar(2,0);
  List<Writable> record=Arrays.asList((Writable)new DoubleWritable(1),new NDArrayWritable(arr2),new IntWritable(2),new DoubleWritable(3),new NDArrayWritable(arr3),new DoubleWritable(1));
  File tempFile=File.createTempFile("LibSvmRecordWriter",".txt");
  tempFile.setWritable(true);
  tempFile.deleteOnExit();
  if (tempFile.exists())   tempFile.delete();
  String lineOriginal="1,3 0:1.0 1:11.0 2:12.0 3:2.0 4:3.0";
  try (LibSvmRecordWriter writer=new LibSvmRecordWriter()){
    Configuration configWriter=new Configuration();
    configWriter.setBoolean(LibSvmRecordWriter.ZERO_BASED_INDEXING,true);
    configWriter.setBoolean(LibSvmRecordWriter.ZERO_BASED_LABEL_INDEXING,true);
    configWriter.setBoolean(LibSvmRecordWriter.MULTILABEL,true);
    configWriter.setInt(LibSvmRecordWriter.FEATURE_FIRST_COLUMN,0);
    configWriter.setInt(LibSvmRecordWriter.FEATURE_LAST_COLUMN,3);
    FileSplit outputSplit=new FileSplit(tempFile);
    writer.initialize(configWriter,outputSplit,new NumberOfRecordsPartitioner());
    writer.write(record);
  }
   String lineNew=FileUtils.readFileToString(tempFile).trim();
  assertEquals(lineOriginal,lineNew);
}
