@Test(timeout=20000L) public void testMapStorage() throws Exception {
  StatusStorage mapDb=new MapDbStatusStorage();
  assertEquals(SubscriberState.empty(),mapDb.getState(-1));
  SubscriberState noEmpty=SubscriberState.builder().isMaster(true).serverState("master").streamId(1).build();
  mapDb.updateState(noEmpty);
  assertEquals(noEmpty,mapDb.getState(1));
  Thread.sleep(10000);
  assertTrue(mapDb.numStates() == 0);
}
