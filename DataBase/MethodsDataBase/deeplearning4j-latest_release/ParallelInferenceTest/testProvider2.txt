@Test public void testProvider2() throws Exception {
  LinkedBlockingQueue queue=new LinkedBlockingQueue();
  BasicInferenceObserver observer=new BasicInferenceObserver();
  ParallelInference.ObservablesProvider provider=new ParallelInference.ObservablesProvider(10000000L,100,queue);
  InferenceObservable observable1=provider.setInput(observer,Nd4j.create(100).assign(1.0));
  InferenceObservable observable2=provider.setInput(observer,Nd4j.create(100).assign(2.0));
  assertNotEquals(null,observable1);
  assertTrue(observable1 == observable2);
  List<Pair<INDArray[],INDArray[]>> l=observable1.getInputBatches();
  assertEquals(1,l.size());
  INDArray[] input=l.get(0).getFirst();
  assertNull(l.get(0).getSecond());
  assertEquals(1,input.length);
  assertArrayEquals(new long[]{2,100},input[0].shape());
  assertEquals(1.0f,input[0].tensorAlongDimension(0,1).meanNumber().floatValue(),0.001);
  assertEquals(2.0f,input[0].tensorAlongDimension(1,1).meanNumber().floatValue(),0.001);
}
