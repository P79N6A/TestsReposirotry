@Test public void testSequenceRecordReader() throws Exception {
  SequenceRecordReader seqRR=new MapFileSequenceRecordReader();
  URI uri=seqMapFilePath.toUri();
  InputSplit is=new FileSplit(new File(uri));
  seqRR.initialize(is);
  assertTrue(seqRR.hasNext());
  int count=0;
  while (seqRR.hasNext()) {
    List<List<org.datavec.api.writable.Writable>> l=seqRR.sequenceRecord();
    assertEquals(seqMap.get(new LongWritable(count)).getSequenceRecord(),l);
    count++;
  }
  assertEquals(seqMap.size(),count);
  seqRR.close();
  seqRR=new MapFileSequenceRecordReader(new Random(12345));
  seqRR.initialize(is);
  Field f=MapFileSequenceRecordReader.class.getDeclaredField("order");
  f.setAccessible(true);
  int[] order=(int[])f.get(seqRR);
  assertNotNull(order);
  int[] expOrder=new int[]{0,1,2};
  MathUtils.shuffleArray(expOrder,new Random(12345));
  assertArrayEquals(expOrder,order);
  count=0;
  while (seqRR.hasNext()) {
    List<List<org.datavec.api.writable.Writable>> l=seqRR.sequenceRecord();
    assertEquals(seqMap.get(new LongWritable(expOrder[count])).getSequenceRecord(),l);
    count++;
  }
}
