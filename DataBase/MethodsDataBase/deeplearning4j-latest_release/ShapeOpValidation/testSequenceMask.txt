@Test public void testSequenceMask(){
  SameDiff sameDiff=SameDiff.create();
  INDArray arr=Nd4j.create(new float[]{1,3,2}).reshape(3);
  SDVariable lengths=sameDiff.var("lengths",arr);
  int maxlen=5;
  INDArray expected=Nd4j.create(new float[]{1,0,0,0,0,1,1,1,0,0,1,1,0,0,0},new long[]{3,5});
  SDVariable result1=sameDiff.sequenceMask(lengths,maxlen);
  assertArrayEquals(expected.shape(),result1.eval().shape());
  assertEquals(expected,result1.eval());
  SDVariable loss=sameDiff.standardDeviation(result1,true);
  String err=OpValidation.validate(new TestCase(sameDiff).expected(result1,expected).gradCheckSkipVariables(lengths.getVarName()));
  assertNull(err);
  lengths=sameDiff.var("lengths2",arr);
  SDVariable maxLen=sameDiff.var("maxLen",Nd4j.create(new float[]{5}).reshape(1));
  SDVariable result2=sameDiff.sequenceMask(lengths,maxLen);
  assertArrayEquals(expected.shape(),result2.eval().shape());
  assertEquals(expected,result2.eval());
}
