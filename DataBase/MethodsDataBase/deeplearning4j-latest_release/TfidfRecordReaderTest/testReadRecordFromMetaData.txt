@Test public void testReadRecordFromMetaData() throws Exception {
  TfidfVectorizer vectorizer=new TfidfVectorizer();
  Configuration conf=new Configuration();
  conf.setInt(TfidfVectorizer.MIN_WORD_FREQUENCY,1);
  conf.setBoolean(RecordReader.APPEND_LABEL,true);
  vectorizer.initialize(conf);
  TfidfRecordReader reader=new TfidfRecordReader();
  File f=testDir.newFolder();
  new ClassPathResource("datavec-data-nlp/labeled/").copyDirectory(f);
  reader.initialize(conf,new FileSplit(f));
  Record record=reader.nextRecord();
  Record reread=reader.loadFromMetaData(record.getMetaData());
  assertEquals(record.getRecord().size(),2);
  assertEquals(reread.getRecord().size(),2);
  assertEquals(record.getRecord().get(0),reread.getRecord().get(0));
  assertEquals(record.getRecord().get(1),reread.getRecord().get(1));
  assertEquals(record.getMetaData(),reread.getMetaData());
}
