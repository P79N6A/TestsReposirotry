@Test public void testRegexSequenceRecordReaderMeta() throws Exception {
  String regex="(\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}\\.\\d{3}) (\\d+) ([A-Z]+) (.*)";
  ClassPathResource cpr=new ClassPathResource("datavec-api/logtestdata/");
  File f=testDir.newFolder();
  cpr.copyDirectory(f);
  String path=new File(f,"logtestfile%d.txt").getAbsolutePath();
  InputSplit is=new NumberedFileInputSplit(path,0,1);
  SequenceRecordReader rr=new RegexSequenceRecordReader(regex,1);
  rr.initialize(is);
  List<List<List<Writable>>> out=new ArrayList<>();
  while (rr.hasNext()) {
    out.add(rr.sequenceRecord());
  }
  assertEquals(2,out.size());
  List<List<List<Writable>>> out2=new ArrayList<>();
  List<SequenceRecord> out3=new ArrayList<>();
  List<RecordMetaData> meta=new ArrayList<>();
  rr.reset();
  while (rr.hasNext()) {
    SequenceRecord seqr=rr.nextSequence();
    out2.add(seqr.getSequenceRecord());
    out3.add(seqr);
    meta.add(seqr.getMetaData());
  }
  List<SequenceRecord> fromMeta=rr.loadSequenceFromMetaData(meta);
  assertEquals(out,out2);
  assertEquals(out3,fromMeta);
}
