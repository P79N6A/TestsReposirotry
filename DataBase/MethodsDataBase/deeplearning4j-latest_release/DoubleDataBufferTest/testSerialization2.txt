@Test public void testSerialization2() throws Exception {
  INDArray[] arr=new INDArray[]{Nd4j.ones(1,10)};
  for (  INDArray a : arr) {
    ByteArrayOutputStream baos=new ByteArrayOutputStream();
    try (ObjectOutputStream oos=new ObjectOutputStream(baos)){
      oos.writeObject(a);
      oos.flush();
    }
     byte[] bytes=baos.toByteArray();
    ByteArrayInputStream bais=new ByteArrayInputStream(bytes);
    ObjectInputStream ois=new ObjectInputStream(bais);
    INDArray aDeserialized=(INDArray)ois.readObject();
    System.out.println(aDeserialized);
    assertEquals(Nd4j.ones(1,10),aDeserialized);
  }
}
