@Test public void testUpdaterBlockVae(){
  List<UpdaterBlock> blocks;
  MultiLayerConfiguration conf=new NeuralNetConfiguration.Builder().updater(new Adam(0.5)).list().layer(0,new VariationalAutoencoder.Builder().nIn(8).nOut(12).encoderLayerSizes(10,11).decoderLayerSizes(13,14).build()).build();
  MultiLayerNetwork net=new MultiLayerNetwork(conf);
  net.init();
  MultiLayerUpdater u=(MultiLayerUpdater)net.getUpdater();
  blocks=u.getUpdaterBlocks();
  assertEquals(2,blocks.size());
  UpdaterBlock ub0=blocks.get(0);
  List<String> expParams=Arrays.asList("e0W","e0b","e1W","e1b","pZXMeanW","pZXMeanb");
  List<String> actParams=new ArrayList<>();
  for (  UpdaterBlock.ParamState vs : ub0.getLayersAndVariablesInBlock()) {
    actParams.add(vs.getParamName());
  }
  assertEquals(expParams,actParams);
  UpdaterBlock ub1=blocks.get(1);
  expParams=Arrays.asList("pZXLogStd2W","pZXLogStd2b","d0W","d0b","d1W","d1b","pXZW","pXZb");
  actParams=new ArrayList<>();
  for (  UpdaterBlock.ParamState vs : ub1.getLayersAndVariablesInBlock()) {
    actParams.add(vs.getParamName());
  }
  assertEquals(expParams,actParams);
}
