@Test public void testDivisionByMinibatch1(){
  MultiLayerConfiguration conf=new NeuralNetConfiguration.Builder().list().layer(new DenseLayer.Builder().nIn(10).nOut(10).build()).layer(new DenseLayer.Builder().nIn(10).nOut(10).build()).layer(new OutputLayer.Builder().nIn(10).nOut(10).activation(Activation.SOFTMAX).build()).build();
  MultiLayerNetwork net=new MultiLayerNetwork(conf);
  net.init();
  net.fit(Nd4j.create(1,10),Nd4j.create(1,10));
  BaseMultiLayerUpdater u=(BaseMultiLayerUpdater)net.getUpdater();
  List<INDArray> l=u.getGradientsForMinibatchDivision();
  assertNotNull(l);
  assertEquals(1,l.size());
  INDArray arr=l.get(0);
  assertEquals(3 * (10 * 10 + 10),arr.length());
  assertEquals(net.getFlattenedGradients(),arr);
}
