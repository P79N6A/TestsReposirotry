@Test(timeout=60000L) public void testServer() throws Exception {
  ParameterServerClient client=ParameterServerClient.builder().aeron(aeron).ndarrayRetrieveUrl(masterNode.getResponder().connectionUrl()).ndarraySendUrl(slaveNode.getSubscriber().connectionUrl()).subscriberHost("localhost").subscriberPort(40325).subscriberStream(12).build();
  assertEquals("localhost:40325:12",client.connectionUrl());
  client.pushNDArrayMessage(NDArrayMessage.of(Nd4j.ones(2),new int[]{0},0));
  log.info("Pushed ndarray");
  Thread.sleep(30000);
  ParameterServerListener listener=(ParameterServerListener)masterNode.getCallback();
  assertEquals(1,listener.getUpdater().numUpdates());
  INDArray assertion=Nd4j.create(new int[]{2,2});
  assertion.getColumn(0).addi(1.0);
  assertEquals(assertion,listener.getUpdater().ndArrayHolder().get());
  INDArray arr=client.getArray();
  assertEquals(assertion,arr);
}
