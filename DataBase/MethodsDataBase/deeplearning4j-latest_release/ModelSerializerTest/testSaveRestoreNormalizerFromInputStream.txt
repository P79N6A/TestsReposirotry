@Test public void testSaveRestoreNormalizerFromInputStream() throws Exception {
  DataSet dataSet=trivialDataSet();
  NormalizerStandardize norm=new NormalizerStandardize();
  norm.fit(dataSet);
  ComputationGraph cg=simpleComputationGraph();
  cg.init();
  File tempFile=tempDir.newFile();
  ModelSerializer.writeModel(cg,tempFile,true);
  ModelSerializer.addNormalizerToModel(tempFile,norm);
  FileInputStream fis=new FileInputStream(tempFile);
  NormalizerStandardize restored=ModelSerializer.restoreNormalizerFromInputStream(fis);
  assertNotEquals(null,restored);
  DataSet dataSet2=dataSet.copy();
  norm.preProcess(dataSet2);
  assertNotEquals(dataSet.getFeatures(),dataSet2.getFeatures());
  restored.revert(dataSet2);
  assertEquals(dataSet.getFeatures(),dataSet2.getFeatures());
}
