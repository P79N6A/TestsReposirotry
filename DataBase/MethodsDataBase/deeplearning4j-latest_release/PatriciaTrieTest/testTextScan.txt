@Test public void testTextScan(){
  PatriciaTrie<String> trie=new PatriciaTrie<>();
  String[] terms=new String[]{"お寿司","sushi","美味しい","tasty","日本","japan","だと思います","i think","料理","food","日本料理","japanese food","一番","first and foremost"};
  for (int i=0; i < terms.length; i+=2) {
    trie.put(terms[i],terms[i + 1]);
  }
  String text="日本料理の中で、一番美味しいのはお寿司だと思います。すぐ日本に帰りたいです。";
  StringBuilder builder=new StringBuilder();
  int startIndex=0;
  while (startIndex < text.length()) {
    int matchLength=0;
    while (trie.containsKeyPrefix(text.substring(startIndex,startIndex + matchLength + 1))) {
      matchLength++;
    }
    if (matchLength > 0) {
      String match=text.substring(startIndex,startIndex + matchLength);
      builder.append("[");
      builder.append(match);
      builder.append("|");
      builder.append(trie.get(match));
      builder.append("]");
      startIndex+=matchLength;
    }
 else {
      builder.append(text.charAt(startIndex));
      startIndex++;
    }
  }
  assertEquals("[日本料理|japanese food]の中で、[一番|first and foremost][美味しい|tasty]のは[お寿司|sushi][だと思います|i think]。すぐ[日本|japan]に帰りたいです。",builder.toString());
}
