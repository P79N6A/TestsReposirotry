@Test public void validateXceptionImport() throws Exception {
  File dir=testDir.newFolder();
  File fSource=new ClassPathResource("modelimport/keras/examples/xception/xception_tf_keras_2.h5").getFile();
  File fExtracted=new File(dir,"xception_tf_keras_2.h5");
  FileUtils.copyFile(fSource,fExtracted);
  int inSize=256;
  ComputationGraph model=KerasModelImport.importKerasModelAndWeights(fExtracted.getAbsolutePath(),new int[]{inSize,inSize,3},false);
  INDArray in=Nd4j.rand(new int[]{1,3,inSize,inSize});
  CuDNNTestUtils.assertHelpersPresent(model.getLayers());
  Map<String,INDArray> withCudnn=model.feedForward(in,false);
  CuDNNTestUtils.removeHelpers(model.getLayers());
  CuDNNTestUtils.assertHelpersAbsent(model.getLayers());
  Map<String,INDArray> noCudnn=model.feedForward(in,false);
  assertEquals(withCudnn.keySet(),noCudnn.keySet());
  for (  String s : withCudnn.keySet()) {
    assertEquals(s,withCudnn.get(s),noCudnn.get(s));
  }
}
