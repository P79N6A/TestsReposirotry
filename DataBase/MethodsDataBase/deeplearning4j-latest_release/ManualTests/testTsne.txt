@Test public void testTsne() throws Exception {
  Nd4j.ENFORCE_NUMERICAL_STABILITY=true;
  DataTypeUtil.setDTypeForContext(DataBuffer.Type.DOUBLE);
  Nd4j.getRandom().setSeed(123);
  BarnesHutTsne b=new BarnesHutTsne.Builder().stopLyingIteration(10).setMaxIter(10).theta(0.5).learningRate(500).useAdaGrad(true).build();
  org.nd4j.linalg.io.ClassPathResource resource=new org.nd4j.linalg.io.ClassPathResource("/mnist2500_X.txt");
  File f=resource.getTempFileFromArchive();
  INDArray data=Nd4j.readNumpy(f.getAbsolutePath(),"   ").get(NDArrayIndex.interval(0,100),NDArrayIndex.interval(0,784));
  org.nd4j.linalg.io.ClassPathResource labels=new org.nd4j.linalg.io.ClassPathResource("mnist2500_labels.txt");
  List<String> labelsList=IOUtils.readLines(labels.getInputStream()).subList(0,100);
  b.fit(data);
  File save=new File(System.getProperty("java.io.tmpdir"),"labels-" + UUID.randomUUID().toString());
  System.out.println("Saved to " + save.getAbsolutePath());
  save.deleteOnExit();
  b.saveAsFile(labelsList,save.getAbsolutePath());
  INDArray output=b.getData();
  System.out.println("Coordinates");
  UIServer server=UIServer.getInstance();
  Thread.sleep(10000000000L);
}
