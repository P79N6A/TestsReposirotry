@Test public void testSerializationFullArrayNd4jWriteRead() throws Exception {
  int length=100;
  INDArray arrC=Nd4j.linspace(1,length,length).reshape('c',10,10);
  INDArray arrF=Nd4j.linspace(1,length,length).reshape('f',10,10);
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  try (DataOutputStream dos=new DataOutputStream(baos)){
    Nd4j.write(arrC,dos);
  }
   byte[] bytesC=baos.toByteArray();
  baos=new ByteArrayOutputStream();
  try (DataOutputStream dos=new DataOutputStream(baos)){
    Nd4j.write(arrF,dos);
  }
   byte[] bytesF=baos.toByteArray();
  INDArray arr2C;
  try (DataInputStream dis=new DataInputStream(new ByteArrayInputStream(bytesC))){
    arr2C=Nd4j.read(dis);
  }
   INDArray arr2F;
  try (DataInputStream dis=new DataInputStream(new ByteArrayInputStream(bytesF))){
    arr2F=Nd4j.read(dis);
  }
   assertEquals(arrC,arr2C);
  assertEquals(arrF,arr2F);
}
