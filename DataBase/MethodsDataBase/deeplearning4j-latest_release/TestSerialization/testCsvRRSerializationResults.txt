@Test public void testCsvRRSerializationResults() throws Exception {
  int skipLines=3;
  RecordReader r1=new CSVRecordReader(skipLines,'\t');
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  ObjectOutputStream os=new ObjectOutputStream(baos);
  os.writeObject(r1);
  byte[] bytes=baos.toByteArray();
  ObjectInputStream ois=new ObjectInputStream(new ByteArrayInputStream(bytes));
  RecordReader r2=(RecordReader)ois.readObject();
  File f=new ClassPathResource("datavec-api/iris_tab_delim.txt").getFile();
  r1.initialize(new FileSplit(f));
  r2.initialize(new FileSplit(f));
  int count=0;
  while (r1.hasNext()) {
    List<Writable> n1=r1.next();
    List<Writable> n2=r2.next();
    assertEquals(n1,n2);
    count++;
  }
  assertEquals(150 - skipLines,count);
}
