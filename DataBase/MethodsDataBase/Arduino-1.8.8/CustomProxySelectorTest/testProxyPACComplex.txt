@Test public void testProxyPACComplex() throws Exception {
  preferences.put(Constants.PREF_PROXY_TYPE,Constants.PROXY_TYPE_AUTO);
  preferences.put(Constants.PREF_PROXY_PAC_URL,CustomProxySelectorTest.class.getResource("proxy_complex.pac").toExternalForm());
  CustomProxySelector proxySelector=new CustomProxySelector(preferences);
  Proxy proxy=proxySelector.getProxyFor(uri);
  assertEquals(new Proxy(Proxy.Type.HTTP,new InetSocketAddress("4.5.6.7",8080)),proxy);
}
