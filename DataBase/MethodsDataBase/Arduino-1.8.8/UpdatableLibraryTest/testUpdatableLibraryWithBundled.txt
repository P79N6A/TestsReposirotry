@Test public void testUpdatableLibraryWithBundled() throws Exception {
  List<UserLibraryFolder> folders=new ArrayList<>();
  folders.add(new UserLibraryFolder(Bridge163,Location.IDE_BUILTIN));
  LibrariesIndexer indexer=new LibrariesIndexer(index_Bridge_only);
  BaseNoGui.librariesIndexer=indexer;
  indexer.parseIndex();
  indexer.setLibrariesFolders(folders);
  indexer.rescanLibraries();
  ContributedLibrary l=indexer.getIndex().getInstalled("Bridge").get();
  assertTrue("Bridge lib is installed",l.isLibraryInstalled());
  assertEquals("Bridge installed version","1.6.3",l.getParsedVersion());
  assertTrue(ContributionsSelfCheck.checkForUpdatableLibraries());
  folders.add(new UserLibraryFolder(Bridge170,Location.SKETCHBOOK));
  indexer.setLibrariesFolders(folders);
  l=indexer.getIndex().getInstalled("Bridge").get();
  assertTrue("Bridge lib is installed",l.isLibraryInstalled());
  assertEquals("Bridge installed version","1.7.0",l.getParsedVersion());
  assertFalse(ContributionsSelfCheck.checkForUpdatableLibraries());
}
