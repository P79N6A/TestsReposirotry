@Test public void testGetAppsDeltaFromAllRemoteRegions() throws Exception {
  registerInstanceLocally(createLocalInstance(LOCAL_REGION_INSTANCE_2_HOSTNAME));
  waitForDeltaToBeRetrieved();
  Applications appDelta=registry.getApplicationDeltasFromMultipleRegions(null);
  List<Application> registeredApplications=appDelta.getRegisteredApplications();
  Assert.assertEquals("Apps size from remote regions do not match",2,registeredApplications.size());
  Application localApplication=null;
  Application remApplication=null;
  for (  Application registeredApplication : registeredApplications) {
    if (registeredApplication.getName().equalsIgnoreCase(LOCAL_REGION_APP_NAME)) {
      localApplication=registeredApplication;
    }
    if (registeredApplication.getName().equalsIgnoreCase(REMOTE_REGION_APP_NAME)) {
      remApplication=registeredApplication;
    }
  }
  Assert.assertNotNull("Did not find local registry app in delta.",localApplication);
  Assert.assertEquals("Local registry app instance count in delta not as expected.",1,localApplication.getInstances().size());
  Assert.assertNotNull("Did not find remote registry app in delta",remApplication);
  Assert.assertEquals("Remote registry app instance count  in delta not as expected.",1,remApplication.getInstances().size());
}
