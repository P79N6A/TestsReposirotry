@Test public void testGetAppsFromBothRegions() throws Exception {
  registerInstanceLocally(createRemoteInstance(LOCAL_REGION_INSTANCE_2_HOSTNAME));
  registerInstanceLocally(createLocalInstance(LOCAL_REGION_INSTANCE_1_HOSTNAME));
  Applications apps=registry.getApplicationsFromAllRemoteRegions();
  List<Application> registeredApplications=apps.getRegisteredApplications();
  Assert.assertEquals("Apps size from both regions do not match",2,registeredApplications.size());
  Application locaApplication=null;
  Application remApplication=null;
  for (  Application registeredApplication : registeredApplications) {
    if (registeredApplication.getName().equalsIgnoreCase(LOCAL_REGION_APP_NAME)) {
      locaApplication=registeredApplication;
    }
    if (registeredApplication.getName().equalsIgnoreCase(REMOTE_REGION_APP_NAME)) {
      remApplication=registeredApplication;
    }
  }
  Assert.assertNotNull("Did not find local registry app",locaApplication);
  Assert.assertEquals("Local registry app instance count not as expected.",1,locaApplication.getInstances().size());
  Assert.assertNotNull("Did not find remote registry app",remApplication);
  Assert.assertEquals("Remote registry app instance count not as expected.",2,remApplication.getInstances().size());
}
