@Test public void testOnDemandUpdateRateLimiting() throws Throwable {
  assertTrue(replicator.onDemandUpdate());
  Thread.sleep(10);
  assertTrue(replicator.onDemandUpdate());
  Thread.sleep(10);
  assertFalse(replicator.onDemandUpdate());
  Thread.sleep(10);
  verify(discoveryClient,times(2)).refreshInstanceInfo();
  verify(discoveryClient,times(1)).register();
}
