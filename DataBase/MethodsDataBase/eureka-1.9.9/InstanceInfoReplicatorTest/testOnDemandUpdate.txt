@Test public void testOnDemandUpdate() throws Throwable {
  assertTrue(replicator.onDemandUpdate());
  Thread.sleep(10);
  assertTrue(replicator.onDemandUpdate());
  Thread.sleep(1000 * refreshRateSeconds / 2);
  assertTrue(replicator.onDemandUpdate());
  Thread.sleep(10);
  verify(discoveryClient,times(3)).refreshInstanceInfo();
  verify(discoveryClient,times(1)).register();
}
