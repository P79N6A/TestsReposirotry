@Test public void testOnDemandUpdateResetAutomaticRefreshWithInitialDelay() throws Throwable {
  replicator.start(1000 * refreshRateSeconds);
  assertTrue(replicator.onDemandUpdate());
  Thread.sleep(1000 * refreshRateSeconds + 100);
  verify(discoveryClient,times(2)).refreshInstanceInfo();
  verify(discoveryClient,times(1)).register();
}
