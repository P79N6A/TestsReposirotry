/** 
 * This test is similar to the normal lifecycle test, but don't sleep between calls of setInstanceStatus
 */
@Test public void registerUpdateQuickLifecycleTest() throws Exception {
  applicationInfoManager.setInstanceStatus(InstanceInfo.InstanceStatus.UP);
  applicationInfoManager.setInstanceStatus(InstanceInfo.InstanceStatus.UNKNOWN);
  applicationInfoManager.setInstanceStatus(InstanceInfo.InstanceStatus.DOWN);
  expectStatus(InstanceInfo.InstanceStatus.DOWN,5,TimeUnit.SECONDS);
  applicationInfoManager.setInstanceStatus(InstanceInfo.InstanceStatus.UP);
  expectStatus(InstanceInfo.InstanceStatus.UP,5,TimeUnit.SECONDS);
  Assert.assertTrue(mockLocalEurekaServer.registerCount.get() >= 2);
}
