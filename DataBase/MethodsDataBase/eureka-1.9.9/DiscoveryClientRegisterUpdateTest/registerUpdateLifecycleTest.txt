@Test public void registerUpdateLifecycleTest() throws Exception {
  applicationInfoManager.setInstanceStatus(InstanceInfo.InstanceStatus.UP);
  expectStatus(InstanceInfo.InstanceStatus.UP,5,TimeUnit.SECONDS);
  applicationInfoManager.setInstanceStatus(InstanceInfo.InstanceStatus.UNKNOWN);
  expectStatus(InstanceInfo.InstanceStatus.UNKNOWN,5,TimeUnit.SECONDS);
  applicationInfoManager.setInstanceStatus(InstanceInfo.InstanceStatus.DOWN);
  expectStatus(InstanceInfo.InstanceStatus.DOWN,5,TimeUnit.SECONDS);
  Assert.assertTrue(mockLocalEurekaServer.registerCount.get() >= 3);
}
