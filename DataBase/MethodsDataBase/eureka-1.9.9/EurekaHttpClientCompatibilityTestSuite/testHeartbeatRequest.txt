@Test public void testHeartbeatRequest() throws Exception {
  InstanceInfo instance=InstanceInfoGenerator.takeOne();
  InstanceInfo updated=new InstanceInfo.Builder(instance).setHostName("another.host").build();
  when(requestHandler.sendHeartBeat(instance.getAppName(),instance.getId(),null,null)).thenReturn(createResponse(updated));
  EurekaHttpResponse<InstanceInfo> httpResponse=getEurekaHttpClient().sendHeartBeat(instance.getAppName(),instance.getId(),instance,null);
  verifyResponseOkWithEntity(updated,httpResponse);
}
