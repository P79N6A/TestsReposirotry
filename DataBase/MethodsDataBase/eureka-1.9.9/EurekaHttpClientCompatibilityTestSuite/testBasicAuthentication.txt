@Test public void testBasicAuthentication() throws Exception {
  InstanceInfo instance=InstanceInfoGenerator.takeOne();
  when(requestHandler.register(instance)).thenReturn(EurekaHttpResponse.status(204));
  EurekaHttpResponse<Void> httpResponse=getEurekaClientWithBasicAuthentication("myuser","mypassword").register(instance);
  assertThat(httpResponse.getStatusCode(),is(equalTo(204)));
  assertThat(observedHttpRequests.get(0).getHeaders().containsKey(HttpHeaders.AUTHORIZATION),is(true));
}
