@Test public void testBadRegistration() throws Exception {
  InstanceInfo instanceInfo=spy(InstanceInfoGenerator.takeOne());
  when(instanceInfo.getId()).thenReturn(null);
  Response response=applicationResource.addInstance(instanceInfo,false + "");
  assertThat(response.getStatus(),is(400));
  instanceInfo=spy(InstanceInfoGenerator.takeOne());
  when(instanceInfo.getHostName()).thenReturn(null);
  response=applicationResource.addInstance(instanceInfo,false + "");
  assertThat(response.getStatus(),is(400));
  instanceInfo=spy(InstanceInfoGenerator.takeOne());
  when(instanceInfo.getIPAddr()).thenReturn(null);
  response=applicationResource.addInstance(instanceInfo,false + "");
  assertThat(response.getStatus(),is(400));
  instanceInfo=spy(InstanceInfoGenerator.takeOne());
  when(instanceInfo.getAppName()).thenReturn("");
  response=applicationResource.addInstance(instanceInfo,false + "");
  assertThat(response.getStatus(),is(400));
  instanceInfo=spy(InstanceInfoGenerator.takeOne());
  when(instanceInfo.getAppName()).thenReturn(applicationResource.getName() + "extraExtra");
  response=applicationResource.addInstance(instanceInfo,false + "");
  assertThat(response.getStatus(),is(400));
  instanceInfo=spy(InstanceInfoGenerator.takeOne());
  when(instanceInfo.getDataCenterInfo()).thenReturn(null);
  response=applicationResource.addInstance(instanceInfo,false + "");
  assertThat(response.getStatus(),is(400));
  instanceInfo=spy(InstanceInfoGenerator.takeOne());
  when(instanceInfo.getDataCenterInfo()).thenReturn(new DataCenterInfo(){
    @Override public Name getName(){
      return null;
    }
  }
);
  response=applicationResource.addInstance(instanceInfo,false + "");
  assertThat(response.getStatus(),is(400));
}
