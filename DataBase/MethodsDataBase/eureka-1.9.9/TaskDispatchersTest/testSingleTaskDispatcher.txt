@Test public void testSingleTaskDispatcher() throws Exception {
  dispatcher=TaskDispatchers.createNonBatchingTaskDispatcher("TEST",MAX_BUFFER_SIZE,1,MAX_BATCHING_DELAY_MS,SERVER_UNAVAILABLE_SLEEP_TIME_MS,RETRY_SLEEP_TIME_MS,processor);
  dispatcher.process(1,ProcessingResult.Success,System.currentTimeMillis() + 60 * 1000);
  ProcessingResult result=processor.completedTasks.poll(5,TimeUnit.SECONDS);
  assertThat(result,is(equalTo(ProcessingResult.Success)));
}
