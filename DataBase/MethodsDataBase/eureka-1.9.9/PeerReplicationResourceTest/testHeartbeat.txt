@Test public void testHeartbeat() throws Exception {
  when(instanceResource.renewLease(anyString(),anyString(),anyString(),anyString())).thenReturn(Response.ok().build());
  ReplicationInstance replicationInstance=newReplicationInstanceOf(Action.Heartbeat,instanceInfo);
  Response response=peerReplicationResource.batchReplication(new ReplicationList(replicationInstance));
  assertStatusOkReply(response);
  verify(instanceResource,times(1)).renewLease("true",replicationInstance.getOverriddenStatus(),instanceInfo.getStatus().name(),Long.toString(replicationInstance.getLastDirtyTimestamp()));
}
