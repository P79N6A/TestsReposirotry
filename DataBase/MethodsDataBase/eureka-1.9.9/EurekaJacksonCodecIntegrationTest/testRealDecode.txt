/** 
 * parse discovery response in a long-running loop with a delay
 * @throws Exception
 */
@Test public void testRealDecode() throws Exception {
  Applications applications;
  File localDiscovery=new File("/var/folders/6j/qy6n1npj11x5j2j_9ng2wzmw0000gp/T/discovery-data-6054758555577530004.json");
  long testStart=System.currentTimeMillis();
  for (int i=0; i < 60; i++) {
    try (InputStream is=new FileInputStream(localDiscovery)){
      long start=System.currentTimeMillis();
      applications=codec.readValue(Applications.class,is);
      System.out.println("found some applications: " + applications.getRegisteredApplications().size() + " et: "+ (System.currentTimeMillis() - start));
    }
   }
  System.out.println("test time: " + " et: " + (System.currentTimeMillis() - testStart));
}
