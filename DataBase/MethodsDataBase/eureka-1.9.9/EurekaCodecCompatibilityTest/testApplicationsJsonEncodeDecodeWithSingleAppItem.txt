/** 
 * For backward compatibility with LegacyJacksonJson codec single item arrays shall not be unwrapped.
 */
@Test public void testApplicationsJsonEncodeDecodeWithSingleAppItem() throws Exception {
  final Applications applications=infoGenerator.takeDelta(1);
  Action2 codingAction=new Action2(){
    @Override public void call(    EncoderWrapper encodingCodec,    DecoderWrapper decodingCodec) throws IOException {
      String encodedString=encodingCodec.encode(applications);
      assertThat(encodedString.contains("\"application\":[{"),is(true));
      Applications decodedValue=decodingCodec.decode(encodedString,Applications.class);
      assertThat(EurekaEntityComparators.equal(applications,decodedValue),is(true));
    }
  }
;
  List<CodecWrapper> jsonCodes=Arrays.asList(new CodecWrappers.LegacyJacksonJson(),new CodecWrappers.JacksonJson());
  verifyAllPairs(codingAction,Applications.class,jsonCodes);
}
