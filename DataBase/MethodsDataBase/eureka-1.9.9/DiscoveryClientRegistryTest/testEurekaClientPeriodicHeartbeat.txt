@Test public void testEurekaClientPeriodicHeartbeat() throws Exception {
  DiscoveryClientResource registeringClientResource=discoveryClientResource.fork().withRegistration(true).withRegistryFetch(false).build();
  InstanceInfo instance=registeringClientResource.getMyInstanceInfo();
  when(requestHandler.register(any(InstanceInfo.class))).thenReturn(EurekaHttpResponse.status(204));
  when(requestHandler.sendHeartBeat(instance.getAppName(),instance.getId(),null,null)).thenReturn(anEurekaHttpResponse(200,InstanceInfo.class).build());
  registeringClientResource.getClient();
  verify(requestHandler,timeout(5 * 1000).atLeast(2)).sendHeartBeat(instance.getAppName(),instance.getId(),null,null);
}
