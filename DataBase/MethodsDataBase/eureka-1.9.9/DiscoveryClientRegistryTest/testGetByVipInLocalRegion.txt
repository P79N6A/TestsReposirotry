@Test public void testGetByVipInLocalRegion() throws Exception {
  Applications applications=InstanceInfoGenerator.newBuilder(4,"app1","app2").build().toApplications();
  InstanceInfo instance=applications.getRegisteredApplications("app1").getInstances().get(0);
  when(requestHandler.getApplications(TEST_REMOTE_REGION)).thenReturn(anEurekaHttpResponse(200,applications).type(MediaType.APPLICATION_JSON_TYPE).build());
  List<InstanceInfo> result=discoveryClientResource.getClient().getInstancesByVipAddress(instance.getVIPAddress(),false);
  assertThat(result.size(),is(equalTo(2)));
  assertThat(result.get(0).getVIPAddress(),is(equalTo(instance.getVIPAddress())));
}
