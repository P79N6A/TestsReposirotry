@Test public void testInstanceFiltering(){
  DataCenterInfo myDCI=new DataCenterInfo(){
    public DataCenterInfo.Name getName(){
      return DataCenterInfo.Name.MyOwn;
    }
  }
;
  InstanceInfo instanceInfo=InstanceInfo.Builder.newBuilder().setAppName("test").setVIPAddress("test.testname:1").setSecureVIPAddress("securetest.testname:7102").setDataCenterInfo(myDCI).setHostName("test.hostname").setStatus(InstanceStatus.DOWN).build();
  Application application=new Application("TestApp");
  application.addInstance(instanceInfo);
  Applications applications=new Applications();
  applications.addApplication(application);
  applications.shuffleInstances(true);
  assertNotNull(applications.getRegisteredApplications("TestApp").getByInstanceId("test.hostname"));
  assertTrue(applications.getInstancesBySecureVirtualHostName("securetest.testname:7102").isEmpty());
  assertTrue(applications.getInstancesBySecureVirtualHostName("test.testname:1").isEmpty());
}
