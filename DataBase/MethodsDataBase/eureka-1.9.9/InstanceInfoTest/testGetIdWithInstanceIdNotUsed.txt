@Test public void testGetIdWithInstanceIdNotUsed(){
  InstanceInfo baseline=InstanceInfoGenerator.takeOne();
  InstanceInfo instanceInfo1=new InstanceInfo.Builder(baseline).setInstanceId("").build();
  String dataCenterInfoId=((UniqueIdentifier)baseline.getDataCenterInfo()).getId();
  assertThat(instanceInfo1.getInstanceId().isEmpty(),is(true));
  assertThat(instanceInfo1.getInstanceId(),is(not(instanceInfo1.getId())));
  assertThat(dataCenterInfoId,is(instanceInfo1.getId()));
  InstanceInfo instanceInfo2=new InstanceInfo.Builder(baseline).setInstanceId(null).build();
  dataCenterInfoId=((UniqueIdentifier)baseline.getDataCenterInfo()).getId();
  assertThat(instanceInfo2.getInstanceId(),is(nullValue()));
  assertThat(instanceInfo2.getInstanceId(),is(not(instanceInfo2.getId())));
  assertThat(dataCenterInfoId,is(instanceInfo2.getId()));
}
