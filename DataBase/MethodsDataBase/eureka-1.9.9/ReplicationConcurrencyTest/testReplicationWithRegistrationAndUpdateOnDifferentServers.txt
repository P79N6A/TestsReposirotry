/** 
 * this test tests a scenario where multiple registration and update requests for a single client is sent to different eureka servers before replication can occur between them
 */
@Test public void testReplicationWithRegistrationAndUpdateOnDifferentServers() throws Exception {
  server2.applicationResource.addInstance(instance1,"true");
  InstanceInfo newServer2Sees=server2.registry.getInstanceByAppAndId(appName,id);
  assertThat(newServer2Sees.getStatus(),equalTo(instance2.getStatus()));
  server1.applicationResource.addInstance(newServer2Sees,"true");
  InstanceInfo newServer1Sees=server1.registry.getInstanceByAppAndId(appName,id);
  assertThat(newServer1Sees.getStatus(),equalTo(instance2.getStatus()));
}
