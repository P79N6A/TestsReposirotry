@Test public void shouldCleanupNotUsedLocks(){
  LockResource node=new LockResource(ResourceTypes.NODE,1L);
  LockTransaction lockTransaction=new LockTransaction();
  LockManagerImpl lockManager=createLockManager();
  lockManager.getWriteLock(LockTracer.NONE,node,lockTransaction);
  assertTrue(lockManager.tryReadLock(node,lockTransaction));
  assertEquals(1,countLocks(lockManager));
  lockManager.releaseWriteLock(node,lockTransaction);
  assertEquals(1,countLocks(lockManager));
  lockManager.releaseReadLock(node,lockTransaction);
  assertEquals(0,countLocks(lockManager));
}
