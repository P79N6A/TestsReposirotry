@Test public void delayedTasksMustNotRunIfCancelledFirst() throws Exception {
  List<Boolean> cancelListener=new ArrayList<>();
  JobHandle handle=scheduler.submit(Group.STORAGE_MAINTENANCE,counter::incrementAndGet,100,0);
  handle.registerCancelListener(cancelListener::add);
  clock.forward(90,TimeUnit.NANOSECONDS);
  scheduler.tick();
  handle.cancel(false);
  clock.forward(10,TimeUnit.NANOSECONDS);
  scheduler.tick();
  pools.getThreadPool(Group.STORAGE_MAINTENANCE).shutDown();
  assertThat(counter.get(),is(0));
  assertThat(cancelListener,contains(Boolean.FALSE));
  try {
    handle.waitTermination();
    fail("waitTermination should have thrown a CancellationException.");
  }
 catch (  CancellationException ignore) {
  }
}
