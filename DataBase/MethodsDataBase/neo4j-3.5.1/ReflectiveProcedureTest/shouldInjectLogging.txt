@Test public void shouldInjectLogging() throws KernelException {
  Log log=spy(Log.class);
  components.register(Log.class,ctx -> log);
  CallableProcedure procedure=procedureCompiler.compileProcedure(LoggingProcedure.class,null,true).get(0);
  procedure.apply(new BasicContext(),new Object[0],resourceTracker);
  verify(log).debug("1");
  verify(log).info("2");
  verify(log).warn("3");
  verify(log).error("4");
}
