@Test public void shouldNotSeeRemovedGraphPropertyInTransaction() throws Exception {
  int prop;
  try (Transaction tx=beginTransaction()){
    prop=tx.tokenWrite().propertyKeyGetOrCreateForName("prop");
    assertThat(tx.dataWrite().graphSetProperty(prop,stringValue("hello")),equalTo(NO_VALUE));
    tx.success();
  }
   try (Transaction tx=beginTransaction();PropertyCursor cursor=tx.cursors().allocatePropertyCursor()){
    assertThat(tx.dataWrite().graphRemoveProperty(prop),equalTo(stringValue("hello")));
    tx.dataRead().graphProperties(cursor);
    assertFalse(cursor.next());
  }
 }
