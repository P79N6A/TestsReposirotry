@Test public void shouldBeAbleToReadExistingGraphProperties() throws Exception {
  int prop1, prop2, prop3;
  try (Transaction tx=beginTransaction()){
    prop1=tx.tokenWrite().propertyKeyGetOrCreateForName("prop1");
    prop2=tx.tokenWrite().propertyKeyGetOrCreateForName("prop2");
    prop3=tx.tokenWrite().propertyKeyGetOrCreateForName("prop3");
    tx.dataWrite().graphSetProperty(prop1,stringValue("hello"));
    tx.dataWrite().graphSetProperty(prop2,stringValue("world"));
    tx.dataWrite().graphSetProperty(prop3,stringValue("etc"));
    tx.success();
  }
   try (Transaction tx=beginTransaction();PropertyCursor cursor=tx.cursors().allocatePropertyCursor()){
    tx.dataRead().graphProperties(cursor);
    assertTrue(cursor.next());
    assertThat(cursor.propertyKey(),equalTo(prop1));
    assertThat(cursor.propertyValue(),equalTo(stringValue("hello")));
    assertTrue(cursor.next());
    assertThat(cursor.propertyKey(),equalTo(prop2));
    assertThat(cursor.propertyValue(),equalTo(stringValue("world")));
    assertTrue(cursor.next());
    assertThat(cursor.propertyKey(),equalTo(prop3));
    assertThat(cursor.propertyValue(),equalTo(stringValue("etc")));
    assertFalse(cursor.next());
  }
 }
