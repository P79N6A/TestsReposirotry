@Test void databaseAndBackupAreMutuallyExclusive() throws Exception {
  ConsistencyCheckService consistencyCheckService=mock(ConsistencyCheckService.class);
  Path homeDir=testDir.directory("home").toPath();
  CheckConsistencyCommand checkConsistencyCommand=new CheckConsistencyCommand(homeDir,testDir.directory("conf").toPath(),consistencyCheckService);
  when(consistencyCheckService.runFullConsistencyCheck(any(),any(),any(),any(),any(),anyBoolean(),any(ConsistencyFlags.class))).thenReturn(ConsistencyCheckService.Result.success(null));
  IncorrectUsage incorrectUsage=assertThrows(IncorrectUsage.class,() -> checkConsistencyCommand.execute(new String[]{"--database=foo","--backup=bar"}));
  assertEquals("Only one of '--database' and '--backup' can be specified.",incorrectUsage.getMessage());
}
