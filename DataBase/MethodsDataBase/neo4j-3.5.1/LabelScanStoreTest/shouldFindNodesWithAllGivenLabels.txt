@Test public void shouldFindNodesWithAllGivenLabels() throws Exception {
  int labelId1=3;
  int labelId2=5;
  int labelId3=13;
  start();
  write(iterator(labelChanges(5,EMPTY_LONG_ARRAY,new long[]{labelId1,labelId2,labelId3}),labelChanges(8,EMPTY_LONG_ARRAY,new long[]{labelId3}),labelChanges(3,EMPTY_LONG_ARRAY,new long[]{labelId1}),labelChanges(6,EMPTY_LONG_ARRAY,new long[]{labelId2}),labelChanges(1,EMPTY_LONG_ARRAY,new long[]{labelId1}),labelChanges(7,EMPTY_LONG_ARRAY,new long[]{labelId2}),labelChanges(4,EMPTY_LONG_ARRAY,new long[]{labelId1,labelId3}),labelChanges(2,EMPTY_LONG_ARRAY,new long[]{labelId1,labelId2}),labelChanges(9,EMPTY_LONG_ARRAY,new long[]{labelId3})));
  try (LabelScanReader reader=store.newReader()){
    assertArrayEquals(new long[]{2,5},PrimitiveLongCollections.asArray(reader.nodesWithAllLabels(new int[]{labelId1,labelId2})));
    assertArrayEquals(new long[]{4,5},PrimitiveLongCollections.asArray(reader.nodesWithAllLabels(new int[]{labelId1,labelId3})));
    assertArrayEquals(new long[]{5},PrimitiveLongCollections.asArray(reader.nodesWithAllLabels(new int[]{labelId1,labelId2,labelId3})));
  }
 }
