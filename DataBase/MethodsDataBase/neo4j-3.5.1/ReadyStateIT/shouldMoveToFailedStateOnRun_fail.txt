@Test void shouldMoveToFailedStateOnRun_fail() throws Throwable {
  BoltStateMachineV3 machine=newStateMachine();
  machine.process(newHelloMessage(),nullResponseHandler());
  BoltResponseRecorder recorder=new BoltResponseRecorder();
  RunMessage runMessage=mock(RunMessage.class);
  when(runMessage.statement()).thenThrow(new RuntimeException("Fail"));
  machine.process(runMessage,recorder);
  assertThat(recorder.nextResponse(),failedWithStatus(Status.General.UnknownError));
  assertThat(machine.state(),instanceOf(FailedState.class));
}
