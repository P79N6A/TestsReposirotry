@Test void shouldMoveToStreamingOnRun_succ() throws Throwable {
  BoltStateMachineV3 machine=newStateMachine();
  machine.process(newHelloMessage(),nullResponseHandler());
  BoltResponseRecorder recorder=new BoltResponseRecorder();
  machine.process(new RunMessage("CREATE (n {k:'k'}) RETURN n.k",EMPTY_PARAMS),recorder);
  RecordedBoltResponse response=recorder.nextResponse();
  assertThat(response,succeeded());
  assertTrue(response.hasMetadata("fields"));
  assertTrue(response.hasMetadata("t_first"));
  assertThat(machine.state(),instanceOf(StreamingState.class));
}
