@Test public void shouldReportInitialStateAsFailedIfPopulationFailed() throws Exception {
  IndexSamplingConfig indexSamplingConfig=new IndexSamplingConfig(Config.defaults());
  withPopulator(indexProvider.getPopulator(descriptor,indexSamplingConfig),p -> {
    String failure="The contrived failure";
    p.markAsFailed(failure);
    p.close(false);
    assertEquals(FAILED,indexProvider.getInitialState(descriptor));
  }
,false);
}
