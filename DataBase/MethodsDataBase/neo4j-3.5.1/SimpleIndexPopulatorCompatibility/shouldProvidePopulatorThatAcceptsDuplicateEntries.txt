@Test public void shouldProvidePopulatorThatAcceptsDuplicateEntries() throws Exception {
  long offset=valueSet1.size();
  withPopulator(indexProvider.getPopulator(descriptor,indexSamplingConfig),p -> {
    p.add(updates(valueSet1,0));
    p.add(updates(valueSet1,offset));
  }
);
  try (IndexAccessor accessor=indexProvider.getOnlineAccessor(descriptor,indexSamplingConfig)){
    try (IndexReader reader=new QueryResultComparingIndexReader(accessor.newReader())){
      int propertyKeyId=descriptor.schema().getPropertyId();
      for (      NodeAndValue entry : valueSet1) {
        NodeValueIterator nodes=new NodeValueIterator();
        reader.query(nodes,IndexOrder.NONE,false,IndexQuery.exact(propertyKeyId,entry.value));
        assertEquals(entry.value.toString(),asSet(entry.nodeId,entry.nodeId + offset),PrimitiveLongCollections.toSet(nodes));
      }
    }
   }
 }
