@Test public void txReturnsCorrectIdWhenCommitted() throws Exception {
  executeDummyTxs(db,42);
  org.neo4j.internal.kernel.api.Transaction tx=newTransaction(AUTH_DISABLED);
  tx.dataWrite().nodeCreate();
  tx.success();
  long previousCommittedTxId=lastCommittedTxId(db);
  assertEquals(previousCommittedTxId + 1,tx.closeTransaction());
  assertFalse(tx.isOpen());
}
