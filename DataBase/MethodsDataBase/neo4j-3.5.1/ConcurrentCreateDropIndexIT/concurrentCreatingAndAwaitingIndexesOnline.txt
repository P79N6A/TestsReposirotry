@Test public void concurrentCreatingAndAwaitingIndexesOnline() throws Exception {
  ExecutorService executor=cleanupRule.add(Executors.newSingleThreadExecutor());
  Future<?> indexCreate=executor.submit(() -> {
    try (Transaction tx=db.beginTx()){
      db.schema().indexFor(label(0)).on(KEY).create();
      tx.success();
    }
   }
);
  while (!indexCreate.isDone()) {
    try (Transaction tx=db.beginTx()){
      db.schema().awaitIndexesOnline(1,TimeUnit.MINUTES);
      tx.success();
    }
   }
  indexCreate.get();
}
