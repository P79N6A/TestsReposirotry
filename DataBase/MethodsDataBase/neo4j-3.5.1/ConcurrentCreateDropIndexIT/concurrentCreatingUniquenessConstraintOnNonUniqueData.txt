@Test public void concurrentCreatingUniquenessConstraintOnNonUniqueData() throws Throwable {
  Label label=label(0);
  try (Transaction tx=db.beginTx()){
    for (int i=0; i < 2; i++) {
      db.createNode(label).setProperty(KEY,"A");
    }
    tx.success();
  }
   Race race=new Race().withMaxDuration(10,SECONDS);
  race.addContestants(3,() -> {
    try (Transaction tx=db.beginTx()){
      db.schema().constraintFor(label).assertPropertyIsUnique(KEY).create();
      tx.success();
    }
 catch (    TransientFailureException|ConstraintViolationException e) {
    }
  }
,100);
  race.go();
  try (Transaction tx=db.beginTx()){
    ConstraintDefinition constraint=singleOrNull(db.schema().getConstraints(label));
    assertNull(constraint);
    IndexDefinition index=singleOrNull(db.schema().getIndexes(label));
    assertNull(index);
    tx.success();
  }
 }
