@Test public void storeCopyShouldAllowAnotherStoreCopyButOnlyFirstShouldPerformBeforeAction() throws Exception {
  @SuppressWarnings("unchecked") ThrowingAction<IOException> action=mock(ThrowingAction.class);
  try (Resource lock=mutex.storeCopy(action)){
    verify(action,times(1)).apply();
    try (Resource otherLock=mutex.storeCopy(action)){
      verify(action,times(1)).apply();
    }
   }
 }
