@Test void concurrentFlushingWithFailuresMustNotPutInterleavedDataIntoFile(){
  assertTimeout(ofMillis(LONG_TIMEOUT_MILLIS),() -> {
    final RecordFormat recordFormat=new StandardRecordFormat();
    final int filePageCount=2_000;
    try (RandomPageCacheTestHarness harness=new RandomPageCacheTestHarness()){
      harness.setConcurrencyLevel(16);
      harness.setUseAdversarialIO(true);
      harness.setMischiefRate(0.0);
      harness.setFailureRate(0.5);
      harness.setErrorRate(0.0);
      harness.setCachePageCount(filePageCount / 2);
      harness.setFilePageCount(filePageCount);
      harness.setInitialMappedFiles(3);
      harness.setCommandCount(15_000);
      harness.setFileSystem(fs);
      harness.disableCommands(MapFile,UnmapFile,ReadRecord,ReadMulti);
      harness.setVerification(filesAreCorrectlyWrittenVerification(recordFormat,filePageCount));
      harness.run(LONG_TIMEOUT_MILLIS,MILLISECONDS);
    }
   }
);
}
