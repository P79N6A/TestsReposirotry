@Test @DisabledOnOs(OS.WINDOWS) void shouldGiveAClearErrorMessageIfTheArchivesParentDirectoryIsNotWritable() throws IOException {
  Path directory=testDirectory.directory("a-directory").toPath();
  Path archive=testDirectory.file("subdir/the-archive.dump").toPath();
  Files.createDirectories(archive.getParent());
  try (Closeable ignored=TestUtils.withPermissions(archive.getParent(),emptySet())){
    AccessDeniedException exception=assertThrows(AccessDeniedException.class,() -> new Dumper().dump(directory,directory,archive,Predicates.alwaysFalse()));
    assertEquals(archive.getParent().toString(),exception.getMessage());
  }
 }
