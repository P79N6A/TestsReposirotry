@Test public void shouldReleaseSearcherProperlyAfterVerifyingDeferredConstraints() throws Exception {
  populator=newPopulator();
  OtherThreadExecutor<Void> executor=cleanup.add(new OtherThreadExecutor<>("Deferred",null));
  executor.execute((WorkerCommand<Void,Void>)state -> {
    try (IndexUpdater updater=populator.newPopulatingUpdater(nodePropertyAccessor)){
    }
     return null;
  }
);
  executor.execute((WorkerCommand<Void,Void>)state -> {
    populator.verifyDeferredConstraints(nodePropertyAccessor);
    return null;
  }
);
  executor.execute((WorkerCommand<Void,Void>)state -> {
    try (IndexUpdater secondUpdater=populator.newPopulatingUpdater(nodePropertyAccessor)){
    }
     return null;
  }
,5,SECONDS);
}
