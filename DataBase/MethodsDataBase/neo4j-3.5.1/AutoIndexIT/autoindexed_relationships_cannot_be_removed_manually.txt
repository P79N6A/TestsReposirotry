/** 
 * It is not allowed to remove entries manually from automatic indexes.
 */
@Test @Graph(nodes={@NODE(name="I"),@NODE(name="you")},relationships={@REL(start="I",end="you",type="know",properties={@PROP(key="since",value="today")})},autoIndexRelationships=true) public void autoindexed_relationships_cannot_be_removed_manually(){
  try (Transaction tx=graphdb().beginTx()){
    data.get();
    tx.success();
  }
   try (Transaction tx=graphdb().beginTx()){
    ResourceIterable<Relationship> relationshipIterable=(ResourceIterable<Relationship>)data.get().get("I").getRelationships();
    long id;
    try (ResourceIterator<Relationship> resourceIterator=relationshipIterable.iterator()){
      id=resourceIterator.next().getId();
    }
     String indexName=graphdb().index().getRelationshipAutoIndexer().getAutoIndex().getName();
    gen.get().expectedStatus(405).delete(getDataUri() + "index/relationship/" + indexName+ "/since/today/"+ id).entity();
    gen.get().expectedStatus(405).delete(getDataUri() + "index/relationship/" + indexName+ "/since/"+ id).entity();
    gen.get().expectedStatus(405).delete(getDataUri() + "index/relationship/" + indexName+ "/"+ id).entity();
  }
 }
