@Test public void shouldFailBeforeCommitOnSizesLargerThanLimit(){
  createIndex(KEY);
  int length=5_000;
  try {
    try (Transaction tx=db.beginTx()){
      db.createNode(LABEL).setProperty(KEY,random.nextAlphaNumericString(length,length));
      tx.success();
    }
     fail("Should have failed");
  }
 catch (  IllegalArgumentException e) {
    assertThat(e.getMessage(),containsString("Property value size is too large for index. Please see index documentation for limitations."));
  }
}
