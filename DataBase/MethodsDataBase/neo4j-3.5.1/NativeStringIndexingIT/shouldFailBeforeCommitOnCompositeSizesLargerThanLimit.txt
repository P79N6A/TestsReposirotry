@Test public void shouldFailBeforeCommitOnCompositeSizesLargerThanLimit(){
  createIndex(KEY,KEY2);
  int length=50_000;
  try {
    try (Transaction tx=db.beginTx()){
      Node node=db.createNode(LABEL);
      node.setProperty(KEY,random.nextAlphaNumericString(length,length));
      node.setProperty(KEY2,random.nextAlphaNumericString(length,length));
      tx.success();
    }
     fail("Should have failed");
  }
 catch (  IllegalArgumentException e) {
    assertThat(e.getMessage(),containsString("Property value size is too large for index. Please see index documentation for limitations."));
  }
}
