@Test public void shouldGivePortConflictErrorWithPortNumberInIt() throws Throwable {
  int port=16000;
  try (ServerSocketChannel ignore=ServerSocketChannel.open().bind(new InetSocketAddress("localhost",port))){
    final ListenSocketAddress address=new ListenSocketAddress("localhost",port);
    exception.expect(PortBindException.class);
    Map<BoltConnector,NettyServer.ProtocolInitializer> initializersMap=genericMap(new BoltConnector("test"),protocolOnAddress(address));
    new NettyServer(new NamedThreadFactory("mythreads"),initializersMap,new ConnectorPortRegister(),NullLog.getInstance()).start();
  }
 }
