@Test void shouldLogErrorIfIsFatalError() throws Throwable {
  Neo4jPack.Packer packer=mock(Neo4jPack.Packer.class);
  Log log=mock(Log.class);
  FailureMessageEncoder encoder=new FailureMessageEncoder(log);
  QueryResult.Record value=mock(QueryResult.Record.class);
  when(value.fields()).thenReturn(new AnyValue[0]);
  FatalFailureMessage message=new FatalFailureMessage(Status.General.UnknownError,"I am an error message");
  encoder.encode(packer,message);
  verify(log).debug("Encoding a fatal failure message to send. Message: %s",message);
}
