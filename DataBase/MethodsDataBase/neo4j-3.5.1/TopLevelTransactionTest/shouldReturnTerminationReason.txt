@Test public void shouldReturnTerminationReason(){
  KernelTransaction kernelTransaction=mock(KernelTransaction.class);
  when(kernelTransaction.getReasonIfTerminated()).thenReturn(Optional.empty()).thenReturn(Optional.of(Status.Transaction.Terminated));
  TopLevelTransaction tx=new TopLevelTransaction(kernelTransaction);
  Optional<Status> terminationReason1=tx.terminationReason();
  Optional<Status> terminationReason2=tx.terminationReason();
  assertFalse(terminationReason1.isPresent());
  assertTrue(terminationReason2.isPresent());
  assertEquals(Status.Transaction.Terminated,terminationReason2.get());
}
