@Test public void shouldNotIncludeNodesDeletedInSameTxInIndexSeek(){
  createNodes(db,LABEL,nonMatching[0]);
  LongSet toDelete=createNodes(db,LABEL,values,nonMatching[1],nonMatching[2]);
  MutableLongSet expected=createNodes(db,LABEL,values);
  MutableLongSet found=new LongHashSet();
  try (Transaction tx=db.beginTx()){
    LongIterator deleting=toDelete.longIterator();
    while (deleting.hasNext()) {
      long id=deleting.next();
      db.getNodeById(id).delete();
      expected.remove(id);
    }
    collectNodes(found,indexSeek.findNodes(keys,values,db));
  }
   assertThat(found,equalTo(expected));
}
