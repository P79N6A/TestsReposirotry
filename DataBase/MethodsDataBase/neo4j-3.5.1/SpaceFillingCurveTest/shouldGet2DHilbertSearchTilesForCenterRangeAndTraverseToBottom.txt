@Test void shouldGet2DHilbertSearchTilesForCenterRangeAndTraverseToBottom(){
  TraverseToBottomConfiguration configuration=new TraverseToBottomConfiguration();
  Envelope envelope=new Envelope(-8,8,-8,8);
  for (int level=2; level <= 11; level++) {
    HilbertSpaceFillingCurve2D curve=new HilbertSpaceFillingCurve2D(envelope,level);
    double fullTile=curve.getTileWidth(0,level);
    double halfTile=fullTile / 2.0;
    Envelope centerWithoutOuterRing=new Envelope(envelope.getMin(0) + fullTile + halfTile,envelope.getMax(0) - fullTile - halfTile,envelope.getMin(1) + fullTile + halfTile,envelope.getMax(1) - fullTile - halfTile);
    long start=System.currentTimeMillis();
    List<SpaceFillingCurve.LongRange> result=curve.getTilesIntersectingEnvelope(centerWithoutOuterRing,configuration,null);
    logger.debug("Hilbert query at level " + level + " took "+ (System.currentTimeMillis() - start)+ "ms to produce "+ result.size()+ " tiles");
    assertTiles(result,tilesNotTouchingOuterRing(curve).toArray(new SpaceFillingCurve.LongRange[0]));
  }
}
