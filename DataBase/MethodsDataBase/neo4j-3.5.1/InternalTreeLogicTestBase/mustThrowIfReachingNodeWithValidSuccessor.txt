@Test public void mustThrowIfReachingNodeWithValidSuccessor() throws Exception {
  assumeTrue("No checkpointing, no successor",isCheckpointing);
  initialize();
  long someHighMultiplier=1000;
  for (int i=1; numberOfRootSplits < 1; i++) {
    long seed=i * someHighMultiplier;
    insert(key(seed),value(seed));
  }
  generationManager.checkpoint();
  goTo(readCursor,rootId);
  long leftmostChild=childAt(readCursor,0,stableGeneration,unstableGeneration);
  giveSuccessor(readCursor,leftmostChild);
  try {
    insert(key(0),value(0));
    fail("Expected insert to throw because child targeted for insertion has a valid new successor.");
  }
 catch (  TreeInconsistencyException e) {
    assertThat(e.getMessage(),containsString(PointerChecking.WRITER_TRAVERSE_OLD_STATE_MESSAGE));
  }
}
