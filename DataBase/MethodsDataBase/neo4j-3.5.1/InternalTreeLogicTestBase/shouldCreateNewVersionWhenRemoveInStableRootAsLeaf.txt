@Test public void shouldCreateNewVersionWhenRemoveInStableRootAsLeaf() throws Exception {
  assumeTrue("No checkpointing, no successor",isCheckpointing);
  initialize();
  KEY key=key(1L);
  VALUE value=value(10L);
  insert(key,value);
  long oldGenerationId=cursor.getCurrentPageId();
  generationManager.checkpoint();
  remove(key,dontCare);
  long successor=cursor.getCurrentPageId();
  goTo(readCursor,rootId);
  assertEquals(1,numberOfRootSuccessors);
  assertEquals(successor,structurePropagation.midChild);
  assertNotEquals(oldGenerationId,successor);
  assertEquals(0,keyCount());
  goTo(readCursor,oldGenerationId);
  assertEquals(successor,successor(readCursor,stableGeneration,unstableGeneration));
  assertEquals(1,keyCount());
}
