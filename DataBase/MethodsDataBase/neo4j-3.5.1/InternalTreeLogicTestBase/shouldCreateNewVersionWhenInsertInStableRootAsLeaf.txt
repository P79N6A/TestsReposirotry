@Test public void shouldCreateNewVersionWhenInsertInStableRootAsLeaf() throws Exception {
  assumeTrue("No checkpointing, no successor",isCheckpointing);
  initialize();
  long oldGenerationId=cursor.getCurrentPageId();
  generationManager.checkpoint();
  insert(key(1L),value(1L));
  long successor=cursor.getCurrentPageId();
  goTo(readCursor,rootId);
  assertEquals(1,numberOfRootSuccessors);
  assertEquals(successor,structurePropagation.midChild);
  assertNotEquals(oldGenerationId,successor);
  assertEquals(1,keyCount());
  goTo(readCursor,oldGenerationId);
  assertEquals(successor,successor(readCursor,stableGeneration,unstableGeneration));
  assertEquals(0,keyCount());
}
