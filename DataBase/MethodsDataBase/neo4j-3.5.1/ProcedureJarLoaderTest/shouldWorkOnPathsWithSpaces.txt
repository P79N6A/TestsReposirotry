@Test public void shouldWorkOnPathsWithSpaces() throws Exception {
  File fileWithSpacesInName=tmpdir.newFile(new Random().nextInt() + "  some spaces in the filename" + ".jar");
  URL theJar=new JarBuilder().createJarFor(fileWithSpacesInName,ClassWithOneProcedure.class);
  corruptJar(theJar);
  AssertableLogProvider logProvider=new AssertableLogProvider(true);
  ProcedureJarLoader jarloader=new ProcedureJarLoader(new ReflectiveProcedureCompiler(new TypeMappers(),new ComponentRegistry(),registryWithUnsafeAPI(),log,procedureConfig()),logProvider.getLog(ProcedureJarLoader.class));
  try {
    jarloader.loadProceduresFromDir(parentDir(theJar));
    fail("Should have logged and thrown exception.");
  }
 catch (  ZipException expected) {
    logProvider.assertContainsLogCallContaining(escapeJava(String.format("Plugin jar file: %s corrupted.",fileWithSpacesInName.toPath())));
  }
}
