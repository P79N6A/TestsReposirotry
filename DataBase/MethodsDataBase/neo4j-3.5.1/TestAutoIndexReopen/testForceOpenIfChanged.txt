@Test public void testForceOpenIfChanged(){
  try (Transaction tx=graphDb.beginTx()){
    Node node1=graphDb.getNodeById(id1);
    Node node2=graphDb.getNodeById(id2);
    Node node3=graphDb.getNodeById(id3);
    node1.setProperty("np2","test property");
    node1.getRelationships(RelationshipType.withName("FOO")).forEach(Relationship::delete);
    Relationship rel;
    try (IndexHits<Relationship> hits=relationShipAutoIndex().get("type","FOO",node1,node3)){
      assertEquals(0,hits.size());
    }
     rel=node1.createRelationshipTo(node3,RelationshipType.withName("FOO"));
    rel.setProperty("type","FOO");
    try (IndexHits<Relationship> indexHits=relationShipAutoIndex().get("type","FOO",node1,node2)){
      assertEquals(0,indexHits.size());
    }
     rel=node1.createRelationshipTo(node2,RelationshipType.withName("FOO"));
    rel.setProperty("type","FOO");
    try (IndexHits<Relationship> relationships=relationShipAutoIndex().get("type","FOO",node1,node2)){
      assertEquals(1,relationships.size());
    }
     tx.success();
  }
 }
