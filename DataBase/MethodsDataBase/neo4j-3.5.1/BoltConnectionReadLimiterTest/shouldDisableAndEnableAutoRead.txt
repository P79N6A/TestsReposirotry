@Test public void shouldDisableAndEnableAutoRead(){
  int lowWatermark=3;
  int highWatermark=5;
  BoltConnectionReadLimiter limiter=newLimiter(lowWatermark,highWatermark);
  assertTrue(channel.config().isAutoRead());
  for (int i=0; i < highWatermark + 1; i++) {
    limiter.enqueued(connection,job);
  }
  assertFalse(channel.config().isAutoRead());
  limiter.drained(connection,singleton(job));
  assertFalse(channel.config().isAutoRead());
  limiter.drained(connection,singleton(job));
  assertFalse(channel.config().isAutoRead());
  limiter.drained(connection,singleton(job));
  assertTrue(channel.config().isAutoRead());
  for (int i=0; i < 3; i++) {
    limiter.enqueued(connection,job);
  }
  assertFalse(channel.config().isAutoRead());
  limiter.drained(connection,Arrays.asList(job,job,job,job,job,job));
  assertTrue(channel.config().isAutoRead());
}
