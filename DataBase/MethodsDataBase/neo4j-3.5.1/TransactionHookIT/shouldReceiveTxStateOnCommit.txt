@Test public void shouldReceiveTxStateOnCommit() throws Exception {
  TransactionHook hook=mock(TransactionHook.class);
  internalKernel().registerTransactionHook(hook);
  Write ops=dataWriteInNewTransaction();
  ops.nodeCreate();
  commit();
  verify(hook).beforeCommit(any(ReadableTransactionState.class),any(KernelTransaction.class),any(StorageReader.class));
  verify(hook).afterCommit(any(ReadableTransactionState.class),any(KernelTransaction.class),any());
  verifyNoMoreInteractions(hook);
}
