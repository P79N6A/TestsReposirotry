@Test public void shouldBeAbleToRemoveResetAndTwiceRemovePropertyOnRelationship() throws Exception {
  Transaction transaction=newTransaction(AnonymousContext.writeToken());
  int prop=transaction.tokenWrite().propertyKeyGetOrCreateForName("foo");
  int type=transaction.tokenWrite().relationshipTypeGetOrCreateForName("RELATED");
  long startNodeId=transaction.dataWrite().nodeCreate();
  long endNodeId=transaction.dataWrite().nodeCreate();
  long rel=transaction.dataWrite().relationshipCreate(startNodeId,type,endNodeId);
  transaction.dataWrite().relationshipSetProperty(rel,prop,Values.of("bar"));
  commit();
  Write write=dataWriteInNewTransaction();
  write.relationshipRemoveProperty(rel,prop);
  write.relationshipSetProperty(rel,prop,Values.of("bar"));
  write.relationshipRemoveProperty(rel,prop);
  write.relationshipRemoveProperty(rel,prop);
  commit();
  transaction=newTransaction();
  assertThat(relationshipGetProperty(transaction,rel,prop),equalTo(Values.NO_VALUE));
  commit();
}
