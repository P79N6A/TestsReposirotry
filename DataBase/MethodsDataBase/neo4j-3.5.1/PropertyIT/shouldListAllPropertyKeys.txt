@Test public void shouldListAllPropertyKeys() throws Exception {
  dbWithNoCache();
  Transaction transaction=newTransaction(AnonymousContext.writeToken());
  int prop1=transaction.tokenWrite().propertyKeyGetOrCreateForName("prop1");
  int prop2=transaction.tokenWrite().propertyKeyGetOrCreateForName("prop2");
  Iterator<NamedToken> propIdsBeforeCommit=transaction.tokenRead().propertyKeyGetAllTokens();
  assertThat(asCollection(propIdsBeforeCommit),hasItems(new NamedToken("prop1",prop1),new NamedToken("prop2",prop2)));
  commit();
  transaction=newTransaction();
  Iterator<NamedToken> propIdsAfterCommit=transaction.tokenRead().propertyKeyGetAllTokens();
  assertThat(asCollection(propIdsAfterCommit),hasItems(new NamedToken("prop1",prop1),new NamedToken("prop2",prop2)));
  commit();
}
