@Test public void shouldExitOnErrorInHalt() throws Exception {
  PageCache pageCache=mock(PageCache.class);
  RuntimeException failure=new RuntimeException();
  doAnswer(invocation -> {
    throw failure;
  }
).when(pageCache).flushAndForce();
  PageCacheFlusher flusher=new PageCacheFlusher(pageCache);
  flusher.run();
  try {
    flusher.halt();
    fail();
  }
 catch (  RuntimeException e) {
    assertSame(failure,e);
  }
}
