@Test public void testSchemaIndexMatchIndexingService() throws IndexNotFoundKernelException {
  try (Transaction transaction=database.beginTx()){
    database.schema().constraintFor(Label.label(CLOTHES_LABEL)).assertPropertyIsUnique(PROPERTY_NAME).create();
    database.schema().indexFor(Label.label(WEATHER_LABEL)).on(PROPERTY_NAME).create();
    transaction.success();
  }
   try (Transaction ignored=database.beginTx()){
    database.schema().awaitIndexesOnline(1,TimeUnit.MINUTES);
  }
   IndexingService indexingService=getIndexingService(database);
  int clothedLabelId=getLabelId(CLOTHES_LABEL);
  int weatherLabelId=getLabelId(WEATHER_LABEL);
  int propertyId=getPropertyKeyId(PROPERTY_NAME);
  IndexProxy clothesIndex=indexingService.getIndexProxy(forLabel(clothedLabelId,propertyId));
  IndexProxy weatherIndex=indexingService.getIndexProxy(forLabel(weatherLabelId,propertyId));
  assertEquals(InternalIndexState.ONLINE,clothesIndex.getState());
  assertEquals(InternalIndexState.ONLINE,weatherIndex.getState());
}
