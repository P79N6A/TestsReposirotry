/** 
 * https://github.com/neo4j/neo4j/issues/1279 
 */
@Test public void shouldInsertLabelsWithoutDuplicatingThem(){
  final Node node=dbRule.executeAndCommit((Function<GraphDatabaseService,Node>)GraphDatabaseService::createNode);
  dbRule.executeAndCommit(db -> {
    node.addLabel(label("FOOBAR"));
  }
);
  dbRule.executeAndCommit(db -> {
    node.addLabel(label("BAZQUX"));
  }
);
  dbRule.executeAndCommit(db -> {
    for (    Label label : node.getLabels()) {
      node.removeLabel(label);
    }
    node.addLabel(label("BAZQUX"));
  }
);
  List<Label> labels=dbRule.executeAndCommit(db -> {
    List<Label> labels1=new ArrayList<>();
    for (    Label label : node.getLabels()) {
      labels1.add(label);
    }
    return labels1;
  }
);
  assertEquals(labels.toString(),1,labels.size());
  assertEquals("BAZQUX",labels.get(0).name());
}
