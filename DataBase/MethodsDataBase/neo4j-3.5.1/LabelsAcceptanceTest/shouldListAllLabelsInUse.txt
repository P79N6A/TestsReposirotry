@Test public void shouldListAllLabelsInUse(){
  GraphDatabaseService db=dbRule.getGraphDatabaseAPI();
  createNode(db,Labels.MY_LABEL);
  Node node=createNode(db,Labels.MY_OTHER_LABEL);
  try (Transaction tx=db.beginTx()){
    node.delete();
    tx.success();
  }
   List<Label> labels=null;
  try (Transaction tx=db.beginTx()){
    labels=asList(db.getAllLabelsInUse());
  }
   assertEquals(1,labels.size());
  assertThat(map(Label::name,labels),hasItems(Labels.MY_LABEL.name()));
}
