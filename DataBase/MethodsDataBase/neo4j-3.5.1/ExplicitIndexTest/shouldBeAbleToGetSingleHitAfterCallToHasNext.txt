@Test public void shouldBeAbleToGetSingleHitAfterCallToHasNext(){
  GraphDatabaseService db=new TestGraphDatabaseFactory().newImpermanentDatabase();
  try {
    Index<Node> nodeIndex;
    Index<Relationship> relationshipIndex;
    try (Transaction tx=db.beginTx()){
      nodeIndex=db.index().forNodes("MyIndex");
      relationshipIndex=db.index().forRelationships("MyIndex");
      tx.success();
    }
     String key="key";
    String value="value";
    Node node;
    Relationship relationship;
    try (Transaction tx=db.beginTx()){
      node=db.createNode();
      nodeIndex.add(node,key,value);
      relationship=node.createRelationshipTo(node,MyRelTypes.TEST);
      relationshipIndex.add(relationship,key,value);
      tx.success();
    }
     assertFindSingleHit(db,nodeIndex,key,value,node);
    assertFindSingleHit(db,relationshipIndex,key,value,relationship);
  }
  finally {
    db.shutdown();
  }
}
