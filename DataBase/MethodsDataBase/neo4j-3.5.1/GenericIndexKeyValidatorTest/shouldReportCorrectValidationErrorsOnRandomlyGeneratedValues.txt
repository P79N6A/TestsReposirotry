@Test public void shouldReportCorrectValidationErrorsOnRandomlyGeneratedValues(){
  int slots=random.nextInt(1,6);
  int maxLength=random.nextInt(15,30) * slots;
  GenericLayout layout=new GenericLayout(slots,spatialSettings());
  GenericIndexKeyValidator validator=new GenericIndexKeyValidator(maxLength,layout);
  GenericKey key=layout.newKey();
  int countOk=0;
  int countNotOk=0;
  for (int i=0; i < 100; i++) {
    Value[] tuple=generateValueTuple(slots);
    boolean isOk;
    try {
      validator.validate(tuple);
      isOk=true;
      countOk++;
    }
 catch (    IllegalArgumentException e) {
      isOk=false;
      countNotOk++;
    }
    int actualSize=actualSize(tuple,key);
    boolean manualIsOk=actualSize <= maxLength;
    if (manualIsOk != isOk) {
      fail(format("Validator not validating %s correctly. Manual validation on actual key resulted in %b whereas validator said %b",Arrays.toString(tuple),manualIsOk,isOk));
    }
  }
}
