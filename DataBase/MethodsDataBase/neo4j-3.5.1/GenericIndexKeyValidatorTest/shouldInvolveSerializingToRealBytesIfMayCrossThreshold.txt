@Test public void shouldInvolveSerializingToRealBytesIfMayCrossThreshold(){
  Layout<GenericKey,NativeIndexValue> layout=mock(Layout.class);
  when(layout.newKey()).thenReturn(new CompositeGenericKey(3,spatialSettings()));
  GenericIndexKeyValidator validator=new GenericIndexKeyValidator(48,layout);
  try {
    validator.validate(new Value[]{intValue(10),epochDate(100),stringValue("abcdefghijklmnopqrstuvw")});
    fail("Should have failed");
  }
 catch (  IllegalArgumentException e) {
    assertThat(e.getMessage(),containsString("abcdefghijklmnopqrstuvw"));
    verify(layout,times(1)).newKey();
  }
}
