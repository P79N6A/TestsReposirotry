@Test void shouldExcludeWholeDirectoriesMatchedByTheExclusionPredicate() throws IOException, IncorrectFormat {
  Path directory=testDirectory.directory("a-directory").toPath();
  Path subdir=directory.resolve("subdir");
  Files.createDirectories(subdir);
  Files.write(subdir.resolve("a-file"),new byte[0]);
  Path archive=testDirectory.file("the-archive.dump").toPath();
  new Dumper().dump(directory,directory,archive,path -> path.getFileName().toString().equals("subdir"));
  Path newDirectory=testDirectory.file("the-new-directory").toPath();
  new Loader().load(archive,newDirectory,newDirectory);
  Path expectedOutput=testDirectory.directory("expected-output").toPath();
  Files.createDirectories(expectedOutput);
  assertEquals(describeRecursively(expectedOutput),describeRecursively(newDirectory));
}
