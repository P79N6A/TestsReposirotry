@Test public void shouldEnforceUniquenessConstraintOnAddLabelForStringProperty() throws Exception {
  constrainedNode("Label1","key1","value1");
  Transaction transaction=newTransaction(AnonymousContext.writeToken());
  long node=createNode(transaction,"key1","value1");
  try {
    int label=transaction.tokenWrite().labelGetOrCreateForName("Label1");
    transaction.dataWrite().nodeAddLabel(node,label);
    fail("should have thrown exception");
  }
 catch (  UniquePropertyValueValidationException e) {
    assertThat(e.getUserMessage(tokenLookup(transaction)),containsString("`key1` = 'value1'"));
  }
  commit();
}
