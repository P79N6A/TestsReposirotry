@Test public void shouldPreventConflictingDataInSameTransaction() throws Exception {
  constrainedNode("Label1","key1","value1");
  Transaction transaction=newTransaction(AnonymousContext.writeToken());
  createLabeledNode(transaction,"Label1","key1","value2");
  try {
    createLabeledNode(transaction,"Label1","key1","value2");
    fail("expected exception");
  }
 catch (  UniquePropertyValueValidationException e) {
    assertThat(e.getUserMessage(tokenLookup(transaction)),containsString("`key1` = 'value2'"));
  }
  commit();
}
