@Test void createContextWithCustomIdGeneratorFactoryWhenProvided(){
  IdGeneratorFactory idGeneratorFactory=mock(IdGeneratorFactory.class);
  IdContextFactory contextFactory=IdContextFactoryBuilder.of(fs,jobScheduler).withIdGenerationFactoryProvider(any -> idGeneratorFactory).build();
  DatabaseIdContext idContext=contextFactory.createIdContext("database");
  IdGeneratorFactory bufferedGeneratorFactory=idContext.getIdGeneratorFactory();
  assertThat(idContext.getIdController(),instanceOf(BufferedIdController.class));
  assertThat(bufferedGeneratorFactory,instanceOf(BufferingIdGeneratorFactory.class));
  ((BufferingIdGeneratorFactory)bufferedGeneratorFactory).initialize(() -> mock(KernelTransactionsSnapshot.class));
  File file=testDirectory.file("a");
  IdType idType=IdType.NODE;
  LongSupplier highIdSupplier=() -> 0;
  int maxId=100;
  idGeneratorFactory.open(file,idType,highIdSupplier,maxId);
  verify(idGeneratorFactory).open(file,idType,highIdSupplier,maxId);
}
