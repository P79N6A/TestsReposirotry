@Test public void shouldLogJobFailure() throws Exception {
  createNode(map(name,"irrelephant"),FIRST);
  AssertableLogProvider logProvider=new AssertableLogProvider();
  FlippableIndexProxy index=mock(FlippableIndexProxy.class);
  IndexPopulator populator=spy(indexPopulator(false));
  IndexPopulationJob job=newIndexPopulationJob(populator,index,indexStoreView,logProvider,EntityType.NODE,indexDescriptor(FIRST,name,false));
  Throwable failure=new IllegalStateException("not successful");
  doThrow(failure).when(populator).create();
  job.run();
  LogMatcherBuilder match=inLog(IndexPopulationJob.class);
  logProvider.assertAtLeastOnce(match.error(is("Failed to populate index: [:FIRST(name)]"),sameInstance(failure)));
}
