@Test public void shouldRejectIfWrongPreamble(){
  BoltProtocol protocol=newBoltProtocol(1);
  BoltProtocolFactory handlerFactory=newProtocolFactory(1,protocol);
  EmbeddedChannel channel=new EmbeddedChannel(new ProtocolHandshaker(handlerFactory,boltChannel,logProvider,false,true));
  ByteBuf input=Unpooled.wrappedBuffer(new byte[]{(byte)0xDE,(byte)0xAB,(byte)0xCD,(byte)0xEF},new byte[]{0,0,0,1},new byte[]{0,0,0,2},new byte[]{0,0,0,3},new byte[]{0,0,0,4});
  channel.writeInbound(input);
  assertEquals(0,channel.outboundMessages().size());
  assertFalse(channel.isActive());
  verify(protocol,never()).install();
}
