@Test public void shouldNotAllowCreationOfConstraintsWhenInHA() throws Exception {
  GraphDatabaseAPI db=new FakeHaDatabase();
  ThreadToStatementContextBridge stmtBridge=db.getDependencyResolver().resolveDependency(ThreadToStatementContextBridge.class);
  try (Transaction ignored=db.beginTx()){
    KernelTransaction ktx=stmtBridge.getKernelTransactionBoundToThisThread(true);
    try {
      ktx.schemaWrite().uniquePropertyConstraintCreate(forLabel(1,1));
      fail("expected exception here");
    }
 catch (    InvalidTransactionTypeKernelException e) {
      assertThat(e.getMessage(),containsString("HA"));
    }
  }
   db.shutdown();
}
