@Test public void populateNativeLabelScanIndexDuringMigration() throws IOException {
  prepare34DatabaseWithNodes();
  indexMigrator.migrate(databaseLayout,migrationLayout,progressReporter,StandardV3_4.STORE_VERSION,StandardV3_4.STORE_VERSION);
  indexMigrator.moveMigratedFiles(migrationLayout,databaseLayout,StandardV2_3.STORE_VERSION,StandardV3_2.STORE_VERSION);
  try (Lifespan lifespan=new Lifespan()){
    NativeLabelScanStore labelScanStore=getNativeLabelScanStore(databaseLayout,true);
    lifespan.add(labelScanStore);
    for (int labelId=0; labelId < 10; labelId++) {
      try (LabelScanReader labelScanReader=labelScanStore.newReader()){
        int nodeCount=PrimitiveLongCollections.count(labelScanReader.nodesWithLabel(labelId));
        assertEquals(format("Expected to see only one node for label %d but was %d.",labelId,nodeCount),1,nodeCount);
      }
     }
  }
 }
