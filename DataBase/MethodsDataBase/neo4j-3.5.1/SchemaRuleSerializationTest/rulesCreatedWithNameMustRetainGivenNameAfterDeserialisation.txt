@Test public void rulesCreatedWithNameMustRetainGivenNameAfterDeserialisation() throws Exception {
  String name="custom_rule";
  assertThat(serialiseAndDeserialise(namedForLabel(name,LABEL_ID,PROPERTY_ID_1).withId(RULE_ID)).getName(),is(name));
  assertThat(serialiseAndDeserialise(namedUniqueForLabel(name,LABEL_ID,PROPERTY_ID_1).withIds(RULE_ID_2,RULE_ID)).getName(),is(name));
  assertThat(serialiseAndDeserialise(namedForLabel(name,LABEL_ID,PROPERTY_ID_1,PROPERTY_ID_2).withId(RULE_ID)).getName(),is(name));
  assertThat(serialiseAndDeserialise(namedUniqueForLabel(name,LABEL_ID,PROPERTY_ID_1,PROPERTY_ID_2).withIds(RULE_ID_2,RULE_ID)).getName(),is(name));
  assertThat(serialiseAndDeserialise(namedForLabel(name,LABEL_ID,IntStream.range(1,200).toArray()).withId(RULE_ID)).getName(),is(name));
  assertThat(serialiseAndDeserialise(ConstraintRule.constraintRule(RULE_ID,ConstraintDescriptorFactory.existsForLabel(LABEL_ID,PROPERTY_ID_1),name)).getName(),is(name));
  assertThat(serialiseAndDeserialise(ConstraintRule.constraintRule(RULE_ID_2,ConstraintDescriptorFactory.uniqueForLabel(LABEL_ID,PROPERTY_ID_1),RULE_ID,name)).getName(),is(name));
  assertThat(serialiseAndDeserialise(ConstraintRule.constraintRule(RULE_ID_2,ConstraintDescriptorFactory.nodeKeyForLabel(LABEL_ID,PROPERTY_ID_1),RULE_ID,name)).getName(),is(name));
  assertThat(serialiseAndDeserialise(ConstraintRule.constraintRule(RULE_ID_2,ConstraintDescriptorFactory.existsForRelType(REL_TYPE_ID,PROPERTY_ID_1),name)).getName(),is(name));
  assertThat(serialiseAndDeserialise(ConstraintRule.constraintRule(RULE_ID,ConstraintDescriptorFactory.existsForLabel(LABEL_ID,PROPERTY_ID_1,PROPERTY_ID_2),name)).getName(),is(name));
  assertThat(serialiseAndDeserialise(ConstraintRule.constraintRule(RULE_ID_2,ConstraintDescriptorFactory.existsForRelType(REL_TYPE_ID,PROPERTY_ID_1,PROPERTY_ID_2),name)).getName(),is(name));
}
