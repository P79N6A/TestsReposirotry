@Test public void failToLockSameFolderAcrossIndependentLockers() throws Exception {
  StoreLayout storeLayout=testDirectory.storeLayout();
  try (GlobalStoreLocker storeLocker=new GlobalStoreLocker(fileSystemRule.get(),storeLayout)){
    storeLocker.checkLock();
    try (GlobalStoreLocker locker=new GlobalStoreLocker(fileSystemRule.get(),storeLayout)){
      locker.checkLock();
      fail("directory should be locked");
    }
 catch (    StoreLockException expected) {
    }
    try (GlobalStoreLocker locker=new GlobalStoreLocker(fileSystemRule.get(),storeLayout)){
      locker.checkLock();
      fail("directory should be locked");
    }
 catch (    StoreLockException expected) {
    }
  }
 }
