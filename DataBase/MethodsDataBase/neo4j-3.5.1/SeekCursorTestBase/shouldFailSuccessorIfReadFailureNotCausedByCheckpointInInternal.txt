@Test void shouldFailSuccessorIfReadFailureNotCausedByCheckpointInInternal() throws Exception {
  long i=0L;
  while (numberOfRootSplits == 0) {
    insert(i);
    i++;
  }
  long oldRootId=rootId;
  long oldStableGeneration=stableGeneration;
  long oldUnstableGeneration=unstableGeneration;
  checkpoint();
  int keyCount=TreeNode.keyCount(cursor);
  while (keyCount(rootId) == keyCount) {
    insert(i);
    i++;
  }
  cursor.next(oldRootId);
  corruptGSPP(cursor,TreeNode.BYTE_POS_SUCCESSOR);
  PageAwareByteArrayCursor pageCursorForSeeker=cursor.duplicate(oldRootId);
  pageCursorForSeeker.next();
  long position=i;
  assertThrows(TreeInconsistencyException.class,() -> seekCursor(position,position + 1,pageCursorForSeeker,oldStableGeneration,oldUnstableGeneration));
}
