@Test void shouldRereadSuccessorIfReadFailureCausedByCheckpointInInternal() throws Exception {
  long i=0L;
  while (numberOfRootSplits == 0) {
    insert(i);
    i++;
  }
  long oldRootId=rootId;
  long oldStableGeneration=stableGeneration;
  long oldUnstableGeneration=unstableGeneration;
  checkpoint();
  int keyCount=TreeNode.keyCount(cursor);
  while (keyCount(rootId) == keyCount) {
    insert(i);
    i++;
  }
  TreeNode.goTo(cursor,"root",rootId);
  long rightChild=childAt(cursor,2,stableGeneration,unstableGeneration);
  PageAwareByteArrayCursor pageCursorForSeeker=cursor.duplicate(oldRootId);
  BreadcrumbPageCursor breadcrumbCursor=new BreadcrumbPageCursor(pageCursorForSeeker);
  breadcrumbCursor.next();
  try (SeekCursor<KEY,VALUE> seek=seekCursor(i,i + 1,breadcrumbCursor,oldStableGeneration,oldUnstableGeneration)){
    while (seek.next()) {
    }
  }
   assertEquals(Arrays.asList(oldRootId,rootId,rightChild),breadcrumbCursor.getBreadcrumbs());
}
