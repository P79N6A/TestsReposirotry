@Test public void databaseErrorShouldLogFullMessageInDebugLogAndHelpfulPointerInUserLog(){
  AssertableLogProvider userLog=new AssertableLogProvider();
  AssertableLogProvider internalLog=new AssertableLogProvider();
  ErrorReporter reporter=newErrorReporter(userLog,internalLog);
  Neo4jError error=Neo4jError.fatalFrom(new TestDatabaseError());
  UUID reference=error.reference();
  reporter.report(error);
  userLog.assertContainsLogCallContaining("Client triggered an unexpected error");
  userLog.assertContainsLogCallContaining(reference.toString());
  userLog.assertContainsLogCallContaining("Database error");
  internalLog.assertContainsLogCallContaining(reference.toString());
  internalLog.assertContainsLogCallContaining("Database error");
}
