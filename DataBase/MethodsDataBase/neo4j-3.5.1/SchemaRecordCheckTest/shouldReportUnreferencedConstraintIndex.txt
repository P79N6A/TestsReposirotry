@Test void shouldReportUnreferencedConstraintIndex() throws Exception {
  int ruleId=0;
  DynamicRecord record=inUse(dynamicRecord(ruleId));
  IndexProviderDescriptor providerDescriptor=new IndexProviderDescriptor("in-memory","1.0");
  StoreIndexDescriptor rule=constraintIndexRule(ruleId,labelId,propertyKeyId,providerDescriptor,(long)ruleId);
  when(checker().ruleAccess.loadSingleSchemaRule(ruleId)).thenReturn(rule);
  add(inUse(new LabelTokenRecord(labelId)));
  add(inUse(new PropertyKeyTokenRecord(propertyKeyId)));
  check(record);
  SchemaRecordCheck obligationChecker=checker().forObligationChecking();
  ConsistencyReport.SchemaConsistencyReport report=check(obligationChecker,record);
  verify(report).missingObligation(SchemaRule.Kind.UNIQUENESS_CONSTRAINT);
}
