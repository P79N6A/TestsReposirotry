@Test public void doNotRebuildIfOpenedInReadOnlyModeAndIndexIsNotClean() throws IOException {
  PageCache pageCache=pageCacheRule.getPageCache(fileSystemRule.get());
  createDirtyIndex(pageCache);
  Monitors monitors=new Monitors();
  RecordingMonitor monitor=new RecordingMonitor();
  monitors.addMonitorListener(monitor);
  NativeLabelScanStore nativeLabelScanStore=new NativeLabelScanStore(pageCache,testDirectory.databaseLayout(),fileSystemRule.get(),EMPTY,true,monitors,ignore());
  nativeLabelScanStore.init();
  nativeLabelScanStore.start();
  assertTrue(monitor.notValid);
  assertFalse(monitor.rebuilt);
  assertFalse(monitor.rebuilding);
  nativeLabelScanStore.shutdown();
}
