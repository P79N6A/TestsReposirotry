@Test @Title("Retrieve query metadata") @Documented("By passing in an additional GET parameter when you execute Cypher queries, metadata about the " + "query will be returned, such as how many labels were added or removed by the query.") @Graph(nodes={@NODE(name="I",setNameProperty=true,labels={@LABEL("Director")})}) public void testQueryStatistics() throws JsonParseException {
  String script=createScript("MATCH (n {name: 'I'}) SET n:Actor REMOVE n:Director RETURN labels(n)");
  Map<String,Object> output=jsonToMap(doCypherRestCall(cypherUri() + "?includeStats=true",script,Status.OK));
  @SuppressWarnings("unchecked") Map<String,Object> stats=(Map<String,Object>)output.get("stats");
  assertThat(stats,isA(Map.class));
  assertThat(stats.get("contains_updates"),is(true));
  assertThat(stats.get("labels_added"),is(1));
  assertThat(stats.get("labels_removed"),is(1));
  assertThat(stats.get("nodes_created"),is(0));
  assertThat(stats.get("nodes_deleted"),is(0));
  assertThat(stats.get("properties_set"),is(0));
  assertThat(stats.get("relationships_created"),is(0));
  assertThat(stats.get("relationship_deleted"),is(0));
}
