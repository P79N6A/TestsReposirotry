@Test public void shouldNotFindDeletedNodeInCompositeIndex() throws Exception {
  boolean needsValues=false;
  int label=token.nodeLabel("Person");
  int firstName=token.propertyKey("firstname");
  int surname=token.propertyKey("surname");
  IndexReference index=schemaRead.index(label,firstName,surname);
  try (org.neo4j.internal.kernel.api.Transaction tx=beginTransaction();NodeValueIndexCursor node=cursors.allocateNodeValueIndexCursor()){
    tx.dataWrite().nodeDelete(jackDalton);
    tx.dataRead().nodeIndexSeek(index,node,IndexOrder.NONE,needsValues,IndexQuery.exact(firstName,"Jack"),IndexQuery.exact(surname,"Dalton"));
    assertFalse(node.next());
  }
 }
