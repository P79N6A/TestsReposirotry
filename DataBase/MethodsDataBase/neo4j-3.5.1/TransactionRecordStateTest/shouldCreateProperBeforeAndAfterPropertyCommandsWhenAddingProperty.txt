@Test public void shouldCreateProperBeforeAndAfterPropertyCommandsWhenAddingProperty() throws Exception {
  NeoStores neoStores=neoStoresRule.builder().build();
  TransactionRecordState recordState=newTransactionRecordState(neoStores);
  int nodeId=1;
  recordState.nodeCreate(nodeId);
  recordState.nodeAddProperty(nodeId,propertyId1,value1);
  Collection<StorageCommand> commands=new ArrayList<>();
  recordState.extractCommands(commands);
  PropertyCommand propertyCommand=singlePropertyCommand(commands);
  PropertyRecord before=propertyCommand.getBefore();
  assertFalse(before.inUse());
  assertFalse(before.iterator().hasNext());
  PropertyRecord after=propertyCommand.getAfter();
  assertTrue(after.inUse());
  assertEquals(1,count(after));
}
