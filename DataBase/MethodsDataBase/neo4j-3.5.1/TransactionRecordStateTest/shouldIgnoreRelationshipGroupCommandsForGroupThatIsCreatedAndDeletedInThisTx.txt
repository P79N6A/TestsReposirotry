@Test public void shouldIgnoreRelationshipGroupCommandsForGroupThatIsCreatedAndDeletedInThisTx() throws Exception {
  NeoStores neoStore=neoStoresRule.builder().with(GraphDatabaseSettings.dense_node_threshold.name(),"5").build();
  int relationshipA=0;
  int relationshipB=1;
  TransactionRecordState state=newTransactionRecordState(neoStore);
  state.nodeCreate(0);
  state.relCreate(0,relationshipA,0,0);
  state.relCreate(1,relationshipA,0,0);
  state.relCreate(2,relationshipA,0,0);
  state.relCreate(3,relationshipA,0,0);
  state.relCreate(4,relationshipB,0,0);
  apply(neoStore,state);
  state=newTransactionRecordState(neoStore);
  state.relCreate(5,relationshipA,0,0);
  state.relDelete(4);
  Collection<StorageCommand> commands=new ArrayList<>();
  state.extractCommands(commands);
  RelationshipGroupCommand group=singleRelationshipGroupCommand(commands);
  assertEquals(relationshipA,group.getAfter().getType());
}
