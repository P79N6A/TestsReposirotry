@Test public void shouldConsultUnsatisfiedDependencyHandlerOnMissingDependencies(){
  KernelContext context=mock(KernelContext.class);
  KernelExtensionFailureStrategy handler=mock(KernelExtensionFailureStrategy.class);
  Dependencies dependencies=new Dependencies();
  TestingExtensionFactory extensionFactory=new TestingExtensionFactory();
  GlobalKernelExtensions extensions=new GlobalKernelExtensions(context,iterable(extensionFactory),dependencies,handler);
  LifeSupport life=new LifeSupport();
  life.add(extensions);
  try {
    life.start();
    verify(handler).handle(eq(extensionFactory),any(UnsatisfiedDependencyException.class));
  }
  finally {
    life.shutdown();
  }
}
