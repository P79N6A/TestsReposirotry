@Test public void shouldConsultUnsatisfiedDependencyHandlerOnFailingDependencyClasses(){
  KernelContext context=mock(KernelContext.class);
  KernelExtensionFailureStrategy handler=mock(KernelExtensionFailureStrategy.class);
  Dependencies dependencies=new Dependencies();
  UninitializableKernelExtensionFactory extensionFactory=new UninitializableKernelExtensionFactory();
  GlobalKernelExtensions extensions=new GlobalKernelExtensions(context,iterable(extensionFactory),dependencies,handler);
  LifeSupport life=new LifeSupport();
  life.add(extensions);
  try {
    life.start();
    verify(handler).handle(eq(extensionFactory),any(IllegalArgumentException.class));
  }
  finally {
    life.shutdown();
  }
}
