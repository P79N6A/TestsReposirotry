@Test public void shouldHandleMessagesWithIncorrectFields() throws Throwable {
  final RecordingByteChannel rawData=new RecordingByteChannel();
  final PackStream.Packer packer=new PackStream.Packer(new BufferedChannelOutput(rawData));
  packer.packStructHeader(2,RunMessage.SIGNATURE);
  packer.pack("RETURN 1");
  packer.pack(1234);
  packer.flush();
  byte[] invalidMessage=rawData.getBytes();
  connection.connect(address).send(util.defaultAcceptedVersions()).send(util.chunk(32,invalidMessage));
  assertThat(connection,util.eventuallyReceivesSelectedProtocolVersion());
  assertThat(connection,eventuallyDisconnects());
}
