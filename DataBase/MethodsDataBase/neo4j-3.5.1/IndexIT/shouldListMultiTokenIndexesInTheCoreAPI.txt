@Test public void shouldListMultiTokenIndexesInTheCoreAPI() throws Exception {
  Transaction transaction=newTransaction(AUTH_DISABLED);
  MultiTokenSchemaDescriptor descriptor=SchemaDescriptorFactory.multiToken(new int[]{labelId,labelId2},EntityType.NODE,propertyKeyId);
  transaction.schemaWrite().indexCreate(descriptor);
  commit();
  try (@SuppressWarnings("unused") org.neo4j.graphdb.Transaction tx=db.beginTx()){
    Set<IndexDefinition> indexes=Iterables.asSet(db.schema().getIndexes());
    assertEquals(1,indexes.size());
    IndexDefinition index=indexes.iterator().next();
    try {
      index.getLabel();
      fail("index.getLabel() should have thrown. ");
    }
 catch (    IllegalStateException ignore) {
    }
    try {
      index.getRelationshipType();
      fail("index.getRelationshipType() should have thrown. ");
    }
 catch (    IllegalStateException ignore) {
    }
    try {
      index.getRelationshipTypes();
      fail("index.getRelationshipTypes() should have thrown. ");
    }
 catch (    IllegalStateException ignore) {
    }
    assertThat(index.getLabels(),containsInAnyOrder(label(LABEL),label(LABEL2)));
    assertFalse("should not be a constraint index",index.isConstraintIndex());
    assertTrue("should be a multi-token index",index.isMultiTokenIndex());
    assertFalse("should not be a composite index",index.isCompositeIndex());
    assertTrue("should be a node index",index.isNodeIndex());
    assertFalse("should not be a relationship index",index.isRelationshipIndex());
    assertEquals(asSet(PROPERTY_KEY),Iterables.asSet(index.getPropertyKeys()));
  }
 }
