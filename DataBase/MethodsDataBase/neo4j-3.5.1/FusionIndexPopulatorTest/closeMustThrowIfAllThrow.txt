@Test public void closeMustThrowIfAllThrow() throws Exception {
  List<UncheckedIOException> failures=new ArrayList<>();
  for (  IndexPopulator alivePopulator : alivePopulators) {
    UncheckedIOException failure=new UncheckedIOException(new IOException("FAILURE[" + alivePopulator + "]"));
    failures.add(failure);
    doThrow(failure).when(alivePopulator).close(anyBoolean());
  }
  try {
    fusionIndexPopulator.close(anyBoolean());
    fail("Should have failed");
  }
 catch (  UncheckedIOException e) {
    if (!failures.contains(e)) {
      fail("Thrown exception didn't match any of the expected failures: " + failures);
    }
  }
}
