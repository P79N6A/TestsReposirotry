@Test void defaultsToCsvWhenModeNotSpecified() throws Exception {
  File homeDir=testDir.directory("home");
  ImporterFactory mockImporterFactory=mock(ImporterFactory.class);
  Importer importer=mock(Importer.class);
  when(mockImporterFactory.getImporterForMode(eq("csv"),any(Args.class),any(Config.class),any(OutsideWorld.class))).thenReturn(importer);
  try (RealOutsideWorld outsideWorld=new RealOutsideWorld(System.out,System.err,new ByteArrayInputStream(new byte[0]))){
    ImportCommand importCommand=new ImportCommand(homeDir.toPath(),testDir.directory("conf").toPath(),outsideWorld,mockImporterFactory);
    String[] arguments={"--database=foo","--from=bar"};
    importCommand.execute(arguments);
    verify(mockImporterFactory).getImporterForMode(eq("csv"),any(Args.class),any(Config.class),any(OutsideWorld.class));
  }
 }
