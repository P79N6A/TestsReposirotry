@Test public void mustOnlyReportValuesReportedByAllWithOneEmpty(){
  AtomicInteger closeCounter=new AtomicInteger();
  long[] firstIter={0L,Long.MAX_VALUE};
  long[] secondIter={0L,1L,Long.MAX_VALUE};
  long[] thirdIter={0L,1L,2L,Long.MAX_VALUE};
  long[] fourthIter={};
  long[] expected={};
  List<PrimitiveLongResourceIterator> iterators=asMutableList(iterator(closeCounter::incrementAndGet,firstIter),iterator(closeCounter::incrementAndGet,secondIter),iterator(closeCounter::incrementAndGet,thirdIter),iterator(closeCounter::incrementAndGet,fourthIter));
  CompositeLabelScanValueIterator iterator=new CompositeLabelScanValueIterator(iterators,true);
  assertArrayEquals(expected,PrimitiveLongCollections.asArray(iterator));
  iterator.close();
  assertEquals("expected close count",4,closeCounter.get());
}
