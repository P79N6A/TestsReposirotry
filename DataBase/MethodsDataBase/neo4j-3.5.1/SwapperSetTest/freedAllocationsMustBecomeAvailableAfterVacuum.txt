@Test void freedAllocationsMustBecomeAvailableAfterVacuum(){
  MutableIntSet allocated=new IntHashSet();
  MutableIntSet freed=new IntHashSet();
  MutableIntSet vacuumed=new IntHashSet();
  MutableIntSet reused=new IntHashSet();
  PageSwapper swapper=new DummyPageSwapper("a",42);
  allocateAndAddTenThousand(allocated,swapper);
  allocated.forEach(id -> {
    set.free(id);
    freed.add(id);
  }
);
  set.vacuum(vacuumed::addAll);
  allocateAndAddTenThousand(reused,swapper);
  assertThat(allocated,is(equalTo(freed)));
  assertThat(allocated,is(equalTo(vacuumed)));
  assertThat(allocated,is(equalTo(reused)));
}
