@Test void removalsDeliveredToIndexWriter() throws Exception {
  LuceneIndexWriter writer=mock(LuceneIndexWriter.class);
  UniqueLuceneIndexPopulatingUpdater updater=newUpdater(writer);
  updater.process(remove(1,descriptor,"foo"));
  updater.process(remove(2,descriptor,"bar"));
  updater.process(remove(3,descriptor,"baz"));
  verify(writer).deleteDocuments(newTermForChangeOrRemove(1));
  verify(writer).deleteDocuments(newTermForChangeOrRemove(2));
  verify(writer).deleteDocuments(newTermForChangeOrRemove(3));
}
