@Test void additionsDeliveredToIndexWriter() throws Exception {
  LuceneIndexWriter writer=mock(LuceneIndexWriter.class);
  UniqueLuceneIndexPopulatingUpdater updater=newUpdater(writer);
  updater.process(add(1,descriptor,"foo"));
  updater.process(add(2,descriptor,"bar"));
  updater.process(add(3,descriptor,"qux"));
  verify(writer).updateDocument(newTermForChangeOrRemove(1),documentRepresentingProperties((long)1,"foo"));
  verify(writer).updateDocument(newTermForChangeOrRemove(2),documentRepresentingProperties((long)2,"bar"));
  verify(writer).updateDocument(newTermForChangeOrRemove(3),documentRepresentingProperties((long)3,"qux"));
}
