@Test(timeout=TEST_TIMEOUT) public void shouldLogWhenDisabled(){
  AssertableLogProvider logProvider=new AssertableLogProvider(true);
  GraphDatabaseService db=null;
  try {
    db=new TestGraphDatabaseFactory().setInternalLogProvider(logProvider).setFileSystem(new NonWatchableFileSystemAbstraction()).newEmbeddedDatabaseBuilder(testDirectory.directory("failed-start-db")).setConfig(GraphDatabaseSettings.filewatcher_enabled,Settings.FALSE).newGraphDatabase();
    logProvider.assertContainsMessageContaining("File watcher disabled by configuration.");
  }
  finally {
    shutdownDatabaseSilently(db);
  }
}
