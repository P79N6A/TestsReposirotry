@Test(timeout=TEST_TIMEOUT) public void notifyWhenFileWatchingFailToStart(){
  AssertableLogProvider logProvider=new AssertableLogProvider(true);
  GraphDatabaseService db=null;
  try {
    db=new TestGraphDatabaseFactory().setInternalLogProvider(logProvider).setFileSystem(new NonWatchableFileSystemAbstraction()).newEmbeddedDatabase(testDirectory.storeDir("failed-start-db"));
    logProvider.assertContainsMessageContaining("Can not create file watcher for current file system. " + "File monitoring capabilities for store files will be disabled.");
  }
  finally {
    shutdownDatabaseSilently(db);
  }
}
