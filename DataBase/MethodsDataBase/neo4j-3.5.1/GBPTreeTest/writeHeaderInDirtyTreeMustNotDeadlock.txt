@Test(timeout=10_000) public void writeHeaderInDirtyTreeMustNotDeadlock() throws Exception {
  PageCache pageCache=createPageCache(256);
  makeDirty(pageCache);
  Consumer<PageCursor> headerWriter=pc -> pc.putBytes("failed".getBytes());
  try (GBPTree<MutableLong,MutableLong> index=index(pageCache).with(RecoveryCleanupWorkCollector.ignore()).build()){
    index.checkpoint(UNLIMITED,headerWriter);
  }
   verifyHeader(pageCache,"failed".getBytes());
}
