@Test(timeout=5_000L) public void cleanJobShouldNotLockOutWriter() throws Exception {
  makeDirty();
  RecoveryCleanupWorkCollector cleanupWork=new ControlledRecoveryCleanupWorkCollector();
  CleanJobControlledMonitor monitor=new CleanJobControlledMonitor();
  try (GBPTree<MutableLong,MutableLong> index=index().with(monitor).with(cleanupWork).build()){
    Future<?> cleanup=executor.submit(throwing(cleanupWork::start));
    monitor.barrier.awaitUninterruptibly();
    Future<?> writer=executor.submit(throwing(() -> index.writer().close()));
    writer.get();
    monitor.barrier.release();
    cleanup.get();
  }
 }
