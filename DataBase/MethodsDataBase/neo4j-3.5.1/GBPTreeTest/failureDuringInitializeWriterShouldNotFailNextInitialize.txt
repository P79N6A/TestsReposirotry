@Test public void failureDuringInitializeWriterShouldNotFailNextInitialize() throws Exception {
  IOException no=new IOException("No");
  AtomicBoolean throwOnNextIO=new AtomicBoolean();
  PageCache controlledPageCache=pageCacheThatThrowExceptionWhenToldTo(no,throwOnNextIO);
  try (GBPTree<MutableLong,MutableLong> index=index(controlledPageCache).build()){
    assertTrue(throwOnNextIO.compareAndSet(false,true));
    try (Writer<MutableLong,MutableLong> ignored=index.writer()){
      fail("Expected to throw");
    }
 catch (    IOException e) {
      assertSame(no,e);
    }
    try (Writer<MutableLong,MutableLong> writer=index.writer()){
      writer.put(new MutableLong(1),new MutableLong(1));
    }
   }
 }
