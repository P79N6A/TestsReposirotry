@Test(timeout=5_000L) public void writerShouldLockOutClose() throws Exception {
  GBPTree<MutableLong,MutableLong> index=index().build();
  Barrier.Control barrier=new Barrier.Control();
  Future<?> write=executor.submit(throwing(() -> {
    try (Writer<MutableLong,MutableLong> writer=index.writer()){
      writer.put(new MutableLong(1),new MutableLong(1));
      barrier.reached();
    }
   }
));
  barrier.awaitUninterruptibly();
  Future<?> close=executor.submit(throwing(index::close));
  shouldWait(close);
  barrier.release();
  close.get();
  write.get();
}
