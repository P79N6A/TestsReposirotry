@Test(expected=QueryExecutionException.class) public void dirtyContextDuringResultVisitResultInUnstableSnapshotException() throws Exception {
  Result result=database.execute("MATCH (n) RETURN n.c");
  List<String> values=new ArrayList<>();
  result.accept((Result.ResultVisitor<Exception>)row -> {
    testCursorContext.markAsDirty();
    values.add(row.getString("n.c"));
    return false;
  }
);
}
