@Test public void shouldReadAndCacheFirstCommittedTransactionIdWhenNotCached() throws Exception {
  TransactionLogFileInformation info=new TransactionLogFileInformation(logFiles,logHeaderCache,context);
  long expected=5;
  long version=10L;
  when(logFiles.getHighestLogVersion()).thenReturn(version);
  when(logHeaderCache.getLogHeader(version)).thenReturn(null);
  when(logFiles.versionExists(version)).thenReturn(true);
  when(logFiles.extractHeader(version)).thenReturn(new LogHeader((byte)-1,-1L,expected - 1L));
  when(logFiles.hasAnyEntries(version)).thenReturn(true);
  long firstCommittedTxId=info.getFirstExistingEntryId();
  assertEquals(expected,firstCommittedTxId);
  verify(logHeaderCache,times(1)).putHeader(version,expected - 1);
}
