@Test public void doNotVisitNotModifiedLabelsOnModifiedNodes() throws ConstraintValidationException, CreateConstraintFailureException {
  state.nodeDoAddProperty(1,2,stringValue("propertyValue"));
  MutableBoolean propertiesChecked=new MutableBoolean();
  state.accept(new TxStateVisitor.Adapter(){
    @Override public void visitNodeLabelChanges(    long id,    LongSet added,    LongSet removed){
      fail("Labels were not changed.");
    }
    @Override public void visitNodePropertyChanges(    long id,    Iterator<StorageProperty> added,    Iterator<StorageProperty> changed,    IntIterable removed){
      propertiesChecked.setTrue();
      assertEquals(1,id);
      assertFalse(changed.hasNext());
      assertTrue(removed.isEmpty());
      assertEquals(1,Iterators.count(added,Predicates.alwaysTrue()));
    }
  }
);
  assertTrue(propertiesChecked.booleanValue());
}
