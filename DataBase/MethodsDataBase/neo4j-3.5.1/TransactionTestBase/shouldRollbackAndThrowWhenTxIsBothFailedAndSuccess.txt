@Test public void shouldRollbackAndThrowWhenTxIsBothFailedAndSuccess() throws Exception {
  long nodeId;
  int labelId;
  Transaction tx=beginTransaction();
  nodeId=tx.dataWrite().nodeCreate();
  labelId=tx.tokenWrite().labelGetOrCreateForName("labello");
  tx.dataWrite().nodeAddLabel(nodeId,labelId);
  tx.failure();
  tx.success();
  try {
    tx.close();
    fail("Expected TransactionFailureException");
  }
 catch (  TransactionFailureException e) {
  }
  assertNoNode(nodeId);
}
