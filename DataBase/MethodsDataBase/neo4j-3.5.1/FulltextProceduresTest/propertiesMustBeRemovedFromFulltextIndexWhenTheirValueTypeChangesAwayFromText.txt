@Test public void propertiesMustBeRemovedFromFulltextIndexWhenTheirValueTypeChangesAwayFromText(){
  db=createDatabase();
  try (Transaction tx=db.beginTx()){
    db.execute(format(NODE_CREATE,"nodes",array(LABEL.name()),array("prop1","prop2"))).close();
    tx.success();
  }
   long nodeId;
  try (Transaction tx=db.beginTx()){
    Node node=db.createNode(LABEL);
    nodeId=node.getId();
    node.setProperty("prop1","foo");
    node.setProperty("prop2","bar");
    tx.success();
  }
   awaitIndexesOnline();
  try (Transaction tx=db.beginTx()){
    Node node=db.getNodeById(nodeId);
    node.setProperty("prop2",42);
    tx.success();
  }
   try (Transaction tx=db.beginTx()){
    assertQueryFindsIds(db,true,"nodes","foo",nodeId);
    Result result=db.execute(format(QUERY_NODES,"nodes","bar"));
    assertFalse(result.hasNext());
    result.close();
    tx.success();
  }
 }
