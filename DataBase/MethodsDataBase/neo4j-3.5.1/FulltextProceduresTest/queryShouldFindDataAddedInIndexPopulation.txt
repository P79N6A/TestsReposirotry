@Test public void queryShouldFindDataAddedInIndexPopulation(){
  Node node1;
  Node node2;
  Relationship relationship;
  db=createDatabase();
  try (Transaction tx=db.beginTx()){
    node1=db.createNode(LABEL);
    node1.setProperty(PROP,"This is a integration test.");
    node2=db.createNode(LABEL);
    node2.setProperty("otherprop","This is a related integration test");
    relationship=node1.createRelationshipTo(node2,REL);
    relationship.setProperty(PROP,"They relate");
    tx.success();
  }
   try (Transaction tx=db.beginTx()){
    db.execute(format(NODE_CREATE,"node",array(LABEL.name()),array(PROP,"otherprop")));
    db.execute(format(RELATIONSHIP_CREATE,"rel",array(REL.name()),array(PROP)));
    tx.success();
  }
   awaitIndexesOnline();
  assertQueryFindsIds(db,true,"node","integration",node1.getId(),node2.getId());
  assertQueryFindsIds(db,true,"node","test",node1.getId(),node2.getId());
  assertQueryFindsIds(db,true,"node","related",newSetWith(node2.getId()));
  assertQueryFindsIds(db,false,"rel","relate",newSetWith(relationship.getId()));
}
