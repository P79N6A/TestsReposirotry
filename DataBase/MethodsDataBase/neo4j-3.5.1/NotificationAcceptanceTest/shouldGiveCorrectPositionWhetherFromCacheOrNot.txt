@Test public void shouldGiveCorrectPositionWhetherFromCacheOrNot(){
  String cachedQuery="MATCH (a:L1) RETURN a";
  String nonCachedQuery="MATCH (a:L2) RETURN a";
  GraphDatabaseAPI db=db();
  int limit=db.getDependencyResolver().resolveDependency(Config.class).get(GraphDatabaseSettings.cypher_expression_recompilation_limit);
  for (int i=0; i < limit + 1; i++) {
    db.execute(cachedQuery).resultAsString();
  }
  Notification cachedNotification=Iterables.asList(db.execute("EXPLAIN " + cachedQuery).getNotifications()).get(0);
  Notification nonCachedNotication=Iterables.asList(db.execute("EXPLAIN " + nonCachedQuery).getNotifications()).get(0);
  assertThat(cachedNotification.getPosition(),equalTo(new InputPosition(17,1,18)));
  assertThat(nonCachedNotication.getPosition(),equalTo(new InputPosition(17,1,18)));
}
