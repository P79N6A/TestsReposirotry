@Test public void shouldHaveDenseNodesWithBigCounts(){
  cache=new NodeRelationshipCache(NumberArrayFactory.HEAP,1,100,base);
  long nodeId=1;
  int typeId=10;
  cache.setNodeCount(nodeId + 1);
  cache.setCount(nodeId,2,typeId,OUTGOING);
  cache.getAndPutRelationship(nodeId,typeId,OUTGOING,1,true);
  cache.getAndPutRelationship(nodeId,typeId,INCOMING,2,true);
  long highCountOut=NodeRelationshipCache.MAX_COUNT - 100;
  long highCountIn=NodeRelationshipCache.MAX_COUNT - 50;
  cache.setCount(nodeId,highCountOut,typeId,OUTGOING);
  cache.setCount(nodeId,highCountIn,typeId,INCOMING);
  cache.getAndPutRelationship(nodeId,typeId,OUTGOING,1,true);
  cache.getAndPutRelationship(nodeId,typeId,INCOMING,2,true);
  assertEquals(highCountOut + 1,cache.getCount(nodeId,typeId,OUTGOING));
  assertEquals(highCountIn + 1,cache.getCount(nodeId,typeId,INCOMING));
}
