@Test public void shouldPickUpAddressFromConfig() throws Exception {
  ListenSocketAddress nonDefaultAddress=new ListenSocketAddress("0.0.0.0",0);
  server=server().onAddress(nonDefaultAddress).usingDataDir(folder.directory(name.getMethodName()).getAbsolutePath()).build();
  server.start();
  HostnamePort localHttpAddress=getLocalHttpAddress();
  assertNotEquals(HttpConnector.Encryption.NONE.defaultPort,localHttpAddress.getPort());
  assertEquals(nonDefaultAddress.getHostname(),localHttpAddress.getHost());
  JaxRsResponse response=new RestRequest(server.baseUri()).get();
  assertThat(response.getStatus(),is(200));
  response.close();
}
