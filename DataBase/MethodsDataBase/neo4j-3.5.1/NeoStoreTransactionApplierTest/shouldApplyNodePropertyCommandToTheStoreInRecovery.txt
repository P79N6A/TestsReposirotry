@Test public void shouldApplyNodePropertyCommandToTheStoreInRecovery() throws Exception {
  final BatchTransactionApplier applier=newApplier(true);
  final PropertyRecord before=new PropertyRecord(11);
  final PropertyRecord after=new PropertyRecord(12);
  after.setNodeId(42);
  final Command command=new Command.PropertyCommand(before,after);
  boolean result=apply(applier,command::handle,transactionToApply);
  assertFalse(result);
  verify(lockService,times(1)).acquireNodeLock(42,LockService.LockType.WRITE_LOCK);
  verify(propertyStore,times(1)).setHighestPossibleIdInUse(after.getId());
  verify(propertyStore,times(1)).updateRecord(after);
}
