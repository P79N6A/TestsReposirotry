@Test(timeout=10_000) public void scheduledTasksThatThrowsMustPropagateException() throws Exception {
  CentralJobScheduler scheduler=new CentralJobScheduler();
  scheduler.init();
  RuntimeException boom=new RuntimeException("boom");
  AtomicInteger triggerCounter=new AtomicInteger();
  Runnable job=() -> {
    triggerCounter.incrementAndGet();
    throw boom;
  }
;
  JobHandle handle=scheduler.scheduleRecurring(Group.INDEX_POPULATION,job,1,TimeUnit.MILLISECONDS);
  try {
    handle.waitTermination();
    fail("waitTermination should have failed.");
  }
 catch (  ExecutionException e) {
    assertThat(e.getCause(),is(boom));
  }
}
