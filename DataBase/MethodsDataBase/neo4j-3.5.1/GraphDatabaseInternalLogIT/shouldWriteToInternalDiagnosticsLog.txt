@Test public void shouldWriteToInternalDiagnosticsLog() throws Exception {
  new TestGraphDatabaseFactory().newEmbeddedDatabaseBuilder(testDir.databaseDir()).setConfig(GraphDatabaseSettings.logs_directory,testDir.directory("logs").getAbsolutePath()).newGraphDatabase().shutdown();
  File internalLog=new File(testDir.directory("logs"),INTERNAL_LOG_FILE);
  assertThat(internalLog.isFile(),is(true));
  assertThat(internalLog.length(),greaterThan(0L));
  assertEquals(1,countOccurrences(internalLog,"Database graph.db is ready."));
  assertEquals(2,countOccurrences(internalLog,"Database graph.db is unavailable."));
}
