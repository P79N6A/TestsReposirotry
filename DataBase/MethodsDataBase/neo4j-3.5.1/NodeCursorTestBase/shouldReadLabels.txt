@Test public void shouldReadLabels(){
  try (NodeCursor nodes=cursors.allocateNodeCursor()){
    LabelSet labels;
    read.singleNode(foo,nodes);
    assertTrue("should access defined node",nodes.next());
    labels=nodes.labels();
    assertEquals("number of labels",1,labels.numberOfLabels());
    int fooLabel=labels.label(0);
    assertTrue(nodes.hasLabel(fooLabel));
    assertFalse("should only access a single node",nodes.next());
    read.singleNode(bar,nodes);
    assertTrue("should access defined node",nodes.next());
    labels=nodes.labels();
    assertEquals("number of labels",1,labels.numberOfLabels());
    int barLabel=labels.label(0);
    assertFalse(nodes.hasLabel(fooLabel));
    assertTrue(nodes.hasLabel(barLabel));
    assertFalse("should only access a single node",nodes.next());
    read.singleNode(baz,nodes);
    assertTrue("should access defined node",nodes.next());
    labels=nodes.labels();
    assertEquals("number of labels",1,labels.numberOfLabels());
    int bazLabel=labels.label(0);
    assertFalse(nodes.hasLabel(fooLabel));
    assertFalse(nodes.hasLabel(barLabel));
    assertTrue(nodes.hasLabel(bazLabel));
    assertFalse("should only access a single node",nodes.next());
    assertNotEquals("distinct labels",fooLabel,barLabel);
    assertNotEquals("distinct labels",fooLabel,bazLabel);
    assertNotEquals("distinct labels",barLabel,bazLabel);
    read.singleNode(barbaz,nodes);
    assertTrue("should access defined node",nodes.next());
    labels=nodes.labels();
    assertEquals("number of labels",2,labels.numberOfLabels());
    if (labels.label(0) == barLabel) {
      assertEquals(bazLabel,labels.label(1));
    }
 else {
      assertEquals(bazLabel,labels.label(0));
      assertEquals(barLabel,labels.label(1));
    }
    assertFalse(nodes.hasLabel(fooLabel));
    assertTrue(nodes.hasLabel(barLabel));
    assertTrue(nodes.hasLabel(bazLabel));
    assertFalse("should only access a single node",nodes.next());
    read.singleNode(bare,nodes);
    assertTrue("should access defined node",nodes.next());
    labels=nodes.labels();
    assertEquals("number of labels",0,labels.numberOfLabels());
    assertFalse(nodes.hasLabel(fooLabel));
    assertFalse(nodes.hasLabel(barLabel));
    assertFalse(nodes.hasLabel(bazLabel));
    assertFalse("should only access a single node",nodes.next());
  }
 }
