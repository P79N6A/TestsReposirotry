@Test public void shouldNotUpdateUserIfInitialUserExist() throws Throwable {
  FileUserRepository initialUserRepository=CommunitySecurityModule.getInitialUserRepository(config,NullLogProvider.getInstance(),fsRule.get());
  initialUserRepository.start();
  initialUserRepository.create(newUser("oldUser","newPassword",false));
  initialUserRepository.shutdown();
  users.start();
  users.create(newUser("oldUser","oldPassword",true));
  users.shutdown();
  authManager().start();
  final User oldUser=users.getUserByName("oldUser");
  assertNotNull(oldUser);
  assertTrue(oldUser.credentials().matchesPassword("oldPassword"));
  assertTrue(oldUser.passwordChangeRequired());
}
