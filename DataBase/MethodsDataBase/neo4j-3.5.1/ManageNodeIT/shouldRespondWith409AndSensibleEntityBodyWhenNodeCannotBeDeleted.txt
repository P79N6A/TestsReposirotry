@Documented("Nodes with relationships cannot be deleted.\n" + "\n" + "The relationships on a node has to be deleted before the node can be\n"+ "deleted.\n"+ " \n"+ "TIP: You can use `DETACH DELETE` in Cypher to delete nodes and their relationships in one go.") @Test public void shouldRespondWith409AndSensibleEntityBodyWhenNodeCannotBeDeleted() throws Exception {
  long id=helper.createNode();
  helper.createRelationship("LOVES",id,helper.createNode());
  JaxRsResponse response=sendDeleteRequestToServer(id);
  assertEquals(409,response.getStatus());
  Map<String,Object> jsonMap=JsonHelper.jsonToMap(response.getEntity());
  assertThat(jsonMap,hasKey("message"));
  assertNotNull(jsonMap.get("message"));
  gen.get().expectedStatus(409).delete(functionalTestHelper.dataUri() + "node/" + id);
}
