@Test void shouldProvideUniquePorts(){
  PortRepository portRepository=mock(PortRepository.class);
  PortProvider portProvider=new CoordinatingPortProvider(portRepository,port -> false);
  when(portRepository.reserveNextPort("foo")).thenReturn(40,41);
  int port1=portProvider.getNextFreePort("foo");
  int port2=portProvider.getNextFreePort("foo");
  assertThat(port1,is(not(equalTo(port2))));
}
