@Test public void shouldGenerateIfNotEqualsStatement() throws Throwable {
  ClassHandle handle;
  try (ClassGenerator simple=generateClass("SimpleClass")){
    try (CodeBlock conditional=simple.generateMethod(void.class,"conditional",param(Object.class,"lhs"),param(Object.class,"rhs"),param(Runnable.class,"runner"))){
      try (CodeBlock doStuff=conditional.ifStatement(not(equal(conditional.load("lhs"),conditional.load("rhs"))))){
        doStuff.expression(invoke(doStuff.load("runner"),RUN));
      }
     }
     handle=simple.handle();
  }
   Runnable runner1=mock(Runnable.class);
  Runnable runner2=mock(Runnable.class);
  Object a="a";
  Object b="b";
  MethodHandle conditional=instanceMethod(handle.newInstance(),"conditional",Object.class,Object.class,Runnable.class);
  conditional.invoke(a,a,runner1);
  conditional.invoke(a,b,runner2);
  verify(runner2).run();
  verifyZeroInteractions(runner1);
}
