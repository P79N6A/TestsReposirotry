@Test public void shouldGenerateInstanceOf() throws Throwable {
  ClassHandle handle;
  try (ClassGenerator simple=generateClass("SimpleClass")){
    try (CodeBlock conditional=simple.generateMethod(boolean.class,"isString",param(Object.class,"test"))){
      conditional.returns(Expression.instanceOf(typeReference(String.class),conditional.load("test")));
    }
     handle=simple.handle();
  }
   MethodHandle isString=instanceMethod(handle.newInstance(),"isString",Object.class);
  assertTrue((Boolean)isString.invoke("this is surely a string"));
  assertFalse((Boolean)isString.invoke("this is surely a string".length()));
}
