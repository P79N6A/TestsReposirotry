@Test void validateNodePropertiesOnPopulation(){
  setUp();
  Label label=Label.label("populationTestNodeLabel");
  String propertyName="populationTestPropertyName";
  try (Transaction transaction=database.beginTx()){
    Node node=database.createNode(label);
    node.setProperty(propertyName,StringUtils.repeat("a",IndexWriter.MAX_TERM_LENGTH + 1));
    transaction.success();
  }
   IndexDefinition indexDefinition=createIndex(label,propertyName);
  try {
    try (Transaction ignored=database.beginTx()){
      database.schema().awaitIndexesOnline(5,TimeUnit.MINUTES);
    }
   }
 catch (  IllegalStateException e) {
    try (Transaction ignored=database.beginTx()){
      String indexFailure=database.schema().getIndexFailure(indexDefinition);
      assertThat("",indexFailure,Matchers.containsString("java.lang.IllegalArgumentException: Index key-value size it to large. Please see index documentation for limitations."));
    }
   }
}
