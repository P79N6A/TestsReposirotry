@Test public void notAllowIndexDeletionInReadOnlyMode() throws Exception {
  IndexIdentifier indexIdentifier=identifier("foo");
  prepareIndexesByIdentifiers(indexIdentifier);
  stopDataSource();
  Config readOnlyConfig=Config.defaults(readOnlyConfig());
  dataSource=life.add(getLuceneDataSource(readOnlyConfig,OperationalMode.single));
  expectedException.expect(IllegalStateException.class);
  expectedException.expectMessage("Index deletion in read only mode is not supported.");
  dataSource.deleteIndex(indexIdentifier,false);
}
