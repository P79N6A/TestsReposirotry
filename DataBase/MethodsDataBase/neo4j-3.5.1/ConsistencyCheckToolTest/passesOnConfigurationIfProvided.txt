@Test public void passesOnConfigurationIfProvided() throws Exception {
  DatabaseLayout databaseLayout=testDirectory.databaseLayout();
  File configFile=testDirectory.file(Config.DEFAULT_CONFIG_FILE_NAME);
  Properties properties=new Properties();
  properties.setProperty(ConsistencyCheckSettings.consistency_check_property_owners.name(),"true");
  properties.store(new FileWriter(configFile),null);
  String[] args={databaseLayout.databaseDirectory().getAbsolutePath(),"-config",configFile.getPath()};
  ConsistencyCheckService service=mock(ConsistencyCheckService.class);
  runConsistencyCheckToolWith(service,args);
  ArgumentCaptor<Config> config=ArgumentCaptor.forClass(Config.class);
  verify(service).runFullConsistencyCheck(eq(databaseLayout),config.capture(),any(ProgressMonitorFactory.class),any(LogProvider.class),any(FileSystemAbstraction.class),anyBoolean(),any(ConsistencyFlags.class));
  assertTrue(config.getValue().get(ConsistencyCheckSettings.consistency_check_property_owners));
}
