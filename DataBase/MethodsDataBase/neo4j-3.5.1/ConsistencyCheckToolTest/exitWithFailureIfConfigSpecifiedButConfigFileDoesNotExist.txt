@Test public void exitWithFailureIfConfigSpecifiedButConfigFileDoesNotExist() throws Exception {
  File configFile=testDirectory.file("nonexistent_file");
  String[] args={testDirectory.directory().getPath(),"-config",configFile.getPath()};
  ConsistencyCheckService service=mock(ConsistencyCheckService.class);
  try {
    runConsistencyCheckToolWith(service,args);
    fail("should have thrown exception");
  }
 catch (  ConsistencyCheckTool.ToolFailureException e) {
    assertThat(e.getMessage(),containsString("Could not read configuration file"));
    assertThat(e.getCause().getMessage(),containsString("does not exist"));
  }
  verifyZeroInteractions(service);
}
