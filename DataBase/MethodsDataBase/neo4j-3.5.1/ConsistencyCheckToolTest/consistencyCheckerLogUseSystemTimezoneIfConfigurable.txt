@Test public void consistencyCheckerLogUseSystemTimezoneIfConfigurable() throws Exception {
  TimeZone defaultTimeZone=TimeZone.getDefault();
  try {
    ConsistencyCheckService service=mock(ConsistencyCheckService.class);
    Mockito.when(service.runFullConsistencyCheck(any(DatabaseLayout.class),any(Config.class),any(ProgressMonitorFactory.class),any(LogProvider.class),any(FileSystemAbstraction.class),eq(false),any(ConsistencyFlags.class))).then(invocationOnMock -> {
      LogProvider provider=invocationOnMock.getArgument(3);
      provider.getLog("test").info("testMessage");
      return ConsistencyCheckService.Result.success(new File(StringUtils.EMPTY));
    }
);
    File storeDir=testDirectory.directory();
    File configFile=testDirectory.file(Config.DEFAULT_CONFIG_FILE_NAME);
    Properties properties=new Properties();
    properties.setProperty(GraphDatabaseSettings.db_timezone.name(),LogTimeZone.SYSTEM.name());
    properties.store(new FileWriter(configFile),null);
    String[] args={storeDir.getPath(),"-config",configFile.getPath()};
    checkLogRecordTimeZone(service,args,5,"+0500");
    checkLogRecordTimeZone(service,args,-5,"-0500");
  }
  finally {
    TimeZone.setDefault(defaultTimeZone);
  }
}
