@Test void archiveDirectoryWithSubdirectories() throws IOException {
  File archiveFile=testDirectory.file("directoryWithSubdirectoriesArchive.zip");
  File directoryArchive=testDirectory.directory("directoryWithSubdirs");
  File subdir1=new File(directoryArchive,"subdir1");
  File subdir2=new File(directoryArchive,"subdir");
  fileSystem.mkdir(subdir1);
  fileSystem.mkdir(subdir2);
  fileSystem.create(new File(directoryArchive,"a")).close();
  fileSystem.create(new File(directoryArchive,"b")).close();
  fileSystem.create(new File(subdir1,"c")).close();
  fileSystem.create(new File(subdir2,"d")).close();
  ZipUtils.zip(fileSystem,directoryArchive,archiveFile);
  assertTrue(fileSystem.fileExists(archiveFile));
  assertEquals(6,countArchiveEntries(archiveFile));
}
