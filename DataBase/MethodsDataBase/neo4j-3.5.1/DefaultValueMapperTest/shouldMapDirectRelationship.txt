@Test public void shouldMapDirectRelationship(){
  Node start, end;
  Relationship relationship;
  try (Transaction tx=db.beginTx()){
    start=db.createNode();
    end=db.createNode();
    relationship=start.createRelationshipTo(end,RelationshipType.withName("R"));
    tx.success();
  }
   RelationshipValue relationshipValue=VirtualValues.relationshipValue(relationship.getId(),nodeValue(start.getId(),Values.EMPTY_TEXT_ARRAY,EMPTY_MAP),nodeValue(start.getId(),Values.EMPTY_TEXT_ARRAY,EMPTY_MAP),stringValue("R"),EMPTY_MAP);
  Relationship coreAPIRelationship=mapper.mapRelationship(relationshipValue);
  try (Transaction ignore=db.beginTx()){
    assertThat(coreAPIRelationship.getId(),equalTo(relationship.getId()));
    assertThat(coreAPIRelationship.getStartNode(),equalTo(start));
    assertThat(coreAPIRelationship.getEndNode(),equalTo(end));
  }
 }
