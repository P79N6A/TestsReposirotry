@Test public void shouldNotFindRemovedProperties() throws Exception {
  IndexReference index;
  try (KernelTransactionImplementation tx=getKernelTransaction()){
    SchemaDescriptor descriptor=fulltextAdapter.schemaFor(NODE,new String[]{LABEL.name()},settings,"prop","prop2");
    index=tx.schemaWrite().indexCreate(descriptor,FulltextIndexProviderFactory.DESCRIPTOR.name(),Optional.of(NODE_INDEX_NAME));
    tx.success();
  }
   await(index);
  long firstID;
  long secondID;
  long thirdID;
  try (Transaction tx=db.beginTx()){
    firstID=createNodeIndexableByPropertyValue(LABEL,"Hello. Hello again.");
    secondID=createNodeIndexableByPropertyValue(LABEL,"A zebroid (also zedonk, zorse, zebra mule, zonkey, and zebmule) is the offspring of any " + "cross between a zebra and any other equine: essentially, a zebra hybrid.");
    thirdID=createNodeIndexableByPropertyValue(LABEL,"Hello. Hello again.");
    setNodeProp(firstID,"zebra");
    setNodeProp(secondID,"Hello. Hello again.");
    tx.success();
  }
   try (Transaction tx=db.beginTx()){
    Node node=db.getNodeById(firstID);
    Node node2=db.getNodeById(secondID);
    Node node3=db.getNodeById(thirdID);
    node.setProperty("prop","tomtar");
    node.setProperty("prop2","tomtar");
    node2.setProperty("prop","tomtar");
    node2.setProperty("prop2","Hello");
    node3.removeProperty("prop");
    tx.success();
  }
   try (Transaction tx=db.beginTx()){
    KernelTransaction ktx=kernelTransaction(tx);
    assertQueryFindsIds(ktx,NODE_INDEX_NAME,"hello",secondID);
    assertQueryFindsNothing(ktx,NODE_INDEX_NAME,"zebra");
    assertQueryFindsNothing(ktx,NODE_INDEX_NAME,"zedonk");
    assertQueryFindsNothing(ktx,NODE_INDEX_NAME,"cross");
  }
 }
