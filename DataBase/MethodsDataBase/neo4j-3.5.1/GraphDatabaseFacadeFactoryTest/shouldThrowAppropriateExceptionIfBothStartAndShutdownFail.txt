@Test void shouldThrowAppropriateExceptionIfBothStartAndShutdownFail(){
  RuntimeException startupError=new RuntimeException();
  RuntimeException shutdownError=new RuntimeException();
  GraphDatabaseFacadeFactory db=newFaultyGraphDatabaseFacadeFactory(startupError);
  doThrow(shutdownError).when(mockFacade).shutdown();
  RuntimeException initException=assertThrows(RuntimeException.class,() -> db.initFacade(testDirectory.storeDir(),Collections.emptyMap(),deps,mockFacade));
  assertTrue(initException.getMessage().startsWith("Error starting "));
  assertEquals(startupError,initException.getCause());
  assertEquals(shutdownError,initException.getSuppressed()[0]);
}
