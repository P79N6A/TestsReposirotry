@Test public void deleteEverythingInMiddleRecord(){
  long inUseBefore=propertyRecordsInUse();
  Node node=getGraphDb().createNode();
  for (int i=0; i < 3 * PropertyType.getPayloadSizeLongs(); i++) {
    node.setProperty("shortString" + i,String.valueOf(i));
  }
  newTransaction();
  assertEquals(inUseBefore + 3,propertyRecordsInUse());
  final List<Pair<String,Object>> middleRecordProps=getPropertiesFromRecord(1);
  middleRecordProps.forEach(nameAndValue -> {
    final String name=nameAndValue.getOne();
    final Object value=nameAndValue.getTwo();
    assertEquals(value,node.removeProperty(name));
  }
);
  newTransaction();
  assertEquals(inUseBefore + 2,propertyRecordsInUse());
  middleRecordProps.forEach(nameAndValue -> assertFalse(node.hasProperty(nameAndValue.getOne())));
  getPropertiesFromRecord(0).forEach(nameAndValue -> {
    final String name=nameAndValue.getOne();
    final Object value=nameAndValue.getTwo();
    assertEquals(value,node.removeProperty(name));
  }
);
  getPropertiesFromRecord(2).forEach(nameAndValue -> {
    final String name=nameAndValue.getOne();
    final Object value=nameAndValue.getTwo();
    assertEquals(value,node.removeProperty(name));
  }
);
}
