@Test public void shouldPopulateIndexWithUniquePointsThatCollideOnSpaceFillingCurve() throws Exception {
  Config config=Config.defaults(stringMap(default_schema_provider.name(),schemaIndex.providerName()));
  BatchInserter inserter=newBatchInserter(config);
  Pair<PointValue,PointValue> collidingPoints=SpatialIndexValueTestUtil.pointsWithSameValueOnSpaceFillingCurve(config);
  inserter.createNode(MapUtil.map("prop",collidingPoints.first()),TestLabels.LABEL_ONE);
  inserter.createNode(MapUtil.map("prop",collidingPoints.other()),TestLabels.LABEL_ONE);
  inserter.createDeferredConstraint(TestLabels.LABEL_ONE).assertPropertyIsUnique("prop").create();
  inserter.shutdown();
  GraphDatabaseService db=graphDatabaseService(config);
  try {
    awaitIndexesOnline(db);
    try (Transaction tx=db.beginTx()){
      assertSingleCorrectHit(db,collidingPoints.first());
      assertSingleCorrectHit(db,collidingPoints.other());
      tx.success();
    }
   }
  finally {
    db.shutdown();
  }
}
