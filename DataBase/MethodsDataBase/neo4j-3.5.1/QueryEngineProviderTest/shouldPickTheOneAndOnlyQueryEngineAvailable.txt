@Test public void shouldPickTheOneAndOnlyQueryEngineAvailable(){
  QueryEngineProvider provider=mock(QueryEngineProvider.class);
  when(provider.enginePriority()).thenReturn(1);
  Dependencies deps=new Dependencies();
  GraphDatabaseAPI graphAPI=mock(GraphDatabaseAPI.class);
  QueryExecutionEngine executionEngine=mock(QueryExecutionEngine.class);
  when(provider.createEngine(any(),any())).thenReturn(executionEngine);
  Iterable<QueryEngineProvider> providers=Iterables.asIterable(provider);
  QueryExecutionEngine engine=QueryEngineProvider.initialize(deps,graphAPI,providers);
  assertSame(executionEngine,engine);
}
