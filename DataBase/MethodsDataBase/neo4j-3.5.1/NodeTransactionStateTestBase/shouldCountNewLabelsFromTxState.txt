@Test public void shouldCountNewLabelsFromTxState() throws Exception {
  Node node1=createNode("label");
  Node node2=createNode();
  try (org.neo4j.internal.kernel.api.Transaction tx=beginTransaction()){
    tx.dataWrite().nodeAddLabel(node2.node,node1.labels[0]);
    long countTxState=tx.dataRead().countsForNode(node1.labels[0]);
    long countNoTxState=tx.dataRead().countsForNodeWithoutTxState(node1.labels[0]);
    assertEquals(2,countTxState);
    assertEquals(1,countNoTxState);
  }
 }
