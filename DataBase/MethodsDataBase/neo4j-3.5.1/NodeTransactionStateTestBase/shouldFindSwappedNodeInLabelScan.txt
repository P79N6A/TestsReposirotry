@Test public void shouldFindSwappedNodeInLabelScan() throws Exception {
  Node node1=createNode("label");
  Node node2=createNode();
  try (org.neo4j.internal.kernel.api.Transaction tx=beginTransaction();NodeLabelIndexCursor cursor=tx.cursors().allocateNodeLabelIndexCursor()){
    tx.dataWrite().nodeRemoveLabel(node1.node,node1.labels[0]);
    tx.dataWrite().nodeAddLabel(node2.node,node1.labels[0]);
    tx.dataRead().nodeLabelScan(node1.labels[0],cursor);
    assertTrue(cursor.next());
    assertEquals(node2.node,cursor.nodeReference());
  }
 }
