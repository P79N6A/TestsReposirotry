@Test public void shouldAcquireNodeLocksWhenCreatingRelationshipInOrderOfAscendingId() throws Exception {
  long lowId=3;
  long highId=5;
  int relationshipLabel=0;
{
    operations.relationshipCreate(lowId,relationshipLabel,highId);
    InOrder lockingOrder=inOrder(locks);
    lockingOrder.verify(locks).acquireExclusive(LockTracer.NONE,ResourceTypes.NODE,lowId);
    lockingOrder.verify(locks).acquireExclusive(LockTracer.NONE,ResourceTypes.NODE,highId);
    lockingOrder.verifyNoMoreInteractions();
    reset(locks);
  }
{
    operations.relationshipCreate(highId,relationshipLabel,lowId);
    InOrder lockingOrder=inOrder(locks);
    lockingOrder.verify(locks).acquireExclusive(LockTracer.NONE,ResourceTypes.NODE,lowId);
    lockingOrder.verify(locks).acquireExclusive(LockTracer.NONE,ResourceTypes.NODE,highId);
    lockingOrder.verifyNoMoreInteractions();
  }
}
