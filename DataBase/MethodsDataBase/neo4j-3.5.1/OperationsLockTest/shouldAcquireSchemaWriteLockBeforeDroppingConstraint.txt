@Test public void shouldAcquireSchemaWriteLockBeforeDroppingConstraint() throws Exception {
  UniquenessConstraintDescriptor constraint=uniqueForSchema(descriptor);
  when(storageReader.constraintExists(constraint)).thenReturn(true);
  operations.constraintDrop(constraint);
  order.verify(locks).acquireExclusive(LockTracer.NONE,ResourceTypes.LABEL,descriptor.getLabelId());
  order.verify(txState).constraintDoDrop(constraint);
}
