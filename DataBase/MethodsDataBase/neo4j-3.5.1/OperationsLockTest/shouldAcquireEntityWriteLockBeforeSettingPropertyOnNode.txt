@Test public void shouldAcquireEntityWriteLockBeforeSettingPropertyOnNode() throws Exception {
  when(nodeCursor.next()).thenReturn(true);
  when(nodeCursor.labels()).thenReturn(LabelSet.NONE);
  int propertyKeyId=8;
  Value value=Values.of(9);
  when(propertyCursor.next()).thenReturn(true);
  when(propertyCursor.propertyKey()).thenReturn(propertyKeyId);
  when(propertyCursor.propertyValue()).thenReturn(NO_VALUE);
  operations.nodeSetProperty(123,propertyKeyId,value);
  order.verify(locks).acquireExclusive(LockTracer.NONE,ResourceTypes.NODE,123);
  order.verify(txState).nodeDoAddProperty(123,propertyKeyId,value);
}
