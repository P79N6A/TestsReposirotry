@Test public void shouldAcquiredSharedLabelLocksWhenRemovingNodeProperty() throws AutoIndexingKernelException, EntityNotFoundException {
  long nodeId=1L;
  long labelId1=1;
  long labelId2=1;
  int propertyKeyId=5;
  when(nodeCursor.next()).thenReturn(true);
  LabelSet labels=mock(LabelSet.class);
  when(labels.all()).thenReturn(new long[]{labelId1,labelId2});
  when(nodeCursor.labels()).thenReturn(labels);
  when(propertyCursor.next()).thenReturn(true);
  when(propertyCursor.propertyKey()).thenReturn(propertyKeyId);
  when(propertyCursor.propertyValue()).thenReturn(Values.of("abc"));
  operations.nodeRemoveProperty(nodeId,propertyKeyId);
  InOrder order=inOrder(locks);
  order.verify(locks).acquireExclusive(LockTracer.NONE,ResourceTypes.NODE,nodeId);
  order.verify(locks).acquireShared(LockTracer.NONE,ResourceTypes.LABEL,labelId1,labelId2);
  order.verifyNoMoreInteractions();
}
