@Test public void shouldRespondToHttpClientGet() throws Exception {
  try (DefaultHttpClient httpclient=new DefaultHttpClient()){
    HttpGet httpget=new HttpGet(serverUrl + "/?id=storeId+v=kernelVersion");
    try (CloseableHttpResponse response=httpclient.execute(httpget)){
      HttpEntity entity=response.getEntity();
      if (entity != null) {
        try (InputStream instream=entity.getContent()){
          byte[] tmp=new byte[2048];
          while ((instream.read(tmp)) != -1) {
          }
        }
       }
      assertThat(response,notNullValue());
      assertThat(response.getStatusLine().getStatusCode(),is(HttpStatus.SC_OK));
    }
   }
 }
