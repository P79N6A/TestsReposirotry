@Test void shouldNotRotateLogWhenSizeExceededButNotDelay() throws Exception {
  UpdatableLongSupplier clock=new UpdatableLongSupplier(System.currentTimeMillis());
  RotatingFileOutputStreamSupplier supplier=new RotatingFileOutputStreamSupplier(clock,fileSystem,logFile,10,SECONDS.toMillis(60),10,DIRECT_EXECUTOR,new RotationListener());
  write(supplier,"A string longer than 10 bytes");
  assertThat(fileSystem.fileExists(logFile),is(true));
  assertThat(fileSystem.fileExists(archiveLogFile1),is(false));
  write(supplier,"A string longer than 10 bytes");
  assertThat(fileSystem.fileExists(logFile),is(true));
  assertThat(fileSystem.fileExists(archiveLogFile1),is(true));
  assertThat(fileSystem.fileExists(archiveLogFile2),is(false));
  write(supplier,"A string longer than 10 bytes");
  clock.setValue(clock.getAsLong() + SECONDS.toMillis(59));
  write(supplier,"A string longer than 10 bytes");
  clock.setValue(clock.getAsLong() + SECONDS.toMillis(1));
  write(supplier,"A string longer than 10 bytes");
  assertThat(fileSystem.fileExists(logFile),is(true));
  assertThat(fileSystem.fileExists(archiveLogFile1),is(true));
  assertThat(fileSystem.fileExists(archiveLogFile2),is(true));
  assertThat(fileSystem.fileExists(archiveLogFile3),is(false));
}
