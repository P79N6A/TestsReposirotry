@Test void rotatesLogWhenSizeExceeded() throws Exception {
  RotatingFileOutputStreamSupplier supplier=new RotatingFileOutputStreamSupplier(fileSystem,logFile,10,0,10,DIRECT_EXECUTOR);
  write(supplier,"A string longer than 10 bytes");
  assertThat(fileSystem.fileExists(logFile),is(true));
  assertThat(fileSystem.fileExists(archiveLogFile1),is(false));
  write(supplier,"A string longer than 10 bytes");
  assertThat(fileSystem.fileExists(logFile),is(true));
  assertThat(fileSystem.fileExists(archiveLogFile1),is(true));
  assertThat(fileSystem.fileExists(archiveLogFile2),is(false));
  write(supplier,"Short");
  write(supplier,"A string longer than 10 bytes");
  assertThat(fileSystem.fileExists(logFile),is(true));
  assertThat(fileSystem.fileExists(archiveLogFile1),is(true));
  assertThat(fileSystem.fileExists(archiveLogFile2),is(true));
}
