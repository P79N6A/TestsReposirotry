@Test public void shouldNotLogExceptionsWhenEvenLoopIsShuttingDown() throws Exception {
  AssertableLogProvider logProvider=new AssertableLogProvider();
  BoltConnection connection=mock(BoltConnection.class);
  HouseKeeper houseKeeper=new HouseKeeper(connection,logProvider.getLog(HouseKeeper.class));
  Bootstrap bootstrap=newBootstrap(houseKeeper);
  try (ServerSocket serverSocket=new ServerSocket(0)){
    ChannelFuture future=bootstrap.connect("localhost",serverSocket.getLocalPort()).sync();
    Channel channel=future.channel();
    for (int i=0; i < 100; i++) {
      channel.write(writeUtf8(channel.alloc(),"Hello"),channel.voidPromise());
    }
    bootstrap.config().group().shutdownGracefully();
    channel.closeFuture().sync();
  }
  finally {
    bootstrap.config().group().shutdownGracefully().sync();
  }
  logProvider.assertNoLoggingOccurred();
}
