@Test public void logOnAvailabilityChange(){
  Log log=mock(Log.class);
  AvailabilityGuard databaseAvailabilityGuard=getDatabaseAvailabilityGuard(clock,log);
  verifyZeroInteractions(log);
  databaseAvailabilityGuard.require(REQUIREMENT_1);
  verifyLogging(log,atLeastOnce());
  databaseAvailabilityGuard.fulfill(REQUIREMENT_1);
  verifyLogging(log,times(4));
  databaseAvailabilityGuard.require(REQUIREMENT_1);
  databaseAvailabilityGuard.require(REQUIREMENT_2);
  verifyLogging(log,times(6));
  databaseAvailabilityGuard.fulfill(REQUIREMENT_1);
  verifyLogging(log,times(6));
  databaseAvailabilityGuard.fulfill(REQUIREMENT_2);
  verifyLogging(log,times(8));
}
