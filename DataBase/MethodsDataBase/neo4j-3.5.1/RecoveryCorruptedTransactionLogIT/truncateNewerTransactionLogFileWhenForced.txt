@Test public void truncateNewerTransactionLogFileWhenForced() throws IOException {
  GraphDatabaseAPI database=(GraphDatabaseAPI)databaseFactory.newEmbeddedDatabase(storeDir);
  for (int i=0; i < 10; i++) {
    generateTransaction(database);
  }
  TransactionIdStore transactionIdStore=getTransactionIdStore(database);
  long numberOfClosedTransactions=transactionIdStore.getLastClosedTransactionId() - 1;
  database.shutdown();
  removeLastCheckpointRecordFromLastLogFile();
  addRandomBytesToLastLogFile(this::randomBytes);
  database=startDbNoRecoveryOfCorruptedLogs();
  database.shutdown();
  logProvider.assertContainsMessageContaining("Fail to read transaction log version 0.");
  logProvider.assertContainsMessageContaining("Fail to read transaction log version 0. Last valid transaction start offset is: 5668.");
  assertEquals(numberOfClosedTransactions,recoveryMonitor.getNumberOfRecoveredTransactions());
}
