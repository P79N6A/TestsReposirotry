@Test public void terminatedTxMarkedForFailureClosesWithoutThrowing() throws TransactionFailureException {
  Locks.Client locksClient=mock(Locks.Client.class);
  KernelTransactionImplementation tx=newTransaction(loginContext(),locksClient);
  transactionInitializer.accept(tx);
  tx.failure();
  tx.markForTermination(Status.General.UnknownError);
  tx.close();
  verify(locksClient).stop();
  verify(transactionMonitor).transactionTerminated(isWriteTx);
}
