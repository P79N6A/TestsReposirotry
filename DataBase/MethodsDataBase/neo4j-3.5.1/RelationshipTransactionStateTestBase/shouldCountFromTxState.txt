@Test public void shouldCountFromTxState() throws Exception {
  assertCount(100,OUT,group -> {
    assertEquals(101,group.outgoingCount());
    assertEquals(0,group.incomingCount());
    assertEquals(0,group.loopCount());
    assertEquals(101,group.totalCount());
  }
);
  assertCount(1,OUT,group -> {
    assertEquals(2,group.outgoingCount());
    assertEquals(0,group.incomingCount());
    assertEquals(0,group.loopCount());
    assertEquals(2,group.totalCount());
  }
);
  assertCount(100,IN,group -> {
    assertEquals(0,group.outgoingCount());
    assertEquals(101,group.incomingCount());
    assertEquals(0,group.outgoingCount());
    assertEquals(101,group.totalCount());
  }
);
  assertCount(1,IN,group -> {
    assertEquals(0,group.outgoingCount());
    assertEquals(2,group.incomingCount());
    assertEquals(0,group.loopCount());
    assertEquals(2,group.totalCount());
  }
);
  assertCount(100,LOOP,group -> {
    assertEquals(0,group.incomingCount());
    assertEquals(0,group.outgoingCount());
    assertEquals(101,group.loopCount());
    assertEquals(101,group.totalCount());
  }
);
  assertCount(1,LOOP,group -> {
    assertEquals(0,group.outgoingCount());
    assertEquals(0,group.incomingCount());
    assertEquals(2,group.loopCount());
    assertEquals(2,group.totalCount());
  }
);
}
