@Test public void shouldRecoverFromCrashBeforeFirstCheckpoint() throws Exception {
  KEY key=key(1L);
  VALUE value=value(10L);
  File file=directory.file("index");
{
    try (PageCache pageCache=createPageCache();GBPTree<KEY,VALUE> index=createIndex(pageCache,file);Writer<KEY,VALUE> writer=index.writer()){
      writer.put(key,value);
      pageCache.flushAndForce();
    }
   }
  try (PageCache pageCache=createPageCache();GBPTree<KEY,VALUE> index=createIndex(pageCache,file)){
    try (Writer<KEY,VALUE> writer=index.writer()){
      writer.put(key,value);
    }
     index.consistencyCheck();
    try (RawCursor<Hit<KEY,VALUE>,IOException> cursor=index.seek(key(Long.MIN_VALUE),key(Long.MAX_VALUE))){
      assertTrue(cursor.next());
      Hit<KEY,VALUE> hit=cursor.get();
      assertEqualsKey(key,hit.key());
      assertEqualsValue(value,hit.value());
    }
   }
 }
