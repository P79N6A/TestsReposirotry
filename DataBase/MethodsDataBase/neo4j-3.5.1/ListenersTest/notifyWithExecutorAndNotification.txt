@Test void notifyWithExecutorAndNotification() throws Exception {
  String message="foo";
  String threadNamePrefix="test-thread";
  Listener listener1=new Listener();
  Listener listener2=new Listener();
  Listeners<Listener> listeners=newListeners(listener1,listener2);
  ExecutorService executor=newSingleThreadExecutor(named(threadNamePrefix));
  listeners.notify(executor,listener -> listener.process(message));
  executor.shutdown();
  executor.awaitTermination(1,TimeUnit.MINUTES);
  assertEquals(message,listener1.message);
  assertThat(listener1.threadName,startsWith(threadNamePrefix));
  assertEquals(message,listener2.message);
  assertThat(listener2.threadName,startsWith(threadNamePrefix));
}
