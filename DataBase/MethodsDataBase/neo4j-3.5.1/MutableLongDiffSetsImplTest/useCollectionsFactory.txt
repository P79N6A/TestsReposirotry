@Test public void useCollectionsFactory(){
  final MutableLongSet set1=new LongHashSet();
  final MutableLongSet set2=new LongHashSet();
  final CollectionsFactory collectionsFactory=mock(CollectionsFactory.class);
  doReturn(set1,set2).when(collectionsFactory).newLongSet();
  final MutableLongDiffSetsImpl diffSets=new MutableLongDiffSetsImpl(collectionsFactory);
  diffSets.add(1L);
  diffSets.remove(2L);
  assertSame(set1,diffSets.getAdded());
  assertSame(set2,diffSets.getRemoved());
  verify(collectionsFactory,times(2)).newLongSet();
  verifyNoMoreInteractions(collectionsFactory);
}
