@Test public void shouldNotSeeNodeThatHasAPropertyRemovedInTransaction() throws Exception {
  long nodeID=createNode();
  try (Transaction ignore=graphDatabaseAPI.beginTx()){
    KernelTransaction ktx=ktx();
    ktx.dataWrite().nodeRemoveProperty(nodeID,index.schema().getPropertyIds()[0]);
    try (NodeValueIndexCursor cursor=seek(ktx)){
      assertFalse(cursor.next());
    }
   }
 }
