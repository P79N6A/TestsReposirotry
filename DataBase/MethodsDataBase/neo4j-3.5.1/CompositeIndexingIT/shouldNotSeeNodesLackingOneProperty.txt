@Test public void shouldNotSeeNodesLackingOneProperty() throws Exception {
  long nodeID1=createNode();
  try (Transaction ignore=graphDatabaseAPI.beginTx()){
    KernelTransaction ktx=ktx();
    Write write=ktx.dataWrite();
    long irrelevantNodeID=write.nodeCreate();
    write.nodeAddLabel(irrelevantNodeID,LABEL_ID);
    int[] propertyIds=index.schema().getPropertyIds();
    for (int i=0; i < propertyIds.length - 1; i++) {
      int propID=propertyIds[i];
      write.nodeSetProperty(irrelevantNodeID,propID,Values.intValue(propID));
    }
    Set<Long> result=new HashSet<>();
    try (NodeValueIndexCursor cursor=seek(ktx)){
      while (cursor.next()) {
        result.add(cursor.nodeReference());
      }
    }
     assertThat(result,contains(nodeID1));
  }
 }
