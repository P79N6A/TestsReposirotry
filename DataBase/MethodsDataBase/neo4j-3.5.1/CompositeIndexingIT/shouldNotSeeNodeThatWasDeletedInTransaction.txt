@Test public void shouldNotSeeNodeThatWasDeletedInTransaction() throws Exception {
  long nodeID=createNode();
  try (Transaction ignore=graphDatabaseAPI.beginTx()){
    KernelTransaction ktx=ktx();
    ktx.dataWrite().nodeDelete(nodeID);
    try (NodeValueIndexCursor cursor=seek(ktx)){
      assertFalse(cursor.next());
    }
   }
 }
