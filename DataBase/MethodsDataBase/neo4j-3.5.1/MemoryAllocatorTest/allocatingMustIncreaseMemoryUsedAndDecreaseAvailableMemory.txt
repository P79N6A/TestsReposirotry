@Test void allocatingMustIncreaseMemoryUsedAndDecreaseAvailableMemory(){
  MemoryAllocator mman=createAllocator(ONE_PAGE);
  assertThat(mman.usedMemory(),is(0L));
  assertThat(mman.availableMemory(),is((long)PageCache.PAGE_SIZE));
  mman.allocateAligned(32,1);
  assertThat(mman.usedMemory(),is(greaterThanOrEqualTo(32L)));
  assertThat(mman.availableMemory(),is(lessThanOrEqualTo(PageCache.PAGE_SIZE - 32L)));
  mman.allocateAligned(32,1);
  assertThat(mman.usedMemory(),is(greaterThanOrEqualTo(64L)));
  assertThat(mman.availableMemory(),is(lessThanOrEqualTo(PageCache.PAGE_SIZE - 64L)));
  mman.allocateAligned(1,1);
  mman.allocateAligned(32,16);
  assertThat(mman.usedMemory(),is(greaterThanOrEqualTo(97L)));
  assertThat(mman.availableMemory(),is(lessThanOrEqualTo(PageCache.PAGE_SIZE - 97L)));
}
