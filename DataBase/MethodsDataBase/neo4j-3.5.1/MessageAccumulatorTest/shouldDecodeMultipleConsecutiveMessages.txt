@Test public void shouldDecodeMultipleConsecutiveMessages(){
  channel.writeInbound(wrappedBuffer(new byte[]{1,2,3}));
  channel.writeInbound(wrappedBuffer(new byte[0]));
  channel.writeInbound(wrappedBuffer(new byte[]{4,5}));
  channel.writeInbound(wrappedBuffer(new byte[]{6}));
  channel.writeInbound(wrappedBuffer(new byte[0]));
  channel.writeInbound(wrappedBuffer(new byte[]{7,8}));
  channel.writeInbound(wrappedBuffer(new byte[]{9,10}));
  channel.writeInbound(wrappedBuffer(new byte[0]));
  assertEquals(3,channel.inboundMessages().size());
  assertByteBufEquals(wrappedBuffer(new byte[]{1,2,3}),channel.readInbound());
  assertByteBufEquals(wrappedBuffer(new byte[]{4,5,6}),channel.readInbound());
  assertByteBufEquals(wrappedBuffer(new byte[]{7,8,9,10}),channel.readInbound());
}
