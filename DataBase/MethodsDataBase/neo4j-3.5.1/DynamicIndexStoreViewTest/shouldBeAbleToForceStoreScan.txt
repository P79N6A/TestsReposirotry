@Test public void shouldBeAbleToForceStoreScan() throws Exception {
  when(labelScanStore.newReader()).thenThrow(new RuntimeException("Should not be used"));
  when(nodeStore.getHighestPossibleIdInUse()).thenReturn(200L);
  when(nodeStore.getHighId()).thenReturn(20L);
  when(nodeStore.openPageCursorForReading(anyLong())).thenReturn(mock(PageCursor.class));
  mockLabelNodeCount(countStore,2);
  mockLabelNodeCount(countStore,6);
  DynamicIndexStoreView storeView=dynamicIndexStoreView();
  StoreScan<Exception> storeScan=storeView.visitNodes(new int[]{2,6},propertyKeyIdFilter,propertyUpdateVisitor,labelUpdateVisitor,true);
  storeScan.run();
  Mockito.verify(nodeStore,times(1)).getRecordByCursor(anyLong(),any(NodeRecord.class),any(RecordLoad.class),any(PageCursor.class));
  Mockito.verify(nodeStore,times(200)).nextRecordByCursor(any(NodeRecord.class),any(RecordLoad.class),any(PageCursor.class));
}
