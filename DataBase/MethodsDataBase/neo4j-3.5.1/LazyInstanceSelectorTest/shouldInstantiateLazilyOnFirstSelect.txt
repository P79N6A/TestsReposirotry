@Test public void shouldInstantiateLazilyOnFirstSelect(){
  Function<IndexSlot,String> factory=slotToStringFunction();
  LazyInstanceSelector<String> selector=new LazyInstanceSelector<>(factory);
  for (  IndexSlot slot : values()) {
    for (    IndexSlot candidate : values()) {
      if (candidate.ordinal() < slot.ordinal()) {
        verify(factory,times(1)).apply(candidate);
        selector.select(candidate);
        verify(factory,times(1)).apply(candidate);
      }
 else       if (candidate == slot) {
        verify(factory,times(0)).apply(candidate);
        selector.select(candidate);
        verify(factory,times(1)).apply(candidate);
      }
 else {
        assertNull(selector.getIfInstantiated(candidate));
      }
    }
  }
}
