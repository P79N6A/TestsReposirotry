@Test public void shouldRequestIdBatchFromSourceOnDepletingCurrent(){
  assertEquals(0,idSource.calls);
  for (int i=0; i < BATCH_SIZE; i++) {
    assertEquals(i,ids.nextId());
  }
  assertEquals(1,idSource.calls);
  long firstIdOfNextBatch=ids.nextId();
  assertEquals(BATCH_SIZE,firstIdOfNextBatch);
  assertEquals(2,idSource.calls);
}
