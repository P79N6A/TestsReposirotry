@Test public void testMultiplePopulatorUpdater() throws IndexEntryConflictException, FlipFailedKernelException {
  IndexUpdater indexUpdater1=mock(IndexUpdater.class);
  IndexPopulator indexPopulator1=createIndexPopulator(indexUpdater1);
  IndexPopulator indexPopulator2=createIndexPopulator();
  addPopulator(indexPopulator1,1);
  addPopulator(indexPopulator2,2);
  doThrow(getPopulatorException()).when(indexPopulator2).newPopulatingUpdater(any(NodePropertyAccessor.class));
  IndexUpdater multipleIndexUpdater=multipleIndexPopulator.newPopulatingUpdater(mock(NodePropertyAccessor.class));
  IndexEntryUpdate<?> propertyUpdate=createIndexEntryUpdate(index1);
  multipleIndexUpdater.process(propertyUpdate);
  checkPopulatorFailure(indexPopulator2);
  verify(indexUpdater1).process(propertyUpdate);
}
