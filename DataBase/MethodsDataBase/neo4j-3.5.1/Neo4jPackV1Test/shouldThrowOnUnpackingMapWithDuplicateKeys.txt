@Test public void shouldThrowOnUnpackingMapWithDuplicateKeys() throws IOException {
  PackedOutputArray output=new PackedOutputArray();
  Neo4jPack.Packer packer=neo4jPack.newPacker(output);
  packer.packMapHeader(2);
  packer.pack("key");
  packer.pack(intValue(1));
  packer.pack("key");
  packer.pack(intValue(2));
  try {
    PackedInputArray input=new PackedInputArray(output.bytes());
    Neo4jPack.Unpacker unpacker=neo4jPack.newUnpacker(input);
    unpacker.unpack();
    fail("exception expected");
  }
 catch (  BoltIOException ex) {
    assertEquals(Neo4jError.from(Status.Request.Invalid,"Duplicate map key `key`."),Neo4jError.from(ex));
  }
}
