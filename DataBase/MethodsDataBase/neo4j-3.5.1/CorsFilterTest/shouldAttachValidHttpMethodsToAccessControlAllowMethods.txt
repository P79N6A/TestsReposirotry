@Test public void shouldAttachValidHttpMethodsToAccessControlAllowMethods() throws Exception {
  List<String> accessControlRequestMethods=asList("GET","WRONG","POST","TAKE","CONNECT");
  HttpServletRequest request=requestMock(accessControlRequestMethods,emptyList());
  filter.doFilter(request,response,chain);
  verify(response).addHeader(ACCESS_CONTROL_ALLOW_METHODS,"GET");
  verify(response).addHeader(ACCESS_CONTROL_ALLOW_METHODS,"POST");
  verify(response).addHeader(ACCESS_CONTROL_ALLOW_METHODS,"CONNECT");
  verify(response,never()).addHeader(ACCESS_CONTROL_ALLOW_METHODS,"TAKE");
  verify(response,never()).addHeader(ACCESS_CONTROL_ALLOW_METHODS,"WRONG");
}
