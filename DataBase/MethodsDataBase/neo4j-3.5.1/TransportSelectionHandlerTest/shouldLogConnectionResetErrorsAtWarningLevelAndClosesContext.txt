@Test public void shouldLogConnectionResetErrorsAtWarningLevelAndClosesContext() throws Exception {
  ChannelHandlerContext context=channelHandlerContextMock();
  AssertableLogProvider logging=new AssertableLogProvider();
  TransportSelectionHandler handler=new TransportSelectionHandler(null,null,false,false,logging,null);
  IOException connResetError=new IOException("Connection reset by peer");
  handler.exceptionCaught(context,connResetError);
  verify(context).close();
  logging.assertExactly(inLog(TransportSelectionHandler.class).warn("Fatal error occurred when initialising pipeline, " + "remote peer unexpectedly closed connection: %s",context.channel()));
}
