@Test public void shouldFailTransactionThatIndexesLargePropertyOnLabelAdd(){
  GraphDatabaseService db=dbRule.getGraphDatabaseAPI();
  IndexDefinition index=Neo4jMatchers.createIndex(db,LABEL,propertyKey);
  expectedException.expect(TransactionFailureException.class);
  try (Transaction tx=db.beginTx()){
    String otherLabel="SomethingElse";
    db.execute("CREATE (n:" + otherLabel + " {name: \""+ longString+ "\"})");
    try {
      db.execute("match (n:" + otherLabel + ")set n:"+ LABEL);
      fail("Argument was illegal");
    }
 catch (    IllegalArgumentException e) {
    }
    tx.success();
  }
   try (Transaction tx=db.beginTx()){
    ResourceIterator<Node> nodes=db.getAllNodes().iterator();
    assertFalse(nodes.hasNext());
  }
   db.shutdown();
}
