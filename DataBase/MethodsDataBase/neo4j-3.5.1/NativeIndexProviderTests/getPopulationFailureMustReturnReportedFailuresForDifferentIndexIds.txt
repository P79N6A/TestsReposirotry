@Test public void getPopulationFailureMustReturnReportedFailuresForDifferentIndexIds(){
  provider=newProvider();
  int first=1;
  int second=2;
  int third=3;
  IndexPopulator firstPopulator=provider.getPopulator(descriptor(first),samplingConfig());
  firstPopulator.create();
  IndexPopulator secondPopulator=provider.getPopulator(descriptor(second),samplingConfig());
  secondPopulator.create();
  IndexPopulator thirdPopulator=provider.getPopulator(descriptor(third),samplingConfig());
  thirdPopulator.create();
  String firstFailure="first failure";
  firstPopulator.markAsFailed(firstFailure);
  firstPopulator.close(false);
  secondPopulator.close(true);
  String thirdFailure="third failure";
  thirdPopulator.markAsFailed(thirdFailure);
  thirdPopulator.close(false);
  assertThat(provider.getPopulationFailure(descriptor(first)),is(firstFailure));
  assertThat(provider.getPopulationFailure(descriptor(third)),is(thirdFailure));
  try {
    provider.getPopulationFailure(descriptor(second));
    fail("Should have failed");
  }
 catch (  IllegalStateException e) {
  }
}
