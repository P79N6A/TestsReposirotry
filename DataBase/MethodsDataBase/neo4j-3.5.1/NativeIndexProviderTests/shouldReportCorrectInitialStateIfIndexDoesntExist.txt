@Test public void shouldReportCorrectInitialStateIfIndexDoesntExist(){
  provider=newProvider();
  InternalIndexState state=provider.getInitialState(descriptor());
  InternalIndexState expected=expectedStateOnNonExistingSubIndex();
  assertEquals(expected,state);
  if (InternalIndexState.POPULATING == expected) {
    logging.assertContainsLogCallContaining("Failed to open index");
  }
 else {
    logging.assertNoLogCallContaining("Failed to open index");
  }
}
