@Test public void getPopulationFailureMustThrowEvenIfFailureOnOtherIndex(){
  provider=newProvider();
  int nonFailedIndexId=NativeIndexProviderTests.indexId;
  IndexPopulator nonFailedPopulator=provider.getPopulator(descriptor(nonFailedIndexId),samplingConfig());
  nonFailedPopulator.create();
  nonFailedPopulator.close(true);
  int failedIndexId=2;
  IndexPopulator failedPopulator=provider.getPopulator(descriptor(failedIndexId),samplingConfig());
  failedPopulator.create();
  failedPopulator.markAsFailed("failure");
  failedPopulator.close(false);
  try {
    provider.getPopulationFailure(descriptor(nonFailedIndexId));
    fail("Should have failed");
  }
 catch (  IllegalStateException e) {
    assertThat(e.getMessage(),Matchers.containsString(Long.toString(nonFailedIndexId)));
  }
}
