@Documented("Add an existing node to unique index (not indexed).\n" + "\n" + "Associates a node with the given key/value pair in the given unique\n"+ "index.\n"+ "\n"+ "In this example, we are using `create_or_fail` uniqueness.") @Test public void addExistingNodeToUniqueIndexAdded() throws Exception {
  final String indexName=indexes.newInstance();
  final String key="some-key";
  final String value="some value";
  long nodeId=createNode();
  gen().expectedStatus(201).payload(JsonHelper.createJsonFrom(generateNodeIndexCreationPayload(key,value,functionalTestHelper.nodeUri(nodeId)))).post(functionalTestHelper.indexNodeUri(indexName) + "?uniqueness=create_or_fail");
  JaxRsResponse response=RestRequest.req().get(functionalTestHelper.indexNodeUri(indexName,key,URIHelper.encode(value)));
  String entity=response.getEntity();
  Collection<?> hits=(Collection<?>)JsonHelper.readJson(entity);
  assertEquals(1,hits.size());
}
