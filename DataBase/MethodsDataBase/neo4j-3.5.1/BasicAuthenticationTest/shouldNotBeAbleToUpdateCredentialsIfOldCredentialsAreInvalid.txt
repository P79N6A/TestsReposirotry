@Test public void shouldNotBeAbleToUpdateCredentialsIfOldCredentialsAreInvalid() throws Exception {
  exception.expect(AuthenticationException.class);
  exception.expect(hasStatus(Status.Security.Unauthorized));
  exception.expectMessage("The client is unauthorized due to authentication failure.");
  authentication.authenticate(map("scheme","basic","principal","bob","credentials",UTF8.encode("gelato"),"new_credentials",UTF8.encode("secret2")));
}
