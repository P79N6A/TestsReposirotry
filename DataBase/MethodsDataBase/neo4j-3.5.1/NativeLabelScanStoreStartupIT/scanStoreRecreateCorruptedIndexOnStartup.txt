@Test public void scanStoreRecreateCorruptedIndexOnStartup() throws Throwable {
  LabelScanStore labelScanStore=getLabelScanStore();
  GroupingRecoveryCleanupWorkCollector workCollector=getGroupingRecoveryCleanupWorkCollector();
  createTestNode();
  long[] labels=readNodesForLabel(labelScanStore);
  assertEquals("Label scan store see 1 label for node",1,labels.length);
  labelScanStore.force(IOLimiter.UNLIMITED);
  labelScanStore.shutdown();
  workCollector.shutdown();
  corruptLabelScanStoreFiles(dbRule.databaseLayout());
  workCollector.init();
  labelScanStore.init();
  workCollector.start();
  labelScanStore.start();
  long[] rebuildLabels=readNodesForLabel(labelScanStore);
  assertArrayEquals("Store should rebuild corrupted index",labels,rebuildLabels);
}
