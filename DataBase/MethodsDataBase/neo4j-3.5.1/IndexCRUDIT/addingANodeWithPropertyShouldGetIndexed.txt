@Test public void addingANodeWithPropertyShouldGetIndexed() throws Exception {
  String indexProperty="indexProperty";
  GatheringIndexWriter writer=newWriter();
  createIndex(db,myLabel,indexProperty);
  int value1=12;
  String otherProperty="otherProperty";
  int otherValue=17;
  Node node=createNode(map(indexProperty,value1,otherProperty,otherValue),myLabel);
  try (Transaction tx=db.beginTx()){
    KernelTransaction ktx=ctxSupplier.getKernelTransactionBoundToThisThread(true);
    TokenRead tokenRead=ktx.tokenRead();
    int propertyKey1=tokenRead.propertyKey(indexProperty);
    int label=tokenRead.nodeLabel(myLabel.name());
    LabelSchemaDescriptor descriptor=SchemaDescriptorFactory.forLabel(label,propertyKey1);
    assertThat(writer.updatesCommitted,equalTo(asSet(IndexEntryUpdate.add(node.getId(),descriptor,Values.of(value1)))));
    tx.success();
  }
 }
