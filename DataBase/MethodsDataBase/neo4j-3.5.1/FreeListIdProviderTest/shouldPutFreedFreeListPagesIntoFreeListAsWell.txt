@Test void shouldPutFreedFreeListPagesIntoFreeListAsWell() throws Exception {
  long prevId;
  long acquiredId=BASE_ID + 1;
  long freelistPageId=BASE_ID + 1;
  MutableLongSet released=new LongHashSet();
  do {
    prevId=acquiredId;
    acquiredId=freelist.acquireNewId(GENERATION_ONE,GENERATION_TWO);
    freelist.releaseId(GENERATION_ONE,GENERATION_TWO,acquiredId);
    released.add(acquiredId);
  }
 while (acquiredId - prevId == 1);
  while (!released.isEmpty()) {
    long reAcquiredId=freelist.acquireNewId(GENERATION_TWO,GENERATION_THREE);
    released.remove(reAcquiredId);
  }
  assertEquals(freelistPageId,freelist.acquireNewId(GENERATION_THREE,GENERATION_FOUR));
}
