@Test void shouldCoordinateUsingFileSystem() throws Exception {
  Path temporaryDirectory=temporaryDirectory();
  PortRepository portRepository1=new PortRepository(temporaryDirectory,EphemeralPortMinimum);
  PortRepository portRepository2=new PortRepository(temporaryDirectory,EphemeralPortMinimum);
  int port1=portRepository1.reserveNextPort("foo");
  int port2=portRepository1.reserveNextPort("foo");
  int port3=portRepository1.reserveNextPort("foo");
  int port4=portRepository2.reserveNextPort("foo");
  int port5=portRepository2.reserveNextPort("foo");
  int port6=portRepository1.reserveNextPort("foo");
  assertThat(new HashSet<>(asList(port1,port2,port3,port4,port5,port6)).size(),is(6));
}
