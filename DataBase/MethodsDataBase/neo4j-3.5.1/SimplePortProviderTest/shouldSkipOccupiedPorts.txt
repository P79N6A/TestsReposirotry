@Test void shouldSkipOccupiedPorts(){
  PortProbe portProbe=mock(PortProbe.class);
  PortProvider portProvider=new SimplePortProvider(portProbe,40);
  when(portProbe.isOccupied(40)).thenReturn(false);
  when(portProbe.isOccupied(41)).thenReturn(false);
  when(portProbe.isOccupied(42)).thenReturn(true);
  when(portProbe.isOccupied(43)).thenReturn(false);
  assertThat(portProvider.getNextFreePort("foo"),is(40));
  assertThat(portProvider.getNextFreePort("foo"),is(41));
  assertThat(portProvider.getNextFreePort("foo"),is(43));
}
