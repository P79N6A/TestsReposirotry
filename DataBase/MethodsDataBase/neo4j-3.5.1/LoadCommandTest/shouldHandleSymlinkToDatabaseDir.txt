@Test @DisabledOnOs(OS.WINDOWS) void shouldHandleSymlinkToDatabaseDir() throws IOException, CommandFailed, IncorrectUsage, IncorrectFormat {
  Path symDir=testDirectory.directory("path-to-links").toPath();
  Path realDatabaseDir=symDir.resolve("foo.db");
  Path dataDir=testDirectory.directory("some-other-path").toPath();
  Path databaseDir=dataDir.resolve("databases/foo.db");
  Files.createDirectories(realDatabaseDir);
  Files.createDirectories(dataDir.resolve("databases"));
  Files.createSymbolicLink(databaseDir,realDatabaseDir);
  Files.write(configDir.resolve(Config.DEFAULT_CONFIG_FILE_NAME),singletonList(formatProperty(data_directory,dataDir)));
  execute("foo.db");
  verify(loader).load(any(),eq(realDatabaseDir),eq(realDatabaseDir));
}
