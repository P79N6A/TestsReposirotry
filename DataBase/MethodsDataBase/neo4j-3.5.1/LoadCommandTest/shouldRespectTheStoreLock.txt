@Test void shouldRespectTheStoreLock() throws IOException {
  Path databaseDirectory=homeDir.resolve("data/databases/foo.db");
  Files.createDirectories(databaseDirectory);
  StoreLayout storeLayout=DatabaseLayout.of(databaseDirectory.toFile()).getStoreLayout();
  try (FileSystemAbstraction fileSystem=new DefaultFileSystemAbstraction();StoreLocker locker=new StoreLocker(fileSystem,storeLayout)){
    locker.checkLock();
    CommandFailed commandFailed=assertThrows(CommandFailed.class,() -> execute("foo.db","--force"));
    assertEquals("the database is in use -- stop Neo4j and try again",commandFailed.getMessage());
  }
 }
