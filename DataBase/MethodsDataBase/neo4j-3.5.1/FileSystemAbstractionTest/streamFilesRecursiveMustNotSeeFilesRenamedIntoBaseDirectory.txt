@Test void streamFilesRecursiveMustNotSeeFilesRenamedIntoBaseDirectory() throws Exception {
  File a=existingFile("a");
  File sub=existingDirectory("sub");
  File x=new File(sub,"x");
  ensureExists(x);
  File target=nonExistingFile("target");
  Set<File> observedFiles=new HashSet<>();
  fsa.streamFilesRecursive(a.getParentFile()).forEach(fh -> {
    File file=fh.getFile();
    observedFiles.add(file);
    if (file.equals(x)) {
      handleRename(target).accept(fh);
    }
  }
);
  assertThat(observedFiles,containsInAnyOrder(a,x));
}
