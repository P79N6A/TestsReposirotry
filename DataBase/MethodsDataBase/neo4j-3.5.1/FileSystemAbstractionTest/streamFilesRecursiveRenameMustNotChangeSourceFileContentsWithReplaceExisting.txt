@Test void streamFilesRecursiveRenameMustNotChangeSourceFileContentsWithReplaceExisting() throws Exception {
  File a=existingFile("a");
  File b=existingFile("b");
  generateFileWithRecords(a,recordCount);
  generateFileWithRecords(b,recordCount + recordsPerFilePage);
  try (StoreChannel channel=fsa.open(b,OpenMode.READ_WRITE)){
    ThreadLocalRandom rng=ThreadLocalRandom.current();
    int fileSize=(int)channel.size();
    ByteBuffer buffer=ByteBuffer.allocate(fileSize);
    for (int i=0; i < fileSize; i++) {
      buffer.put(i,(byte)rng.nextInt());
    }
    buffer.rewind();
    channel.writeAll(buffer);
  }
   FileHandle handle=fsa.streamFilesRecursive(a).findAny().get();
  handle.rename(b,REPLACE_EXISTING);
  verifyRecordsInFile(b,recordCount);
}
