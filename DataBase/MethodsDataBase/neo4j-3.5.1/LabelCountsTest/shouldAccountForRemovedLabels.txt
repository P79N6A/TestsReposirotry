@Test public void shouldAccountForRemovedLabels(){
  GraphDatabaseService graphDb=db.getGraphDatabaseAPI();
  Node n1;
  Node n2;
  Node n3;
  try (Transaction tx=graphDb.beginTx()){
    n1=graphDb.createNode(label("Foo"),label("Bar"));
    n2=graphDb.createNode(label("Bar"));
    n3=graphDb.createNode(label("Foo"));
    tx.success();
  }
   try (Transaction tx=graphDb.beginTx()){
    n1.removeLabel(label("Bar"));
    n2.removeLabel(label("Bar"));
    n3.removeLabel(label("Foo"));
    tx.success();
  }
   long fooCount=numberOfNodesWith(label("Foo"));
  long barCount=numberOfNodesWith(label("Bar"));
  assertEquals(1,fooCount);
  assertEquals(0,barCount);
}
