@Test public void shouldChunkDataWhoseSizeIsGreaterThanOutputBufferCapacity() throws IOException {
  out.beginMessage();
  byte[] bytes=new byte[16];
  Arrays.fill(bytes,(byte)42);
  out.writeBytes(bytes,0,16);
  out.messageSucceeded();
  out.flush();
  ByteBuf outboundMessage=peekSingleOutboundMessage();
  Number[] chunk1Body=new Number[14];
  Arrays.fill(chunk1Body,(byte)42);
  Number[] chunk2Body=new Number[2];
  Arrays.fill(chunk2Body,(byte)42);
  assertByteBufEqual(outboundMessage,chunkContaining(chunk1Body) + chunkContaining(chunk2Body) + messageBoundary());
}
