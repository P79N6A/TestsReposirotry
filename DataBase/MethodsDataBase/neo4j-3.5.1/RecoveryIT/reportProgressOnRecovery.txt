@Test public void reportProgressOnRecovery() throws IOException {
  GraphDatabaseService database=startDatabase(directory.databaseDir());
  for (int i=0; i < 10; i++) {
    try (Transaction transaction=database.beginTx()){
      database.createNode();
      transaction.success();
    }
   }
  File restoreDbStoreDir=copyTransactionLogs();
  GraphDatabaseService recoveredDatabase=startDatabase(restoreDbStoreDir);
  try (Transaction transaction=recoveredDatabase.beginTx()){
    assertEquals(10,count(recoveredDatabase.getAllNodes()));
  }
   logProvider.assertContainsMessageContaining("10% completed");
  logProvider.assertContainsMessageContaining("100% completed");
  database.shutdown();
  recoveredDatabase.shutdown();
}
