@Test public void concurrentTransactionAppendingTest() throws Exception {
  int threads=10;
  Callable<Long> runner=new Builder().with(untilTimeExpired(10,SECONDS)).withWorkingDirectory(directory.databaseLayout()).withNumThreads(threads).build();
  long appendedTxs=runner.call();
  assertEquals(new TransactionIdChecker(directory.databaseLayout().databaseDirectory()).parseAllTxLogs(),appendedTxs);
}
