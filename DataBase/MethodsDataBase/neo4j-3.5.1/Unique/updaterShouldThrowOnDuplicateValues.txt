@Test public void updaterShouldThrowOnDuplicateValues() throws Exception {
  populator.create();
  IndexEntryUpdate<IndexDescriptor>[] updates=valueCreatorUtil.someUpdatesWithDuplicateValues(random);
  IndexUpdater updater=populator.newPopulatingUpdater(null_property_accessor);
  for (  IndexEntryUpdate<IndexDescriptor> update : updates) {
    updater.process(update);
  }
  try {
    updater.close();
    fail("Updates should have conflicted");
  }
 catch (  Exception e) {
    assertTrue(e.getMessage(),Exceptions.contains(e,IndexEntryConflictException.class));
  }
 finally {
    populator.close(true);
  }
}
