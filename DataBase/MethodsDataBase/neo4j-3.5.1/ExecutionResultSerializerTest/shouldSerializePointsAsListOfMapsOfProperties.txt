@Test public void shouldSerializePointsAsListOfMapsOfProperties() throws Exception {
  ByteArrayOutputStream output=new ByteArrayOutputStream();
  ExecutionResultSerializer serializer=getSerializerWith(output);
  Result executionResult=mockExecutionResult(map("geom",SpatialMocks.mockPoint(12.3,45.6,mockWGS84())),map("geom",SpatialMocks.mockPoint(123,456,mockCartesian())),map("geom",SpatialMocks.mockPoint(12.3,45.6,78.9,mockWGS84_3D())),map("geom",SpatialMocks.mockPoint(123,456,789,mockCartesian_3D())));
  serializer.statementResult(executionResult,false);
  serializer.finish();
  String result=output.toString(UTF_8.name());
  assertEquals("{\"results\":[{\"columns\":[\"geom\"],\"data\":[" + "{\"row\":[{\"type\":\"Point\",\"coordinates\":[12.3,45.6],\"crs\":" + "{\"srid\":4326,\"name\":\"WGS-84\",\"type\":\"link\",\"properties\":"+ "{\"href\":\"http://spatialreference.org/ref/epsg/4326/ogcwkt/\",\"type\":\"ogcwkt\"}"+ "}}],\"meta\":[{\"type\":\"point\"}]},"+ "{\"row\":[{\"type\":\"Point\",\"coordinates\":[123.0,456.0],\"crs\":"+ "{\"srid\":7203,\"name\":\"cartesian\",\"type\":\"link\",\"properties\":"+ "{\"href\":\"http://spatialreference.org/ref/sr-org/7203/ogcwkt/\",\"type\":\"ogcwkt\"}"+ "}}],\"meta\":[{\"type\":\"point\"}]},"+ "{\"row\":[{\"type\":\"Point\",\"coordinates\":[12.3,45.6,78.9],\"crs\":"+ "{\"srid\":4979,\"name\":\"WGS-84-3D\",\"type\":\"link\",\"properties\":"+ "{\"href\":\"http://spatialreference.org/ref/epsg/4979/ogcwkt/\",\"type\":\"ogcwkt\"}"+ "}}],\"meta\":[{\"type\":\"point\"}]},"+ "{\"row\":[{\"type\":\"Point\",\"coordinates\":[123.0,456.0,789.0],\"crs\":"+ "{\"srid\":9157,\"name\":\"cartesian-3D\",\"type\":\"link\",\"properties\":"+ "{\"href\":\"http://spatialreference.org/ref/sr-org/9157/ogcwkt/\",\"type\":\"ogcwkt\"}"+ "}}],\"meta\":[{\"type\":\"point\"}]}"+ "]}],\"errors\":[]}",result);
}
