@Test void createFailPartitionedIndex() throws Exception {
  try (SchemaIndex failedIndex=LuceneSchemaIndexBuilder.create(descriptor,config).withFileSystem(fileSystem).withIndexRootFolder(new File(testDir.directory("failedIndexFolder"),"failedIndex")).build()){
    failedIndex.open();
    addDocumentToIndex(failedIndex,35);
    assertEquals(4,failedIndex.getPartitions().size());
    failedIndex.markAsFailed("Some failure");
    failedIndex.flush();
    assertTrue(failedIndex.isOpen());
    assertFalse(failedIndex.isOnline());
  }
 }
