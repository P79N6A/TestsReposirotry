@Test public void shouldDispatchRun() throws Exception {
  BoltStateMachine stateMachine=mock(BoltStateMachine.class);
  SynchronousBoltConnection connection=new SynchronousBoltConnection(stateMachine);
  channel=new EmbeddedChannel(newDecoder(connection));
  String statement="RETURN 1";
  MapValue parameters=ValueUtils.asMapValue(MapUtil.map("param1",1,"param2","2","param3",true,"param4",5.0));
  channel.writeInbound(Unpooled.wrappedBuffer(serialize(packerUnderTest,new RunMessage(statement,parameters))));
  channel.finishAndReleaseAll();
  verify(stateMachine).process(eq(new RunMessage(statement,parameters)),any());
}
