@Test void createWritablePartition() throws Exception {
  try (AbstractIndexPartition indexPartition=new WritableIndexPartitionFactory(IndexWriterConfigs::standard).createPartition(testDirectory.directory(),directory)){
    try (IndexWriter indexWriter=indexPartition.getIndexWriter()){
      indexWriter.addDocument(new Document());
      indexWriter.commit();
      indexPartition.maybeRefreshBlocking();
      try (PartitionSearcher searcher=indexPartition.acquireSearcher()){
        assertEquals(1,searcher.getIndexSearcher().getIndexReader().numDocs(),"We should be able to see newly added document ");
      }
     }
   }
 }
