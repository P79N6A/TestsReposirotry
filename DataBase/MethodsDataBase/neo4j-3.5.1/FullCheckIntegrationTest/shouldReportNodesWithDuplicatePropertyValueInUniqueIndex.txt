@Test public void shouldReportNodesWithDuplicatePropertyValueInUniqueIndex() throws Exception {
  IndexSamplingConfig samplingConfig=new IndexSamplingConfig(Config.defaults());
  Iterator<StoreIndexDescriptor> indexRuleIterator=new SchemaStorage(fixture.directStoreAccess().nativeStores().getSchemaStore()).indexesGetAll();
  while (indexRuleIterator.hasNext()) {
    StoreIndexDescriptor indexRule=indexRuleIterator.next();
    IndexAccessor accessor=fixture.directStoreAccess().indexes().lookup(indexRule.providerDescriptor()).getOnlineAccessor(indexRule,samplingConfig);
    IndexUpdater updater=accessor.newUpdater(IndexUpdateMode.ONLINE);
    updater.process(IndexEntryUpdate.add(42,indexRule.schema(),values(indexRule)));
    updater.close();
    accessor.force(IOLimiter.UNLIMITED);
    accessor.close();
  }
  ConsistencySummaryStatistics stats=check();
  on(stats).verify(RecordType.NODE,1).verify(RecordType.INDEX,3).andThatsAllFolks();
}
