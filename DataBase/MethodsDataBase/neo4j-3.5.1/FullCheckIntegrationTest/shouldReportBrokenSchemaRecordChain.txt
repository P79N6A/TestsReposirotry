@Test public void shouldReportBrokenSchemaRecordChain() throws Exception {
  fixture.apply(new GraphStoreFixture.Transaction(){
    @Override protected void transactionData(    GraphStoreFixture.TransactionDataBuilder tx,    GraphStoreFixture.IdGenerator next){
      DynamicRecord schema=new DynamicRecord(next.schema());
      DynamicRecord schemaBefore=schema.clone();
      schema.setNextBlock(next.schema());
      StoreIndexDescriptor rule=indexRule(schema.getId(),label1,key1,DESCRIPTOR);
      schema.setData(SchemaRuleSerialization.serialize(rule));
      tx.createSchema(asList(schemaBefore),asList(schema),rule);
    }
  }
);
  ConsistencySummaryStatistics stats=check();
  on(stats).verify(RecordType.SCHEMA,3).andThatsAllFolks();
}
