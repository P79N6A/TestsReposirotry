@Test public void shouldRemovePropertyFromRelationship() throws Exception {
  long relationshipId;
  String propertyKey="prop";
  try (org.neo4j.graphdb.Transaction tx=graphDb.beginTx()){
    Node node1=graphDb.createNode();
    Node node2=graphDb.createNode();
    Relationship proxy=node1.createRelationshipTo(node2,RelationshipType.withName("R"));
    relationshipId=proxy.getId();
    proxy.setProperty(propertyKey,42);
    tx.success();
  }
   try (Transaction tx=beginTransaction()){
    int token=tx.token().propertyKeyGetOrCreateForName(propertyKey);
    assertThat(tx.dataWrite().relationshipRemoveProperty(relationshipId,token),equalTo(intValue(42)));
    tx.success();
  }
   try (org.neo4j.graphdb.Transaction ignore=graphDb.beginTx()){
    assertFalse(graphDb.getRelationshipById(relationshipId).hasProperty("prop"));
  }
 }
