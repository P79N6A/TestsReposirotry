@Test public void shouldUpdatePropertyToRelationship() throws Exception {
  long relationshipId;
  String propertyKey="prop";
  try (org.neo4j.graphdb.Transaction tx=graphDb.beginTx()){
    Node node1=graphDb.createNode();
    Node node2=graphDb.createNode();
    Relationship r=node1.createRelationshipTo(node2,RelationshipType.withName("R"));
    r.setProperty(propertyKey,42);
    relationshipId=r.getId();
    tx.success();
  }
   try (Transaction tx=beginTransaction()){
    int token=tx.token().propertyKeyGetOrCreateForName(propertyKey);
    assertThat(tx.dataWrite().relationshipSetProperty(relationshipId,token,stringValue("hello")),equalTo(intValue(42)));
    tx.success();
  }
   try (org.neo4j.graphdb.Transaction ignore=graphDb.beginTx()){
    assertThat(graphDb.getRelationshipById(relationshipId).getProperty("prop"),equalTo("hello"));
  }
 }
