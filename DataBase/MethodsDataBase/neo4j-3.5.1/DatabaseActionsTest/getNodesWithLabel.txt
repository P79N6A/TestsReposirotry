@Test public void getNodesWithLabel(){
  String label1="first";
  String label2="second";
  long node1=graphdbHelper.createNode(label(label1));
  long node2=graphdbHelper.createNode(label(label1),label(label2));
  graphdbHelper.createNode(label(label2));
  List<Object> representation;
  try (Transaction transaction=graph.beginTx()){
    representation=serialize(actions.getNodesWithLabel(label1,map()));
  }
   assertEquals(asSet(node1,node2),Iterables.asSet(Iterables.map(from -> {
    Map<?,?> nodeMap=(Map<?,?>)from;
    return nodeUriToId((String)nodeMap.get("self"));
  }
,representation)));
}
