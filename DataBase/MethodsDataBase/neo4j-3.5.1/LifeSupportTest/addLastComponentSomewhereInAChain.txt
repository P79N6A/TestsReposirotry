@Test void addLastComponentSomewhereInAChain(){
  LifeSupport lifeSupport=newLifeSupport();
  Lifecycle notLastComponent1=mock(Lifecycle.class);
  Lifecycle notLastComponent2=mock(Lifecycle.class);
  Lifecycle lastComponent=mock(Lifecycle.class);
  Lifecycle notLastComponent3=mock(Lifecycle.class);
  Lifecycle notLastComponent4=mock(Lifecycle.class);
  lifeSupport.add(notLastComponent1);
  lifeSupport.add(notLastComponent2);
  lifeSupport.setLast(lastComponent);
  lifeSupport.add(notLastComponent3);
  lifeSupport.add(notLastComponent4);
  lifeSupport.start();
  List<Lifecycle> lifecycleInstances=lifeSupport.getLifecycleInstances();
  assertSame(notLastComponent1,lifecycleInstances.get(0));
  assertSame(notLastComponent2,lifecycleInstances.get(1));
  assertSame(notLastComponent3,lifecycleInstances.get(2));
  assertSame(notLastComponent4,lifecycleInstances.get(3));
  assertSame(lastComponent,lifecycleInstances.get(4));
  assertThat(lifecycleInstances,hasSize(5));
}
