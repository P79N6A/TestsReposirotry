@Test public void updateDynamicShouldLogExceptionsFromUpdateListeners(){
  Config config=Config.builder().withConfigClasses(singletonList(new MyDynamicSettings())).build();
  IllegalStateException exception=new IllegalStateException("Boo");
  config.registerDynamicUpdateListener(MyDynamicSettings.boolSetting,(a,b) -> {
    throw exception;
  }
);
  Log log=mock(Log.class);
  config.setLogger(log);
  String settingName=MyDynamicSettings.boolSetting.name();
  config.updateDynamicSetting(settingName,"",ORIGIN);
  verify(log).error("Failure when notifying listeners after dynamic setting change; " + "new setting might not have taken effect: Boo",exception);
}
