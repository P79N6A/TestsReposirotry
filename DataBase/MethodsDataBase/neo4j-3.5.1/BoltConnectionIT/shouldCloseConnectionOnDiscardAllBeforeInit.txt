@Test public void shouldCloseConnectionOnDiscardAllBeforeInit() throws Throwable {
  BoltStateMachine machine=env.newMachine(BOLT_CHANNEL);
  BoltResponseRecorder recorder=new BoltResponseRecorder();
  verifyKillsConnection(() -> machine.process(DiscardAllMessage.INSTANCE,recorder));
  assertThat(recorder.nextResponse(),failedWithStatus(Status.Request.Invalid));
}
