@Test public void shouldCloseTransactionOnCommit() throws Exception {
  BoltStateMachine machine=env.newMachine(BOLT_CHANNEL);
  machine.process(new InitMessage(USER_AGENT,emptyMap()),nullResponseHandler());
  runAndPull(machine,"BEGIN");
  runAndPull(machine,"RETURN 1");
  runAndPull(machine,"COMMIT");
  assertFalse(hasTransaction(machine));
}
