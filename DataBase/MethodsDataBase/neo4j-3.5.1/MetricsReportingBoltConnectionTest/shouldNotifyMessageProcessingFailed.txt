@Test public void shouldNotifyMessageProcessingFailed(){
  BoltConnectionMetricsMonitor metricsMonitor=mock(BoltConnectionMetricsMonitor.class);
  BoltConnection connection=newConnection(metricsMonitor);
  connection.start();
  connection.enqueue(machine -> {
    throw new BoltConnectionAuthFatality("some error",new RuntimeException());
  }
);
  connection.processNextBatch();
  verify(metricsMonitor).messageProcessingFailed();
}
