@Test public void shouldKernelPanicIfTransactionIdsMismatch() throws Throwable {
  BatchingTransactionAppender appender=life.add(createTransactionAppender());
  when(transactionIdStore.nextCommittingTransactionId()).thenReturn(42L);
  TransactionToApply batch=new TransactionToApply(mock(TransactionRepresentation.class),43L);
  try {
    appender.append(batch,LogAppendEvent.NULL);
    fail("should have thrown ");
  }
 catch (  IllegalStateException ex) {
    verify(databaseHealth,times(1)).panic(ex);
  }
}
