@Test public void readRelationshipCommandWithFixedReferenceFormat300() throws IOException {
  InMemoryClosableChannel channel=new InMemoryClosableChannel();
  RelationshipRecord before=new RelationshipRecord(42,true,1,2,3,4,5,6,7,true,true);
  before.setUseFixedReferences(true);
  RelationshipRecord after=new RelationshipRecord(42,true,1,8,3,4,5,6,7,true,true);
  after.setUseFixedReferences(true);
  new Command.RelationshipCommand(before,after).serialize(channel);
  PhysicalLogCommandReaderV3_0 reader=new PhysicalLogCommandReaderV3_0();
  Command command=reader.read(channel);
  assertTrue(command instanceof Command.RelationshipCommand);
  Command.RelationshipCommand relationshipCommand=(Command.RelationshipCommand)command;
  assertEquals(before,relationshipCommand.getBefore());
  assertTrue(relationshipCommand.getBefore().isUseFixedReferences());
  assertEquals(after,relationshipCommand.getAfter());
  assertTrue(relationshipCommand.getAfter().isUseFixedReferences());
}
