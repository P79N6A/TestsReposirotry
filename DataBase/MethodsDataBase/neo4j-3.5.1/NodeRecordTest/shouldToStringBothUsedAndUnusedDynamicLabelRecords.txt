@Test public void shouldToStringBothUsedAndUnusedDynamicLabelRecords(){
  IdSequence ids=mock(IdSequence.class);
  when(ids.nextId()).thenReturn(1L,2L);
  ReusableRecordsAllocator recordAllocator=new ReusableRecordsAllocator(30,new DynamicRecord(1),new DynamicRecord(2));
  NodeRecord node=newUsedNodeRecord(0);
  long labelId=10_123;
  Collection<DynamicRecord> existing=allocateRecordsForDynamicLabels(node.getId(),new long[]{labelId},recordAllocator);
  DynamicRecord unused=newDeletedDynamicRecord(ids.nextId());
  unused.setInUse(false);
  existing.add(unused);
  node.setLabelField(dynamicPointer(existing),existing);
  String toString=node.toString();
  assertThat(toString,containsString(String.valueOf(labelId)));
  assertThat(toString,containsString(unused.toString()));
}
