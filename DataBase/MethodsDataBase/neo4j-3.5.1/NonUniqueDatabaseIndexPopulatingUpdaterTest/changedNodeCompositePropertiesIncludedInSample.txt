@Test void changedNodeCompositePropertiesIncludedInSample() throws Exception {
  NonUniqueIndexSampler sampler=newSampler();
  NonUniqueLuceneIndexPopulatingUpdater updater=newUpdater(sampler);
  updater.process(add(1,COMPOSITE_SCHEMA_DESCRIPTOR,"bit","initial1"));
  updater.process(add(2,COMPOSITE_SCHEMA_DESCRIPTOR,"bit","initial2"));
  updater.process(add(3,COMPOSITE_SCHEMA_DESCRIPTOR,"bit","new2"));
  updater.process(change(1,COMPOSITE_SCHEMA_DESCRIPTOR,new Object[]{"bit","initial1"},new Object[]{"bit","new1"}));
  updater.process(change(1,COMPOSITE_SCHEMA_DESCRIPTOR,new Object[]{"bit","initial2"},new Object[]{"bit","new2"}));
  verifySamplingResult(sampler,3,2,3);
}
