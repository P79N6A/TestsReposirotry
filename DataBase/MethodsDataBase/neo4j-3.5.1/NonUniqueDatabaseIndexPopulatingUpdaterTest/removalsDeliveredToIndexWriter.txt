@Test void removalsDeliveredToIndexWriter() throws Exception {
  LuceneIndexWriter writer=mock(LuceneIndexWriter.class);
  NonUniqueLuceneIndexPopulatingUpdater updater=newUpdater(writer);
  updater.process(remove(1,SCHEMA_DESCRIPTOR,"foo"));
  verify(writer).deleteDocuments(newTermForChangeOrRemove(1));
  updater.process(remove(2,SCHEMA_DESCRIPTOR,"bar"));
  verify(writer).deleteDocuments(newTermForChangeOrRemove(2));
  updater.process(remove(3,SCHEMA_DESCRIPTOR,"baz"));
  verify(writer).deleteDocuments(newTermForChangeOrRemove(3));
  updater.process(remove(4,COMPOSITE_SCHEMA_DESCRIPTOR,"bit","baz"));
  verify(writer).deleteDocuments(newTermForChangeOrRemove(4));
}
