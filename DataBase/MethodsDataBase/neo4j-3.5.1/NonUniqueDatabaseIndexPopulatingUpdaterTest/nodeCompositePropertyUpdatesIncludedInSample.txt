@Test void nodeCompositePropertyUpdatesIncludedInSample() throws Exception {
  NonUniqueIndexSampler sampler=newSampler();
  NonUniqueLuceneIndexPopulatingUpdater updater=newUpdater(sampler);
  updater.process(add(1,COMPOSITE_SCHEMA_DESCRIPTOR,"bit","foo"));
  updater.process(change(1,COMPOSITE_SCHEMA_DESCRIPTOR,new Object[]{"bit","foo"},new Object[]{"bit","newFoo1"}));
  updater.process(add(2,COMPOSITE_SCHEMA_DESCRIPTOR,"bit","bar"));
  updater.process(remove(2,COMPOSITE_SCHEMA_DESCRIPTOR,"bit","bar"));
  updater.process(change(1,COMPOSITE_SCHEMA_DESCRIPTOR,new Object[]{"bit","newFoo1"},new Object[]{"bit","newFoo2"}));
  updater.process(add(42,COMPOSITE_SCHEMA_DESCRIPTOR,"bit","qux"));
  updater.process(add(3,COMPOSITE_SCHEMA_DESCRIPTOR,"bit","bar"));
  updater.process(add(4,COMPOSITE_SCHEMA_DESCRIPTOR,"bit","baz"));
  updater.process(add(5,COMPOSITE_SCHEMA_DESCRIPTOR,"bit","bar"));
  updater.process(remove(42,COMPOSITE_SCHEMA_DESCRIPTOR,"bit","qux"));
  verifySamplingResult(sampler,4,3,4);
}
