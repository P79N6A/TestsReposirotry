@Test public void shouldConvertAddRemoveToChange(){
  PropertyContainerStateImpl state=new PropertyContainerStateImpl(1,OnHeapCollectionsFactory.INSTANCE);
  state.removeProperty(4);
  state.addProperty(4,Values.of("another value"));
  assertThat(Iterators.asList(state.changedProperties()),equalTo(asList(new PropertyKeyValue(4,Values.of("another value")))));
  assertFalse(state.addedProperties().hasNext());
  assertTrue(state.removedProperties().isEmpty());
}
