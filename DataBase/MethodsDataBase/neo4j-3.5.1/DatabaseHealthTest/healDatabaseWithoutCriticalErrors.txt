@Test public void healDatabaseWithoutCriticalErrors(){
  AssertableLogProvider logProvider=new AssertableLogProvider();
  DatabaseHealth databaseHealth=new DatabaseHealth(mock(DatabasePanicEventGenerator.class),logProvider.getLog(DatabaseHealth.class));
  assertTrue(databaseHealth.isHealthy());
  databaseHealth.panic(new IOException("Space exception."));
  assertFalse(databaseHealth.isHealthy());
  assertTrue(databaseHealth.healed());
  logProvider.assertContainsLogCallContaining("Database health set to OK");
  logProvider.assertNoMessagesContaining("Database encountered a critical error and can't be healed. Restart required.");
}
