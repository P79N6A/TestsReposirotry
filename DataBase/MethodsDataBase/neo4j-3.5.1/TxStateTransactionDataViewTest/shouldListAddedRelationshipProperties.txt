@Test public void shouldListAddedRelationshipProperties() throws Exception {
  Value prevValue=Values.of("prevValue");
  int propertyKeyId=ops.propertyKeyTokenHolder().getOrCreateId("theKey");
  state.relationshipDoReplaceProperty(1L,propertyKeyId,prevValue,Values.of("newValue"));
  ops.withRelationship(1,0,0,0,genericMap("theKey",prevValue));
  Iterable<PropertyEntry<Relationship>> propertyEntries=snapshot().assignedRelationshipProperties();
  PropertyEntry<Relationship> entry=single(propertyEntries);
  assertThat(entry.key(),equalTo("theKey"));
  assertThat(entry.value(),equalTo("newValue"));
  assertThat(entry.previouslyCommitedValue(),equalTo("prevValue"));
  assertThat(entry.entity().getId(),equalTo(1L));
}
