@Test public void shouldNotLoadNoneWhiteListedFunction() throws Throwable {
  Log log=spy(Log.class);
  procedureCompiler=new ReflectiveProcedureCompiler(new TypeMappers(),components,new ComponentRegistry(),log,new ProcedureConfig(Config.defaults(GraphDatabaseSettings.procedure_whitelist,"WrongName")));
  List<CallableUserAggregationFunction> method=compile(SingleAggregationFunction.class);
  verify(log).warn("The function 'org.neo4j.kernel.impl.proc.collectCool' is not on the whitelist and won't be loaded.");
  assertThat(method.size(),equalTo(0));
}
