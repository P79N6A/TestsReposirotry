@Test public void shouldDeleteIdGeneratorsWhenOpeningExistingStore() throws IOException {
  long expectedHighId;
  try (BatchingNeoStores stores=BatchingNeoStores.batchingNeoStoresWithExternalPageCache(storage.fileSystem(),storage.pageCache(),PageCacheTracer.NULL,storage.directory().absolutePath(),LATEST_RECORD_FORMATS,DEFAULT,NullLogService.getInstance(),EMPTY,Config.defaults())){
    stores.createNew();
    RelationshipStore relationshipStore=stores.getRelationshipStore();
    RelationshipRecord record=relationshipStore.newRecord();
    long no=NULL_REFERENCE.longValue();
    record.initialize(true,no,1,2,0,no,no,no,no,true,true);
    record.setId(relationshipStore.nextId());
    expectedHighId=relationshipStore.getHighId();
    relationshipStore.updateRecord(record);
    relationshipStore.setHighId(record.getId() + 999);
  }
   try (BatchingNeoStores stores=BatchingNeoStores.batchingNeoStoresWithExternalPageCache(storage.fileSystem(),storage.pageCache(),PageCacheTracer.NULL,storage.directory().absolutePath(),LATEST_RECORD_FORMATS,DEFAULT,NullLogService.getInstance(),EMPTY,Config.defaults())){
    stores.pruneAndOpenExistingStore(Predicates.alwaysTrue(),Predicates.alwaysTrue());
    assertEquals(expectedHighId,stores.getRelationshipStore().getHighId());
  }
 }
