@Test public void shouldDeleteOnCloseIfOpenOptionsSaysSo(){
  DatabaseLayout databaseLayout=dir.databaseLayout();
  File nodeStore=databaseLayout.nodeStore();
  File idFile=databaseLayout.idFile(DatabaseFile.NODE_STORE).orElseThrow(() -> new IllegalStateException("Node store id file not found."));
  FileSystemAbstraction fs=fileSystemRule.get();
  PageCache pageCache=pageCacheRule.getPageCache(fs,Config.defaults());
  TheStore store=new TheStore(nodeStore,databaseLayout.idNodeStore(),config,idType,new DefaultIdGeneratorFactory(fs),pageCache,NullLogProvider.getInstance(),recordFormat,DELETE_ON_CLOSE);
  store.initialise(true);
  store.makeStoreOk();
  assertTrue(fs.fileExists(nodeStore));
  assertTrue(fs.fileExists(idFile));
  store.close();
  assertFalse(fs.fileExists(nodeStore));
  assertFalse(fs.fileExists(idFile));
}
