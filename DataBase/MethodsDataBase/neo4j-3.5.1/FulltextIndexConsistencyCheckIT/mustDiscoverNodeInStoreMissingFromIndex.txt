@Test public void mustDiscoverNodeInStoreMissingFromIndex() throws Exception {
  GraphDatabaseService db=createDatabase();
  try (Transaction tx=db.beginTx()){
    db.execute(format(NODE_CREATE,"nodes",array("Label"),array("prop"))).close();
    tx.success();
  }
   StoreIndexDescriptor indexDescriptor;
  long nodeId;
  try (Transaction tx=db.beginTx()){
    db.schema().awaitIndexesOnline(1,TimeUnit.MINUTES);
    indexDescriptor=getIndexDescriptor(first(db.schema().getIndexes()));
    Node node=db.createNode(Label.label("Label"));
    node.setProperty("prop","value");
    nodeId=node.getId();
    tx.success();
  }
   IndexingService indexes=getIndexingService(db);
  IndexProxy indexProxy=indexes.getIndexProxy(indexDescriptor.schema());
  try (IndexUpdater updater=indexProxy.newUpdater(IndexUpdateMode.ONLINE)){
    updater.process(IndexEntryUpdate.remove(nodeId,indexDescriptor,Values.stringValue("value")));
  }
   db.shutdown();
  ConsistencyCheckService.Result result=checkConsistency();
  assertFalse(result.isSuccessful());
}
