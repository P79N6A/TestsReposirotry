@Test public void mustBeAbleToConsistencyCheckRelationshipIndexWithMultipleRelationshipTypesAndMultipleProperties() throws Exception {
  GraphDatabaseService db=createDatabase();
  RelationshipType relType1=RelationshipType.withName("R1");
  RelationshipType relType2=RelationshipType.withName("R2");
  try (Transaction tx=db.beginTx()){
    db.execute(format(RELATIONSHIP_CREATE,"rels",array("R1","R2"),array("p1","p2"))).close();
    tx.success();
  }
   try (Transaction tx=db.beginTx()){
    db.schema().awaitIndexesOnline(1,TimeUnit.MINUTES);
    Node n1=db.createNode();
    Node n2=db.createNode();
    Relationship r1=n1.createRelationshipTo(n1,relType1);
    r1.setProperty("p1","value");
    r1.setProperty("p2","value");
    Relationship r2=n1.createRelationshipTo(n1,relType2);
    r2.setProperty("p1","value");
    r2.setProperty("p2","value");
    Relationship r3=n2.createRelationshipTo(n2,relType1);
    r3.setProperty("p1","value");
    r3.setProperty("p2","value");
    Relationship r4=n2.createRelationshipTo(n2,relType2);
    r4.setProperty("p1","value");
    r4.setProperty("p2","value");
    n1.createRelationshipTo(n2,relType1).setProperty("p1","value");
    n1.createRelationshipTo(n2,relType2).setProperty("p1","value");
    n1.createRelationshipTo(n2,relType1).setProperty("p2","value");
    n1.createRelationshipTo(n2,relType2).setProperty("p2","value");
    tx.success();
  }
   db.shutdown();
  assertIsConsistent(checkConsistency());
}
