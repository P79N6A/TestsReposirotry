@Test public void shouldOpenInFreshDirectoryAndFinallyAddHeader() throws Exception {
  String name="log";
  FileSystemAbstraction fs=fileSystemRule.get();
  LogFiles logFiles=LogFilesBuilder.builder(directory.databaseLayout(),fs).withTransactionIdStore(transactionIdStore).withLogVersionRepository(logVersionRepository).build();
  life.start();
  life.add(logFiles);
  life.shutdown();
  File file=LogFilesBuilder.logFilesBasedOnlyBuilder(directory.databaseDir(),fs).build().getLogFileForVersion(1L);
  LogHeader header=readLogHeader(fs,file);
  assertEquals(1L,header.logVersion);
  assertEquals(2L,header.lastCommittedTxId);
}
