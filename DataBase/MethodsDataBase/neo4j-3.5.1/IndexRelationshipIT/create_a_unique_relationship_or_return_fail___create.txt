@Documented("Create a unique relationship or return fail (create).\n" + "\n" + "Here, in case\n"+ "of an already existing relationship, an error should be returned. In this\n"+ "example, no existing relationship is found and a new relationship is created.") @Test public void create_a_unique_relationship_or_return_fail___create() throws Exception {
  final String index=indexes.newInstance();
  String key="name";
  String value="Tobias";
  helper.createRelationshipIndex(index);
  ResponseEntity response=gen.get().expectedStatus(201).payloadType(MediaType.APPLICATION_JSON_TYPE).payload("{\"key\": \"" + key + "\", \"value\": \""+ value+ "\", \"start\": \""+ functionalTestHelper.nodeUri(helper.createNode())+ "\", \"end\": \""+ functionalTestHelper.nodeUri(helper.createNode())+ "\", \"type\":\""+ MyRelationshipTypes.KNOWS+ "\"}").post(functionalTestHelper.relationshipIndexUri() + index + "?uniqueness=create_or_fail");
  MultivaluedMap<String,String> headers=response.response().getHeaders();
  Map<String,Object> result=JsonHelper.jsonToMap(response.entity());
  assertEquals(result.get("indexed"),headers.getFirst("Location"));
}
