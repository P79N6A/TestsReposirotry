@Test public void shouldProvideIndexStatisticsWhenIndexIsBuiltViaPopulationAndConcurrentAdditions() throws Exception {
  indexOnlineMonitor.initialize(1);
  int initialNodes=repeatCreateNamedPeopleFor(NAMES.length * CREATION_MULTIPLIER).length;
  IndexReference index=createPersonNameIndex();
  final UpdatesTracker updatesTracker=executeCreations(CREATION_MULTIPLIER);
  awaitIndexesOnline();
  int seenWhilePopulating=initialNodes + updatesTracker.createdDuringPopulation();
  double expectedSelectivity=UNIQUE_NAMES / seenWhilePopulating;
  assertCorrectIndexSelectivity(expectedSelectivity,indexSelectivity(index));
  assertCorrectIndexSize(seenWhilePopulating,indexSize(index));
  assertCorrectIndexUpdates(updatesTracker.createdAfterPopulation(),indexUpdates(index));
}
