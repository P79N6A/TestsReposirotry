@Test void createIndexWithProviderThatUsesNeoAsDataSource(){
  String indexName="inneo";
  assertFalse(indexExists(indexName));
  Map<String,String> config=stringMap(PROVIDER,"test-dummy-neo-index","config1","A value","another config","Another value");
  Index<Node> index;
  try (Transaction transaction=db.beginTx()){
    index=db.index().forNodes(indexName,config);
    transaction.success();
  }
   try (Transaction tx=db.beginTx()){
    assertTrue(indexExists(indexName));
    assertEquals(config,db.index().getConfiguration(index));
    try (IndexHits<Node> indexHits=index.get("key","something else")){
      assertEquals(0,Iterables.count(indexHits));
    }
     tx.success();
  }
   restartDb();
  try (Transaction tx=db.beginTx()){
    assertTrue(indexExists(indexName));
    assertEquals(config,db.index().getConfiguration(index));
    tx.success();
  }
 }
