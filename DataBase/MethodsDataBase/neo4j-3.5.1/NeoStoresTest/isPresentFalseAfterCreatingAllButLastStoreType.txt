@Test public void isPresentFalseAfterCreatingAllButLastStoreType() throws Exception {
  FileSystemAbstraction fileSystem=fs.get();
  fileSystem.deleteRecursively(databaseLayout.databaseDirectory());
  DefaultIdGeneratorFactory idFactory=new DefaultIdGeneratorFactory(fileSystem);
  StoreFactory factory=new StoreFactory(databaseLayout,Config.defaults(),idFactory,pageCache,fileSystem,LOG_PROVIDER,EmptyVersionContextSupplier.EMPTY);
  StoreType[] allStoreTypes=StoreType.values();
  StoreType[] allButLastStoreTypes=Arrays.copyOf(allStoreTypes,allStoreTypes.length - 1);
  try (NeoStores ignore=factory.openNeoStores(true,allButLastStoreTypes)){
    assertFalse(NeoStores.isStorePresent(pageCache,databaseLayout));
  }
 }
