@Test public void shouldReturnCountOneForExistingData() throws Exception {
  IndexEntryUpdate<IndexDescriptor>[] updates=someUpdatesSingleType();
  processAll(updates);
  try (IndexReader reader=accessor.newReader()){
    for (    IndexEntryUpdate<IndexDescriptor> update : updates) {
      long count=reader.countIndexedNodes(update.getEntityId(),valueCreatorUtil.indexDescriptor.properties(),update.values());
      assertEquals(1,count);
    }
    Iterator<IndexEntryUpdate<IndexDescriptor>> generator=filter(skipExisting(updates),valueCreatorUtil.randomUpdateGenerator(random));
    long count=reader.countIndexedNodes(123,valueCreatorUtil.indexDescriptor.properties(),generator.next().values()[0]);
    assertEquals(0,count);
  }
 }
