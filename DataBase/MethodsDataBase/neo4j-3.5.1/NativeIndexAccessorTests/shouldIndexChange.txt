@Test public void shouldIndexChange() throws Exception {
  IndexEntryUpdate<IndexDescriptor>[] updates=someUpdatesSingleType();
  processAll(updates);
  Iterator<IndexEntryUpdate<IndexDescriptor>> generator=filter(skipExisting(updates),valueCreatorUtil.randomUpdateGenerator(random));
  for (int i=0; i < updates.length; i++) {
    IndexEntryUpdate<IndexDescriptor> update=updates[i];
    Value newValue=generator.next().values()[0];
    updates[i]=change(update.getEntityId(),indexDescriptor,update.values()[0],newValue);
  }
  processAll(updates);
  forceAndCloseAccessor();
  verifyUpdates(updates);
}
