@Test void shouldPullTheResult() throws Exception {
  BoltResponseMessageRecorder messageWriter=new BoltResponseMessageRecorder();
  ResultHandler handler=new ResultHandler(messageWriter,mock(BoltConnection.class),NullLog.getInstance());
  ImmutableRecord record1=new ImmutableRecord(values("a","b","c"));
  ImmutableRecord record2=new ImmutableRecord(values("1","2","3"));
  BoltResult result=new TestBoltResult(record1,record2);
  handler.onRecords(result,true);
  handler.onFinish();
  List<ResponseMessage> messages=messageWriter.asList();
  assertThat(messages.size(),equalTo(3));
  assertThat(messages.get(0),equalTo(new RecordMessage(record1)));
  assertThat(messages.get(1),equalTo(new RecordMessage(record2)));
  assertThat(messages.get(2),instanceOf(SuccessMessage.class));
}
