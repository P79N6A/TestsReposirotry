@Test public void shouldFailIfAllRetiresFail(){
  IllegalArgumentException ex=new IllegalArgumentException();
  try {
    template.execute(new FailingRetryConsumer(10,ex));
  }
 catch (  TransactionFailureException ignored) {
  }
  assertThat(monitor.numRetry,is(5));
  assertThat(monitor.failures,contains(ex,ex,ex,ex,ex,ex));
  assertThat(monitor.fails,contains(ex));
}
