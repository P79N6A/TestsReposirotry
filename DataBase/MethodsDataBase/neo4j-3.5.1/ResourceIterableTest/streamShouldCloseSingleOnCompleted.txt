@Test void streamShouldCloseSingleOnCompleted(){
  AtomicBoolean closed=new AtomicBoolean(false);
  ResourceIterator<Integer> resourceIterator=newResourceIterator(iterator(new Integer[]{1,2,3}),() -> closed.set(true));
  ResourceIterable<Integer> iterable=() -> resourceIterator;
  List<Integer> result=iterable.stream().collect(Collectors.toList());
  assertEquals(asList(1,2,3),result);
  assertTrue(closed.get());
}
