@Test public void testCantDoAnythingIfInFailedState() throws Throwable {
  BoltStateMachine machine=init(newMachine());
  machine.markFailed(Neo4jError.from(new RuntimeException()));
  machine.process(new RunMessage("RETURN 1",EMPTY_PARAMS),nullResponseHandler());
  assertThat(machine,inState(FailedState.class));
  machine.process(DiscardAllMessage.INSTANCE,nullResponseHandler());
  assertThat(machine,inState(FailedState.class));
  machine.process(PullAllMessage.INSTANCE,nullResponseHandler());
  assertThat(machine,inState(FailedState.class));
}
