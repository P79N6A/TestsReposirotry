/** 
 * For backwards-compatibility reasons, we support both PEM-encoded private keys *and* raw binary files containing the private key data
 */
@Test void shouldLoadBinaryPrivateKey() throws Throwable {
  SelfSignedCertificate cert=new SelfSignedCertificate("example.com");
  PkiUtils certs=new PkiUtils();
  File keyFile=testDirectory.file("certificate");
  assertTrue(keyFile.createNewFile());
  byte[] raw=certs.loadPrivateKey(cert.privateKey()).getEncoded();
  try (FileChannel ch=FileChannel.open(keyFile.toPath(),WRITE)){
    FileUtils.writeAll(ch,ByteBuffer.wrap(raw));
  }
   PrivateKey pk=certs.loadPrivateKey(keyFile);
  assertNotNull(pk);
}
