/** 
 * For backwards-compatibility reasons, we support both PEM-encoded certificates *and* raw binary files containing the certificate data.
 */
@Test void shouldLoadBinaryCertificates() throws Throwable {
  SelfSignedCertificate cert=new SelfSignedCertificate("example.com");
  PkiUtils certs=new PkiUtils();
  File cPath=testDirectory.file("certificate");
  assertTrue(cPath.createNewFile());
  byte[] raw=certs.loadCertificates(cert.certificate())[0].getEncoded();
  try (FileChannel ch=FileChannel.open(cPath.toPath(),WRITE)){
    FileUtils.writeAll(ch,ByteBuffer.wrap(raw));
  }
   Certificate[] certificates=certs.loadCertificates(cPath);
  assertThat(certificates.length,equalTo(1));
}
