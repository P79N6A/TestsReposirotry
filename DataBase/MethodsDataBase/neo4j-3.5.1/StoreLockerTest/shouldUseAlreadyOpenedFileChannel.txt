@Test public void shouldUseAlreadyOpenedFileChannel() throws Exception {
  StoreChannel channel=Mockito.mock(StoreChannel.class);
  CustomChannelFileSystemAbstraction fileSystemAbstraction=new CustomChannelFileSystemAbstraction(fileSystemRule.get(),channel);
  int numberOfCallesToOpen=0;
  try (StoreLocker storeLocker=new StoreLocker(fileSystemAbstraction,target.storeLayout())){
    try {
      storeLocker.checkLock();
      fail();
    }
 catch (    StoreLockException e) {
      numberOfCallesToOpen=fileSystemAbstraction.getNumberOfCallsToOpen();
      storeLocker.checkLock();
    }
  }
 catch (  StoreLockException e) {
  }
  assertEquals("Expect that number of open channels will remain the same for ",numberOfCallesToOpen,fileSystemAbstraction.getNumberOfCallsToOpen());
}
