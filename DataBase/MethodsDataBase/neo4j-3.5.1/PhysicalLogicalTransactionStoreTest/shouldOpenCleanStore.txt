@Test public void shouldOpenCleanStore() throws Exception {
  TransactionIdStore transactionIdStore=new SimpleTransactionIdStore();
  TransactionMetadataCache positionCache=new TransactionMetadataCache();
  LifeSupport life=new LifeSupport();
  final LogFiles logFiles=LogFilesBuilder.builder(dir.databaseLayout(),fileSystemRule.get()).withTransactionIdStore(transactionIdStore).withLogVersionRepository(mock(LogVersionRepository.class)).build();
  life.add(logFiles);
  life.add(new BatchingTransactionAppender(logFiles,NO_ROTATION,positionCache,transactionIdStore,BYPASS,DATABASE_HEALTH));
  try {
    life.start();
  }
  finally {
    life.shutdown();
  }
}
