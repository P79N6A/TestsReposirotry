@Test public void shouldCloseDataIteratorsInTheEnd() throws Exception {
  CapturingDataFactories nodeData=new CapturingDataFactories(config -> charReader("1"),NO_DECORATOR);
  CapturingDataFactories relationshipData=new CapturingDataFactories(config -> charReader("1,1"),defaultRelationshipType("TYPE"));
  IdType idType=IdType.STRING;
  Input input=new CsvInput(nodeData,header(entry(null,Type.ID,idType.extractor(extractors))),relationshipData,header(entry(null,Type.START_ID,idType.extractor(extractors)),entry(null,Type.END_ID,idType.extractor(extractors))),idType,config(COMMAS),silentBadCollector(0));
  try (InputIterator iterator=input.nodes().iterator()){
    readNext(iterator);
  }
   try (InputIterator iterator=input.relationships().iterator()){
    readNext(iterator);
  }
   assertClosed(nodeData.last());
  assertClosed(relationshipData.last());
}
