@Test public void mustPrintRecommendationsAsConfigReadableOutput() throws Exception {
  StringBuilder output=new StringBuilder();
  Path homeDir=Paths.get("home");
  Path configDir=Paths.get("home","config");
  OutsideWorld outsideWorld=new RealOutsideWorld(){
    @Override public void stdOutLine(    String text){
      output.append(text).append(System.lineSeparator());
    }
  }
;
  MemoryRecommendationsCommand command=new MemoryRecommendationsCommand(homeDir,configDir,outsideWorld);
  String heap=bytesToString(recommendHeapMemory(gibiBytes(8)));
  String pagecache=bytesToString(recommendPageCacheMemory(gibiBytes(8)));
  command.execute(new String[]{"--memory=8g"});
  Map<String,String> stringMap=load(new StringReader(output.toString()));
  assertThat(stringMap.get(initialHeapSize.name()),is(heap));
  assertThat(stringMap.get(maxHeapSize.name()),is(heap));
  assertThat(stringMap.get(pagecache_memory.name()),is(pagecache));
}
