@Test public void shouldNotLeaveLuceneIndexFilesHangingAroundIfConstraintCreationFails(){
  db.withSetting(default_schema_provider,NATIVE20.providerName());
  attemptAndFailConstraintCreation();
  IndexProvider indexProvider=db.getDependencyResolver().resolveDependency(IndexProviderMap.class).getDefaultProvider();
  File indexDir=indexProvider.directoryStructure().directoryForIndex(indexId);
  assertFalse(new IndexFolderLayout(indexDir).getIndexFolder().exists());
}
