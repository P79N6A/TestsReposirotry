@Test public void shouldWriteALogHeaderInAStoreChannel() throws IOException {
  final File file=testDirectory.file("WriteLogHeader");
  final StoreChannel channel=fileSystemRule.get().open(file,OpenMode.READ_WRITE);
  writeLogHeader(channel,expectedLogVersion,expectedTxId);
  channel.close();
  final byte[] array=new byte[LOG_HEADER_SIZE];
  try (InputStream stream=fileSystemRule.get().openAsInputStream(file)){
    int read=stream.read(array);
    assertEquals(LOG_HEADER_SIZE,read);
  }
   final ByteBuffer result=ByteBuffer.wrap(array);
  long encodedLogVersions=result.getLong();
  assertEquals(encodeLogVersion(expectedLogVersion),encodedLogVersions);
  byte logFormatVersion=decodeLogFormatVersion(encodedLogVersions);
  assertEquals(CURRENT_LOG_VERSION,logFormatVersion);
  long logVersion=decodeLogVersion(encodedLogVersions);
  assertEquals(expectedLogVersion,logVersion);
  long txId=result.getLong();
  assertEquals(expectedTxId,txId);
}
