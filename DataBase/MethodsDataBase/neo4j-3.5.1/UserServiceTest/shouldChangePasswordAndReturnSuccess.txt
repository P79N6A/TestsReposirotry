@Test public void shouldChangePasswordAndReturnSuccess() throws Exception {
  HttpServletRequest req=mock(HttpServletRequest.class);
  when(req.getUserPrincipal()).thenReturn(neo4jPrinciple);
  OutputFormat outputFormat=new EntityOutputFormat(new JsonFormat(),new URI("http://www.example.com"),null);
  UserService userService=new UserService(userManagerSupplier,new JsonFormat(),outputFormat);
  Response response=userService.setPassword("neo4j",req,"{ \"password\" : \"test\" }");
  assertThat(response.getStatus(),equalTo(200));
  userManagerSupplier.getUserManager().getUser("neo4j").credentials().matchesPassword("test");
}
