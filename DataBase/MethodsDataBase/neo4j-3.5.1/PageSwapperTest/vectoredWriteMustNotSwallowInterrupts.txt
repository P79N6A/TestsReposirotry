@Test void vectoredWriteMustNotSwallowInterrupts() throws Exception {
  File file=file("a");
  long page=createPage();
  putInt(page,0,1);
  PageSwapperFactory swapperFactory=createSwapperFactory();
  PageSwapper swapper=createSwapperAndFile(swapperFactory,file);
  Thread.currentThread().interrupt();
  assertThat(write(swapper,0,new long[]{page},0,1),is(sizeOfAsLong(page)));
  assertTrue(Thread.currentThread().isInterrupted());
  putInt(page,0,0);
  assertThat(read(swapper,0,sizeOfAsInt(page),page),is(sizeOfAsLong(page)));
  assertThat(getInt(page,0),is(1));
  assertThat(write(swapper,0,new long[]{page},0,1),is(sizeOfAsLong(page)));
  assertTrue(Thread.currentThread().isInterrupted());
  putInt(page,0,0);
  assertThat(read(swapper,0,sizeOfAsInt(page),page),is(sizeOfAsLong(page)));
  assertThat(getInt(page,0),is(1));
}
