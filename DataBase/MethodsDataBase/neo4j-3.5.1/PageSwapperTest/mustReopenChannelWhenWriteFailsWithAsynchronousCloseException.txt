@Test void mustReopenChannelWhenWriteFailsWithAsynchronousCloseException() throws Exception {
  long page=createPage();
  putLong(page,0,X);
  putLong(page,8,Y);
  putInt(page,16,Z);
  File file=file("a");
  PageSwapperFactory swapperFactory=createSwapperFactory();
  PageSwapper swapper=createSwapperAndFile(swapperFactory,file);
  Thread.currentThread().interrupt();
  write(swapper,0,page);
  assertTrue(Thread.interrupted());
  swapper.force();
  clear(page);
  read(swapper,0,sizeOfAsInt(page),page);
  assertThat(getLong(page,0),is(X));
  assertThat(getLong(page,8),is(Y));
  assertThat(getInt(page,16),is(Z));
}
