@Test public void stopShouldCloseStateMachineOnProcessNextBatch(){
  BoltConnection connection=newConnection();
  connection.stop();
  connection.processNextBatch();
  verify(queueMonitor).enqueued(ArgumentMatchers.eq(connection),ArgumentMatchers.any(Job.class));
  verify(stateMachine).markForTermination();
  verify(stateMachine).close();
}
