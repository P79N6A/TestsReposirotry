@Test void checkAndClearCursorExceptionMustThrowIfLinkedCursorHasErrorSet() throws Exception {
  configureStandardPageCache();
  try (PagedFile pf=map(file("a"),filePageSize);PageCursor writer=pf.io(0,PF_SHARED_WRITE_LOCK);PageCursor reader=pf.io(0,PF_SHARED_READ_LOCK)){
    String msg="Boo" + ThreadLocalRandom.current().nextInt();
    assertTrue(writer.next());
    try (PageCursor linkedWriter=writer.openLinkedCursor(1)){
      assertTrue(linkedWriter.next());
      linkedWriter.setCursorException(msg);
      CursorException exception=assertThrows(CursorException.class,writer::checkAndClearCursorException);
      assertThat(exception.getMessage(),is(msg));
    }
     msg="Boo" + ThreadLocalRandom.current().nextInt();
    assertTrue(reader.next());
    try (PageCursor linkedReader=reader.openLinkedCursor(1)){
      assertTrue(linkedReader.next());
      linkedReader.setCursorException(msg);
      CursorException exception=assertThrows(CursorException.class,reader::checkAndClearCursorException);
      assertThat(exception.getMessage(),is(msg));
    }
   }
 }
