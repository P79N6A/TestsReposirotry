@Test public void shouldFirstReturnNonPersistedIdsAndThenPersistedOnesWhenAggressiveMode() throws Exception {
  StoreChannel channel=getStoreChannel();
  int batchSize=10;
  FreeIdKeeper keeper=getFreeIdKeeperAggressive(channel,batchSize);
  for (int i=0; i < batchSize; i++) {
    keeper.freeId(i);
  }
  int extraIds=3;
  for (int i=batchSize; i < batchSize + extraIds; i++) {
    keeper.freeId(i);
  }
  for (int i=batchSize; i < batchSize + extraIds; i++) {
    assertEquals(i,keeper.getId());
  }
  for (int i=0; i < batchSize; i++) {
    assertEquals(i,keeper.getId());
  }
}
