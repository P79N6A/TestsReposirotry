@Test public void shouldProduceSensibleMapRepresentationInWaitingOnLockState(){
  long[] resourceIds={17};
  WaitingOnLock status=new WaitingOnLock(ActiveLock.EXCLUSIVE_MODE,resourceType("NODE"),resourceIds,clock.nanos());
  clock.forward(17,TimeUnit.MILLISECONDS);
  Map<String,Object> statusMap=status.toMap(clock.nanos());
  assertEquals("waiting",status.name());
  Map<String,Object> expected=new HashMap<>();
  expected.put("waitTimeMillis",17L);
  expected.put("lockMode","EXCLUSIVE");
  expected.put("resourceType","NODE");
  expected.put("resourceIds",resourceIds);
  assertEquals(expected,statusMap);
}
