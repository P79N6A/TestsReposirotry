@Test public void shouldProduceSensibleMapRepresentationInWaitingOnQueryState(){
  WaitingOnQuery status=new WaitingOnQuery(new ExecutingQuery(12,null,null,null,null,null,() -> 0,PageCursorTracer.NULL,Thread.currentThread().getId(),Thread.currentThread().getName(),clock,FakeCpuClock.NOT_AVAILABLE,HeapAllocation.NOT_AVAILABLE),clock.nanos());
  clock.forward(1025,TimeUnit.MILLISECONDS);
  Map<String,Object> statusMap=status.toMap(clock.nanos());
  assertEquals("waiting",status.name());
  Map<String,Object> expected=new HashMap<>();
  expected.put("waitTimeMillis",1025L);
  expected.put("queryId","query-12");
  assertEquals(expected,statusMap);
}
