@Test public void shouldReturnOldChannelWhenNextChannelHasntGottenCompleteHeaderYet() throws Exception {
  final ReaderLogVersionBridge bridge=new ReaderLogVersionBridge(logFiles);
  final StoreChannel nextVersionWithIncompleteHeader=mock(StoreChannel.class);
  when(nextVersionWithIncompleteHeader.read(any(ByteBuffer.class))).thenReturn(LOG_HEADER_SIZE / 2);
  when(channel.getVersion()).thenReturn(version);
  when(fs.fileExists(any(File.class))).thenReturn(true);
  when(fs.open(any(File.class),eq(OpenMode.READ))).thenReturn(nextVersionWithIncompleteHeader);
  final LogVersionedStoreChannel result=bridge.next(channel);
  assertEquals(channel,result);
  verify(channel,never()).close();
}
