@Test void shouldThrowDuringRunIfPendingTerminationNoticeExists() throws Exception {
  KernelTransaction transaction=newTimedOutTransaction();
  TransactionStateMachineV1SPI stateMachineSPI=newTransactionStateMachineSPI(transaction);
  TransactionStateMachine stateMachine=newTransactionStateMachine(stateMachineSPI);
  stateMachine.ctx.pendingTerminationNotice=Status.Transaction.TransactionTimedOut;
  TransactionTerminatedException e=assertThrows(TransactionTerminatedException.class,() -> stateMachine.run("SOME STATEMENT",null));
  assertEquals(Status.Transaction.TransactionTimedOut,e.status());
}
