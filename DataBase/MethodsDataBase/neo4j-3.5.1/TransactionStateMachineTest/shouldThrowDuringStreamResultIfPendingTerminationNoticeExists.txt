@Test void shouldThrowDuringStreamResultIfPendingTerminationNoticeExists() throws Exception {
  KernelTransaction transaction=newTimedOutTransaction();
  TransactionStateMachineV1SPI stateMachineSPI=newTransactionStateMachineSPI(transaction);
  TransactionStateMachine stateMachine=newTransactionStateMachine(stateMachineSPI);
  stateMachine.run("SOME STATEMENT",null);
  stateMachine.ctx.pendingTerminationNotice=Status.Transaction.TransactionTimedOut;
  TransactionTerminatedException e=assertThrows(TransactionTerminatedException.class,() -> {
    stateMachine.streamResult(boltResult -> {
    }
);
  }
);
  assertEquals(Status.Transaction.TransactionTimedOut,e.status());
}
