@Test public void executeQueryAfterSeveralRetries() throws QueryExecutionKernelException {
  when(versionContext.isDirty()).thenReturn(true,true,false);
  executionEngine.executeWithRetries("query",Collections.emptyMap(),transactionalContext,executor);
  verify(executor,times(3)).execute(any(),anyMap(),any());
  verify(versionContext,times(3)).initRead();
}
