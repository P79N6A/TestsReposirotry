@Test public void keySetUnaffectedByChanges(){
  Map<Integer,String> map=new CopyOnWriteHashMap<>();
  map.put(0,"0");
  map.put(1,"1");
  map.put(2,"2");
  assertThat(map,hasKey(0));
  assertThat(map,hasKey(1));
  assertThat(map,hasKey(2));
  Iterator<Integer> keys=map.keySet().iterator();
  map.remove(1);
  List<Integer> keysBeforeDeletion=Iterators.asList(keys);
  assertThat(keysBeforeDeletion,contains(0,1,2));
}
