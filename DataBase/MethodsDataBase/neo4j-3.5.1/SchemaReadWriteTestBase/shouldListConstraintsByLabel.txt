@Test public void shouldListConstraintsByLabel() throws Exception {
  int wrongLabel;
  ConstraintDescriptor inStore;
  ConstraintDescriptor droppedInTx;
  ConstraintDescriptor createdInTx;
  try (Transaction tx=beginTransaction()){
    wrongLabel=tx.tokenWrite().labelGetOrCreateForName("wrongLabel");
    tx.schemaWrite().uniquePropertyConstraintCreate(labelDescriptor(wrongLabel,prop1));
    inStore=tx.schemaWrite().uniquePropertyConstraintCreate(labelDescriptor(label,prop1));
    droppedInTx=tx.schemaWrite().uniquePropertyConstraintCreate(labelDescriptor(label,prop2));
    tx.success();
  }
   try (Transaction tx=beginTransaction()){
    createdInTx=tx.schemaWrite().nodePropertyExistenceConstraintCreate(labelDescriptor(label,prop1));
    tx.schemaWrite().nodePropertyExistenceConstraintCreate(labelDescriptor(wrongLabel,prop1));
    tx.schemaWrite().constraintDrop(droppedInTx);
    Iterable<ConstraintDescriptor> allConstraints=() -> tx.schemaRead().constraintsGetForLabel(label);
    assertThat(allConstraints,containsInAnyOrder(inStore,createdInTx));
    tx.success();
  }
 }
