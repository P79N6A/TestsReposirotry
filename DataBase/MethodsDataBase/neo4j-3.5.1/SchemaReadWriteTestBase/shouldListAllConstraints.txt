@Test public void shouldListAllConstraints() throws Exception {
  ConstraintDescriptor toRetain;
  ConstraintDescriptor toRetain2;
  ConstraintDescriptor toDrop;
  ConstraintDescriptor created;
  try (Transaction tx=beginTransaction()){
    toRetain=tx.schemaWrite().uniquePropertyConstraintCreate(labelDescriptor(label,prop1));
    toRetain2=tx.schemaWrite().uniquePropertyConstraintCreate(labelDescriptor(label2,prop1));
    toDrop=tx.schemaWrite().uniquePropertyConstraintCreate(labelDescriptor(label,prop2));
    tx.success();
  }
   try (Transaction tx=beginTransaction()){
    created=tx.schemaWrite().nodePropertyExistenceConstraintCreate(labelDescriptor(label,prop1));
    tx.schemaWrite().constraintDrop(toDrop);
    Iterable<ConstraintDescriptor> allConstraints=() -> tx.schemaRead().constraintsGetAll();
    assertThat(allConstraints,containsInAnyOrder(toRetain,toRetain2,created));
    tx.success();
  }
 }
