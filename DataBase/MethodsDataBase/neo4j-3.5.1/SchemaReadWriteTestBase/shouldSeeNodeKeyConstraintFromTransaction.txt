@Test public void shouldSeeNodeKeyConstraintFromTransaction() throws Exception {
  ConstraintDescriptor existing;
  try (Transaction transaction=beginTransaction()){
    existing=transaction.schemaWrite().nodeKeyConstraintCreate(labelDescriptor(label,prop1));
    transaction.success();
  }
   try (Transaction transaction=beginTransaction()){
    ConstraintDescriptor newConstraint=transaction.schemaWrite().nodeKeyConstraintCreate(labelDescriptor(label,prop2));
    SchemaRead schemaRead=transaction.schemaRead();
    assertTrue(schemaRead.constraintExists(existing));
    assertTrue(schemaRead.constraintExists(newConstraint));
    assertThat(asList(schemaRead.constraintsGetForLabel(label)),containsInAnyOrder(existing,newConstraint));
  }
 }
