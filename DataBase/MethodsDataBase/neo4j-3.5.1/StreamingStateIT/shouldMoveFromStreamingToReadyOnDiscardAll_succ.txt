@Test void shouldMoveFromStreamingToReadyOnDiscardAll_succ() throws Throwable {
  BoltStateMachineV3 machine=getBoltStateMachineInStreamingState();
  BoltResponseRecorder recorder=new BoltResponseRecorder();
  machine.process(DiscardAllMessage.INSTANCE,recorder);
  RecordedBoltResponse response=recorder.nextResponse();
  assertThat(response,succeeded());
  assertTrue(response.hasMetadata("bookmark"));
  assertThat(machine.state(),instanceOf(ReadyState.class));
}
