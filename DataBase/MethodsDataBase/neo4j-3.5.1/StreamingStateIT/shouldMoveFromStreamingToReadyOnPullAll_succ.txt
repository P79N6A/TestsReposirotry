@Test void shouldMoveFromStreamingToReadyOnPullAll_succ() throws Throwable {
  BoltStateMachineV3 machine=getBoltStateMachineInStreamingState();
  BoltResponseRecorder recorder=new BoltResponseRecorder();
  machine.process(PullAllMessage.INSTANCE,recorder);
  RecordedBoltResponse response=recorder.nextResponse();
  assertThat(response,succeeded());
  assertTrue(response.hasMetadata("type"));
  assertTrue(response.hasMetadata("t_last"));
  assertTrue(response.hasMetadata("bookmark"));
  assertThat(machine.state(),instanceOf(ReadyState.class));
}
