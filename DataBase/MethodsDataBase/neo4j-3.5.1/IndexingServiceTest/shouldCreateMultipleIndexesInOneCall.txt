@Test public void shouldCreateMultipleIndexesInOneCall() throws Exception {
  IndexingService.Monitor monitor=IndexingService.NO_MONITOR;
  IndexingService indexing=newIndexingServiceWithMockedDependencies(populator,accessor,withData(addNodeUpdate(0,"value",1)),monitor);
  life.start();
  StoreIndexDescriptor indexRule1=storeIndex(0,0,0,PROVIDER_DESCRIPTOR);
  StoreIndexDescriptor indexRule2=storeIndex(1,0,1,PROVIDER_DESCRIPTOR);
  StoreIndexDescriptor indexRule3=storeIndex(2,1,0,PROVIDER_DESCRIPTOR);
  indexing.createIndexes(indexRule1,indexRule2,indexRule3);
  verify(indexProvider).getPopulator(eq(forSchema(forLabel(0,0),PROVIDER_DESCRIPTOR).withId(0)),any(IndexSamplingConfig.class));
  verify(indexProvider).getPopulator(eq(forSchema(forLabel(0,1),PROVIDER_DESCRIPTOR).withId(1)),any(IndexSamplingConfig.class));
  verify(indexProvider).getPopulator(eq(forSchema(forLabel(1,0),PROVIDER_DESCRIPTOR).withId(2)),any(IndexSamplingConfig.class));
  waitForIndexesToComeOnline(indexing,0,1,2);
}
