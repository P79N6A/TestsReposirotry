@Test public void shouldForgetDeferredIndexDropDuringRecoveryIfCreatedIndexWithSameRuleId() throws Exception {
  StoreIndexDescriptor rule=index.withId(0);
  IndexingService indexing=newIndexingServiceWithMockedDependencies(populator,accessor,withData(),rule);
  life.init();
  indexing.dropIndex(rule);
  indexing.createIndexes(rule);
  life.start();
  IndexProxy proxy=indexing.getIndexProxy(rule.getId());
  assertNotNull(proxy);
  verify(accessor,never()).drop();
}
