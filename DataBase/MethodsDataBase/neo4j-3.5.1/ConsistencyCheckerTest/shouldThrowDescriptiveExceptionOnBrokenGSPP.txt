@Test void shouldThrowDescriptiveExceptionOnBrokenGSPP() throws Exception {
  int pageSize=256;
  PageCursor cursor=new PageAwareByteArrayCursor(pageSize);
  long stableGeneration=MIN_GENERATION;
  long crashGeneration=stableGeneration + 1;
  long unstableGeneration=stableGeneration + 2;
  String pointerFieldName="abc";
  long pointer=123;
  cursor.next(0);
  new TreeNodeFixedSize<>(pageSize,longLayout().build()).initializeInternal(cursor,stableGeneration,crashGeneration);
  TreeNode.setSuccessor(cursor,pointer,stableGeneration,crashGeneration);
  CursorException exception=assertThrows(CursorException.class,() -> {
    assertNoCrashOrBrokenPointerInGSPP(cursor,stableGeneration,unstableGeneration,pointerFieldName,TreeNode.BYTE_POS_SUCCESSOR);
    cursor.checkAndClearCursorException();
  }
);
  assertThat(exception.getMessage(),allOf(containsString(pointerFieldName),containsString(pointerFieldName),containsString("state=CRASH"),containsString("state=EMPTY"),containsString(String.valueOf(pointer))));
}
