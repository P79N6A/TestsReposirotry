@Test public void tryEvictMustReportToEvictionEvent() throws Exception {
  pageList.unlockExclusive(pageRef);
  PageSwapper swapper=new DummyPageSwapper("a",313);
  int swapperId=swappers.allocate(swapper);
  doFault(swapperId,42);
  pageList.unlockExclusive(pageRef);
  EvictionAndFlushRecorder recorder=new EvictionAndFlushRecorder();
  assertTrue(pageList.tryEvict(pageRef,() -> recorder));
  assertThat(recorder.evictionClosed,is(true));
  assertThat(recorder.filePageId,is(42L));
  assertThat(recorder.swapper,sameInstance(swapper));
  assertThat(recorder.evictionException,is(nullValue()));
  assertThat(recorder.cachePageId,is(pageRef));
  assertThat(recorder.bytesWritten,is(0L));
  assertThat(recorder.flushDone,is(false));
  assertThat(recorder.flushException,is(nullValue()));
  assertThat(recorder.pagesFlushed,is(0));
}
