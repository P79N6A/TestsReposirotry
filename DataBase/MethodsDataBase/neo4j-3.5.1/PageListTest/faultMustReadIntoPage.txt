@Test public void faultMustReadIntoPage() throws Exception {
  byte pageByteContents=(byte)0xF7;
  short swapperId=1;
  long filePageId=2;
  PageSwapper swapper=new DummyPageSwapper("some file",pageSize){
    @Override public long read(    long fpId,    long bufferAddress,    int bufferSize) throws IOException {
      if (fpId == filePageId) {
        UnsafeUtil.setMemory(bufferAddress,bufferSize,pageByteContents);
        return bufferSize;
      }
      throw new IOException("Did not expect this file page id = " + fpId);
    }
  }
;
  pageList.initBuffer(pageRef);
  pageList.fault(pageRef,swapper,swapperId,filePageId,PageFaultEvent.NULL);
  long address=pageList.getAddress(pageRef);
  assertThat(address,is(not(0L)));
  for (int i=0; i < pageSize; i++) {
    byte actualByteContents=UnsafeUtil.getByte(address + i);
    if (actualByteContents != pageByteContents) {
      fail(String.format("Page contents where different at address %x + %s, expected %x but was %x",address,i,pageByteContents,actualByteContents));
    }
  }
}
