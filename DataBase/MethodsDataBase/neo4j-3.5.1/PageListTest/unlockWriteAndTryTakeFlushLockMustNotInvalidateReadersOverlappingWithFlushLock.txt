@Test public void unlockWriteAndTryTakeFlushLockMustNotInvalidateReadersOverlappingWithFlushLock(){
  pageList.unlockExclusiveAndTakeWriteLock(pageRef);
  long flushStamp=pageList.unlockWriteAndTryTakeFlushLock(pageRef);
  long readStamp=pageList.tryOptimisticReadLock(pageRef);
  assertTrue(pageList.validateReadLock(pageRef,readStamp));
  pageList.unlockFlush(pageRef,flushStamp,true);
  assertTrue(pageList.validateReadLock(pageRef,readStamp));
}
