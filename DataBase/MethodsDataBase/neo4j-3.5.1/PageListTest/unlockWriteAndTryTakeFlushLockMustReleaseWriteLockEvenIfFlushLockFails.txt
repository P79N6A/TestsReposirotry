@Test public void unlockWriteAndTryTakeFlushLockMustReleaseWriteLockEvenIfFlushLockFails(){
  pageList.unlockExclusiveAndTakeWriteLock(pageRef);
  long flushStamp=pageList.tryFlushLock(pageRef);
  assertThat(flushStamp,is(not(0L)));
  assertThat(pageList.unlockWriteAndTryTakeFlushLock(pageRef),is(0L));
  long readStamp=pageList.tryOptimisticReadLock(pageRef);
  assertTrue(pageList.validateReadLock(pageRef,readStamp));
}
