@Test void shouldThrowWhenNotInitialized() throws Exception {
  ConnectedState state=new ConnectedState();
  assertThrows(IllegalStateException.class,() -> state.process(INIT_MESSAGE,context));
  state.setReadyState(readyState);
  assertThrows(IllegalStateException.class,() -> state.process(INIT_MESSAGE,context));
  state.setReadyState(null);
  state.setFailedState(failedState);
  assertThrows(IllegalStateException.class,() -> state.process(INIT_MESSAGE,context));
}
