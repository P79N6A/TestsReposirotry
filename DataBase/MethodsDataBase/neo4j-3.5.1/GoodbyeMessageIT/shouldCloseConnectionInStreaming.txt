@Test public void shouldCloseConnectionInStreaming() throws Throwable {
  negotiateBoltV3();
  connection.send(util.chunk(new RunMessage("UNWIND [1,2,3] AS a RETURN a, a * a AS a_squared")));
  Matcher<Map<? extends String,?>> entryFieldMatcher=hasEntry(is("fields"),equalTo(asList("a","a_squared")));
  assertThat(connection,util.eventuallyReceives(msgSuccess(allOf(entryFieldMatcher,hasKey("t_first")))));
  connection.send(util.chunk(GOODBYE_MESSAGE));
  assertThat(connection,serverImmediatelyDisconnects());
  assertThat(server,eventuallyClosesTransaction());
}
