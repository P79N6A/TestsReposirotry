@Test public void shouldFailAfterEnoughAttempts() throws IOException {
  WritableBuffer buffer=mock(WritableBuffer.class);
  PageCursor cursor=mock(PageCursor.class);
  when(cursor.shouldRetry()).thenReturn(true);
  when(cursor.getCurrentFile()).thenReturn(new File("foo/bar.a"));
  exception.expect(UnderlyingStorageException.class);
  KeyValueStoreFile.readKeyValuePair(cursor,42,buffer,buffer);
}
