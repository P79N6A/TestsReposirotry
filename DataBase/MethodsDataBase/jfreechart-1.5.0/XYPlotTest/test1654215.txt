/** 
 * A test for bug 1654215 (where a renderer is added to the plot without a corresponding dataset and it throws an exception at drawing time).
 */
@Test public void test1654215(){
  DefaultXYDataset dataset=new DefaultXYDataset();
  JFreeChart chart=ChartFactory.createXYLineChart("Title","X","Y",dataset,PlotOrientation.VERTICAL,true,false,false);
  XYPlot plot=(XYPlot)chart.getPlot();
  plot.setRenderer(1,new XYLineAndShapeRenderer());
  try {
    BufferedImage image=new BufferedImage(200,100,BufferedImage.TYPE_INT_RGB);
    Graphics2D g2=image.createGraphics();
    chart.draw(g2,new Rectangle2D.Double(0,0,200,100),null,null);
    g2.dispose();
  }
 catch (  Exception e) {
    fail("No exception should be thrown.");
  }
}
