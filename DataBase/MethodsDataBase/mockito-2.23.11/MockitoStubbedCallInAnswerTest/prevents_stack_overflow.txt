@Test public void prevents_stack_overflow() throws Exception {
  when(foo.doInt()).thenAnswer(new Answer<Integer>(){
    public Integer answer(    InvocationOnMock invocation) throws Throwable {
      return bar.doInt();
    }
  }
);
  assertEquals(0,foo.doInt());
  when(foo.doInt()).thenAnswer(new Answer<Integer>(){
    public Integer answer(    InvocationOnMock invocation) throws Throwable {
      return bar.doInt() + 1;
    }
  }
);
  assertEquals(1,foo.doInt());
}
