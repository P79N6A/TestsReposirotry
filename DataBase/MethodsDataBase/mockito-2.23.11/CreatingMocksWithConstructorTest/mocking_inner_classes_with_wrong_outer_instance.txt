@Test public void mocking_inner_classes_with_wrong_outer_instance(){
  try {
    mock(InnerClass.class,withSettings().useConstructor().outerInstance(123).defaultAnswer(CALLS_REAL_METHODS));
    fail();
  }
 catch (  MockitoException e) {
    assertThat(e).hasMessage("Unable to create mock instance of type 'InnerClass'");
    assertThat(e.getCause()).hasMessageContaining("Please ensure that the target class has a 0-arg constructor" + " and provided outer instance is correct.");
  }
}
