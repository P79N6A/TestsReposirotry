@Test public void should_clean_up_listeners_automatically(){
  MockitoListener someListener=mock(MockitoListener.class);
  MyListener cleanListener=mock(MyListener.class);
  MyListener dirtyListener=when(mock(MyListener.class).isListenerDirty()).thenReturn(true).getMock();
  Set<MockitoListener> listeners=new LinkedHashSet<MockitoListener>();
  MockingProgressImpl.addListener(someListener,listeners);
  MockingProgressImpl.addListener(dirtyListener,listeners);
  Assertions.assertThat(listeners).containsExactlyInAnyOrder(someListener,dirtyListener);
  MockingProgressImpl.addListener(cleanListener,listeners);
  Assertions.assertThat(listeners).containsExactlyInAnyOrder(someListener,cleanListener);
}
