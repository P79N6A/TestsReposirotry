@Test public void testNumInputFiles() throws Exception {
  Configuration conf=spy(new Configuration());
  Job mockedJob=mock(Job.class);
  when(mockedJob.getConfiguration()).thenReturn(conf);
  FileStatus stat=mock(FileStatus.class);
  when(stat.getLen()).thenReturn(0L);
  TextInputFormat ispy=spy(new TextInputFormat());
  doReturn(Arrays.asList(stat)).when(ispy).listStatus(mockedJob);
  ispy.getSplits(mockedJob);
  verify(conf).setLong(FileInputFormat.NUM_INPUT_FILES,1);
}
