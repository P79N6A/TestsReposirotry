@Test public void testReadOOBWrites() throws Exception {
  byte[] dataBlockWrite=new byte[UPLOAD_BLOCK_SIZE];
  byte[] dataBlockRead=new byte[UPLOAD_BLOCK_SIZE];
  String key="WASB_String" + AzureTestUtils.getForkID() + ".txt";
  OutputStream outputStream=testAccount.getStore().storefile(key,new PermissionStatus("","",FsPermission.getDefault()),key);
  Arrays.fill(dataBlockWrite,(byte)255);
  for (int i=0; i < NUMBER_OF_BLOCKS; i++) {
    outputStream.write(dataBlockWrite);
  }
  outputStream.flush();
  outputStream.close();
  DataBlockWriter writeBlockTask=new DataBlockWriter(testAccount,key);
  writeBlockTask.startWriting();
  int count=0;
  for (int i=0; i < 5; i++) {
    try (InputStream inputStream=testAccount.getStore().retrieve(key)){
      count=0;
      int c=0;
      while (c >= 0) {
        c=inputStream.read(dataBlockRead,0,UPLOAD_BLOCK_SIZE);
        if (c < 0) {
          break;
        }
        count+=c;
      }
    }
 catch (    IOException e) {
      System.out.println(e.getCause().toString());
      e.printStackTrace();
      fail();
    }
  }
  writeBlockTask.stopWriting();
  assertEquals(NUMBER_OF_BLOCKS * UPLOAD_BLOCK_SIZE,count);
}
