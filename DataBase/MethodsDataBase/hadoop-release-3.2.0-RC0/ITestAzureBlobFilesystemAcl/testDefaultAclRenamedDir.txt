@Test public void testDefaultAclRenamedDir() throws Exception {
  final AzureBlobFileSystem fs=this.getFileSystem();
  assumeTrue(fs.getIsNamespaceEnabled());
  path=new Path(testRoot,UUID.randomUUID().toString());
  Path dirPath=new Path(path,"dir");
  FileSystem.mkdirs(fs,dirPath,FsPermission.createImmutable((short)RWX_RX));
  List<AclEntry> aclSpec=Lists.newArrayList(aclEntry(DEFAULT,USER,"foo",ALL));
  fs.setAcl(dirPath,aclSpec);
  Path subdirPath=new Path(path,"subdir");
  FileSystem.mkdirs(fs,subdirPath,FsPermission.createImmutable((short)RWX_RX));
  Path renamedSubdirPath=new Path(dirPath,"subdir");
  fs.rename(subdirPath,renamedSubdirPath);
  AclEntry[] expected=new AclEntry[]{};
  AclStatus s=fs.getAclStatus(renamedSubdirPath);
  AclEntry[] returned=s.getEntries().toArray(new AclEntry[0]);
  assertArrayEquals(expected,returned);
  assertPermission(fs,renamedSubdirPath,(short)RWX_RX);
}
