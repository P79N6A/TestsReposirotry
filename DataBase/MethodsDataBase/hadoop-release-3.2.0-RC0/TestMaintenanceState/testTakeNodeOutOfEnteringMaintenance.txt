/** 
 * Verify a node can transition from AdminStates.ENTERING_MAINTENANCE to AdminStates.NORMAL.
 */
@Test(timeout=360000) public void testTakeNodeOutOfEnteringMaintenance() throws Exception {
  LOG.info("Starting testTakeNodeOutOfEnteringMaintenance");
  final int replicas=1;
  final Path file=new Path("/testTakeNodeOutOfEnteringMaintenance.dat");
  startCluster(1,1);
  final FileSystem fileSys=getCluster().getFileSystem(0);
  final FSNamesystem ns=getCluster().getNamesystem(0);
  writeFile(fileSys,file,replicas,1);
  final DatanodeInfo nodeOutofService=takeNodeOutofService(0,null,Long.MAX_VALUE,null,AdminStates.ENTERING_MAINTENANCE);
  checkWithRetry(ns,fileSys,file,replicas,null,nodeOutofService);
  putNodeInService(0,nodeOutofService.getDatanodeUuid());
  cleanupFile(fileSys,file);
}
