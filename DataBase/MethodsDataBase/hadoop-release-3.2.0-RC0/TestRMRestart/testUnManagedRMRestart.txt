@Test(timeout=60000) public void testUnManagedRMRestart() throws Exception {
  MockRM rm1=createMockRM(conf);
  MemoryRMStateStore memStore=(MemoryRMStateStore)rm1.getRMStateStore();
  rm1.start();
  RMApp app0=rm1.submitApp(null,"name","user",new HashMap<>(),true,"default");
  rm1.killApp(app0.getApplicationId());
  rm1.waitForState(app0.getApplicationId(),RMAppState.KILLED);
  MockRM rm2=createMockRM(conf,memStore);
  rm2.start();
  Assert.assertEquals(1,rm2.getRMContext().getRMApps().size());
  ApplicationReport appReport=rm2.getClientRMService().getApplicationReport(GetApplicationReportRequest.newInstance(app0.getApplicationId())).getApplicationReport();
  Assert.assertEquals(true,appReport.isUnmanagedApp());
  rm1.stop();
  rm2.stop();
}
