@Test public void testStateStoreDisconnected() throws Exception {
  NamenodeStatusReport report=createNamenodeReport(NAMESERVICES[0],NAMENODES[0],HAServiceState.ACTIVE);
  assertTrue(namenodeResolver.registerNamenode(report));
  stateStore.closeDriver();
  assertFalse(stateStore.isDriverReady());
  stateStore.refreshCaches(true);
  List<? extends FederationNamenodeContext> nns=namenodeResolver.getNamenodesForBlockPoolId(NAMESERVICES[0]);
  assertNull(nns);
  verifyException(namenodeResolver,"registerNamenode",StateStoreUnavailableException.class,new Class[]{NamenodeStatusReport.class},new Object[]{report});
}
