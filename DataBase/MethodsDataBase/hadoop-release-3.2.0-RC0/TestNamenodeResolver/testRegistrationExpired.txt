@Test public void testRegistrationExpired() throws InterruptedException, IOException {
  NamenodeStatusReport report=createNamenodeReport(NAMESERVICES[0],NAMENODES[0],HAServiceState.ACTIVE);
  assertTrue(namenodeResolver.registerNamenode(report));
  stateStore.refreshCaches(true);
  verifyFirstRegistration(NAMESERVICES[0],NAMENODES[0],1,FederationNamenodeServiceState.ACTIVE);
  Thread.sleep(6000);
  stateStore.refreshCaches(true);
  verifyFirstRegistration(NAMESERVICES[0],NAMENODES[0],0,FederationNamenodeServiceState.ACTIVE);
  assertTrue(namenodeResolver.registerNamenode(report));
  stateStore.refreshCaches(true);
  verifyFirstRegistration(NAMESERVICES[0],NAMENODES[0],1,FederationNamenodeServiceState.ACTIVE);
}
