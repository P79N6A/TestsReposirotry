@Test public void testRunningAppsJson() throws Exception {
  rm.start();
  MockNM amNodeManager=rm.registerNode("127.0.0.1:1234",2048);
  RMApp app1=rm.submitApp(CONTAINER_MB,"testwordcount","user1");
  MockAM am1=MockRM.launchAndRegisterAM(app1,rm,amNodeManager);
  am1.allocate("*",2048,1,new ArrayList<>());
  amNodeManager.nodeHeartbeat(true);
  WebResource r=resource();
  WebResource path=r.path("ws").path("v1").path("cluster").path("apps");
  ClientResponse response=path.accept(MediaType.APPLICATION_JSON).get(ClientResponse.class);
  JsonCustomResourceTypeTestcase testCase=new JsonCustomResourceTypeTestcase(path,new BufferedClientResponse(response));
  testCase.verify(json -> {
    try {
      assertEquals("incorrect number of apps elements",1,json.length());
      JSONObject apps=json.getJSONObject("apps");
      assertEquals("incorrect number of app elements",1,apps.length());
      JSONArray array=apps.getJSONArray("app");
      assertEquals("incorrect count of app",1,array.length());
      verifyAppInfoJson(array.getJSONObject(0),app1,rm);
    }
 catch (    JSONException e) {
      throw new RuntimeException(e);
    }
  }
);
  rm.stop();
}
