@Test(timeout=10000) public void testNMRedirect(){
  ApplicationId noExistAppId=ApplicationId.newInstance(System.currentTimeMillis(),2000);
  ApplicationAttemptId noExistAttemptId=ApplicationAttemptId.newInstance(noExistAppId,150);
  ContainerId noExistContainerId=ContainerId.newContainerId(noExistAttemptId,250);
  String fileName="syslog";
  WebResource r=resource();
  URI requestURI=r.path("ws").path("v1").path("node").path("containerlogs").path(noExistContainerId.toString()).path(fileName).queryParam("user.name","user").queryParam(YarnWebServiceParams.NM_ID,"localhost:1111").getURI();
  String redirectURL=getRedirectURL(requestURI.toString());
  assertTrue(redirectURL != null);
  assertTrue(redirectURL.contains(LOGSERVICEWSADDR));
  assertTrue(redirectURL.contains(noExistContainerId.toString()));
  assertTrue(redirectURL.contains("/logs/" + fileName));
  assertTrue(redirectURL.contains("user.name=" + "user"));
  assertTrue(redirectURL.contains(YarnWebServiceParams.REDIRECTED_FROM_NODE + "=true"));
  assertFalse(redirectURL.contains(YarnWebServiceParams.NM_ID));
  requestURI=r.path("ws").path("v1").path("node").path("containers").path(noExistContainerId.toString()).path("logs").path(fileName).queryParam("user.name","user").queryParam(YarnWebServiceParams.NM_ID,"localhost:1111").getURI();
  redirectURL=getRedirectURL(requestURI.toString());
  assertTrue(redirectURL != null);
  assertTrue(redirectURL.contains(LOGSERVICEWSADDR));
  assertTrue(redirectURL.contains(noExistContainerId.toString()));
  assertTrue(redirectURL.contains("/logs/" + fileName));
  assertTrue(redirectURL.contains("user.name=" + "user"));
  assertTrue(redirectURL.contains(YarnWebServiceParams.REDIRECTED_FROM_NODE + "=true"));
  assertFalse(redirectURL.contains(YarnWebServiceParams.NM_ID));
  requestURI=r.path("ws").path("v1").path("node").path("containers").path(noExistContainerId.toString()).path("logs").queryParam("user.name","user").queryParam(YarnWebServiceParams.NM_ID,"localhost:1111").getURI();
  redirectURL=getRedirectURL(requestURI.toString());
  assertTrue(redirectURL != null);
  assertTrue(redirectURL.contains(LOGSERVICEWSADDR));
  assertTrue(redirectURL.contains(noExistContainerId.toString()));
  assertTrue(redirectURL.contains("user.name=" + "user"));
  assertTrue(redirectURL.contains(YarnWebServiceParams.REDIRECTED_FROM_NODE + "=true"));
  assertFalse(redirectURL.contains(YarnWebServiceParams.NM_ID));
}
