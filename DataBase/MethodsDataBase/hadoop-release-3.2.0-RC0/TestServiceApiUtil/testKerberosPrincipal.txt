@Test public void testKerberosPrincipal() throws IOException {
  SliderFileSystem sfs=ServiceTestUtils.initMockFs();
  Service app=createValidApplication("comp-a");
  KerberosPrincipal kp=new KerberosPrincipal();
  kp.setKeytab("/some/path");
  kp.setPrincipalName("user/_HOST@domain.com");
  app.setKerberosPrincipal(kp);
  try {
    ServiceApiUtil.validateKerberosPrincipal(app.getKerberosPrincipal());
    Assert.fail(EXCEPTION_PREFIX + "service with invalid keytab URI scheme");
  }
 catch (  IllegalArgumentException e) {
    assertEquals(String.format(RestApiErrorMessages.ERROR_KEYTAB_URI_SCHEME_INVALID,kp.getKeytab()),e.getMessage());
  }
  kp.setKeytab("/ blank / in / paths");
  try {
    ServiceApiUtil.validateKerberosPrincipal(app.getKerberosPrincipal());
    Assert.fail(EXCEPTION_PREFIX + "service with invalid keytab");
  }
 catch (  IllegalArgumentException e) {
    assertTrue(e.getMessage().contains(RestApiErrorMessages.ERROR_KEYTAB_URI_INVALID.substring(0,RestApiErrorMessages.ERROR_KEYTAB_URI_INVALID.length() - 2)));
  }
  kp.setKeytab("file:///tmp/a.keytab");
  try {
    ServiceApiUtil.validateKerberosPrincipal(app.getKerberosPrincipal());
  }
 catch (  IllegalArgumentException e) {
    Assert.fail(NO_EXCEPTION_PREFIX + e.getMessage());
  }
}
