@Test public void testGPending() throws YarnException, IOException {
  this.asks.add(createResourceRequest(0,"node",2048,1,1,ExecutionType.GUARANTEED,1));
  this.asks.add(createResourceRequest(0,"rack",2048,1,1,ExecutionType.GUARANTEED,1));
  this.asks.add(createResourceRequest(0,ResourceRequest.ANY,2048,1,1,ExecutionType.GUARANTEED,2));
  this.homeRelayer.allocate(getAllocateRequest());
  Assert.assertEquals(2,AMRMClientRelayerMetrics.getInstance().getPendingMetric(homeID,RequestType.Guaranteed).value());
  Assert.assertEquals(0,AMRMClientRelayerMetrics.getInstance().getPendingMetric(uamID,RequestType.Guaranteed).value());
  this.uamRelayer.allocate(getAllocateRequest());
  Assert.assertEquals(2,AMRMClientRelayerMetrics.getInstance().getPendingMetric(homeID,RequestType.Guaranteed).value());
  Assert.assertEquals(2,AMRMClientRelayerMetrics.getInstance().getPendingMetric(uamID,RequestType.Guaranteed).value());
  this.asks.get(2).setNumContainers(3);
  this.homeRelayer.allocate(getAllocateRequest());
  Assert.assertEquals(3,AMRMClientRelayerMetrics.getInstance().getPendingMetric(homeID,RequestType.Guaranteed).value());
  Assert.assertEquals(2,AMRMClientRelayerMetrics.getInstance().getPendingMetric(uamID,RequestType.Guaranteed).value());
  this.asks.get(2).setNumContainers(2);
  this.homeRelayer.allocate(getAllocateRequest());
  Assert.assertEquals(2,AMRMClientRelayerMetrics.getInstance().getPendingMetric(homeID,RequestType.Guaranteed).value());
  Assert.assertEquals(2,AMRMClientRelayerMetrics.getInstance().getPendingMetric(uamID,RequestType.Guaranteed).value());
}
