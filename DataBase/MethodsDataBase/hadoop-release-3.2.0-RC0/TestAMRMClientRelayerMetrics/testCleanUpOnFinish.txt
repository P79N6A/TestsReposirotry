@Test public void testCleanUpOnFinish() throws YarnException, IOException {
  this.asks.add(createResourceRequest(0,"node",2048,1,1,ExecutionType.GUARANTEED,1));
  this.asks.add(createResourceRequest(0,"rack",2048,1,1,ExecutionType.GUARANTEED,1));
  this.asks.add(createResourceRequest(0,ResourceRequest.ANY,2048,1,1,ExecutionType.GUARANTEED,2));
  this.updates.add(createPromote(1));
  this.updates.add(createPromote(2));
  this.updates.add(createPromote(3));
  this.homeRelayer.allocate(getAllocateRequest());
  this.homeRelayer.shutdown();
  Assert.assertEquals(0,AMRMClientRelayerMetrics.getInstance().getPendingMetric(homeID,RequestType.Guaranteed).value());
  Assert.assertEquals(0,AMRMClientRelayerMetrics.getInstance().getPendingMetric(homeID,RequestType.Promote).value());
}
