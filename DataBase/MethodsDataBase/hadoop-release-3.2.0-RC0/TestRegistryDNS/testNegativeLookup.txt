@Test public void testNegativeLookup() throws Exception {
  ServiceRecord record=getMarshal().fromBytes("somepath",CONTAINER_RECORD.getBytes());
  getRegistryDNS().register("/registry/users/root/services/org-apache-slider/test1/components/" + "ctr-e50-1451931954322-0016-01-000002",record);
  Name name=Name.fromString("missing.dev.test.");
  Record question=Record.newRecord(name,Type.A,DClass.IN);
  Message query=Message.newQuery(question);
  byte[] responseBytes=getRegistryDNS().generateReply(query,null);
  Message response=new Message(responseBytes);
  assertEquals("not successful",Rcode.NXDOMAIN,response.getRcode());
  assertNotNull("Null response",response);
  assertEquals("Questions do not match",query.getQuestion(),response.getQuestion());
  Record[] sectionArray=response.getSectionArray(Section.AUTHORITY);
  assertEquals("Wrong number of recs in AUTHORITY",isSecure() ? 2 : 1,sectionArray.length);
  boolean soaFound=false;
  for (  Record rec : sectionArray) {
    soaFound=rec.getType() == Type.SOA;
    if (soaFound) {
      break;
    }
  }
  assertTrue("wrong record type",soaFound);
}
