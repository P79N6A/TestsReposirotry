@Test public void testNonSnapRootDiffReport() throws Exception {
  Path subsub1=new Path(getSnapRootDir(),"subsub1");
  Path subsubsub1=new Path(subsub1,"subsubsub1");
  hdfs.mkdirs(subsubsub1);
  modifyAndCreateSnapshot(getSnapRootDir(),new Path[]{getSnapRootDir()});
  modifyAndCreateSnapshot(subsubsub1,new Path[]{getSnapRootDir()});
  try {
    hdfs.getSnapshotDiffReport(subsub1,"s1","s2");
    fail("Expect exception when getting snapshot diff report: " + subsub1 + " is not a snapshottable directory.");
  }
 catch (  IOException e) {
    GenericTestUtils.assertExceptionContains("Directory is not a snapshottable directory: " + subsub1,e);
  }
}
