@Test public void testSplitAllocateRequest() throws Exception {
  String[] hosts=new String[]{"host1","host2"};
  List<ResourceRequest> resourceRequests=FederationPoliciesTestUtil.createResourceRequests(hosts,2 * 1024,2,1,3,null,false);
  Map<SubClusterId,List<ResourceRequest>> response=((FederationAMRMProxyPolicy)getPolicy()).splitResourceRequests(resourceRequests);
  Assert.assertTrue(response.size() == 2);
  for (  Map.Entry<SubClusterId,List<ResourceRequest>> entry : response.entrySet()) {
    Assert.assertTrue(getActiveSubclusters().get(entry.getKey()) != null);
    for (    ResourceRequest r : entry.getValue()) {
      Assert.assertTrue(resourceRequests.contains(r));
    }
  }
  for (  SubClusterId subClusterId : getActiveSubclusters().keySet()) {
    for (    ResourceRequest r : response.get(subClusterId)) {
      Assert.assertTrue(resourceRequests.contains(r));
    }
  }
}
