@Test public void testNormalCase() throws IOException {
  ApplicationId appId=ApplicationId.newInstance(1,1);
  ApplicationAttemptId attemptId=ApplicationAttemptId.newInstance(appId,1);
  Token<AMRMTokenIdentifier> localToken=secretManager.createAndGetAMRMToken(attemptId);
  AMRMTokenIdentifier identifier=secretManager.createIdentifier();
  identifier.readFields(new DataInputStream(new ByteArrayInputStream(localToken.getIdentifier())));
  secretManager.retrievePassword(identifier);
  secretManager.applicationMasterFinished(attemptId);
  try {
    secretManager.retrievePassword(identifier);
    Assert.fail("Expect InvalidToken exception");
  }
 catch (  InvalidToken e) {
  }
}
