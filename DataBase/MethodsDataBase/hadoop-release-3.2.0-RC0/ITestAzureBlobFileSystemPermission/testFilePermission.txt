@Test public void testFilePermission() throws Exception {
  final AzureBlobFileSystem fs=this.getFileSystem();
  Assume.assumeTrue(fs.getIsNamespaceEnabled());
  fs.getConf().set(CommonConfigurationKeys.FS_PERMISSIONS_UMASK_KEY,DEFAULT_UMASK_VALUE);
  path=new Path(testRoot,UUID.randomUUID().toString());
  fs.mkdirs(path.getParent(),new FsPermission(FsAction.ALL,FsAction.NONE,FsAction.NONE));
  fs.removeDefaultAcl(path.getParent());
  fs.create(path,permission,true,KILOBYTE,(short)1,KILOBYTE - 1,null);
  FileStatus status=fs.getFileStatus(path);
  Assert.assertEquals(permission.applyUMask(DEFAULT_UMASK_PERMISSION),status.getPermission());
}
