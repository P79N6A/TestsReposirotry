@Test public void testQueueTypeChange(){
  AllocationConfiguration allocConf=scheduler.getAllocationConfiguration();
  queueManager.updateAllocationConfiguration(allocConf);
  FSQueue q1=queueManager.getLeafQueue("root.parent1.leaf1",true);
  assertNotNull("Queue root.parent1.leaf1 was not created",q1);
  assertEquals("createQueue() returned wrong queue","root.parent1.leaf1",q1.getName());
  assertTrue("root.parent1.leaf1 is not a dynamic queue",q1.isDynamic());
  FSQueue p1=queueManager.getParentQueue("root.parent1",false);
  assertNotNull("Queue root.parent1 was not created",p1);
  assertTrue("root.parent1 is not a dynamic queue",p1.isDynamic());
  allocConf.configuredQueues.get(FSQueueType.PARENT).add("root.parent1");
  allocConf.configuredQueues.get(FSQueueType.LEAF).add("root.parent1.leaf1");
  queueManager.updateAllocationConfiguration(allocConf);
  q1=queueManager.getLeafQueue("root.parent1.leaf1",false);
  assertFalse("root.parent1.leaf1 is not a static queue",q1.isDynamic());
  p1=queueManager.getParentQueue("root.parent1",false);
  assertFalse("root.parent1 is not a static queue",p1.isDynamic());
  allocConf.configuredQueues.get(FSQueueType.PARENT).remove("root.parent1");
  allocConf.configuredQueues.get(FSQueueType.LEAF).remove("root.parent1.leaf1");
  queueManager.updateAllocationConfiguration(allocConf);
  queueManager.setQueuesToDynamic(ImmutableSet.of("root.parent1","root.parent1.leaf1"));
  q1=queueManager.getLeafQueue("root.parent1.leaf1",false);
  assertTrue("root.parent1.leaf1 is not a dynamic queue",q1.isDynamic());
  p1=queueManager.getParentQueue("root.parent1",false);
  assertTrue("root.parent1 is not a dynamic queue",p1.isDynamic());
}
