@Test public void testRemovalOfChildlessParentQueue(){
  AllocationConfiguration allocConf=scheduler.getAllocationConfiguration();
  queueManager.updateAllocationConfiguration(allocConf);
  FSParentQueue q1=queueManager.getParentQueue("root.test.childB",false);
  assertNotNull("Queue root.test.childB was not created",q1);
  assertEquals("createQueue() returned wrong queue","root.test.childB",q1.getName());
  assertFalse("root.test.childB is a dynamic queue",q1.isDynamic());
  queueManager.removePendingIncompatibleQueues();
  queueManager.removeEmptyDynamicQueues();
  q1=queueManager.getParentQueue("root.test.childB",false);
  assertNotNull("Queue root.test.childB was deleted",q1);
  allocConf.configuredQueues.get(FSQueueType.PARENT).remove("root.test.childB");
  queueManager.updateAllocationConfiguration(allocConf);
  queueManager.setQueuesToDynamic(Collections.singleton("root.test.childB"));
  queueManager.removePendingIncompatibleQueues();
  queueManager.removeEmptyDynamicQueues();
  q1=queueManager.getParentQueue("root.leaf1",false);
  assertNull("Queue root.leaf1 was not deleted",q1);
}
