/** 
 * Tests that the sync and block report metrics get updated on cluster startup.
 */
@Test public void testSyncAndBlockReportMetric() throws Exception {
  MetricsRecordBuilder rb=getMetrics(NN_METRICS);
  assertCounter("SyncsNumOps",4L,rb);
  assertCounter("StorageBlockReportNumOps",(long)DATANODE_COUNT * cluster.getStoragesPerDatanode(),rb);
  Thread.sleep((PERCENTILES_INTERVAL + 1) * 1000);
  assertQuantileGauges("Syncs1s",rb);
  assertQuantileGauges("StorageBlockReport1s",rb);
}
