/** 
 * Test that after renaming, the nested subdirectory is moved along with all its ancestors.
 */
@Test public void testRenamePopulatesDirectoryAncestors() throws IOException {
  final FileSystem fs=getFileSystem();
  final Path src=path("testRenamePopulatesDirectoryAncestors/source");
  fs.mkdirs(src);
  final String nestedDir="/dir1/dir2/dir3/dir4";
  fs.mkdirs(path(src + nestedDir));
  Path dst=path("testRenamePopulatesDirectoryAncestorsNew");
  fs.rename(src,dst);
  validateAncestorsMoved(src,dst,nestedDir);
}
