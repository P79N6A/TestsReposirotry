/** 
 * Test access when requested permissions match the existing permissions.
 */
@Test public void testAccessWhenPermissionsMatchForAllAndReadWrite() throws Throwable {
  Configuration conf=fs.getConf();
  fs.setConf(conf);
  final Path testPath=new Path("/testAccessWhenPermissionsMatchForAllAndReadWrite");
  authorizer.init(conf);
  authorizer.addAuthRuleForOwner("/",WRITE,true);
  authorizer.addAuthRuleForOwner(testPath.toString(),WRITE,true);
  authorizer.addAuthRuleForOwner(testPath.toString(),READ,true);
  fs.updateWasbAuthorizer(authorizer);
  try {
    fs.mkdirs(testPath);
    assertPathExists(fs,"test path does not exist",testPath);
    fs.access(testPath,FsAction.ALL);
    fs.access(testPath,FsAction.READ_WRITE);
  }
  finally {
    recursiveDelete(testPath);
  }
}
