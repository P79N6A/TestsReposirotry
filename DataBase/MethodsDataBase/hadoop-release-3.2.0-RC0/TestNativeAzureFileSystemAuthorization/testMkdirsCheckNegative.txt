/** 
 * Negative test for mkdirs access check.
 * @throws Throwable
 */
@Test public void testMkdirsCheckNegative() throws Throwable {
  Path testPath=new Path("/testMkdirsAccessCheckNegative/1/2/3");
  setExpectedFailureMessage("mkdirs",testPath);
  authorizer.addAuthRuleForOwner("/",WRITE,false);
  fs.updateWasbAuthorizer(authorizer);
  try {
    fs.mkdirs(testPath);
    ContractTestUtils.assertPathDoesNotExist(fs,"testPath was not created",testPath);
  }
  finally {
    allowRecursiveDelete(fs,"/testMkdirsAccessCheckNegative");
    fs.delete(new Path("/testMkdirsAccessCheckNegative"),true);
  }
}
