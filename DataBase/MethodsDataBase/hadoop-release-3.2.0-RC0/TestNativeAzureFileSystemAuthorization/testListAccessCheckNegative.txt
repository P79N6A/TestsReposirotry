/** 
 * Negative test to verify listStatus access check.
 * @throws Throwable
 */
@Test public void testListAccessCheckNegative() throws Throwable {
  Path parentDir=new Path("/testListAccessCheckNegative");
  Path testPath=new Path(parentDir,"test.dat");
  setExpectedFailureMessage("liststatus",testPath);
  authorizer.addAuthRuleForOwner("/",WRITE,true);
  authorizer.addAuthRuleForOwner(testPath.toString(),READ,false);
  fs.updateWasbAuthorizer(authorizer);
  try {
    fs.create(testPath);
    fs.listStatus(testPath);
  }
  finally {
    allowRecursiveDelete(fs,parentDir.toString());
    fs.delete(parentDir,true);
  }
}
