/** 
 * This test validates the correctness of {@link RouterWebServiceUtil#deleteDuplicateNodesInfo(ArrayList)} in case wewant to merge 3 nodes with the same id. The expected result would be 1 node report with the newest healthy report.
 */
@Test public void testDeleteDuplicateNodes(){
  NodesInfo nodes=new NodesInfo();
  NodeInfo node1=new NodeInfo();
  node1.setId(NODE1);
  node1.setLastHealthUpdate(0);
  nodes.add(node1);
  NodeInfo node2=new NodeInfo();
  node2.setId(NODE1);
  node2.setLastHealthUpdate(1);
  nodes.add(node2);
  NodeInfo node3=new NodeInfo();
  node3.setId(NODE1);
  node3.setLastHealthUpdate(2);
  nodes.add(node3);
  NodesInfo result=RouterWebServiceUtil.deleteDuplicateNodesInfo(nodes.getNodes());
  Assert.assertNotNull(result);
  Assert.assertEquals(1,result.getNodes().size());
  NodeInfo node=result.getNodes().get(0);
  Assert.assertEquals(NODE1,node.getNodeId());
  Assert.assertEquals(2,node.getLastHealthUpdate());
}
