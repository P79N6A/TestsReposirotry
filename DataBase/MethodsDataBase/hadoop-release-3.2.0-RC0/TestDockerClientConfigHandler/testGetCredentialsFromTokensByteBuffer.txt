@Test public void testGetCredentialsFromTokensByteBuffer() throws Exception {
  Credentials credentials=DockerClientConfigHandler.readCredentialsFromConfigFile(new Path(file.toURI()),conf,APPLICATION_ID);
  DataOutputBuffer dob=new DataOutputBuffer();
  credentials.writeTokenStorageToStream(dob);
  ByteBuffer tokens=ByteBuffer.wrap(dob.getData(),0,dob.getLength());
  Credentials credentialsOut=DockerClientConfigHandler.getCredentialsFromTokensByteBuffer(tokens);
  assertEquals(credentials.numberOfTokens(),credentialsOut.numberOfTokens());
  for (  Token<? extends TokenIdentifier> tkIn : credentials.getAllTokens()) {
    DockerCredentialTokenIdentifier ti=(DockerCredentialTokenIdentifier)tkIn.decodeIdentifier();
    Token tkOut=credentialsOut.getToken(new Text(ti.getRegistryUrl() + "-" + ti.getApplicationId()));
    assertEquals(tkIn.getKind(),tkOut.getKind());
    assertEquals(new String(tkIn.getIdentifier()),new String(tkOut.getIdentifier()));
    assertEquals(new String(tkIn.getPassword()),new String(tkOut.getPassword()));
    assertEquals(tkIn.getService(),tkOut.getService());
  }
}
