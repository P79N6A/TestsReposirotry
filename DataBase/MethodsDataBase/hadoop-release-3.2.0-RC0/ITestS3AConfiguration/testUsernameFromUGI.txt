@Test public void testUsernameFromUGI() throws Throwable {
  final String alice="alice";
  UserGroupInformation fakeUser=UserGroupInformation.createUserForTesting(alice,new String[]{"users","administrators"});
  conf=new Configuration();
  fs=fakeUser.doAs(new PrivilegedExceptionAction<S3AFileSystem>(){
    @Override public S3AFileSystem run() throws Exception {
      return S3ATestUtils.createTestFileSystem(conf);
    }
  }
);
  assertEquals("username",alice,fs.getUsername());
  FileStatus status=fs.getFileStatus(new Path("/"));
  assertEquals("owner in " + status,alice,status.getOwner());
  assertEquals("group in " + status,alice,status.getGroup());
}
