@Test public void testAbfsOutputStreamSyncFlush() throws Exception {
  final AzureBlobFileSystem fs=getFileSystem();
  final Path testFilePath=path(methodName.getMethodName());
  final byte[] b;
  try (FSDataOutputStream stream=fs.create(testFilePath)){
    b=new byte[TEST_BUFFER_SIZE];
    new Random().nextBytes(b);
    stream.write(b);
    for (int i=0; i < FLUSH_TIMES; i++) {
      stream.hsync();
      stream.hflush();
      Thread.sleep(10);
    }
  }
   final byte[] r=new byte[TEST_BUFFER_SIZE];
  try (FSDataInputStream inputStream=fs.open(testFilePath,4 * ONE_MB)){
    int result=inputStream.read(r);
    assertNotEquals(-1,result);
    assertArrayEquals(r,b);
  }
 }
