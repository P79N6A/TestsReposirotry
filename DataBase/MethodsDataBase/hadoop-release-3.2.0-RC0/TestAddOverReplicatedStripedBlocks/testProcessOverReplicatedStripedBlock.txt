@Test public void testProcessOverReplicatedStripedBlock() throws Exception {
  long fileLen=dataBlocks * blockSize;
  DFSTestUtil.createStripedFile(cluster,filePath,null,1,stripesPerBlock,false);
  LocatedBlocks lbs=cluster.getNameNodeRpc().getBlockLocations(filePath.toString(),0,fileLen);
  LocatedStripedBlock bg=(LocatedStripedBlock)(lbs.get(0));
  long gs=bg.getBlock().getGenerationStamp();
  String bpid=bg.getBlock().getBlockPoolId();
  long groupId=bg.getBlock().getBlockId();
  Block blk=new Block(groupId,blockSize,gs);
  for (int i=0; i < groupSize; i++) {
    blk.setBlockId(groupId + i);
    cluster.injectBlocks(i,Arrays.asList(blk),bpid);
  }
  cluster.triggerBlockReports();
  blk.setBlockId(groupId);
  cluster.injectBlocks(numDNs - 3,Arrays.asList(blk),bpid);
  cluster.injectBlocks(numDNs - 2,Arrays.asList(blk),bpid);
  blk.setBlockId(groupId + dataBlocks);
  cluster.injectBlocks(numDNs - 1,Arrays.asList(blk),bpid);
  cluster.triggerBlockReports();
  cluster.triggerHeartbeats();
  cluster.triggerHeartbeats();
  cluster.triggerBlockReports();
  lbs=cluster.getNameNodeRpc().getBlockLocations(filePath.toString(),0,fileLen);
  StripedFileTestUtil.verifyLocatedStripedBlocks(lbs,groupSize);
}
