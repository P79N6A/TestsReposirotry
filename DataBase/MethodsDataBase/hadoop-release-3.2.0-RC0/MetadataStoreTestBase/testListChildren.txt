@Test public void testListChildren() throws Exception {
  setupListStatus();
  DirListingMetadata dirMeta;
  dirMeta=ms.listChildren(strToPath("/"));
  if (!allowMissing()) {
    assertNotNull(dirMeta);
    assertFalse("Root dir is not cached, or partially cached",dirMeta.isAuthoritative());
    assertListingsEqual(dirMeta.getListing(),"/a1","/a2");
  }
  dirMeta=ms.listChildren(strToPath("/a1"));
  if (!allowMissing() || dirMeta != null) {
    dirMeta=dirMeta.withoutTombstones();
    assertListingsEqual(dirMeta.getListing(),"/a1/b1","/a1/b2");
  }
  dirMeta=ms.listChildren(strToPath("/a1/b1"));
  if (!allowMissing() || dirMeta != null) {
    assertListingsEqual(dirMeta.getListing(),"/a1/b1/file1","/a1/b1/file2","/a1/b1/c1");
  }
}
