@Test public void testJavaSerialization() throws Exception {
  HdfsFileStatusProto hsp=baseStatus().build();
  HdfsFileStatus hs=PBHelperClient.convert(hsp);
  hs.makeQualified(BASEURI,BASEPATH);
  ByteArrayOutputStream baos=new ByteArrayOutputStream(1024);
  try (ObjectOutputStream oos=new ObjectOutputStream(baos)){
    oos.writeObject(hs);
  }
   ByteArrayInputStream bais=new ByteArrayInputStream(baos.toByteArray());
  try (ObjectInputStream ois=new ObjectInputStream(bais)){
    FileStatus deser=(FileStatus)ois.readObject();
    assertEquals(hs,deser);
    checkFields((FileStatus)hs,deser);
  }
 }
