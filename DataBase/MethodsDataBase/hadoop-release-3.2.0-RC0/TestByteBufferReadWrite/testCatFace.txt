/** 
 * Test that Unicode characters outside the basic multilingual plane, such as this cat face, are properly encoded.
 */
@Test public void testCatFace() throws IOException {
  byte[] buff=new byte[10];
  MockDataTarget target=new MockDataTarget(buff);
  ByteBufferDataWriter writer=new ByteBufferDataWriter(target);
  String catFace="\uD83D\uDE38";
  writer.writeUTF(catFace);
  InputBuffer input=new InputBuffer(buff);
  input.rewind(0,buff.length);
  ByteBufferDataReader reader=new ByteBufferDataReader(input);
  Assert.assertEquals(catFace,reader.readUTF());
  String fromJava=new java.io.DataInputStream(new ByteArrayInputStream(buff)).readUTF();
  Assert.assertEquals(catFace,fromJava);
}
