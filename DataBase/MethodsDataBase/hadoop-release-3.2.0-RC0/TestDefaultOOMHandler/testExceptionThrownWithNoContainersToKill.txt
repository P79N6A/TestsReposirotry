/** 
 * Test an OOM situation where there are no containers that can be killed.
 */
@Test(expected=YarnRuntimeException.class) public void testExceptionThrownWithNoContainersToKill() throws Exception {
  Context context=mock(Context.class);
  when(context.getContainers()).thenReturn(new ConcurrentHashMap<>(0));
  CGroupsHandler cGroupsHandler=mock(CGroupsHandler.class);
  when(cGroupsHandler.getCGroupParam(CGroupsHandler.CGroupController.MEMORY,"",CGROUP_PARAM_MEMORY_OOM_CONTROL)).thenReturn("under_oom 1").thenReturn("under_oom 0");
  DefaultOOMHandler handler=new DefaultOOMHandler(context,false){
    @Override protected CGroupsHandler getCGroupsHandler(){
      return cGroupsHandler;
    }
  }
;
  handler.run();
}
