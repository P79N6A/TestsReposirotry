/** 
 * Test unbuffer. 
 */
@Test(timeout=120000) public void testUnbuffer() throws Exception {
  OutputStream out=getOutputStream(smallBufferSize);
  writeData(out);
  try (InputStream in=getInputStream(smallBufferSize)){
    readCheck(in);
    ((CanUnbuffer)in).unbuffer();
    if (in instanceof Seekable) {
      ((Seekable)in).seek(0);
      readCheck(in);
    }
    ((CanUnbuffer)in).unbuffer();
  }
   try (InputStream in=getInputStream(smallBufferSize)){
    if (in instanceof PositionedReadable) {
      PositionedReadable pin=(PositionedReadable)in;
      preadCheck(pin);
      ((CanUnbuffer)in).unbuffer();
      preadCheck(pin);
      ((CanUnbuffer)in).unbuffer();
    }
  }
 }
