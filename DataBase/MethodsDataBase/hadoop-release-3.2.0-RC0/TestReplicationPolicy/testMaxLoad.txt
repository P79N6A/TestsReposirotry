@Test public void testMaxLoad(){
  FSClusterStats statistics=mock(FSClusterStats.class);
  DatanodeDescriptor node=mock(DatanodeDescriptor.class);
  when(statistics.getInServiceXceiverAverage()).thenReturn(0.0);
  when(node.getXceiverCount()).thenReturn(1);
  final Configuration conf=new Configuration();
  final Class<? extends BlockPlacementPolicy> replicatorClass=conf.getClass(DFSConfigKeys.DFS_BLOCK_REPLICATOR_CLASSNAME_KEY,DFSConfigKeys.DFS_BLOCK_REPLICATOR_CLASSNAME_DEFAULT,BlockPlacementPolicy.class);
  BlockPlacementPolicy bpp=ReflectionUtils.newInstance(replicatorClass,conf);
  assertTrue(bpp instanceof BlockPlacementPolicyDefault);
  BlockPlacementPolicyDefault bppd=(BlockPlacementPolicyDefault)bpp;
  bppd.initialize(conf,statistics,null,null);
  assertFalse(bppd.excludeNodeByLoad(node));
  when(statistics.getInServiceXceiverAverage()).thenReturn(1.0);
  when(node.getXceiverCount()).thenReturn(10);
  assertTrue(bppd.excludeNodeByLoad(node));
}
