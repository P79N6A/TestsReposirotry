@Test public void testConfLinkSlash() throws Exception {
  String clusterName="ClusterX";
  URI viewFsUri=new URI(FsConstants.VIEWFS_SCHEME,clusterName,"/",null,null);
  Configuration newConf=new Configuration();
  ConfigUtil.addLink(newConf,clusterName,"/",new Path(targetTestRoot,"/").toUri());
  String mtPrefix=Constants.CONFIG_VIEWFS_PREFIX + "." + clusterName+ ".";
  try {
    FileSystem.get(viewFsUri,newConf);
    fail("ViewFileSystem should error out on mount table entry: " + mtPrefix + Constants.CONFIG_VIEWFS_LINK+ "."+ "/");
  }
 catch (  Exception e) {
    if (e instanceof UnsupportedFileSystemException) {
      String msg=" Use " + Constants.CONFIG_VIEWFS_LINK_MERGE_SLASH + " instead";
      assertThat(e.getMessage(),containsString(msg));
    }
 else {
      fail("Unexpected exception: " + e.getMessage());
    }
  }
}
