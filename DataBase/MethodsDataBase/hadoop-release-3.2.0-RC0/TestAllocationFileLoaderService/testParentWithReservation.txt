@Test public void testParentWithReservation() throws Exception {
  Configuration conf=new Configuration();
  conf.set(FairSchedulerConfiguration.ALLOCATION_FILE,ALLOC_FILE);
  PrintWriter out=new PrintWriter(new FileWriter(ALLOC_FILE));
  out.println("<?xml version=\"1.0\"?>");
  out.println("<allocations>");
  out.println("<queue name=\"parent\">");
  out.println("<reservation>");
  out.println("</reservation>");
  out.println(" <queue name=\"child\">");
  out.println(" </queue>");
  out.println("</queue>");
  out.println("</allocations>");
  out.close();
  AllocationFileLoaderService allocLoader=new AllocationFileLoaderService();
  allocLoader.init(conf);
  ReloadListener confHolder=new ReloadListener();
  allocLoader.setReloadListener(confHolder);
  try {
    allocLoader.reloadAllocations();
  }
 catch (  AllocationConfigurationException ex) {
    assertEquals(ex.getMessage(),"The configuration settings for root.parent" + " are invalid. A queue element that contains child queue elements" + " or that has the type='parent' attribute cannot also include a"+ " reservation element.");
  }
}
