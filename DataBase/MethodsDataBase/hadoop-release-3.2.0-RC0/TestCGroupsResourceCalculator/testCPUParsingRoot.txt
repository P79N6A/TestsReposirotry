@Test public void testCPUParsingRoot() throws Exception {
  File cgcpuacctDir=new File(basePath + "/cgcpuacct");
  File cgcpuacctRootDir=new File(cgcpuacctDir,"/yarn");
  when(cGroupsHandler.getControllerPath(CGroupsHandler.CGroupController.CPUACCT)).thenReturn(cgcpuacctDir.getAbsolutePath());
  Assert.assertTrue("Setup error",cgcpuacctRootDir.mkdirs());
  try {
    FileUtils.writeStringToFile(new File(cgcpuacctRootDir,CGroupsResourceCalculator.CPU_STAT),"user 5415\n" + "system 3632",StandardCharsets.UTF_8);
    CGroupsResourceCalculator calculator=new CGroupsResourceCalculator(null,basePath,cGroupsHandler,clock,10);
    calculator.setCGroupFilePaths();
    calculator.updateProcessTree();
    Assert.assertEquals("Incorrect CPU usage",90470,calculator.getCumulativeCpuTime());
  }
  finally {
    FileUtils.deleteDirectory(new File(basePath));
  }
}
