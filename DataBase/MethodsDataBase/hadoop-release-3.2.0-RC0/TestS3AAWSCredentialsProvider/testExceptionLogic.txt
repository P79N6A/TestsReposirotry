@Test public void testExceptionLogic() throws Throwable {
  AWSCredentialProviderList providers=new AWSCredentialProviderList();
  NoAuthWithAWSException noAuth=intercept(NoAuthWithAWSException.class,AWSCredentialProviderList.NO_AWS_CREDENTIAL_PROVIDERS,() -> providers.getCredentials());
  providers.close();
  S3ARetryPolicy retryPolicy=new S3ARetryPolicy(new Configuration());
  assertEquals("Expected no retry on auth failure",RetryPolicy.RetryAction.FAIL.action,retryPolicy.shouldRetry(noAuth,0,0,true).action);
  try {
    throw S3AUtils.translateException("login","",noAuth);
  }
 catch (  AccessDeniedException expected) {
    assertEquals("Expected no retry on AccessDeniedException",RetryPolicy.RetryAction.FAIL.action,retryPolicy.shouldRetry(expected,0,0,true).action);
  }
}
