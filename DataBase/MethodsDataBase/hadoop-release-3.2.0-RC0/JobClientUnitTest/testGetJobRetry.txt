@Test public void testGetJobRetry() throws Exception {
  JobConf conf=new JobConf();
  conf.setInt(MRJobConfig.MR_CLIENT_JOB_MAX_RETRIES,2);
  TestJobClientGetJob client=new TestJobClientGetJob(conf);
  JobID id=new JobID("ajob",1);
  RunningJob rj=mock(RunningJob.class);
  client.setRunningJob(rj);
  assertNotNull(client.getJob(id));
  assertEquals(client.getLastGetJobRetriesCounter(),0);
  client.setGetJobRetries(2);
  assertNotNull(client.getJob(id));
  assertEquals(client.getLastGetJobRetriesCounter(),2);
  client.setGetJobRetries(3);
  assertNull(client.getJob(id));
}
