@Test public void testRestartWithRenames() throws Exception {
  final int len=8196;
  final Path zoneParent=new Path("/zones");
  final Path zone=new Path(zoneParent,"zone");
  fsWrapper.mkdir(zone,FsPermission.getDirDefault(),true);
  dfsAdmin.createEncryptionZone(zone,TEST_KEY,NO_TRASH);
  DFSTestUtil.createFile(fs,new Path(zone,"f"),len,(short)1,0xFEED);
  fsWrapper.rename(new Path(zone,"f"),new Path(zone,"f1"));
  rollKey(TEST_KEY);
  dfsAdmin.reencryptEncryptionZone(zone,ReencryptAction.START);
  waitForReencryptedZones(1);
  cluster.restartNameNodes();
  cluster.waitActive();
  waitForReencryptedZones(1);
}
