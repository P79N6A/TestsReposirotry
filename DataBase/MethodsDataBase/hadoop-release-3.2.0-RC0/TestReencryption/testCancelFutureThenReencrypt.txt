@Test public void testCancelFutureThenReencrypt() throws Exception {
  final Path zoneParent=new Path("/zones");
  final Path zone=new Path(zoneParent,"zone");
  cancelFutureDuringReencryption(zone);
  getEzManager().resumeReencryptForTesting();
  dfsAdmin.reencryptEncryptionZone(zone,ReencryptAction.START);
  waitForZoneCompletes(zone.toString());
  final RemoteIterator<ZoneReencryptionStatus> it=dfsAdmin.listReencryptionStatus();
  final ZoneReencryptionStatus zs=it.next();
  assertEquals(zone.toString(),zs.getZoneName());
  assertEquals(ZoneReencryptionStatus.State.Completed,zs.getState());
  assertFalse(zs.isCanceled());
  verifyZoneCompletionTime(zs);
  assertEquals(10,zs.getFilesReencrypted());
}
