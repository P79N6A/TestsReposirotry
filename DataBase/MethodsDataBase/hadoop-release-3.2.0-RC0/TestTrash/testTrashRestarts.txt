/** 
 * Simulate the carrier process of the trash emptier restarts, verify it honors the <b>fs.trash.interval</b> before and after restart.
 * @throws Exception
 */
@Test public void testTrashRestarts() throws Exception {
  Configuration conf=new Configuration();
  conf.setClass("fs.trash.classname",AuditableTrashPolicy.class,TrashPolicy.class);
  conf.setClass("fs.file.impl",TestLFS.class,FileSystem.class);
  conf.set(FS_TRASH_INTERVAL_KEY,"50");
  Trash trash=new Trash(conf);
  for (int i=0; i < 5; i++) {
    trash.checkpoint();
  }
  verifyAuditableTrashEmptier(trash,120,3);
  conf.set(FS_TRASH_INTERVAL_KEY,"100");
  Trash trashNew=new Trash(conf);
  verifyAuditableTrashEmptier(trashNew,120,2);
}
