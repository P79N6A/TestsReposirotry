/** 
 * HTTPS test is different since we need to setup SSL configuration. NN also binds the wildcard address for HTTPS port by default so we must pick a different host/port combination.
 * @throws Exception
 */
@Test(timeout=300000) public void testHttpsBindHostKey() throws Exception {
  LOG.info("Testing behavior without " + DFS_JOURNALNODE_HTTPS_BIND_HOST_KEY);
  setupSsl();
  conf.set(DFS_HTTP_POLICY_KEY,HttpConfig.Policy.HTTPS_ONLY.name());
  conf.set(DFS_JOURNALNODE_HTTPS_ADDRESS_KEY,LOCALHOST_SERVER_ADDRESS);
  jCluster=new MiniJournalCluster.Builder(conf).format(true).numJournalNodes(NUM_JN).build();
  jn=jCluster.getJournalNode(0);
  String address=jn.getHttpsAddress().toString();
  assertFalse("HTTP Bind address not expected to be wildcard by default.",address.startsWith(WILDCARD_ADDRESS));
  LOG.info("Testing behavior with " + DFS_JOURNALNODE_HTTPS_BIND_HOST_KEY);
  conf.set(DFS_JOURNALNODE_HTTPS_BIND_HOST_KEY,WILDCARD_ADDRESS);
  conf.set(DFS_JOURNALNODE_HTTPS_ADDRESS_KEY,LOCALHOST_SERVER_ADDRESS);
  jCluster=new MiniJournalCluster.Builder(conf).format(true).numJournalNodes(NUM_JN).build();
  jn=jCluster.getJournalNode(0);
  address=jn.getHttpsAddress().toString();
  assertTrue("HTTP Bind address " + address + " is not wildcard.",address.startsWith(WILDCARD_ADDRESS));
}
