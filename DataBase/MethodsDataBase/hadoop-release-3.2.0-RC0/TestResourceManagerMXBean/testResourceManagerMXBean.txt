@Test public void testResourceManagerMXBean() throws Exception {
  try (ResourceManager resourceManager=new ResourceManager()){
    Configuration conf=new YarnConfiguration();
    UserGroupInformation.setConfiguration(conf);
    resourceManager.init(conf);
    MBeanServer mbs=ManagementFactory.getPlatformMBeanServer();
    ObjectName mxbeanName=new ObjectName("Hadoop:service=ResourceManager,name=ResourceManager");
    boolean securityEnabled=(boolean)mbs.getAttribute(mxbeanName,"SecurityEnabled");
    Assert.assertEquals(resourceManager.isSecurityEnabled(),securityEnabled);
  }
 }
