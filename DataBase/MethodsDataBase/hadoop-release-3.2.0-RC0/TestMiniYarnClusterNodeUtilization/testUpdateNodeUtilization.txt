/** 
 * Simulates a NM heartbeat using the simulated NodeStatus fixture. Verify both the RMNode and SchedulerNode have been updated with the new utilization.
 */
@Test(timeout=60000) public void testUpdateNodeUtilization() throws InterruptedException, IOException, YarnException {
  assertTrue("NMs fail to connect to the RM",cluster.waitForNodeManagersToConnect(10000));
  verifySimulatedUtilization();
  nodeStatus=createNodeStatus(nm.getNMContext().getNodeId(),0,CONTAINER_PMEM_2,CONTAINER_VMEM_2,CONTAINER_CPU_2,NODE_PMEM_2,NODE_VMEM_2,NODE_CPU_2);
  nm.setNodeStatus(nodeStatus);
  verifySimulatedUtilization();
}
