@Test public void testCloseAfterAbort() throws Exception {
  HdfsConfiguration conf=new HdfsConfiguration();
  conf.setLong(DFSConfigKeys.DFS_BLOCK_SIZE_KEY,blockSize);
  try {
    setup(conf);
    final Path dirFile=new Path(dir,"ecfile");
    FSDataOutputStream out=dfs.create(dirFile,true);
    assertTrue(out.getWrappedStream() instanceof DFSStripedOutputStream);
    DFSStripedOutputStream stripedOut=(DFSStripedOutputStream)out.getWrappedStream();
    stripedOut.abort();
    LambdaTestUtils.intercept(IOException.class,"Lease timeout",stripedOut::close);
  }
  finally {
    tearDown();
  }
}
