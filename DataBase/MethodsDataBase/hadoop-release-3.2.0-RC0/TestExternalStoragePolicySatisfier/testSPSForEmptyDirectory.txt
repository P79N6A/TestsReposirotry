/** 
 * Test SPS for empty directory, xAttr should be removed.
 */
@Test(timeout=300000) public void testSPSForEmptyDirectory() throws IOException, TimeoutException, InterruptedException {
  try {
    hdfsCluster=startCluster(config,allDiskTypes,NUM_OF_DATANODES,STORAGES_PER_DATANODE,CAPACITY);
    hdfsCluster.waitActive();
    DistributedFileSystem fs=hdfsCluster.getFileSystem();
    Path emptyDir=new Path("/emptyDir");
    fs.mkdirs(emptyDir);
    fs.satisfyStoragePolicy(emptyDir);
    DFSTestUtil.waitForXattrRemoved("/emptyDir",XATTR_SATISFY_STORAGE_POLICY,hdfsCluster.getNamesystem(),30000);
  }
  finally {
    shutdownCluster();
  }
}
