/** 
 * Checks whether  {@link DataNode#checkDiskErrorAsync()} is being called or not.Before refactoring the code the above function was not getting called 
 * @throws IOException , InterruptedException
 */
@Test(timeout=60000) public void testcheckDiskError() throws Exception {
  if (cluster.getDataNodes().size() <= 0) {
    cluster.startDataNodes(conf,1,true,null,null);
    cluster.waitActive();
  }
  DataNode dataNode=cluster.getDataNodes().get(0);
  final long lastCheckTimestamp=dataNode.getLastDiskErrorCheck();
  dataNode.checkDiskError();
  GenericTestUtils.waitFor(new Supplier<Boolean>(){
    @Override public Boolean get(){
      return dataNode.getLastDiskErrorCheck() > lastCheckTimestamp;
    }
  }
,100,60000);
}
