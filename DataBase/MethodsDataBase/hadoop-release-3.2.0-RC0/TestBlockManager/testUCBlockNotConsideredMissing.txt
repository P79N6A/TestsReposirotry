@Test public void testUCBlockNotConsideredMissing() throws Exception {
  DatanodeDescriptor node=nodes.get(0);
  DatanodeStorageInfo ds=node.getStorageInfos()[0];
  node.setAlive(true);
  DatanodeRegistration nodeReg=new DatanodeRegistration(node,null,null,"");
  bm.getDatanodeManager().registerDatanode(nodeReg);
  bm.getDatanodeManager().addDatanode(node);
  List<ReceivedDeletedBlockInfo> rdbiList=new ArrayList<>();
  long blockId=42;
  BlockInfo receivedBlock=addUcBlockToBM(blockId);
  rdbiList.add(new ReceivedDeletedBlockInfo(new Block(receivedBlock),ReceivedDeletedBlockInfo.BlockStatus.RECEIVED_BLOCK,null));
  rdbiList.add(new ReceivedDeletedBlockInfo(new Block(blockId),ReceivedDeletedBlockInfo.BlockStatus.DELETED_BLOCK,null));
  StorageReceivedDeletedBlocks srdb=new StorageReceivedDeletedBlocks(new DatanodeStorage(ds.getStorageID()),rdbiList.toArray(new ReceivedDeletedBlockInfo[rdbiList.size()]));
  bm.setInitializedReplQueues(true);
  bm.processIncrementalBlockReport(node,srdb);
  assertEquals("UC block was incorrectly added to needed Replications",0,bm.neededReconstruction.size());
  bm.setInitializedReplQueues(false);
}
