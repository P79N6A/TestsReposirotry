@Test public void testRegistrationQuorumAllExpired() throws IOException {
  List<MembershipState> registrationList=new ArrayList<>();
  String ns=NAMESERVICES[0];
  String nn=NAMENODES[0];
  String rpcAddress="testrpcaddress";
  String serviceAddress="testserviceaddress";
  String lifelineAddress="testlifelineaddress";
  String blockPoolId="testblockpool";
  String clusterId="testcluster";
  String webAddress="testwebaddress";
  boolean safemode=false;
  long startingTime=Time.now();
  MembershipState record=MembershipState.newInstance(ROUTERS[0],ns,nn,clusterId,blockPoolId,rpcAddress,webAddress,lifelineAddress,webAddress,FederationNamenodeServiceState.EXPIRED,safemode);
  record.setDateModified(startingTime - 10000);
  registrationList.add(record);
  record=MembershipState.newInstance(ROUTERS[1],ns,nn,clusterId,blockPoolId,rpcAddress,serviceAddress,lifelineAddress,webAddress,FederationNamenodeServiceState.EXPIRED,safemode);
  record.setDateModified(startingTime);
  registrationList.add(record);
  record=MembershipState.newInstance(ROUTERS[2],ns,nn,clusterId,blockPoolId,rpcAddress,serviceAddress,lifelineAddress,webAddress,FederationNamenodeServiceState.EXPIRED,safemode);
  record.setDateModified(startingTime);
  registrationList.add(record);
  record=MembershipState.newInstance(ROUTERS[3],ns,nn,clusterId,blockPoolId,rpcAddress,serviceAddress,lifelineAddress,webAddress,FederationNamenodeServiceState.EXPIRED,safemode);
  record.setDateModified(startingTime);
  registrationList.add(record);
  registerAndLoadRegistrations(registrationList);
  assertNull(getNamenodeRegistration(record.getNameserviceId(),record.getNamenodeId()));
}
