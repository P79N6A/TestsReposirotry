@Test public void testStateStoreDisconnected() throws Exception {
  getStateStore().closeDriver();
  assertFalse(getStateStore().isDriverReady());
  NamenodeHeartbeatRequest hbRequest=NamenodeHeartbeatRequest.newInstance();
  hbRequest.setNamenodeMembership(createMockRegistrationForNamenode("test","test",FederationNamenodeServiceState.UNAVAILABLE));
  verifyException(membershipStore,"namenodeHeartbeat",StateStoreUnavailableException.class,new Class[]{NamenodeHeartbeatRequest.class},new Object[]{hbRequest});
  GetNamenodeRegistrationsRequest getRequest=GetNamenodeRegistrationsRequest.newInstance();
  verifyException(membershipStore,"getNamenodeRegistrations",null,new Class[]{GetNamenodeRegistrationsRequest.class},new Object[]{getRequest});
  verifyException(membershipStore,"getExpiredNamenodeRegistrations",null,new Class[]{GetNamenodeRegistrationsRequest.class},new Object[]{getRequest});
  UpdateNamenodeRegistrationRequest overrideRequest=UpdateNamenodeRegistrationRequest.newInstance();
  verifyException(membershipStore,"updateNamenodeRegistration",null,new Class[]{UpdateNamenodeRegistrationRequest.class},new Object[]{overrideRequest});
}
