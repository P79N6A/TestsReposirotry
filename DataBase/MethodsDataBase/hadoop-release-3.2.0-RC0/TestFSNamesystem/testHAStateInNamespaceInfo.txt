@Test public void testHAStateInNamespaceInfo() throws IOException {
  Configuration conf=new Configuration();
  FSEditLog fsEditLog=Mockito.mock(FSEditLog.class);
  FSImage fsImage=Mockito.mock(FSImage.class);
  Mockito.when(fsImage.getEditLog()).thenReturn(fsEditLog);
  NNStorage nnStorage=Mockito.mock(NNStorage.class);
  Mockito.when(fsImage.getStorage()).thenReturn(nnStorage);
  FSNamesystem fsNamesystem=new FSNamesystem(conf,fsImage);
  FSNamesystem fsn=Mockito.spy(fsNamesystem);
  Mockito.when(fsn.getState()).thenReturn(HAServiceProtocol.HAServiceState.ACTIVE);
  NamespaceInfo nsInfo=fsn.unprotectedGetNamespaceInfo();
  assertNotNull(nsInfo.getState());
}
