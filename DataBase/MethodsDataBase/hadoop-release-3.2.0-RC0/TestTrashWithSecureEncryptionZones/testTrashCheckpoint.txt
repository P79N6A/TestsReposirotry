@Test public void testTrashCheckpoint() throws Exception {
  final Path zone1=new Path("/zone" + zoneCounter.getAndIncrement());
  fs.mkdirs(zone1);
  final Path zone2=new Path(zone1 + "/zone" + zoneCounter.getAndIncrement());
  fs.mkdirs(zone2);
  dfsAdmin.createEncryptionZone(zone2,TEST_KEY,PROVISION_TRASH);
  final Path encFile1=new Path(zone2,"encFile" + fileCounter.getAndIncrement());
  DFSTestUtil.createFile(fs,encFile1,LEN,(short)1,0xFEED);
  Path trashDir=new Path(zone2,fs.TRASH_PREFIX + "/" + HDFS_USER_NAME+ "/"+ CURRENT);
  String trashPath=trashDir.toString() + encFile1.toString();
  Path deletedFile=verifyTrashLocationWithShellDelete(encFile1);
  assertEquals("Deleted file not at the expected trash location: " + trashPath,trashPath,deletedFile.toUri().getPath());
  trashPath=fs.getHomeDirectory().toUri().getPath() + "/" + fs.TRASH_PREFIX+ "/"+ CURRENT+ zone2;
  Path deletedDir=verifyTrashLocationWithShellDelete(zone2);
  assertEquals("Deleted zone not at the expected trash location: " + trashPath,trashPath,deletedDir.toUri().getPath());
}
