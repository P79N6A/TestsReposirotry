@Test public void testDeleteFromTrashWithinEZ() throws Exception {
  final Path zone1=new Path("/zone" + zoneCounter.getAndIncrement());
  fs.mkdirs(zone1);
  dfsAdmin.createEncryptionZone(zone1,TEST_KEY,PROVISION_TRASH);
  final Path encFile1=new Path(zone1,"encFile" + fileCounter.getAndIncrement());
  DFSTestUtil.createFile(fs,encFile1,LEN,(short)1,0xFEED);
  final Path trashFile=new Path(shell.getCurrentTrashDir(encFile1) + "/" + encFile1);
  String[] argv=new String[]{"-rm","-r",encFile1.toString()};
  int res=ToolRunner.run(shell,argv);
  assertEquals("rm failed",0,res);
  String[] argvDeleteTrash=new String[]{"-rm","-r",trashFile.toString()};
  int resDeleteTrash=ToolRunner.run(shell,argvDeleteTrash);
  assertEquals("rm failed",0,resDeleteTrash);
  assertFalse("File deleted from Trash : " + trashFile,fs.exists(trashFile));
}
