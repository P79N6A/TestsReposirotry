@Test public void testTrashExpunge() throws Exception {
  final Path zone1=new Path("/zone" + zoneCounter.getAndIncrement());
  fs.mkdirs(zone1);
  final Path zone2=new Path("/zone" + zoneCounter.getAndIncrement());
  fs.mkdirs(zone2);
  dfsAdmin.createEncryptionZone(zone1,TEST_KEY,PROVISION_TRASH);
  final Path file1=new Path(zone1,"encFile" + fileCounter.getAndIncrement());
  final Path file2=new Path(zone2,"file" + fileCounter.getAndIncrement());
  DFSTestUtil.createFile(fs,file1,LEN,(short)1,0xFEED);
  DFSTestUtil.createFile(fs,file2,LEN,(short)1,0xFEED);
  List<Path> trashPaths=Lists.newArrayList();
  trashPaths.add(verifyTrashLocationWithShellDelete(file1));
  trashPaths.add(verifyTrashLocationWithShellDelete(file2));
  verifyTrashExpunge(trashPaths);
  final Path file3=new Path(zone1,"encFile" + fileCounter.getAndIncrement());
  DFSTestUtil.createFile(fs,file3,LEN,(short)1,0XFEED);
  Path trashPath=verifyTrashLocationWithShellDelete(file3);
  DFSTestUtil.verifyDelete(shell,fs,zone1,true);
  verifyTrashExpunge(Lists.newArrayList(trashPath));
}
