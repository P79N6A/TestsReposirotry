@Test(timeout=10000) public void testAttemptAddedAtFinalSaving(){
  submitApplicationAttempt();
  applicationAttempt.handle(new RMAppAttemptEvent(applicationAttempt.getAppAttemptId(),RMAppAttemptEventType.KILL));
  assertEquals(RMAppAttemptState.FINAL_SAVING,applicationAttempt.getAppAttemptState());
  applicationAttempt.handle(new RMAppAttemptEvent(applicationAttempt.getAppAttemptId(),RMAppAttemptEventType.ATTEMPT_ADDED));
  assertEquals(RMAppAttemptState.FINAL_SAVING,applicationAttempt.getAppAttemptState());
}
