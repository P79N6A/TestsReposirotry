@Test public void testForFlowRunAppsPagination() throws Exception {
  Client client=createClient();
  try {
    int totalAppEntities=5;
    String resourceUri="http://localhost:" + getServerPort() + "/ws/v2/"+ "timeline/clusters/cluster1/users/user1/flows/flow1/runs/1/apps";
    URI uri=URI.create(resourceUri);
    ClientResponse resp=getResponse(client,uri);
    List<TimelineEntity> entities=resp.getEntity(new GenericType<List<TimelineEntity>>(){
    }
);
    assertNotNull(entities);
    assertEquals(totalAppEntities,entities.size());
    TimelineEntity entity1=entities.get(0);
    TimelineEntity entity5=entities.get(totalAppEntities - 1);
    int limit=3;
    String queryParam="?limit=" + limit;
    uri=URI.create(resourceUri + queryParam);
    resp=getResponse(client,uri);
    entities=resp.getEntity(new GenericType<List<TimelineEntity>>(){
    }
);
    assertNotNull(entities);
    assertEquals(limit,entities.size());
    assertEquals(entity1,entities.get(0));
    TimelineEntity entity3=entities.get(limit - 1);
    uri=URI.create(resourceUri + queryParam + "&fromid="+ entity3.getInfo().get(TimelineReaderUtils.FROMID_KEY));
    resp=getResponse(client,uri);
    entities=resp.getEntity(new GenericType<List<TimelineEntity>>(){
    }
);
    assertNotNull(entities);
    assertEquals(3,entities.size());
    assertEquals(entity3,entities.get(0));
    assertEquals(entity5,entities.get(2));
  }
  finally {
    client.destroy();
  }
}
