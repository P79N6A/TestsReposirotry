/** 
 * Tests that only a single space check is performed if two name dirs are supplied which are on the same volume.
 */
@Test public void testChecking2NameDirsOnOneVolume() throws IOException {
  Configuration conf=new Configuration();
  File nameDir1=new File(BASE_DIR,"name-dir1");
  File nameDir2=new File(BASE_DIR,"name-dir2");
  nameDir1.mkdirs();
  nameDir2.mkdirs();
  conf.set(DFSConfigKeys.DFS_NAMENODE_EDITS_DIR_KEY,nameDir1.getAbsolutePath() + "," + nameDir2.getAbsolutePath());
  conf.setLong(DFSConfigKeys.DFS_NAMENODE_DU_RESERVED_KEY,Long.MAX_VALUE);
  NameNodeResourceChecker nb=new NameNodeResourceChecker(conf);
  assertEquals("Should not check the same volume more than once.",1,nb.getVolumesLowOnSpace().size());
}
