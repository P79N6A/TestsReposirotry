@Test public void testZKNodeLimit() throws Exception {
  TestZKRMStateStoreTester zkTester=new TestZKRMStateStoreTester();
  long submitTime=System.currentTimeMillis();
  long startTime=System.currentTimeMillis() + 1234;
  Configuration conf=new YarnConfiguration();
  conf.setInt(YarnConfiguration.RM_ZK_ZNODE_SIZE_LIMIT_BYTES,1);
  RMStateStore store=zkTester.getRMStateStore(conf);
  TestAppRejDispatcher dispatcher=new TestAppRejDispatcher();
  store.setRMDispatcher(dispatcher);
  ApplicationId appId1=ApplicationId.fromString("application_1352994193343_0001");
  storeApp(store,appId1,submitTime,startTime);
  GenericTestUtils.waitFor(new Supplier<Boolean>(){
    @Override public Boolean get(){
      return dispatcher.appsavefailedEvnt;
    }
  }
,100,5000);
}
