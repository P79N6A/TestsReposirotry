/** 
 * Test to satisfy storage policy after disabled storage policy satisfier.
 */
@Test(timeout=30000) public void testSatisfyStoragePolicyAfterSatisfierDisabled() throws ReconfigurationException, IOException {
  final NameNode nameNode=cluster.getNameNode();
  nameNode.reconfigureProperty(DFS_STORAGE_POLICY_SATISFIER_MODE_KEY,StoragePolicySatisfierMode.NONE.toString());
  verifySPSEnabled(nameNode,DFS_STORAGE_POLICY_SATISFIER_MODE_KEY,StoragePolicySatisfierMode.NONE,false);
  Path filePath=new Path("/testSPS");
  DistributedFileSystem fileSystem=cluster.getFileSystem();
  fileSystem.create(filePath);
  fileSystem.setStoragePolicy(filePath,"COLD");
  try {
    fileSystem.satisfyStoragePolicy(filePath);
    fail("Expected to fail, as storage policy feature has disabled.");
  }
 catch (  RemoteException e) {
    GenericTestUtils.assertExceptionContains("Cannot request to satisfy storage policy " + "when storage policy satisfier feature has been disabled" + " by admin. Seek for an admin help to enable it "+ "or use Mover tool.",e);
  }
}
