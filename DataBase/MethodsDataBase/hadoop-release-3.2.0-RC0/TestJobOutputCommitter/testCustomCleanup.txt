/** 
 * Test if a failed job with custom committer runs the deprecated {@link FileOutputCommitter#cleanupJob(JobContext)} code for api compatibility testing.
 * @throws Exception 
 */
@Test public void testCustomCleanup() throws Exception {
  testSuccessfulJob(CUSTOM_CLEANUP_FILE_NAME,MyOutputFormatWithCustomCleanup.class,new String[]{});
  testFailedJob(CUSTOM_CLEANUP_FILE_NAME,MyOutputFormatWithCustomCleanup.class,new String[]{FileOutputCommitter.SUCCEEDED_FILE_NAME});
  testKilledJob(CUSTOM_CLEANUP_FILE_NAME,MyOutputFormatWithCustomCleanup.class,new String[]{FileOutputCommitter.SUCCEEDED_FILE_NAME});
}
