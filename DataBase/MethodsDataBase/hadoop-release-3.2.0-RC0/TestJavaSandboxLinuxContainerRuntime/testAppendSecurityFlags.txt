@Test public void testAppendSecurityFlags() throws ContainerExecutionException {
  String securityString="-Djava.security.manager -Djava.security.policy==" + policyFile.getAbsolutePath();
  String[] badCommands={"$JAVA_HOME/bin/java -Djava.security.manager " + "-Djava.security.policy=/home/user/java.policy","$JAVA_HOME/bin/java -cp MyApp.jar MrAppMaster"};
  String[] cleanCommands={"$JAVA_HOME/bin/java " + securityString,"$JAVA_HOME/bin/java " + securityString + " -cp MyApp.jar MrAppMaster"};
  List<String> commands=Arrays.asList(badCommands);
  JavaSandboxLinuxContainerRuntime.NMContainerPolicyUtils.appendSecurityFlags(commands,env,policyFilePath,JavaSandboxLinuxContainerRuntime.SandboxMode.enforcing);
  for (int i=0; i < commands.size(); i++) {
    Assert.assertTrue(commands.get(i).trim().equals(cleanCommands[i].trim()));
  }
}
