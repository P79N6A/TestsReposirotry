/** 
 * Test a normal stream still works as expected in a magic filesystem, with a call of  {@code hasCapability()} to check that it is normal.
 * @throws Throwable failure
 */
@Test public void testWriteNormalStream() throws Throwable {
  S3AFileSystem fs=getFileSystem();
  Assume.assumeTrue("Filesystem does not have magic support enabled: " + fs,fs.hasCapability(STORE_CAPABILITY_MAGIC_COMMITTER));
  Path destFile=path("normal");
  try (FSDataOutputStream out=fs.create(destFile,true)){
    out.writeChars("data");
    assertFalse("stream has magic output: " + out,out.hasCapability(STREAM_CAPABILITY_MAGIC_OUTPUT));
    out.close();
  }
   FileStatus status=getFileStatusEventually(fs,destFile,CONSISTENCY_WAIT);
  assertTrue("Empty marker file: " + status,status.getLen() > 0);
}
