@Test public void testCreateAbortEmptyFile() throws Throwable {
  describe("create then abort an empty file; throttled");
  S3AFileSystem fs=getFileSystem();
  String filename="empty-abort.txt";
  Path destFile=methodPath(filename);
  Path pendingFilePath=makeMagic(destFile);
  touch(fs,pendingFilePath);
  validateIntermediateAndFinalPaths(pendingFilePath,destFile);
  Path pendingDataPath=validatePendingCommitData(filename,pendingFilePath);
  CommitOperations actions=newCommitOperations();
  fullThrottle();
  LOG.info("Abort call");
  actions.abortAllSinglePendingCommits(pendingDataPath.getParent(),true).maybeRethrow();
  resetFailures();
  assertPathDoesNotExist("pending file not deleted",pendingDataPath);
  assertPathDoesNotExist("dest file was created",destFile);
}
