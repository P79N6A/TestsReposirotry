@Test public void testRouterStateExpired() throws IOException, InterruptedException {
  long dateStarted=Time.now();
  String address="testaddress";
  RouterHeartbeatRequest request=RouterHeartbeatRequest.newInstance(RouterState.newInstance(address,dateStarted,RouterServiceState.RUNNING));
  assertTrue(routerStore.routerHeartbeat(request).getStatus());
  GetRouterRegistrationRequest getRequest=GetRouterRegistrationRequest.newInstance(address);
  RouterState record=routerStore.getRouterRegistration(getRequest).getRouter();
  assertNotNull(record);
  Thread.sleep(6000);
  RouterState r=routerStore.getRouterRegistration(getRequest).getRouter();
  assertEquals(RouterServiceState.EXPIRED,r.getStatus());
  assertTrue(routerStore.routerHeartbeat(request).getStatus());
  r=routerStore.getRouterRegistration(getRequest).getRouter();
  assertEquals(RouterServiceState.RUNNING,r.getStatus());
}
