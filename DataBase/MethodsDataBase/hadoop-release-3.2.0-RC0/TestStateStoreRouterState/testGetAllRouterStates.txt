@Test public void testGetAllRouterStates() throws StateStoreUnavailableException, IOException {
  RouterHeartbeatRequest heartbeatRequest1=RouterHeartbeatRequest.newInstance(RouterState.newInstance("testaddress1",Time.now(),RouterServiceState.RUNNING));
  assertTrue(routerStore.routerHeartbeat(heartbeatRequest1).getStatus());
  RouterHeartbeatRequest heartbeatRequest2=RouterHeartbeatRequest.newInstance(RouterState.newInstance("testaddress2",Time.now(),RouterServiceState.RUNNING));
  assertTrue(routerStore.routerHeartbeat(heartbeatRequest2).getStatus());
  routerStore.loadCache(true);
  GetRouterRegistrationsRequest request=GetRouterRegistrationsRequest.newInstance();
  List<RouterState> entries=routerStore.getRouterRegistrations(request).getRouters();
  assertEquals(2,entries.size());
  Collections.sort(entries);
  assertEquals("testaddress1",entries.get(0).getAddress());
  assertEquals("testaddress2",entries.get(1).getAddress());
  assertEquals(RouterServiceState.RUNNING,entries.get(0).getStatus());
  assertEquals(RouterServiceState.RUNNING,entries.get(1).getStatus());
}
