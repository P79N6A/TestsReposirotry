/** 
 * This test tests that client will first lookup secrets map for key provider uri from  {@link Credentials} in{@link UserGroupInformation}
 * @throws Exception
 */
@Test public void testProviderUriInCredentials() throws Exception {
  String dummyKeyProvider="dummy://foo:bar@test_provider1";
  DFSClient client=cluster.getFileSystem().getClient();
  Credentials credentials=new Credentials();
  Text lookUpKey=HdfsKMSUtil.getKeyProviderMapKey(cluster.getFileSystem().getUri());
  credentials.addSecretKey(lookUpKey,DFSUtilClient.string2Bytes(dummyKeyProvider));
  client.ugi.addCredentials(credentials);
  Assert.assertEquals("Client Key provider is different from provider in " + "credentials map",dummyKeyProvider,client.getKeyProviderUri().toString());
}
