@Test(timeout=10000) public void testRMStarts() throws Exception {
  Configuration conf=new YarnConfiguration();
  conf.setBoolean(YarnConfiguration.RM_SCHEDULER_ENABLE_MONITORS,true);
  conf.set(YarnConfiguration.RM_SCHEDULER_MONITOR_POLICIES,ProportionalCapacityPreemptionPolicy.class.getCanonicalName());
  ResourceManager rm=new MockRM();
  rm.init(conf);
  SchedulingEditPolicy mPolicy=mock(SchedulingEditPolicy.class);
  when(mPolicy.getMonitoringInterval()).thenReturn(1000L);
  SchedulingMonitor monitor=new SchedulingMonitor(rm.getRMContext(),mPolicy);
  monitor.serviceInit(conf);
  monitor.serviceStart();
  verify(mPolicy,timeout(10000)).editSchedule();
  monitor.close();
  rm.close();
}
