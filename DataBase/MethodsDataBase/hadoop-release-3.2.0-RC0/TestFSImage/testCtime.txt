/** 
 * Ensure ctime is set during namenode formatting.
 */
@Test(timeout=60000) public void testCtime() throws Exception {
  Configuration conf=new Configuration();
  MiniDFSCluster cluster=null;
  try {
    final long pre=Time.now();
    cluster=new MiniDFSCluster.Builder(conf).numDataNodes(1).build();
    cluster.waitActive();
    final long post=Time.now();
    final long ctime=cluster.getNamesystem().getCTime();
    assertTrue(pre <= ctime);
    assertTrue(ctime <= post);
  }
  finally {
    if (cluster != null) {
      cluster.shutdown();
    }
  }
}
