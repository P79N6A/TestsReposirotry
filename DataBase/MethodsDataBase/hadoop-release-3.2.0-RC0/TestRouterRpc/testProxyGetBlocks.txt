@Test public void testProxyGetBlocks() throws Exception {
  DatanodeInfo[] dns=routerProtocol.getDatanodeReport(DatanodeReportType.ALL);
  DatanodeInfo dn0=dns[0];
  BlocksWithLocations routerBlockLocations=routerNamenodeProtocol.getBlocks(dn0,1024,0);
  BlocksWithLocations nnBlockLocations=nnNamenodeProtocol.getBlocks(dn0,1024,0);
  BlockWithLocations[] routerBlocks=routerBlockLocations.getBlocks();
  BlockWithLocations[] nnBlocks=nnBlockLocations.getBlocks();
  assertEquals(nnBlocks.length,routerBlocks.length);
  for (int i=0; i < routerBlocks.length; i++) {
    assertEquals(nnBlocks[i].getBlock().getBlockId(),routerBlocks[i].getBlock().getBlockId());
  }
}
