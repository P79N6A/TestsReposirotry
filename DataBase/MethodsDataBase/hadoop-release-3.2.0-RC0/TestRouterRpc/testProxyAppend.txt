@Test public void testProxyAppend() throws Exception {
  EnumSet<CreateFlag> createFlag=EnumSet.of(CreateFlag.APPEND);
  DFSClient routerClient=getRouterContext().getClient();
  HdfsDataOutputStream stream=routerClient.append(routerFile,1024,createFlag,null,null);
  stream.writeBytes(TEST_STRING);
  stream.close();
  FileStatus status=getFileStatus(nnFS,nnFile);
  assertTrue(status.getLen() > TEST_STRING.length());
  Method m=ClientProtocol.class.getMethod("append",String.class,String.class,EnumSetWritable.class);
  String badPath="/unknownlocation/unknowndir";
  EnumSetWritable<CreateFlag> createFlagWritable=new EnumSetWritable<CreateFlag>(createFlag);
  compareResponses(routerProtocol,nnProtocol,m,new Object[]{badPath,"testClient",createFlagWritable});
}
