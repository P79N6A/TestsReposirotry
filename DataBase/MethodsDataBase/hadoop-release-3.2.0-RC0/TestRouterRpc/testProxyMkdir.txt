@Test public void testProxyMkdir() throws Exception {
  FileStatus[] filesInitial=routerFS.listStatus(new Path("/"));
  String dirPath="/testdir";
  FsPermission permission=new FsPermission("705");
  routerProtocol.mkdirs(dirPath,permission,false);
  FileStatus[] files=routerFS.listStatus(new Path("/"));
  assertEquals(Arrays.toString(files) + " should be " + Arrays.toString(filesInitial)+ " + "+ dirPath,filesInitial.length + 1,files.length);
  assertTrue(verifyFileExists(routerFS,dirPath));
  int foundCount=0;
  for (  NamenodeContext n : cluster.getNamenodes()) {
    if (verifyFileExists(n.getFileSystem(),dirPath)) {
      foundCount++;
    }
  }
  assertEquals(1,foundCount);
  assertTrue(deleteFile(routerFS,dirPath));
  Method m=ClientProtocol.class.getMethod("mkdirs",String.class,FsPermission.class,boolean.class);
  String badPath="/unknownlocation/unknowndir";
  compareResponses(routerProtocol,nnProtocol,m,new Object[]{badPath,permission,false});
}
