@Test public void testRandomReadPerformance() throws Exception {
  createTestFile();
  assumeHugeFileExists();
  final AzureBlobFileSystem abFs=this.getFileSystem();
  final NativeAzureFileSystem wasbFs=this.getWasbFileSystem();
  final int maxAttempts=10;
  final double maxAcceptableRatio=1.025;
  double v1ElapsedMs=0, v2ElapsedMs=0;
  double ratio=Double.MAX_VALUE;
  for (int i=0; i < maxAttempts && ratio >= maxAcceptableRatio; i++) {
    v1ElapsedMs=randomRead(1,wasbFs);
    v2ElapsedMs=randomRead(2,abFs);
    ratio=v2ElapsedMs / v1ElapsedMs;
    LOG.info(String.format("v1ElapsedMs=%1$d, v2ElapsedMs=%2$d, ratio=%3$.2f",(long)v1ElapsedMs,(long)v2ElapsedMs,ratio));
  }
  assertTrue(String.format("Performance of version 2 is not acceptable: v1ElapsedMs=%1$d," + " v2ElapsedMs=%2$d, ratio=%3$.2f",(long)v1ElapsedMs,(long)v2ElapsedMs,ratio),ratio < maxAcceptableRatio);
}
