@Test public void testLinuxFpgaResourceDiscoverPluginConfig() throws YarnException, IOException {
  Configuration conf=new Configuration(false);
  FpgaDiscoverer discoverer=FpgaDiscoverer.getInstance();
  IntelFpgaOpenclPlugin openclPlugin=new IntelFpgaOpenclPlugin();
  discoverer.setResourceHanderPlugin(openclPlugin);
  openclPlugin.initPlugin(conf);
  openclPlugin.setShell(mockPuginShell());
  discoverer.initialize(conf);
  Assert.assertEquals("No configuration should return just a single binary name","aocl",openclPlugin.getPathToExecutable());
  File fakeBinary=new File(getTestParentFolder() + "/aocl");
  conf.set(YarnConfiguration.NM_FPGA_PATH_TO_EXEC,getTestParentFolder() + "/aocl");
  touchFile(fakeBinary);
  discoverer.initialize(conf);
  Assert.assertEquals("Correct configuration should return user setting",getTestParentFolder() + "/aocl",openclPlugin.getPathToExecutable());
  fakeBinary.delete();
  discoverer.initialize(conf);
  Assert.assertEquals("Correct configuration but file doesn't exists should return just a single binary name","aocl",openclPlugin.getPathToExecutable());
}
