/** 
 * Assert that a filesystem is case sensitive. This is done by creating a mixed-case filename and asserting that its lower case version is not there.
 * @throws Exception failures
 */
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testFilesystemIsCaseSensitive() throws Exception {
  String mixedCaseFilename="/test/UPPER.TXT";
  Path upper=path(mixedCaseFilename);
  Path lower=path(StringUtils.toLowerCase(mixedCaseFilename));
  assertFalse("File exists" + upper,fs.exists(upper));
  assertFalse("File exists" + lower,fs.exists(lower));
  FSDataOutputStream out=fs.create(upper);
  out.writeUTF("UPPER");
  out.close();
  FileStatus upperStatus=fs.getFileStatus(upper);
  assertExists("Original upper case file" + upper,upper);
  assertPathDoesNotExist("lower case file",lower);
  out=fs.create(lower);
  out.writeUTF("l");
  out.close();
  assertExists("lower case file",lower);
  assertExists("Original upper case file " + upper,upper);
  FileStatus newStatus=fs.getFileStatus(upper);
  assertEquals("Expected status:" + upperStatus + " actual status "+ newStatus,upperStatus.getLen(),newStatus.getLen());
}
