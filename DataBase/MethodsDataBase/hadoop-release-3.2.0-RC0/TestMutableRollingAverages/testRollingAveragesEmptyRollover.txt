/** 
 * Tests if the results are correct if no samples are inserted, dry run of empty roll over.
 */
@Test(timeout=30000) public void testRollingAveragesEmptyRollover() throws Exception {
  final MetricsRecordBuilder rb=mockMetricsRecordBuilder();
  try (MutableRollingAverages rollingAverages=new MutableRollingAverages("Time")){
    rollingAverages.replaceScheduledTask(2,5,TimeUnit.SECONDS);
    rollingAverages.snapshot(rb,true);
    verify(rb,never()).addGauge(info("FooRollingAvgTime","Rolling average time for foo"),(long)0);
    verify(rb,never()).addGauge(info("BarAvgTime","Rolling average time for bar"),(long)0);
    Thread.sleep(6000);
    rollingAverages.snapshot(rb,false);
    verify(rb,never()).addGauge(info("FooRollingAvgTime","Rolling average time for foo"),(long)0);
    verify(rb,never()).addGauge(info("BarAvgTime","Rolling average time for bar"),(long)0);
  }
 }
