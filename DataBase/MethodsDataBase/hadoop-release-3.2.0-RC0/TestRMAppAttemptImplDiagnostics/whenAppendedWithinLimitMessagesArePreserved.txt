@Test public void whenAppendedWithinLimitMessagesArePreserved(){
  final Configuration configuration=new Configuration();
  configuration.setInt(YarnConfiguration.APP_ATTEMPT_DIAGNOSTICS_LIMIT_KC,1);
  final RMAppAttemptImpl appAttempt=createRMAppAttemptImpl(configuration);
  final String withinLimit=RandomStringUtils.random(1024);
  appAttempt.appendDiagnostics(withinLimit);
  assertEquals("messages within limit should be preserved",withinLimit,appAttempt.getDiagnostics());
}
