@Test(timeout=9990000) public void testContainersReleasedWhenPreLaunchFails() throws Exception {
  ApplicationId applicationId=ApplicationId.newInstance(System.currentTimeMillis(),1);
  Service exampleApp=new Service();
  exampleApp.setId(applicationId.toString());
  exampleApp.setVersion("v1");
  exampleApp.setName("testContainersReleasedWhenPreLaunchFails");
  Component compA=createComponent("compa",1,"pwd");
  Artifact artifact=new Artifact();
  artifact.setType(Artifact.TypeEnum.TARBALL);
  compA.artifact(artifact);
  exampleApp.addComponent(compA);
  MockServiceAM am=new MockServiceAM(exampleApp);
  am.init(conf);
  am.start();
  ContainerId containerId=am.createContainerId(1);
  am.feedContainerToComp(exampleApp,containerId,"compa");
  am.waitForContainerToRelease(containerId);
  Assert.assertEquals(1,am.getComponent("compa").getPendingInstances().size());
  am.stop();
}
