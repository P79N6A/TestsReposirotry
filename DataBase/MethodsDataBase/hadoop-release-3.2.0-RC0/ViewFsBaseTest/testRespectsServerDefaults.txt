@Test public void testRespectsServerDefaults() throws Exception {
  FsServerDefaults targetDefs=fcTarget.getDefaultFileSystem().getServerDefaults(new Path("/"));
  FsServerDefaults viewDefs=fcView.getDefaultFileSystem().getServerDefaults(new Path("/data"));
  assertEquals(targetDefs.getReplication(),viewDefs.getReplication());
  assertEquals(targetDefs.getBlockSize(),viewDefs.getBlockSize());
  assertEquals(targetDefs.getBytesPerChecksum(),viewDefs.getBytesPerChecksum());
  assertEquals(targetDefs.getFileBufferSize(),viewDefs.getFileBufferSize());
  assertEquals(targetDefs.getWritePacketSize(),viewDefs.getWritePacketSize());
  assertEquals(targetDefs.getEncryptDataTransfer(),viewDefs.getEncryptDataTransfer());
  assertEquals(targetDefs.getTrashInterval(),viewDefs.getTrashInterval());
  assertEquals(targetDefs.getChecksumType(),viewDefs.getChecksumType());
  fcView.create(new Path("/data/file"),EnumSet.of(CreateFlag.CREATE)).close();
  FileStatus stat=fcTarget.getFileStatus(new Path(targetTestRoot,"data/file"));
  assertEquals(targetDefs.getReplication(),stat.getReplication());
}
