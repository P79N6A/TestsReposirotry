@Test public void testRenameAcrossMounts3() throws IOException {
  Configuration conf2=new Configuration(conf);
  conf2.set(Constants.CONFIG_VIEWFS_RENAME_STRATEGY,ViewFileSystem.RenameStrategy.SAME_TARGET_URI_ACROSS_MOUNTPOINT.toString());
  FileContext fcView2=FileContext.getFileContext(FsConstants.VIEWFS_URI,conf2);
  String user1Path="/user/foo";
  fileContextTestHelper.createFile(fcView2,user1Path);
  String user2Path="/user2/fooBarBar";
  Path user2Dst=new Path(user2Path);
  fcView2.rename(new Path(user1Path),user2Dst);
  ContractTestUtils.assertPathDoesNotExist(fcView2,"src should not exist after rename",new Path(user1Path));
  ContractTestUtils.assertPathDoesNotExist(fcTarget,"src should not exist after rename",new Path(targetTestRoot,"user/foo"));
  ContractTestUtils.assertIsFile(fcView2,fileContextTestHelper.getTestRootPath(fcView2,user2Path));
  ContractTestUtils.assertIsFile(fcTarget,new Path(targetTestRoot,"user/fooBarBar"));
}
