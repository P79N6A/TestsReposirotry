@Test public void testSetEnvFromInputProperty(){
  Configuration conf=new Configuration(false);
  Map<String,String> env=new HashMap<>();
  String propName="mapreduce.map.env";
  String defaultPropName="mapreduce.child.env";
  conf.set(propName,"env1=env1_val,env2=env2_val,env3=env3_val");
  conf.set(propName + ".env4","env4_val");
  conf.set(propName + ".env2","new_env2_val");
  conf.set(defaultPropName,"env1=def1_val,env2=def2_val,env3=def3_val");
  String defaultPropValue=conf.get(defaultPropName);
  conf.set(defaultPropName + ".env4","def4_val");
  conf.set(defaultPropName + ".env2","new_def2_val");
  Apps.setEnvFromInputProperty(env,propName,defaultPropValue,conf,File.pathSeparator);
  assertEquals("env1_val",env.get("env1"));
  assertEquals("env3_val",env.get("env3"));
  assertEquals("env4_val",env.get("env4"));
  assertEquals("new_env2_val",env.get("env2"));
}
