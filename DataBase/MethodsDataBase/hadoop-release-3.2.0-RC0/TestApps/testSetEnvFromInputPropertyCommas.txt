@Test public void testSetEnvFromInputPropertyCommas(){
  Configuration conf=new Configuration(false);
  Map<String,String> env=new HashMap<>();
  String propName="mapreduce.reduce.env";
  conf.set(propName,"env1=env1_val,env2=env2_val,env3=env3_val");
  conf.set(propName + ".env2","new2_val1,new2_val2,new2_val3");
  conf.set(propName + ".env4","new4_valwith=equals");
  String defaultPropName="mapreduce.child.env";
  conf.set(defaultPropName,"env1=def1_val,env2=def2_val,env3=def3_val");
  String defaultPropValue=conf.get(defaultPropName);
  Apps.setEnvFromInputProperty(env,propName,defaultPropValue,conf,File.pathSeparator);
  assertEquals("env1_val",env.get("env1"));
  assertEquals("env3_val",env.get("env3"));
  assertEquals("new4_valwith=equals",env.get("env4"));
  assertEquals("new2_val1,new2_val2,new2_val3",env.get("env2"));
}
