@Test public void testIntraQueuePreemptionFifoOrderingPolicyMultipleAppsPerUser() throws IOException {
  conf.set(CapacitySchedulerConfiguration.PREFIX + CapacitySchedulerConfiguration.ROOT + ".a.ordering-policy","fifo");
  conf.setFloat(CapacitySchedulerConfiguration.INTRAQUEUE_PREEMPTION_MAX_ALLOWABLE_LIMIT,(float)1.0);
  String labelsConfig="=100,true;";
  String nodesConfig="n1= res=100";
  String queuesConfig="root(=[100 100 100 1 0]);" + "-a(=[100 100 100 1 0])";
  String appsConfig="a\t" + "(1,1,n1,,40,false,0,user1);" + "a\t"+ "(1,1,n1,,20,false,0,user1);"+ "a\t"+ "(1,1,n1,,40,false,0,user3);"+ "a\t"+ "(1,1,n1,,0,false,25,user4)";
  buildEnv(labelsConfig,nodesConfig,queuesConfig,appsConfig);
  policy.editSchedule();
  verify(mDisp,times(5)).handle(argThat(new TestProportionalCapacityPreemptionPolicy.IsPreemptionRequestFor(getAppAttemptId(3))));
  verify(mDisp,times(19)).handle(argThat(new TestProportionalCapacityPreemptionPolicy.IsPreemptionRequestFor(getAppAttemptId(2))));
  verify(mDisp,times(1)).handle(argThat(new TestProportionalCapacityPreemptionPolicy.IsPreemptionRequestFor(getAppAttemptId(1))));
}
