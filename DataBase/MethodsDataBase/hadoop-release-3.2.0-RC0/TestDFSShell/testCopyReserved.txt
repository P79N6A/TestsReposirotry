@Test public void testCopyReserved() throws IOException {
  final File localFile=new File(TEST_ROOT_DIR,"testFileForPut");
  localFile.createNewFile();
  final String localfilepath=new Path(localFile.getAbsolutePath()).toUri().toString();
  try {
    dfs.copyFromLocalFile(new Path(localfilepath),new Path("/.reserved"));
    fail("Can't copyFromLocal to /.reserved");
  }
 catch (  Exception e) {
    assertTrue(e.getMessage().contains("Invalid path name /.reserved"));
  }
  final String testdir=GenericTestUtils.getTempPath("TestDFSShell-testCopyReserved");
  final Path hdfsTestDir=new Path(testdir);
  writeFile(dfs,new Path(testdir,"testFileForPut"));
  final Path src=new Path(hdfsTestDir,"srcfile");
  dfs.create(src).close();
  assertTrue(dfs.exists(src));
  PrintStream syserr=System.err;
  final ByteArrayOutputStream baos=new ByteArrayOutputStream();
  PrintStream ps=new PrintStream(baos);
  System.setErr(ps);
  try {
    FsShell shell=new FsShell(dfs.getConf());
    runCmd(shell,"-cp",src.toString(),"/.reserved");
    assertTrue(baos.toString().contains("Invalid path name /.reserved"));
  }
  finally {
    System.setErr(syserr);
  }
}
