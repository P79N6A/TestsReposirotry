/** 
 * Test that that writes to an incomplete block are available to a reader
 */
@Test(timeout=30000) public void testUnfinishedBlockRead() throws IOException {
  Path file1=new Path("/unfinished-block");
  FSDataOutputStream stm=TestFileCreation.createFile(fileSystem,file1,1);
  int partialBlockSize=blockSize / 2;
  writeFileAndSync(stm,partialBlockSize);
  checkCanRead(fileSystem,file1,partialBlockSize);
  stm.close();
}
