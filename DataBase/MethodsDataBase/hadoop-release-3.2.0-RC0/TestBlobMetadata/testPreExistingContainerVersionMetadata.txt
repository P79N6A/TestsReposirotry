/** 
 * Tests that WASB stamped the version in the container metadata if it does a write operation to a pre-existing container.
 */
@Test public void testPreExistingContainerVersionMetadata() throws Exception {
  FsWithPreExistingContainer fsWithContainer=FsWithPreExistingContainer.create();
  assertFalse(fsWithContainer.getFs().exists(new Path("/IDontExist")));
  assertEquals(0,fsWithContainer.getFs().listStatus(new Path("/")).length);
  assertNull(fsWithContainer.getContainerMetadata());
  fsWithContainer.getFs().mkdirs(new Path("/dir"));
  assertNotNull(fsWithContainer.getContainerMetadata());
  assertEquals(AzureNativeFileSystemStore.CURRENT_WASB_VERSION,fsWithContainer.getContainerMetadata().get(AzureNativeFileSystemStore.VERSION_METADATA_KEY));
  fsWithContainer.close();
}
