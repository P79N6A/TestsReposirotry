@Test(timeout=60000) public void testNPEatInitialization() throws InterruptedException {
  PrintStream output=System.out;
  try {
    ByteArrayOutputStream bytes=new ByteArrayOutputStream();
    System.setOut(new PrintStream(bytes));
    DefaultMetricsSystem.initialize("NameNode");
    Configuration conf=new Configuration();
    scheduler=new DecayRpcScheduler(1,"ns",conf);
    assertFalse(bytes.toString().contains("NullPointerException"));
  }
  finally {
    System.setOut(output);
  }
}
