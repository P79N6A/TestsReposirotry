@Test public void testContainerCreateOnWrite() throws Exception {
  testAccount=blobStorageTestAccount();
  assumeNotNull(testAccount);
  CloudBlobContainer container=testAccount.getRealContainer();
  FileSystem fs=testAccount.getFileSystem();
  assertFalse(container.exists());
  try {
    fs.listStatus(new Path("/"));
    assertTrue("Should've thrown.",false);
  }
 catch (  FileNotFoundException ex) {
    assertTrue("Unexpected exception: " + ex,ex.getMessage().contains("is not found"));
  }
  assertFalse(container.exists());
  Path foo=new Path("/testContainerCreateOnWrite-foo");
  Path bar=new Path("/testContainerCreateOnWrite-bar");
  LambdaTestUtils.intercept(FileNotFoundException.class,new Callable<String>(){
    @Override public String call() throws Exception {
      fs.open(foo).close();
      return "Stream to " + foo;
    }
  }
);
  assertFalse(container.exists());
  assertFalse(fs.rename(foo,bar));
  assertFalse(container.exists());
  container.create();
  assertTrue(fs.createNewFile(foo));
  assertTrue(container.exists());
}
