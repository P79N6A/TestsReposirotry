/** 
 * BlockRecoveryFI_09. some/all DNs failed to update replicas.
 * @throws IOException in case of an error
 */
@Test(timeout=60000) public void testFailedReplicaUpdate() throws IOException {
  if (LOG.isDebugEnabled()) {
    LOG.debug("Running " + GenericTestUtils.getMethodName());
  }
  doThrow(new IOException()).when(spyDN).updateReplicaUnderRecovery(block,RECOVERY_ID,BLOCK_ID,block.getNumBytes());
  try {
    BlockRecoveryWorker.RecoveryTaskContiguous RecoveryTaskContiguous=recoveryWorker.new RecoveryTaskContiguous(rBlock);
    RecoveryTaskContiguous.syncBlock(initBlockRecords(spyDN));
    fail("Sync should fail");
  }
 catch (  IOException e) {
    e.getMessage().startsWith("Cannot recover ");
  }
}
