@Test public void testDebounceWithError(){
  Flowable<String> source=Flowable.unsafeCreate(new Publisher<String>(){
    @Override public void subscribe(    Subscriber<? super String> subscriber){
      subscriber.onSubscribe(new BooleanSubscription());
      Exception error=new TestException();
      publishNext(subscriber,100,"one");
      publishNext(subscriber,600,"two");
      publishError(subscriber,700,error);
    }
  }
);
  Flowable<String> sampled=source.debounce(400,TimeUnit.MILLISECONDS,scheduler);
  sampled.subscribe(Subscriber);
  scheduler.advanceTimeTo(0,TimeUnit.MILLISECONDS);
  InOrder inOrder=inOrder(Subscriber);
  scheduler.advanceTimeTo(500,TimeUnit.MILLISECONDS);
  inOrder.verify(Subscriber).onNext("one");
  scheduler.advanceTimeTo(701,TimeUnit.MILLISECONDS);
  inOrder.verify(Subscriber).onError(any(TestException.class));
  inOrder.verifyNoMoreInteractions();
}
