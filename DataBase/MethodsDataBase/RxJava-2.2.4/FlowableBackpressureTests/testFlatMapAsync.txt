@Test @Ignore("The test is non-deterministic and can't be made deterministic") public void testFlatMapAsync(){
  int num=(int)(Flowable.bufferSize() * 2.1);
  AtomicInteger c=new AtomicInteger();
  TestSubscriber<Integer> ts=new TestSubscriber<Integer>();
  incrementingIntegers(c).subscribeOn(Schedulers.computation()).flatMap(new Function<Integer,Publisher<Integer>>(){
    @Override public Publisher<Integer> apply(    Integer i){
      return incrementingIntegers(new AtomicInteger()).take(10).subscribeOn(Schedulers.computation());
    }
  }
).take(num).subscribe(ts);
  ts.awaitTerminalEvent();
  ts.assertNoErrors();
  System.out.println("testFlatMapAsync => Received: " + ts.valueCount() + "  Emitted: "+ c.get()+ " Size: "+ Flowable.bufferSize());
  assertEquals(num,ts.valueCount());
  assertTrue(c.get() <= Flowable.bufferSize() * 2);
}
