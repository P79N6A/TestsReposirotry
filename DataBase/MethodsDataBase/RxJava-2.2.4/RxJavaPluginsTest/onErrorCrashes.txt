@Test public void onErrorCrashes(){
  try {
    final List<Throwable> list=new ArrayList<Throwable>();
    RxJavaPlugins.setErrorHandler(new Consumer<Throwable>(){
      @Override public void accept(      Throwable t){
        throw new TestException("Forced failure 2");
      }
    }
);
    Thread.currentThread().setUncaughtExceptionHandler(new UncaughtExceptionHandler(){
      @Override public void uncaughtException(      Thread t,      Throwable e){
        list.add(e);
      }
    }
);
    RxJavaPlugins.onError(new TestException("Forced failure"));
    assertEquals(2,list.size());
    assertTestException(list,0,"Forced failure 2");
    assertUndeliverableTestException(list,1,"Forced failure");
    Thread.currentThread().setUncaughtExceptionHandler(null);
  }
  finally {
    RxJavaPlugins.reset();
    Thread.currentThread().setUncaughtExceptionHandler(null);
  }
}
