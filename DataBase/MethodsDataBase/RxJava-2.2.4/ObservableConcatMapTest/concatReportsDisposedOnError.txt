@Test @SuppressWarnings("unchecked") public void concatReportsDisposedOnError(){
  final Disposable[] disposable={null};
  Observable.fromArray(Observable.just(1),Observable.<Integer>error(new TestException())).hide().concatMap(Functions.<Observable<Integer>>identity()).subscribe(new Observer<Integer>(){
    @Override public void onSubscribe(    Disposable d){
      disposable[0]=d;
    }
    @Override public void onNext(    Integer t){
    }
    @Override public void onError(    Throwable e){
    }
    @Override public void onComplete(){
    }
  }
);
  assertTrue(disposable[0].isDisposed());
}
