@Test public void usingFactoryReturnsNull() throws Exception {
  @SuppressWarnings("unchecked") Consumer<Integer> onDispose=mock(Consumer.class);
  TestSubscriber<Integer> ts=TestSubscriber.create();
  Completable.using(new Callable<Integer>(){
    @Override public Integer call(){
      return 1;
    }
  }
,new Function<Integer,Completable>(){
    @Override public Completable apply(    Integer t){
      return null;
    }
  }
,onDispose).<Integer>toFlowable().subscribe(ts);
  verify(onDispose).accept(1);
  ts.assertNoValues();
  ts.assertNotComplete();
  ts.assertError(NullPointerException.class);
}
