@Test public void successDetaches() throws Exception {
  Disposable d=Disposables.empty();
  final WeakReference<Disposable> wr=new WeakReference<Disposable>(d);
  TestObserver<Integer> to=new Single<Integer>(){
    @Override protected void subscribeActual(    SingleObserver<? super Integer> observer){
      observer.onSubscribe(wr.get());
      observer.onSuccess(1);
      observer.onSuccess(2);
    }
  }
.onTerminateDetach().test();
  d=null;
  System.gc();
  Thread.sleep(200);
  to.assertResult(1);
  assertNull(wr.get());
}
