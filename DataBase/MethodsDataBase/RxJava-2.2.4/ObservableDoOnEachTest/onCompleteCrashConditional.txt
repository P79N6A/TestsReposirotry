@Test public void onCompleteCrashConditional(){
  Observable.wrap(new ObservableSource<Object>(){
    @Override public void subscribe(    Observer<? super Object> observer){
      observer.onSubscribe(Disposables.empty());
      observer.onComplete();
    }
  }
).doOnComplete(new Action(){
    @Override public void run() throws Exception {
      throw new IOException();
    }
  }
).filter(Functions.alwaysTrue()).test().assertFailure(IOException.class);
}
