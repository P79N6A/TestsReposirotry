@Test public void mainErrorsDelayBoundary(){
  PublishProcessor<Integer> main=PublishProcessor.create();
  final PublishProcessor<Integer> inner=PublishProcessor.create();
  TestSubscriber<Integer> ts=main.concatMapEagerDelayError(new Function<Integer,Publisher<Integer>>(){
    @Override public Publisher<Integer> apply(    Integer t){
      return inner;
    }
  }
,false).test();
  main.onNext(1);
  inner.onNext(2);
  ts.assertValue(2);
  main.onError(new TestException("Forced failure"));
  ts.assertNoErrors();
  inner.onNext(3);
  inner.onComplete();
  ts.assertFailureAndMessage(TestException.class,"Forced failure",2,3);
}
