@Test public void innerSuccessCompletesAfterMain(){
  PublishProcessor<Integer> pp=PublishProcessor.create();
  TestSubscriber<Integer> ts=Flowable.just(1).flatMapSingle(Functions.justFunction(pp.singleOrError())).test();
  pp.onNext(2);
  pp.onComplete();
  ts.assertResult(2);
}
