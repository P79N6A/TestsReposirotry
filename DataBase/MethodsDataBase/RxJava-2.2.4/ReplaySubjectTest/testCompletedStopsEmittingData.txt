@Test public void testCompletedStopsEmittingData(){
  ReplaySubject<Integer> channel=ReplaySubject.create();
  Observer<Object> observerA=TestHelper.mockObserver();
  Observer<Object> observerB=TestHelper.mockObserver();
  Observer<Object> observerC=TestHelper.mockObserver();
  Observer<Object> observerD=TestHelper.mockObserver();
  TestObserver<Object> to=new TestObserver<Object>(observerA);
  channel.subscribe(to);
  channel.subscribe(observerB);
  InOrder inOrderA=inOrder(observerA);
  InOrder inOrderB=inOrder(observerB);
  InOrder inOrderC=inOrder(observerC);
  InOrder inOrderD=inOrder(observerD);
  channel.onNext(42);
  inOrderA.verify(observerA).onNext(42);
  inOrderB.verify(observerB).onNext(42);
  to.dispose();
  inOrderA.verifyNoMoreInteractions();
  channel.onNext(4711);
  inOrderB.verify(observerB).onNext(4711);
  channel.onComplete();
  inOrderB.verify(observerB).onComplete();
  channel.subscribe(observerC);
  inOrderC.verify(observerC).onNext(42);
  inOrderC.verify(observerC).onNext(4711);
  inOrderC.verify(observerC).onComplete();
  channel.onNext(13);
  channel.onNext(14);
  channel.onNext(15);
  channel.onError(new RuntimeException());
  channel.subscribe(observerD);
  inOrderD.verify(observerD).onNext(42);
  inOrderD.verify(observerD).onNext(4711);
  inOrderD.verify(observerD).onComplete();
  verify(observerA).onSubscribe((Disposable)notNull());
  verify(observerB).onSubscribe((Disposable)notNull());
  verify(observerC).onSubscribe((Disposable)notNull());
  verify(observerD).onSubscribe((Disposable)notNull());
  Mockito.verifyNoMoreInteractions(observerA);
  Mockito.verifyNoMoreInteractions(observerB);
  Mockito.verifyNoMoreInteractions(observerC);
  Mockito.verifyNoMoreInteractions(observerD);
}
