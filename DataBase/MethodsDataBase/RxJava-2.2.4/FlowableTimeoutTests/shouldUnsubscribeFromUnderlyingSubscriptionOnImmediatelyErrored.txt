@Test @Ignore("s should be considered cancelled upon executing onError and not expect downstream to call cancel") public void shouldUnsubscribeFromUnderlyingSubscriptionOnImmediatelyErrored() throws InterruptedException {
  final Subscription s=mock(Subscription.class);
  Flowable<String> immediatelyError=Flowable.unsafeCreate(new Publisher<String>(){
    @Override public void subscribe(    Subscriber<? super String> subscriber){
      subscriber.onSubscribe(s);
      subscriber.onError(new IOException("Error"));
    }
  }
);
  TestScheduler testScheduler=new TestScheduler();
  Flowable<String> observableWithTimeout=immediatelyError.timeout(1000,TimeUnit.MILLISECONDS,testScheduler);
  Subscriber<String> subscriber=TestHelper.mockSubscriber();
  TestSubscriber<String> ts=new TestSubscriber<String>(subscriber);
  observableWithTimeout.subscribe(ts);
  testScheduler.advanceTimeBy(2000,TimeUnit.MILLISECONDS);
  InOrder inOrder=inOrder(subscriber);
  inOrder.verify(subscriber).onError(isA(IOException.class));
  inOrder.verifyNoMoreInteractions();
  verify(s,times(1)).cancel();
}
