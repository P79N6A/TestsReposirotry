@Test public void cancelAfterHasNext(){
  final TestObserver<Void> to=new TestObserver<Void>();
  Completable.merge(new Iterable<Completable>(){
    @Override public Iterator<Completable> iterator(){
      return new Iterator<Completable>(){
        @Override public boolean hasNext(){
          to.cancel();
          return true;
        }
        @Override public Completable next(){
          return Completable.complete();
        }
        @Override public void remove(){
          throw new UnsupportedOperationException();
        }
      }
;
    }
  }
).subscribe(to);
  to.assertEmpty();
}
