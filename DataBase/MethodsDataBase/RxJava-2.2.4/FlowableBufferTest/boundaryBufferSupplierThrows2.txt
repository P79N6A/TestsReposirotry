@Test @SuppressWarnings("unchecked") public void boundaryBufferSupplierThrows2(){
  Flowable.never().buffer(Functions.justCallable(Flowable.timer(1,TimeUnit.MILLISECONDS)),new Callable<Collection<Object>>(){
    int count;
    @Override public Collection<Object> call() throws Exception {
      if (count++ == 1) {
        throw new TestException();
      }
 else {
        return new ArrayList<Object>();
      }
    }
  }
).test().awaitDone(5,TimeUnit.SECONDS).assertFailure(TestException.class);
}
