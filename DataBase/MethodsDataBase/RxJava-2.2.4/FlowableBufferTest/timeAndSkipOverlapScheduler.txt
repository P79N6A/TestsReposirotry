@SuppressWarnings("unchecked") @Test public void timeAndSkipOverlapScheduler(){
  RxJavaPlugins.setComputationSchedulerHandler(new Function<Scheduler,Scheduler>(){
    @Override public Scheduler apply(    Scheduler t){
      return scheduler;
    }
  }
);
  try {
    PublishProcessor<Integer> pp=PublishProcessor.create();
    TestSubscriber<List<Integer>> ts=TestSubscriber.create();
    pp.buffer(2,1,TimeUnit.SECONDS).subscribe(ts);
    pp.onNext(1);
    scheduler.advanceTimeBy(1,TimeUnit.SECONDS);
    pp.onNext(2);
    scheduler.advanceTimeBy(1,TimeUnit.SECONDS);
    pp.onNext(3);
    scheduler.advanceTimeBy(1,TimeUnit.SECONDS);
    pp.onNext(4);
    scheduler.advanceTimeBy(1,TimeUnit.SECONDS);
    pp.onComplete();
    ts.assertValues(Arrays.asList(1,2),Arrays.asList(2,3),Arrays.asList(3,4),Arrays.asList(4),Collections.<Integer>emptyList());
    ts.assertNoErrors();
    ts.assertComplete();
  }
  finally {
    RxJavaPlugins.reset();
  }
}
