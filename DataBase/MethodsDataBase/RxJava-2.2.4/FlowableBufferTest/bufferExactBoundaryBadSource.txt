@SuppressWarnings("unchecked") @Test public void bufferExactBoundaryBadSource(){
  Flowable<Integer> pp=new Flowable<Integer>(){
    @Override protected void subscribeActual(    Subscriber<? super Integer> subscriber){
      subscriber.onSubscribe(new BooleanSubscription());
      subscriber.onComplete();
      subscriber.onNext(1);
      subscriber.onComplete();
    }
  }
;
  final AtomicReference<Subscriber<? super Integer>> ref=new AtomicReference<Subscriber<? super Integer>>();
  Flowable<Integer> b=new Flowable<Integer>(){
    @Override protected void subscribeActual(    Subscriber<? super Integer> subscriber){
      subscriber.onSubscribe(new BooleanSubscription());
      ref.set(subscriber);
    }
  }
;
  TestSubscriber<List<Integer>> ts=pp.buffer(b).test();
  ref.get().onNext(1);
  ts.assertResult(Collections.<Integer>emptyList());
}
