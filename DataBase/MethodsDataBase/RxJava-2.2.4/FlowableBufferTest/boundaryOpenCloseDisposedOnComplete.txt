@Test @SuppressWarnings("unchecked") public void boundaryOpenCloseDisposedOnComplete(){
  PublishProcessor<Integer> source=PublishProcessor.create();
  PublishProcessor<Integer> openIndicator=PublishProcessor.create();
  PublishProcessor<Integer> closeIndicator=PublishProcessor.create();
  TestSubscriber<List<Integer>> ts=source.buffer(openIndicator,Functions.justFunction(closeIndicator)).test();
  assertTrue(source.hasSubscribers());
  assertTrue(openIndicator.hasSubscribers());
  assertFalse(closeIndicator.hasSubscribers());
  openIndicator.onNext(1);
  assertTrue(openIndicator.hasSubscribers());
  assertTrue(closeIndicator.hasSubscribers());
  source.onComplete();
  ts.assertResult(Collections.<Integer>emptyList());
  assertFalse(openIndicator.hasSubscribers());
  assertFalse(closeIndicator.hasSubscribers());
}
