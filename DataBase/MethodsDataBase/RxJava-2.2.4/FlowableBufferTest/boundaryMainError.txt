@SuppressWarnings("unchecked") @Test public void boundaryMainError(){
  PublishProcessor<Object> pp=PublishProcessor.create();
  TestSubscriber<Collection<Object>> ts=pp.buffer(Functions.justCallable(Flowable.never()),new Callable<Collection<Object>>(){
    @Override public Collection<Object> call() throws Exception {
      return new ArrayList<Object>();
    }
  }
).test();
  pp.onError(new TestException());
  ts.assertFailure(TestException.class);
}
