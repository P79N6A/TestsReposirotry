@Test public void testRangeUnsubscribe(){
  Observer<Integer> observer=TestHelper.mockObserver();
  final AtomicInteger count=new AtomicInteger();
  Observable.range(1,1000).doOnNext(new Consumer<Integer>(){
    @Override public void accept(    Integer t1){
      count.incrementAndGet();
    }
  }
).take(3).subscribe(observer);
  verify(observer,times(1)).onNext(1);
  verify(observer,times(1)).onNext(2);
  verify(observer,times(1)).onNext(3);
  verify(observer,never()).onNext(4);
  verify(observer,never()).onError(any(Throwable.class));
  verify(observer,times(1)).onComplete();
  assertEquals(3,count.get());
}
