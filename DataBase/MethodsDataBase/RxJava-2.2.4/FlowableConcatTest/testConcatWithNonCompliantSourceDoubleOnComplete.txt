@Test public void testConcatWithNonCompliantSourceDoubleOnComplete(){
  Flowable<String> f=Flowable.unsafeCreate(new Publisher<String>(){
    @Override public void subscribe(    Subscriber<? super String> s){
      s.onSubscribe(new BooleanSubscription());
      s.onNext("hello");
      s.onComplete();
      s.onComplete();
    }
  }
);
  TestSubscriber<String> ts=new TestSubscriber<String>();
  Flowable.concat(f,f).subscribe(ts);
  ts.awaitTerminalEvent(500,TimeUnit.MILLISECONDS);
  ts.assertTerminated();
  ts.assertNoErrors();
  ts.assertValues("hello","hello");
}
