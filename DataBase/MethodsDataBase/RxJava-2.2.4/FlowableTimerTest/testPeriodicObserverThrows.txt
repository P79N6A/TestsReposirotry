@Test public void testPeriodicObserverThrows(){
  Flowable<Long> source=Flowable.interval(100,100,TimeUnit.MILLISECONDS,scheduler);
  InOrder inOrder=inOrder(subscriber);
  source.safeSubscribe(new DefaultSubscriber<Long>(){
    @Override public void onNext(    Long t){
      if (t > 0) {
        throw new TestException();
      }
      subscriber.onNext(t);
    }
    @Override public void onError(    Throwable e){
      subscriber.onError(e);
    }
    @Override public void onComplete(){
      subscriber.onComplete();
    }
  }
);
  scheduler.advanceTimeBy(1,TimeUnit.SECONDS);
  inOrder.verify(subscriber).onNext(0L);
  inOrder.verify(subscriber).onError(any(TestException.class));
  inOrder.verifyNoMoreInteractions();
  verify(subscriber,never()).onComplete();
}
