@Test public void afterDone(){
  UnicastSubject<Object> p=UnicastSubject.create();
  p.onComplete();
  Disposable bs=Disposables.empty();
  p.onSubscribe(bs);
  p.onNext(1);
  List<Throwable> errors=TestHelper.trackPluginErrors();
  try {
    p.onError(new TestException());
    TestHelper.assertUndeliverable(errors,0,TestException.class);
  }
  finally {
    RxJavaPlugins.reset();
  }
  p.onComplete();
  p.test().assertResult();
  assertNull(p.getThrowable());
  assertTrue(p.hasComplete());
  assertFalse(p.hasThrowable());
}
