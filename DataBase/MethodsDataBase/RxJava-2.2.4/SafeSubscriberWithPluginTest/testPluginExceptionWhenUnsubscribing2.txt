@Test(expected=RuntimeException.class) @Ignore("Subscribers can't throw") public void testPluginExceptionWhenUnsubscribing2(){
  RxJavaPlugins.setErrorHandler(new Consumer<Throwable>(){
    int calls;
    @Override public void accept(    Throwable e){
      if (++calls == 3) {
        throw new RuntimeException();
      }
    }
  }
);
  TestSubscriber<Integer> ts=new TestSubscriber<Integer>(){
    @Override public void onError(    Throwable e){
      throw new RuntimeException(e);
    }
  }
;
  SafeSubscriber<Integer> safe=new SafeSubscriber<Integer>(ts);
  safe.onSubscribe(new SubscriptionCancelThrows());
  safe.onError(new TestException());
}
