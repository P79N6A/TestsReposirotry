@SuppressWarnings("deprecation") @Test public void testBehaviorSubjectError(){
  BehaviorSubject<Integer> async=BehaviorSubject.create();
  TestException te=new TestException();
  async.onError(te);
  Subject<Integer> serial=async.toSerialized();
  assertFalse(serial.hasObservers());
  assertFalse(serial.hasComplete());
  assertTrue(serial.hasThrowable());
  assertSame(te,serial.getThrowable());
  assertNull(async.getValue());
  assertFalse(async.hasValue());
  assertArrayEquals(new Object[]{},async.getValues());
  assertArrayEquals(new Integer[]{},async.getValues(new Integer[0]));
  assertArrayEquals(new Integer[]{null},async.getValues(new Integer[]{0}));
  assertArrayEquals(new Integer[]{null,0},async.getValues(new Integer[]{0,0}));
}
