@Test public void timestampWithScheduler(){
  TestScheduler scheduler=new TestScheduler();
  PublishProcessor<Integer> source=PublishProcessor.create();
  Flowable<Timed<Integer>> m=source.timestamp(scheduler);
  m.subscribe(subscriber);
  source.onNext(1);
  scheduler.advanceTimeBy(100,TimeUnit.MILLISECONDS);
  source.onNext(2);
  scheduler.advanceTimeBy(100,TimeUnit.MILLISECONDS);
  source.onNext(3);
  InOrder inOrder=inOrder(subscriber);
  inOrder.verify(subscriber,times(1)).onNext(new Timed<Integer>(1,0,TimeUnit.MILLISECONDS));
  inOrder.verify(subscriber,times(1)).onNext(new Timed<Integer>(2,100,TimeUnit.MILLISECONDS));
  inOrder.verify(subscriber,times(1)).onNext(new Timed<Integer>(3,200,TimeUnit.MILLISECONDS));
  verify(subscriber,never()).onError(any(Throwable.class));
  verify(subscriber,never()).onComplete();
}
