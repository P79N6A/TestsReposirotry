@Test public void maxConcurrencyOneDelayMainErrors(){
  final PublishProcessor<PublishProcessor<Integer>> pp0=PublishProcessor.create();
  final PublishProcessor<Integer> pp1=PublishProcessor.create();
  final PublishProcessor<Integer> pp2=PublishProcessor.create();
  TestObserver<Void> to=Completable.mergeDelayError(pp0.map(new Function<PublishProcessor<Integer>,Completable>(){
    @Override public Completable apply(    PublishProcessor<Integer> v) throws Exception {
      return v.ignoreElements();
    }
  }
),1).test();
  pp0.onNext(pp1);
  assertTrue(pp1.hasSubscribers());
  assertFalse(pp2.hasSubscribers());
  pp1.onComplete();
  pp0.onNext(pp2);
  pp0.onError(new TestException());
  assertTrue(pp2.hasSubscribers());
  pp2.onComplete();
  to.assertFailure(TestException.class);
}
