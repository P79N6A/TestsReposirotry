@Test public void cancelSlowPathReplace(){
  SubscriptionArbiter sa=new SubscriptionArbiter(true);
  BooleanSubscription bs1=new BooleanSubscription();
  BooleanSubscription bs2=new BooleanSubscription();
  BooleanSubscription bs3=new BooleanSubscription();
  sa.setSubscription(bs1);
  sa.getAndIncrement();
  sa.setSubscription(bs2);
  sa.setSubscription(bs3);
  sa.drainLoop();
  assertTrue(bs1.isCancelled());
  assertTrue(bs2.isCancelled());
  assertFalse(bs3.isCancelled());
}
