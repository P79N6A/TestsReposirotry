@Test public void cancelAsFlowable(){
  PublishProcessor<Integer> pp=PublishProcessor.create();
  TestSubscriber<Integer> ts=pp.singleOrError().toFlowable().test();
  assertTrue(pp.hasSubscribers());
  ts.assertEmpty();
  ts.cancel();
  assertFalse(pp.hasSubscribers());
}
