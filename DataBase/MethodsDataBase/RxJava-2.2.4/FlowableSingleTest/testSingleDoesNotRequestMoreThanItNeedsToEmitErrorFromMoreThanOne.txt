@Test public void testSingleDoesNotRequestMoreThanItNeedsToEmitErrorFromMoreThanOne(){
  final AtomicLong request=new AtomicLong();
  try {
    Flowable.just(1,2).doOnRequest(new LongConsumer(){
      @Override public void accept(      long n){
        request.addAndGet(n);
      }
    }
).blockingSingle();
  }
 catch (  IllegalArgumentException e) {
    assertEquals(Long.MAX_VALUE,request.get());
  }
}
