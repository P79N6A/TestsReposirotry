@Test public void customComparatorThrows(){
  Observable<String> source=Observable.just("a","b","B","A","a","C");
  TestObserver<String> to=TestObserver.create();
  source.distinctUntilChanged(new BiPredicate<String,String>(){
    @Override public boolean test(    String a,    String b){
      throw new TestException();
    }
  }
).subscribe(to);
  to.assertValue("a");
  to.assertNotComplete();
  to.assertError(TestException.class);
}
