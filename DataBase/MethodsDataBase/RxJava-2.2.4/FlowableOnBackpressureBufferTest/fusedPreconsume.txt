@Test public void fusedPreconsume() throws Exception {
  TestSubscriber<Integer> ts=Flowable.range(1,1000 * 1000).onBackpressureBuffer().observeOn(Schedulers.single()).test(0L);
  ts.assertEmpty();
  Thread.sleep(100);
  ts.request(1000 * 1000);
  ts.awaitDone(5,TimeUnit.SECONDS).assertValueCount(1000 * 1000).assertNoErrors().assertComplete();
}
