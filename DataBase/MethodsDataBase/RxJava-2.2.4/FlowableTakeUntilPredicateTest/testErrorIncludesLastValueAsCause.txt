@Test public void testErrorIncludesLastValueAsCause(){
  TestSubscriber<String> ts=new TestSubscriber<String>();
  final TestException e=new TestException("Forced failure");
  Predicate<String> predicate=new Predicate<String>(){
    @Override public boolean test(    String t){
      throw e;
    }
  }
;
  Flowable.just("abc").takeUntil(predicate).subscribe(ts);
  ts.assertTerminated();
  ts.assertNotComplete();
  ts.assertError(TestException.class);
}
