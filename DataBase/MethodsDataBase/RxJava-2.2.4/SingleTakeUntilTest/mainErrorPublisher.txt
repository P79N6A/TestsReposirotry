@Test public void mainErrorPublisher(){
  PublishProcessor<Integer> pp=PublishProcessor.create();
  PublishProcessor<Integer> source=PublishProcessor.create();
  TestObserver<Integer> to=source.single(-99).takeUntil(pp).test();
  source.onError(new TestException());
  to.assertFailure(TestException.class);
}
