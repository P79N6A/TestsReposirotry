/** 
 * Should be able to unsubscribe all Subscribers, have it stop emitting, then subscribe new ones and it start emitting again.
 */
@Test public void testReSubscribe(){
  final PublishProcessor<Integer> pp=PublishProcessor.create();
  Subscriber<Integer> subscriber1=TestHelper.mockSubscriber();
  TestSubscriber<Integer> ts=new TestSubscriber<Integer>(subscriber1);
  pp.subscribe(ts);
  pp.onNext(1);
  InOrder inOrder1=inOrder(subscriber1);
  inOrder1.verify(subscriber1,times(1)).onNext(1);
  inOrder1.verifyNoMoreInteractions();
  ts.dispose();
  pp.onNext(2);
  Subscriber<Integer> subscriber2=TestHelper.mockSubscriber();
  TestSubscriber<Integer> ts2=new TestSubscriber<Integer>(subscriber2);
  pp.subscribe(ts2);
  pp.onNext(3);
  InOrder inOrder2=inOrder(subscriber2);
  inOrder2.verify(subscriber2,times(1)).onNext(3);
  inOrder2.verifyNoMoreInteractions();
  ts2.dispose();
}
