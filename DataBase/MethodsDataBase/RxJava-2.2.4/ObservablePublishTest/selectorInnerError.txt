@Test public void selectorInnerError(){
  PublishSubject<Integer> ps=PublishSubject.create();
  ps.publish(new Function<Observable<Integer>,ObservableSource<Integer>>(){
    @Override public ObservableSource<Integer> apply(    Observable<Integer> v) throws Exception {
      return Observable.error(new TestException());
    }
  }
).test().assertFailure(TestException.class);
  assertFalse(ps.hasObservers());
}
