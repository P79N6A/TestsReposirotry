@Test public void testCompleteTriggersSubscription(){
  PublishSubject<Object> other=PublishSubject.create();
  TestObserver<Integer> to=new TestObserver<Integer>();
  final AtomicInteger subscribed=new AtomicInteger();
  Observable.just(1).doOnSubscribe(new Consumer<Disposable>(){
    @Override public void accept(    Disposable d){
      subscribed.getAndIncrement();
    }
  }
).delaySubscription(other).subscribe(to);
  to.assertNotComplete();
  to.assertNoErrors();
  to.assertNoValues();
  Assert.assertEquals("Premature subscription",0,subscribed.get());
  other.onComplete();
  Assert.assertEquals("No subscription",1,subscribed.get());
  to.assertValue(1);
  to.assertNoErrors();
  to.assertComplete();
}
