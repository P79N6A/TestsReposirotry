@Test public void testTakeUntilSourceError(){
  Disposable sSource=mock(Disposable.class);
  Disposable sOther=mock(Disposable.class);
  TestObservable source=new TestObservable(sSource);
  TestObservable other=new TestObservable(sOther);
  Throwable error=new Throwable();
  Observer<String> result=TestHelper.mockObserver();
  Observable<String> stringObservable=Observable.unsafeCreate(source).takeUntil(Observable.unsafeCreate(other));
  stringObservable.subscribe(result);
  source.sendOnNext("one");
  source.sendOnNext("two");
  source.sendOnError(error);
  source.sendOnNext("three");
  verify(result,times(1)).onNext("one");
  verify(result,times(1)).onNext("two");
  verify(result,times(0)).onNext("three");
  verify(result,times(1)).onError(error);
  verify(sSource,never()).dispose();
  verify(sOther,times(1)).dispose();
}
