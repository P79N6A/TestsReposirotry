@Test public void testUntilFires(){
  PublishSubject<Integer> source=PublishSubject.create();
  PublishSubject<Integer> until=PublishSubject.create();
  TestObserver<Integer> to=new TestObserver<Integer>();
  source.takeUntil(until).subscribe(to);
  assertTrue(source.hasObservers());
  assertTrue(until.hasObservers());
  source.onNext(1);
  to.assertValue(1);
  until.onNext(1);
  to.assertValue(1);
  to.assertNoErrors();
  to.assertTerminated();
  assertFalse("Source still has observers",source.hasObservers());
  assertFalse("Until still has observers",until.hasObservers());
}
