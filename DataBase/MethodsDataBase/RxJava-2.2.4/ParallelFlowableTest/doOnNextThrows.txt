@Test public void doOnNextThrows(){
  final int[] count={0};
  Flowable.range(1,5).parallel().doOnNext(new Consumer<Integer>(){
    @Override public void accept(    Integer v) throws Exception {
      if (v == 3) {
        throw new TestException();
      }
 else {
        count[0]++;
      }
    }
  }
).sequential().test().assertError(TestException.class).assertNotComplete();
  assertTrue("" + count[0],count[0] < 5);
}
