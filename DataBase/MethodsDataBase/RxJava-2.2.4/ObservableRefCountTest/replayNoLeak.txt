@Test public void replayNoLeak() throws Exception {
  System.gc();
  Thread.sleep(100);
  long start=ManagementFactory.getMemoryMXBean().getHeapMemoryUsage().getUsed();
  source=Observable.fromCallable(new Callable<Object>(){
    @Override public Object call() throws Exception {
      return new byte[100 * 1000 * 1000];
    }
  }
).replay(1).refCount();
  source.subscribe();
  System.gc();
  Thread.sleep(100);
  long after=ManagementFactory.getMemoryMXBean().getHeapMemoryUsage().getUsed();
  source=null;
  assertTrue(String.format("%,3d -> %,3d%n",start,after),start + 20 * 1000 * 1000 > after);
}
