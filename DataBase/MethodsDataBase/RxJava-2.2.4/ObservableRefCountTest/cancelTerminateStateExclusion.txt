@Test public void cancelTerminateStateExclusion(){
  ObservableRefCount<Object> o=(ObservableRefCount<Object>)PublishSubject.create().publish().refCount();
  o.cancel(null);
  o.cancel(new RefConnection(o));
  RefConnection rc=new RefConnection(o);
  o.connection=null;
  rc.subscriberCount=0;
  o.timeout(rc);
  rc.subscriberCount=1;
  o.timeout(rc);
  o.connection=rc;
  o.timeout(rc);
  rc.subscriberCount=0;
  o.timeout(rc);
  rc.subscriberCount=2;
  rc.connected=false;
  o.connection=rc;
  o.cancel(rc);
  rc.subscriberCount=1;
  rc.connected=false;
  o.connection=rc;
  o.cancel(rc);
  rc.subscriberCount=2;
  rc.connected=true;
  o.connection=rc;
  o.cancel(rc);
  rc.subscriberCount=1;
  rc.connected=true;
  o.connection=rc;
  o.cancel(rc);
  o.connection=rc;
  o.cancel(new RefConnection(o));
}
