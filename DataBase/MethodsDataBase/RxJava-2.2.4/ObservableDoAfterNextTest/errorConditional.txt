@Test public void errorConditional(){
  Observable.<Integer>error(new TestException()).doAfterNext(afterNext).filter(Functions.alwaysTrue()).subscribeWith(to).assertFailure(TestException.class);
  assertTrue(values.isEmpty());
}
