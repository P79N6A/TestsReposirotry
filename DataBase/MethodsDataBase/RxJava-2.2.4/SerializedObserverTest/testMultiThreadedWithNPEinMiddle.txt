@Test public void testMultiThreadedWithNPEinMiddle(){
  int n=10;
  for (int i=0; i < n; i++) {
    TestMultiThreadedObservable onSubscribe=new TestMultiThreadedObservable("one","two","three",null,"four","five","six","seven","eight","nine");
    Observable<String> w=Observable.unsafeCreate(onSubscribe);
    BusyObserver busySubscriber=new BusyObserver();
    Observer<String> aw=serializedObserver(busySubscriber);
    w.subscribe(aw);
    onSubscribe.waitToFinish();
    System.out.println("OnSubscribe maxConcurrentThreads: " + onSubscribe.maxConcurrentThreads.get() + "  Observer maxConcurrentThreads: "+ busySubscriber.maxConcurrentThreads.get());
    assertTrue(onSubscribe.maxConcurrentThreads.get() > 1);
    assertEquals(1,busySubscriber.maxConcurrentThreads.get());
    System.out.println("onNext count: " + busySubscriber.onNextCount.get());
    assertFalse(busySubscriber.onComplete);
    assertTrue(busySubscriber.onError);
    assertTrue(busySubscriber.onNextCount.get() < 9);
  }
}
