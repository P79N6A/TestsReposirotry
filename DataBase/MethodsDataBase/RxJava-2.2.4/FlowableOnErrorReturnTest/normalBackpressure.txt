@Test public void normalBackpressure(){
  TestSubscriber<Integer> ts=TestSubscriber.create(0);
  PublishProcessor<Integer> pp=PublishProcessor.create();
  pp.onErrorReturn(new Function<Throwable,Integer>(){
    @Override public Integer apply(    Throwable e){
      return 3;
    }
  }
).subscribe(ts);
  ts.request(2);
  pp.onNext(1);
  pp.onNext(2);
  pp.onError(new TestException("Forced failure"));
  ts.assertValues(1,2);
  ts.assertNoErrors();
  ts.assertNotComplete();
  ts.request(2);
  ts.assertValues(1,2,3);
  ts.assertNoErrors();
  ts.assertComplete();
}
