@Test public void synchronousRebatching(){
  final List<Long> requests=new ArrayList<Long>();
  TestSubscriber<Integer> ts=new TestSubscriber<Integer>();
  Flowable.range(1,50).doOnRequest(new LongConsumer(){
    @Override public void accept(    long r){
      requests.add(r);
    }
  }
).rebatchRequests(20).subscribe(ts);
  ts.assertValueCount(50);
  ts.assertNoErrors();
  ts.assertComplete();
  assertEquals(Arrays.asList(20L,15L,15L,15L),requests);
}
