@Test public void noCancelPreviousRetryWhile2(){
  final AtomicInteger counter=new AtomicInteger();
  final AtomicInteger times=new AtomicInteger();
  Flowable<Integer> source=Flowable.defer(new Callable<Flowable<Integer>>(){
    @Override public Flowable<Integer> call() throws Exception {
      if (times.getAndIncrement() < 4) {
        return Flowable.error(new TestException());
      }
      return Flowable.just(1);
    }
  }
).doOnCancel(new Action(){
    @Override public void run() throws Exception {
      counter.getAndIncrement();
    }
  }
);
  source.retry(new BiPredicate<Integer,Throwable>(){
    @Override public boolean test(    Integer a,    Throwable b) throws Exception {
      return a < 5;
    }
  }
).test().assertResult(1);
  assertEquals(0,counter.get());
}
