@Test public void exactOnError(){
  List<Throwable> errors=TestHelper.trackPluginErrors();
  try {
    TestScheduler scheduler=new TestScheduler();
    PublishProcessor<Integer> pp=PublishProcessor.create();
    TestSubscriber<Integer> ts=pp.window(1,1,TimeUnit.SECONDS,scheduler).flatMap(Functions.<Flowable<Integer>>identity()).test();
    pp.onError(new TestException());
    ts.assertFailure(TestException.class);
    TestHelper.assertUndeliverable(errors,0,TestException.class);
  }
  finally {
    RxJavaPlugins.reset();
  }
}
