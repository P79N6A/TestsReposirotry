@Test public void flowableCompletable2() throws Exception {
  List<Throwable> errors=TestHelper.trackPluginErrors();
  try {
    TestSubscriber<Void> ts=Flowable.just(1).subscribeOn(Schedulers.io()).flatMapCompletable(new Function<Integer,Completable>(){
      @Override public Completable apply(      Integer v) throws Exception {
        sleep();
        return Completable.error(new TestException());
      }
    }
).<Void>toFlowable().test();
    cb.await();
    beforeCancelSleep(ts);
    ts.cancel();
    Thread.sleep(SLEEP_AFTER_CANCEL);
    ts.assertEmpty();
    assertTrue(errors.toString(),errors.isEmpty());
  }
  finally {
    RxJavaPlugins.reset();
  }
}
