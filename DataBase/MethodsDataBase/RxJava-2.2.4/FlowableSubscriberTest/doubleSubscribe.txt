@Test public void doubleSubscribe(){
  ForEachWhileSubscriber<Integer> s=new ForEachWhileSubscriber<Integer>(new Predicate<Integer>(){
    @Override public boolean test(    Integer v) throws Exception {
      return true;
    }
  }
,Functions.<Throwable>emptyConsumer(),Functions.EMPTY_ACTION);
  List<Throwable> list=TestHelper.trackPluginErrors();
  try {
    s.onSubscribe(new BooleanSubscription());
    BooleanSubscription bs=new BooleanSubscription();
    s.onSubscribe(bs);
    assertTrue(bs.isCancelled());
    TestHelper.assertError(list,0,IllegalStateException.class,"Subscription already set!");
  }
  finally {
    RxJavaPlugins.reset();
  }
}
