@Test public void forEachWhile(){
  PublishProcessor<Integer> pp=PublishProcessor.create();
  final List<Integer> list=new ArrayList<Integer>();
  Disposable d=pp.forEachWhile(new Predicate<Integer>(){
    @Override public boolean test(    Integer v) throws Exception {
      list.add(v);
      return v < 3;
    }
  }
);
  assertFalse(d.isDisposed());
  pp.onNext(1);
  pp.onNext(2);
  pp.onNext(3);
  assertFalse(pp.hasSubscribers());
  assertEquals(Arrays.asList(1,2,3),list);
}
