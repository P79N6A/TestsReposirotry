@Test @Ignore("publish() keeps consuming the upstream if there are no subscribers, 3.x should change this") public void subscriberSwap(){
  final ConnectableFlowable<Integer> cf=Flowable.range(1,5).publish();
  cf.connect();
  TestSubscriber<Integer> ts1=new TestSubscriber<Integer>(){
    @Override public void onNext(    Integer t){
      super.onNext(t);
      cancel();
      onComplete();
    }
  }
;
  cf.subscribe(ts1);
  ts1.assertResult(1);
  TestSubscriber<Integer> ts2=new TestSubscriber<Integer>(0);
  cf.subscribe(ts2);
  ts2.assertEmpty().requestMore(4).assertResult(2,3,4,5);
}
