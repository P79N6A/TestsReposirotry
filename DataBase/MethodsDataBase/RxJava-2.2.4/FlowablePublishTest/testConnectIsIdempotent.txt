@Test public void testConnectIsIdempotent(){
  final AtomicInteger calls=new AtomicInteger();
  Flowable<Integer> source=Flowable.unsafeCreate(new Publisher<Integer>(){
    @Override public void subscribe(    Subscriber<? super Integer> t){
      t.onSubscribe(new BooleanSubscription());
      calls.getAndIncrement();
    }
  }
);
  ConnectableFlowable<Integer> conn=source.publish();
  assertEquals(0,calls.get());
  conn.connect();
  conn.connect();
  assertEquals(1,calls.get());
  conn.connect().dispose();
  conn.connect();
  conn.connect();
  assertEquals(2,calls.get());
}
