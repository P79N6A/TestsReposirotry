@Test public void noCancelPreviousRepeatUntil(){
  final AtomicInteger counter=new AtomicInteger();
  Flowable<Integer> source=Flowable.just(1).doOnCancel(new Action(){
    @Override public void run() throws Exception {
      counter.getAndIncrement();
    }
  }
);
  final AtomicInteger times=new AtomicInteger();
  source.repeatUntil(new BooleanSupplier(){
    @Override public boolean getAsBoolean() throws Exception {
      return times.getAndIncrement() == 4;
    }
  }
).test().assertResult(1,1,1,1,1);
  assertEquals(0,counter.get());
}
