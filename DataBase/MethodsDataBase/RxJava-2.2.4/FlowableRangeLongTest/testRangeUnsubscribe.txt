@Test public void testRangeUnsubscribe(){
  Subscriber<Long> subscriber=TestHelper.mockSubscriber();
  final AtomicInteger count=new AtomicInteger();
  Flowable.rangeLong(1,1000).doOnNext(new Consumer<Long>(){
    @Override public void accept(    Long t1){
      count.incrementAndGet();
    }
  }
).take(3).subscribe(subscriber);
  verify(subscriber,times(1)).onNext(1L);
  verify(subscriber,times(1)).onNext(2L);
  verify(subscriber,times(1)).onNext(3L);
  verify(subscriber,never()).onNext(4L);
  verify(subscriber,never()).onError(any(Throwable.class));
  verify(subscriber,times(1)).onComplete();
  assertEquals(3,count.get());
}
