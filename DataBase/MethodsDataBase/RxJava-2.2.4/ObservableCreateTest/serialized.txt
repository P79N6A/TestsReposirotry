@Test public void serialized(){
  List<Throwable> errors=TestHelper.trackPluginErrors();
  try {
    Observable.create(new ObservableOnSubscribe<Object>(){
      @Override public void subscribe(      ObservableEmitter<Object> e) throws Exception {
        ObservableEmitter<Object> f=e.serialize();
        assertSame(f,f.serialize());
        assertFalse(f.isDisposed());
        final int[] calls={0};
        f.setCancellable(new Cancellable(){
          @Override public void cancel() throws Exception {
            calls[0]++;
          }
        }
);
        e.onComplete();
        assertTrue(f.isDisposed());
        assertEquals(1,calls[0]);
      }
    }
).test().assertResult();
    assertTrue(errors.toString(),errors.isEmpty());
  }
  finally {
    RxJavaPlugins.reset();
  }
}
