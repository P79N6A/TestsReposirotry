@Test public void basicSerialized(){
  final Disposable d=Disposables.empty();
  Observable.<Integer>create(new ObservableOnSubscribe<Integer>(){
    @Override public void subscribe(    ObservableEmitter<Integer> e) throws Exception {
      e=e.serialize();
      e.setDisposable(d);
      e.onNext(1);
      e.onNext(2);
      e.onNext(3);
      e.onComplete();
      e.onError(new TestException());
      e.onNext(4);
      e.onError(new TestException());
      e.onComplete();
    }
  }
).test().assertResult(1,2,3);
  assertTrue(d.isDisposed());
}
