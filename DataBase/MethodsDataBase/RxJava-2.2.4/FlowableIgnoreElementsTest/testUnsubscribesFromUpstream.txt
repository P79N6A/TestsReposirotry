@Test public void testUnsubscribesFromUpstream(){
  final AtomicBoolean unsub=new AtomicBoolean();
  Flowable.range(1,10).concatWith(Flowable.<Integer>never()).doOnCancel(new Action(){
    @Override public void run(){
      unsub.set(true);
    }
  }
).ignoreElements().subscribe().dispose();
  assertTrue(unsub.get());
}
