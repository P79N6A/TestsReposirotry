@Test(timeout=10000) public void testDoesNotHangAndProcessesAllUsingBackpressureFlowable(){
  final AtomicInteger upstreamCount=new AtomicInteger();
  final AtomicInteger count=new AtomicInteger(0);
  int num=10;
  Flowable.range(1,num).doOnNext(new Consumer<Integer>(){
    @Override public void accept(    Integer t){
      upstreamCount.incrementAndGet();
    }
  }
).ignoreElements().<Integer>toFlowable().doOnNext(new Consumer<Integer>(){
    @Override public void accept(    Integer t){
      upstreamCount.incrementAndGet();
    }
  }
).subscribe(new DefaultSubscriber<Integer>(){
    @Override public void onStart(){
      request(1);
    }
    @Override public void onComplete(){
    }
    @Override public void onError(    Throwable e){
    }
    @Override public void onNext(    Integer t){
      count.incrementAndGet();
    }
  }
);
  assertEquals(num,upstreamCount.get());
  assertEquals(0,count.get());
}
