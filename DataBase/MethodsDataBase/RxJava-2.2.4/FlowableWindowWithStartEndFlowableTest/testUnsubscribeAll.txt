@Test public void testUnsubscribeAll(){
  PublishProcessor<Integer> source=PublishProcessor.create();
  PublishProcessor<Integer> open=PublishProcessor.create();
  final PublishProcessor<Integer> close=PublishProcessor.create();
  TestSubscriber<Flowable<Integer>> ts=new TestSubscriber<Flowable<Integer>>();
  source.window(open,new Function<Integer,Flowable<Integer>>(){
    @Override public Flowable<Integer> apply(    Integer t){
      return close;
    }
  }
).subscribe(ts);
  open.onNext(1);
  assertTrue(open.hasSubscribers());
  assertTrue(close.hasSubscribers());
  ts.dispose();
  assertTrue(open.hasSubscribers());
  assertTrue(close.hasSubscribers());
}
