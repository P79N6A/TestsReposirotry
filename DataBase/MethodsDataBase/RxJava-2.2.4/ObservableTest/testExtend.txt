@Test public void testExtend(){
  final TestObserver<Object> to=new TestObserver<Object>();
  final Object value=new Object();
  Object returned=Observable.just(value).to(new Function<Observable<Object>,Object>(){
    @Override public Object apply(    Observable<Object> onSubscribe){
      onSubscribe.subscribe(to);
      to.assertNoErrors();
      to.assertComplete();
      to.assertValue(value);
      return to.values().get(0);
    }
  }
);
  assertSame(returned,value);
}
