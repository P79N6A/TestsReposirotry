@Test public void testToMultimapWithValueSelectorFlowable(){
  Flowable<String> source=Flowable.just("a","b","cc","dd");
  Flowable<Map<Integer,Collection<String>>> mapped=source.toMultimap(lengthFunc,duplicate).toFlowable();
  Map<Integer,Collection<String>> expected=new HashMap<Integer,Collection<String>>();
  expected.put(1,Arrays.asList("aa","bb"));
  expected.put(2,Arrays.asList("cccc","dddd"));
  mapped.subscribe(objectSubscriber);
  verify(objectSubscriber,never()).onError(any(Throwable.class));
  verify(objectSubscriber,times(1)).onNext(expected);
  verify(objectSubscriber,times(1)).onComplete();
}
