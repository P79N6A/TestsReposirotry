@Test public void testThrottlingWithError(){
  Observable<String> source=Observable.unsafeCreate(new ObservableSource<String>(){
    @Override public void subscribe(    Observer<? super String> innerObserver){
      innerObserver.onSubscribe(Disposables.empty());
      Exception error=new TestException();
      publishNext(innerObserver,100,"one");
      publishNext(innerObserver,200,"two");
      publishError(innerObserver,300,error);
    }
  }
);
  Observable<String> sampled=source.throttleFirst(400,TimeUnit.MILLISECONDS,scheduler);
  sampled.subscribe(observer);
  InOrder inOrder=inOrder(observer);
  scheduler.advanceTimeTo(400,TimeUnit.MILLISECONDS);
  inOrder.verify(observer).onNext("one");
  inOrder.verify(observer).onError(any(TestException.class));
  inOrder.verifyNoMoreInteractions();
}
