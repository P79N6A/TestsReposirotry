@Test public void testUnsubscribeTakesEffectEarlyOnFastPath(){
  final AtomicInteger count=new AtomicInteger();
  Observable.range(0,100000).takeLast(100000).subscribe(new DefaultObserver<Integer>(){
    @Override public void onStart(){
    }
    @Override public void onComplete(){
    }
    @Override public void onError(    Throwable e){
    }
    @Override public void onNext(    Integer integer){
      count.incrementAndGet();
      cancel();
    }
  }
);
  assertEquals(1,count.get());
}
