@Test public void testRangeUnsubscribe(){
  Subscriber<Integer> subscriber=TestHelper.mockSubscriber();
  final AtomicInteger count=new AtomicInteger();
  Flowable.range(1,1000).doOnNext(new Consumer<Integer>(){
    @Override public void accept(    Integer t1){
      count.incrementAndGet();
    }
  }
).take(3).subscribe(subscriber);
  verify(subscriber,times(1)).onNext(1);
  verify(subscriber,times(1)).onNext(2);
  verify(subscriber,times(1)).onNext(3);
  verify(subscriber,never()).onNext(4);
  verify(subscriber,never()).onError(any(Throwable.class));
  verify(subscriber,times(1)).onComplete();
  assertEquals(3,count.get());
}
