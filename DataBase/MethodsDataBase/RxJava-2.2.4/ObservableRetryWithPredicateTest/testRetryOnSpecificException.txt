@Test public void testRetryOnSpecificException(){
  Observable<Integer> source=Observable.unsafeCreate(new ObservableSource<Integer>(){
    int count;
    @Override public void subscribe(    Observer<? super Integer> t1){
      t1.onSubscribe(Disposables.empty());
      count++;
      t1.onNext(0);
      t1.onNext(1);
      if (count == 1) {
        t1.onError(new IOException());
        return;
      }
      t1.onNext(2);
      t1.onNext(3);
      t1.onComplete();
    }
  }
);
  Observer<Integer> o=TestHelper.mockObserver();
  InOrder inOrder=inOrder(o);
  source.retry(retryOnTestException).subscribe(o);
  inOrder.verify(o).onNext(0);
  inOrder.verify(o).onNext(1);
  inOrder.verify(o).onNext(0);
  inOrder.verify(o).onNext(1);
  inOrder.verify(o).onNext(2);
  inOrder.verify(o).onNext(3);
  inOrder.verify(o).onComplete();
  verify(o,never()).onError(any(Throwable.class));
}
