@Test public void testUnsubscribeFromRetry(){
  PublishSubject<Integer> subject=PublishSubject.create();
  final AtomicInteger count=new AtomicInteger(0);
  Disposable sub=subject.retry(retryTwice).subscribe(new Consumer<Integer>(){
    @Override public void accept(    Integer n){
      count.incrementAndGet();
    }
  }
);
  subject.onNext(1);
  sub.dispose();
  subject.onNext(2);
  assertEquals(1,count.get());
}
