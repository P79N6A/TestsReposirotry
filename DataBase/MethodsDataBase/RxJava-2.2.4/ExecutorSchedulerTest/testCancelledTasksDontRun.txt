@Test public void testCancelledTasksDontRun(){
  final AtomicInteger calls=new AtomicInteger();
  Runnable task=new Runnable(){
    @Override public void run(){
      calls.getAndIncrement();
    }
  }
;
  TestExecutor exec=new TestExecutor();
  Scheduler custom=Schedulers.from(exec);
  Worker w=custom.createWorker();
  try {
    Disposable d1=w.schedule(task);
    Disposable d2=w.schedule(task);
    Disposable d3=w.schedule(task);
    d1.dispose();
    d2.dispose();
    d3.dispose();
    exec.executeAll();
    assertEquals(0,calls.get());
  }
  finally {
    w.dispose();
  }
}
