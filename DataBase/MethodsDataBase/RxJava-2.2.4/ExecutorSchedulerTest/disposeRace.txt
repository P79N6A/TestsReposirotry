@Test public void disposeRace(){
  ExecutorService exec=Executors.newSingleThreadExecutor();
  final Scheduler s=Schedulers.from(exec);
  try {
    for (int i=0; i < 500; i++) {
      final Worker w=s.createWorker();
      final AtomicInteger c=new AtomicInteger(2);
      w.schedule(new Runnable(){
        @Override public void run(){
          c.decrementAndGet();
          while (c.get() != 0) {
          }
        }
      }
);
      c.decrementAndGet();
      while (c.get() != 0) {
      }
      w.dispose();
    }
  }
  finally {
    exec.shutdownNow();
  }
}
