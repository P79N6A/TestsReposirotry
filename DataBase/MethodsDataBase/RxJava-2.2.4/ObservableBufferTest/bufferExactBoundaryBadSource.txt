@SuppressWarnings("unchecked") @Test public void bufferExactBoundaryBadSource(){
  Observable<Integer> ps=new Observable<Integer>(){
    @Override protected void subscribeActual(    Observer<? super Integer> observer){
      observer.onSubscribe(Disposables.empty());
      observer.onComplete();
      observer.onNext(1);
      observer.onComplete();
    }
  }
;
  final AtomicReference<Observer<? super Integer>> ref=new AtomicReference<Observer<? super Integer>>();
  Observable<Integer> b=new Observable<Integer>(){
    @Override protected void subscribeActual(    Observer<? super Integer> observer){
      observer.onSubscribe(Disposables.empty());
      ref.set(observer);
    }
  }
;
  TestObserver<List<Integer>> to=ps.buffer(b).test();
  ref.get().onNext(1);
  to.assertResult(Collections.<Integer>emptyList());
}
