@Test @SuppressWarnings("unchecked") public void openCloseTake(){
  PublishSubject<Integer> source=PublishSubject.create();
  PublishSubject<Integer> openIndicator=PublishSubject.create();
  PublishSubject<Integer> closeIndicator=PublishSubject.create();
  TestObserver<List<Integer>> to=source.buffer(openIndicator,Functions.justFunction(closeIndicator)).take(1).test();
  openIndicator.onNext(1);
  closeIndicator.onComplete();
  assertFalse(source.hasObservers());
  assertFalse(openIndicator.hasObservers());
  assertFalse(closeIndicator.hasObservers());
  to.assertResult(Collections.<Integer>emptyList());
}
