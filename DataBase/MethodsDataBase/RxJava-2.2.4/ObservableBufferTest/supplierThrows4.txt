@Test @SuppressWarnings("unchecked") public void supplierThrows4(){
  Observable.<Integer>never().buffer(1,TimeUnit.MILLISECONDS,Schedulers.single(),Integer.MAX_VALUE,new Callable<Collection<Integer>>(){
    int count;
    @Override public Collection<Integer> call() throws Exception {
      if (count++ == 1) {
        throw new TestException();
      }
 else {
        return new ArrayList<Integer>();
      }
    }
  }
,false).test().awaitDone(5,TimeUnit.SECONDS).assertFailure(TestException.class);
}
