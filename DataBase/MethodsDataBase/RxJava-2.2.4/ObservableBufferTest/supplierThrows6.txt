@Test @SuppressWarnings("unchecked") public void supplierThrows6(){
  Observable.<Integer>never().buffer(2,1,TimeUnit.MILLISECONDS,Schedulers.single(),new Callable<Collection<Integer>>(){
    int count;
    @Override public Collection<Integer> call() throws Exception {
      if (count++ == 1) {
        throw new TestException();
      }
 else {
        return new ArrayList<Integer>();
      }
    }
  }
).test().awaitDone(5,TimeUnit.SECONDS).assertFailure(TestException.class);
}
