@Test @SuppressWarnings("unchecked") public void boundaryOpenCloseDisposedOnComplete(){
  PublishSubject<Integer> source=PublishSubject.create();
  PublishSubject<Integer> openIndicator=PublishSubject.create();
  PublishSubject<Integer> closeIndicator=PublishSubject.create();
  TestObserver<List<Integer>> to=source.buffer(openIndicator,Functions.justFunction(closeIndicator)).test();
  assertTrue(source.hasObservers());
  assertTrue(openIndicator.hasObservers());
  assertFalse(closeIndicator.hasObservers());
  openIndicator.onNext(1);
  assertTrue(openIndicator.hasObservers());
  assertTrue(closeIndicator.hasObservers());
  source.onComplete();
  to.assertResult(Collections.<Integer>emptyList());
  assertFalse(openIndicator.hasObservers());
  assertFalse(closeIndicator.hasObservers());
}
