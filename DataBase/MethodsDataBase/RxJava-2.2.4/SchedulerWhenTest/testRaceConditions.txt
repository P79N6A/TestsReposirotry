@Test(timeout=1000) public void testRaceConditions(){
  Scheduler comp=Schedulers.computation();
  Scheduler limited=comp.when(new Function<Flowable<Flowable<Completable>>,Completable>(){
    @Override public Completable apply(    Flowable<Flowable<Completable>> t){
      return Completable.merge(Flowable.merge(t,10));
    }
  }
);
  merge(just(just(1).subscribeOn(limited).observeOn(comp)).repeat(1000)).blockingSubscribe();
}
