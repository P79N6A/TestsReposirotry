@Test public void testToMapWithValueSelectorFlowable(){
  Flowable<String> source=Flowable.just("a","bb","ccc","dddd");
  Flowable<Map<Integer,String>> mapped=source.toMap(lengthFunc,duplicate).toFlowable();
  Map<Integer,String> expected=new HashMap<Integer,String>();
  expected.put(1,"aa");
  expected.put(2,"bbbb");
  expected.put(3,"cccccc");
  expected.put(4,"dddddddd");
  mapped.subscribe(objectSubscriber);
  verify(objectSubscriber,never()).onError(any(Throwable.class));
  verify(objectSubscriber,times(1)).onNext(expected);
  verify(objectSubscriber,times(1)).onComplete();
}
