@Test public void testDoOnSubscribe() throws Exception {
  final AtomicInteger count=new AtomicInteger();
  Flowable<Integer> f=Flowable.just(1).doOnSubscribe(new Consumer<Subscription>(){
    @Override public void accept(    Subscription s){
      count.incrementAndGet();
    }
  }
);
  f.subscribe();
  f.subscribe();
  f.subscribe();
  assertEquals(3,count.get());
}
