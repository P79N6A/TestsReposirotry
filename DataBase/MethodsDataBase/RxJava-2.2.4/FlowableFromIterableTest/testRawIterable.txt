/** 
 * This tests the path that can not optimize based on size so must use setProducer.
 */
@Test public void testRawIterable(){
  Iterable<String> it=new Iterable<String>(){
    @Override public Iterator<String> iterator(){
      return new Iterator<String>(){
        int i;
        @Override public boolean hasNext(){
          return i < 3;
        }
        @Override public String next(){
          return String.valueOf(++i);
        }
        @Override public void remove(){
        }
      }
;
    }
  }
;
  Flowable<String> flowable=Flowable.fromIterable(it);
  Subscriber<String> subscriber=TestHelper.mockSubscriber();
  flowable.subscribe(subscriber);
  verify(subscriber,times(1)).onNext("1");
  verify(subscriber,times(1)).onNext("2");
  verify(subscriber,times(1)).onNext("3");
  verify(subscriber,Mockito.never()).onError(any(Throwable.class));
  verify(subscriber,times(1)).onComplete();
}
