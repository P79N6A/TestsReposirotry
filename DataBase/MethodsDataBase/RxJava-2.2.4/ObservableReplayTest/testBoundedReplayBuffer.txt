@Test public void testBoundedReplayBuffer(){
  BoundedReplayBuffer<Integer> buf=new BoundedReplayBuffer<Integer>(){
    private static final long serialVersionUID=-5182053207244406872L;
    @Override void truncate(){
    }
  }
;
  buf.addLast(new Node(1));
  buf.addLast(new Node(2));
  buf.addLast(new Node(3));
  buf.addLast(new Node(4));
  buf.addLast(new Node(5));
  List<Integer> values=new ArrayList<Integer>();
  buf.collect(values);
  Assert.assertEquals(Arrays.asList(1,2,3,4,5),values);
  buf.removeSome(2);
  buf.removeFirst();
  buf.removeSome(2);
  values.clear();
  buf.collect(values);
  Assert.assertTrue(values.isEmpty());
  buf.addLast(new Node(5));
  buf.addLast(new Node(6));
  buf.collect(values);
  Assert.assertEquals(Arrays.asList(5,6),values);
}
