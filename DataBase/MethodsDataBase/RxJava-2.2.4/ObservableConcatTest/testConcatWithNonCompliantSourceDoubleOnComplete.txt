@Test public void testConcatWithNonCompliantSourceDoubleOnComplete(){
  Observable<String> o=Observable.unsafeCreate(new ObservableSource<String>(){
    @Override public void subscribe(    Observer<? super String> observer){
      observer.onSubscribe(Disposables.empty());
      observer.onNext("hello");
      observer.onComplete();
      observer.onComplete();
    }
  }
);
  TestObserver<String> to=new TestObserver<String>();
  Observable.concat(o,o).subscribe(to);
  to.awaitTerminalEvent(500,TimeUnit.MILLISECONDS);
  to.assertTerminated();
  to.assertNoErrors();
  to.assertValues("hello","hello");
}
