@Test public void inputOutputSubscribeRace(){
  Flowable<Integer> source=Flowable.just(1).publish(new Function<Flowable<Integer>,Publisher<Integer>>(){
    @Override public Publisher<Integer> apply(    Flowable<Integer> f) throws Exception {
      return f.subscribeOn(Schedulers.single());
    }
  }
);
  for (int i=0; i < 500; i++) {
    source.test().awaitDone(5,TimeUnit.SECONDS).assertResult(1);
  }
}
