@Test public void takeCompletes(){
  TestSubscriber<Integer> ts=TestSubscriber.create();
  PublishProcessor<Integer> pp=PublishProcessor.create();
  pp.publish(new Function<Flowable<Integer>,Flowable<Integer>>(){
    @Override public Flowable<Integer> apply(    Flowable<Integer> f){
      return f.take(1);
    }
  }
).subscribe(ts);
  pp.onNext(1);
  ts.assertValues(1);
  ts.assertNoErrors();
  ts.assertComplete();
  Assert.assertFalse("Source has subscribers?",pp.hasSubscribers());
}
