@Test public void testReentrantTake(){
  final PublishSubject<Integer> source=PublishSubject.create();
  TestObserver<Integer> to=new TestObserver<Integer>();
  source.take(1).doOnNext(new Consumer<Integer>(){
    @Override public void accept(    Integer v){
      source.onNext(2);
    }
  }
).subscribe(to);
  source.onNext(1);
  to.assertValue(1);
  to.assertNoErrors();
  to.assertComplete();
}
