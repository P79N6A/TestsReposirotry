@SuppressWarnings("unchecked") @Test public void testSecondaryRequestsPropagatedToChildren() throws InterruptedException {
  Flowable<Integer> f1=Flowable.fromArray(1,2,3).delay(100,TimeUnit.MILLISECONDS).subscribeOn(Schedulers.computation());
  Flowable<Integer> f2=Flowable.fromArray(4,5,6).delay(200,TimeUnit.MILLISECONDS).subscribeOn(Schedulers.computation());
  TestSubscriber<Integer> ts=new TestSubscriber<Integer>(1L);
  Flowable.ambArray(f1,f2).subscribe(ts);
  ts.request(20);
  ts.awaitTerminalEvent(5,TimeUnit.SECONDS);
  ts.assertNoErrors();
}
