@Test public void testgroupByBackpressure() throws InterruptedException {
  TestObserver<String> to=new TestObserver<String>();
  Observable.range(1,4000).groupBy(IS_EVEN2).flatMap(new Function<GroupedObservable<Boolean,Integer>,Observable<String>>(){
    @Override public Observable<String> apply(    final GroupedObservable<Boolean,Integer> g){
      return g.doOnComplete(new Action(){
        @Override public void run(){
          System.out.println("//////////////////// COMPLETED-A");
        }
      }
).observeOn(Schedulers.computation()).map(new Function<Integer,String>(){
        int c;
        @Override public String apply(        Integer l){
          if (g.getKey()) {
            if (c++ < 400) {
              try {
                Thread.sleep(1);
              }
 catch (              InterruptedException e) {
              }
            }
            return l + " is even.";
          }
 else {
            return l + " is odd.";
          }
        }
      }
).doOnComplete(new Action(){
        @Override public void run(){
          System.out.println("//////////////////// COMPLETED-B");
        }
      }
);
    }
  }
).doOnEach(new Consumer<Notification<String>>(){
    @Override public void accept(    Notification<String> t1){
      System.out.println("NEXT: " + t1);
    }
  }
).subscribe(to);
  to.awaitTerminalEvent();
  to.assertNoErrors();
}
