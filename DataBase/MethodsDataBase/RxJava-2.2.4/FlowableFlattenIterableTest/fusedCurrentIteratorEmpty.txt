@Test public void fusedCurrentIteratorEmpty() throws Exception {
  TestSubscriber<Integer> ts=new TestSubscriber<Integer>(0);
  FlattenIterableSubscriber<Integer,Integer> f=new FlattenIterableSubscriber<Integer,Integer>(ts,Functions.justFunction(Arrays.<Integer>asList(1,2)),128);
  f.onSubscribe(new BooleanSubscription());
  f.onNext(1);
  assertFalse(f.isEmpty());
  assertEquals(1,f.poll().intValue());
  assertFalse(f.isEmpty());
  assertEquals(2,f.poll().intValue());
  assertTrue(f.isEmpty());
}
