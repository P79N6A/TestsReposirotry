@Test public void handlerError(){
  Observable.range(1,3).repeatWhen(new Function<Observable<Object>,ObservableSource<Object>>(){
    @Override public ObservableSource<Object> apply(    Observable<Object> v) throws Exception {
      return v.map(new Function<Object,Object>(){
        @Override public Object apply(        Object w) throws Exception {
          throw new TestException();
        }
      }
);
    }
  }
).test().assertFailure(TestException.class,1,2,3);
}
