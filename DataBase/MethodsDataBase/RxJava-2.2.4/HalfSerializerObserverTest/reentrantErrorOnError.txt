@Test @SuppressWarnings({"rawtypes","unchecked"}) public void reentrantErrorOnError(){
  final AtomicInteger wip=new AtomicInteger();
  final AtomicThrowable error=new AtomicThrowable();
  final Observer[] a={null};
  final TestObserver to=new TestObserver();
  Observer observer=new Observer(){
    @Override public void onSubscribe(    Disposable d){
      to.onSubscribe(d);
    }
    @Override public void onNext(    Object t){
      to.onNext(t);
    }
    @Override public void onError(    Throwable t){
      to.onError(t);
      HalfSerializer.onError(a[0],new IOException(),wip,error);
    }
    @Override public void onComplete(){
      to.onComplete();
    }
  }
;
  a[0]=observer;
  observer.onSubscribe(Disposables.empty());
  HalfSerializer.onError(observer,new TestException(),wip,error);
  to.assertFailure(TestException.class);
}
