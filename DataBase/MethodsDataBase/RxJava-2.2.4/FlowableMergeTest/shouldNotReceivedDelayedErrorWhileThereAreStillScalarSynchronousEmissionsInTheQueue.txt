@Test public void shouldNotReceivedDelayedErrorWhileThereAreStillScalarSynchronousEmissionsInTheQueue(){
  Throwable exception=new Throwable();
  Flowable<Integer> source=Flowable.mergeDelayError(Flowable.just(1),Flowable.just(2),Flowable.<Integer>error(exception));
  TestSubscriber<Integer> subscriber=new TestSubscriber<Integer>(0L);
  subscriber.request(1);
  source.subscribe(subscriber);
  subscriber.assertValue(1);
  assertEquals(Collections.<Throwable>emptyList(),subscriber.errors());
  subscriber.request(1);
  subscriber.assertValues(1,2);
  assertEquals(asList(exception),subscriber.errors());
}
