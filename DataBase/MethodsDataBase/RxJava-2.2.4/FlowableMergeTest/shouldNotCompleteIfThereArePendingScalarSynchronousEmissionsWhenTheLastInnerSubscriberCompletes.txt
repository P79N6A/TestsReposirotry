@Test public void shouldNotCompleteIfThereArePendingScalarSynchronousEmissionsWhenTheLastInnerSubscriberCompletes(){
  TestScheduler scheduler=new TestScheduler();
  Flowable<Long> source=Flowable.mergeDelayError(Flowable.just(1L),Flowable.timer(1,TimeUnit.SECONDS,scheduler).skip(1));
  TestSubscriber<Long> subscriber=new TestSubscriber<Long>(0L);
  source.subscribe(subscriber);
  scheduler.advanceTimeBy(1,TimeUnit.SECONDS);
  subscriber.assertNoValues();
  subscriber.assertNotComplete();
  subscriber.request(1);
  subscriber.assertValue(1L);
  subscriber.assertTerminated();
}
