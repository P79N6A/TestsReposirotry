@Test public void unsubscriptionPropagatesAfterSubscribe(){
  PublishProcessor<Integer> source=PublishProcessor.create();
  PublishProcessor<Integer> other=PublishProcessor.create();
  TestSubscriber<Integer> ts=new TestSubscriber<Integer>();
  source.delaySubscription(other).subscribe(ts);
  Assert.assertFalse("source subscribed?",source.hasSubscribers());
  Assert.assertTrue("other not subscribed?",other.hasSubscribers());
  other.onComplete();
  Assert.assertTrue("source not subscribed?",source.hasSubscribers());
  Assert.assertFalse("other still subscribed?",other.hasSubscribers());
  ts.dispose();
  Assert.assertFalse("source subscribed?",source.hasSubscribers());
  Assert.assertFalse("other still subscribed?",other.hasSubscribers());
}
