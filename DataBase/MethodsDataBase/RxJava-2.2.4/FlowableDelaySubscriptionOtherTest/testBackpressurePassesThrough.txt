@Test public void testBackpressurePassesThrough(){
  PublishProcessor<Object> other=PublishProcessor.create();
  TestSubscriber<Integer> ts=new TestSubscriber<Integer>(0L);
  final AtomicInteger subscribed=new AtomicInteger();
  Flowable.just(1,2,3,4,5).doOnSubscribe(new Consumer<Subscription>(){
    @Override public void accept(    Subscription s){
      subscribed.getAndIncrement();
    }
  }
).delaySubscription(other).subscribe(ts);
  ts.assertNotComplete();
  ts.assertNoErrors();
  ts.assertNoValues();
  Assert.assertEquals("Premature subscription",0,subscribed.get());
  other.onNext(1);
  Assert.assertEquals("No subscription",1,subscribed.get());
  Assert.assertFalse("Not unsubscribed from other",other.hasSubscribers());
  ts.assertNotComplete();
  ts.assertNoErrors();
  ts.assertNoValues();
  ts.request(1);
  ts.assertValue(1);
  ts.assertNoErrors();
  ts.assertNotComplete();
  ts.request(2);
  ts.assertValues(1,2,3);
  ts.assertNoErrors();
  ts.assertNotComplete();
  ts.request(10);
  ts.assertValues(1,2,3,4,5);
  ts.assertNoErrors();
  ts.assertComplete();
}
