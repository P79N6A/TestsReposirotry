@Test public void testErrorIncludesLastValueAsCause(){
  TestObserver<String> to=new TestObserver<String>();
  final TestException e=new TestException("Forced failure");
  Predicate<String> predicate=(new Predicate<String>(){
    @Override public boolean test(    String t){
      throw e;
    }
  }
);
  Observable.just("abc").takeUntil(predicate).subscribe(to);
  to.assertTerminated();
  to.assertNotComplete();
  to.assertError(TestException.class);
}
