@Test public void testThrottle(){
  Subscriber<Integer> subscriber=TestHelper.mockSubscriber();
  TestScheduler s=new TestScheduler();
  PublishProcessor<Integer> o=PublishProcessor.create();
  o.throttleLast(500,TimeUnit.MILLISECONDS,s).subscribe(subscriber);
  s.advanceTimeTo(0,TimeUnit.MILLISECONDS);
  o.onNext(1);
  o.onNext(2);
  s.advanceTimeTo(501,TimeUnit.MILLISECONDS);
  o.onNext(3);
  s.advanceTimeTo(600,TimeUnit.MILLISECONDS);
  o.onNext(4);
  s.advanceTimeTo(700,TimeUnit.MILLISECONDS);
  o.onNext(5);
  o.onNext(6);
  s.advanceTimeTo(1001,TimeUnit.MILLISECONDS);
  o.onNext(7);
  s.advanceTimeTo(1501,TimeUnit.MILLISECONDS);
  o.onComplete();
  InOrder inOrder=inOrder(subscriber);
  inOrder.verify(subscriber).onNext(2);
  inOrder.verify(subscriber).onNext(6);
  inOrder.verify(subscriber).onNext(7);
  inOrder.verify(subscriber).onComplete();
  inOrder.verifyNoMoreInteractions();
}
