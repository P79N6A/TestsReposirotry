@Test public void outputFusedOneSignal(){
  final BehaviorSubject<Integer> bs=BehaviorSubject.createDefault(1);
  bs.observeOn(ImmediateThinScheduler.INSTANCE).concatMap(new Function<Integer,ObservableSource<Integer>>(){
    @Override public ObservableSource<Integer> apply(    Integer v) throws Exception {
      return Observable.just(v + 1);
    }
  }
).subscribeWith(new TestObserver<Integer>(){
    @Override public void onNext(    Integer t){
      super.onNext(t);
      if (t == 2) {
        bs.onNext(2);
      }
    }
  }
).assertValuesOnly(2,3);
}
