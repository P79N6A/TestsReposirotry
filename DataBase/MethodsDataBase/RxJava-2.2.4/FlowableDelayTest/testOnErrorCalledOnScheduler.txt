@Test public void testOnErrorCalledOnScheduler() throws Exception {
  final CountDownLatch latch=new CountDownLatch(1);
  final AtomicReference<Thread> thread=new AtomicReference<Thread>();
  Flowable.<String>error(new Exception()).delay(0,TimeUnit.MILLISECONDS,Schedulers.newThread()).doOnError(new Consumer<Throwable>(){
    @Override public void accept(    Throwable throwable) throws Exception {
      thread.set(Thread.currentThread());
      latch.countDown();
    }
  }
).onErrorResumeNext(Flowable.<String>empty()).subscribe();
  latch.await();
  assertNotEquals(Thread.currentThread(),thread.get());
}
