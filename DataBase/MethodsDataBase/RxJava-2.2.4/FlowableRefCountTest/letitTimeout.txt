@Test public void letitTimeout() throws Exception {
  final int[] subscriptions={0};
  PublishProcessor<Integer> pp=PublishProcessor.create();
  Flowable<Integer> source=pp.doOnSubscribe(new Consumer<Subscription>(){
    @Override public void accept(    Subscription s) throws Exception {
      subscriptions[0]++;
    }
  }
).publish().refCount(1,100,TimeUnit.MILLISECONDS);
  TestSubscriber<Integer> ts1=source.test(0);
  assertEquals(1,subscriptions[0]);
  ts1.cancel();
  assertTrue(pp.hasSubscribers());
  Thread.sleep(200);
  assertFalse(pp.hasSubscribers());
}
