@Test @SuppressWarnings({"rawtypes","unchecked"}) public void reentrantErrorOnError(){
  final AtomicInteger wip=new AtomicInteger();
  final AtomicThrowable error=new AtomicThrowable();
  final Subscriber[] a={null};
  final TestSubscriber ts=new TestSubscriber();
  FlowableSubscriber s=new FlowableSubscriber(){
    @Override public void onSubscribe(    Subscription s){
      ts.onSubscribe(s);
    }
    @Override public void onNext(    Object t){
      ts.onNext(t);
    }
    @Override public void onError(    Throwable t){
      ts.onError(t);
      HalfSerializer.onError(a[0],new IOException(),wip,error);
    }
    @Override public void onComplete(){
      ts.onComplete();
    }
  }
;
  a[0]=s;
  s.onSubscribe(new BooleanSubscription());
  HalfSerializer.onError(s,new TestException(),wip,error);
  ts.assertFailure(TestException.class);
}
