@Test public final void testRecursiveExecution() throws InterruptedException {
  final Scheduler scheduler=getScheduler();
  final Scheduler.Worker inner=scheduler.createWorker();
  try {
    final AtomicInteger i=new AtomicInteger();
    final CountDownLatch latch=new CountDownLatch(1);
    inner.schedule(new Runnable(){
      @Override public void run(){
        if (i.incrementAndGet() < 100) {
          inner.schedule(this);
        }
 else {
          latch.countDown();
        }
      }
    }
);
    latch.await();
    assertEquals(100,i.get());
  }
  finally {
    inner.dispose();
  }
}
