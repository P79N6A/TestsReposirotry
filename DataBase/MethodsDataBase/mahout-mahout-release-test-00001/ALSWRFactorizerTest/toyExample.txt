@ThreadLeakLingering(linger=10) @Test public void toyExample() throws Exception {
  SVDRecommender svdRecommender=new SVDRecommender(dataModel,factorizer);
  RunningAverage avg=new FullRunningAverage();
  LongPrimitiveIterator userIDs=dataModel.getUserIDs();
  while (userIDs.hasNext()) {
    long userID=userIDs.nextLong();
    for (    Preference pref : dataModel.getPreferencesFromUser(userID)) {
      double rating=pref.getValue();
      double estimate=svdRecommender.estimatePreference(userID,pref.getItemID());
      double err=rating - estimate;
      avg.addDatum(err * err);
    }
  }
  double rmse=Math.sqrt(avg.getAverage());
  assertTrue(rmse < 0.2);
}
