/** 
 * tests  {@link ToVectorAndPrefReducer} in the error case that two similarity column vectors a supplied for the sameitem (which should never happen)
 */
@Test public void testToVectorAndPrefReducerExceptionOn2Vectors() throws Exception {
  Reducer<VarIntWritable,VectorOrPrefWritable,VarIntWritable,VectorAndPrefsWritable>.Context context=EasyMock.createMock(Reducer.Context.class);
  EasyMock.replay(context);
  Vector similarityColumn1=new RandomAccessSparseVector(Integer.MAX_VALUE,100);
  Vector similarityColumn2=new RandomAccessSparseVector(Integer.MAX_VALUE,100);
  VectorOrPrefWritable similarities1=new VectorOrPrefWritable(similarityColumn1);
  VectorOrPrefWritable similarities2=new VectorOrPrefWritable(similarityColumn2);
  try {
    new ToVectorAndPrefReducer().reduce(new VarIntWritable(1),Arrays.asList(similarities1,similarities2),context);
    fail();
  }
 catch (  IllegalStateException e) {
  }
  EasyMock.verify(context);
}
