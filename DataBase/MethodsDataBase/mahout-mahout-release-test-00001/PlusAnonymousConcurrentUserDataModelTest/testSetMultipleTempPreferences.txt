/** 
 * Test setting and getting preferences from several concurrent anonymous users
 */
@Test public void testSetMultipleTempPreferences() throws TasteException {
  PlusAnonymousConcurrentUserDataModel instance=getTestableWithoutDelegateData(10);
  Long anonymousUserID1=instance.takeAvailableUser();
  Long anonymousUserID2=instance.takeAvailableUser();
  PreferenceArray tempPrefs1=new GenericUserPreferenceArray(1);
  tempPrefs1.setUserID(0,anonymousUserID1);
  tempPrefs1.setItemID(0,1);
  PreferenceArray tempPrefs2=new GenericUserPreferenceArray(2);
  tempPrefs2.setUserID(0,anonymousUserID2);
  tempPrefs2.setItemID(0,2);
  tempPrefs2.setUserID(1,anonymousUserID2);
  tempPrefs2.setItemID(1,3);
  instance.setTempPrefs(tempPrefs1,anonymousUserID1);
  instance.setTempPrefs(tempPrefs2,anonymousUserID2);
  assertEquals(tempPrefs1,instance.getPreferencesFromUser(anonymousUserID1));
  assertEquals(tempPrefs2,instance.getPreferencesFromUser(anonymousUserID2));
}
