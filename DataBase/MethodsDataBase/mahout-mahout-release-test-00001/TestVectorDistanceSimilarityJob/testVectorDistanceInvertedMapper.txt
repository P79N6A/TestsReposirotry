@Test public void testVectorDistanceInvertedMapper() throws Exception {
  Mapper<WritableComparable<?>,VectorWritable,Text,VectorWritable>.Context context=EasyMock.createMock(Mapper.Context.class);
  Vector expectVec=new DenseVector(new double[]{Math.sqrt(2.0),1.0});
  context.write(new Text("other"),new VectorWritable(expectVec));
  EasyMock.replay(context);
  Vector vector=new NamedVector(new RandomAccessSparseVector(2),"other");
  vector.set(0,2);
  vector.set(1,2);
  VectorDistanceInvertedMapper mapper=new VectorDistanceInvertedMapper();
  setField(mapper,"measure",new EuclideanDistanceMeasure());
  Collection<NamedVector> seedVectors=Lists.newArrayList();
  Vector seed1=new RandomAccessSparseVector(2);
  seed1.set(0,1);
  seed1.set(1,1);
  Vector seed2=new RandomAccessSparseVector(2);
  seed2.set(0,2);
  seed2.set(1,1);
  seedVectors.add(new NamedVector(seed1,"foo"));
  seedVectors.add(new NamedVector(seed2,"foo2"));
  setField(mapper,"seedVectors",seedVectors);
  mapper.map(new IntWritable(123),new VectorWritable(vector),context);
  EasyMock.verify(context);
}
