@Test public void testProjection(){
  Vector v1=new DenseVector(10).assign(Functions.random());
  WeightedVector v2=new WeightedVector(v1,v1,31);
  assertEquals(v1.dot(v1),v2.getWeight(),1.0e-13);
  assertEquals(31,v2.getIndex());
  Matrix y=new DenseMatrix(10,4).assign(Functions.random());
  Matrix q=new QRDecomposition(y.viewPart(0,10,0,3)).getQ();
  Vector nullSpace=y.viewColumn(3).minus(q.times(q.transpose().times(y.viewColumn(3))));
  WeightedVector v3=new WeightedVector(q.viewColumn(0).plus(q.viewColumn(1)),nullSpace,1);
  assertEquals(0,v3.getWeight(),1.0e-13);
  Vector qx=q.viewColumn(0).plus(q.viewColumn(1)).normalize();
  WeightedVector v4=new WeightedVector(qx,q.viewColumn(0),2);
  assertEquals(Math.sqrt(0.5),v4.getWeight(),1.0e-13);
  WeightedVector v5=WeightedVector.project(q.viewColumn(0),qx);
  assertEquals(Math.sqrt(0.5),v5.getWeight(),1.0e-13);
}
