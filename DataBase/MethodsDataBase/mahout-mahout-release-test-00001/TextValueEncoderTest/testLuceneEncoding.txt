@Test public void testLuceneEncoding() throws Exception {
  LuceneTextValueEncoder enc=new LuceneTextValueEncoder("text");
  enc.setAnalyzer(new WhitespaceAnalyzer());
  Vector v1=new DenseVector(200);
  enc.addToVector("test1 and more",v1);
  enc.flush(1,v1);
  assertEquals(6.0,v1.norm(1),0);
  assertEquals(1.0,v1.maxValue(),0);
  v1=new DenseVector(200);
  enc.addToVector("",v1);
  enc.flush(1,v1);
  assertEquals(0.0,v1.norm(1),0);
  assertEquals(0.0,v1.maxValue(),0);
  v1=new DenseVector(200);
  StringBuilder builder=new StringBuilder(5000);
  for (int i=0; i < 1000; i++) {
    builder.append("token_").append(i).append(' ');
  }
  enc.addToVector(builder.toString(),v1);
  enc.flush(1,v1);
  assertEquals(2000.0,v1.norm(1),0);
  assertEquals(19.0,v1.maxValue(),0);
}
