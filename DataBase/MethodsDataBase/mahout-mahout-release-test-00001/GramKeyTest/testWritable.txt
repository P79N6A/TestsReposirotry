@Test public void testWritable() throws Exception {
  byte[] foo=new byte[0];
  byte[] bar={2};
  GramKey one=new GramKey(new Gram("foo",2,Gram.Type.HEAD),foo);
  GramKey two=new GramKey(new Gram("foobar",3,Gram.Type.UNIGRAM),bar);
  assertEquals("foo",one.getPrimaryString());
  assertEquals("foobar",two.getPrimaryString());
  assertEquals(Gram.Type.UNIGRAM,two.getType());
  ByteArrayOutputStream bout=new ByteArrayOutputStream();
  DataOutputStream out=new DataOutputStream(bout);
  try {
    two.write(out);
  }
  finally {
    Closeables.close(out,false);
  }
  byte[] b=bout.toByteArray();
  ByteArrayInputStream bin=new ByteArrayInputStream(b);
  DataInputStream din=new DataInputStream(bin);
  try {
    one.readFields(din);
  }
  finally {
    Closeables.close(din,true);
  }
  assertTrue(Arrays.equals(two.getBytes(),one.getBytes()));
  assertEquals(Gram.Type.UNIGRAM,one.getType());
}
