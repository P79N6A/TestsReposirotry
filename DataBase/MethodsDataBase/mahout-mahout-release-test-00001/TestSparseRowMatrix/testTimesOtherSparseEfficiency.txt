@Test(timeout=50000) public void testTimesOtherSparseEfficiency(){
  Random raw=RandomUtils.getRandom();
  Gamma gen=new Gamma(0.1,0.1,raw);
  Matrix x=new SparseRowMatrix(1000,2000,false);
  for (int i=0; i < 1000; i++) {
    int[] values=new int[1000];
    for (int k=0; k < 1000; k++) {
      int j=(int)Math.min(1000,gen.nextDouble());
      values[j]++;
    }
    for (int j=0; j < 1000; j++) {
      if (values[j] > 0) {
        x.set(i,j,values[j]);
      }
    }
  }
  Vector d=new DenseVector(2000).assign(Functions.random());
  Matrix y=new DiagonalMatrix(d);
  long t0=System.nanoTime();
  Matrix z=x.times(y);
  double elapsedTime=(System.nanoTime() - t0) * 1e-6;
  System.out.printf("done in %.1f ms\n",elapsedTime);
  for (  MatrixSlice row : z) {
    for (    Vector.Element element : row.nonZeroes()) {
      assertEquals(x.get(row.index(),element.index()) * d.get(element.index()),element.get(),1e-12);
    }
  }
}
