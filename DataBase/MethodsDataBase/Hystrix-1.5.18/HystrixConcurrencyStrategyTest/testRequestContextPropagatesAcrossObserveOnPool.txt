/** 
 * If the RequestContext does not get transferred across threads correctly this blows up. No specific assertions are necessary.
 */
@Test public void testRequestContextPropagatesAcrossObserveOnPool(){
  new SimpleCommand().execute();
  new SimpleCommand().observe().map(new Func1<String,String>(){
    @Override public String call(    String s){
      System.out.println("Map => Commands: " + HystrixRequestLog.getCurrentRequest().getAllExecutedCommands());
      return s;
    }
  }
).toBlocking().forEach(new Action1<String>(){
    @Override public void call(    String s){
      System.out.println("Result [" + s + "] => Commands: "+ HystrixRequestLog.getCurrentRequest().getAllExecutedCommands());
    }
  }
);
}
