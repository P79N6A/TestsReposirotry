@Test public void testUpdateMax2(){
  MockedTime time=new MockedTime();
  try {
    HystrixRollingNumber counter=new HystrixRollingNumber(time,200,10);
    counter.updateRollingMax(HystrixRollingNumberEvent.THREAD_MAX_ACTIVE,10);
    counter.updateRollingMax(HystrixRollingNumberEvent.THREAD_MAX_ACTIVE,30);
    counter.updateRollingMax(HystrixRollingNumberEvent.THREAD_MAX_ACTIVE,20);
    assertEquals(1,counter.buckets.size());
    assertEquals(30,counter.buckets.getLast().getMaxUpdater(HystrixRollingNumberEvent.THREAD_MAX_ACTIVE).max());
    assertEquals(30,counter.getRollingMaxValue(HystrixRollingNumberEvent.THREAD_MAX_ACTIVE));
    time.increment(counter.bucketSizeInMillseconds * 3);
    counter.updateRollingMax(HystrixRollingNumberEvent.THREAD_MAX_ACTIVE,30);
    counter.updateRollingMax(HystrixRollingNumberEvent.THREAD_MAX_ACTIVE,30);
    counter.updateRollingMax(HystrixRollingNumberEvent.THREAD_MAX_ACTIVE,50);
    assertEquals(4,counter.buckets.size());
    assertEquals(50,counter.buckets.getLast().getMaxUpdater(HystrixRollingNumberEvent.THREAD_MAX_ACTIVE).max());
    assertEquals(50,counter.getValueOfLatestBucket(HystrixRollingNumberEvent.THREAD_MAX_ACTIVE));
    long values[]=counter.getValues(HystrixRollingNumberEvent.THREAD_MAX_ACTIVE);
    assertEquals(30,values[0]);
    assertEquals(0,values[1]);
    assertEquals(0,values[2]);
    assertEquals(50,values[3]);
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail("Exception: " + e.getMessage());
  }
}
