/** 
 * Short-circuit? : YES Thread/semaphore: SEMAPHORE Fallback: UnsupportedOperationException
 */
@Test public void testExecutionHookSemaphoreShortCircuitNoFallback(){
  assertHooksOnFailFast(new Func0<C>(){
    @Override public C call(){
      return getCircuitOpenCommand(ExecutionIsolationStrategy.SEMAPHORE,FallbackResult.UNIMPLEMENTED);
    }
  }
,new Action1<C>(){
    @Override public void call(    C command){
      TestableExecutionHook hook=command.getBuilder().executionHook;
      assertTrue(hook.commandEmissionsMatch(0,1,0));
      assertTrue(hook.executionEventsMatch(0,0,0));
      assertTrue(hook.fallbackEventsMatch(0,0,0));
      assertEquals(RuntimeException.class,hook.getCommandException().getClass());
      assertNull(hook.getFallbackException());
      assertEquals("onStart - onError - ",hook.executionSequence.toString());
    }
  }
);
}
