/** 
 * Short-circuit? : NO Thread/semaphore: SEMAPHORE Semaphore Permit reached? : NO Execution Result: SUCCESS
 */
@Test public void testExecutionHookSemaphoreSuccess(){
  assertHooksOnSuccess(new Func0<C>(){
    @Override public C call(){
      return getCommand(ExecutionIsolationStrategy.SEMAPHORE,ExecutionResult.SUCCESS,FallbackResult.SUCCESS);
    }
  }
,new Action1<C>(){
    @Override public void call(    C command){
      TestableExecutionHook hook=command.getBuilder().executionHook;
      assertTrue(hook.commandEmissionsMatch(1,0,1));
      assertTrue(hook.executionEventsMatch(1,0,1));
      assertTrue(hook.fallbackEventsMatch(0,0,0));
      assertEquals("onStart - !onRunStart - onExecutionStart - onExecutionEmit - !onRunSuccess - !onComplete - onEmit - onExecutionSuccess - onSuccess - ",hook.executionSequence.toString());
    }
  }
);
}
