@Test public void testErrorHandlingViaFutureException() throws Exception {
  TestCollapserTimer timer=new TestCollapserTimer();
  HystrixCollapser<List<String>,String,String> collapser1=new TestRequestCollapserWithFaultyCreateCommand(timer,"1");
  Future<String> response1=collapser1.queue();
  Future<String> response2=new TestRequestCollapserWithFaultyCreateCommand(timer,"2").queue();
  timer.incrementTime(10);
  try {
    response1.get(1000,TimeUnit.MILLISECONDS);
    fail("we should have received an exception");
  }
 catch (  ExecutionException e) {
  }
  try {
    response2.get(1000,TimeUnit.MILLISECONDS);
    fail("we should have received an exception");
  }
 catch (  ExecutionException e) {
  }
  assertEquals(0,HystrixRequestLog.getCurrentRequest().getAllExecutedCommands().size());
}
