/** 
 * Test that if we try and execute a command with a cacheKey without initializing RequestVariable that it gives an error.
 */
@Test public void testCacheKeyExecutionRequiresRequestVariable(){
  try {
    HystrixRequestContext.setContextOnCurrentThread(null);
    TestCircuitBreaker circuitBreaker=new TestCircuitBreaker();
    SuccessfulCacheableCommand<String> command=new SuccessfulCacheableCommand<String>(circuitBreaker,true,"one");
    assertEquals("one",command.observe().toBlocking().single());
    SuccessfulCacheableCommand<String> command2=new SuccessfulCacheableCommand<String>(circuitBreaker,true,"two");
    assertEquals("two",command2.observe().toBlocking().toFuture().get());
    fail("We expect an exception because cacheKey requires RequestVariable.");
    assertFalse(command.isExecutedInThread());
    assertNull(command.getExecutionException());
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
}
