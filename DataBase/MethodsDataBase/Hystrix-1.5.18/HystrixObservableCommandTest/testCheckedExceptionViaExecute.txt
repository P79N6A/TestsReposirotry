/** 
 * Test a checked Exception being thrown
 */
@Test public void testCheckedExceptionViaExecute(){
  TestCircuitBreaker circuitBreaker=new TestCircuitBreaker();
  CommandWithCheckedException command=new CommandWithCheckedException(circuitBreaker);
  try {
    command.observe().toBlocking().single();
    fail("we expect to receive a " + Exception.class.getSimpleName());
  }
 catch (  Exception e) {
    assertEquals("simulated checked exception message",e.getCause().getMessage());
  }
  assertEquals("simulated checked exception message",command.getFailedExecutionException().getMessage());
  assertTrue(command.getExecutionTimeInMilliseconds() > -1);
  assertTrue(command.isFailedExecution());
  assertNotNull(command.getExecutionException());
  assertCommandExecutionEvents(command,HystrixEventType.FAILURE,HystrixEventType.FALLBACK_MISSING);
  assertSaneHystrixRequestLog(1);
}
