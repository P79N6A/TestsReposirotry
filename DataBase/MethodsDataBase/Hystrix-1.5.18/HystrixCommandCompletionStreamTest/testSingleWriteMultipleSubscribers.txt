@Test public void testSingleWriteMultipleSubscribers() throws InterruptedException {
  CountDownLatch latch1=new CountDownLatch(1);
  Subscriber<HystrixCommandCompletion> subscriber1=getLatchedSubscriber(latch1);
  CountDownLatch latch2=new CountDownLatch(1);
  Subscriber<HystrixCommandCompletion> subscriber2=getLatchedSubscriber(latch2);
  commandStream.observe().take(1).subscribe(subscriber1);
  commandStream.observe().take(1).subscribe(subscriber2);
  ExecutionResult result=ExecutionResult.from(HystrixEventType.SUCCESS).setExecutedInThread();
  HystrixCommandCompletion event=HystrixCommandCompletion.from(result,commandKey,threadPoolKey);
  commandStream.write(event);
  assertTrue(latch1.await(1000,TimeUnit.MILLISECONDS));
  assertTrue(latch2.await(10,TimeUnit.MILLISECONDS));
}
