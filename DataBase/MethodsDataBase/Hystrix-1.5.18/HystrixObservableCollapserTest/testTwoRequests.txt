@Test public void testTwoRequests() throws Exception {
  TestCollapserTimer timer=new TestCollapserTimer();
  HystrixObservableCollapser<String,String,String,String> collapser1=new TestRequestCollapser(timer,1);
  HystrixObservableCollapser<String,String,String,String> collapser2=new TestRequestCollapser(timer,2);
  Future<String> response1=collapser1.observe().toBlocking().toFuture();
  Future<String> response2=collapser2.observe().toBlocking().toFuture();
  timer.incrementTime(10);
  assertEquals("1",response1.get());
  assertEquals("2",response2.get());
  assertEquals(1,HystrixRequestLog.getCurrentRequest().getAllExecutedCommands().size());
  Iterator<HystrixInvokableInfo<?>> cmdIterator=HystrixRequestLog.getCurrentRequest().getAllExecutedCommands().iterator();
  assertEquals(2,cmdIterator.next().getNumberCollapsed());
}
