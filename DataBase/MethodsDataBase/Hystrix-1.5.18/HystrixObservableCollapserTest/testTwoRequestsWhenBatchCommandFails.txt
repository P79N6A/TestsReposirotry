@Test public void testTwoRequestsWhenBatchCommandFails(){
  TestCollapserTimer timer=new TestCollapserTimer();
  HystrixObservableCollapser<String,String,String,String> collapser1=new TestCollapserWithMultipleResponses(timer,1,3,false,true,map1To3And2To2,onMissingError);
  HystrixObservableCollapser<String,String,String,String> collapser2=new TestCollapserWithMultipleResponses(timer,2,3,false,true,map1To3And2To2,onMissingError);
  System.out.println("Starting to observe collapser1");
  Observable<String> result1=collapser1.observe();
  Observable<String> result2=collapser2.observe();
  timer.incrementTime(10);
  TestSubscriber<String> testSubscriber1=new TestSubscriber<String>();
  result1.subscribe(testSubscriber1);
  TestSubscriber<String> testSubscriber2=new TestSubscriber<String>();
  result2.subscribe(testSubscriber2);
  testSubscriber1.awaitTerminalEvent();
  testSubscriber2.awaitTerminalEvent();
  testSubscriber1.assertError(RuntimeException.class);
  testSubscriber1.getOnErrorEvents().get(0).printStackTrace();
  testSubscriber1.assertNoValues();
  testSubscriber2.assertError(RuntimeException.class);
  testSubscriber2.assertNoValues();
}
