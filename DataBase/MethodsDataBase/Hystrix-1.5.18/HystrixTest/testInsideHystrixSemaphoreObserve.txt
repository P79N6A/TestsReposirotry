@Test public void testInsideHystrixSemaphoreObserve() throws Exception {
  HystrixCommand<Boolean> command=new HystrixCommand<Boolean>(Setter.withGroupKey(HystrixCommandGroupKey.Factory.asKey("TestUtil")).andCommandKey(HystrixCommandKey.Factory.asKey("SemaphoreIsolatedCommandName")).andCommandPropertiesDefaults(HystrixCommandProperties.Setter().withExecutionIsolationStrategy(HystrixCommandProperties.ExecutionIsolationStrategy.SEMAPHORE))){
    @Override protected Boolean run(){
      assertEquals("SemaphoreIsolatedCommandName",Hystrix.getCurrentThreadExecutingCommand().name());
      System.out.println("Semaphore Thread : " + Thread.currentThread().getName());
      assertEquals(1,Hystrix.getCommandCount());
      return Hystrix.getCurrentThreadExecutingCommand() != null;
    }
  }
;
  assertTrue(command.toObservable().toBlocking().single());
  assertNull(Hystrix.getCurrentThreadExecutingCommand());
}
