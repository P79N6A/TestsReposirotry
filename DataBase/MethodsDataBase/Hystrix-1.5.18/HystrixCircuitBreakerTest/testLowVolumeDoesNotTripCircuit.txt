/** 
 * When volume of reporting during a statistical window is lower than a defined threshold the circuit will not trip regardless of whatever statistics are calculated.
 */
@Test public void testLowVolumeDoesNotTripCircuit(){
  String key="cmd-I";
  try {
    int sleepWindow=200;
    int lowVolume=5;
    HystrixCommand<Boolean> cmd1=new FailureCommand(key,60,sleepWindow,lowVolume);
    HystrixCircuitBreaker cb=cmd1.circuitBreaker;
    assertTrue(cb.allowRequest());
    assertFalse(cb.isOpen());
    cmd1.execute();
    HystrixCommand<Boolean> cmd2=new FailureCommand(key,1,sleepWindow,lowVolume);
    cmd2.execute();
    HystrixCommand<Boolean> cmd3=new FailureCommand(key,1,sleepWindow,lowVolume);
    cmd3.execute();
    HystrixCommand<Boolean> cmd4=new FailureCommand(key,1,sleepWindow,lowVolume);
    cmd4.execute();
    Thread.sleep(100);
    assertTrue(cb.allowRequest());
    assertFalse(cb.isOpen());
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail("Error occurred: " + e.getMessage());
  }
}
