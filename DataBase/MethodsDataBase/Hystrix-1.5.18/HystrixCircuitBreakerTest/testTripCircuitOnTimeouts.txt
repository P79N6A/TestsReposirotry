/** 
 * Test that if all 'marks' are timeouts that it will trip the circuit.
 */
@Test public void testTripCircuitOnTimeouts(){
  String key="cmd-D";
  try {
    HystrixCommand<Boolean> cmd1=new TimeoutCommand(key);
    HystrixCircuitBreaker cb=cmd1.circuitBreaker;
    assertTrue(cb.allowRequest());
    assertFalse(cb.isOpen());
    cmd1.execute();
    HystrixCommand<Boolean> cmd2=new TimeoutCommand(key);
    cmd2.execute();
    HystrixCommand<Boolean> cmd3=new TimeoutCommand(key);
    cmd3.execute();
    HystrixCommand<Boolean> cmd4=new TimeoutCommand(key);
    cmd4.execute();
    Thread.sleep(100);
    assertFalse(cb.allowRequest());
    assertTrue(cb.isOpen());
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail("Error occurred: " + e.getMessage());
  }
}
