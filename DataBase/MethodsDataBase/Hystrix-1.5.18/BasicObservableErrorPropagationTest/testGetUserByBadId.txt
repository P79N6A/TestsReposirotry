@Test public void testGetUserByBadId() throws NotFoundException {
  try {
    TestSubscriber<User> testSubscriber=new TestSubscriber<User>();
    String badId="";
    userService.getUserById(badId).subscribe(testSubscriber);
    testSubscriber.assertError(BadRequestException.class);
  }
  finally {
    assertEquals(1,HystrixRequestLog.getCurrentRequest().getAllExecutedCommands().size());
    com.netflix.hystrix.HystrixInvokableInfo getUserCommand=getHystrixCommandByKey(COMMAND_KEY);
    assertFalse(getUserCommand.getExecutionEvents().contains(HystrixEventType.FAILURE));
    verify(failoverService,never()).getDefUser();
  }
}
