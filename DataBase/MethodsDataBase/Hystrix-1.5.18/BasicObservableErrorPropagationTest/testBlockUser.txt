@Test public void testBlockUser() throws NotFoundException, ActivationException, OperationException {
  try {
    TestSubscriber<Void> testSubscriber=new TestSubscriber<Void>();
    userService.blockUser("1").subscribe(testSubscriber);
    testSubscriber.assertError(Throwable.class);
    assertTrue(testSubscriber.getOnErrorEvents().size() == 1);
    assertTrue(testSubscriber.getOnErrorEvents().get(0).getCause() instanceof OperationException);
  }
  finally {
    assertEquals(2,HystrixRequestLog.getCurrentRequest().getAllExecutedCommands().size());
    com.netflix.hystrix.HystrixInvokableInfo activateUserCommand=getHystrixCommandByKey("blockUser");
    assertTrue(activateUserCommand.getExecutionEvents().contains(HystrixEventType.FAILURE));
    assertTrue(activateUserCommand.getExecutionEvents().contains(HystrixEventType.FALLBACK_FAILURE));
  }
}
