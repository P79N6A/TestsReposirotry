@Test public void testCancelFutureWithInterruption() throws InterruptedException, ExecutionException {
  InterruptibleCommand cmd=new InterruptibleCommand(new TestCircuitBreaker(),true,true,1000);
  Future<Boolean> f=cmd.queue();
  Thread.sleep(500);
  f.cancel(true);
  Thread.sleep(500);
  try {
    f.get();
    fail("Should have thrown a CancellationException");
  }
 catch (  CancellationException e) {
    assertTrue(cmd.hasBeenInterrupted());
  }
}
