/** 
 * Test that a BadRequestException can be thrown and not count towards errors and bypasses fallback.
 */
@Test public void testBadRequestExceptionViaExecuteInSemaphore(){
  TestCircuitBreaker circuitBreaker=new TestCircuitBreaker();
  BadRequestCommand command1=new BadRequestCommand(circuitBreaker,ExecutionIsolationStrategy.SEMAPHORE);
  try {
    command1.execute();
    fail("we expect to receive a " + HystrixBadRequestException.class.getSimpleName());
  }
 catch (  HystrixBadRequestException e) {
    e.printStackTrace();
  }
  assertCommandExecutionEvents(command1,HystrixEventType.BAD_REQUEST);
  assertEquals(0,circuitBreaker.metrics.getCurrentConcurrentExecutionCount());
  assertSaneHystrixRequestLog(1);
}
