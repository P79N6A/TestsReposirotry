/** 
 * Test timeout in  {@link DatasetVolumeChecker#checkAllVolumes}.
 * @throws Exception
 */
@Test(timeout=60000) public void testTimeout() throws Exception {
  final List<FsVolumeSpi> volumes=Collections.singletonList(makeHungVolume());
  final FsDatasetSpi<FsVolumeSpi> dataset=TestDatasetVolumeChecker.makeDataset(volumes);
  conf.setTimeDuration(DFSConfigKeys.DFS_DATANODE_DISK_CHECK_TIMEOUT_KEY,1,TimeUnit.SECONDS);
  final DatasetVolumeChecker checker=new DatasetVolumeChecker(conf,new FakeTimer());
  Set<FsVolumeSpi> failedVolumes=checker.checkAllVolumes(dataset);
  assertThat(failedVolumes.size(),is(1));
}
