/** 
 * Test checking a closed volume i.e. one which cannot be referenced.
 * @throws Exception
 */
@Test(timeout=60000) public void testCheckingClosedVolume() throws Exception {
  final List<FsVolumeSpi> volumes=Collections.singletonList(makeClosedVolume());
  final FsDatasetSpi<FsVolumeSpi> dataset=TestDatasetVolumeChecker.makeDataset(volumes);
  DatasetVolumeChecker checker=new DatasetVolumeChecker(conf,timer);
  Set<FsVolumeSpi> failedVolumes=checker.checkAllVolumes(dataset);
  assertThat(failedVolumes.size(),is(0));
  assertThat(checker.getNumSyncDatasetChecks(),is(0L));
  verify(volumes.get(0),times(0)).check(anyObject());
}
