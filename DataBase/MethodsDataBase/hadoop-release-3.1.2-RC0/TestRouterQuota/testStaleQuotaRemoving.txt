@Test public void testStaleQuotaRemoving() throws Exception {
  long nsQuota=20;
  long ssQuota=200;
  String stalePath="/stalequota";
  final FileSystem nnFs1=nnContext1.getFileSystem();
  nnFs1.mkdirs(new Path("/testdir9"));
  MountTable mountTable=MountTable.newInstance(stalePath,Collections.singletonMap("ns0","/testdir9"));
  mountTable.setQuota(new RouterQuotaUsage.Builder().quota(nsQuota).spaceQuota(ssQuota).build());
  addMountTable(mountTable);
  RouterQuotaUpdateService updateService=routerContext.getRouter().getQuotaCacheUpdateService();
  updateService.periodicInvoke();
  RouterQuotaManager quotaManager=routerContext.getRouter().getQuotaManager();
  RouterQuotaUsage quota=quotaManager.getQuotaUsage(stalePath);
  assertEquals(nsQuota,quota.getQuota());
  assertEquals(ssQuota,quota.getSpaceQuota());
  removeMountTable(stalePath);
  updateService.periodicInvoke();
  quota=quotaManager.getQuotaUsage(stalePath);
  assertNull(quota);
}
