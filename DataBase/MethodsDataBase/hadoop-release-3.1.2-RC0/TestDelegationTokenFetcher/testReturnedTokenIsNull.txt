/** 
 * If token returned is null, saveDelegationToken should not throw nullPointerException
 */
@Test public void testReturnedTokenIsNull() throws Exception {
  WebHdfsFileSystem fs=mock(WebHdfsFileSystem.class);
  doReturn(null).when(fs).getDelegationToken(anyString());
  Path p=new Path(f.getRoot().getAbsolutePath(),tokenFile);
  DelegationTokenFetcher.saveDelegationToken(conf,fs,null,p);
  Assert.assertFalse(p.getFileSystem(conf).exists(p));
}
