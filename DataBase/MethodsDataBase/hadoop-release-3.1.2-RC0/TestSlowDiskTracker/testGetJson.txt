@Test public void testGetJson() throws Exception {
  addSlowDiskForTesting("dn1","disk1",ImmutableMap.of(DiskOp.METADATA,1.1,DiskOp.READ,1.8));
  addSlowDiskForTesting("dn1","disk2",ImmutableMap.of(DiskOp.READ,1.3));
  addSlowDiskForTesting("dn2","disk2",ImmutableMap.of(DiskOp.WRITE,1.1));
  addSlowDiskForTesting("dn3","disk1",ImmutableMap.of(DiskOp.WRITE,1.1));
  tracker.updateSlowDiskReportAsync(timer.monotonicNow());
  GenericTestUtils.waitFor(new Supplier<Boolean>(){
    @Override public Boolean get(){
      return tracker.getSlowDiskReportAsJsonString() != null;
    }
  }
,500,5000);
  ArrayList<DiskLatency> jsonReport=getAndDeserializeJson(tracker.getSlowDiskReportAsJsonString());
  assertThat(jsonReport.size(),is(4));
  assertTrue(isDiskInReports(jsonReport,"dn1","disk1",DiskOp.METADATA,1.1));
  assertTrue(isDiskInReports(jsonReport,"dn1","disk1",DiskOp.READ,1.8));
  assertTrue(isDiskInReports(jsonReport,"dn1","disk2",DiskOp.READ,1.3));
  assertTrue(isDiskInReports(jsonReport,"dn2","disk2",DiskOp.WRITE,1.1));
  assertTrue(isDiskInReports(jsonReport,"dn3","disk1",DiskOp.WRITE,1.1));
}
