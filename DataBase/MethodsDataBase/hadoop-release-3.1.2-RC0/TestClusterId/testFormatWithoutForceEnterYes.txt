/** 
 * Test namenode format with -format option when a non empty name directory exists. Enter Y when prompted and the format should succeed.
 * @throws IOException
 * @throws InterruptedException
 */
@Test public void testFormatWithoutForceEnterYes() throws IOException, InterruptedException {
  File data=new File(hdfsDir,"file");
  if (!data.mkdirs()) {
    fail("Failed to create dir " + data.getPath());
  }
  InputStream origIn=System.in;
  ByteArrayInputStream bins=new ByteArrayInputStream("Y\n".getBytes());
  System.setIn(bins);
  String[] argv={"-format"};
  try {
    NameNode.createNameNode(argv,config);
    fail("createNameNode() did not call System.exit()");
  }
 catch (  ExitException e) {
    assertEquals("Format should have succeeded",0,e.status);
  }
  System.setIn(origIn);
  String cid=getClusterId(config);
  assertTrue("Didn't get new ClusterId",(cid != null && !cid.equals("")));
}
