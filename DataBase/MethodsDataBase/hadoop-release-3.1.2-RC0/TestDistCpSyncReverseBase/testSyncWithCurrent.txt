/** 
 * Test the case that "current" is snapshotted as "s2".
 * @throws Exception
 */
@Test public void testSyncWithCurrent() throws Exception {
  optionsBuilder.withUseRdiff(".","s1");
  if (isSrcNotSameAsTgt) {
    initData(source);
  }
  initData(target);
  enableAndCreateFirstSnapshot();
  changeData(target);
  Assert.assertTrue(sync());
  final Path spath=new Path(source,HdfsConstants.DOT_SNAPSHOT_DIR + Path.SEPARATOR + "s1");
  Assert.assertEquals(spath,distCpContext.getSourcePaths().get(0));
}
