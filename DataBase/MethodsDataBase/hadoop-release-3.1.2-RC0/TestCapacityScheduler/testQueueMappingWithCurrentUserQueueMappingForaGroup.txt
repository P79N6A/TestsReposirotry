@Test public void testQueueMappingWithCurrentUserQueueMappingForaGroup() throws Exception {
  CapacitySchedulerConfiguration config=new CapacitySchedulerConfiguration();
  config.setClass(YarnConfiguration.RM_SCHEDULER,CapacityScheduler.class,ResourceScheduler.class);
  setupQueueConfiguration(config);
  config.setClass(CommonConfigurationKeys.HADOOP_SECURITY_GROUP_MAPPING,TestGroupsCaching.FakeunPrivilegedGroupMapping.class,ShellBasedUnixGroupsMapping.class);
  config.set(CommonConfigurationKeys.HADOOP_USER_GROUP_STATIC_OVERRIDES,"a1" + "=" + "agroup"+ "");
  config.set(CapacitySchedulerConfiguration.QUEUE_MAPPING,"g:agroup:%user");
  MockRM rm=new MockRM(config);
  rm.start();
  CapacityScheduler cs=((CapacityScheduler)rm.getResourceScheduler());
  cs.start();
  RMApp app=rm.submitApp(GB,"appname","a1",null,"default");
  List<ApplicationAttemptId> appsInA1=cs.getAppsInQueue("a1");
  assertEquals(1,appsInA1.size());
}
