@Test public void testReplaceConflictResolution() throws Exception {
  FileSystem mockS3=getMockS3A();
  pathExists(mockS3,OUTPUT_PATH);
  getJob().getConfiguration().set(FS_S3A_COMMITTER_STAGING_CONFLICT_MODE,CONFLICT_MODE_REPLACE);
  final DirectoryStagingCommitter committer=newJobCommitter();
  committer.setupJob(getJob());
  verifyNoMoreInteractions(mockS3);
  Mockito.reset(mockS3);
  pathExists(mockS3,OUTPUT_PATH);
  canDelete(mockS3,OUTPUT_PATH);
  committer.commitJob(getJob());
  verifyDeleted(mockS3,OUTPUT_PATH);
  verifyCompletion(mockS3);
}
