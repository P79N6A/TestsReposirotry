@Test public void testInMemoryBackedProvider() throws Exception {
  Configuration conf=new Configuration();
  conf.set(YarnConfiguration.SCHEDULER_CONFIGURATION_STORE_CLASS,YarnConfiguration.MEMORY_CONFIGURATION_STORE);
  confProvider.init(conf);
  assertNull(confProvider.loadConfiguration(conf).get("yarn.scheduler.capacity.root.a.goodKey"));
  confProvider.logAndApplyMutation(TEST_USER,goodUpdate);
  confProvider.confirmPendingMutation(true);
  assertEquals("goodVal",confProvider.loadConfiguration(conf).get("yarn.scheduler.capacity.root.a.goodKey"));
  assertNull(confProvider.loadConfiguration(conf).get("yarn.scheduler.capacity.root.a.badKey"));
  confProvider.logAndApplyMutation(TEST_USER,badUpdate);
  confProvider.confirmPendingMutation(false);
  assertNull(confProvider.loadConfiguration(conf).get("yarn.scheduler.capacity.root.a.badKey"));
}
