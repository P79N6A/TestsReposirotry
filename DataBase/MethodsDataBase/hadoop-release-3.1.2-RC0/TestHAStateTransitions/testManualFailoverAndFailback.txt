/** 
 * Tests manual failover back and forth between two NameNodes.
 */
@Test(timeout=300000) public void testManualFailoverAndFailback() throws Exception {
  Configuration conf=new Configuration();
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).nnTopology(MiniDFSNNTopology.simpleHATopology()).numDataNodes(1).build();
  try {
    cluster.waitActive();
    testManualFailoverFailback(cluster,conf,0);
  }
  finally {
    cluster.shutdown();
  }
}
