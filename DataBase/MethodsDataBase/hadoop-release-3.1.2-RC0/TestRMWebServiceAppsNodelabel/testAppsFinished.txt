@Test public void testAppsFinished() throws JSONException, Exception {
  rm.start();
  MockNM amNodeManager=rm.registerNode("127.0.0.1:1234",2048);
  amNodeManager.nodeHeartbeat(true);
  RMApp killedApp=rm.submitApp(AM_CONTAINER_MB);
  rm.killApp(killedApp.getApplicationId());
  WebResource r=resource();
  ClientResponse response=r.path("ws").path("v1").path("cluster").path("apps").accept(MediaType.APPLICATION_JSON).get(ClientResponse.class);
  JSONObject json=response.getEntity(JSONObject.class);
  JSONObject apps=json.getJSONObject("apps");
  assertEquals("incorrect number of elements",1,apps.length());
  try {
    apps.getJSONArray("app").getJSONObject(0).getJSONObject("resourceInfo");
    fail("resourceInfo object shouldn't be available for finished apps");
  }
 catch (  Exception e) {
    assertTrue("resourceInfo shouldn't be available for finished apps",true);
  }
  rm.stop();
}
