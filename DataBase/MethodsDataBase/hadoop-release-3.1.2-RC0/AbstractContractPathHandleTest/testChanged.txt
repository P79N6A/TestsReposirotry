@Test public void testChanged() throws IOException {
  describe("verify open(PathHandle, changed(*))");
  assumeSupportsContentCheck();
  HandleOpt.Data data=HandleOpt.getOpt(HandleOpt.Data.class,opts).orElseThrow(IllegalArgumentException::new);
  FileStatus stat=testFile(B1);
  appendFile(getFileSystem(),stat.getPath(),B2);
  byte[] b12=Arrays.copyOf(B1,B1.length + B2.length);
  System.arraycopy(B2,0,b12,B1.length,B2.length);
  verifyFileContents(getFileSystem(),stat.getPath(),b12);
  PathHandle fd=getHandleOrSkip(stat);
  try (FSDataInputStream in=getFileSystem().open(fd)){
    assertTrue("Failed to detect content change",data.allowChange());
    verifyRead(in,b12,0,b12.length);
  }
 catch (  InvalidPathHandleException e) {
    assertFalse("Failed to allow content change",data.allowChange());
  }
}
