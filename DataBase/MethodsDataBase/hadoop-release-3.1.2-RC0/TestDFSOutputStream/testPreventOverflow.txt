/** 
 * This tests preventing overflows of package size and bodySize. <p> See also https://issues.apache.org/jira/browse/HDFS-11608. </p>
 * @throws IOException
 * @throws SecurityException
 * @throws NoSuchFieldException
 * @throws InvocationTargetException
 * @throws IllegalArgumentException
 * @throws IllegalAccessException
 * @throws NoSuchMethodException
 */
@Test(timeout=60000) public void testPreventOverflow() throws IOException, NoSuchFieldException, SecurityException, IllegalAccessException, IllegalArgumentException, InvocationTargetException, NoSuchMethodException {
  final int defaultWritePacketSize=DFS_CLIENT_WRITE_PACKET_SIZE_DEFAULT;
  int configuredWritePacketSize=defaultWritePacketSize;
  int finalWritePacketSize=defaultWritePacketSize;
  runAdjustChunkBoundary(configuredWritePacketSize,finalWritePacketSize);
  configuredWritePacketSize=1000 * 1024 * 1024;
  finalWritePacketSize=PacketReceiver.MAX_PACKET_SIZE;
  runAdjustChunkBoundary(configuredWritePacketSize,finalWritePacketSize);
}
