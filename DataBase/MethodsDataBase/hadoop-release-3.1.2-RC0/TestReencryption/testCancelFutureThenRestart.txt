@Test public void testCancelFutureThenRestart() throws Exception {
  final Path zoneParent=new Path("/zones");
  final Path zone=new Path(zoneParent,"zone");
  cancelFutureDuringReencryption(zone);
  restartClusterDisableReencrypt();
  RemoteIterator<ZoneReencryptionStatus> it=dfsAdmin.listReencryptionStatus();
  ZoneReencryptionStatus zs=it.next();
  assertEquals(zone.toString(),zs.getZoneName());
  assertEquals(ZoneReencryptionStatus.State.Completed,zs.getState());
  assertTrue(zs.isCanceled());
  verifyZoneCompletionTime(zs);
  assertEquals(0,zs.getFilesReencrypted());
  getEzManager().resumeReencryptForTesting();
  dfsAdmin.reencryptEncryptionZone(zone,ReencryptAction.START);
  waitForZoneCompletes(zone.toString());
  it=dfsAdmin.listReencryptionStatus();
  zs=it.next();
  assertEquals(zone.toString(),zs.getZoneName());
  assertEquals(ZoneReencryptionStatus.State.Completed,zs.getState());
  assertFalse(zs.isCanceled());
  verifyZoneCompletionTime(zs);
  assertEquals(10,zs.getFilesReencrypted());
}
