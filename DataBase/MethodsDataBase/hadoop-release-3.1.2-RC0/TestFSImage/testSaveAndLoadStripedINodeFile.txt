/** 
 * Test if a INodeFile with BlockInfoStriped can be saved by FSImageSerialization and loaded by FSImageFormat#Loader.
 */
@Test public void testSaveAndLoadStripedINodeFile() throws IOException {
  Configuration conf=new Configuration();
  MiniDFSCluster cluster=null;
  try {
    cluster=new MiniDFSCluster.Builder(conf).build();
    cluster.waitActive();
    DFSTestUtil.enableAllECPolicies(cluster.getFileSystem());
    testSaveAndLoadStripedINodeFile(cluster.getNamesystem(),conf,false);
  }
  finally {
    if (cluster != null) {
      cluster.shutdown();
    }
  }
}
