@Test(timeout=300000) public void testFileStatusAcrossNNRestart() throws IOException {
  final int len=1024;
  final Path normalFile=new Path("/","normalFile");
  DFSTestUtil.createFile(fs,normalFile,len,(short)1,0xFEED);
  final Path ecDir=new Path("/ecdir");
  final Path ecFile=new Path(ecDir,"ecFile");
  fs.mkdirs(ecDir);
  fs.setErasureCodingPolicy(ecDir,ecPolicy.getName());
  DFSTestUtil.createFile(fs,ecFile,len,(short)1,0xFEED);
  ContractTestUtils.assertNotErasureCoded(fs,normalFile);
  ContractTestUtils.assertErasureCoded(fs,ecFile);
  cluster.restartNameNode(true);
  ContractTestUtils.assertNotErasureCoded(fs,normalFile);
  ContractTestUtils.assertErasureCoded(fs,ecFile);
}
