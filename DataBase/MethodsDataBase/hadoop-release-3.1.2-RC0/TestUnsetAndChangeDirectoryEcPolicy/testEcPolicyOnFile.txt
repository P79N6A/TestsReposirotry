@Test public void testEcPolicyOnFile() throws Exception {
  final Path ecFilePath=new Path("/striped_file");
  final int fileLen=blockGroupSize * 2;
  DFSTestUtil.createFile(fs,ecFilePath,fileLen,(short)1,0L);
  try {
    fs.setErasureCodingPolicy(ecFilePath,ecPolicy.getName());
    fail("IOException should be thrown for setting EC policy on file");
  }
 catch (  IOException e) {
    assertExceptionContains("Attempt to set an erasure coding policy " + "for a file " + ecFilePath,e);
  }
  try {
    fs.unsetErasureCodingPolicy(ecFilePath);
    fail("IOException should be thrown for unsetting EC policy on file");
  }
 catch (  IOException e) {
    assertExceptionContains("Cannot unset an erasure coding policy on a file " + ecFilePath,e);
  }
}
