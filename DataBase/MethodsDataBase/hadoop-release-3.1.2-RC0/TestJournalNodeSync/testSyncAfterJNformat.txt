@Test(timeout=300_000) public void testSyncAfterJNformat() throws Exception {
  File firstJournalDir=jCluster.getJournalDir(0,jid);
  File firstJournalCurrentDir=new StorageDirectory(firstJournalDir).getCurrentDir();
  File secondJournalDir=jCluster.getJournalDir(1,jid);
  File secondJournalCurrentDir=new StorageDirectory(secondJournalDir).getCurrentDir();
  long[] startTxIds=new long[10];
  startTxIds[0]=generateEditLog(1);
  startTxIds[1]=generateEditLog(2);
  startTxIds[2]=generateEditLog(4);
  startTxIds[3]=generateEditLog(6);
  Journal journal1=jCluster.getJournalNode(0).getOrCreateJournal(jid);
  NamespaceInfo nsInfo=journal1.getStorage().getNamespaceInfo();
  for (  File file : firstJournalCurrentDir.listFiles()) {
    file.delete();
  }
  journal1.format(nsInfo);
  for (int i=4; i < 10; i++) {
    startTxIds[i]=generateEditLog(5);
  }
  List<File> missingLogs=Lists.newArrayList();
  for (int i=0; i < 10; i++) {
    EditLogFile logFile=getLogFile(secondJournalCurrentDir,startTxIds[i],false);
    missingLogs.add(new File(firstJournalCurrentDir,logFile.getFile().getName()));
  }
  GenericTestUtils.waitFor(editLogExists(missingLogs),500,30000);
}
