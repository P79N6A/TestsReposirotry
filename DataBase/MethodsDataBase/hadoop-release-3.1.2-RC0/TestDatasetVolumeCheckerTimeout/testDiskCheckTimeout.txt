@Test(timeout=300000) public void testDiskCheckTimeout() throws Exception {
  LOG.info("Executing {}",testName.getMethodName());
  final FsVolumeSpi volume=makeSlowVolume();
  final DatasetVolumeChecker checker=new DatasetVolumeChecker(conf,new FakeTimer());
  final AtomicLong numCallbackInvocations=new AtomicLong(0);
  lock.lock();
  boolean result=checker.checkVolume(volume,new DatasetVolumeChecker.Callback(){
    @Override public void call(    Set<FsVolumeSpi> healthyVolumes,    Set<FsVolumeSpi> failedVolumes){
      numCallbackInvocations.incrementAndGet();
      assertThat(healthyVolumes.size(),is(0));
      assertThat(failedVolumes.size(),is(1));
    }
  }
);
  Thread.sleep(DISK_CHECK_TIME);
  lock.unlock();
  verify(volume,times(1)).check(anyObject());
  assertThat(numCallbackInvocations.get(),is(1L));
}
