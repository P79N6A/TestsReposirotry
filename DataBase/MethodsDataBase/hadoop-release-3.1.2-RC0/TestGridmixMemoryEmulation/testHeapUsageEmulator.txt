/** 
 * Test  {@link TotalHeapUsageEmulatorPlugin}'s core heap usage emulation  engine.
 */
@Test public void testHeapUsageEmulator() throws IOException {
  FakeHeapUsageEmulatorCore heapEmulator=new FakeHeapUsageEmulatorCore();
  long testSizeInMB=10;
  long previousHeap=heapEmulator.getHeapUsageInMB();
  heapEmulator.load(testSizeInMB);
  long currentHeap=heapEmulator.getHeapUsageInMB();
  assertEquals("Default heap emulator failed to load 10mb",previousHeap + testSizeInMB,currentHeap);
  heapEmulator.resetFake();
  assertEquals("Default heap emulator failed to reset",0,heapEmulator.getHeapUsageInMB());
}
