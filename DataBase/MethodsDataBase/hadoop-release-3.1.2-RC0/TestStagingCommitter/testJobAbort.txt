@Test public void testJobAbort() throws Exception {
  Path jobAttemptPath=jobCommitter.getJobAttemptPath(job);
  FileSystem fs=jobAttemptPath.getFileSystem(conf);
  Set<String> uploads=runTasks(job,4,3);
  assertPathExists(fs,"No job attempt path",jobAttemptPath);
  jobCommitter.abortJob(job,JobStatus.State.KILLED);
  assertEquals("Should have committed no uploads: " + jobCommitter,0,results.getCommits().size());
  assertEquals("Should have deleted no uploads: " + jobCommitter,0,results.getDeletes().size());
  assertEquals("Should have aborted all uploads: " + jobCommitter,uploads,getAbortedIds(results.getAborts()));
  assertPathDoesNotExist(fs,"jobAttemptPath not deleted",jobAttemptPath);
}
