@Test public void testTaskInitializeFailure() throws Exception {
  committer.setupTask(tac);
  errors.failOnInit(1);
  Path attemptPath=committer.getTaskAttemptPath(tac);
  FileSystem fs=attemptPath.getFileSystem(conf);
  writeOutputFile(tac.getTaskAttemptID(),attemptPath,UUID.randomUUID().toString(),10);
  writeOutputFile(tac.getTaskAttemptID(),attemptPath,UUID.randomUUID().toString(),10);
  intercept(AWSClientIOException.class,"Fail on init 1","Should fail during init",() -> committer.commitTask(tac));
  assertEquals("Should have initialized one file upload",1,results.getUploads().size());
  assertEquals("Should abort the upload",new HashSet<>(results.getUploads()),getAbortedIds(results.getAborts()));
  assertPathDoesNotExist(fs,"Should remove the attempt path",attemptPath);
}
