@Test public void testUpgradeSingleInstance(){
  Service goodService=ServiceClientTest.buildLiveGoodService();
  Component comp=goodService.getComponents().iterator().next();
  Container container=comp.getContainers().iterator().next();
  container.setState(ContainerState.UPGRADING);
  Service serviceStatus=mockServerClient.getGoodServiceStatus();
  serviceStatus.setState(ServiceState.UPGRADING);
  Container liveContainer=serviceStatus.getComponents().iterator().next().getContainers().iterator().next();
  liveContainer.setState(ContainerState.NEEDS_UPGRADE);
  mockServerClient.setExpectedInstances(Sets.newHashSet(liveContainer.getComponentInstanceName()));
  final Response actual=apiServer.updateComponentInstance(request,goodService.getName(),comp.getName(),container.getComponentInstanceName(),container);
  assertEquals("Instance upgrade is ",Response.status(Status.ACCEPTED).build().getStatus(),actual.getStatus());
}
