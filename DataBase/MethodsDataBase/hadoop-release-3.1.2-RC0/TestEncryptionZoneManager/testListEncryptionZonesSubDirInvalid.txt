@Test public void testListEncryptionZonesSubDirInvalid() throws Exception {
  INodeDirectory thirdINode=new INodeDirectory(3L,"third".getBytes(),defaultPermission,System.currentTimeMillis());
  when(this.mockedDir.getInode(3L)).thenReturn(thirdINode);
  thirdINode.setParent(this.secondINode);
  this.ezManager=new EncryptionZoneManager(mockedDir,new Configuration());
  this.ezManager.addEncryptionZone(1L,CipherSuite.AES_CTR_NOPADDING,CryptoProtocolVersion.ENCRYPTION_ZONES,"test_key");
  this.ezManager.addEncryptionZone(3L,CipherSuite.AES_CTR_NOPADDING,CryptoProtocolVersion.ENCRYPTION_ZONES,"test_key");
  this.firstINode.setParent(rootINode);
  when(mockedDir.getINodesInPath("/first",DirOp.READ_LINK)).thenReturn(mockedINodesInPath);
  when(mockedINodesInPath.getLastINode()).thenReturn(firstINode);
  BatchedListEntries<EncryptionZone> result=ezManager.listEncryptionZones(0);
  assertEquals(1,result.size());
  assertEquals(1L,result.get(0).getId());
  assertEquals("/first",result.get(0).getPath());
}
