@Test public void testRenameAcrossMounts4() throws IOException {
  Configuration conf2=new Configuration(conf);
  conf2.set(Constants.CONFIG_VIEWFS_RENAME_STRATEGY,ViewFileSystem.RenameStrategy.SAME_FILESYSTEM_ACROSS_MOUNTPOINT.toString());
  FileContext fcView2=FileContext.getFileContext(FsConstants.VIEWFS_URI,conf2);
  String userPath="/user/foo";
  fileContextTestHelper.createFile(fcView2,userPath);
  String anotherMountPath="/data/fooBar";
  Path anotherDst=new Path(anotherMountPath);
  fcView2.rename(new Path(userPath),anotherDst);
  ContractTestUtils.assertPathDoesNotExist(fcView2,"src should not exist after rename",new Path(userPath));
  ContractTestUtils.assertPathDoesNotExist(fcTarget,"src should not exist after rename",new Path(targetTestRoot,"user/foo"));
  ContractTestUtils.assertIsFile(fcView2,fileContextTestHelper.getTestRootPath(fcView2,anotherMountPath));
  ContractTestUtils.assertIsFile(fcView2,new Path(targetTestRoot,"data/fooBar"));
}
