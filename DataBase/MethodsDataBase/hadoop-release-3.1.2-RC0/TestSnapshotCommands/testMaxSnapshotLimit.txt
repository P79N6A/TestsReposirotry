@Test public void testMaxSnapshotLimit() throws Exception {
  DFSTestUtil.FsShellRun("-mkdir /sub3",conf);
  DFSTestUtil.DFSAdminRun("-allowSnapshot /sub3",0,"Allowing snapshot " + "on /sub3 succeeded",conf);
  DFSTestUtil.FsShellRun("-createSnapshot /sub3 sn0",0,"Created snapshot /sub3/.snapshot/sn0",conf);
  DFSTestUtil.FsShellRun("-createSnapshot /sub3 sn1",0,"Created snapshot /sub3/.snapshot/sn1",conf);
  DFSTestUtil.FsShellRun("-createSnapshot /sub3 sn2",0,"Created snapshot /sub3/.snapshot/sn2",conf);
  DFSTestUtil.FsShellRun("-createSnapshot /sub3 sn3",1,"Failed to add snapshot: there are already 3 snapshot(s) and " + "the max snapshot limit is 3",conf);
}
