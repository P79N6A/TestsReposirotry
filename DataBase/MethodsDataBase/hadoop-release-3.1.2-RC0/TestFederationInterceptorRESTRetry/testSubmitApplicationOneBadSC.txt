/** 
 * This test validates the correctness of SubmitApplication in case the cluster is composed of only 1 bad SubCluster.
 */
@Test public void testSubmitApplicationOneBadSC() throws YarnException, IOException, InterruptedException {
  setupCluster(Arrays.asList(bad2));
  ApplicationId appId=ApplicationId.newInstance(System.currentTimeMillis(),1);
  ApplicationSubmissionContextInfo context=new ApplicationSubmissionContextInfo();
  context.setApplicationId(appId.toString());
  Response response=interceptor.submitApplication(context,null);
  Assert.assertEquals(SERVICE_UNAVAILABLE,response.getStatus());
  Assert.assertEquals(FederationPolicyUtils.NO_ACTIVE_SUBCLUSTER_AVAILABLE,response.getEntity());
}
