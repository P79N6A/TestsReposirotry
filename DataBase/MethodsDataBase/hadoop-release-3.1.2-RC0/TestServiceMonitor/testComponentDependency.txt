@Test public void testComponentDependency() throws Exception {
  ApplicationId applicationId=ApplicationId.newInstance(123456,1);
  Service exampleApp=new Service();
  exampleApp.setVersion("v1");
  exampleApp.setId(applicationId.toString());
  exampleApp.setName("testComponentDependency");
  exampleApp.addComponent(createComponent("compa",1,"sleep 1000"));
  Component compb=createComponent("compb",1,"sleep 1000");
  compb.setDependencies(Collections.singletonList("compa"));
  exampleApp.addComponent(compb);
  MockServiceAM am=new MockServiceAM(exampleApp);
  am.init(conf);
  am.start();
  Assert.assertTrue(am.getComponent("compa").areDependenciesReady());
  Assert.assertFalse(am.getComponent("compb").areDependenciesReady());
  am.feedContainerToComp(exampleApp,1,"compa");
  am.waitForDependenciesSatisfied("compb");
  am.feedContainerToComp(exampleApp,2,"compb");
  am.flexComponent("compa",2);
  am.waitForNumDesiredContainers("compa",2);
  Assert.assertFalse(am.getComponent("compb").areDependenciesReady());
  am.stop();
}
