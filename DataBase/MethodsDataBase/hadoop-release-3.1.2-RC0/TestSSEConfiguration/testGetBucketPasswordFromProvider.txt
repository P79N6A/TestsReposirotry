@Test public void testGetBucketPasswordFromProvider() throws Throwable {
  final Configuration conf=confWithProvider();
  URI bucketURI=new URI("s3a://" + BUCKET + "/");
  setProviderOption(conf,SECRET_KEY,"unbucketed");
  String bucketedKey=String.format(BUCKET_PATTERN,BUCKET,SECRET_KEY);
  setProviderOption(conf,bucketedKey,SECRET);
  String overrideVal;
  overrideVal="";
  assertSecretKeyEquals(conf,BUCKET,SECRET,overrideVal);
  assertSecretKeyEquals(conf,bucketURI.getHost(),SECRET,"");
  assertSecretKeyEquals(conf,bucketURI.getHost(),"overidden","overidden");
}
