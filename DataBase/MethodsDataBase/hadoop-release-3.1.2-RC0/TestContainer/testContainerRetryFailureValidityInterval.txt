@Test public void testContainerRetryFailureValidityInterval() throws Exception {
  ContainerRetryContext containerRetryContext=ContainerRetryContext.newInstance(ContainerRetryPolicy.RETRY_ON_ALL_ERRORS,null,1,0,10);
  WrappedContainer wc=null;
  try {
    wc=new WrappedContainer(25,314159265358980L,4200,"test",containerRetryContext);
    ControlledClock clock=new ControlledClock();
    wc.getRetryPolicy().setClock(clock);
    wc.initContainer();
    wc.localizeResources();
    wc.launchContainer();
    wc.containerFailed(12);
    assertEquals(ContainerState.RUNNING,wc.c.getContainerState());
    clock.setTime(20);
    wc.containerFailed(12);
    assertEquals(ContainerState.RUNNING,wc.c.getContainerState());
    clock.setTime(40);
    wc.containerFailed(12);
    assertEquals(ContainerState.RUNNING,wc.c.getContainerState());
    clock.setTime(45);
    wc.containerFailed(12);
    assertEquals(ContainerState.EXITED_WITH_FAILURE,wc.c.getContainerState());
  }
  finally {
    if (wc != null) {
      wc.finished();
    }
  }
}
