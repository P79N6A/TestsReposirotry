@Test public void testGetNodeResourcesConfigErrors() throws Exception {
  Configuration conf=new YarnConfiguration();
  Map<String,Resource> testRun=new HashMap<>();
  setupResourceTypes(conf,"resource-types-4.xml");
  String invalidNodeResFiles[]={"node-resources-error-1.xml"};
  for (  String resourceFile : invalidNodeResFiles) {
    ResourceUtils.resetNodeResources();
    File dest=null;
    try {
      File source=new File(conf.getClassLoader().getResource(resourceFile).getFile());
      dest=new File(source.getParent(),"node-resources.xml");
      FileUtils.copyFile(source,dest);
      Map<String,ResourceInformation> actual=ResourceUtils.getNodeResourceInformation(conf);
      Assert.fail("Expected error with file " + resourceFile);
    }
 catch (    NullPointerException ne) {
      throw ne;
    }
catch (    Exception e) {
      if (dest != null) {
        dest.delete();
      }
    }
  }
}
