@Test(timeout=10000L) public void testAuxPathHandler() throws Exception {
  File testDir=GenericTestUtils.getTestDir(GenericTestUtils.getTestDir(TestContainerManager.class.getSimpleName() + "LocDir").getAbsolutePath());
  testDir.mkdirs();
  File testFile=new File(testDir,"test");
  testFile.createNewFile();
  YarnConfiguration configuration=new YarnConfiguration();
  configuration.set(YarnConfiguration.NM_LOCAL_DIRS,testDir.getAbsolutePath());
  LocalDirsHandlerService spyDirHandlerService=Mockito.spy(new LocalDirsHandlerService());
  spyDirHandlerService.init(configuration);
  when(spyDirHandlerService.getConfig()).thenReturn(configuration);
  AuxiliaryLocalPathHandler auxiliaryLocalPathHandler=new ContainerManagerImpl.AuxiliaryLocalPathHandlerImpl(spyDirHandlerService);
  Path p=auxiliaryLocalPathHandler.getLocalPathForRead("test");
  assertTrue(p != null && !spyDirHandlerService.getLocalDirsForRead().isEmpty());
  when(spyDirHandlerService.getLocalDirsForRead()).thenReturn(new ArrayList<String>());
  try {
    auxiliaryLocalPathHandler.getLocalPathForRead("test");
    fail("Should not have passed!");
  }
 catch (  IOException e) {
    Assert.assertTrue(e.getMessage().contains("Could not find"));
  }
 finally {
    testFile.delete();
    testDir.delete();
  }
}
