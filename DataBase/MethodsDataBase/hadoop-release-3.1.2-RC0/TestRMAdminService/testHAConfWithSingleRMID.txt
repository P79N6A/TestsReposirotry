/** 
 * Test that a configuration with a single RM fails.
 */
@Test public void testHAConfWithSingleRMID(){
  Configuration conf=new Configuration(configuration);
  conf.setBoolean(YarnConfiguration.RM_HA_ENABLED,true);
  conf.setBoolean(YarnConfiguration.AUTO_FAILOVER_ENABLED,true);
  conf.setBoolean(YarnConfiguration.AUTO_FAILOVER_EMBEDDED,true);
  conf.set(YarnConfiguration.RM_HA_IDS,"rm1");
  int base=100;
  for (  String confKey : YarnConfiguration.getServiceAddressConfKeys(configuration)) {
    conf.set(HAUtil.addSuffix(confKey,"rm1"),"0.0.0.0:" + (base + 20));
    base=base * 2;
  }
  conf.set(YarnConfiguration.RM_HA_ID,"rm1");
  checkBadConfiguration(conf);
}
