@Test public void testStateStoreDisconnected() throws Exception {
  getStateStore().closeDriver();
  assertEquals(false,getStateStore().isDriverReady());
  GetRouterRegistrationRequest getSingleRequest=GetRouterRegistrationRequest.newInstance();
  verifyException(routerStore,"getRouterRegistration",StateStoreUnavailableException.class,new Class[]{GetRouterRegistrationRequest.class},new Object[]{getSingleRequest});
  GetRouterRegistrationsRequest getRequest=GetRouterRegistrationsRequest.newInstance();
  routerStore.loadCache(true);
  verifyException(routerStore,"getRouterRegistrations",StateStoreUnavailableException.class,new Class[]{GetRouterRegistrationsRequest.class},new Object[]{getRequest});
  RouterHeartbeatRequest hbRequest=RouterHeartbeatRequest.newInstance(RouterState.newInstance("test",0,RouterServiceState.UNINITIALIZED));
  verifyException(routerStore,"routerHeartbeat",StateStoreUnavailableException.class,new Class[]{RouterHeartbeatRequest.class},new Object[]{hbRequest});
}
