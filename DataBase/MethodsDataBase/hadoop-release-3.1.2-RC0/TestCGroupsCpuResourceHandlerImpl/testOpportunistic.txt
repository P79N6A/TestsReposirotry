@Test public void testOpportunistic() throws Exception {
  Configuration conf=new YarnConfiguration();
  cGroupsCpuResourceHandler.bootstrap(plugin,conf);
  ContainerTokenIdentifier tokenId=mock(ContainerTokenIdentifier.class);
  when(tokenId.getExecutionType()).thenReturn(ExecutionType.OPPORTUNISTIC);
  Container container=mock(Container.class);
  String id="container_01_01";
  ContainerId mockContainerId=mock(ContainerId.class);
  when(mockContainerId.toString()).thenReturn(id);
  when(container.getContainerId()).thenReturn(mockContainerId);
  when(container.getContainerTokenIdentifier()).thenReturn(tokenId);
  when(container.getResource()).thenReturn(Resource.newInstance(1024,2));
  cGroupsCpuResourceHandler.preStart(container);
  verify(mockCGroupsHandler,times(1)).updateCGroupParam(CGroupsHandler.CGroupController.CPU,id,CGroupsHandler.CGROUP_CPU_SHARES,"2");
}
