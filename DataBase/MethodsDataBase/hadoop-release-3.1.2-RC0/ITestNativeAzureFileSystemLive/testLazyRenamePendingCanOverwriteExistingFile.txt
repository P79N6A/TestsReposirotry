@Test public void testLazyRenamePendingCanOverwriteExistingFile() throws Exception {
  final String srcFile="srcFile";
  final String dstFile="dstFile";
  Path srcPath=path(srcFile);
  FSDataOutputStream srcStream=fs.create(srcPath);
  assertTrue(fs.exists(srcPath));
  Path dstPath=path(dstFile);
  FSDataOutputStream dstStream=fs.create(dstPath);
  assertTrue(fs.exists(dstPath));
  NativeAzureFileSystem nfs=fs;
  final String fullSrcKey=nfs.pathToKey(nfs.makeAbsolute(srcPath));
  final String fullDstKey=nfs.pathToKey(nfs.makeAbsolute(dstPath));
  nfs.getStoreInterface().rename(fullSrcKey,fullDstKey,true,null);
  assertTrue(fs.exists(dstPath));
  assertFalse(fs.exists(srcPath));
  IOUtils.cleanupWithLogger(null,srcStream);
  IOUtils.cleanupWithLogger(null,dstStream);
}
