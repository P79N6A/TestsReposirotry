@Test public void testPutObjectDirect() throws Throwable {
  final S3AFileSystem fs=getFileSystem();
  ObjectMetadata metadata=fs.newObjectMetadata(-1);
  metadata.setContentLength(-1);
  Path path=path("putDirect");
  final PutObjectRequest put=new PutObjectRequest(fs.getBucket(),path.toUri().getPath(),new ByteArrayInputStream("PUT".getBytes()),metadata);
  LambdaTestUtils.intercept(IllegalStateException.class,() -> fs.putObjectDirect(put));
  assertPathDoesNotExist("put object was created",path);
}
