/** 
 * Test case to check if JournalNode exits cleanly when httpserver or rpc server fails to start. Call to JournalNode start should fail with bind exception as the port is in use by the JN started in @Before routine
 */
@Test public void testJournalNodeStartupFailsCleanly(){
  JournalNode jNode=Mockito.spy(new JournalNode());
  try {
    jNode.setConf(conf);
    jNode.start();
    fail("Should throw bind exception");
  }
 catch (  Exception e) {
    GenericTestUtils.assertExceptionContains("java.net.BindException: Port in use",e);
  }
  Mockito.verify(jNode).stop(1);
}
