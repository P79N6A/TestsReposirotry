@Test public void testBootstrapWithInvalidUserConfiguration() throws ResourceHandlerException {
  String allowed="0,1,7";
  configuration.set(YarnConfiguration.NM_FPGA_ALLOWED_DEVICES,allowed);
  fpgaResourceHandler.bootstrap(configuration);
  Assert.assertEquals(2,fpgaResourceHandler.getFpgaAllocator().getAllowedFpga().size());
  Assert.assertEquals(2,fpgaResourceHandler.getFpgaAllocator().getAvailableFpgaCount());
  String[] invalidAllowedStrings={"a,1,2,","a,1,2","0,1,2,#","a","1,"};
  for (  String s : invalidAllowedStrings) {
    boolean invalidConfiguration=false;
    configuration.set(YarnConfiguration.NM_FPGA_ALLOWED_DEVICES,s);
    try {
      fpgaResourceHandler.bootstrap(configuration);
    }
 catch (    ResourceHandlerException e) {
      invalidConfiguration=true;
    }
    Assert.assertTrue(invalidConfiguration);
  }
  String[] allowedStrings={"1,2","1"};
  for (  String s : allowedStrings) {
    boolean invalidConfiguration=false;
    configuration.set(YarnConfiguration.NM_FPGA_ALLOWED_DEVICES,s);
    try {
      fpgaResourceHandler.bootstrap(configuration);
    }
 catch (    ResourceHandlerException e) {
      invalidConfiguration=true;
    }
    Assert.assertFalse(invalidConfiguration);
  }
}
