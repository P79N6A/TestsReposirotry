@Test public void testStateStore() throws ResourceHandlerException, IOException {
  configuration.set(YarnConfiguration.NM_FPGA_ALLOWED_DEVICES,"0,1,2");
  fpgaResourceHandler.bootstrap(configuration);
  Container container0=mockContainer(0,3,"GEMM");
  fpgaResourceHandler.preStart(container0);
  List<FpgaResourceAllocator.FpgaDevice> assigned=fpgaResourceHandler.getFpgaAllocator().getUsedFpga().get(getContainerId(0).toString());
  verify(mockNMStateStore).storeAssignedResources(container0,ResourceInformation.FPGA_URI,new ArrayList<>(assigned));
  fpgaResourceHandler.postComplete(getContainerId(0));
  Container container1=mockContainer(1,0,"");
  fpgaResourceHandler.preStart(container1);
  verify(mockNMStateStore,never()).storeAssignedResources(eq(container1),eq(ResourceInformation.FPGA_URI),anyList());
}
