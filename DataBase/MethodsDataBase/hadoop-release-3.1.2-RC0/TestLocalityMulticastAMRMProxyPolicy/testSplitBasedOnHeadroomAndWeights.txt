@Test public void testSplitBasedOnHeadroomAndWeights() throws Exception {
  getPolicyInfo().setHeadroomAlpha(0.5f);
  initializePolicy();
  List<ResourceRequest> resourceRequests=createSimpleRequest();
  prepPolicyWithHeadroom();
  Map<SubClusterId,List<ResourceRequest>> response=((FederationAMRMProxyPolicy)getPolicy()).splitResourceRequests(resourceRequests);
  prettyPrintRequests(response);
  validateSplit(response,resourceRequests);
  checkExpectedAllocation(response,"subcluster0",1,42);
  checkExpectedAllocation(response,"subcluster1",1,12);
  checkExpectedAllocation(response,"subcluster2",1,20);
  checkExpectedAllocation(response,"subcluster3",-1,-1);
  checkExpectedAllocation(response,"subcluster4",-1,-1);
  checkExpectedAllocation(response,"subcluster5",1,25);
  checkTotalContainerAllocation(response,100);
}
