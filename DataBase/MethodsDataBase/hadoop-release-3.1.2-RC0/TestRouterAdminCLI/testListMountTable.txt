@Test public void testListMountTable() throws Exception {
  String nsId="ns0";
  String src="/test-lsmounttable";
  String srcWithSlash=src + "/";
  String dest="/lsmounttable";
  String[] argv=new String[]{"-add",src,nsId,dest};
  assertEquals(0,ToolRunner.run(admin,argv));
  System.setOut(new PrintStream(out));
  stateStore.loadCache(MountTableStoreImpl.class,true);
  argv=new String[]{"-ls",src};
  assertEquals(0,ToolRunner.run(admin,argv));
  assertTrue(out.toString().contains(src));
  argv=new String[]{"-ls",srcWithSlash};
  assertEquals(0,ToolRunner.run(admin,argv));
  assertTrue(out.toString().contains(src));
  argv=new String[]{"-ls",srcWithSlash,"check","check2"};
  System.setErr(new PrintStream(err));
  ToolRunner.run(admin,argv);
  assertTrue(err.toString().contains("Too many arguments, Max=1 argument allowed"));
  out.reset();
  GetMountTableEntriesRequest getRequest=GetMountTableEntriesRequest.newInstance("/");
  GetMountTableEntriesResponse getResponse=client.getMountTableManager().getMountTableEntries(getRequest);
  argv=new String[]{"-ls"};
  assertEquals(0,ToolRunner.run(admin,argv));
  assertTrue(out.toString().contains(src));
  String outStr=out.toString();
  for (  MountTable entry : getResponse.getEntries()) {
    assertTrue(outStr.contains(entry.getSourcePath()));
  }
}
