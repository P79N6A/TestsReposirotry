@Test public void testGlobalConfChange() throws Exception {
  WebResource r=resource();
  ClientResponse response;
  SchedConfUpdateInfo updateInfo=new SchedConfUpdateInfo();
  updateInfo.getGlobalParams().put(CapacitySchedulerConfiguration.PREFIX + "maximum-applications","30000");
  response=r.path("ws").path("v1").path("cluster").path("scheduler-conf").queryParam("user.name",userName).accept(MediaType.APPLICATION_JSON).entity(YarnWebServiceUtils.toJson(updateInfo,SchedConfUpdateInfo.class),MediaType.APPLICATION_JSON).put(ClientResponse.class);
  assertEquals(Status.OK.getStatusCode(),response.getStatus());
  CapacitySchedulerConfiguration newCSConf=((CapacityScheduler)rm.getResourceScheduler()).getConfiguration();
  assertEquals(30000,newCSConf.getMaximumSystemApplications());
  updateInfo.getGlobalParams().put(CapacitySchedulerConfiguration.PREFIX + "maximum-applications",null);
  response=r.path("ws").path("v1").path("cluster").path("scheduler-conf").queryParam("user.name",userName).accept(MediaType.APPLICATION_JSON).entity(YarnWebServiceUtils.toJson(updateInfo,SchedConfUpdateInfo.class),MediaType.APPLICATION_JSON).put(ClientResponse.class);
  assertEquals(Status.OK.getStatusCode(),response.getStatus());
  newCSConf=((CapacityScheduler)rm.getResourceScheduler()).getConfiguration();
  assertEquals(CapacitySchedulerConfiguration.DEFAULT_MAXIMUM_SYSTEM_APPLICATIIONS,newCSConf.getMaximumSystemApplications());
}
