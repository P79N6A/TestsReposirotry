@Test(timeout=60000) public void testUpdateTrackingUrl(){
  try {
    AMRMClientImpl<ContainerRequest> amClient=null;
    amClient=new AMRMClientImpl<>();
    amClient.init(conf);
    amClient.start();
    amClient.registerApplicationMaster("Host",10000,"");
    String trackingUrl="hadoop.apache.org";
    assertEquals("",amClient.appTrackingUrl);
    ApplicationMasterProtocol mockRM=mock(ApplicationMasterProtocol.class);
    AllocateResponse mockResponse=mock(AllocateResponse.class);
    when(mockRM.allocate(any(AllocateRequest.class))).thenReturn(mockResponse);
    ApplicationMasterProtocol realRM=amClient.rmClient;
    amClient.rmClient=mockRM;
    amClient.updateTrackingUrl(trackingUrl);
    assertEquals(trackingUrl,amClient.newTrackingUrl);
    assertEquals("",amClient.appTrackingUrl);
    amClient.allocate(0.1f);
    assertNull(amClient.newTrackingUrl);
    assertEquals(trackingUrl,amClient.appTrackingUrl);
    ArgumentCaptor<AllocateRequest> argument=ArgumentCaptor.forClass(AllocateRequest.class);
    verify(mockRM).allocate(argument.capture());
    assertEquals(trackingUrl,argument.getValue().getTrackingUrl());
    amClient.rmClient=realRM;
    amClient.unregisterApplicationMaster(FinalApplicationStatus.SUCCEEDED,null,null);
  }
 catch (  IOException|YarnException e) {
    throw new AssertionError("testUpdateTrackingUrl unexpectedly threw exception: " + e);
  }
}
