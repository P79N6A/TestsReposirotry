@Test public void testCreatedFileIsVisibleOnFlush() throws Throwable {
  describe("verify that a newly created file exists once a flush has taken " + "place");
  Path path=path("testCreatedFileIsVisibleOnFlush");
  FileSystem fs=getFileSystem();
  try (FSDataOutputStream out=fs.create(path,false,4096,(short)1,1024)){
    out.write('a');
    out.flush();
    if (!fs.exists(path)) {
      if (isSupported(IS_BLOBSTORE) || isSupported(CREATE_VISIBILITY_DELAYED)) {
        skip("For object store or some file systems, newly created files are" + " not immediately visible");
      }
      assertPathExists("expected path to be visible before file closed",path);
    }
  }
 }
