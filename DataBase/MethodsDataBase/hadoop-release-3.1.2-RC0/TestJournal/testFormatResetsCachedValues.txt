@Test(timeout=10000) public void testFormatResetsCachedValues() throws Exception {
  journal.newEpoch(FAKE_NSINFO,12345L);
  journal.startLogSegment(new RequestInfo(JID,null,12345L,1L,0L),1L,NameNodeLayoutVersion.CURRENT_LAYOUT_VERSION);
  assertEquals(12345L,journal.getLastPromisedEpoch());
  assertEquals(12345L,journal.getLastWriterEpoch());
  assertTrue(journal.isFormatted());
  journal.close();
  journal.getStorage().getJournalManager().getStorageDirectory().clearDirectory();
  journal.format(FAKE_NSINFO_2);
  assertEquals(0,journal.getLastPromisedEpoch());
  assertEquals(0,journal.getLastWriterEpoch());
  assertTrue(journal.isFormatted());
}
