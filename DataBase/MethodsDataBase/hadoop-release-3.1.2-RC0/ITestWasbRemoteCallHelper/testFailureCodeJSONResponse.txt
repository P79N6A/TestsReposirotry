/** 
 * Test valid JSON response failure response code.
 * @throws Throwable
 */
@Test public void testFailureCodeJSONResponse() throws Throwable {
  expectedEx.expect(WasbAuthorizationException.class);
  expectedEx.expectMessage("Remote authorization service encountered an error Unauthorized");
  HttpClient mockHttpClient=Mockito.mock(HttpClient.class);
  HttpResponse mockHttpResponse=Mockito.mock(HttpResponse.class);
  HttpEntity mockHttpEntity=Mockito.mock(HttpEntity.class);
  Mockito.when(mockHttpClient.execute(Mockito.<HttpGet>any())).thenReturn(mockHttpResponse);
  Mockito.when(mockHttpResponse.getStatusLine()).thenReturn(newStatusLine(HttpStatus.SC_OK));
  Mockito.when(mockHttpResponse.getFirstHeader("Content-Type")).thenReturn(newHeader("Content-Type","application/json"));
  Mockito.when(mockHttpResponse.getFirstHeader("Content-Length")).thenReturn(newHeader("Content-Length","1024"));
  Mockito.when(mockHttpResponse.getEntity()).thenReturn(mockHttpEntity);
  Mockito.when(mockHttpEntity.getContent()).thenReturn(new ByteArrayInputStream(failureCodeJsonResponse().getBytes(StandardCharsets.UTF_8)));
  performop(mockHttpClient);
}
