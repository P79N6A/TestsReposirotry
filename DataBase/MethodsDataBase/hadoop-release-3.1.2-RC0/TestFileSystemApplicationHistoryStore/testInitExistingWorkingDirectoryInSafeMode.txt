@Test public void testInitExistingWorkingDirectoryInSafeMode() throws Exception {
  LOG.info("Starting testInitExistingWorkingDirectoryInSafeMode");
  tearDown();
  FileSystem fileSystem=spy(new RawLocalFileSystem());
  FileStatus fileStatus=Mockito.mock(FileStatus.class);
  doReturn(true).when(fileStatus).isDirectory();
  doReturn(fileStatus).when(fileSystem).getFileStatus(any(Path.class));
  try {
    initAndStartStore(fileSystem);
  }
 catch (  Exception e) {
    Assert.fail("Exception should not be thrown: " + e);
  }
  verify(fileStatus,never()).isDirectory();
  verify(fileSystem,times(1)).mkdirs(any(Path.class));
}
