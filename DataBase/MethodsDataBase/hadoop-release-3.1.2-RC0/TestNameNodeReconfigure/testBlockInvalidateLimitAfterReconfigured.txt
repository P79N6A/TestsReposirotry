@Test public void testBlockInvalidateLimitAfterReconfigured() throws ReconfigurationException {
  final NameNode nameNode=cluster.getNameNode();
  final DatanodeManager datanodeManager=nameNode.namesystem.getBlockManager().getDatanodeManager();
  assertEquals(DFS_BLOCK_INVALIDATE_LIMIT_KEY + " is not correctly set",customizedBlockInvalidateLimit,datanodeManager.getBlockInvalidateLimit());
  nameNode.reconfigureProperty(DFS_HEARTBEAT_INTERVAL_KEY,Integer.toString(6));
  assertEquals(DFS_BLOCK_INVALIDATE_LIMIT_KEY + " is not honored after reconfiguration",customizedBlockInvalidateLimit,datanodeManager.getBlockInvalidateLimit());
  nameNode.reconfigureProperty(DFS_HEARTBEAT_INTERVAL_KEY,Integer.toString(50));
  assertEquals(DFS_BLOCK_INVALIDATE_LIMIT_KEY + " is not reconfigured correctly",1000,datanodeManager.getBlockInvalidateLimit());
}
