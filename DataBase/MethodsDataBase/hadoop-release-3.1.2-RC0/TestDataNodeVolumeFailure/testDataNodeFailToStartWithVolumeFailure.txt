/** 
 * Test if there is volume failure, the DataNode will fail to start. We fail a volume by setting the parent directory non-writable.
 */
@Test(timeout=120000) public void testDataNodeFailToStartWithVolumeFailure() throws Exception {
  assumeNotWindows();
  failedDir=new File(dataDir,"failedDir");
  assertTrue("Failed to fail a volume by setting it non-writable",failedDir.mkdir() && failedDir.setReadOnly());
  startNewDataNodeWithDiskFailure(new File(failedDir,"newDir1"),false);
}
