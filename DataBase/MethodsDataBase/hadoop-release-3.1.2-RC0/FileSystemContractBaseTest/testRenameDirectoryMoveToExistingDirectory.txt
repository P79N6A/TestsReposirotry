@Test public void testRenameDirectoryMoveToExistingDirectory() throws Exception {
  assumeTrue(renameSupported());
  Path src=path("testRenameDirectoryMoveToExistingDirectory/dir");
  fs.mkdirs(src);
  createFile(path(src + "/file1"));
  createFile(path(src + "/subdir/file2"));
  Path dst=path("testRenameDirectoryMoveToExistingDirectoryNew/newdir");
  fs.mkdirs(dst.getParent());
  rename(src,dst,true,false,true);
  assertFalse("Nested file1 exists",fs.exists(path(src + "/file1")));
  assertFalse("Nested file2 exists",fs.exists(path(src + "/subdir/file2")));
  assertTrue("Renamed nested file1 exists",fs.exists(path(dst + "/file1")));
  assertTrue("Renamed nested exists",fs.exists(path(dst + "/subdir/file2")));
}
