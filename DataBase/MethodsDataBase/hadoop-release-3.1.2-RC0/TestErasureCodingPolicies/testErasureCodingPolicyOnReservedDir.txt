@Test public void testErasureCodingPolicyOnReservedDir() throws IOException {
  final Path reserveDir=new Path("/.reserved");
  ErasureCodingPolicy policy=fs.getErasureCodingPolicy(reserveDir);
  assertNull("Got unexpected erasure coding policy",policy);
  final Path root=new Path("/");
  final Path rawRoot=new Path("/.reserved/raw");
  final Path rawRootSlash=new Path("/.reserved/raw/");
  assertNull("Got unexpected erasure coding policy",fs.getErasureCodingPolicy(root));
  assertNull("Got unexpected erasure coding policy",fs.getErasureCodingPolicy(rawRoot));
  assertNull("Got unexpected erasure coding policy",fs.getErasureCodingPolicy(rawRootSlash));
  final Path ecDir=new Path("/ec");
  fs.mkdirs(ecDir);
  fs.setErasureCodingPolicy(ecDir,ecPolicy.getName());
  ErasureCodingPolicy policyBase=fs.getErasureCodingPolicy(ecDir);
  assertEquals("Got unexpected erasure coding policy",ecPolicy,policyBase);
  final Path rawRootEc=new Path("/.reserved/raw/ec");
  ErasureCodingPolicy policyMap=fs.getErasureCodingPolicy(rawRootEc);
  assertEquals("Got unexpected erasure coding policy",ecPolicy,policyMap);
}
