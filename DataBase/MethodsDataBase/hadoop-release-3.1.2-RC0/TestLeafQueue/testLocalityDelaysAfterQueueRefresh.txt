@Test(timeout=30000) public void testLocalityDelaysAfterQueueRefresh() throws Exception {
  LeafQueue e=stubLeafQueue((LeafQueue)queues.get(E));
  assertEquals(40,e.getNodeLocalityDelay());
  assertEquals(-1,e.getRackLocalityAdditionalDelay());
  csConf.setInt(CapacitySchedulerConfiguration.NODE_LOCALITY_DELAY,60);
  csConf.setInt(CapacitySchedulerConfiguration.RACK_LOCALITY_ADDITIONAL_DELAY,600);
  Map<String,CSQueue> newQueues=new HashMap<String,CSQueue>();
  CSQueue newRoot=CapacitySchedulerQueueManager.parseQueue(csContext,csConf,null,ROOT,newQueues,queues,TestUtils.spyHook);
  root.reinitialize(newRoot,cs.getClusterResource());
  assertEquals(60,e.getNodeLocalityDelay());
  assertEquals(600,e.getRackLocalityAdditionalDelay());
}
