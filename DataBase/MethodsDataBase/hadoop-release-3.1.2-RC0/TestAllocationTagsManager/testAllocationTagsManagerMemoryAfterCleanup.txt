@Test public void testAllocationTagsManagerMemoryAfterCleanup(){
  AllocationTagsManager atm=new AllocationTagsManager(rmContext);
  atm.addContainer(NodeId.fromString("host1:123"),TestUtils.getMockContainerId(1,1),ImmutableSet.of("mapper","reducer"));
  atm.addContainer(NodeId.fromString("host2:123"),TestUtils.getMockContainerId(1,2),ImmutableSet.of("mapper","reducer"));
  atm.addContainer(NodeId.fromString("host1:123"),TestUtils.getMockContainerId(1,3),ImmutableSet.of("service"));
  atm.addContainer(NodeId.fromString("host2:123"),TestUtils.getMockContainerId(1,4),ImmutableSet.of("reducer"));
  atm.addContainer(NodeId.fromString("host2:123"),TestUtils.getMockContainerId(2,3),ImmutableSet.of("service"));
  atm.removeContainer(NodeId.fromString("host1:123"),TestUtils.getMockContainerId(1,1),ImmutableSet.of("mapper","reducer"));
  atm.removeContainer(NodeId.fromString("host2:123"),TestUtils.getMockContainerId(1,2),ImmutableSet.of("mapper","reducer"));
  atm.removeContainer(NodeId.fromString("host1:123"),TestUtils.getMockContainerId(1,3),ImmutableSet.of("service"));
  atm.removeContainer(NodeId.fromString("host2:123"),TestUtils.getMockContainerId(1,4),ImmutableSet.of("reducer"));
  atm.removeContainer(NodeId.fromString("host2:123"),TestUtils.getMockContainerId(2,3),ImmutableSet.of("service"));
  Assert.assertEquals(0,atm.getGlobalNodeMapping().getTypeToTagsWithCount().size());
  Assert.assertEquals(0,atm.getPerAppNodeMappings().size());
  Assert.assertEquals(0,atm.getGlobalRackMapping().getTypeToTagsWithCount().size());
  Assert.assertEquals(0,atm.getPerAppRackMappings().size());
}
