/** 
 * MiniDFSCluster should not clobber dfs.datanode.hostname if requested 
 */
@Test(timeout=100000) public void testClusterSetDatanodeHostname() throws Throwable {
  assumeTrue(System.getProperty("os.name").startsWith("Linux"));
  Configuration conf=new HdfsConfiguration();
  conf.set(DFSConfigKeys.DFS_DATANODE_HOST_NAME_KEY,"MYHOST");
  File testDataCluster5=new File(testDataPath,CLUSTER_5);
  try (MiniDFSCluster cluster5=new MiniDFSCluster.Builder(conf,testDataCluster5).numDataNodes(1).checkDataNodeHostConfig(true).build()){
    assertEquals("DataNode hostname config not respected","MYHOST",cluster5.getDataNodes().get(0).getDatanodeId().getHostName());
  }
 }
