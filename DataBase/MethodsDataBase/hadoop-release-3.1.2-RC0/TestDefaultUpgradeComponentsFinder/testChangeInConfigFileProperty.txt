@Test public void testChangeInConfigFileProperty(){
  ConfigFile file=new ConfigFile().srcFile("src").destFile("dest").type(ConfigFile.TypeEnum.HADOOP_XML);
  Map<String,String> props=new HashMap<>();
  props.put("k1","v1");
  file.setProperties(props);
  Configuration conf=new Configuration().files(Lists.newArrayList(file));
  Service currentDef=TestServiceManager.createBaseDef("test");
  currentDef.setConfiguration(conf);
  file=new ConfigFile().srcFile("src").destFile("dest").type(ConfigFile.TypeEnum.HADOOP_XML);
  Map<String,String> changedProps=new HashMap<>();
  changedProps.put("k1","v2");
  file.setProperties(changedProps);
  conf=new Configuration().files(Lists.newArrayList(file));
  Service targetDef=TestServiceManager.createBaseDef("test");
  targetDef.setConfiguration(conf);
  List<Component> expected=new ArrayList<>();
  expected.addAll(targetDef.getComponents());
  assertEquals("all components needs upgrade",expected,finder.findTargetComponentSpecs(currentDef,targetDef));
}
