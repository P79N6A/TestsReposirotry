/** 
 * A node has blocks under construction when it is put to maintenance. Given there are minReplication replicas somewhere else, it can be transitioned to AdminStates.IN_MAINTENANCE.
 */
@Test(timeout=360000) public void testEnterMaintenanceWhenFileOpen() throws Exception {
  LOG.info("Starting testEnterMaintenanceWhenFileOpen");
  startCluster(1,3);
  final Path file=new Path("/testEnterMaintenanceWhenFileOpen.dat");
  final FileSystem fileSys=getCluster().getFileSystem(0);
  writeIncompleteFile(fileSys,file,(short)3,(short)2);
  takeNodeOutofService(0,null,Long.MAX_VALUE,null,AdminStates.IN_MAINTENANCE);
  cleanupFile(fileSys,file);
}
