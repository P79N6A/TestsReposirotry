@Test public void testDeleteEmptyDirectory() throws Exception {
  final Path zone1=new Path("/zone" + zoneCounter.getAndIncrement());
  final Path zone2=new Path("/zone" + zoneCounter.getAndIncrement());
  fs.mkdirs(zone1);
  fs.mkdirs(zone2);
  final Path trashDir1=new Path(shell.getCurrentTrashDir(zone1) + "/" + zone1);
  final Path trashDir2=new Path(shell.getCurrentTrashDir(zone1) + "/" + zone2);
  String[] argv1=new String[]{"-rm","-r",zone1.toString()};
  int res=ToolRunner.run(shell,argv1);
  assertEquals("rm failed",0,res);
  assertTrue("Empty directory not deleted even with -r : " + trashDir1,fs.exists(trashDir1));
  String[] argv2=new String[]{"-rm",zone2.toString()};
  res=ToolRunner.run(shell,argv2);
  assertEquals("rm on empty directory did not fail",1,res);
  assertTrue("Empty directory deleted without -r : " + trashDir2,!fs.exists(trashDir2));
}
