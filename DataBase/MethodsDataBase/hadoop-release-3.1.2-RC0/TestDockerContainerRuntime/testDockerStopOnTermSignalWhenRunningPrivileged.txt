@Test public void testDockerStopOnTermSignalWhenRunningPrivileged() throws ContainerExecutionException, PrivilegedOperationException, IOException {
  conf.set(YarnConfiguration.NM_DOCKER_ALLOW_PRIVILEGED_CONTAINERS,"true");
  conf.set(YarnConfiguration.NM_DOCKER_PRIVILEGED_CONTAINERS_ACL,submittingUser);
  env.put(ENV_DOCKER_CONTAINER_RUN_PRIVILEGED_CONTAINER,"true");
  when(mockExecutor.executePrivilegedOperation(anyList(),any(PrivilegedOperation.class),any(File.class),anyMap(),anyBoolean(),anyBoolean())).thenReturn(DockerCommandExecutor.DockerContainerStatus.RUNNING.getName());
  List<String> dockerCommands=getDockerCommandsForDockerStop(ContainerExecutor.Signal.TERM);
  Assert.assertEquals(3,dockerCommands.size());
  Assert.assertEquals("[docker-command-execution]",dockerCommands.get(0));
  Assert.assertEquals("  docker-command=stop",dockerCommands.get(1));
  Assert.assertEquals("  name=container_e11_1518975676334_14532816_01_000001",dockerCommands.get(2));
}
