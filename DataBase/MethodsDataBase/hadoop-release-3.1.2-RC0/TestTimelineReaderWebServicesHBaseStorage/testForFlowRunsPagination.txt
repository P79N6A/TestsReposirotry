@Test public void testForFlowRunsPagination() throws Exception {
  Client client=createClient();
  try {
    int totalRuns=3;
    String resourceUri="http://localhost:" + getServerPort() + "/ws/v2/"+ "timeline/clusters/cluster1/users/user1/flows/flow1/runs";
    URI uri=URI.create(resourceUri);
    ClientResponse resp=getResponse(client,uri);
    List<TimelineEntity> entities=resp.getEntity(new GenericType<List<TimelineEntity>>(){
    }
);
    assertNotNull(entities);
    assertEquals(totalRuns,entities.size());
    TimelineEntity entity1=entities.get(0);
    TimelineEntity entity3=entities.get(totalRuns - 1);
    int limit=2;
    String queryParam="?limit=" + limit;
    uri=URI.create(resourceUri + queryParam);
    resp=getResponse(client,uri);
    entities=resp.getEntity(new GenericType<List<TimelineEntity>>(){
    }
);
    assertNotNull(entities);
    assertEquals(limit,entities.size());
    assertEquals(entity1,entities.get(0));
    TimelineEntity entity2=entities.get(limit - 1);
    uri=URI.create(resourceUri + queryParam + "&fromid="+ entity2.getInfo().get(TimelineReaderUtils.FROMID_KEY));
    resp=getResponse(client,uri);
    entities=resp.getEntity(new GenericType<List<TimelineEntity>>(){
    }
);
    assertNotNull(entities);
    assertEquals(limit,entities.size());
    assertEquals(entity2,entities.get(0));
    assertEquals(entity3,entities.get(1));
    uri=URI.create(resourceUri + queryParam + "&fromid="+ entity3.getInfo().get(TimelineReaderUtils.FROMID_KEY));
    resp=getResponse(client,uri);
    entities=resp.getEntity(new GenericType<List<TimelineEntity>>(){
    }
);
    assertNotNull(entities);
    assertEquals(1,entities.size());
    assertEquals(entity3,entities.get(0));
  }
  finally {
    client.destroy();
  }
}
