/** 
 * Test for the base success case. The primary NN hasn't made any checkpoints, and we copy the fsimage_0 file over and start up.
 */
@Test public void testSuccessfulBaseCase() throws Exception {
  removeStandbyNameDirs();
  for (int index=1; index < maxNNCount; index++) {
    try {
      cluster.restartNameNode(index);
      fail("Did not throw");
    }
 catch (    IOException ioe) {
      GenericTestUtils.assertExceptionContains("storage directory does not exist or is not accessible",ioe);
    }
    int expectedCheckpointTxId=(int)NameNodeAdapter.getNamesystem(nn0).getFSImage().getMostRecentCheckpointTxId();
    int rc=BootstrapStandby.run(new String[]{"-nonInteractive"},cluster.getConfiguration(index));
    assertEquals(0,rc);
    FSImageTestUtil.assertNNHasCheckpoints(cluster,index,ImmutableList.of(expectedCheckpointTxId));
  }
  restartNameNodesFromIndex(1);
}
