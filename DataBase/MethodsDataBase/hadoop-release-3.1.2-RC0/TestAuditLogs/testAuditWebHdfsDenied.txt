/** 
 * test that denied access via webhdfs puts proper entry in audit log 
 */
@Test public void testAuditWebHdfsDenied() throws Exception {
  final Path file=new Path(fnames[0]);
  fs.setPermission(file,new FsPermission((short)0600));
  fs.setOwner(file,"root",null);
  setupAuditLogs();
  try {
    WebHdfsFileSystem webfs=WebHdfsTestUtil.getWebHdfsFileSystemAs(userGroupInfo,conf,WebHdfsConstants.WEBHDFS_SCHEME);
    InputStream istream=webfs.open(file);
    int val=istream.read();
    fail("open+read must not succeed, got " + val);
  }
 catch (  AccessControlException E) {
    System.out.println("got access denied, as expected.");
  }
  verifyAuditLogsRepeat(false,2);
}
