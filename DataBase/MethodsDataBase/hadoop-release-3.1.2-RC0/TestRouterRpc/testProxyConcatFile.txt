@Test public void testProxyConcatFile() throws Exception {
  String sameNameservice=ns;
  String existingFile=cluster.getFederatedTestDirectoryForNS(sameNameservice) + "_concatfile";
  int existingFileSize=32;
  createFile(routerFS,existingFile,existingFileSize);
  String alternateNameservice=null;
  for (  String n : cluster.getNameservices()) {
    if (!n.equals(sameNameservice)) {
      alternateNameservice=n;
      break;
    }
  }
  String altRouterFile=cluster.getFederatedTestDirectoryForNS(alternateNameservice) + "_newfile";
  String sameRouterFile=cluster.getFederatedTestDirectoryForNS(sameNameservice) + "_newfile";
  createFile(routerFS,altRouterFile,DFSConfigKeys.DFS_BLOCK_SIZE_DEFAULT);
  createFile(routerFS,sameRouterFile,DFSConfigKeys.DFS_BLOCK_SIZE_DEFAULT);
  testConcat(existingFile,altRouterFile,true);
  testConcat(existingFile,sameRouterFile,false);
  FileStatus status=getFileStatus(routerFS,sameRouterFile);
  assertEquals(existingFileSize + DFSConfigKeys.DFS_BLOCK_SIZE_DEFAULT,status.getLen());
  Method m=ClientProtocol.class.getMethod("concat",String.class,String[].class);
  String badPath="/unknownlocation/unknowndir";
  compareResponses(routerProtocol,nnProtocol,m,new Object[]{badPath,new String[]{routerFile}});
}
