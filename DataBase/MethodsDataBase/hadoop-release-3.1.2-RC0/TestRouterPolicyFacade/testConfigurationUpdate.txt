@Test public void testConfigurationUpdate() throws YarnException {
  ApplicationSubmissionContext applicationSubmissionContext=mock(ApplicationSubmissionContext.class);
  when(applicationSubmissionContext.getQueue()).thenReturn(queue1);
  SubClusterId chosen=routerFacade.getHomeSubcluster(applicationSubmissionContext,null);
  Assert.assertTrue(subClusterIds.contains(chosen));
  Assert.assertTrue(routerFacade.globalPolicyMap.get(queue1) instanceof UniformRandomRouterPolicy);
  store.setPolicyConfiguration(SetSubClusterPolicyConfigurationRequest.newInstance(getPriorityPolicy(queue1)));
  chosen=routerFacade.getHomeSubcluster(applicationSubmissionContext,null);
  Assert.assertTrue(chosen.equals(subClusterIds.get(0)));
  Assert.assertTrue(routerFacade.globalPolicyMap.get(queue1) instanceof PriorityRouterPolicy);
}
