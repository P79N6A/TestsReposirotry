@Test public void testReadFailToGetCurrentBlock() throws Exception {
  DFSTestUtil.writeFile(cluster.getFileSystem(),filePath,"test");
  try (DFSStripedInputStream in=(DFSStripedInputStream)fs.getClient().open(filePath.toString())){
    final DFSStripedInputStream spy=spy(in);
    final String msg="Injected exception for testReadNPE";
    doThrow(new IOException(msg)).when(spy).blockSeekTo(anyLong());
    assertNull(in.getCurrentBlock());
    try {
      spy.read();
      fail("read should have failed");
    }
 catch (    IOException expected) {
      LOG.info("Exception caught",expected);
      GenericTestUtils.assertExceptionContains(msg,expected);
    }
  }
 }
