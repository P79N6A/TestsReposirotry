/** 
 * Test that getQuotaUsage can be retrieved on the client side if quota isn't defined.
 */
@Test public void testGetQuotaUsageWithQuotaDefined() throws IOException {
  FileSystem hFs=cluster.getFileSystem(0);
  final DistributedFileSystem dfs=(DistributedFileSystem)hFs;
  dfs.setQuota(testFileDirPath,-1,-1);
  dfs.setQuotaByStorageType(testFileDirPath,StorageType.SSD,-1);
  dfs.setQuotaByStorageType(testFileDirPath,StorageType.DISK,-1);
  QuotaUsage qu=vfs.getQuotaUsage(testFileDirPath);
  assertEquals(-1,qu.getTypeQuota(StorageType.SSD));
  assertEquals(-1,qu.getQuota());
  assertEquals(-1,qu.getSpaceQuota());
  assertEquals(2,qu.getFileAndDirectoryCount());
  assertEquals(0,qu.getTypeConsumed(StorageType.SSD));
  assertTrue(qu.getSpaceConsumed() > 0);
}
