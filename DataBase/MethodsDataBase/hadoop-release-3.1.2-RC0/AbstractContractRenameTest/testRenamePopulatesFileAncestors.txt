/** 
 * Test that after renaming, the nested file is moved along with all its ancestors. It is similar to  {@link #testRenamePopulatesDirectoryAncestors}.
 */
@Test public void testRenamePopulatesFileAncestors() throws IOException {
  final FileSystem fs=getFileSystem();
  final Path src=path("testRenamePopulatesFileAncestors/source");
  fs.mkdirs(src);
  final String nestedFile="/dir1/dir2/dir3/file4";
  byte[] srcDataset=dataset(256,'a','z');
  writeDataset(fs,path(src + nestedFile),srcDataset,srcDataset.length,1024,false);
  Path dst=path("testRenamePopulatesFileAncestorsNew");
  fs.rename(src,dst);
  validateAncestorsMoved(src,dst,nestedFile);
}
