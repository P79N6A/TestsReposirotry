@Test public void testFilterWithState() throws Exception {
  ServiceContext sc=new MockRunningServiceContext(rule,TestServiceManager.createBaseDef("service"));
  GetCompInstancesRequestProto.Builder reqBuilder=GetCompInstancesRequestProto.newBuilder();
  reqBuilder.addAllContainerStates(Lists.newArrayList(ContainerState.READY.toString()));
  Assert.assertEquals("num containers",4,FilterUtils.filterInstances(sc,reqBuilder.build()).size());
  reqBuilder.clearContainerStates();
  reqBuilder.addAllContainerStates(Lists.newArrayList(ContainerState.STOPPED.toString()));
  Assert.assertEquals("num containers",0,FilterUtils.filterInstances(sc,reqBuilder.build()).size());
}
