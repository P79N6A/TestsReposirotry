@Test public void testNamenodeStateOverride() throws Exception {
  String ns="ns0";
  String nn="nn0";
  MembershipState report=createRegistration(ns,nn,ROUTERS[1],FederationNamenodeServiceState.STANDBY);
  assertTrue(namenodeHeartbeat(report));
  assertTrue(getStateStore().loadCache(MembershipStore.class,true));
  MembershipState existingState=getNamenodeRegistration(ns,nn);
  assertEquals(FederationNamenodeServiceState.STANDBY,existingState.getState());
  UpdateNamenodeRegistrationRequest request=UpdateNamenodeRegistrationRequest.newInstance(ns,nn,FederationNamenodeServiceState.ACTIVE);
  assertTrue(membershipStore.updateNamenodeRegistration(request).getResult());
  MembershipState newState=getNamenodeRegistration(ns,nn);
  assertEquals(FederationNamenodeServiceState.ACTIVE,newState.getState());
}
