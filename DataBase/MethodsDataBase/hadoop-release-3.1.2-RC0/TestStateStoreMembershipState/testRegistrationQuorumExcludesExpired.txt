@Test public void testRegistrationQuorumExcludesExpired() throws InterruptedException, IOException {
  List<MembershipState> registrationList=new ArrayList<>();
  String ns="ns0";
  String nn="nn0";
  String rpcAddress="testrpcaddress";
  String serviceAddress="testserviceaddress";
  String lifelineAddress="testlifelineaddress";
  String blockPoolId="testblockpool";
  String clusterId="testcluster";
  String webAddress="testwebaddress";
  boolean safemode=false;
  MembershipState record=MembershipState.newInstance(ROUTERS[0],ns,nn,clusterId,blockPoolId,rpcAddress,serviceAddress,lifelineAddress,webAddress,FederationNamenodeServiceState.ACTIVE,safemode);
  registrationList.add(record);
  record=MembershipState.newInstance(ROUTERS[1],ns,nn,clusterId,blockPoolId,rpcAddress,serviceAddress,lifelineAddress,webAddress,FederationNamenodeServiceState.EXPIRED,safemode);
  registrationList.add(record);
  record=MembershipState.newInstance(ROUTERS[2],ns,nn,clusterId,blockPoolId,rpcAddress,serviceAddress,lifelineAddress,webAddress,FederationNamenodeServiceState.EXPIRED,safemode);
  registrationList.add(record);
  record=MembershipState.newInstance(ROUTERS[3],ns,nn,clusterId,blockPoolId,rpcAddress,serviceAddress,lifelineAddress,webAddress,FederationNamenodeServiceState.EXPIRED,safemode);
  registrationList.add(record);
  registerAndLoadRegistrations(registrationList);
  MembershipState quorumEntry=getNamenodeRegistration(record.getNameserviceId(),record.getNamenodeId());
  assertNotNull(quorumEntry);
  assertEquals(ROUTERS[0],quorumEntry.getRouterId());
}
