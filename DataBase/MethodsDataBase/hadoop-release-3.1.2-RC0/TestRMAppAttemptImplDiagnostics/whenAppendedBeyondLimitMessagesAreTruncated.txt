@Test public void whenAppendedBeyondLimitMessagesAreTruncated(){
  final Configuration configuration=new Configuration();
  configuration.setInt(YarnConfiguration.APP_ATTEMPT_DIAGNOSTICS_LIMIT_KC,1);
  final RMAppAttemptImpl appAttempt=createRMAppAttemptImpl(configuration);
  final String beyondLimit=RandomStringUtils.random(1025);
  appAttempt.appendDiagnostics(beyondLimit);
  final String truncated=String.format(BoundedAppender.TRUNCATED_MESSAGES_TEMPLATE,1024,1025,beyondLimit.substring(1));
  assertEquals("messages beyond limit should be truncated",truncated,appAttempt.getDiagnostics());
}
