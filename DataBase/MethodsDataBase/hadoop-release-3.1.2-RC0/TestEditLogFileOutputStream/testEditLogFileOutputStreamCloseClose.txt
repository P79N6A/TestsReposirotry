/** 
 * Tests EditLogFileOutputStream doesn't throw NullPointerException on close/close sequence. See HDFS-2011.
 */
@Test public void testEditLogFileOutputStreamCloseClose() throws IOException {
  EditLogFileOutputStream editLogStream=new EditLogFileOutputStream(conf,TEST_EDITS,0);
  editLogStream.close();
  try {
    editLogStream.close();
  }
 catch (  IOException ioe) {
    String msg=StringUtils.stringifyException(ioe);
    assertTrue(msg,msg.contains("Trying to use aborted output stream"));
  }
}
