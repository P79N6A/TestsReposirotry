@Test(timeout=120000) public void testUpdatePriorityAndKillAppWithZeroClusterResource() throws Exception {
  int maxPriority=10;
  int appPriority=5;
  YarnConfiguration conf=new YarnConfiguration();
  Assume.assumeFalse("FairScheduler does not support Application Priorities",conf.get(YarnConfiguration.RM_SCHEDULER).equals(FairScheduler.class.getName()));
  conf.setInt(YarnConfiguration.MAX_CLUSTER_LEVEL_APPLICATION_PRIORITY,maxPriority);
  MockRM rm=new MockRM(conf);
  rm.init(conf);
  rm.start();
  RMApp app1=rm.submitApp(1024,Priority.newInstance(appPriority));
  ClientRMService rmService=rm.getClientRMService();
  testApplicationPriorityUpdation(rmService,app1,appPriority,appPriority);
  rm.killApp(app1.getApplicationId());
  rm.waitForState(app1.getApplicationId(),RMAppState.KILLED);
  rm.stop();
}
