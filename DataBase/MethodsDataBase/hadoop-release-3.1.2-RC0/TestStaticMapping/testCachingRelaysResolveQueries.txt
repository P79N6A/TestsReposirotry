/** 
 * This test verifies that resultion queries get relayed to the inner rack
 * @throws Throwable on any problem
 */
@Test public void testCachingRelaysResolveQueries() throws Throwable {
  StaticMapping mapping=newInstance();
  mapping.setConf(createConf("top"));
  StaticMapping staticMapping=mapping;
  CachedDNSToSwitchMapping cachedMap=new CachedDNSToSwitchMapping(staticMapping);
  assertMapSize(cachedMap,0);
  StaticMapping.addNodeToRack("n1","/r1");
  assertMapSize(staticMapping,1);
  assertMapSize(cachedMap,0);
  cachedMap.resolve(createQueryList());
  assertMapSize(cachedMap,2);
}
