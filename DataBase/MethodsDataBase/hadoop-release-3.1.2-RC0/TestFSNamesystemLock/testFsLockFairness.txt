@Test public void testFsLockFairness() throws IOException, InterruptedException {
  Configuration conf=new Configuration();
  conf.setBoolean(DFS_NAMENODE_FSLOCK_FAIR_KEY,true);
  FSNamesystemLock fsnLock=new FSNamesystemLock(conf,null);
  assertTrue(fsnLock.coarseLock.isFair());
  conf.setBoolean(DFS_NAMENODE_FSLOCK_FAIR_KEY,false);
  fsnLock=new FSNamesystemLock(conf,null);
  assertFalse(fsnLock.coarseLock.isFair());
}
