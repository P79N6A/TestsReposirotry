@Test public void testPresence(){
  Configuration conf=new Configuration();
  TopConf topConf=new TopConf(conf);
  TopMetrics topMetrics=new TopMetrics(conf,topConf.nntopReportingPeriodsMs);
  topMetrics.report("test","listStatus");
  topMetrics.report("test","listStatus");
  topMetrics.report("test","listStatus");
  MetricsRecordBuilder rb=getMetrics(topMetrics);
  MetricsCollector mc=rb.parent();
  verify(mc).addRecord(TOPMETRICS_METRICS_SOURCE_NAME + ".windowMs=60000");
  verify(mc).addRecord(TOPMETRICS_METRICS_SOURCE_NAME + ".windowMs=300000");
  verify(mc).addRecord(TOPMETRICS_METRICS_SOURCE_NAME + ".windowMs=1500000");
  verify(rb,times(3)).addCounter(Interns.info("op=listStatus.TotalCount","Total operation count"),3L);
  verify(rb,times(3)).addCounter(Interns.info("op=*.TotalCount","Total operation count"),3L);
  verify(rb,times(3)).addCounter(Interns.info("op=listStatus." + "user=test.count","Total operations performed by user"),3L);
}
