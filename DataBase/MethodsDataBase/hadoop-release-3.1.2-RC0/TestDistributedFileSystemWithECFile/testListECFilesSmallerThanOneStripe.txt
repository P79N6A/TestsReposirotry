@Test(timeout=60000) public void testListECFilesSmallerThanOneStripe() throws Exception {
  int dataBlocksNum=dataBlocks;
  createFile("/ec/smallstripe",cellSize * dataBlocksNum);
  RemoteIterator<LocatedFileStatus> iter=cluster.getFileSystem().listFiles(new Path("/ec"),true);
  LocatedFileStatus fileStatus=iter.next();
  assertSmallerThanOneStripe(fileStatus.getBlockLocations(),dataBlocksNum);
  BlockLocation[] locations=cluster.getFileSystem().getFileBlockLocations(fileStatus,0,fileStatus.getLen());
  assertSmallerThanOneStripe(locations,dataBlocksNum);
  fileStatus=fileContext.listLocatedStatus(new Path("/ec")).next();
  assertSmallerThanOneStripe(fileStatus.getBlockLocations(),dataBlocksNum);
  locations=fileContext.getFileBlockLocations(new Path("/ec/smallstripe"),0,fileStatus.getLen());
  assertSmallerThanOneStripe(locations,dataBlocksNum);
}
