/** 
 * In this testcase, client is is a node outside of file system. So the 1st replica can be placed on any node.  the 2nd replica should be placed on a different rack, the 3rd replica should be placed on the same rack as the 2nd replica,
 * @throws Exception
 */
@Test public void testChooseTarget5() throws Exception {
  updateHeartbeatWithUsage();
  DatanodeStorageInfo[] targets;
  targets=chooseTarget(0,NODE);
  assertEquals(targets.length,0);
  targets=chooseTarget(1,NODE);
  assertEquals(targets.length,1);
  targets=chooseTarget(2,NODE);
  assertEquals(targets.length,2);
  assertFalse(isOnSameRack(targets[0],targets[1]));
  targets=chooseTarget(3,NODE);
  assertEquals(targets.length,3);
  assertTrue(isOnSameRack(targets[1],targets[2]));
  assertFalse(isOnSameRack(targets[0],targets[1]));
  verifyNoTwoTargetsOnSameNodeGroup(targets);
}
