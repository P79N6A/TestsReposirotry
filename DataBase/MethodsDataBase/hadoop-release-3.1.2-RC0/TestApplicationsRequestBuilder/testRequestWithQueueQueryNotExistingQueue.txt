@Test(expected=BadRequestException.class) public void testRequestWithQueueQueryNotExistingQueue() throws IOException {
  CapacityScheduler cs=mock(CapacityScheduler.class);
  when(cs.getQueueInfo(eq("queue1"),anyBoolean(),anyBoolean())).thenThrow(new IOException());
  ResourceManager rm=mock(ResourceManager.class);
  when(rm.getResourceScheduler()).thenReturn(cs);
  GetApplicationsRequest request=ApplicationsRequestBuilder.create().withQueueQuery(rm,"queue1").build();
  GetApplicationsRequest expectedRequest=getDefaultRequest();
  expectedRequest.setQueues(Sets.newHashSet("queue1"));
  assertEquals(expectedRequest,request);
}
