/** 
 * Test that a InputStream should throw an exception when not implementing CanUnbuffer This should throw an exception when the stream claims to have the unbuffer capability, but actually does not implement CanUnbuffer.
 */
@Test public void testUnbufferException(){
abstract class BuggyStream extends FSInputStream implements StreamCapabilities {
  }
  BuggyStream bs=Mockito.mock(BuggyStream.class);
  Mockito.when(bs.hasCapability(Mockito.anyString())).thenReturn(true);
  exception.expect(UnsupportedOperationException.class);
  exception.expectMessage(StreamCapabilitiesPolicy.CAN_UNBUFFER_NOT_IMPLEMENTED_MESSAGE);
  FSDataInputStream fs=new FSDataInputStream(bs);
  fs.unbuffer();
}
