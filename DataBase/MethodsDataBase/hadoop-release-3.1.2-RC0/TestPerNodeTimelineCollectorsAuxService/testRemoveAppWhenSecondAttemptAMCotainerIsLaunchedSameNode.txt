@Test(timeout=60000) public void testRemoveAppWhenSecondAttemptAMCotainerIsLaunchedSameNode() throws Exception {
  auxService=createCollectorAndAddApplication();
  assertTrue(auxService.hasApplication(appAttemptId.getApplicationId()));
  ContainerInitializationContext containerInitalizationContext=createContainerInitalizationContext(2);
  auxService.initializeContainer(containerInitalizationContext);
  assertTrue("Applicatin not found in collectors.",auxService.hasApplication(appAttemptId.getApplicationId()));
  ContainerTerminationContext context=createContainerTerminationContext(1);
  auxService.stopContainer(context);
  assertTrue("collector has removed application though 2nd attempt" + " is running this node",auxService.hasApplication(appAttemptId.getApplicationId()));
  context=createContainerTerminationContext(2);
  auxService.stopContainer(context);
  assertFalse("Application is not removed from collector",auxService.hasApplication(appAttemptId.getApplicationId()));
  auxService.close();
}
