@Test public void testAllXmlExamples() throws Exception {
  for (  Path path : XdocUtil.getXdocsFilePaths()) {
    final String input=new String(Files.readAllBytes(path),UTF_8);
    final String fileName=path.getFileName().toString();
    final Document document=XmlUtil.getRawXml(fileName,input,input);
    final NodeList sources=document.getElementsByTagName("source");
    for (int position=0; position < sources.getLength(); position++) {
      final String unserializedSource=sources.item(position).getTextContent().replace("...","").trim();
      if (unserializedSource.charAt(0) != '<' || unserializedSource.charAt(unserializedSource.length() - 1) != '>' || unserializedSource.contains("<!")) {
        continue;
      }
      final String code=buildXml(unserializedSource);
      XmlUtil.getRawXml(fileName,code,unserializedSource);
      Assert.assertTrue("Xml is invalid, old or has outdated structure",fileName.startsWith("anttask") || fileName.startsWith("releasenotes") || isValidCheckstyleXml(fileName,code,unserializedSource));
    }
  }
}
