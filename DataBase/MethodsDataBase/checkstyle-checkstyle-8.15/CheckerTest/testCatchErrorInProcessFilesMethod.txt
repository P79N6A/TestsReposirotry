@Test public void testCatchErrorInProcessFilesMethod() throws Exception {
  final File mock=PowerMockito.mock(File.class);
  final String errorMessage="Java Virtual Machine is broken" + " or has run out of resources necessary for it to continue operating.";
  final Error expectedError=new IOError(new InternalError(errorMessage));
  when(mock.lastModified()).thenThrow(expectedError);
  final Checker checker=new Checker();
  final List<File> filesToProcess=new ArrayList<>();
  filesToProcess.add(mock);
  try {
    checker.process(filesToProcess);
    fail("IOError is expected!");
  }
 catch (  Error error) {
    assertThat("Error cause differs from IOError",error.getCause(),instanceOf(IOError.class));
    assertThat("Error cause is not InternalError",error.getCause().getCause(),instanceOf(InternalError.class));
    assertEquals("Error message is not expected",errorMessage,error.getCause().getCause().getMessage());
  }
}
