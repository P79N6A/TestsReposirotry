/** 
 * While the nested ChoiceTwo state only has cycles, it has a cycle out of the choice state to a state that contains a path to a terminal. The validator doesn't validate that the path out actually has a path to the terminal so there are some invalid state machines that will pass validation.
 */
@Test public void choiceStateWithPathOut_IsValid(){
  assertNoCycle(stateMachine().startAt("Initial").state("Initial",passState().transition(next("ChoiceOne"))).state("ChoiceOne",choiceState().defaultStateName("DefaultOne").choice(choice().transition(next("ChoiceTwo")).condition(eq("$.foo","bar")))).state("DefaultOne",succeedState()).state("ChoiceTwo",choiceState().defaultStateName("DefaultTwo").choice(choice().transition(next("ChoiceOne")).condition(eq("$.foo","bar")))).state("DefaultTwo",passState().transition(next("ChoiceTwo"))));
}
