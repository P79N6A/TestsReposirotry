@Test(expected=ValidationException.class) public void choiceStateWithClosedCycle_IsNotValid(){
  assertCycle(stateMachine().startAt("Initial").state("Initial",passState().transition(next("Choice"))).state("Choice",choiceState().defaultStateName("Terminal").choice(choice().transition(next("Terminal")).condition(eq("$.foo","bar"))).choice(choice().transition(next("NonTerminal")).condition(eq("$.foo","bar")))).state("Terminal",passState().transition(end())).state("NonTerminal",passState().transition(next("Cyclic"))).state("Cyclic",passState().transition(next("NonTerminal"))));
}
