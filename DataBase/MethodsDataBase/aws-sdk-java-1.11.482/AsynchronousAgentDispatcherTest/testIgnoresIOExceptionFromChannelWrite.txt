@Test public void testIgnoresIOExceptionFromChannelWrite() throws IOException, InterruptedException {
  when(channel.write(any(ByteBuffer.class))).thenThrow(new IOException("buffer is full"));
  dispatcher.addWriteTask(new ApiCallAttemptMonitoringEvent().withApi("foo"),channel,8192);
  dispatcher.addWriteTask(new ApiCallAttemptMonitoringEvent().withApi("foo"),channel,8192);
  Thread.sleep(100);
  verify(channel,times(2)).write((any(ByteBuffer.class)));
}
