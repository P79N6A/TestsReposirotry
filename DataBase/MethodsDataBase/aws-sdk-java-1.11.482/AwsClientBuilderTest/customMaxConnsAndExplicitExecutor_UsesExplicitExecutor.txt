/** 
 * If a custom executor is set then the Max Connections in Client Configuration should be ignored and the executor should be used as is.
 */
@Test public void customMaxConnsAndExplicitExecutor_UsesExplicitExecutor() throws Exception {
  final int clientConfigMaxConns=10;
  final int customExecutorThreadCount=15;
  final ExecutorService customExecutor=Executors.newFixedThreadPool(customExecutorThreadCount);
  ExecutorService actualExecutor=builderWithRegion().withClientConfiguration(new ClientConfiguration().withMaxConnections(clientConfigMaxConns)).withExecutorFactory(new StaticExecutorFactory(customExecutor)).build().getAsyncParams().getExecutor();
  assertThat(actualExecutor,instanceOf(ThreadPoolExecutor.class));
  assertEquals(customExecutor,actualExecutor);
  assertEquals(customExecutorThreadCount,((ThreadPoolExecutor)actualExecutor).getMaximumPoolSize());
}
