/** 
 * Tests that the getCredentials parses the response properly when it receives a valid 200 response from endpoint.
 */
@Test public void testGetCredentialsReturnsValidResponseFromEcsEndpoint(){
  stubForSuccessResponse();
  BasicSessionCredentials credentials=(BasicSessionCredentials)containerCredentialsProvider.getCredentials();
  Assert.assertEquals(ACCESS_KEY_ID,credentials.getAWSAccessKeyId());
  Assert.assertEquals(SECRET_ACCESS_KEY,credentials.getAWSSecretKey());
  Assert.assertEquals(TOKEN,credentials.getSessionToken());
  Assert.assertEquals(new DateTime(EXPIRATION_DATE).toDate(),containerCredentialsProvider.getCredentialsExpiration());
}
