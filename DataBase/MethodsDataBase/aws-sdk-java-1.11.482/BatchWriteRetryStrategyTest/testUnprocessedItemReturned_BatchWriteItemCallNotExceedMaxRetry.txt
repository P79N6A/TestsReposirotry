@Test public void testUnprocessedItemReturned_BatchWriteItemCallNotExceedMaxRetry(){
  expectBatchWriteItemReturnUnprocessedItems().times(MAX_RETRY + 1);
  replay(ddbMock);
  List<FailedBatch> failedBatches=mapper.batchSave(new Item("foo"));
  verify(ddbMock);
  Assert.assertEquals(1,failedBatches.size());
  FailedBatch failedBatch=failedBatches.get(0);
  Assert.assertEquals("Failed batch should contain the same UnprocessedItems returned in the BatchWriteItem response.",unprocessedItems,failedBatch.getUnprocessedItems());
  Assert.assertNull("No exception should be set if the batch failed after max retry",failedBatch.getException());
}
