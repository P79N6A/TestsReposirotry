@Test public void test() throws Exception {
  final String content="<?xml version=\"1.0\" encoding=\"UTF-8\"?>" + "<Error>" + "  <Code>NoSuchKey</Code>"+ "  <Message>The resource you requested does not exist</Message>"+ "  <Resource>/mybucket/myfoto.jpg</Resource> "+ "  <RequestId>4442587FB7D0A2F9</RequestId>"+ "</Error>";
  ExecutorService es=Executors.newCachedThreadPool();
  Callable<Void> task=new Callable<Void>(){
    @Override public Void call() throws SAXException, IOException, ParserConfigurationException, XPathExpressionException {
      final Document document=XpathUtils.documentFrom(content);
      final String message=asString("Error/Message",document);
      assertEquals("The resource you requested does not exist",message);
      return null;
    }
  }
;
  @SuppressWarnings("unchecked") Callable<Void>[] a=new Callable[50];
  Arrays.fill(a,task);
  List<Future<Void>> futures=es.invokeAll(Arrays.asList(a));
  for (  Future<?> f : futures) {
    f.get();
  }
  task.call();
  task.call();
}
