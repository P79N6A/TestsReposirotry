/** 
 * Tests two profiles having same name. The second profile overrides the first profile. Also checks if the AWS Access Key ID and AWS Secret Access Key are mapped properly under the profile.
 */
@Test public void testTwoProfileWithSameName() throws URISyntaxException {
  ProfilesConfigFile profile=new ProfilesConfigFile(ProfileResourceLoader.profilesWithSameProfileName().asFile());
  AWSCredentials defaultCred=profile.getCredentials(DEFAULT_PROFILE_NAME);
  assertNotNull(defaultCred);
  assertTrue(defaultCred instanceof BasicAWSCredentials);
  AWSCredentials testCred=profile.getCredentials(PROFILE_NAME_TEST);
  assertNotNull(testCred);
  assertTrue(testCred instanceof AWSSessionCredentials);
  AWSSessionCredentials testSessionCred=(AWSSessionCredentials)testCred;
  assertEquals(testSessionCred.getAWSAccessKeyId(),"testProfile2");
  assertEquals(testSessionCred.getAWSSecretKey(),"testProfile2");
  assertEquals(testSessionCred.getSessionToken(),"testProfile2");
}
