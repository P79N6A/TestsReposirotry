@Test public void testPresigning() throws Exception {
  final String EXPECTED_AMZ_SIGNATURE="bf7ae1c2f266d347e290a2aee7b126d38b8a695149d003b9fab2ed1eb6d6ebda";
  final String EXPECTED_AMZ_CREDENTIALS="access/19810216/us-east-1/demo/aws4_request";
  final String EXPECTED_AMZ_HEADER="19810216T063000Z";
  final String EXPECTED_AMZ_EXPIRES="604800";
  AWSCredentials credentials=new BasicAWSCredentials("access","secret");
  SignableRequest<?> request=generateBasicRequest();
  Calendar c=new GregorianCalendar();
  c.set(1981,1,16,6,30,0);
  c.setTimeZone(TimeZone.getTimeZone("UTC"));
  signer.setOverrideDate(c.getTime());
  signer.setServiceName("demo");
  signer.presignRequest(request,credentials,null);
  assertEquals(EXPECTED_AMZ_SIGNATURE,request.getParameters().get("X-Amz-Signature").get(0));
  assertEquals(EXPECTED_AMZ_CREDENTIALS,request.getParameters().get("X-Amz-Credential").get(0));
  assertEquals(EXPECTED_AMZ_HEADER,request.getParameters().get("X-Amz-Date").get(0));
  assertEquals(EXPECTED_AMZ_EXPIRES,request.getParameters().get("X-Amz-Expires").get(0));
}
