@Test public void autoShutdown() throws Exception {
  assertEquals(0,IdleConnectionReaper.size());
  for (int i=0; i < 3; i++) {
    HttpClientConnectionManager m=new TestClientConnectionManager();
    HttpClientConnectionManager m2=new TestClientConnectionManager();
    assertTrue(IdleConnectionReaper.registerConnectionManager(m));
    assertEquals(1,IdleConnectionReaper.size());
    assertTrue(IdleConnectionReaper.registerConnectionManager(m2));
    assertEquals(2,IdleConnectionReaper.size());
    assertTrue(IdleConnectionReaper.removeConnectionManager(m));
    assertEquals(1,IdleConnectionReaper.size());
    assertTrue(IdleConnectionReaper.removeConnectionManager(m2));
    assertEquals(0,IdleConnectionReaper.size());
    assertFalse(IdleConnectionReaper.shutdown());
  }
}
