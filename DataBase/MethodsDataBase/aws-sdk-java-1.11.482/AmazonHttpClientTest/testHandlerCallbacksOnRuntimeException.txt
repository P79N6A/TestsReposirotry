@Test public void testHandlerCallbacksOnRuntimeException() throws IOException {
  Exception exception=new NullPointerException("BOOM");
  EasyMock.reset(httpClient);
  EasyMock.expect(httpClient.getConnectionManager()).andReturn(null).anyTimes();
  EasyMock.expect(httpClient.execute(EasyMock.<HttpUriRequest>anyObject(),EasyMock.<HttpContext>anyObject())).andThrow(exception).times(1);
  EasyMock.replay(httpClient);
  SetupMockRequestHandler2(mockHandler,1,MockRequestOutcome.Failure);
  ExecutionContext.Builder contextBuilder=ExecutionContext.builder();
  contextBuilder.withRequestHandler2s(requestHandlers);
  ExecutionContext context=contextBuilder.build();
  Request<?> request=new DefaultRequest<Object>(SERVER_NAME);
  request.setEndpoint(java.net.URI.create(URI_NAME));
  request.setContent(new ByteArrayInputStream(new byte[0]));
  try {
    client.requestExecutionBuilder().request(request).executionContext(context).execute();
  }
 catch (  Exception e) {
  }
  EasyMock.verify(mockHandler);
}
