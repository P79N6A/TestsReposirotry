@Test(timeout=TEST_TIMEOUT) public void clientExecutionTimeoutEnabled_WithShorterRequestTimeoutAndRetry_ThrowsClientExecutionTimeoutException() throws IOException {
  final int clientExecutionTimeout=1500;
  final int requestTimeout=1000;
  final int backoffTime=300;
  httpClient=new AmazonHttpClient(new ClientConfiguration().withClientExecutionTimeout(clientExecutionTimeout).withRequestTimeout(requestTimeout).withRetryPolicy(new RetryPolicy(PredefinedRetryPolicies.DEFAULT_RETRY_CONDITION,new FixedTimeBackoffStrategy(backoffTime),Integer.MAX_VALUE,false)));
  try {
    httpClient.requestExecutionBuilder().request(newGetRequest()).execute();
    fail("Exception expected");
  }
 catch (  AmazonClientException e) {
    assertThat(e,instanceOf(ClientExecutionTimeoutException.class));
    assertNumberOfTasksTriggered(httpClient.getClientExecutionTimer(),1);
    assertNumberOfTasksTriggered(httpClient.getHttpRequestTimer(),1);
  }
}
