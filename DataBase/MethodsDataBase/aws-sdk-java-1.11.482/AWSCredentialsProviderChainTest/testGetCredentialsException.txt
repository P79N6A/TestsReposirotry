/** 
 * Tests that getCredentials throws an thrown if all providers in the chain fail to provide credentials.
 */
@Test public void testGetCredentialsException(){
  MockCredentialsProvider provider1=new MockCredentialsProvider("Failed!");
  MockCredentialsProvider provider2=new MockCredentialsProvider("Bad!");
  AWSCredentialsProviderChain chain=new AWSCredentialsProviderChain(provider1,provider2);
  thrown.expect(SdkClientException.class);
  thrown.expectMessage(provider1.exceptionMessage);
  thrown.expectMessage(provider2.exceptionMessage);
  chain.getCredentials();
}
