/** 
 * Tests that, by default, the chain remembers which provider was able to provide credentials, and only calls that provider for any additional calls to getCredentials.
 */
@Test public void testReusingLastProvider() throws Exception {
  MockCredentialsProvider provider1=new MockCredentialsProvider();
  provider1.throwException=true;
  MockCredentialsProvider provider2=new MockCredentialsProvider();
  AWSCredentialsProviderChain chain=new AWSCredentialsProviderChain(provider1,provider2);
  assertEquals(0,provider1.getCredentialsCallCount);
  assertEquals(0,provider2.getCredentialsCallCount);
  chain.getCredentials();
  assertEquals(1,provider1.getCredentialsCallCount);
  assertEquals(1,provider2.getCredentialsCallCount);
  chain.getCredentials();
  assertEquals(1,provider1.getCredentialsCallCount);
  assertEquals(2,provider2.getCredentialsCallCount);
  chain.getCredentials();
  assertEquals(1,provider1.getCredentialsCallCount);
  assertEquals(3,provider2.getCredentialsCallCount);
}
