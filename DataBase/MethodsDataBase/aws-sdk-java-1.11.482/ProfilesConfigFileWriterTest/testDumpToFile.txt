@Test public void testDumpToFile() throws IOException {
  File tmpFile=File.createTempFile("credentials.",null);
  Profile[] abcd={new Profile("a",basicCredA),new Profile("b",basicCredB),new Profile("c",sessionCredC),new Profile("d",sessionCredD)};
  ProfilesConfigFileWriter.dumpToFile(tmpFile,true,abcd);
  checkCredentialsFile(tmpFile,abcd);
  Profile[] a={new Profile("a",basicCredA)};
  ProfilesConfigFileWriter.dumpToFile(tmpFile,true,a);
  checkCredentialsFile(tmpFile,a);
  try {
    ProfilesConfigFileWriter.dumpToFile(tmpFile,false,new Profile("a",basicCredA));
    fail("Should have thrown exception since the destination file already exists.");
  }
 catch (  AmazonClientException expected) {
  }
}
