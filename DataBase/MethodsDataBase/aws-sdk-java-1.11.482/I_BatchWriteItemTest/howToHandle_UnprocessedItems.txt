@Test public void howToHandle_UnprocessedItems() throws InterruptedException {
  TableWriteItems tableWriteItems=new TableWriteItems(TABLE_NAME).withHashAndRangeKeysToDelete(HASH_KEY_NAME,RANGE_KEY_NAME,"foo",1,"foo",2,"foo",3).withItemsToPut(new Item().withPrimaryKey(HASH_KEY_NAME,"TestingPutItemInBatch",RANGE_KEY_NAME,111).withString("someStringAttr","someStrVal1").withInt("someIntAttr",111),new Item().withPrimaryKey(HASH_KEY_NAME,"TestingPutItemInBatch",RANGE_KEY_NAME,222).withString("someStringAttr","someStrVal2").withInt("someIntAttr",222),new Item().withPrimaryKey(HASH_KEY_NAME,"TestingPutItemInBatch",RANGE_KEY_NAME,333).withString("someStringAttr","someStrVal3").withInt("someIntAttr",333));
  Map<String,List<WriteRequest>> unprocessed=null;
  int attempts=0;
  do {
    if (attempts > 0) {
      Thread.sleep((1 << attempts) * 1000);
    }
    attempts++;
    BatchWriteItemOutcome outcome;
    if (unprocessed == null || unprocessed.size() > 0) {
      outcome=dynamo.batchWriteItem(tableWriteItems);
    }
 else {
      outcome=dynamo.batchWriteItemUnprocessed(unprocessed);
    }
    System.out.println("outcome: " + outcome);
    unprocessed=outcome.getUnprocessedItems();
    System.out.println("unprocessed: " + unprocessed);
  }
 while (unprocessed.size() > 0);
}
