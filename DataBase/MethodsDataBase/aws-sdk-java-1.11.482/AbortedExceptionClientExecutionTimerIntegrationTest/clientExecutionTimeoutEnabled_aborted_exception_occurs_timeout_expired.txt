@Test(expected=ClientExecutionTimeoutException.class) public void clientExecutionTimeoutEnabled_aborted_exception_occurs_timeout_expired() throws Exception {
  ClientConfiguration config=new ClientConfiguration().withClientExecutionTimeout(CLIENT_EXECUTION_TIMEOUT).withMaxErrorRetry(0);
  ConnectionManagerAwareHttpClient rawHttpClient=createRawHttpClientSpy(config);
  httpClient=new AmazonHttpClient(config,rawHttpClient,null);
  execute(httpClient,new EmptyHttpRequest(server.getEndpoint(),HttpMethodName.PUT,new SdkBufferedInputStream(new InputStream(){
    @Override public int read() throws IOException {
      try {
        Thread.sleep(100);
      }
 catch (      InterruptedException e) {
        Thread.currentThread().interrupt();
      }
      return 1;
    }
  }
)));
}
