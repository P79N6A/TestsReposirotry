@Test public void testDelegateIsCalledWhenRequestIsMade(){
  ExecutionContext context=new ExecutionContext(true);
  String randomHost=UUID.randomUUID().toString();
  final Request<String> request=new DefaultRequest<String>("bob"){
  }
;
  request.setEndpoint(URI.create("http://" + randomHost + "/"));
  request.setHttpMethod(HttpMethodName.GET);
  try {
    testedClient.requestExecutionBuilder().request(request).executionContext(context).execute();
    Assert.fail("AmazonClientException is expected.");
  }
 catch (  AmazonClientException ace) {
  }
  assertTrue("dnsResolver should have been called at least once",dnsResolutionCounter.get() > 0);
  assertTrue("An attempt to resolve host " + randomHost + " should have been made",requestedHosts.contains(randomHost));
}
