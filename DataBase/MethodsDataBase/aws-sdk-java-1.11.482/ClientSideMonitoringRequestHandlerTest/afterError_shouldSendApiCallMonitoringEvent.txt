@Test public void afterError_shouldSendApiCallMonitoringEvent(){
  Request<?> request=getRequest();
  AWSRequestMetrics metrics=getMetrics(1);
  request.setAWSRequestMetrics(metrics);
  requestHandler.afterError(request,getResponse(request),new IOException(""));
  ArgumentCaptor<ApiCallMonitoringEvent> monitoringEventArgumentCaptor=ArgumentCaptor.forClass(ApiCallMonitoringEvent.class);
  verify(agentMonitoringListener,times(1)).handleEvent(monitoringEventArgumentCaptor.capture());
  verify(customMonitoringListener,times(1)).handleEvent(any(ApiCallMonitoringEvent.class));
  ApiCallMonitoringEvent event=monitoringEventArgumentCaptor.getValue();
  verifyApiCallMonitoringEvent(1,event);
}
