@Test public void afterAttempt_SessionTokenLowerCase_ShouldStillWork(){
  Request<?> request=getRequest();
  request.setAWSRequestMetrics(getMetrics(1));
  request.getHeaders().clear();
  Map<String,String> headers=new HashMap<String,String>();
  headers.put("x-amz-security-token",SECURITY_TOKENS);
  request.setHeaders(headers);
  requestHandler.afterAttempt(getContext(request));
  ArgumentCaptor<ApiCallAttemptMonitoringEvent> monitoringEventArgumentCaptor=ArgumentCaptor.forClass(ApiCallAttemptMonitoringEvent.class);
  verify(agentMonitoringListener,times(1)).handleEvent(monitoringEventArgumentCaptor.capture());
  verify(customMonitoringListener,times(1)).handleEvent(any(ApiCallAttemptMonitoringEvent.class));
  ApiCallAttemptMonitoringEvent event=monitoringEventArgumentCaptor.getValue();
  verifyRequiredEntries(event);
  verifySuccessfulAttemptEvent(event);
}
