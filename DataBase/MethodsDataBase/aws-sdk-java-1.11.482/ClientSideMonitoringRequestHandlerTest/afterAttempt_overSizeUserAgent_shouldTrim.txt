@Test public void afterAttempt_overSizeUserAgent_shouldTrim(){
  Request<?> request=getRequest();
  request.getOriginalRequest().getRequestClientOptions().appendUserAgent(RandomStringUtils.randomAlphanumeric(345));
  request.setAWSRequestMetrics(getMetrics(1));
  requestHandler.afterAttempt(getContext(getResponse(request)));
  ArgumentCaptor<ApiCallAttemptMonitoringEvent> monitoringEventArgumentCaptor=ArgumentCaptor.forClass(ApiCallAttemptMonitoringEvent.class);
  verify(agentMonitoringListener,times(1)).handleEvent(monitoringEventArgumentCaptor.capture());
  ApiCallAttemptMonitoringEvent monitoringEvent=monitoringEventArgumentCaptor.getValue();
  assertThat(monitoringEvent.getUserAgent().length(),is(lessThanOrEqualTo(256)));
}
