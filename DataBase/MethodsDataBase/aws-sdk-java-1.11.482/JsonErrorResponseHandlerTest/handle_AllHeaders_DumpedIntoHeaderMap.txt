/** 
 * All headers (Including ones that populate other fields like request id) should be dumped into the header map.
 */
@Test public void handle_AllHeaders_DumpedIntoHeaderMap() throws Exception {
  httpResponse.setStatusCode(500);
  httpResponse.addHeader("FooHeader","FooValue");
  httpResponse.addHeader(HttpResponseHandler.X_AMZN_REQUEST_ID_HEADER,"1234");
  expectUnmarshallerMatches();
  when(unmarshaller.unmarshall((JsonNode)anyObject())).thenReturn(new CustomException("error"));
  AmazonServiceException ase=responseHandler.handle(httpResponse);
  assertThat(ase.getHttpHeaders(),hasEntry("FooHeader","FooValue"));
  assertThat(ase.getHttpHeaders(),hasEntry(HttpResponseHandler.X_AMZN_REQUEST_ID_HEADER,"1234"));
}
