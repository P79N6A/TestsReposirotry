/** 
 * Test that loadCredentials returns proper credentials when response from client is in proper Json format.
 */
@Test public void testLoadCredentialsParsesJsonResponseProperly(){
  stubForSuccessResponseWithCustomBody(200,successResponse);
  TestCredentialsProvider credentialsProvider=new TestCredentialsProvider();
  AWSSessionCredentials credentials=(AWSSessionCredentials)credentialsProvider.getCredentials();
  assertEquals("ACCESS_KEY_ID",credentials.getAWSAccessKeyId());
  assertEquals("SECRET_ACCESS_KEY",credentials.getAWSSecretKey());
  assertEquals("TOKEN_TOKEN_TOKEN",credentials.getSessionToken());
}
