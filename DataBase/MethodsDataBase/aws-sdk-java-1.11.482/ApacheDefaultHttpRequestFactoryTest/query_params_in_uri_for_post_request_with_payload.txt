@Test public void query_params_in_uri_for_post_request_with_payload() throws IOException, URISyntaxException {
  final Request<Object> request=newDefaultRequest(HttpMethodName.POST);
  request.withParameter("foo","bar");
  final String payload="dummy string stream";
  request.setContent(new StringInputStream(payload));
  HttpRequestBase requestBase=requestFactory.create(request,settings);
  Assert.assertThat(requestBase,Matchers.instanceOf(HttpPost.class));
  Assert.assertEquals("foo=bar",requestBase.getURI().getQuery());
  Assert.assertThat(requestBase,Matchers.instanceOf(HttpPost.class));
  Assert.assertEquals(payload,IOUtils.toString(((HttpPost)requestBase).getEntity().getContent()));
}
