@Test public void request_has_no_proxy_config_when_proxy_auth_disabled() throws Exception {
  List<ProxyAuthenticationMethod> authMethods=Collections.singletonList(ProxyAuthenticationMethod.BASIC);
  ClientConfiguration configuration=new ClientConfiguration().withProxyHost("localhost").withProxyPort(80).withProxyAuthenticationMethods(authMethods);
  HttpClientSettings settings=HttpClientSettings.adapt(configuration);
  HttpRequestBase requestBase=requestFactory.create(newDefaultRequest(HttpMethodName.POST),settings);
  Assert.assertThat(requestBase.getConfig().getProxyPreferredAuthSchemes(),Matchers.nullValue());
}
