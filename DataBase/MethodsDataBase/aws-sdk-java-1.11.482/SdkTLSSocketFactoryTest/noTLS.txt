@Test public void noTLS() throws NoSuchAlgorithmException {
  SdkTLSSocketFactory f=new SdkTLSSocketFactory(SSLContext.getDefault(),null);
  TestSSLSocket socket=new TestSSLSocket(){
    @Override public String[] getSupportedProtocols(){
      return shuffle(new String[]{"SSLv2Hello","SSLv3"});
    }
    @Override public String[] getEnabledProtocols(){
      return new String[]{"SSLv3"};
    }
  }
;
  f.prepareSocket(socket);
  assertArrayEquals(new String[]{"SSLv3"},socket.getCapturedProtocols());
}
