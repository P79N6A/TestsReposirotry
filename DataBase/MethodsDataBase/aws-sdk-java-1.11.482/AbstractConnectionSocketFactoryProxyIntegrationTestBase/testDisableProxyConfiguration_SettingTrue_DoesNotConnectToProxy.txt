@Test public void testDisableProxyConfiguration_SettingTrue_DoesNotConnectToProxy() throws InterruptedException, ExecutionException, IOException, HttpException {
  Socket s=null;
  try {
    HttpClientSettings settings=HttpClientSettings.adapt(new ClientConfiguration().withDisableSocketProxy(true));
    HttpContext ctx=ApacheUtils.newClientContext(settings,new HashMap<String,String>());
    s=getFactory().createSocket(ctx);
    s.connect(new InetSocketAddress("s3.amazonaws.com",80));
  }
  finally {
    if (s != null) {
      s.close();
    }
  }
  assertEquals(0,proxy.getAcceptCount());
}
