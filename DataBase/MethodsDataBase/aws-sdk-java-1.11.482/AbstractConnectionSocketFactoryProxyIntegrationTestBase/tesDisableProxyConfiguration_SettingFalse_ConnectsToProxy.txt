@Test public void tesDisableProxyConfiguration_SettingFalse_ConnectsToProxy() throws InterruptedException, ExecutionException, IOException, HttpException {
  Socket s=null;
  try {
    HttpClientSettings settings=HttpClientSettings.adapt(new ClientConfiguration().withDisableSocketProxy(false));
    HttpContext ctx=ApacheUtils.newClientContext(settings,new HashMap<String,String>());
    s=getFactory().createSocket(ctx);
    s.connect(new InetSocketAddress("s3.amazonaws.com",80));
  }
 catch (  IOException ignored) {
    ignored.printStackTrace();
  }
 finally {
    if (s != null) {
      s.close();
    }
  }
  assertEquals(1,proxy.getAcceptCount());
}
