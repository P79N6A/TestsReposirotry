/** 
 * Tests that we correctly handle when the metadata service credentials have expired.
 */
@Test public void testSessionCredentials_Expired() throws Exception {
  mockServer.setResponseFileName("sessionResponseExpired");
  mockServer.setAvailableSecurityCredentials("test-credentials");
  InstanceProfileCredentialsProvider credentialsProvider=new InstanceProfileCredentialsProvider();
  try {
    credentialsProvider.getCredentials();
    fail("Expected an AmazonClientException, but wasn't thrown");
  }
 catch (  AmazonClientException ace) {
    assertNotNull(ace.getMessage());
  }
}
