/** 
 * Tests that we correctly handle when no instance profiles are available through the metadata service.
 */
@Test public void testNoInstanceProfiles() throws Exception {
  mockServer.setResponseFileName("sessionResponse");
  mockServer.setAvailableSecurityCredentials("");
  InstanceProfileCredentialsProvider credentialsProvider=new InstanceProfileCredentialsProvider();
  try {
    credentialsProvider.getCredentials();
    fail("Expected an AmazonClientException, but wasn't thrown");
  }
 catch (  AmazonClientException ace) {
    assertNotNull(ace.getMessage());
  }
}
