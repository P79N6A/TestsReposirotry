@Test public void testVectorsPerRfc4648() throws NoSuchAlgorithmException, UnsupportedEncodingException {
  String[] testVectors={"","f","fo","foo","foob","fooba","foobar"};
  String[] expected={"","Zg==","Zm8=","Zm9v","Zm9vYg==","Zm9vYmE=","Zm9vYmFy"};
  for (int i=0; i < testVectors.length; i++) {
    String data=testVectors[i];
    byte[] source=data.getBytes("UTF-8");
    String b64encoded=Base64.encodeAsString(data.getBytes("UTF-8"));
    Assert.assertEquals(expected[i],b64encoded);
    byte[] b64=b64encoded.getBytes("UTF-8");
    byte[] decoded=Base64.decode(b64);
    Assert.assertTrue(Arrays.equals(source,decoded));
  }
}
