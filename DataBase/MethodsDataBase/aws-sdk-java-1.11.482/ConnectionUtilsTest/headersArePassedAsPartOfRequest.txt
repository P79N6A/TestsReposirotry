@Test public void headersArePassedAsPartOfRequest() throws IOException {
  HttpURLConnection connection=sut.connectToEndpoint(URI.create("http://localhost:" + mockServer.port()),Collections.singletonMap("HeaderA","ValueA"));
  connection.getResponseCode();
  mockServer.verify(getRequestedFor(urlMatching("/")).withHeader("HeaderA",equalTo("ValueA")));
}
