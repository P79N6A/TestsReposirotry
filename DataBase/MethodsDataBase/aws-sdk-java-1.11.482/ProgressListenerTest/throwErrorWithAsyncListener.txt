@Test public void throwErrorWithAsyncListener() throws InterruptedException {
  final CountDownLatch latch=new CountDownLatch(1);
  ProgressListener asyncListener=new ProgressListener(){
    @Override public void progressChanged(    ProgressEvent progressEvent){
      throw new Error();
    }
  }
;
  ExceptionReporter reporter=new ExceptionReporter(asyncListener){
    @Override public void progressChanged(    ProgressEvent progressEvent){
      super.progressChanged(progressEvent);
      latch.countDown();
    }
  }
;
  publishProgress(reporter,ProgressEventType.CLIENT_REQUEST_STARTED_EVENT);
  latch.await();
  assertNotNull(reporter.getCause());
  try {
    reporter.throwExceptionIfAny();
    fail();
  }
 catch (  AmazonClientException ex) {
  }
}
