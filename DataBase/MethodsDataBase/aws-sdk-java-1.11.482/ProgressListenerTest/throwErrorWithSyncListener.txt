@Test public void throwErrorWithSyncListener(){
  ProgressListener syncListener=new SyncProgressListener(){
    @Override public void progressChanged(    ProgressEvent progressEvent){
      throw new Error();
    }
  }
;
  ExceptionReporter reporter=ExceptionReporter.wrap(syncListener);
  publishProgress(syncListener,ProgressEventType.CLIENT_REQUEST_STARTED_EVENT);
  assertNull(reporter.getCause());
  publishProgress(reporter,ProgressEventType.CLIENT_REQUEST_STARTED_EVENT);
  assertNotNull(reporter.getCause());
  try {
    reporter.throwExceptionIfAny();
    fail();
  }
 catch (  AmazonClientException ex) {
  }
}
