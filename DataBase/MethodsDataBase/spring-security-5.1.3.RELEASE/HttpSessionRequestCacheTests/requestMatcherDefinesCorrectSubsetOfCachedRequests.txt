@Test public void requestMatcherDefinesCorrectSubsetOfCachedRequests() throws Exception {
  HttpSessionRequestCache cache=new HttpSessionRequestCache();
  cache.setRequestMatcher(new RequestMatcher(){
    public boolean matches(    HttpServletRequest request){
      return request.getMethod().equals("GET");
    }
  }
);
  MockHttpServletRequest request=new MockHttpServletRequest("POST","/destination");
  MockHttpServletResponse response=new MockHttpServletResponse();
  cache.saveRequest(request,response);
  assertThat(cache.getRequest(request,response)).isNull();
  assertThat(cache.getRequest(new MockHttpServletRequest(),new MockHttpServletResponse())).isNull();
  assertThat(cache.getMatchingRequest(request,response)).isNull();
}
