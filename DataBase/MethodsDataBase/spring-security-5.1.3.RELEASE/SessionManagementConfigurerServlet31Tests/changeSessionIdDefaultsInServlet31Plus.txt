@Test public void changeSessionIdDefaultsInServlet31Plus() throws Exception {
  spy(ReflectionUtils.class);
  Method method=mock(Method.class);
  MockHttpServletRequest request=new MockHttpServletRequest("GET","");
  request.getSession();
  request.setServletPath("/login");
  request.setMethod("POST");
  request.setParameter("username","user");
  request.setParameter("password","password");
  HttpSessionCsrfTokenRepository repository=new HttpSessionCsrfTokenRepository();
  CsrfToken token=repository.generateToken(request);
  repository.saveToken(token,request,response);
  request.setParameter(token.getParameterName(),token.getToken());
  when(ReflectionUtils.findMethod(HttpServletRequest.class,"changeSessionId")).thenReturn(method);
  loadConfig(SessionManagementDefaultSessionFixationServlet31Config.class);
  springSecurityFilterChain.doFilter(request,response,chain);
  verifyStatic(ReflectionUtils.class);
  ReflectionUtils.invokeMethod(same(method),any(HttpServletRequest.class));
}
