@SuppressWarnings("unchecked") @Test public void convertWhenAuthenticationMethodHeaderThenGetRequest(){
  ClientRegistration clientRegistration=TestClientRegistrations.clientRegistration().build();
  OAuth2UserRequest userRequest=new OAuth2UserRequest(clientRegistration,this.createAccessToken());
  RequestEntity<?> requestEntity=this.converter.convert(userRequest);
  assertThat(requestEntity.getMethod()).isEqualTo(HttpMethod.GET);
  assertThat(requestEntity.getUrl().toASCIIString()).isEqualTo(clientRegistration.getProviderDetails().getUserInfoEndpoint().getUri());
  HttpHeaders headers=requestEntity.getHeaders();
  assertThat(headers.getAccept()).contains(MediaType.APPLICATION_JSON);
  assertThat(headers.getFirst(HttpHeaders.AUTHORIZATION)).isEqualTo("Bearer " + userRequest.getAccessToken().getTokenValue());
}
