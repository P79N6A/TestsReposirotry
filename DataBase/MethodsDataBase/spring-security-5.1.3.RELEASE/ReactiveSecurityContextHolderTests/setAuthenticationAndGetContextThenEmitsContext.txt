@Test public void setAuthenticationAndGetContextThenEmitsContext(){
  Authentication expectedAuthentication=new TestingAuthenticationToken("user","password","ROLE_USER");
  Mono<Authentication> authentication=Mono.subscriberContext().flatMap(c -> ReactiveSecurityContextHolder.getContext()).map(SecurityContext::getAuthentication).subscriberContext(ReactiveSecurityContextHolder.withAuthentication(expectedAuthentication));
  StepVerifier.create(authentication).expectNext(expectedAuthentication).verifyComplete();
}
