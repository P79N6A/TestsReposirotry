@Test public void testNormalOperation() throws Exception {
  MockHttpServletRequest request=new MockHttpServletRequest();
  request.setServletPath("/login/cas");
  request.addParameter("ticket","ST-0-ER94xMJmn6pha35CQRoZ");
  CasAuthenticationFilter filter=new CasAuthenticationFilter();
  filter.setAuthenticationManager(new AuthenticationManager(){
    public Authentication authenticate(    Authentication a){
      return a;
    }
  }
);
  assertThat(filter.requiresAuthentication(request,new MockHttpServletResponse())).isTrue();
  Authentication result=filter.attemptAuthentication(request,new MockHttpServletResponse());
  assertThat(result != null).isTrue();
}
