@Test public void testRequiresAuthenticationProxyRequest(){
  CasAuthenticationFilter filter=new CasAuthenticationFilter();
  MockHttpServletRequest request=new MockHttpServletRequest();
  MockHttpServletResponse response=new MockHttpServletResponse();
  request.setServletPath("/pgtCallback");
  assertThat(filter.requiresAuthentication(request,response)).isFalse();
  filter.setProxyReceptorUrl(request.getServletPath());
  assertThat(filter.requiresAuthentication(request,response)).isFalse();
  filter.setProxyGrantingTicketStorage(mock(ProxyGrantingTicketStorage.class));
  assertThat(filter.requiresAuthentication(request,response)).isTrue();
  request.setServletPath("/other");
  assertThat(filter.requiresAuthentication(request,response)).isFalse();
}
