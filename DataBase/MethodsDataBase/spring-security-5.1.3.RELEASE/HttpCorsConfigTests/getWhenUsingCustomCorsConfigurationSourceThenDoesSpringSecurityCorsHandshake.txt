@Test public void getWhenUsingCustomCorsConfigurationSourceThenDoesSpringSecurityCorsHandshake() throws Exception {
  this.spring.configLocations(this.xml("WithCorsConfigurationSource")).autowire();
  this.mvc.perform(get("/").with(this.approved())).andExpect(corsResponseHeaders()).andExpect((status().isIAmATeapot()));
  this.mvc.perform(options("/").with(this.preflight())).andExpect(corsResponseHeaders()).andExpect(status().isOk());
}
