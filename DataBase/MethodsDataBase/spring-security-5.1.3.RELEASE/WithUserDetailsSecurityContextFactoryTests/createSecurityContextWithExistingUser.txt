@Test public void createSecurityContextWithExistingUser(){
  String username="user";
  when(this.beans.getBean(ReactiveUserDetailsService.class)).thenThrow(new NoSuchBeanDefinitionException(""));
  when(beans.getBean(UserDetailsService.class)).thenReturn(userDetailsService);
  when(withUserDetails.value()).thenReturn(username);
  when(userDetailsService.loadUserByUsername(username)).thenReturn(userDetails);
  SecurityContext context=factory.createSecurityContext(withUserDetails);
  assertThat(context.getAuthentication()).isInstanceOf(UsernamePasswordAuthenticationToken.class);
  assertThat(context.getAuthentication().getPrincipal()).isEqualTo(userDetails);
  verify(beans).getBean(UserDetailsService.class);
}
