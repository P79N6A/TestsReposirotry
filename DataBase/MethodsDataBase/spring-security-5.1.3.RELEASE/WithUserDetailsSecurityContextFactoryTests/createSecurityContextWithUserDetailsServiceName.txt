@Test public void createSecurityContextWithUserDetailsServiceName(){
  String beanName="secondUserDetailsServiceBean";
  String username="user";
  when(this.beans.getBean(beanName,ReactiveUserDetailsService.class)).thenThrow(new BeanNotOfRequiredTypeException("",ReactiveUserDetailsService.class,UserDetailsService.class));
  when(withUserDetails.value()).thenReturn(username);
  when(withUserDetails.userDetailsServiceBeanName()).thenReturn(beanName);
  when(userDetailsService.loadUserByUsername(username)).thenReturn(userDetails);
  when(beans.getBean(beanName,UserDetailsService.class)).thenReturn(userDetailsService);
  SecurityContext context=factory.createSecurityContext(withUserDetails);
  assertThat(context.getAuthentication()).isInstanceOf(UsernamePasswordAuthenticationToken.class);
  assertThat(context.getAuthentication().getPrincipal()).isEqualTo(userDetails);
  verify(beans).getBean(beanName,UserDetailsService.class);
}
