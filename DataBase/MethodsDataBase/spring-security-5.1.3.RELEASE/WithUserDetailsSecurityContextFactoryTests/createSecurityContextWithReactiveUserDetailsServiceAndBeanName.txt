@Test public void createSecurityContextWithReactiveUserDetailsServiceAndBeanName(){
  String beanName="secondUserDetailsServiceBean";
  String username="user";
  when(withUserDetails.value()).thenReturn(username);
  when(withUserDetails.userDetailsServiceBeanName()).thenReturn(beanName);
  when(this.beans.getBean(beanName,ReactiveUserDetailsService.class)).thenReturn(this.reactiveUserDetailsService);
  when(this.reactiveUserDetailsService.findByUsername(username)).thenReturn(Mono.just(userDetails));
  SecurityContext context=factory.createSecurityContext(withUserDetails);
  assertThat(context.getAuthentication()).isInstanceOf(UsernamePasswordAuthenticationToken.class);
  assertThat(context.getAuthentication().getPrincipal()).isEqualTo(userDetails);
  verify(this.beans).getBean(beanName,ReactiveUserDetailsService.class);
}
