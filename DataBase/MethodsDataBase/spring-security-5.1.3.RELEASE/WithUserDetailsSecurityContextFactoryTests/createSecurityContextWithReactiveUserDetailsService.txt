@Test public void createSecurityContextWithReactiveUserDetailsService(){
  String username="user";
  when(withUserDetails.value()).thenReturn(username);
  when(this.beans.getBean(ReactiveUserDetailsService.class)).thenReturn(this.reactiveUserDetailsService);
  when(this.reactiveUserDetailsService.findByUsername(username)).thenReturn(Mono.just(userDetails));
  SecurityContext context=factory.createSecurityContext(withUserDetails);
  assertThat(context.getAuthentication()).isInstanceOf(UsernamePasswordAuthenticationToken.class);
  assertThat(context.getAuthentication().getPrincipal()).isEqualTo(userDetails);
  verify(this.beans).getBean(ReactiveUserDetailsService.class);
}
