@Test(expected=IllegalArgumentException.class) public void configMissingUserDetailsServiceFails() throws Exception {
  SwitchUserFilter filter=new SwitchUserFilter();
  filter.setSwitchUserUrl("/login/impersonate");
  filter.setExitUserUrl("/logout/impersonate");
  filter.setTargetUrl("/main.jsp");
  filter.afterPropertiesSet();
}
