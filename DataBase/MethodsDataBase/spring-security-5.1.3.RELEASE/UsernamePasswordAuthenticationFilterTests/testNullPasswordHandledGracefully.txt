@Test public void testNullPasswordHandledGracefully() throws Exception {
  MockHttpServletRequest request=new MockHttpServletRequest("POST","/");
  request.addParameter(UsernamePasswordAuthenticationFilter.SPRING_SECURITY_FORM_USERNAME_KEY,"rod");
  UsernamePasswordAuthenticationFilter filter=new UsernamePasswordAuthenticationFilter();
  filter.setAuthenticationManager(createAuthenticationManager());
  assertThat(filter.attemptAuthentication(request,new MockHttpServletResponse())).isNotNull();
}
