/** 
 * SEC-571
 */
@Test public void noSessionIsCreatedIfAllowSessionCreationIsFalse() throws Exception {
  MockHttpServletRequest request=new MockHttpServletRequest();
  request.setMethod("POST");
  UsernamePasswordAuthenticationFilter filter=new UsernamePasswordAuthenticationFilter();
  filter.setAllowSessionCreation(false);
  filter.setAuthenticationManager(createAuthenticationManager());
  filter.attemptAuthentication(request,new MockHttpServletResponse());
  assertThat(request.getSession(false)).isNull();
}
