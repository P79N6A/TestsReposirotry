@Test public void authenticateWhenPasswordEncoderAndFailThenFail(){
  this.manager.setPasswordEncoder(this.passwordEncoder);
  when(this.passwordEncoder.matches(any(),any())).thenReturn(false);
  User user=new User(this.username,this.password,AuthorityUtils.createAuthorityList("ROLE_USER"));
  when(this.repository.findByUsername(user.getUsername())).thenReturn(Mono.just(user));
  UsernamePasswordAuthenticationToken token=new UsernamePasswordAuthenticationToken(this.username,this.password);
  Mono<Authentication> authentication=this.manager.authenticate(token);
  StepVerifier.create(authentication).expectError(BadCredentialsException.class).verify();
}
