@Test public void authenticateWhenSuccessThenSuccess(){
  UserDetails user=PasswordEncodedUser.withUsername(this.username).password(this.password).roles("USER").build();
  when(repository.findByUsername(user.getUsername())).thenReturn(Mono.just(user));
  UsernamePasswordAuthenticationToken token=new UsernamePasswordAuthenticationToken(username,password);
  Authentication authentication=manager.authenticate(token).block();
  assertThat(authentication).isEqualTo(authentication);
}
