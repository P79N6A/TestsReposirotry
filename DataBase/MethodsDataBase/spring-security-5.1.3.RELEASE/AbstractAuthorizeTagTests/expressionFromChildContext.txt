@Test @SuppressWarnings("rawtypes") public void expressionFromChildContext() throws IOException {
  SecurityContextHolder.getContext().setAuthentication(new TestingAuthenticationToken("user","pass","USER"));
  DefaultWebSecurityExpressionHandler expected=new DefaultWebSecurityExpressionHandler();
  tag.setAccess("permitAll");
  WebApplicationContext wac=mock(WebApplicationContext.class);
  when(wac.getBeansOfType(SecurityExpressionHandler.class)).thenReturn(Collections.<String,SecurityExpressionHandler>singletonMap("wipe",expected));
  servletContext.setAttribute("org.springframework.web.servlet.FrameworkServlet.CONTEXT.dispatcher",wac);
  assertThat(tag.authorize()).isTrue();
}
