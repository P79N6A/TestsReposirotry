@Test public void buildWhenAllAttributesProvidedThenAllAttributesAreSet(){
  Instant expiresAt=Instant.now().plusSeconds(5);
  Set<String> scopes=new LinkedHashSet<>(Arrays.asList("scope1","scope2"));
  Map<String,Object> additionalParameters=new HashMap<>();
  additionalParameters.put("param1","value1");
  additionalParameters.put("param2","value2");
  OAuth2AccessTokenResponse tokenResponse=OAuth2AccessTokenResponse.withToken(TOKEN_VALUE).tokenType(OAuth2AccessToken.TokenType.BEARER).expiresIn(expiresAt.toEpochMilli()).scopes(scopes).refreshToken(REFRESH_TOKEN_VALUE).additionalParameters(additionalParameters).build();
  assertThat(tokenResponse.getAccessToken()).isNotNull();
  assertThat(tokenResponse.getAccessToken().getTokenValue()).isEqualTo(TOKEN_VALUE);
  assertThat(tokenResponse.getAccessToken().getTokenType()).isEqualTo(OAuth2AccessToken.TokenType.BEARER);
  assertThat(tokenResponse.getAccessToken().getIssuedAt()).isNotNull();
  assertThat(tokenResponse.getAccessToken().getExpiresAt()).isAfterOrEqualTo(expiresAt);
  assertThat(tokenResponse.getAccessToken().getScopes()).isEqualTo(scopes);
  assertThat(tokenResponse.getRefreshToken().getTokenValue()).isEqualTo(REFRESH_TOKEN_VALUE);
  assertThat(tokenResponse.getAdditionalParameters()).isEqualTo(additionalParameters);
}
