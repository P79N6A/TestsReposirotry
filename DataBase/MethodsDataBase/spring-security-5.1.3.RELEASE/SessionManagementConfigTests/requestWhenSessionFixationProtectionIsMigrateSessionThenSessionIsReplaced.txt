@Test public void requestWhenSessionFixationProtectionIsMigrateSessionThenSessionIsReplaced() throws Exception {
  this.spring.configLocations(this.xml("SessionFixationProtectionMigrateSession")).autowire();
  MockHttpSession session=new MockHttpSession();
  String sessionId=session.getId();
  MvcResult result=this.mvc.perform(get("/auth").session(session).with(httpBasic("user","password"))).andExpect(session()).andReturn();
  assertThat(result.getRequest().getSession(false).getId()).isNotEqualTo(sessionId);
}
