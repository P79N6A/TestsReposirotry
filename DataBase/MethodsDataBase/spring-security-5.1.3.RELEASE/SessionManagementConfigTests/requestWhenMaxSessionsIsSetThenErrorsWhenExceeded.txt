@Test public void requestWhenMaxSessionsIsSetThenErrorsWhenExceeded() throws Exception {
  this.spring.configLocations(this.xml("ConcurrencyControlMaxSessions")).autowire();
  this.mvc.perform(get("/auth").with(httpBasic("user","password"))).andExpect(status().isOk());
  this.mvc.perform(get("/auth").with(httpBasic("user","password"))).andExpect(status().isOk());
  this.mvc.perform(get("/auth").with(httpBasic("user","password"))).andExpect(redirectedUrl("/max-exceeded"));
}
