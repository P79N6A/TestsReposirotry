@Test public void sendWhenInterceptWiredForMessageTypeThenDeniesOnTypeMismatch(){
  this.spring.configLocations(xml("MessageInterceptTypeConfig")).autowire();
  Message<?> message=message("/permitAll",SimpMessageType.MESSAGE);
  assertThatCode(send(message)).doesNotThrowAnyException();
  message=message("/permitAll",SimpMessageType.UNSUBSCRIBE);
  assertThatThrownBy(send(message)).hasCauseInstanceOf(AccessDeniedException.class);
  message=message("/anyOther",SimpMessageType.MESSAGE);
  assertThatThrownBy(send(message)).hasCauseInstanceOf(AccessDeniedException.class);
}
