@Test public void fetchAttributesReturnsExpectedValues() throws Exception {
  OpenID4JavaConsumer consumer=new OpenID4JavaConsumer(new NullAxFetchListFactory());
  Message msg=mock(Message.class);
  FetchResponse fr=mock(FetchResponse.class);
  when(msg.hasExtension(AxMessage.OPENID_NS_AX)).thenReturn(true);
  when(msg.getExtension(AxMessage.OPENID_NS_AX)).thenReturn(fr);
  when(fr.getAttributeValues("a")).thenReturn(Arrays.asList("x","y"));
  List<OpenIDAttribute> fetched=consumer.fetchAxAttributes(msg,attributes);
  assertThat(fetched).hasSize(1);
  assertThat(fetched.get(0).getValues()).hasSize(2);
}
