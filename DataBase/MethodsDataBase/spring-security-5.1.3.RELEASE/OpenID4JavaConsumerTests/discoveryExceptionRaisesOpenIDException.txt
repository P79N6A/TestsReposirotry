@Test(expected=OpenIDConsumerException.class) public void discoveryExceptionRaisesOpenIDException() throws Exception {
  ConsumerManager mgr=mock(ConsumerManager.class);
  OpenID4JavaConsumer consumer=new OpenID4JavaConsumer(mgr,new NullAxFetchListFactory());
  when(mgr.discover(any())).thenThrow(new DiscoveryException("msg"));
  consumer.beginConsumption(new MockHttpServletRequest(),"","","");
}
