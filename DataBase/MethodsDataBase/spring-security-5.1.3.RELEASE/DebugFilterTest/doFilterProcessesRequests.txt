@Test public void doFilterProcessesRequests() throws Exception {
  filter.doFilter(request,response,filterChain);
  verify(logger).info(anyString());
  verify(request).setAttribute(requestAttr,Boolean.TRUE);
  verify(fcp).doFilter(requestCaptor.capture(),eq(response),eq(filterChain));
  assertThat(requestCaptor.getValue().getClass()).isEqualTo(DebugRequestWrapper.class);
  verify(request).removeAttribute(requestAttr);
}
