@Test public void doFilterLogsProperly() throws Exception {
  MockHttpServletRequest request=new MockHttpServletRequest();
  request.setMethod("GET");
  request.setServletPath("/path");
  request.setPathInfo("/");
  request.addHeader("A","A Value");
  request.addHeader("A","Another Value");
  request.addHeader("B","B Value");
  filter.doFilter(request,response,filterChain);
  verify(logger).info(logCaptor.capture());
  assertThat(logCaptor.getValue()).isEqualTo("Request received for GET '/path/':\n" + "\n" + request + "\n"+ "\n"+ "servletPath:/path\n"+ "pathInfo:/\n"+ "headers: \n"+ "A: A Value, Another Value\n"+ "B: B Value\n"+ "\n"+ "\n"+ "Security filter chain: no match");
}
