@Test public void testNormalOperationWithNullQueryString() throws Exception {
  MockHttpServletRequest request=new MockHttpServletRequest("GET","/bigWebApp/hello");
  request.setScheme("http");
  request.setServerName("www.example.com");
  request.setServerPort(80);
  MockHttpServletResponse response=new MockHttpServletResponse();
  RetryWithHttpsEntryPoint ep=new RetryWithHttpsEntryPoint();
  ep.setPortMapper(new PortMapperImpl());
  ep.setPortResolver(new MockPortResolver(80,443));
  ep.commence(request,response);
  assertThat(response.getRedirectedUrl()).isEqualTo("https://www.example.com/bigWebApp/hello");
}
