@Test public void testNormalOperationWithRenewTrue() throws Exception {
  ServiceProperties sp=new ServiceProperties();
  sp.setSendRenew(true);
  sp.setService("https://mycompany.com/bigWebApp/login/cas");
  CasAuthenticationEntryPoint ep=new CasAuthenticationEntryPoint();
  ep.setLoginUrl("https://cas/login");
  ep.setServiceProperties(sp);
  MockHttpServletRequest request=new MockHttpServletRequest();
  request.setRequestURI("/some_path");
  MockHttpServletResponse response=new MockHttpServletResponse();
  ep.afterPropertiesSet();
  ep.commence(request,response,null);
  assertThat("https://cas/login?service=" + URLEncoder.encode("https://mycompany.com/bigWebApp/login/cas","UTF-8") + "&renew=true").isEqualTo(response.getRedirectedUrl());
}
