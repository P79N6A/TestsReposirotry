@Test public void filterWhenPrincipalNotNullThenContextPopulated(){
  Mono<Void> result=this.filter.filter(this.exchange,new DefaultWebFilterChain(e -> e.getPrincipal().doOnSuccess(contextPrincipal -> assertThat(contextPrincipal).isEqualTo(this.principal)).then())).subscriberContext(ReactiveSecurityContextHolder.withAuthentication(this.principal));
  StepVerifier.create(result).verifyComplete();
}
