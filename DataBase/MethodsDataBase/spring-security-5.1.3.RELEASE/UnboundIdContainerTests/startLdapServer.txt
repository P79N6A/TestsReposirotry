@Test public void startLdapServer() throws Exception {
  UnboundIdContainer server=new UnboundIdContainer("dc=springframework,dc=org","classpath:test-server.ldif");
  server.setApplicationContext(new GenericApplicationContext());
  List<Integer> ports=getDefaultPorts(1);
  server.setPort(ports.get(0));
  try {
    server.afterPropertiesSet();
    assertThat(server.getPort()).isEqualTo(ports.get(0));
  }
  finally {
    server.destroy();
  }
}
