@Test public void servletLogoutWhenUsingCustomLogoutThenUsesSpringSecurity() throws Exception {
  this.spring.configLocations(this.xml("Logout")).autowire();
  this.mvc.perform(get("/authenticate")).andExpect(status().isFound()).andExpect(redirectedUrl("http://localhost/signin"));
  MvcResult result=this.mvc.perform(get("/good-login")).andReturn();
  MockHttpSession session=(MockHttpSession)result.getRequest().getSession(false);
  assertThat(session).isNotNull();
  result=this.mvc.perform(get("/do-logout").session(session)).andExpect(status().isOk()).andExpect(content().string("")).andExpect(cookie().maxAge("JSESSIONID",0)).andReturn();
  session=(MockHttpSession)result.getRequest().getSession(false);
  assertThat(session).isNotNull();
}
