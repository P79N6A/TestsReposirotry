@Test public void testContextIsResetEvenIfExceptionOccurs() throws Exception {
  Authentication clientSideAuthentication=new UsernamePasswordAuthenticationToken("rod","koala");
  SecurityContextHolder.getContext().setAuthentication(clientSideAuthentication);
  ContextPropagatingRemoteInvocation remoteInvocation=getRemoteInvocation();
  try {
    remoteInvocation.setArguments(new Object[]{});
    remoteInvocation.invoke(TargetObject.class.newInstance());
    fail("Expected IllegalArgumentException");
  }
 catch (  IllegalArgumentException e) {
  }
  assertThat(SecurityContextHolder.getContext().getAuthentication()).withFailMessage("Authentication must be null").isNull();
}
