@Test @SuppressWarnings("unchecked") public void savedRequesthHeaderIsReturnedIfSavedRequestIsSet() throws Exception {
  MockHttpServletRequest savedRequest=new MockHttpServletRequest();
  savedRequest.addHeader("header","savedheader");
  SavedRequestAwareWrapper wrapper=createWrapper(savedRequest,new MockHttpServletRequest());
  assertThat(wrapper.getHeader("nonexistent")).isNull();
  Enumeration headers=wrapper.getHeaders("nonexistent");
  assertThat(headers.hasMoreElements()).isFalse();
  assertThat(wrapper.getHeader("Header")).isEqualTo("savedheader");
  headers=wrapper.getHeaders("heaDer");
  assertThat(headers.hasMoreElements()).isTrue();
  assertThat(headers.nextElement()).isEqualTo("savedheader");
  assertThat(headers.hasMoreElements()).isFalse();
  assertThat(wrapper.getHeaderNames().hasMoreElements()).isTrue();
  assertThat(wrapper.getHeaderNames().nextElement()).isEqualTo("header");
}
