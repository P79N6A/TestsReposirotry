@Test public void authenticationManagerWhenMultipleProvidersThenWorks() throws Exception {
  this.spring.register(MultiAuthenticationProvidersConfig.class).autowire();
  this.mockMvc.perform(formLogin()).andExpect(authenticated().withUsername("user").withRoles("USER"));
  this.mockMvc.perform(formLogin().user("admin")).andExpect(authenticated().withUsername("admin").withRoles("USER","ADMIN"));
}
