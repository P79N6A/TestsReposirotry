@Test public void configureWhenCustomAuthorizationRequestResolverSetThenAuthorizationRequestIncludesCustomParameters() throws Exception {
  OAuth2AuthorizationRequestResolver defaultAuthorizationRequestResolver=authorizationRequestResolver;
  authorizationRequestResolver=mock(OAuth2AuthorizationRequestResolver.class);
  when(authorizationRequestResolver.resolve(any())).thenAnswer(invocation -> defaultAuthorizationRequestResolver.resolve(invocation.getArgument(0)));
  this.spring.register(OAuth2ClientConfig.class).autowire();
  this.mockMvc.perform(get("/oauth2/authorization/registration-1")).andExpect(status().is3xxRedirection()).andReturn();
  verify(authorizationRequestResolver).resolve(any());
}
