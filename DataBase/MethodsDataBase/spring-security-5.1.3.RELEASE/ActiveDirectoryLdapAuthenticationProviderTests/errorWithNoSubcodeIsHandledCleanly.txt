@Test(expected=BadCredentialsException.class) public void errorWithNoSubcodeIsHandledCleanly() throws Exception {
  provider.contextFactory=createContextFactoryThrowing(new AuthenticationException(msg));
  provider.setConvertSubErrorCodesToExceptions(true);
  provider.authenticate(joe);
}
