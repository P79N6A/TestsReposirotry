@Test(expected=BadCredentialsException.class) public void incorrectPasswordIsCorrectlyMapped(){
  provider.contextFactory=createContextFactoryThrowing(new AuthenticationException(msg + "52e, xxxx]"));
  provider.setConvertSubErrorCodesToExceptions(true);
  provider.authenticate(joe);
}
