@Test(expected=BadCredentialsException.class) public void noUserSearchCausesUsernameNotFound() throws Exception {
  DirContext ctx=mock(DirContext.class);
  when(ctx.getNameInNamespace()).thenReturn("");
  when(ctx.search(any(Name.class),any(String.class),any(Object[].class),any(SearchControls.class))).thenReturn(new EmptyEnumeration<>());
  provider.contextFactory=createContextFactoryReturning(ctx);
  provider.authenticate(joe);
}
