@Test(expected=CredentialsExpiredException.class) public void expiredPasswordIsCorrectlyMapped(){
  provider.contextFactory=createContextFactoryThrowing(new AuthenticationException(msg + "532, xxxx]"));
  try {
    provider.authenticate(joe);
    fail("BadCredentialsException should had been thrown");
  }
 catch (  BadCredentialsException expected) {
  }
  provider.setConvertSubErrorCodesToExceptions(true);
  provider.authenticate(joe);
}
