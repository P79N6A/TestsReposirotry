@Test(expected=BadCredentialsException.class) public void notPermittedIsCorrectlyMapped(){
  provider.contextFactory=createContextFactoryThrowing(new AuthenticationException(msg + "530, xxxx]"));
  provider.setConvertSubErrorCodesToExceptions(true);
  provider.authenticate(joe);
}
