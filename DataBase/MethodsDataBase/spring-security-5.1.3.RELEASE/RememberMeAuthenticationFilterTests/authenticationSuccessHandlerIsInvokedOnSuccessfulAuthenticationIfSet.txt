@Test public void authenticationSuccessHandlerIsInvokedOnSuccessfulAuthenticationIfSet() throws Exception {
  AuthenticationManager am=mock(AuthenticationManager.class);
  when(am.authenticate(remembered)).thenReturn(remembered);
  RememberMeAuthenticationFilter filter=new RememberMeAuthenticationFilter(am,new MockRememberMeServices(remembered));
  filter.setAuthenticationSuccessHandler(new SimpleUrlAuthenticationSuccessHandler("/target"));
  MockHttpServletRequest request=new MockHttpServletRequest();
  MockHttpServletResponse response=new MockHttpServletResponse();
  FilterChain fc=mock(FilterChain.class);
  request.setRequestURI("x");
  filter.doFilter(request,response,fc);
  assertThat(response.getRedirectedUrl()).isEqualTo("/target");
  verifyZeroInteractions(fc);
}
