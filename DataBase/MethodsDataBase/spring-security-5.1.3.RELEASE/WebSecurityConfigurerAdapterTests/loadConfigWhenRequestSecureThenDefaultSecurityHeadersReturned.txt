@Test public void loadConfigWhenRequestSecureThenDefaultSecurityHeadersReturned() throws Exception {
  this.spring.register(HeadersArePopulatedByDefaultConfig.class).autowire();
  this.mockMvc.perform(get("/").secure(true)).andExpect(header().string("X-Content-Type-Options","nosniff")).andExpect(header().string("X-Frame-Options","DENY")).andExpect(header().string("Strict-Transport-Security","max-age=31536000 ; includeSubDomains")).andExpect(header().string("Cache-Control","no-cache, no-store, max-age=0, must-revalidate")).andExpect(header().string("Pragma","no-cache")).andExpect(header().string("Expires","0")).andExpect(header().string("X-XSS-Protection","1; mode=block"));
}
