@Test public void csrfWithWrappedRequest() throws Exception {
  this.mockMvc=MockMvcBuilders.webAppContextSetup(this.wac).addFilter(new SessionRepositoryFilter()).apply(springSecurity()).build();
  this.mockMvc.perform(post("/").with(csrf())).andExpect(status().is2xxSuccessful()).andExpect(csrfAsParam());
}
