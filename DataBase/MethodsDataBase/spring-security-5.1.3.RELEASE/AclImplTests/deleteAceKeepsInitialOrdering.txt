@Test public void deleteAceKeepsInitialOrdering() throws Exception {
  MutableAcl acl=new AclImpl(objectIdentity,1,authzStrategy,pgs,null,null,true,new PrincipalSid("joe"));
  MockAclService service=new MockAclService();
  acl.insertAce(0,BasePermission.READ,new GrantedAuthoritySid("ROLE_TEST1"),true);
  acl.insertAce(1,BasePermission.READ,new GrantedAuthoritySid("ROLE_TEST2"),true);
  acl.insertAce(2,BasePermission.READ,new GrantedAuthoritySid("ROLE_TEST3"),true);
  service.updateAcl(acl);
  acl.deleteAce(0);
  assertThat(acl.getEntries()).hasSize(2);
  assertThat(acl.getEntries().get(0).getSid()).isEqualTo(new GrantedAuthoritySid("ROLE_TEST2"));
  assertThat(acl.getEntries().get(1).getSid()).isEqualTo(new GrantedAuthoritySid("ROLE_TEST3"));
  acl.insertAce(2,BasePermission.READ,new GrantedAuthoritySid("ROLE_TEST4"),true);
  service.updateAcl(acl);
  acl.deleteAce(1);
  assertThat(acl.getEntries()).hasSize(2);
  assertThat(acl.getEntries().get(0).getSid()).isEqualTo(new GrantedAuthoritySid("ROLE_TEST2"));
  assertThat(acl.getEntries().get(1).getSid()).isEqualTo(new GrantedAuthoritySid("ROLE_TEST4"));
  acl.deleteAce(1);
  acl.deleteAce(0);
  assertThat(acl.getEntries()).isEmpty();
}
