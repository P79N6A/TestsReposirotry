@Test(expected=IllegalArgumentException.class) public void getPrincipalRejectsNonLdapUserDetailsObject(){
  AuthenticationSource source=new SpringSecurityAuthenticationSource();
  SecurityContextHolder.getContext().setAuthentication(new TestingAuthenticationToken(new Object(),"password"));
  source.getPrincipal();
}
