@Test public void testDecideDetectsAcceptableChannel() throws Exception {
  MockHttpServletRequest request=new MockHttpServletRequest();
  request.setQueryString("info=true");
  request.setServerName("localhost");
  request.setContextPath("/bigapp");
  request.setServletPath("/servlet");
  request.setScheme("http");
  request.setServerPort(8080);
  MockHttpServletResponse response=new MockHttpServletResponse();
  FilterInvocation fi=new FilterInvocation(request,response,mock(FilterChain.class));
  InsecureChannelProcessor processor=new InsecureChannelProcessor();
  processor.decide(fi,SecurityConfig.createList("SOME_IGNORED_ATTRIBUTE","REQUIRES_INSECURE_CHANNEL"));
  assertThat(fi.getResponse().isCommitted()).isFalse();
}
