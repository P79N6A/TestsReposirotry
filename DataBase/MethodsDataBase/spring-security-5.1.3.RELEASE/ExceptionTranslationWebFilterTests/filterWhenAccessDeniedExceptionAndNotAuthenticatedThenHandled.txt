@Test public void filterWhenAccessDeniedExceptionAndNotAuthenticatedThenHandled(){
  when(this.exchange.getPrincipal()).thenReturn(Mono.empty());
  when(this.chain.filter(this.exchange)).thenReturn(Mono.error(new AccessDeniedException("Not Authorized")));
  StepVerifier.create(this.filter.filter(this.exchange,this.chain)).verifyComplete();
  this.deniedPublisher.assertWasNotSubscribed();
  this.entryPointPublisher.assertWasSubscribed();
}
