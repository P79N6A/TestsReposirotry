@Test public void startAsyncDisablesSaveOnCommit() throws Exception {
  HttpSessionSecurityContextRepository repo=new HttpSessionSecurityContextRepository();
  HttpServletRequest request=mock(HttpServletRequest.class);
  MockHttpServletResponse response=new MockHttpServletResponse();
  HttpRequestResponseHolder holder=new HttpRequestResponseHolder(request,response);
  repo.loadContext(holder);
  reset(request);
  holder.getRequest().startAsync();
  holder.getResponse().sendError(HttpServletResponse.SC_BAD_REQUEST);
  verify(request,never()).getSession(anyBoolean());
  verify(request,never()).getSession();
}
