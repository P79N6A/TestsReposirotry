@Test public void nonSecurityContextInSessionIsIgnored() throws Exception {
  HttpSessionSecurityContextRepository repo=new HttpSessionSecurityContextRepository();
  MockHttpServletRequest request=new MockHttpServletRequest();
  SecurityContextHolder.getContext().setAuthentication(testToken);
  request.getSession().setAttribute(SPRING_SECURITY_CONTEXT_KEY,"NotASecurityContextInstance");
  MockHttpServletResponse response=new MockHttpServletResponse();
  HttpRequestResponseHolder holder=new HttpRequestResponseHolder(request,response);
  SecurityContext context=repo.loadContext(holder);
  assertThat(context).isNotNull();
  assertThat(context.getAuthentication()).isNull();
}
