@Test public void bodyIsEvaluatedIfAclGrantsAccess() throws Exception {
  Object domainObject=new Object();
  when(pe.hasPermission(bob,domainObject,"READ")).thenReturn(true);
  tag.setDomainObject(domainObject);
  tag.setHasPermission("READ");
  tag.setVar("allowed");
  assertThat(tag.getDomainObject()).isSameAs(domainObject);
  assertThat(tag.getHasPermission()).isEqualTo("READ");
  assertThat(tag.doStartTag()).isEqualTo(Tag.EVAL_BODY_INCLUDE);
  assertThat((Boolean)pageContext.getAttribute("allowed")).isTrue();
}
