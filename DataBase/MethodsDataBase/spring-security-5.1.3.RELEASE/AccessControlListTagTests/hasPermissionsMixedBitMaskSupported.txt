@Test public void hasPermissionsMixedBitMaskSupported() throws Exception {
  Object domainObject=new Object();
  when(pe.hasPermission(bob,domainObject,1)).thenReturn(true);
  when(pe.hasPermission(bob,domainObject,"WRITE")).thenReturn(true);
  tag.setDomainObject(domainObject);
  tag.setHasPermission("1,WRITE");
  tag.setVar("allowed");
  assertThat(tag.getDomainObject()).isSameAs(domainObject);
  assertThat(tag.getHasPermission()).isEqualTo("1,WRITE");
  assertThat(tag.doStartTag()).isEqualTo(Tag.EVAL_BODY_INCLUDE);
  assertThat((Boolean)pageContext.getAttribute("allowed")).isTrue();
  verify(pe).hasPermission(bob,domainObject,1);
  verify(pe).hasPermission(bob,domainObject,"WRITE");
  verifyNoMoreInteractions(pe);
}
