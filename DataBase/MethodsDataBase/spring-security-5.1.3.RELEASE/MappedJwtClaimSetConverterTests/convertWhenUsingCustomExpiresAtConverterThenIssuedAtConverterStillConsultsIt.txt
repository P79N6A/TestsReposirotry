@Test public void convertWhenUsingCustomExpiresAtConverterThenIssuedAtConverterStillConsultsIt(){
  Instant at=Instant.ofEpochMilli(1000000000000L);
  Converter<Object,Instant> expiresAtConverter=mock(Converter.class);
  when(expiresAtConverter.convert(any())).thenReturn(at);
  MappedJwtClaimSetConverter converter=MappedJwtClaimSetConverter.withDefaults(Collections.singletonMap(JwtClaimNames.EXP,expiresAtConverter));
  Map<String,Object> source=new HashMap<>();
  Map<String,Object> target=converter.convert(source);
  assertThat(target.get(JwtClaimNames.IAT)).isEqualTo(Instant.ofEpochMilli(at.toEpochMilli()).minusSeconds(1));
}
