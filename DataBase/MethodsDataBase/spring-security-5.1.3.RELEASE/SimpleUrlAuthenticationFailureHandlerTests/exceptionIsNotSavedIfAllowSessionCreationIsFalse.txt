@Test public void exceptionIsNotSavedIfAllowSessionCreationIsFalse() throws Exception {
  SimpleUrlAuthenticationFailureHandler afh=new SimpleUrlAuthenticationFailureHandler("/target");
  afh.setAllowSessionCreation(false);
  assertThat(afh.isAllowSessionCreation()).isFalse();
  MockHttpServletRequest request=new MockHttpServletRequest();
  MockHttpServletResponse response=new MockHttpServletResponse();
  afh.onAuthenticationFailure(request,response,mock(AuthenticationException.class));
  assertThat(request.getSession(false)).isNull();
}
