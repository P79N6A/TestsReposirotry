@Test public void decodeWhenCustomRestOperationsSetThenUsed() throws Exception {
  try (MockWebServer server=new MockWebServer()){
    server.enqueue(new MockResponse().setBody(JWK_SET));
    String jwkSetUrl=server.url("/.well-known/jwks.json").toString();
    NimbusJwtDecoderJwkSupport jwtDecoder=new NimbusJwtDecoderJwkSupport(jwkSetUrl);
    RestTemplate restTemplate=spy(new RestTemplate());
    jwtDecoder.setRestOperations(restTemplate);
    assertThatCode(() -> jwtDecoder.decode(SIGNED_JWT)).doesNotThrowAnyException();
    verify(restTemplate).exchange(any(RequestEntity.class),eq(String.class));
    server.shutdown();
  }
 }
