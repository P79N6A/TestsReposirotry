@Test public void decodeWhenJwkResponseIsMalformedThenReturnsStockException() throws Exception {
  try (MockWebServer server=new MockWebServer()){
    server.enqueue(new MockResponse().setBody(MALFORMED_JWK_SET));
    String jwkSetUrl=server.url("/.well-known/jwks.json").toString();
    NimbusJwtDecoderJwkSupport jwtDecoder=new NimbusJwtDecoderJwkSupport(jwkSetUrl);
    assertThatCode(() -> jwtDecoder.decode(SIGNED_JWT)).isInstanceOf(JwtException.class).hasMessage("An error occurred while attempting to decode the Jwt: Malformed Jwk set");
    server.shutdown();
  }
 }
