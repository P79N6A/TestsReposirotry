@Test public void decodeWhenJwtIsMalformedThenReturnsStockException() throws Exception {
  try (MockWebServer server=new MockWebServer()){
    server.enqueue(new MockResponse().setBody(JWK_SET));
    String jwkSetUrl=server.url("/.well-known/jwks.json").toString();
    NimbusJwtDecoderJwkSupport jwtDecoder=new NimbusJwtDecoderJwkSupport(jwkSetUrl);
    assertThatCode(() -> jwtDecoder.decode(MALFORMED_JWT)).isInstanceOf(JwtException.class).hasMessage("An error occurred while attempting to decode the Jwt: Malformed payload");
    server.shutdown();
  }
 }
