@Test public void passwordEncoderBeanUsed() throws Exception {
  this.spring.context("<b:bean id='passwordEncoder' class='org.springframework.security.crypto.password.NoOpPasswordEncoder' factory-method='getInstance'/>" + "<user-service>" + "  <user name='user' password='password' authorities='ROLE_A,ROLE_B' />"+ "</user-service>"+ "<http/>").mockMvcAfterSpringSecurityOk().autowire();
  this.mockMvc.perform(get("/").with(httpBasic("user","password"))).andExpect(status().isOk());
}
