@Test public void authenticateWhenPasswordServiceAndUpgradeFalseThenNotUpdated(){
  when(this.userDetailsService.findByUsername(any())).thenReturn(Mono.just(this.user));
  when(this.encoder.matches(any(),any())).thenReturn(true);
  when(this.encoder.upgradeEncoding(any())).thenReturn(false);
  this.manager.setPasswordEncoder(this.encoder);
  this.manager.setUserDetailsPasswordService(this.userDetailsPasswordService);
  UsernamePasswordAuthenticationToken token=new UsernamePasswordAuthenticationToken(this.user,this.user.getPassword());
  Authentication result=this.manager.authenticate(token).block();
  verifyZeroInteractions(this.userDetailsPasswordService);
}
