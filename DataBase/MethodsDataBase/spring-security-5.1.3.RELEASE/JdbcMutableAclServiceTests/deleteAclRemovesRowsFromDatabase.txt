@Test @Transactional public void deleteAclRemovesRowsFromDatabase() throws Exception {
  SecurityContextHolder.getContext().setAuthentication(auth);
  MutableAcl child=jdbcMutableAclService.createAcl(getChildOid());
  child.insertAce(0,BasePermission.DELETE,new PrincipalSid(auth),false);
  jdbcMutableAclService.updateAcl(child);
  jdbcMutableAclService.deleteAcl(getChildOid(),false);
  assertThat(jdbcTemplate.queryForList(SELECT_ALL_CLASSES,new Object[]{getTargetClass()})).hasSize(1);
  assertThat(jdbcTemplate.queryForList("select * from acl_object_identity")).isEmpty();
  assertThat(jdbcTemplate.queryForList("select * from acl_entry")).isEmpty();
  assertThat(aclCache.getFromCache(getChildOid())).isNull();
  assertThat(aclCache.getFromCache(Long.valueOf(102))).isNull();
}
