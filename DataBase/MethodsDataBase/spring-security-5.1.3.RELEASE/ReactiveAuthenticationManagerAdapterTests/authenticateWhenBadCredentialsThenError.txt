@Test public void authenticateWhenBadCredentialsThenError(){
  when(delegate.authenticate(any())).thenThrow(new BadCredentialsException("Failed"));
  Mono<Authentication> result=manager.authenticate(authentication);
  StepVerifier.create(result).expectError(BadCredentialsException.class).verify();
}
