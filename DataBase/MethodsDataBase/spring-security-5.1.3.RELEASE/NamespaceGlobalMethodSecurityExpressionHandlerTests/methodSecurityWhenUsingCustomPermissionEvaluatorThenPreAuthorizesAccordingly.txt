@Test @WithMockUser public void methodSecurityWhenUsingCustomPermissionEvaluatorThenPreAuthorizesAccordingly(){
  this.spring.register(CustomAccessDecisionManagerConfig.class,MethodSecurityServiceConfig.class).autowire();
  assertThatCode(() -> this.service.hasPermission("granted")).doesNotThrowAnyException();
  assertThatThrownBy(() -> this.service.hasPermission("denied")).isInstanceOf(AccessDeniedException.class);
}
