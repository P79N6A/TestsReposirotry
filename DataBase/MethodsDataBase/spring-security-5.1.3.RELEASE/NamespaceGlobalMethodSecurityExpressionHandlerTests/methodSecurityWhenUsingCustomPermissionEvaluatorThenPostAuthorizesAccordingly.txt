@Test @WithMockUser public void methodSecurityWhenUsingCustomPermissionEvaluatorThenPostAuthorizesAccordingly(){
  this.spring.register(CustomAccessDecisionManagerConfig.class,MethodSecurityServiceConfig.class).autowire();
  assertThatCode(() -> this.service.postHasPermission("granted")).doesNotThrowAnyException();
  assertThatThrownBy(() -> this.service.postHasPermission("denied")).isInstanceOf(AccessDeniedException.class);
}
