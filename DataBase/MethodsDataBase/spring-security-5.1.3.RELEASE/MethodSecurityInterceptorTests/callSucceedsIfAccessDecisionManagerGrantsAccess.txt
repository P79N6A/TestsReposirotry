@Test public void callSucceedsIfAccessDecisionManagerGrantsAccess() throws Exception {
  token.setAuthenticated(true);
  interceptor.setPublishAuthorizationSuccess(true);
  SecurityContextHolder.getContext().setAuthentication(token);
  mdsReturnsUserRole();
  String result=advisedTarget.makeLowerCase("HELLO");
  assertThat(result).isEqualTo("hello org.springframework.security.authentication.TestingAuthenticationToken true");
  verify(eventPublisher).publishEvent(any(AuthorizedEvent.class));
}
