@Test(expected=AuthenticationException.class) public void callIsntMadeWhenAuthenticationManagerRejectsAuthentication() throws Exception {
  final TestingAuthenticationToken token=new TestingAuthenticationToken("Test","Password");
  SecurityContextHolder.getContext().setAuthentication(token);
  mdsReturnsUserRole();
  when(authman.authenticate(token)).thenThrow(new BadCredentialsException("rejected"));
  advisedTarget.makeLowerCase("HELLO");
}
