@Test public void logoutShouldCancelCookie() throws Exception {
  MockRememberMeServices services=new MockRememberMeServices(uds);
  services.setCookieDomain("spring.io");
  MockHttpServletRequest request=new MockHttpServletRequest();
  request.setContextPath("contextpath");
  request.setCookies(createLoginCookie("cookie:1:2"));
  MockHttpServletResponse response=new MockHttpServletResponse();
  services.logout(request,response,Mockito.mock(Authentication.class));
  response=new MockHttpServletResponse();
  services.logout(request,response,null);
  assertCookieCancelled(response);
  Cookie returnedCookie=response.getCookie(AbstractRememberMeServices.SPRING_SECURITY_REMEMBER_ME_COOKIE_KEY);
  assertThat(returnedCookie.getDomain()).isEqualTo("spring.io");
}
