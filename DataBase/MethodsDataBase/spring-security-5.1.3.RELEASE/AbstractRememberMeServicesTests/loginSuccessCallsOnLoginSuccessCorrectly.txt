@Test public void loginSuccessCallsOnLoginSuccessCorrectly(){
  MockRememberMeServices services=new MockRememberMeServices(uds);
  MockHttpServletRequest request=new MockHttpServletRequest();
  MockHttpServletResponse response=new MockHttpServletResponse();
  Authentication auth=new UsernamePasswordAuthenticationToken("joe","password");
  services.loginSuccess(request,response,auth);
  assertThat(services.loginSuccessCalled).isFalse();
  services=new MockRememberMeServices(uds);
  request.setParameter(MockRememberMeServices.DEFAULT_PARAMETER,"true");
  services.loginSuccess(request,response,auth);
  assertThat(services.loginSuccessCalled).isTrue();
  services=new MockRememberMeServices(uds);
  services.setParameter("my_parameter");
  request.setParameter("my_parameter","true");
  services.loginSuccess(request,response,auth);
  assertThat(services.loginSuccessCalled).isTrue();
  services=new MockRememberMeServices(uds);
  request.setParameter(MockRememberMeServices.DEFAULT_PARAMETER,"false");
  services.loginSuccess(request,response,auth);
  assertThat(services.loginSuccessCalled).isFalse();
  services=new MockRememberMeServices(uds);
  services.setAlwaysRemember(true);
  services.loginSuccess(request,response,auth);
  assertThat(services.loginSuccessCalled).isTrue();
}
