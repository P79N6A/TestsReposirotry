@Test public void autoLoginShouldFailIfInvalidCookieExceptionIsRaised(){
  MockRememberMeServices services=new MockRememberMeServices(new MockUserDetailsService(joe,true));
  MockHttpServletRequest request=new MockHttpServletRequest();
  request.setCookies(createLoginCookie("cookie:1"));
  MockHttpServletResponse response=new MockHttpServletResponse();
  Authentication result=services.autoLogin(request,response);
  assertThat(result).isNull();
  assertCookieCancelled(response);
}
