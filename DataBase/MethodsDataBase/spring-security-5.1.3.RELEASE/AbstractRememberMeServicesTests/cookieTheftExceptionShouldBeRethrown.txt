@Test(expected=CookieTheftException.class) public void cookieTheftExceptionShouldBeRethrown(){
  MockRememberMeServices services=new MockRememberMeServices(uds){
    protected UserDetails processAutoLoginCookie(    String[] cookieTokens,    HttpServletRequest request,    HttpServletResponse response){
      throw new CookieTheftException("Pretending cookie was stolen");
    }
  }
;
  MockHttpServletRequest request=new MockHttpServletRequest();
  request.setCookies(createLoginCookie("cookie:1:2"));
  MockHttpServletResponse response=new MockHttpServletResponse();
  services.autoLogin(request,response);
}
