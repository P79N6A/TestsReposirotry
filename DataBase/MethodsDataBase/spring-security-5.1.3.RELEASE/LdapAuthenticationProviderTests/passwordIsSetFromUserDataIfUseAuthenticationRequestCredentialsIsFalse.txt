@Test public void passwordIsSetFromUserDataIfUseAuthenticationRequestCredentialsIsFalse(){
  LdapAuthenticationProvider ldapProvider=new LdapAuthenticationProvider(new MockAuthenticator(),new MockAuthoritiesPopulator());
  ldapProvider.setUseAuthenticationRequestCredentials(false);
  UsernamePasswordAuthenticationToken authRequest=new UsernamePasswordAuthenticationToken("ben","benspassword");
  Authentication authResult=ldapProvider.authenticate(authRequest);
  assertThat(authResult.getCredentials()).isEqualTo("{SHA}nFCebWjxfaLbHHG1Qk5UU4trbvQ=");
}
