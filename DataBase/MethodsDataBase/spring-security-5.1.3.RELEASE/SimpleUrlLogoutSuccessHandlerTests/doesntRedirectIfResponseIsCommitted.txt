@Test public void doesntRedirectIfResponseIsCommitted() throws Exception {
  SimpleUrlLogoutSuccessHandler lsh=new SimpleUrlLogoutSuccessHandler();
  lsh.setDefaultTargetUrl("/target");
  MockHttpServletRequest request=new MockHttpServletRequest();
  MockHttpServletResponse response=new MockHttpServletResponse();
  response.setCommitted(true);
  lsh.onLogoutSuccess(request,response,mock(Authentication.class));
  assertThat(request.getSession(false)).isNull();
  assertThat(response.getRedirectedUrl()).isNull();
  assertThat(response.getForwardedUrl()).isNull();
}
