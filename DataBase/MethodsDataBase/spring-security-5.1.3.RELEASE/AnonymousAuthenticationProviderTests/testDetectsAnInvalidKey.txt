@Test public void testDetectsAnInvalidKey() throws Exception {
  AnonymousAuthenticationProvider aap=new AnonymousAuthenticationProvider("qwerty");
  AnonymousAuthenticationToken token=new AnonymousAuthenticationToken("WRONG_KEY","Test",AuthorityUtils.createAuthorityList("ROLE_ONE","ROLE_TWO"));
  try {
    aap.authenticate(token);
    fail("Should have thrown BadCredentialsException");
  }
 catch (  BadCredentialsException expected) {
  }
}
