@Test public void providerWithShaPasswordEncoderWorks() throws Exception {
  appContext=new InMemoryXmlApplicationContext(" <authentication-manager>" + " <authentication-provider>" + "        <password-encoder ref='passwordEncoder'/>"+ "        <user-service>"+ "            <user name='bob' password='{SSHA}PpuEwfdj7M1rs0C2W4ssSM2XEN/Y6S5U' authorities='ROLE_A' />"+ "        </user-service>"+ "    </authentication-provider>"+ " </authentication-manager>"+ " <b:bean id='passwordEncoder'  class='" + LdapShaPasswordEncoder.class.getName() + "'/>");
  getProvider().authenticate(bob);
}
