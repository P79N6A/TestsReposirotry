@Test public void passwordIsBase64EncodedWhenBase64IsEnabled() throws Exception {
  appContext=new InMemoryXmlApplicationContext(" <authentication-manager>" + " <authentication-provider>" + "        <password-encoder ref='passwordEncoder'/>"+ "        <user-service>"+ "            <user name='bob' password='ErFB811YuLOkbupl5qwXng==' authorities='ROLE_A' />"+ "        </user-service>"+ "    </authentication-provider>"+ " </authentication-manager>"+ " <b:bean id='passwordEncoder'  class='" + MessageDigestPasswordEncoder.class.getName() + "'>"+ "     <b:constructor-arg value='MD5'/>"+ "     <b:property name='encodeHashAsBase64' value='true'/>"+ " </b:bean>");
  getProvider().authenticate(bob);
}
