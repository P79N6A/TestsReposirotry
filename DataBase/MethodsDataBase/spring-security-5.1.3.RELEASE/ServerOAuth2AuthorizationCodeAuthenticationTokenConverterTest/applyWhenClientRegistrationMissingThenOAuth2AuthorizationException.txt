@Test public void applyWhenClientRegistrationMissingThenOAuth2AuthorizationException(){
  when(this.authorizationRequestRepository.removeAuthorizationRequest(any())).thenReturn(Mono.just(this.authorizationRequest.build()));
  when(this.clientRegistrationRepository.findByRegistrationId(any())).thenReturn(Mono.empty());
  assertThatThrownBy(() -> applyConverter()).isInstanceOf(OAuth2AuthorizationException.class).hasMessageContaining(ServerOAuth2AuthorizationCodeAuthenticationTokenConverter.CLIENT_REGISTRATION_NOT_FOUND_ERROR_CODE);
}
