@Test public void deserializeAuthenticatedUsernamePasswordAuthenticationTokenWithUserTest() throws IOException {
  UsernamePasswordAuthenticationToken token=mapper.readValue(AUTHENTICATED_JSON,UsernamePasswordAuthenticationToken.class);
  assertThat(token).isNotNull();
  assertThat(token.getPrincipal()).isNotNull().isInstanceOf(User.class);
  assertThat(((User)token.getPrincipal()).getAuthorities()).isNotNull().hasSize(1).contains(new SimpleGrantedAuthority("ROLE_USER"));
  assertThat(token.isAuthenticated()).isEqualTo(true);
  assertThat(token.getAuthorities()).hasSize(1).contains(new SimpleGrantedAuthority("ROLE_USER"));
}
