@Test public void serializingThenDeserializingWithConfiguredObjectMapperShouldWork() throws IOException {
  this.mapper.setDefaultPropertyInclusion(construct(ALWAYS,NON_NULL)).setSerializationInclusion(NON_ABSENT);
  UsernamePasswordAuthenticationToken original=new UsernamePasswordAuthenticationToken("Frodo",null);
  String serialized=this.mapper.writeValueAsString(original);
  UsernamePasswordAuthenticationToken deserialized=this.mapper.readValue(serialized,UsernamePasswordAuthenticationToken.class);
  assertThat(deserialized).isEqualTo(original);
}
