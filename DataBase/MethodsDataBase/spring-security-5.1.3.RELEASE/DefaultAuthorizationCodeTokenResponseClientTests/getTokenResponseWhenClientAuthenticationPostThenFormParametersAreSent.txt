@Test public void getTokenResponseWhenClientAuthenticationPostThenFormParametersAreSent() throws Exception {
  String accessTokenSuccessResponse="{\n" + "	\"access_token\": \"access-token-1234\",\n" + "   \"token_type\": \"bearer\",\n"+ "   \"expires_in\": \"3600\"\n"+ "}\n";
  this.server.enqueue(jsonResponse(accessTokenSuccessResponse));
  ClientRegistration clientRegistration=this.from(this.clientRegistration).clientAuthenticationMethod(ClientAuthenticationMethod.POST).build();
  this.tokenResponseClient.getTokenResponse(this.authorizationCodeGrantRequest(clientRegistration));
  RecordedRequest recordedRequest=this.server.takeRequest();
  assertThat(recordedRequest.getHeader(HttpHeaders.AUTHORIZATION)).isNull();
  String formParameters=recordedRequest.getBody().readUtf8();
  assertThat(formParameters).contains("client_id=client-1");
  assertThat(formParameters).contains("client_secret=secret");
}
