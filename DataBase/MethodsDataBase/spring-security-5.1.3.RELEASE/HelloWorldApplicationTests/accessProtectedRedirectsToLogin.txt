@Test public void accessProtectedRedirectsToLogin() throws Exception {
  MvcResult mvcResult=this.mockMvc.perform(get("/user/index")).andExpect(status().is3xxRedirection()).andReturn();
  assertThat(mvcResult.getResponse().getRedirectedUrl()).endsWith("/login");
}
