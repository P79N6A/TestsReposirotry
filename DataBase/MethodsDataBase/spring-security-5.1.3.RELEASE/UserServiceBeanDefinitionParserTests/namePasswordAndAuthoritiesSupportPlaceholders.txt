@Test public void namePasswordAndAuthoritiesSupportPlaceholders(){
  System.setProperty("principal.name","joe");
  System.setProperty("principal.pass","joespassword");
  System.setProperty("principal.authorities","ROLE_A,ROLE_B");
  setContext("<b:bean class='org.springframework.beans.factory.config.PropertyPlaceholderConfigurer'/>" + "<user-service id='service'>" + "    <user name='${principal.name}' password='${principal.pass}' authorities='${principal.authorities}'/>"+ "</user-service>");
  UserDetailsService userService=(UserDetailsService)appContext.getBean("service");
  UserDetails joe=userService.loadUserByUsername("joe");
  assertThat(joe.getPassword()).isEqualTo("joespassword");
  assertThat(joe.getAuthorities()).hasSize(2);
}
