@Test public void usernamePrioritizedOverValue(){
  when(withUser.username()).thenReturn("customUser");
  when(withUser.password()).thenReturn("password");
  when(withUser.roles()).thenReturn(new String[]{"USER"});
  when(withUser.authorities()).thenReturn(new String[]{});
  assertThat(factory.createSecurityContext(withUser).getAuthentication().getName()).isEqualTo(withUser.username());
}
