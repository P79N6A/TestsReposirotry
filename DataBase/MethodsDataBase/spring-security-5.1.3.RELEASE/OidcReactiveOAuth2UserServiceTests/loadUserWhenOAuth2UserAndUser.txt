@Test public void loadUserWhenOAuth2UserAndUser(){
  this.registration.userNameAttributeName("user");
  Map<String,Object> attributes=new HashMap<>();
  attributes.put(StandardClaimNames.SUB,"sub123");
  attributes.put("user","rob");
  OAuth2User oauth2User=new DefaultOAuth2User(AuthorityUtils.createAuthorityList("ROLE_USER"),attributes,"user");
  when(this.oauth2UserService.loadUser(any())).thenReturn(Mono.just(oauth2User));
  assertThat(this.userService.loadUser(userRequest()).block().getName()).isEqualTo("rob");
}
