@Test public void authenticateWhenJwtDecodeFailsThenRespondsWithInvalidToken(){
  BearerTokenAuthenticationToken token=this.authentication();
  when(this.jwtDecoder.decode("token")).thenThrow(JwtException.class);
  assertThatCode(() -> this.provider.authenticate(token)).matches(failed -> failed instanceof OAuth2AuthenticationException).matches(errorCode(BearerTokenErrorCodes.INVALID_TOKEN));
}
