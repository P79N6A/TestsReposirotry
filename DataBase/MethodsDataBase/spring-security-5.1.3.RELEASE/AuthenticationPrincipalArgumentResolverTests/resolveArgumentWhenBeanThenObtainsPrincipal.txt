@Test public void resolveArgumentWhenBeanThenObtainsPrincipal() throws Exception {
  MyUser user=new MyUser(3L);
  MethodParameter parameter=this.bean.arg(Long.class);
  when(authentication.getPrincipal()).thenReturn(user);
  when(exchange.getPrincipal()).thenReturn(Mono.just(authentication));
  when(this.beanResolver.resolve(any(),eq("beanName"))).thenReturn(new Bean());
  Mono<Object> argument=resolver.resolveArgument(parameter,bindingContext,exchange);
  assertThat(argument.block()).isEqualTo(user.getId());
}
