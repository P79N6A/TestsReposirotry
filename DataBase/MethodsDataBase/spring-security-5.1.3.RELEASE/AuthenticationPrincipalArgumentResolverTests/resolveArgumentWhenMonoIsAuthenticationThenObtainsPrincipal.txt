@Test public void resolveArgumentWhenMonoIsAuthenticationThenObtainsPrincipal() throws Exception {
  MethodParameter parameter=this.authenticationPrincipal.arg(Mono.class,String.class);
  when(authentication.getPrincipal()).thenReturn("user");
  when(exchange.getPrincipal()).thenReturn(Mono.just(authentication));
  Mono<Object> argument=resolver.resolveArgument(parameter,bindingContext,exchange);
  assertThat(argument.cast(Mono.class).block().block()).isEqualTo(authentication.getPrincipal());
}
