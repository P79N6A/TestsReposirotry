@Test public void publisherPreAuthorizeHasRoleWhenNotAuthorizedThenDenied(){
  when(this.delegate.publisherPreAuthorizeHasRoleFindById(1L)).thenReturn(result);
  Publisher<String> findById=Flux.from(this.messageService.publisherPreAuthorizeHasRoleFindById(1L)).subscriberContext(withUser);
  StepVerifier.create(findById).expectError(AccessDeniedException.class).verify();
  result.assertNoSubscribers();
}
