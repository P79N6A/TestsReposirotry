@Test public void exceptionMapIsUsedIfMappingExists() throws Exception {
  ExceptionMappingAuthenticationFailureHandler fh=new ExceptionMappingAuthenticationFailureHandler();
  HashMap<String,String> mapping=new HashMap<>();
  mapping.put("org.springframework.security.authentication.BadCredentialsException","/badcreds");
  fh.setExceptionMappings(mapping);
  fh.setDefaultFailureUrl("/failed");
  MockHttpServletResponse response=new MockHttpServletResponse();
  fh.onAuthenticationFailure(new MockHttpServletRequest(),response,new BadCredentialsException(""));
  assertThat(response.getRedirectedUrl()).isEqualTo("/badcreds");
}
