@Test public void beforeTestMethodWhenWithMockUserTestExecutionThenTestContextSet() throws Exception {
  Method testMethod=TheTest.class.getMethod("withMockUserTestExecution");
  when(this.testContext.getApplicationContext()).thenReturn(this.applicationContext);
  when(this.testContext.getTestMethod()).thenReturn(testMethod);
  this.listener.beforeTestMethod(this.testContext);
  assertThat(TestSecurityContextHolder.getContext().getAuthentication()).isNull();
  verify(this.testContext).setAttribute(eq(WithSecurityContextTestExecutionListener.SECURITY_CONTEXT_ATTR_NAME),any(SecurityContext.class));
}
