@Test public void getWhenInsecureAndUsingCustomPortMapperThenRespondsWithRedirectToSecurePort(){
  this.spring.register(RedirectToHttpsViaCustomPortsConfig.class).autowire();
  PortMapper portMapper=this.spring.getContext().getBean(PortMapper.class);
  when(portMapper.lookupHttpsPort(4080)).thenReturn(4443);
  this.client.get().uri("http://localhost:4080").exchange().expectStatus().isFound().expectHeader().valueEquals(HttpHeaders.LOCATION,"https://localhost:4443");
}
