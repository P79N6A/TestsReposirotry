@Test public void copyMatchesOriginalData(){
  DirContextAdapter ctx1=createUserContext();
  DirContextAdapter ctx2=new DirContextAdapter();
  ctx2.setDn(new DistinguishedName("ignored=ignored"));
  ctx1.setAttributeValues("objectclass",new String[]{"top","person","organizationalPerson","inetOrgPerson"});
  InetOrgPerson p=(InetOrgPerson)(new InetOrgPerson.Essence(ctx1)).createUserDetails();
  InetOrgPerson p2=(InetOrgPerson)new InetOrgPerson.Essence(p).createUserDetails();
  p2.populateContext(ctx2);
  assertThat(ctx2).isEqualTo(ctx1);
}
