@Test public void mappingBackToContextMatchesOriginalData(){
  DirContextAdapter ctx1=createUserContext();
  DirContextAdapter ctx2=new DirContextAdapter();
  ctx1.setAttributeValues("objectclass",new String[]{"top","person","organizationalPerson","inetOrgPerson"});
  ctx2.setDn(new DistinguishedName("ignored=ignored"));
  InetOrgPerson p=(InetOrgPerson)(new InetOrgPerson.Essence(ctx1)).createUserDetails();
  p.populateContext(ctx2);
  assertThat(ctx2).isEqualTo(ctx1);
}
