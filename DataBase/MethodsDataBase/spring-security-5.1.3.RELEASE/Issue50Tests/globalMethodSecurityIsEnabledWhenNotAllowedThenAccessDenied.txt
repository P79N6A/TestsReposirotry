@Test(expected=AccessDeniedException.class) public void globalMethodSecurityIsEnabledWhenNotAllowedThenAccessDenied(){
  SecurityContextHolder.getContext().setAuthentication(new TestingAuthenticationToken("test",null,"ROLE_USER"));
  this.userRepo.save(User.withUsernameAndPassword("denied","password"));
  Authentication result=this.authenticationManager.authenticate(new UsernamePasswordAuthenticationToken("test","password"));
}
