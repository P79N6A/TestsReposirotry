@Test public void testFailedSearchGivesUserNotFoundException() throws Exception {
  authenticator=new PasswordComparisonAuthenticator(getContextSource());
  assertThat(authenticator.getUserDns("Bob")).withFailMessage("User DN matches shouldn't be available").isEmpty();
  authenticator.setUserSearch(new MockUserSearch(null));
  authenticator.afterPropertiesSet();
  try {
    authenticator.authenticate(new UsernamePasswordAuthenticationToken("Joe","pass"));
    fail("Expected exception on failed user search");
  }
 catch (  UsernameNotFoundException expected) {
  }
}
