@Test public void testSuccessfulAuthenticationCreatesObject(){
  RemoteAuthenticationProvider provider=new RemoteAuthenticationProvider();
  provider.setRemoteAuthenticationManager(new MockRemoteAuthenticationManager(true));
  Authentication result=provider.authenticate(new UsernamePasswordAuthenticationToken("rod","password"));
  assertThat(result.getPrincipal()).isEqualTo("rod");
  assertThat(result.getCredentials()).isEqualTo("password");
  assertThat(AuthorityUtils.authorityListToSet(result.getAuthorities())).contains("foo");
}
