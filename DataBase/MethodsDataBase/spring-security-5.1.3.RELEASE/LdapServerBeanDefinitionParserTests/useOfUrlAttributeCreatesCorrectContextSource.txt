@Test public void useOfUrlAttributeCreatesCorrectContextSource() throws Exception {
  int port=getDefaultPort();
  appCtx=new InMemoryXmlApplicationContext("<ldap-server ldif='classpath:test-server.ldif' port='" + port + "'/>"+ "<ldap-server ldif='classpath:test-server.ldif' id='blah' url='ldap://127.0.0.1:"+ port+ "/dc=springframework,dc=org' />");
  appCtx.getBean(BeanIds.CONTEXT_SOURCE);
  DefaultSpringSecurityContextSource contextSource=(DefaultSpringSecurityContextSource)appCtx.getBean("blah");
  LdapTemplate template=new LdapTemplate(contextSource);
  template.lookup("uid=ben,ou=people");
}
