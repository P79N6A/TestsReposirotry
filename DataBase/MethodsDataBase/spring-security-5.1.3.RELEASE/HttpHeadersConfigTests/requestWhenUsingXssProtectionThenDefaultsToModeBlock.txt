@Test public void requestWhenUsingXssProtectionThenDefaultsToModeBlock() throws Exception {
  Set<String> excludedHeaders=new HashSet<>(defaultHeaders.keySet());
  excludedHeaders.remove("X-XSS-Protection");
  this.spring.configLocations(this.xml("DefaultsDisabledWithXssProtection")).autowire();
  this.mvc.perform(get("/")).andExpect(status().isOk()).andExpect(header().string("X-XSS-Protection","1; mode=block")).andExpect(excludes(excludedHeaders));
}
