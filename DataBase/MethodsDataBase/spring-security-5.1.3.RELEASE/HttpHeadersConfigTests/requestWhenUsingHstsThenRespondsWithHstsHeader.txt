@Test public void requestWhenUsingHstsThenRespondsWithHstsHeader() throws Exception {
  Set<String> excludedHeaders=new HashSet<>(defaultHeaders.keySet());
  excludedHeaders.remove("Strict-Transport-Security");
  this.spring.configLocations(this.xml("DefaultsDisabledWithHsts")).autowire();
  this.mvc.perform(get("/").secure(true)).andExpect(status().isOk()).andExpect(header().string("Strict-Transport-Security","max-age=31536000 ; includeSubDomains")).andExpect(excludes(excludedHeaders));
}
