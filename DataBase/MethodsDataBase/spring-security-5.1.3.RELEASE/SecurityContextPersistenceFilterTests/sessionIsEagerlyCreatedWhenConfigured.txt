@Test public void sessionIsEagerlyCreatedWhenConfigured() throws Exception {
  final FilterChain chain=mock(FilterChain.class);
  final MockHttpServletRequest request=new MockHttpServletRequest();
  final MockHttpServletResponse response=new MockHttpServletResponse();
  SecurityContextPersistenceFilter filter=new SecurityContextPersistenceFilter();
  filter.setForceEagerSessionCreation(true);
  filter.doFilter(request,response,chain);
  assertThat(request.getSession(false)).isNotNull();
}
