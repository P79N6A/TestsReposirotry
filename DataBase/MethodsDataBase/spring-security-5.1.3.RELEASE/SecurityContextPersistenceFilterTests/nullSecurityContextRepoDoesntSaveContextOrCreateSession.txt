@Test public void nullSecurityContextRepoDoesntSaveContextOrCreateSession() throws Exception {
  final FilterChain chain=mock(FilterChain.class);
  final MockHttpServletRequest request=new MockHttpServletRequest();
  final MockHttpServletResponse response=new MockHttpServletResponse();
  SecurityContextRepository repo=new NullSecurityContextRepository();
  SecurityContextPersistenceFilter filter=new SecurityContextPersistenceFilter(repo);
  filter.doFilter(request,response,chain);
  assertThat(repo.containsContext(request)).isFalse();
  assertThat(request.getSession(false)).isNull();
}
