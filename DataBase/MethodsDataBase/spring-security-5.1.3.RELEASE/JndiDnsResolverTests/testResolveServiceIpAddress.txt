@Test public void testResolveServiceIpAddress() throws Exception {
  BasicAttributes srvRecords=createSrvRecords();
  BasicAttributes aRecords=new BasicAttributes("A","63.246.7.80");
  when(context.getAttributes("_ldap._tcp.springsource.com",new String[]{"SRV"})).thenReturn(srvRecords);
  when(context.getAttributes("kdc.springsource.com",new String[]{"A"})).thenReturn(aRecords);
  String ipAddress=dnsResolver.resolveServiceIpAddress("ldap","springsource.com");
  assertThat(ipAddress).isEqualTo("63.246.7.80");
}
