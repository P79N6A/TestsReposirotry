@Test public void testPasswordAttributeIsMappedCorrectly() throws Exception {
  LdapUserDetailsMapper mapper=new LdapUserDetailsMapper();
  mapper.setPasswordAttributeName("myappsPassword");
  BasicAttributes attrs=new BasicAttributes();
  attrs.put(new BasicAttribute("myappsPassword","mypassword".getBytes()));
  DirContextAdapter ctx=new DirContextAdapter(attrs,new DistinguishedName("cn=someName"));
  ctx.setAttributeValue("uid","ani");
  LdapUserDetails user=(LdapUserDetailsImpl)mapper.mapUserFromContext(ctx,"ani",AuthorityUtils.NO_AUTHORITIES);
  assertThat(user.getPassword()).isEqualTo("mypassword");
}
