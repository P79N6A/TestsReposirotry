@Test public void fromWhenAuthorizationRequestProvidedThenValuesAreCopied(){
  Map<String,Object> additionalParameters=new HashMap<>();
  additionalParameters.put("param1","value1");
  additionalParameters.put("param2","value2");
  OAuth2AuthorizationRequest authorizationRequest=OAuth2AuthorizationRequest.authorizationCode().authorizationUri(AUTHORIZATION_URI).clientId(CLIENT_ID).redirectUri(REDIRECT_URI).scopes(SCOPES).state(STATE).additionalParameters(additionalParameters).build();
  OAuth2AuthorizationRequest authorizationRequestCopy=OAuth2AuthorizationRequest.from(authorizationRequest).build();
  assertThat(authorizationRequestCopy.getAuthorizationUri()).isEqualTo(authorizationRequest.getAuthorizationUri());
  assertThat(authorizationRequestCopy.getGrantType()).isEqualTo(authorizationRequest.getGrantType());
  assertThat(authorizationRequestCopy.getResponseType()).isEqualTo(authorizationRequest.getResponseType());
  assertThat(authorizationRequestCopy.getClientId()).isEqualTo(authorizationRequest.getClientId());
  assertThat(authorizationRequestCopy.getRedirectUri()).isEqualTo(authorizationRequest.getRedirectUri());
  assertThat(authorizationRequestCopy.getScopes()).isEqualTo(authorizationRequest.getScopes());
  assertThat(authorizationRequestCopy.getState()).isEqualTo(authorizationRequest.getState());
  assertThat(authorizationRequestCopy.getAdditionalParameters()).isEqualTo(authorizationRequest.getAdditionalParameters());
  assertThat(authorizationRequestCopy.getAuthorizationRequestUri()).isEqualTo(authorizationRequest.getAuthorizationRequestUri());
}
