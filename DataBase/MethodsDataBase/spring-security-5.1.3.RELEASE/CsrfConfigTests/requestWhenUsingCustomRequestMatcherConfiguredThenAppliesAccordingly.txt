@Test public void requestWhenUsingCustomRequestMatcherConfiguredThenAppliesAccordingly() throws Exception {
  SpringTestContext context=this.spring.configLocations(this.xml("shared-controllers"),this.xml("WithRequestMatcher"),this.xml("mock-request-matcher"));
  context.autowire();
  RequestMatcher matcher=context.getContext().getBean(RequestMatcher.class);
  when(matcher.matches(any(HttpServletRequest.class))).thenReturn(false);
  this.mvc.perform(post("/ok")).andExpect(status().isOk());
  when(matcher.matches(any(HttpServletRequest.class))).thenReturn(true);
  this.mvc.perform(get("/ok")).andExpect(status().isForbidden());
}
