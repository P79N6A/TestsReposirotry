@Test public void configureWhenEnableWebMvcThenAuthenticationPrincipalResolvable() throws Exception {
  this.spring.register(AuthenticationPrincipalConfig.class).autowire();
  this.mockMvc.perform(get("/").with(authentication(new TestingAuthenticationToken("user1","password")))).andExpect(content().string("user1"));
}
