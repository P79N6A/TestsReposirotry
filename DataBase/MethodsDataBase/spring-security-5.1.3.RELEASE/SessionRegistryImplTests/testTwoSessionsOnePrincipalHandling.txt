@Test public void testTwoSessionsOnePrincipalHandling() throws Exception {
  Object principal="Some principal object";
  String sessionId1="1234567890";
  String sessionId2="9876543210";
  sessionRegistry.registerNewSession(sessionId1,principal);
  List<SessionInformation> sessions=sessionRegistry.getAllSessions(principal,false);
  assertThat(sessions).hasSize(1);
  assertThat(contains(sessionId1,principal)).isTrue();
  sessionRegistry.registerNewSession(sessionId2,principal);
  sessions=sessionRegistry.getAllSessions(principal,false);
  assertThat(sessions).hasSize(2);
  assertThat(contains(sessionId2,principal)).isTrue();
  sessionRegistry.removeSessionInformation(sessionId1);
  sessions=sessionRegistry.getAllSessions(principal,false);
  assertThat(sessions).hasSize(1);
  assertThat(contains(sessionId2,principal)).isTrue();
  sessionRegistry.removeSessionInformation(sessionId2);
  assertThat(sessionRegistry.getSessionInformation(sessionId2)).isNull();
  assertThat(sessionRegistry.getAllSessions(principal,false)).isEmpty();
}
