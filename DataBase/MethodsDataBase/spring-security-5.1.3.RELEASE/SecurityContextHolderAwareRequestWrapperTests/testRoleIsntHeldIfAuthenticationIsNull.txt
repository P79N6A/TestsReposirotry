@Test public void testRoleIsntHeldIfAuthenticationIsNull() throws Exception {
  SecurityContextHolder.getContext().setAuthentication(null);
  MockHttpServletRequest request=new MockHttpServletRequest();
  request.setRequestURI("/");
  SecurityContextHolderAwareRequestWrapper wrapper=new SecurityContextHolderAwareRequestWrapper(request,"");
  assertThat(wrapper.getRemoteUser()).isNull();
  assertThat(wrapper.isUserInRole("ROLE_ANY")).isFalse();
  assertThat(wrapper.getUserPrincipal()).isNull();
}
