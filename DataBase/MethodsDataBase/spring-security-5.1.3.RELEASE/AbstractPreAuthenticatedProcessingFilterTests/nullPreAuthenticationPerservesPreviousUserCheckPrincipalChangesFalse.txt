@Test public void nullPreAuthenticationPerservesPreviousUserCheckPrincipalChangesFalse() throws Exception {
  TestingAuthenticationToken authentication=new TestingAuthenticationToken("oldUser","pass","ROLE_USER");
  SecurityContextHolder.getContext().setAuthentication(authentication);
  ConcretePreAuthenticatedProcessingFilter filter=new ConcretePreAuthenticatedProcessingFilter();
  filter.principal=null;
  filter.doFilter(new MockHttpServletRequest(),new MockHttpServletResponse(),new MockFilterChain());
  assertThat(SecurityContextHolder.getContext().getAuthentication()).isEqualTo(authentication);
}
