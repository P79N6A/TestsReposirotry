@Test public void nullPopulatorConstructorReturnsEmptyAuthoritiesList() throws Exception {
  DirContextAdapter userData=new DirContextAdapter(new DistinguishedName("uid=joe"));
  LdapUserDetailsService service=new LdapUserDetailsService(new MockUserSearch(userData));
  UserDetails user=service.loadUserByUsername("doesntmatterwegetjoeanyway");
  assertThat(user.getAuthorities()).isEmpty();
}
