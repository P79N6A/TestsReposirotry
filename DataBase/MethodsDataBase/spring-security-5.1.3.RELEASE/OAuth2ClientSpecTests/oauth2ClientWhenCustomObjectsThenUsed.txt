@Test public void oauth2ClientWhenCustomObjectsThenUsed(){
  this.spring.register(ClientRegistrationConfig.class,OAuth2ClientCustomConfig.class,AuthorizedClientController.class).autowire();
  OAuth2ClientCustomConfig config=this.spring.getContext().getBean(OAuth2ClientCustomConfig.class);
  ServerAuthenticationConverter converter=config.authenticationConverter;
  ReactiveAuthenticationManager manager=config.manager;
  OAuth2AuthorizationExchange exchange=TestOAuth2AuthorizationExchanges.success();
  OAuth2AccessToken accessToken=TestOAuth2AccessTokens.noScopes();
  OAuth2AuthorizationCodeAuthenticationToken result=new OAuth2AuthorizationCodeAuthenticationToken(this.registration,exchange,accessToken);
  when(converter.convert(any())).thenReturn(Mono.just(new TestingAuthenticationToken("a","b","c")));
  when(manager.authenticate(any())).thenReturn(Mono.just(result));
  this.client.get().uri("/authorize/oauth2/code/registration-id").exchange().expectStatus().is3xxRedirection();
  verify(converter).convert(any());
  verify(manager).authenticate(any());
}
