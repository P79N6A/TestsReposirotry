@Test @WithMockUser public void registeredOAuth2AuthorizedClientWhenAuthenticatedThenRedirects(){
  this.spring.register(Config.class,AuthorizedClientController.class).autowire();
  ReactiveClientRegistrationRepository repository=this.spring.getContext().getBean(ReactiveClientRegistrationRepository.class);
  ServerOAuth2AuthorizedClientRepository authorizedClientRepository=this.spring.getContext().getBean(ServerOAuth2AuthorizedClientRepository.class);
  when(repository.findByRegistrationId(any())).thenReturn(Mono.just(TestClientRegistrations.clientRegistration().build()));
  when(authorizedClientRepository.loadAuthorizedClient(any(),any(),any())).thenReturn(Mono.empty());
  this.client.get().uri("/").exchange().expectStatus().is3xxRedirection();
}
