@Test public void testTransitiveRoleHierarchies(){
  List<GrantedAuthority> authorities1=AuthorityUtils.createAuthorityList("ROLE_A");
  List<GrantedAuthority> authorities2=AuthorityUtils.createAuthorityList("ROLE_A","ROLE_B","ROLE_C");
  List<GrantedAuthority> authorities3=AuthorityUtils.createAuthorityList("ROLE_A","ROLE_B","ROLE_C","ROLE_D");
  RoleHierarchyImpl roleHierarchyImpl=new RoleHierarchyImpl();
  roleHierarchyImpl.setHierarchy("ROLE_A > ROLE_B\nROLE_B > ROLE_C");
  assertThat(HierarchicalRolesTestHelper.containTheSameGrantedAuthorities(roleHierarchyImpl.getReachableGrantedAuthorities(authorities1),authorities2)).isTrue();
  roleHierarchyImpl.setHierarchy("ROLE_A > ROLE_B\nROLE_B > ROLE_C\nROLE_C > ROLE_D");
  assertThat(HierarchicalRolesTestHelper.containTheSameGrantedAuthorities(roleHierarchyImpl.getReachableGrantedAuthorities(authorities1),authorities3)).isTrue();
}
