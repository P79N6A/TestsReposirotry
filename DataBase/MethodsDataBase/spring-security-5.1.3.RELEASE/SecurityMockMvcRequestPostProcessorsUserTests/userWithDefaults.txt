@Test public void userWithDefaults(){
  String username="userabc";
  user(username).postProcessRequest(request);
  verify(repository).saveContext(contextCaptor.capture(),eq(request),any(HttpServletResponse.class));
  SecurityContext context=contextCaptor.getValue();
  assertThat(context.getAuthentication()).isInstanceOf(UsernamePasswordAuthenticationToken.class);
  assertThat(context.getAuthentication().getName()).isEqualTo(username);
  assertThat(context.getAuthentication().getCredentials()).isEqualTo("password");
  assertThat(context.getAuthentication().getAuthorities()).extracting("authority").containsOnly("ROLE_USER");
}
