@Test public void userWithCustom(){
  String username="customuser";
  user(username).roles("CUSTOM","ADMIN").password("newpass").postProcessRequest(request);
  verify(repository).saveContext(contextCaptor.capture(),eq(request),any(HttpServletResponse.class));
  SecurityContext context=contextCaptor.getValue();
  assertThat(context.getAuthentication()).isInstanceOf(UsernamePasswordAuthenticationToken.class);
  assertThat(context.getAuthentication().getName()).isEqualTo(username);
  assertThat(context.getAuthentication().getCredentials()).isEqualTo("newpass");
  assertThat(context.getAuthentication().getAuthorities()).extracting("authority").containsOnly("ROLE_CUSTOM","ROLE_ADMIN");
}
