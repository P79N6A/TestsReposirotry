@Test(expected=IllegalArgumentException.class) public void startupDetectsMissingUserDetailsService() throws Exception {
  DigestAuthenticationFilter filter=new DigestAuthenticationFilter();
  filter.setAuthenticationEntryPoint(new DigestAuthenticationEntryPoint());
  filter.afterPropertiesSet();
}
