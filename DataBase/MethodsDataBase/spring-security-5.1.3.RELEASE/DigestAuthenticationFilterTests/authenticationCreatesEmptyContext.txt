@Test public void authenticationCreatesEmptyContext() throws Exception {
  SecurityContext existingContext=SecurityContextHolder.createEmptyContext();
  TestingAuthenticationToken existingAuthentication=new TestingAuthenticationToken("existingauthenitcated","pass","ROLE_USER");
  existingContext.setAuthentication(existingAuthentication);
  SecurityContextHolder.setContext(existingContext);
  String responseDigest=DigestAuthUtils.generateDigest(false,USERNAME,REALM,PASSWORD,"GET",REQUEST_URI,QOP,NONCE,NC,CNONCE);
  request.addHeader("Authorization",createAuthorizationHeader(USERNAME,REALM,NONCE,REQUEST_URI,responseDigest,QOP,NC,CNONCE));
  filter.setCreateAuthenticatedToken(true);
  executeFilterInContainerSimulator(filter,request,true);
  assertThat(existingAuthentication).isSameAs(existingContext.getAuthentication());
}
