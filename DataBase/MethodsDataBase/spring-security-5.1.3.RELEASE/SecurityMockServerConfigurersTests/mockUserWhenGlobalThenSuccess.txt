@Test public void mockUserWhenGlobalThenSuccess(){
  client=WebTestClient.bindToController(controller).webFilter(new SecurityContextServerWebExchangeWebFilter()).apply(springSecurity()).apply(mockUser()).configureClient().defaultHeader(HttpHeaders.ACCEPT,MediaType.APPLICATION_JSON_VALUE).build();
  client.get().exchange().expectStatus().isOk();
  Principal actual=controller.removePrincipal();
  assertPrincipalCreatedFromUserDetails(actual,userBuilder.build());
}
