@Test public void loadAuthorizedClientWhenClientRegistrationFoundAndAssociatedToPrincipalThenReturnAuthorizedClient(){
  Authentication authentication=mock(Authentication.class);
  when(authentication.getName()).thenReturn(this.principalName1);
  OAuth2AuthorizedClient authorizedClient=new OAuth2AuthorizedClient(this.registration1,this.principalName1,mock(OAuth2AccessToken.class));
  this.authorizedClientService.saveAuthorizedClient(authorizedClient,authentication);
  OAuth2AuthorizedClient loadedAuthorizedClient=this.authorizedClientService.loadAuthorizedClient(this.registration1.getRegistrationId(),this.principalName1);
  assertThat(loadedAuthorizedClient).isEqualTo(authorizedClient);
}
