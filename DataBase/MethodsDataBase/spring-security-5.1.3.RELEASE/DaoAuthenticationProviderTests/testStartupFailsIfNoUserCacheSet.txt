@Test public void testStartupFailsIfNoUserCacheSet() throws Exception {
  DaoAuthenticationProvider provider=createProvider();
  provider.setUserDetailsService(new MockUserDetailsServiceUserRod());
  assertThat(provider.getUserCache().getClass()).isEqualTo(NullUserCache.class);
  provider.setUserCache(null);
  try {
    provider.afterPropertiesSet();
    fail("Should have thrown IllegalArgumentException");
  }
 catch (  IllegalArgumentException expected) {
  }
}
