@Test @WithMockUser("method-user") public void withMockUserWhenClassAndMethodAnnotationThenMethodOverrides(){
  client.get().exchange().expectStatus().isOk().expectBody(String.class).consumeWith(response -> assertThat(response.getResponseBody()).contains("\"username\":\"method-user\""));
  Authentication authentication=TestSecurityContextHolder.getContext().getAuthentication();
  controller.assertPrincipalIsEqualTo(authentication);
}
