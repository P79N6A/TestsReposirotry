@Test public void configureWhenJaasApiIntegrationFilterAddedThenJaasSubjectObtained() throws Exception {
  LoginContext loginContext=mock(LoginContext.class);
  when(loginContext.getSubject()).thenReturn(new Subject());
  JaasAuthenticationToken authenticationToken=mock(JaasAuthenticationToken.class);
  when(authenticationToken.isAuthenticated()).thenReturn(true);
  when(authenticationToken.getLoginContext()).thenReturn(loginContext);
  this.spring.register(JaasApiProvisionConfig.class).autowire();
  this.mockMvc.perform(get("/").with(authentication(authenticationToken)));
  verify(loginContext,times(1)).getSubject();
}
