@Test public void configureWhenSessionCreationPolicyIfRequiredThenSessionCreatedWhenRequiredOnRequest() throws Exception {
  this.spring.register(IfRequiredConfig.class).autowire();
  MvcResult mvcResult=this.mockMvc.perform(get("/unsecure")).andReturn();
  HttpSession session=mvcResult.getRequest().getSession(false);
  assertThat(session).isNull();
  mvcResult=this.mockMvc.perform(formLogin()).andReturn();
  session=mvcResult.getRequest().getSession(false);
  assertThat(session).isNotNull();
  assertThat(session.isNew()).isTrue();
}
