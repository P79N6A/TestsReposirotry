@Test public void configureWhenAccessDecisionManagerSetThenVerifyUse() throws Exception {
  AccessDecisionManagerRefConfig.ACCESS_DECISION_MANAGER=mock(AccessDecisionManager.class);
  when(AccessDecisionManagerRefConfig.ACCESS_DECISION_MANAGER.supports(FilterInvocation.class)).thenReturn(true);
  when(AccessDecisionManagerRefConfig.ACCESS_DECISION_MANAGER.supports(any(ConfigAttribute.class))).thenReturn(true);
  this.spring.register(AccessDecisionManagerRefConfig.class).autowire();
  this.mockMvc.perform(get("/"));
  verify(AccessDecisionManagerRefConfig.ACCESS_DECISION_MANAGER,times(1)).decide(any(Authentication.class),any(),anyCollection());
}
