@Test public void generatesForOAuth2LoginAndEscapesClientName() throws Exception {
  DefaultLoginPageGeneratingFilter filter=new DefaultLoginPageGeneratingFilter();
  filter.setLoginPageUrl(DefaultLoginPageGeneratingFilter.DEFAULT_LOGIN_PAGE_URL);
  filter.setOauth2LoginEnabled(true);
  String clientName="Google < > \" \' &";
  filter.setOauth2AuthenticationUrlToClientName(Collections.singletonMap("/oauth2/authorization/google",clientName));
  MockHttpServletResponse response=new MockHttpServletResponse();
  filter.doFilter(new MockHttpServletRequest("GET","/login"),response,chain);
  assertThat(response.getContentAsString()).contains("<a href=\"/oauth2/authorization/google\">Google &lt; &gt; &quot; &#39; &amp;</a>");
}
