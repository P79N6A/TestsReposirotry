@Test public void writeHttpHeadersWhenCustomMaxAgeThenWrites(){
  Duration maxAge=Duration.ofDays(1);
  hsts.setMaxAge(maxAge);
  exchange=exchange(MockServerHttpRequest.get("https://example.com/"));
  hsts.writeHttpHeaders(exchange);
  HttpHeaders headers=exchange.getResponse().getHeaders();
  assertThat(headers).hasSize(1);
  assertThat(headers).containsEntry(StrictTransportSecurityServerHttpHeadersWriter.STRICT_TRANSPORT_SECURITY,Arrays.asList("max-age=" + maxAge.getSeconds() + " ; includeSubDomains"));
}
