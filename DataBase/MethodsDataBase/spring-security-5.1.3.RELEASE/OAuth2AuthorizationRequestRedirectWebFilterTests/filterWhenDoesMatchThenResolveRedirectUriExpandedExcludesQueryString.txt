@Test public void filterWhenDoesMatchThenResolveRedirectUriExpandedExcludesQueryString(){
  FluxExchangeResult<String> result=this.client.get().uri("https://example.com/oauth2/authorization/registration-id?foo=bar").exchange().expectStatus().is3xxRedirection().returnResult(String.class);
  result.assertWithDiagnostics(() -> {
    URI location=result.getResponseHeaders().getLocation();
    assertThat(location).hasScheme("https").hasHost("example.com").hasPath("/login/oauth/authorize").hasParameter("response_type","code").hasParameter("client_id","client-id").hasParameter("scope","read:user").hasParameter("state").hasParameter("redirect_uri","https://example.com/login/oauth2/code/registration-id");
  }
);
}
