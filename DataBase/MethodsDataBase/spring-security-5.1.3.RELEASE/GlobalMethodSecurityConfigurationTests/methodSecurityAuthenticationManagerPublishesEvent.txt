@Test public void methodSecurityAuthenticationManagerPublishesEvent(){
  this.spring.register(InMemoryAuthWithGlobalMethodSecurityConfig.class).autowire();
  try {
    this.authenticationManager.authenticate(new UsernamePasswordAuthenticationToken("foo","bar"));
  }
 catch (  AuthenticationException e) {
  }
  assertThat(this.events.getEvents()).extracting(Object::getClass).containsOnly((Class)AuthenticationFailureBadCredentialsEvent.class);
}
