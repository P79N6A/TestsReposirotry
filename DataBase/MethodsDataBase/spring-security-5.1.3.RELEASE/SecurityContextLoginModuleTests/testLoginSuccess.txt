@Test public void testLoginSuccess() throws Exception {
  SecurityContextHolder.getContext().setAuthentication(this.auth);
  assertThat(this.module.login()).as("Login should succeed, there is an authentication set").isTrue();
  assertThat(this.module.commit()).withFailMessage("The authentication is not null, this should return true").isTrue();
  assertThat(this.subject.getPrincipals().contains(this.auth)).withFailMessage("Principals should contain the authentication").isTrue();
}
