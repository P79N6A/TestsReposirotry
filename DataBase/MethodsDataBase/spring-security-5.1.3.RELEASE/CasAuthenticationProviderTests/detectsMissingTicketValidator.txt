@Test(expected=IllegalArgumentException.class) public void detectsMissingTicketValidator() throws Exception {
  CasAuthenticationProvider cap=new CasAuthenticationProvider();
  cap.setAuthenticationUserDetailsService(new MockAuthoritiesPopulator());
  cap.setKey("qwerty");
  cap.setStatelessTicketCache(new MockStatelessTicketCache());
  cap.setServiceProperties(makeServiceProperties());
  cap.afterPropertiesSet();
}
