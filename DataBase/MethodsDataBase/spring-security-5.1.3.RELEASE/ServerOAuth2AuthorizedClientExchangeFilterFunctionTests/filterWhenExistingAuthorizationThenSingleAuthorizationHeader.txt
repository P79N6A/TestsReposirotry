@Test public void filterWhenExistingAuthorizationThenSingleAuthorizationHeader(){
  OAuth2AuthorizedClient authorizedClient=new OAuth2AuthorizedClient(this.registration,"principalName",this.accessToken);
  ClientRequest request=ClientRequest.create(GET,URI.create("https://example.com")).header(HttpHeaders.AUTHORIZATION,"Existing").attributes(oauth2AuthorizedClient(authorizedClient)).build();
  this.function.filter(request,this.exchange).block();
  HttpHeaders headers=this.exchange.getRequest().headers();
  assertThat(headers.get(HttpHeaders.AUTHORIZATION)).containsOnly("Bearer " + this.accessToken.getTokenValue());
}
