@Test public void filterWhenAuthorizedClientThenAuthorizationHeader(){
  OAuth2AuthorizedClient authorizedClient=new OAuth2AuthorizedClient(this.registration,"principalName",this.accessToken);
  ClientRequest request=ClientRequest.create(GET,URI.create("https://example.com")).attributes(oauth2AuthorizedClient(authorizedClient)).build();
  this.function.filter(request,this.exchange).block();
  assertThat(this.exchange.getRequest().headers().getFirst(HttpHeaders.AUTHORIZATION)).isEqualTo("Bearer " + this.accessToken.getTokenValue());
}
