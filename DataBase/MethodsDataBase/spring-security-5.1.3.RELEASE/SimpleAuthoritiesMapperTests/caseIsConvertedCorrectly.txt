@Test public void caseIsConvertedCorrectly(){
  SimpleAuthorityMapper mapper=new SimpleAuthorityMapper();
  mapper.setPrefix("");
  List<GrantedAuthority> toMap=AuthorityUtils.createAuthorityList("AaA","Bbb");
  Set<String> mapped=AuthorityUtils.authorityListToSet(mapper.mapAuthorities(toMap));
  assertThat(mapped).hasSize(2);
  assertThat(mapped.contains("AaA")).isTrue();
  assertThat(mapped.contains("Bbb")).isTrue();
  mapper.setConvertToLowerCase(true);
  mapped=AuthorityUtils.authorityListToSet(mapper.mapAuthorities(toMap));
  assertThat(mapped).hasSize(2);
  assertThat(mapped.contains("aaa")).isTrue();
  assertThat(mapped.contains("bbb")).isTrue();
  mapper.setConvertToLowerCase(false);
  mapper.setConvertToUpperCase(true);
  mapped=AuthorityUtils.authorityListToSet(mapper.mapAuthorities(toMap));
  assertThat(mapped).hasSize(2);
  assertThat(mapped.contains("AAA")).isTrue();
  assertThat(mapped.contains("BBB")).isTrue();
}
