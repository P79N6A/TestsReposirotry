@Test(expected=AuthenticationCredentialsNotFoundException.class) public void securityInterceptorIsAppliedWhenUsedWithBeanNameAutoProxyCreator(){
  setContext("<b:bean id='autoProxyCreator' class='org.springframework.aop.framework.autoproxy.BeanNameAutoProxyCreator'>" + "   <b:property name='interceptorNames'>" + "       <b:list>"+ "          <b:value>securityInterceptor</b:value>"+ "       </b:list>"+ "   </b:property>"+ "   <b:property name='beanNames'>"+ "       <b:list>"+ "          <b:value>target</b:value>"+ "       </b:list>"+ "   </b:property>"+ "   <b:property name='proxyTargetClass' value='false'/>"+ "</b:bean>" + TARGET_BEAN_AND_INTERCEPTOR + AUTH_PROVIDER_XML+ ACCESS_MANAGER_XML);
  ITargetObject target=(ITargetObject)appContext.getBean("target");
  try {
    target.makeLowerCase("TEST");
    fail("AuthenticationCredentialsNotFoundException expected");
  }
 catch (  AuthenticationCredentialsNotFoundException expected) {
  }
  target.makeUpperCase("test");
}
