@Test(expected=AuthenticationCredentialsNotFoundException.class) public void securityInterceptorIsAppliedWhenUsedWithAopConfig(){
  setContext("<aop:config>" + "     <aop:pointcut id='targetMethods' expression='execution(* org.springframework.security.TargetObject.*(..))'/>" + "     <aop:advisor advice-ref='securityInterceptor' pointcut-ref='targetMethods' />"+ "</aop:config>" + TARGET_BEAN_AND_INTERCEPTOR + AUTH_PROVIDER_XML+ ACCESS_MANAGER_XML);
  ITargetObject target=(ITargetObject)appContext.getBean("target");
  try {
    target.makeLowerCase("TEST");
    fail("AuthenticationCredentialsNotFoundException expected");
  }
 catch (  AuthenticationCredentialsNotFoundException expected) {
  }
  target.makeUpperCase("test");
}
