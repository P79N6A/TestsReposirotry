@Test public void expressionPropertiesAreResolvedAgainstAppContextBeans() throws Exception {
  StaticApplicationContext appContext=new StaticApplicationContext();
  RootBeanDefinition bean=new RootBeanDefinition(SecurityConfig.class);
  bean.getConstructorArgumentValues().addGenericArgumentValue("ROLE_A");
  appContext.registerBeanDefinition("role",bean);
  handler.setApplicationContext(appContext);
  EvaluationContext ctx=handler.createEvaluationContext(mock(Authentication.class),mock(FilterInvocation.class));
  ExpressionParser parser=handler.getExpressionParser();
  assertThat(parser.parseExpression("@role.getAttribute() == 'ROLE_A'").getValue(ctx,Boolean.class)).isTrue();
  assertThat(parser.parseExpression("@role.attribute == 'ROLE_A'").getValue(ctx,Boolean.class)).isTrue();
}
