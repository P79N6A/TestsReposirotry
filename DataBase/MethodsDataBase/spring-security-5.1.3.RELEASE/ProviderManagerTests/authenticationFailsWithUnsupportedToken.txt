@Test(expected=ProviderNotFoundException.class) public void authenticationFailsWithUnsupportedToken() throws Exception {
  Authentication token=new AbstractAuthenticationToken(null){
    public Object getCredentials(){
      return "";
    }
    public Object getPrincipal(){
      return "";
    }
  }
;
  ProviderManager mgr=makeProviderManager();
  mgr.setMessageSource(mock(MessageSource.class));
  mgr.authenticate(token);
}
