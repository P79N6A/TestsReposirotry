@Test public void deleteUserRemovesUserDataAndAuthoritiesAndClearsCache(){
  insertJoe();
  manager.deleteUser("joe");
  assertThat(template.queryForList(SELECT_JOE_SQL)).isEmpty();
  assertThat(template.queryForList(SELECT_JOE_AUTHORITIES_SQL)).isEmpty();
  assertThat(cache.getUserMap().containsKey("joe")).isFalse();
}
