@Test public void testListLocksServer() throws Exception {
  LockProcedure procedure=createExclusiveLockProcedure(0);
  queue.waitServerExclusiveLock(procedure,ServerName.valueOf("server1,1234,0"));
  List<LockedResource> resources=queue.getLocks();
  assertEquals(1,resources.size());
  LockedResource serverResource=resources.get(0);
  assertLockResource(serverResource,LockedResourceType.SERVER,"server1,1234,0");
  assertExclusiveLock(serverResource,procedure);
  assertTrue(serverResource.getWaitingProcedures().isEmpty());
}
