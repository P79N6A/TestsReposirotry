@Test public void testVerifyNamespaceXLock() throws Exception {
  String nsName="ns1";
  TableName tableName=TableName.valueOf(nsName,name.getMethodName());
  queue.addBack(new TestNamespaceProcedure(1,nsName,TableProcedureInterface.TableOperationType.CREATE));
  queue.addBack(new TestTableProcedure(2,tableName,TableProcedureInterface.TableOperationType.READ));
  Procedure<?> proc=queue.poll();
  assertEquals(1,proc.getProcId());
  assertEquals(false,queue.waitNamespaceExclusiveLock(proc,nsName));
  assertEquals(null,queue.poll(0));
  queue.wakeNamespaceExclusiveLock(proc,nsName);
  proc=queue.poll();
  assertEquals(2,proc.getProcId());
  assertEquals(false,queue.waitTableExclusiveLock(proc,tableName));
  queue.wakeTableExclusiveLock(proc,tableName);
}
