@Test public void testListLocksRegion() throws Exception {
  LockProcedure procedure=createExclusiveLockProcedure(3);
  RegionInfo regionInfo=RegionInfoBuilder.newBuilder(TableName.valueOf("ns3","table3")).build();
  queue.waitRegion(procedure,regionInfo);
  List<LockedResource> resources=queue.getLocks();
  assertEquals(3,resources.size());
  LockedResource namespaceResource=resources.get(0);
  assertLockResource(namespaceResource,LockedResourceType.NAMESPACE,"ns3");
  assertSharedLock(namespaceResource,1);
  assertTrue(namespaceResource.getWaitingProcedures().isEmpty());
  LockedResource tableResource=resources.get(1);
  assertLockResource(tableResource,LockedResourceType.TABLE,"ns3:table3");
  assertSharedLock(tableResource,1);
  assertTrue(tableResource.getWaitingProcedures().isEmpty());
  LockedResource regionResource=resources.get(2);
  assertLockResource(regionResource,LockedResourceType.REGION,regionInfo.getEncodedName());
  assertExclusiveLock(regionResource,procedure);
  assertTrue(regionResource.getWaitingProcedures().isEmpty());
}
