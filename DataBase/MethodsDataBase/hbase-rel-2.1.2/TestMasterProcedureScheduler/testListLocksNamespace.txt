@Test public void testListLocksNamespace() throws Exception {
  LockProcedure procedure=createExclusiveLockProcedure(1);
  queue.waitNamespaceExclusiveLock(procedure,"ns1");
  List<LockedResource> locks=queue.getLocks();
  assertEquals(2,locks.size());
  LockedResource namespaceResource=locks.get(0);
  assertLockResource(namespaceResource,LockedResourceType.NAMESPACE,"ns1");
  assertExclusiveLock(namespaceResource,procedure);
  assertTrue(namespaceResource.getWaitingProcedures().isEmpty());
  LockedResource tableResource=locks.get(1);
  assertLockResource(tableResource,LockedResourceType.TABLE,TableName.NAMESPACE_TABLE_NAME.getNameAsString());
  assertSharedLock(tableResource,1);
  assertTrue(tableResource.getWaitingProcedures().isEmpty());
}
