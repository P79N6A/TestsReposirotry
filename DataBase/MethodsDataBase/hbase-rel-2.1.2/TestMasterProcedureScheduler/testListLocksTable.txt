@Test public void testListLocksTable() throws Exception {
  LockProcedure procedure=createExclusiveLockProcedure(2);
  queue.waitTableExclusiveLock(procedure,TableName.valueOf("ns2","table2"));
  List<LockedResource> locks=queue.getLocks();
  assertEquals(2,locks.size());
  LockedResource namespaceResource=locks.get(0);
  assertLockResource(namespaceResource,LockedResourceType.NAMESPACE,"ns2");
  assertSharedLock(namespaceResource,1);
  assertTrue(namespaceResource.getWaitingProcedures().isEmpty());
  LockedResource tableResource=locks.get(1);
  assertLockResource(tableResource,LockedResourceType.TABLE,"ns2:table2");
  assertExclusiveLock(tableResource,procedure);
  assertTrue(tableResource.getWaitingProcedures().isEmpty());
}
