@Test public void testInheritedRegionXLock(){
  final TableName tableName=TableName.valueOf(name.getMethodName());
  final RegionInfo region=RegionInfoBuilder.newBuilder(tableName).setStartKey(Bytes.toBytes("a")).setEndKey(Bytes.toBytes("b")).build();
  queue.addBack(new TestRegionProcedure(1,tableName,TableProcedureInterface.TableOperationType.REGION_SPLIT,region));
  queue.addBack(new TestRegionProcedure(1,2,tableName,TableProcedureInterface.TableOperationType.REGION_UNASSIGN,region));
  queue.addBack(new TestRegionProcedure(3,tableName,TableProcedureInterface.TableOperationType.REGION_EDIT,region));
  Procedure<?> rootProc=queue.poll();
  assertEquals(1,rootProc.getProcId());
  assertEquals(false,queue.waitRegion(rootProc,region));
  Procedure<?> childProc=queue.poll();
  assertEquals(2,childProc.getProcId());
  assertEquals(false,queue.waitRegion(childProc,region));
  Procedure<?> proc=queue.poll();
  assertEquals(3,proc.getProcId());
  assertEquals(true,queue.waitRegion(proc,region));
  queue.wakeRegion(childProc,region);
  assertEquals(null,queue.poll(0));
  queue.wakeRegion(rootProc,region);
  proc=queue.poll();
  assertEquals(3,proc.getProcId());
  assertEquals(false,queue.waitRegion(proc,region));
  queue.wakeRegion(proc,region);
}
