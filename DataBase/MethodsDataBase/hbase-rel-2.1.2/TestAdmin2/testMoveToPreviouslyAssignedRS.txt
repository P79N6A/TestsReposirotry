@Test public void testMoveToPreviouslyAssignedRS() throws IOException, InterruptedException {
  MiniHBaseCluster cluster=TEST_UTIL.getHBaseCluster();
  HMaster master=cluster.getMaster();
  final TableName tableName=TableName.valueOf(name.getMethodName());
  Admin localAdmin=createTable(tableName);
  List<RegionInfo> tableRegions=localAdmin.getRegions(tableName);
  RegionInfo hri=tableRegions.get(0);
  AssignmentManager am=master.getAssignmentManager();
  ServerName server=am.getRegionStates().getRegionServerOfRegion(hri);
  localAdmin.move(hri.getEncodedNameAsBytes(),Bytes.toBytes(server.getServerName()));
  assertEquals("Current region server and region server before move should be same.",server,am.getRegionStates().getRegionServerOfRegion(hri));
}
