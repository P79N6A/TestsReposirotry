/** 
 * Assert that when a Coprocessor is annotated with CoreCoprocessor, then it is possible to access a RegionServerServices instance. Assert the opposite too. Do it to RegionCoprocessors.
 * @throws IOException
 */
@Test public void testCoreRegionCoprocessor() throws IOException {
  RegionCoprocessorHost rch=region.getCoprocessorHost();
  RegionCoprocessorEnvironment env=rch.load(null,NotCoreRegionCoprocessor.class.getName(),0,HTU.getConfiguration());
  assertFalse(env instanceof HasRegionServerServices);
  env=rch.load(null,CoreRegionCoprocessor.class.getName(),1,HTU.getConfiguration());
  assertTrue(env instanceof HasRegionServerServices);
  assertEquals(this.rss,((HasRegionServerServices)env).getRegionServerServices());
}
