@Test public void testDoubleLoadingAndPriorityValue(){
  final Configuration conf=HBaseConfiguration.create();
  final String key="KEY";
  final String coprocessor="org.apache.hadoop.hbase.coprocessor.SimpleRegionObserver";
  CoprocessorHost<RegionCoprocessor,CoprocessorEnvironment<RegionCoprocessor>> host;
  host=new CoprocessorHostForTest<>(conf);
  conf.setStrings(key,coprocessor,coprocessor,coprocessor,SimpleRegionObserverV2.class.getName());
  host.loadSystemCoprocessors(conf,key);
  Assert.assertEquals(2,host.coprocEnvironments.size());
  CoprocessorEnvironment<?> simpleEnv=host.findCoprocessorEnvironment(SimpleRegionObserver.class.getName());
  CoprocessorEnvironment<?> simpleEnv_v2=host.findCoprocessorEnvironment(SimpleRegionObserverV2.class.getName());
  assertNotNull(simpleEnv);
  assertNotNull(simpleEnv_v2);
  assertEquals(Coprocessor.PRIORITY_SYSTEM,simpleEnv.getPriority());
  assertEquals(Coprocessor.PRIORITY_SYSTEM + 1,simpleEnv_v2.getPriority());
}
