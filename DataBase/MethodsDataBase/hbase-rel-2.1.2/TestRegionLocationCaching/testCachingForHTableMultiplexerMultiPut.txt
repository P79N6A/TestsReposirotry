@Test public void testCachingForHTableMultiplexerMultiPut() throws Exception {
  HTableMultiplexer multiplexer=new HTableMultiplexer(TEST_UTIL.getConfiguration(),PER_REGIONSERVER_QUEUE_SIZE);
  List<Put> multiput=new ArrayList<Put>();
  for (int i=0; i < 10; i++) {
    Put put=new Put(Bytes.toBytes("htable_multiplexer_multi_put" + i));
    byte[] value=Bytes.toBytes("value_" + i);
    put.addColumn(FAMILY,QUALIFIER,value);
    multiput.add(put);
  }
  List<Put> failedPuts=multiplexer.put(TABLE_NAME,multiput);
  assertNull("All put requests were not accepted by multiplexer queue",failedPuts);
  checkRegionLocationIsCached(TABLE_NAME,multiplexer.getConnection());
  for (int i=0; i < 10; i++) {
    checkExistence(TABLE_NAME,Bytes.toBytes("htable_multiplexer_multi_put" + i),FAMILY,QUALIFIER);
  }
  multiplexer.close();
}
