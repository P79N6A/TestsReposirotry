@Test public void testRegisterGauge(){
  registry.register("mygauge",new Gauge<Long>(){
    @Override public Long getValue(){
      return 42L;
    }
  }
);
  Optional<Metric> metric=registry.get("mygauge");
  assertTrue(metric.isPresent());
  assertEquals(42L,(long)((Gauge<Long>)metric.get()).getValue());
}
