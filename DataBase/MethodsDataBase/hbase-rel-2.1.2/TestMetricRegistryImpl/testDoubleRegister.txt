@Test public void testDoubleRegister(){
  Gauge g1=registry.register("mygauge",() -> 42L);
  Gauge g2=registry.register("mygauge",() -> 52L);
  assertEquals(g1,g2);
  Optional<Metric> metric=registry.get("mygauge");
  assertTrue(metric.isPresent());
  assertEquals(42L,(long)((Gauge<Long>)metric.get()).getValue());
  Counter c1=registry.counter("mycounter");
  Counter c2=registry.counter("mycounter");
  assertEquals(c1,c2);
}
