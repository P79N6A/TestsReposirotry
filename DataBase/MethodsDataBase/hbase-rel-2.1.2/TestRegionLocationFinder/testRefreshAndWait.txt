@Test public void testRefreshAndWait() throws Exception {
  finder.getCache().invalidateAll();
  for (int i=0; i < ServerNum; i++) {
    HRegionServer server=cluster.getRegionServer(i);
    List<HRegion> regions=server.getRegions(tableName);
    if (regions.size() <= 0) {
      continue;
    }
    List<RegionInfo> regionInfos=new ArrayList<>(regions.size());
    for (    HRegion region : regions) {
      regionInfos.add(region.getRegionInfo());
    }
    finder.refreshAndWait(regionInfos);
    for (    RegionInfo regionInfo : regionInfos) {
      assertNotNull(finder.getCache().getIfPresent(regionInfo));
    }
  }
}
