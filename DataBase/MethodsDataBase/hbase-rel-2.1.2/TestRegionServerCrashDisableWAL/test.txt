@Test public void test() throws InterruptedException, IOException {
  HMaster master=UTIL.getMiniHBaseCluster().stopMaster(0).getMaster();
  UTIL.waitFor(30000,() -> !master.isAlive());
  RegionServerThread thread=null;
  for (  RegionServerThread t : UTIL.getMiniHBaseCluster().getRegionServerThreads()) {
    if (!t.getRegionServer().getRegions(TABLE_NAME).isEmpty()) {
      thread=t;
      break;
    }
  }
  thread.getRegionServer().abort("For testing");
  thread.join();
  UTIL.getMiniHBaseCluster().startMaster();
  try (Table table=UTIL.getConnection().getTableBuilder(TABLE_NAME,null).setOperationTimeout(30000).build()){
    table.put(new Put(Bytes.toBytes(1)).addColumn(CF,CQ,Bytes.toBytes(1)));
    assertEquals(1,Bytes.toInt(table.get(new Get(Bytes.toBytes(1))).getValue(CF,CQ)));
  }
 }
