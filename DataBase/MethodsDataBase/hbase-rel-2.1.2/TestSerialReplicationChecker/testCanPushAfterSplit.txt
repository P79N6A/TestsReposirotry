@Test public void testCanPushAfterSplit() throws IOException, ReplicationException {
  byte[] endKey=new byte[]{(byte)0xFF,0x00,(byte)0xFF,(byte)0xFF,0x01};
  RegionInfo region=RegionInfoBuilder.newBuilder(tableName).setRegionId(1).build();
  RegionInfo regionA=RegionInfoBuilder.newBuilder(tableName).setEndKey(endKey).setRegionId(2).build();
  RegionInfo regionB=RegionInfoBuilder.newBuilder(tableName).setStartKey(endKey).setRegionId(3).build();
  addStateAndBarrier(region,null,10,100);
  addStateAndBarrier(regionA,RegionState.State.OPEN,100,200);
  addStateAndBarrier(regionB,RegionState.State.OPEN,100,300);
  addParents(regionA,Arrays.asList(region));
  addParents(regionB,Arrays.asList(region));
  Cell cellA=createCell(regionA);
  Cell cellB=createCell(regionB);
  assertFalse(checker.canPush(createEntry(regionA,150),cellA));
  assertFalse(checker.canPush(createEntry(regionB,200),cellB));
  updatePushedSeqId(region,99);
  assertTrue(checker.canPush(createEntry(regionA,150),cellA));
  assertTrue(checker.canPush(createEntry(regionB,200),cellB));
}
