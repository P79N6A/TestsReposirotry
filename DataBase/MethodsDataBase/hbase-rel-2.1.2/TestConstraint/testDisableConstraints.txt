/** 
 * Test that if we disable all constraints, then nothing gets run
 * @throws Throwable
 */
@SuppressWarnings("unchecked") @Test public void testDisableConstraints() throws Throwable {
  HTableDescriptor desc=new HTableDescriptor(tableName);
  for (  byte[] family : new byte[][]{dummy,test}) {
    desc.addFamily(new HColumnDescriptor(family));
  }
  Constraints.add(desc,CheckWasRunConstraint.class);
  Constraints.disable(desc);
  util.getAdmin().createTable(desc);
  Table table=util.getConnection().getTable(tableName);
  try {
    Put put=new Put(row1);
    byte[] qualifier=new byte[0];
    put.addColumn(dummy,qualifier,Bytes.toBytes("pass"));
    LOG.warn("Doing put in table");
    table.put(put);
  }
  finally {
    table.close();
  }
  assertFalse(CheckWasRunConstraint.wasRun);
}
