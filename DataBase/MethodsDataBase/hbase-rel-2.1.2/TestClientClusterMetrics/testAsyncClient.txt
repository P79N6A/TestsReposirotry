@Test public void testAsyncClient() throws Exception {
  try (AsyncConnection asyncConnect=ConnectionFactory.createAsyncConnection(UTIL.getConfiguration()).get()){
    AsyncAdmin asyncAdmin=asyncConnect.getAdmin();
    CompletableFuture<ClusterMetrics> originFuture=asyncAdmin.getClusterMetrics();
    CompletableFuture<ClusterMetrics> defaultsFuture=asyncAdmin.getClusterMetrics(EnumSet.allOf(Option.class));
    ClusterMetrics origin=originFuture.get();
    ClusterMetrics defaults=defaultsFuture.get();
    Assert.assertEquals(origin.getHBaseVersion(),defaults.getHBaseVersion());
    Assert.assertEquals(origin.getClusterId(),defaults.getClusterId());
    Assert.assertEquals(origin.getHBaseVersion(),defaults.getHBaseVersion());
    Assert.assertEquals(origin.getClusterId(),defaults.getClusterId());
    Assert.assertEquals(origin.getAverageLoad(),defaults.getAverageLoad(),0);
    Assert.assertEquals(origin.getBackupMasterNames().size(),defaults.getBackupMasterNames().size());
    Assert.assertEquals(origin.getDeadServerNames().size(),defaults.getDeadServerNames().size());
    Assert.assertEquals(origin.getRegionCount(),defaults.getRegionCount());
    Assert.assertEquals(origin.getLiveServerMetrics().size(),defaults.getLiveServerMetrics().size());
    Assert.assertEquals(origin.getMasterInfoPort(),defaults.getMasterInfoPort());
  }
 }
