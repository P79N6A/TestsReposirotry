@Test public void testAddPeerWithState() throws Exception {
  ReplicationPeerConfig rpc1=new ReplicationPeerConfig();
  rpc1.setClusterKey(KEY_ONE);
  hbaseAdmin.addReplicationPeer(ID_ONE,rpc1,true);
  assertTrue(hbaseAdmin.listReplicationPeers(Pattern.compile(ID_ONE)).get(0).isEnabled());
  hbaseAdmin.removeReplicationPeer(ID_ONE);
  ReplicationPeerConfig rpc2=new ReplicationPeerConfig();
  rpc2.setClusterKey(KEY_SECOND);
  hbaseAdmin.addReplicationPeer(ID_SECOND,rpc2,false);
  assertFalse(hbaseAdmin.listReplicationPeers(Pattern.compile(ID_SECOND)).get(0).isEnabled());
  hbaseAdmin.removeReplicationPeer(ID_SECOND);
}
