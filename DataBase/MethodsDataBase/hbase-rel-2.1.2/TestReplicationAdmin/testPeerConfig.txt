/** 
 * Tests that the peer configuration used by ReplicationAdmin contains all the peer's properties.
 */
@Test public void testPeerConfig() throws Exception {
  ReplicationPeerConfig config=new ReplicationPeerConfig();
  config.setClusterKey(KEY_ONE);
  config.getConfiguration().put("key1","value1");
  config.getConfiguration().put("key2","value2");
  hbaseAdmin.addReplicationPeer(ID_ONE,config);
  List<ReplicationPeerDescription> peers=hbaseAdmin.listReplicationPeers();
  assertEquals(1,peers.size());
  ReplicationPeerDescription peerOne=peers.get(0);
  assertNotNull(peerOne);
  assertEquals("value1",peerOne.getPeerConfig().getConfiguration().get("key1"));
  assertEquals("value2",peerOne.getPeerConfig().getConfiguration().get("key2"));
  hbaseAdmin.removeReplicationPeer(ID_ONE);
}
