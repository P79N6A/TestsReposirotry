@Test public void testNumberOfMemStoreScannersAfterFlush() throws IOException {
  long seqId=100;
  long timestamp=System.currentTimeMillis();
  Cell cell0=CellBuilderFactory.create(CellBuilderType.DEEP_COPY).setRow(row).setFamily(family).setQualifier(qf1).setTimestamp(timestamp).setType(Cell.Type.Put).setValue(qf1).build();
  PrivateCellUtil.setSequenceId(cell0,seqId);
  testNumberOfMemStoreScannersAfterFlush(Arrays.asList(cell0),Collections.emptyList());
  Cell cell1=CellBuilderFactory.create(CellBuilderType.DEEP_COPY).setRow(row).setFamily(family).setQualifier(qf2).setTimestamp(timestamp).setType(Cell.Type.Put).setValue(qf1).build();
  PrivateCellUtil.setSequenceId(cell1,seqId);
  testNumberOfMemStoreScannersAfterFlush(Arrays.asList(cell0),Arrays.asList(cell1));
  seqId=101;
  timestamp=System.currentTimeMillis();
  Cell cell2=CellBuilderFactory.create(CellBuilderType.DEEP_COPY).setRow(row2).setFamily(family).setQualifier(qf2).setTimestamp(timestamp).setType(Cell.Type.Put).setValue(qf1).build();
  PrivateCellUtil.setSequenceId(cell2,seqId);
  testNumberOfMemStoreScannersAfterFlush(Arrays.asList(cell0),Arrays.asList(cell1,cell2));
}
