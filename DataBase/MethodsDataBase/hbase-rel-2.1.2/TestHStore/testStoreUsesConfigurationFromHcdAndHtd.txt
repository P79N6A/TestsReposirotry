@Test public void testStoreUsesConfigurationFromHcdAndHtd() throws Exception {
  final String CONFIG_KEY="hbase.regionserver.thread.compaction.throttle";
  long anyValue=10;
  Configuration conf=HBaseConfiguration.create();
  conf.setLong(CONFIG_KEY,anyValue);
  init(name.getMethodName() + "-xml",conf);
  assertTrue(store.throttleCompaction(anyValue + 1));
  assertFalse(store.throttleCompaction(anyValue));
  --anyValue;
  init(name.getMethodName() + "-htd",conf,TableDescriptorBuilder.newBuilder(TableName.valueOf(table)).setValue(CONFIG_KEY,Long.toString(anyValue)),ColumnFamilyDescriptorBuilder.of(family));
  assertTrue(store.throttleCompaction(anyValue + 1));
  assertFalse(store.throttleCompaction(anyValue));
  --anyValue;
  init(name.getMethodName() + "-hcd",conf,TableDescriptorBuilder.newBuilder(TableName.valueOf(table)).setValue(CONFIG_KEY,Long.toString(anyValue)),ColumnFamilyDescriptorBuilder.newBuilder(family).setValue(CONFIG_KEY,Long.toString(anyValue)).build());
  assertTrue(store.throttleCompaction(anyValue + 1));
  assertFalse(store.throttleCompaction(anyValue));
}
