/** 
 * This is a cryptic test. It is checking that we don't include a fake cell, one that has a timestamp of  {@link HConstants#OLDEST_TIMESTAMP}. See HBASE-16074 for background.
 * @throws IOException
 */
@Test public void testNeverIncludeFakeCell() throws IOException {
  long now=EnvironmentEdgeManager.currentTime();
  UserScanQueryMatcher qm=UserScanQueryMatcher.create(scan,new ScanInfo(this.conf,fam2,10,1,ttl,KeepDeletedCells.FALSE,HConstants.DEFAULT_BLOCKSIZE,0,rowComparator,false),get.getFamilyMap().get(fam2),now - ttl,now,null);
  Cell kv=new KeyValue(row1,fam2,col2,1,data);
  Cell cell=PrivateCellUtil.createLastOnRowCol(kv);
  qm.setToNewRow(kv);
  MatchCode code=qm.match(cell);
  assertFalse(code.compareTo(MatchCode.SEEK_NEXT_COL) != 0);
}
