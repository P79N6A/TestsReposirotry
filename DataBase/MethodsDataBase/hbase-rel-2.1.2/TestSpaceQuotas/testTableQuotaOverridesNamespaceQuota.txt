@Test public void testTableQuotaOverridesNamespaceQuota() throws Exception {
  final SpaceViolationPolicy policy=SpaceViolationPolicy.NO_INSERTS;
  final TableName tn=helper.createTableWithRegions(10);
  final long tableLimit=2L * SpaceQuotaHelperForTests.ONE_MEGABYTE;
  final long namespaceLimit=1024L * SpaceQuotaHelperForTests.ONE_MEGABYTE;
  TEST_UTIL.getAdmin().setQuota(QuotaSettingsFactory.limitTableSpace(tn,tableLimit,policy));
  TEST_UTIL.getAdmin().setQuota(QuotaSettingsFactory.limitNamespaceSpace(tn.getNamespaceAsString(),namespaceLimit,policy));
  helper.writeData(tn,3L * SpaceQuotaHelperForTests.ONE_MEGABYTE);
  Thread.sleep(5000);
  Put p=new Put(Bytes.toBytes("to_reject"));
  p.addColumn(Bytes.toBytes(SpaceQuotaHelperForTests.F1),Bytes.toBytes("to"),Bytes.toBytes("reject"));
  verifyViolation(policy,tn,p);
}
