@Test @Ignore("Enable when we have support for alter_table- HBASE-10361") public void testIncompleteMetaTableReplicaInformation() throws Exception {
  final TableName tableName=TableName.valueOf(name.getMethodName());
  final int numRegions=3;
  final int numReplica=2;
  try {
    HTableDescriptor desc=new HTableDescriptor(tableName);
    desc.setRegionReplication(numReplica);
    desc.addFamily(new HColumnDescriptor("family"));
    ADMIN.createTable(desc,Bytes.toBytes("A"),Bytes.toBytes("Z"),numRegions);
    TEST_UTIL.waitTableEnabled(tableName);
    Set<byte[]> tableRows=new HashSet<>();
    List<RegionInfo> hris=MetaTableAccessor.getTableRegions(ADMIN.getConnection(),tableName);
    for (    RegionInfo hri : hris) {
      tableRows.add(hri.getRegionName());
    }
    ADMIN.disableTable(tableName);
    Table metaTable=ADMIN.getConnection().getTable(TableName.META_TABLE_NAME);
    for (    byte[] row : tableRows) {
      Delete deleteOneReplicaLocation=new Delete(row);
      deleteOneReplicaLocation.addColumns(HConstants.CATALOG_FAMILY,MetaTableAccessor.getServerColumn(1));
      deleteOneReplicaLocation.addColumns(HConstants.CATALOG_FAMILY,MetaTableAccessor.getSeqNumColumn(1));
      deleteOneReplicaLocation.addColumns(HConstants.CATALOG_FAMILY,MetaTableAccessor.getStartCodeColumn(1));
      metaTable.delete(deleteOneReplicaLocation);
    }
    metaTable.close();
    ADMIN.enableTable(tableName);
    assert (ADMIN.isTableEnabled(tableName));
    List<RegionInfo> regions=TEST_UTIL.getMiniHBaseCluster().getMaster().getAssignmentManager().getRegionStates().getRegionsOfTable(tableName);
    assert (regions.size() == numRegions * numReplica);
  }
  finally {
    ADMIN.disableTable(tableName);
    ADMIN.deleteTable(tableName);
  }
}
