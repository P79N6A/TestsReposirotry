@Test public void test() throws Exception {
  TableDescriptor tableDescriptor=client.getDescriptor();
  ProcedureExecutor<MasterProcedureEnv> executor=UTIL.getMiniHBaseCluster().getMaster().getMasterProcedureExecutor();
  MasterProcedureEnv env=executor.getEnvironment();
  List<RegionInfo> regionInfos=admin.getRegions(TABLE_NAME);
  MergeTableRegionsProcedure mergeTableRegionsProcedure=new MergeTableRegionsProcedure(UTIL.getMiniHBaseCluster().getMaster().getMasterProcedureExecutor().getEnvironment(),regionInfos.get(0),regionInfos.get(1));
  ModifyTableProcedure modifyTableProcedure=new ModifyTableProcedure(env,tableDescriptor);
  long procModify=executor.submitProcedure(modifyTableProcedure);
  UTIL.waitFor(30000,() -> executor.getProcedures().stream().filter(p -> p instanceof ModifyTableProcedure).map(p -> (ModifyTableProcedure)p).anyMatch(p -> TABLE_NAME.equals(p.getTableName())));
  long proc=executor.submitProcedure(mergeTableRegionsProcedure);
  UTIL.waitFor(3000000,() -> UTIL.getMiniHBaseCluster().getMaster().getMasterProcedureExecutor().isFinished(procModify));
  Assert.assertEquals("Modify Table procedure should success!",ProcedureProtos.ProcedureState.SUCCESS,modifyTableProcedure.getState());
}
