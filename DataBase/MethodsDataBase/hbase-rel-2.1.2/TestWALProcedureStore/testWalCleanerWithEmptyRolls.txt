@Test public void testWalCleanerWithEmptyRolls() throws Exception {
  final Procedure<?>[] procs=new Procedure[3];
  for (int i=0; i < procs.length; ++i) {
    procs[i]=new TestSequentialProcedure();
    procStore.insert(procs[i],null);
  }
  assertEquals(1,procStore.getActiveLogs().size());
  procStore.rollWriterForTesting();
  assertEquals(2,procStore.getActiveLogs().size());
  procStore.rollWriterForTesting();
  assertEquals(3,procStore.getActiveLogs().size());
  for (int i=0; i < procs.length; ++i) {
    procStore.update(procs[i]);
    procStore.rollWriterForTesting();
    procStore.rollWriterForTesting();
    if (i < (procs.length - 1)) {
      assertEquals(3 + ((i + 1) * 2),procStore.getActiveLogs().size());
    }
  }
  assertEquals(7,procStore.getActiveLogs().size());
  for (int i=0; i < procs.length; ++i) {
    procStore.delete(procs[i].getProcId());
    assertEquals(7 - ((i + 1) * 2),procStore.getActiveLogs().size());
  }
  assertEquals(1,procStore.getActiveLogs().size());
}
