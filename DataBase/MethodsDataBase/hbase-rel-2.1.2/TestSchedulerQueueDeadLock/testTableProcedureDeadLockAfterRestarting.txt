@Test public void testTableProcedureDeadLockAfterRestarting() throws Exception {
  long procId1=procExec.submitProcedure(new TableSharedProcedureWithId());
  long procId2=procExec.submitProcedure(new TableExclusiveProcedureWithId());
  procExec.startWorkers();
  UTIL.waitFor(10000,() -> ((TableSharedProcedure)procExec.getProcedure(procId1)).latch.hasQueuedThreads());
  ProcedureTestingUtility.restart(procExec);
  ((TableSharedProcedure)procExec.getProcedure(procId1)).latch.release();
  ((TableExclusiveProcedure)procExec.getProcedure(procId2)).latch.release();
  UTIL.waitFor(10000,() -> procExec.isFinished(procId1));
  UTIL.waitFor(10000,() -> procExec.isFinished(procId2));
}
