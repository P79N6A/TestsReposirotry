@Test public void testTableProcedureSubProcedureDeadLock() throws Exception {
  long procId1=procExec.submitProcedure(new TableShardParentProcedure());
  long procId2=procExec.submitProcedure(new TableExclusiveProcedure());
  procExec.startWorkers();
  UTIL.waitFor(10000,() -> procExec.getProcedures().stream().anyMatch(p -> p instanceof TableSharedProcedure));
  procExec.getProcedures().stream().filter(p -> p instanceof TableSharedProcedure).map(p -> (TableSharedProcedure)p).forEach(p -> p.latch.release());
  ((TableExclusiveProcedure)procExec.getProcedure(procId2)).latch.release();
  UTIL.waitFor(10000,() -> procExec.isFinished(procId1));
  UTIL.waitFor(10000,() -> procExec.isFinished(procId2));
}
