@Test public void testSimpleScannerXML() throws IOException, JAXBException {
  final int BATCH_SIZE=5;
  ScannerModel model=new ScannerModel();
  model.setBatch(BATCH_SIZE);
  model.addColumn(Bytes.toBytes(COLUMN_1));
  StringWriter writer=new StringWriter();
  marshaller.marshal(model,writer);
  byte[] body=Bytes.toBytes(writer.toString());
  conf.set("hbase.rest.readonly","true");
  Response response=client.put("/" + TABLE + "/scanner",Constants.MIMETYPE_XML,body);
  assertEquals(403,response.getCode());
  String scannerURI=response.getLocation();
  assertNull(scannerURI);
  conf.set("hbase.rest.readonly","false");
  response=client.put("/" + TABLE + "/scanner",Constants.MIMETYPE_XML,body);
  assertEquals(201,response.getCode());
  scannerURI=response.getLocation();
  assertNotNull(scannerURI);
  response=client.get(scannerURI,Constants.MIMETYPE_XML);
  assertEquals(200,response.getCode());
  assertEquals(Constants.MIMETYPE_XML,response.getHeader("content-type"));
  CellSetModel cellSet=(CellSetModel)unmarshaller.unmarshal(new ByteArrayInputStream(response.getBody()));
  assertEquals(BATCH_SIZE,countCellSet(cellSet));
  conf.set("hbase.rest.readonly","true");
  response=client.delete(scannerURI);
  assertEquals(403,response.getCode());
  conf.set("hbase.rest.readonly","false");
  response=client.delete(scannerURI);
  assertEquals(200,response.getCode());
}
