@Test public void testMasterInitializedEvent() throws Exception {
  final TableName tableName=TableName.valueOf(name.getMethodName());
  HMaster master=UTIL.getMiniHBaseCluster().getMaster();
  ProcedureExecutor<MasterProcedureEnv> procExec=master.getMasterProcedureExecutor();
  RegionInfo hri=RegionInfoBuilder.newBuilder(tableName).build();
  TableDescriptor htd=TableDescriptorBuilder.newBuilder(tableName).setColumnFamily(ColumnFamilyDescriptorBuilder.of("f")).build();
  while (!master.isInitialized()) {
    Thread.sleep(250);
  }
  master.setInitialized(false);
  testProcedureEventWaitWake(master,master.getInitializedEvent(),new CreateTableProcedure(procExec.getEnvironment(),htd,new RegionInfo[]{hri}));
}
