/** 
 * Test optimize in StoreScanner. Test that we skip to the next 'block' when we it makes sense reading the block 'index'.
 * @throws IOException
 */
@Test public void testOptimize() throws IOException {
  Scan scan=new Scan();
  scan.addColumn(CF,ONE);
  try (CellGridStoreScanner scanner=new CellGridStoreScanner(scan,this.scanInfo)){
    List<Cell> results=new ArrayList<>();
    while (scanner.next(results)) {
      continue;
    }
    assertEquals(4,results.size());
    for (    Cell cell : results) {
      assertTrue(Bytes.equals(ONE,0,ONE.length,cell.getQualifierArray(),cell.getQualifierOffset(),cell.getQualifierLength()));
    }
    assertTrue("Optimize should do some optimizations",scanner.optimization.get() > 0);
  }
 }
