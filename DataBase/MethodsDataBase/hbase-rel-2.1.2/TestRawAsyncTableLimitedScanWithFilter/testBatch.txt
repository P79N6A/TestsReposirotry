@Test public void testBatch() throws InterruptedException, ExecutionException {
  int limit=5;
  Scan scan=new Scan().setFilter(new ColumnCountOnRowFilter(2)).setBatch(2).setMaxResultSize(1).setLimit(limit);
  List<Result> results=TABLE.scanAll(scan).get();
  assertEquals(limit,results.size());
  IntStream.range(0,limit).forEach(i -> {
    Result result=results.get(i);
    assertEquals(i,Bytes.toInt(result.getRow()));
    assertEquals(2,result.size());
    assertTrue(result.mayHaveMoreCellsInRow());
    assertEquals(i,Bytes.toInt(result.getValue(FAMILY,CQS[0])));
    assertEquals(2 * i,Bytes.toInt(result.getValue(FAMILY,CQS[1])));
  }
);
}
