@Test public void testBatchAndFilterDiffer() throws InterruptedException, ExecutionException {
  int limit=5;
  Scan scan=new Scan().setFilter(new ColumnCountOnRowFilter(3)).setBatch(2).setMaxResultSize(1).setLimit(limit);
  List<Result> results=TABLE.scanAll(scan).get();
  assertEquals(2 * limit,results.size());
  IntStream.range(0,limit).forEach(i -> {
    Result result=results.get(2 * i);
    assertEquals(i,Bytes.toInt(result.getRow()));
    assertEquals(2,result.size());
    assertTrue(result.mayHaveMoreCellsInRow());
    assertEquals(i,Bytes.toInt(result.getValue(FAMILY,CQS[0])));
    assertEquals(2 * i,Bytes.toInt(result.getValue(FAMILY,CQS[1])));
    result=results.get(2 * i + 1);
    assertEquals(i,Bytes.toInt(result.getRow()));
    assertEquals(1,result.size());
    assertFalse(result.mayHaveMoreCellsInRow());
    assertEquals(3 * i,Bytes.toInt(result.getValue(FAMILY,CQS[2])));
  }
);
}
