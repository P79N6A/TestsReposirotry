/** 
 * Verify schema change for read only table
 */
@Test public void testReadOnlyTableModify() throws IOException, InterruptedException {
  final TableName tableName=TableName.valueOf(name.getMethodName());
  TEST_UTIL.createTable(tableName,HConstants.CATALOG_FAMILY).close();
  TableDescriptor htd=TableDescriptorBuilder.newBuilder(this.admin.getDescriptor(tableName)).setReadOnly(true).build();
  admin.modifyTable(htd);
  htd=TableDescriptorBuilder.newBuilder(this.admin.getDescriptor(tableName)).setCompactionEnabled(false).build();
  admin.modifyTable(htd);
  this.admin.disableTable(tableName);
  this.admin.deleteTable(tableName);
  assertFalse(this.admin.tableExists(tableName));
}
