@Test public void testCheckAndPutHooks() throws IOException {
  final TableName tableName=TableName.valueOf(TEST_TABLE.getNameAsString() + "." + name.getMethodName());
  try (Table table=util.createTable(tableName,new byte[][]{A,B,C})){
    Put p=new Put(Bytes.toBytes(0));
    p.addColumn(A,A,A);
    table.put(p);
    p=new Put(Bytes.toBytes(0));
    p.addColumn(A,A,A);
    verifyMethodResult(SimpleRegionObserver.class,new String[]{"hadPreCheckAndPut","hadPreCheckAndPutAfterRowLock","hadPostCheckAndPut"},tableName,new Boolean[]{false,false,false});
    table.checkAndMutate(Bytes.toBytes(0),A).qualifier(A).ifEquals(A).thenPut(p);
    verifyMethodResult(SimpleRegionObserver.class,new String[]{"hadPreCheckAndPut","hadPreCheckAndPutAfterRowLock","hadPostCheckAndPut"},tableName,new Boolean[]{true,true,true});
  }
  finally {
    util.deleteTable(tableName);
  }
}
