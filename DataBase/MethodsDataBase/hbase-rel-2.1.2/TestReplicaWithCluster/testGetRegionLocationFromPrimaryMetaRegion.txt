@Test public void testGetRegionLocationFromPrimaryMetaRegion() throws IOException, InterruptedException {
  HTU.getAdmin().setBalancerRunning(false,true);
  ((ConnectionImplementation)HTU.getAdmin().getConnection()).setUseMetaReplicas(true);
  HTableDescriptor hdt=HTU.createTableDescriptor("testGetRegionLocationFromPrimaryMetaRegion");
  hdt.setRegionReplication(2);
  try {
    HTU.createTable(hdt,new byte[][]{f},null);
    RegionServerHostingPrimayMetaRegionSlowOrStopCopro.slowDownPrimaryMetaScan=true;
    RegionLocations url=((ClusterConnection)HTU.getConnection()).locateRegion(hdt.getTableName(),row,false,false);
  }
  finally {
    RegionServerHostingPrimayMetaRegionSlowOrStopCopro.slowDownPrimaryMetaScan=false;
    ((ConnectionImplementation)HTU.getAdmin().getConnection()).setUseMetaReplicas(false);
    HTU.getAdmin().setBalancerRunning(true,true);
    HTU.getAdmin().disableTable(hdt.getTableName());
    HTU.deleteTable(hdt.getTableName());
  }
}
