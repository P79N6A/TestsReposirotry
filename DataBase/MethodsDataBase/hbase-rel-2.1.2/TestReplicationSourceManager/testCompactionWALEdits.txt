/** 
 * Test for HBASE-9038, Replication.scopeWALEdits would NPE if it wasn't filtering out the compaction WALEdit.
 */
@Test public void testCompactionWALEdits() throws Exception {
  TableName tableName=TableName.valueOf("testCompactionWALEdits");
  WALProtos.CompactionDescriptor compactionDescriptor=WALProtos.CompactionDescriptor.getDefaultInstance();
  RegionInfo hri=RegionInfoBuilder.newBuilder(tableName).setStartKey(HConstants.EMPTY_START_ROW).setEndKey(HConstants.EMPTY_END_ROW).build();
  WALEdit edit=WALEdit.createCompaction(hri,compactionDescriptor);
  ReplicationSourceWALActionListener.scopeWALEdits(new WALKeyImpl(),edit,conf);
}
