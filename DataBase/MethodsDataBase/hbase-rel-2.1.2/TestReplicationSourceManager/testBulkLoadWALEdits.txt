@Test public void testBulkLoadWALEdits() throws Exception {
  NavigableMap<byte[],Integer> scope=new TreeMap<>(Bytes.BYTES_COMPARATOR);
  WALEdit logEdit=getBulkLoadWALEdit(scope);
  WALKeyImpl logKey=new WALKeyImpl(scope);
  Configuration bulkLoadConf=HBaseConfiguration.create(conf);
  bulkLoadConf.setBoolean(HConstants.REPLICATION_BULKLOAD_ENABLE_KEY,true);
  ReplicationSourceWALActionListener.scopeWALEdits(logKey,logEdit,bulkLoadConf);
  NavigableMap<byte[],Integer> scopes=logKey.getReplicationScopes();
  assertTrue("This family scope is set to global, should be part of replication key scopes.",scopes.containsKey(f1));
  assertFalse("This family scope is set to local, should not be part of replication key scopes",scopes.containsKey(f2));
}
