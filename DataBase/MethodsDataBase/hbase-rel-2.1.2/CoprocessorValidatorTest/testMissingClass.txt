@Test public void testMissingClass() throws IOException {
  MissingClassClassLoader missingClassClassLoader=new MissingClassClassLoader();
  List<CoprocessorViolation> violations=validateClass(missingClassClassLoader,"MissingClassObserver");
  assertEquals(1,violations.size());
  CoprocessorViolation violation=violations.get(0);
  assertEquals(getFullClassName("MissingClassObserver"),violation.getClassName());
  assertEquals(Severity.ERROR,violation.getSeverity());
  String stackTrace=Throwables.getStackTraceAsString(violation.getThrowable());
  assertTrue(stackTrace.contains("java.lang.ClassNotFoundException: " + "org.apache.hadoop.hbase.tool.coprocessor.CoprocessorValidatorTest$MissingClass"));
}
