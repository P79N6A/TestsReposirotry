@Test public void testRegionReplicasByEnableTableWhenReplicaCountIsDecreasedWithMultipleRegions() throws Exception {
  TableName tableName=null;
  try {
    tableName=TableName.valueOf(name.getMethodName());
    enableReplicationByModification(tableName,true,3,2,20);
    List<HRegion> onlineRegions=getRS().getRegions(tableName);
    List<HRegion> onlineRegions2=getSecondaryRS().getRegions(tableName);
    List<HRegion> onlineRegions3=getTertiaryRS().getRegions(tableName);
    int totalRegions=onlineRegions.size() + onlineRegions2.size() + onlineRegions3.size();
    assertEquals("the number of regions should be reduced to 40",40,totalRegions);
  }
  finally {
    disableAndDeleteTable(tableName);
  }
}
