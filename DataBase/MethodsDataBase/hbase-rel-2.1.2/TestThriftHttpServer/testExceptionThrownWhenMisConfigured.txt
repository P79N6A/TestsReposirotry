@Test public void testExceptionThrownWhenMisConfigured() throws Exception {
  Configuration conf=new Configuration(TEST_UTIL.getConfiguration());
  conf.set("hbase.thrift.security.qop","privacy");
  conf.setBoolean("hbase.thrift.ssl.enabled",false);
  ThriftServerRunner runner=null;
  ExpectedException thrown=ExpectedException.none();
  try {
    thrown.expect(IllegalArgumentException.class);
    thrown.expectMessage("Thrift HTTP Server's QoP is privacy, " + "but hbase.thrift.ssl.enabled is false");
    runner=new ThriftServerRunner(conf);
    fail("Thrift HTTP Server starts up even with wrong security configurations.");
  }
 catch (  Exception e) {
  }
  assertNull(runner);
}
