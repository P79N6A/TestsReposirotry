@Test public void testProcedureDeletedShouldClean() throws Exception {
  createProcExecutor();
  WaitProcedure waitProcedure=new WaitProcedure();
  long waitProce=procExecutor.submitProcedure(waitProcedure);
  LOG.info("Begin to execute " + waitProce);
  Thread.sleep(500);
  LOG.info("begin to restart1 ");
  ProcedureTestingUtility.restart(procExecutor,true);
  LOG.info("finish to restart1 ");
  htu.waitFor(10000,() -> procExecutor.getProcedure(waitProce) != null);
  waitProcedure=(WaitProcedure)procExecutor.getProcedure(waitProce);
  waitProcedure.latch.countDown();
  Thread.sleep(500);
  assertTrue(procStore.getActiveLogs().size() == 1);
  LOG.info("begin to restart2");
  ProcedureTestingUtility.restart(procExecutor,true,false);
  LOG.info("finish to restart2");
  assertTrue(procStore.getActiveLogs().size() == 2);
  procExecutor.startWorkers();
}
