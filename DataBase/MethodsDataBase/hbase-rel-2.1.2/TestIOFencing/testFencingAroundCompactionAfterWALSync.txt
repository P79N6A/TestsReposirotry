/** 
 * Test that puts up a regionserver, starts a compaction on a loaded region but holds the compaction completion until after we have killed the server and the region has come up on a new regionserver altogether.  This fakes the double assignment case where region in one location changes the files out from underneath a region being served elsewhere.
 */
@Test public void testFencingAroundCompactionAfterWALSync() throws Exception {
  for (  MemoryCompactionPolicy policy : MemoryCompactionPolicy.values()) {
    doTest(BlockCompactionsInCompletionRegion.class,policy);
  }
}
