@Test public void testGetRegionByStateOfTable() throws Exception {
  RegionInfo hri=createTableAndGetOneRegion(tableName);
  RegionStates regionStates=TEST_UTIL.getHBaseCluster().getMaster().getAssignmentManager().getRegionStates();
  assertTrue(regionStates.getRegionByStateOfTable(tableName).get(RegionState.State.OPEN).stream().anyMatch(r -> RegionInfo.COMPARATOR.compare(r,hri) == 0));
  assertFalse(regionStates.getRegionByStateOfTable(TableName.valueOf("I_am_the_phantom")).get(RegionState.State.OPEN).stream().anyMatch(r -> RegionInfo.COMPARATOR.compare(r,hri) == 0));
}
