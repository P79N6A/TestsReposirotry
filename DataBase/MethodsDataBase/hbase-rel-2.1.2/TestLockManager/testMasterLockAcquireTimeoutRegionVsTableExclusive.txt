/** 
 * Take region lock, they try table exclusive lock, later one should time out.
 */
@Test public void testMasterLockAcquireTimeoutRegionVsTableExclusive() throws Exception {
  LockManager.MasterLock lock=masterServices.getLockManager().createMasterLock(tableRegions,"desc");
  LockManager.MasterLock lock2=masterServices.getLockManager().createMasterLock(tableName,LockType.EXCLUSIVE,"desc");
  assertTrue(lock.tryAcquire(2000));
  assertFalse(lock2.tryAcquire(LOCAL_LOCKS_TIMEOUT / 2));
  assertEquals(null,lock2.getProc());
  lock.release();
  assertTrue(lock2.tryAcquire(2000));
  assertTrue(lock2.getProc().isLocked());
  lock2.release();
}
