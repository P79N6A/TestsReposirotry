@Test public void testAllClusterOnlineConfigChange() throws IOException {
  replaceHBaseSiteXML();
  admin.updateConfiguration().join();
  TEST_UTIL.getMiniHBaseCluster().getMasterThreads().forEach(thread -> {
    Configuration conf=thread.getMaster().getConfiguration();
    assertEquals(1000,conf.getInt("hbase.custom.config",0));
  }
);
  TEST_UTIL.getMiniHBaseCluster().getRegionServerThreads().forEach(thread -> {
    Configuration conf=thread.getRegionServer().getConfiguration();
    assertEquals(1000,conf.getInt("hbase.custom.config",0));
  }
);
  restoreHBaseSiteXML();
}
