@Test public void testAsyncFlushRegionServer() throws Exception {
  AsyncAdmin admin=asyncConn.getAdmin();
  for (  HRegionServer rs : TEST_UTIL.getHBaseCluster().getLiveRegionServerThreads().stream().map(JVMClusterUtil.RegionServerThread::getRegionServer).collect(Collectors.toList())) {
    admin.flushRegionServer(rs.getServerName()).get();
    assertFalse(getRegionInfo(rs).stream().anyMatch(r -> r.getMemStoreDataSize() != 0));
  }
}
