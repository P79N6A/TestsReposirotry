@Test public void testRegionServerHostnameReportedToMaster() throws Exception {
  TEST_UTIL.getConfiguration().setBoolean(HRegionServer.RS_HOSTNAME_DISABLE_MASTER_REVERSEDNS_KEY,true);
  TEST_UTIL.startMiniCluster(NUM_MASTERS,NUM_RS);
  boolean tablesOnMaster=LoadBalancer.isTablesOnMaster(TEST_UTIL.getConfiguration());
  int expectedRS=NUM_RS + (tablesOnMaster ? 1 : 0);
  try (ZKWatcher zkw=TEST_UTIL.getZooKeeperWatcher()){
    List<String> servers=ZKUtil.listChildrenNoWatch(zkw,zkw.getZNodePaths().rsZNode);
    assertEquals(expectedRS,servers.size());
  }
 }
