/** 
 * Test that loading the same region set doesn't cause timeout loop during meta load.
 */
@Test public void testRepeatedLoad() throws Exception {
  MiniHBaseCluster cluster=TEST_UTIL.getHBaseCluster();
  HRegionServer regionServer=cluster.getRegionServer(0);
  String rsName=regionServer.getServerName().getHostname();
  int port=regionServer.getServerName().getPort();
  String rs=rsName + ":" + Integer.toString(port);
  RegionMoverBuilder rmBuilder=new RegionMoverBuilder(rs,TEST_UTIL.getConfiguration()).ack(true);
  RegionMover rm=rmBuilder.build();
  rm.unload();
  assertEquals(0,regionServer.getNumberOfOnlineRegions());
  rmBuilder=new RegionMoverBuilder(rs,TEST_UTIL.getConfiguration()).ack(true);
  rm=rmBuilder.build();
  rm.load();
  rm.load();
}
