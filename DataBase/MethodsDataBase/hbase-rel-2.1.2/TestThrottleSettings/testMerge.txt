@Test public void testMerge() throws IOException {
  TimedQuota tq1=TimedQuota.newBuilder().setSoftLimit(10).setScope(QuotaProtos.QuotaScope.MACHINE).setTimeUnit(HBaseProtos.TimeUnit.MINUTES).build();
  ThrottleRequest tr1=ThrottleRequest.newBuilder().setTimedQuota(tq1).setType(QuotaProtos.ThrottleType.REQUEST_NUMBER).build();
  ThrottleSettings orig=new ThrottleSettings("joe",null,null,tr1);
  TimedQuota tq2=TimedQuota.newBuilder().setSoftLimit(10).setScope(QuotaProtos.QuotaScope.MACHINE).setTimeUnit(HBaseProtos.TimeUnit.SECONDS).build();
  ThrottleRequest tr2=ThrottleRequest.newBuilder().setTimedQuota(tq2).setType(QuotaProtos.ThrottleType.REQUEST_NUMBER).build();
  ThrottleSettings merged=orig.merge(new ThrottleSettings("joe",null,null,tr2));
  assertEquals(10,merged.getSoftLimit());
  assertEquals(ThrottleType.REQUEST_NUMBER,merged.getThrottleType());
  assertEquals(TimeUnit.SECONDS,merged.getTimeUnit());
}
