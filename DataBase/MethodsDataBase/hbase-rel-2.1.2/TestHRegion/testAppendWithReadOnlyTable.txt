@Test public void testAppendWithReadOnlyTable() throws Exception {
  final TableName tableName=TableName.valueOf(name.getMethodName());
  this.region=initHRegion(tableName,method,CONF,true,Bytes.toBytes("somefamily"));
  boolean exceptionCaught=false;
  Append append=new Append(Bytes.toBytes("somerow"));
  append.setDurability(Durability.SKIP_WAL);
  append.addColumn(Bytes.toBytes("somefamily"),Bytes.toBytes("somequalifier"),Bytes.toBytes("somevalue"));
  try {
    region.append(append);
  }
 catch (  IOException e) {
    exceptionCaught=true;
  }
 finally {
    HBaseTestingUtility.closeRegionAndWAL(this.region);
    this.region=null;
  }
  assertTrue(exceptionCaught == true);
}
