/** 
 * test main method. Import should print help and call System.exit
 */
@Test public void testImportMain() throws Exception {
  PrintStream oldPrintStream=System.err;
  SecurityManager SECURITY_MANAGER=System.getSecurityManager();
  LauncherSecurityManager newSecurityManager=new LauncherSecurityManager();
  System.setSecurityManager(newSecurityManager);
  ByteArrayOutputStream data=new ByteArrayOutputStream();
  String[] args={};
  System.setErr(new PrintStream(data));
  try {
    System.setErr(new PrintStream(data));
    try {
      RowCounter.main(args);
      fail("should be SecurityException");
    }
 catch (    SecurityException e) {
      assertEquals(-1,newSecurityManager.getExitCode());
      assertTrue(data.toString().contains("Wrong number of parameters:"));
      assertUsageContent(data.toString());
    }
    data.reset();
    try {
      args=new String[2];
      args[0]="table";
      args[1]="--range=1";
      RowCounter.main(args);
      fail("should be SecurityException");
    }
 catch (    SecurityException e) {
      assertEquals(-1,newSecurityManager.getExitCode());
      assertTrue(data.toString().contains("Please specify range in such format as \"--range=a,b\" or, with only one boundary," + " \"--range=,b\" or \"--range=a,\""));
      assertUsageContent(data.toString());
    }
  }
  finally {
    System.setErr(oldPrintStream);
    System.setSecurityManager(SECURITY_MANAGER);
  }
}
