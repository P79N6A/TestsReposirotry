@Test public void testMetaLocationsForRegionReplicas() throws IOException {
  ServerName serverName0=ServerName.valueOf("foo",60010,random.nextLong());
  ServerName serverName1=ServerName.valueOf("bar",60010,random.nextLong());
  ServerName serverName100=ServerName.valueOf("baz",60010,random.nextLong());
  long regionId=System.currentTimeMillis();
  RegionInfo primary=RegionInfoBuilder.newBuilder(TableName.valueOf(name.getMethodName())).setStartKey(HConstants.EMPTY_START_ROW).setEndKey(HConstants.EMPTY_END_ROW).setSplit(false).setRegionId(regionId).setReplicaId(0).build();
  RegionInfo replica1=RegionInfoBuilder.newBuilder(TableName.valueOf(name.getMethodName())).setStartKey(HConstants.EMPTY_START_ROW).setEndKey(HConstants.EMPTY_END_ROW).setSplit(false).setRegionId(regionId).setReplicaId(1).build();
  RegionInfo replica100=RegionInfoBuilder.newBuilder(TableName.valueOf(name.getMethodName())).setStartKey(HConstants.EMPTY_START_ROW).setEndKey(HConstants.EMPTY_END_ROW).setSplit(false).setRegionId(regionId).setReplicaId(100).build();
  long seqNum0=random.nextLong();
  long seqNum1=random.nextLong();
  long seqNum100=random.nextLong();
  try (Table meta=MetaTableAccessor.getMetaHTable(connection)){
    MetaTableAccessor.updateRegionLocation(connection,primary,serverName0,seqNum0,EnvironmentEdgeManager.currentTime());
    assertMetaLocation(meta,primary.getRegionName(),serverName0,seqNum0,0,true);
    MetaTableAccessor.updateRegionLocation(connection,replica1,serverName1,seqNum1,EnvironmentEdgeManager.currentTime());
    assertMetaLocation(meta,primary.getRegionName(),serverName0,seqNum0,0,true);
    assertMetaLocation(meta,primary.getRegionName(),serverName1,seqNum1,1,true);
    MetaTableAccessor.updateRegionLocation(connection,replica100,serverName100,seqNum100,EnvironmentEdgeManager.currentTime());
    assertMetaLocation(meta,primary.getRegionName(),serverName0,seqNum0,0,true);
    assertMetaLocation(meta,primary.getRegionName(),serverName1,seqNum1,1,true);
    assertMetaLocation(meta,primary.getRegionName(),serverName100,seqNum100,100,true);
  }
 }
