@Test public void testConvert(){
  final TableName tableName=TableName.valueOf("ns1:" + name.getMethodName());
  byte[] startKey=Bytes.toBytes("startKey");
  byte[] endKey=Bytes.toBytes("endKey");
  boolean split=false;
  long regionId=System.currentTimeMillis();
  int replicaId=42;
  RegionInfo ri=RegionInfoBuilder.newBuilder(tableName).setStartKey(startKey).setEndKey(endKey).setSplit(split).setRegionId(regionId).setReplicaId(replicaId).build();
  RegionInfo convertedRi=ProtobufUtil.toRegionInfo(ProtobufUtil.toRegionInfo(ri));
  assertEquals(ri,convertedRi);
  HBaseProtos.RegionInfo info=HBaseProtos.RegionInfo.newBuilder().setTableName(HBaseProtos.TableName.newBuilder().setQualifier(UnsafeByteOperations.unsafeWrap(tableName.getQualifier())).setNamespace(UnsafeByteOperations.unsafeWrap(tableName.getNamespace())).build()).setStartKey(UnsafeByteOperations.unsafeWrap(startKey)).setEndKey(UnsafeByteOperations.unsafeWrap(endKey)).setSplit(split).setRegionId(regionId).build();
  convertedRi=ProtobufUtil.toRegionInfo(info);
  RegionInfo expectedRi=RegionInfoBuilder.newBuilder(tableName).setStartKey(startKey).setEndKey(endKey).setSplit(split).setRegionId(regionId).setReplicaId(0).build();
  assertEquals(expectedRi,convertedRi);
}
