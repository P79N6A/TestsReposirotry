@Test public void testReadAndWriteRegionInfoFile() throws IOException, InterruptedException {
  HBaseTestingUtility htu=new HBaseTestingUtility();
  RegionInfo ri=RegionInfoBuilder.FIRST_META_REGIONINFO;
  Path basedir=htu.getDataTestDir();
  FSTableDescriptors fsTableDescriptors=new FSTableDescriptors(htu.getConfiguration());
  HRegion r=HBaseTestingUtility.createRegionAndWAL(convert(ri),basedir,htu.getConfiguration(),fsTableDescriptors.get(TableName.META_TABLE_NAME));
  long modtime=getModTime(r);
  HBaseTestingUtility.closeRegionAndWAL(r);
  Thread.sleep(1001);
  r=HRegion.openHRegion(basedir,convert(ri),fsTableDescriptors.get(TableName.META_TABLE_NAME),null,htu.getConfiguration());
  long modtime2=getModTime(r);
  assertEquals(modtime,modtime2);
  RegionInfo deserializedRi=HRegionFileSystem.loadRegionInfoFileContent(r.getRegionFileSystem().getFileSystem(),r.getRegionFileSystem().getRegionDir());
  HBaseTestingUtility.closeRegionAndWAL(r);
}
