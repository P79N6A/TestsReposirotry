/** 
 * Test the cluster startup bulk assignment which attempts to retain assignment info.
 */
@Test public void testRetainAssignment() throws Exception {
  Map<ServerName,List<RegionInfo>> currentAssignments=mockClusterServers();
  Map<RegionInfo,ServerName> inputForTest=new HashMap<>();
  for (  ServerName sn : currentAssignments.keySet()) {
    for (    RegionInfo region : currentAssignments.get(sn)) {
      inputForTest.put(region,sn);
    }
  }
  inputForTest.put(randomRegions(1).get(0),null);
  Map<ServerName,List<RegionInfo>> newAssignment=loadBalancer.retainAssignment(inputForTest,servers);
  assertRetainedAssignment(inputForTest,servers,newAssignment);
}
