@Test(expected=IllegalArgumentException.class) public void testMissingConfigurationThrowsException() throws Exception {
  Configuration conf=new Configuration();
  conf.setInt(HttpServer.HTTP_MAX_THREADS,TestHttpServer.MAX_THREADS);
  conf.set("hbase.security.authentication","kerberos");
  HttpServer customServer=createTestServerWithSecurity(conf);
  customServer.addServlet("echo","/echo",EchoServlet.class);
  customServer.addJerseyResourcePackage(JerseyResource.class.getPackage().getName(),"/jersey/*");
  customServer.start();
}
