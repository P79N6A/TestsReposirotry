@Test public void testAsyncSnapshotWillNotBlockSnapshotHFileCleaner() throws Exception {
  Table table=UTIL.getConnection().getTable(TABLE_NAME);
  for (int i=0; i < 10; i++) {
    Put put=new Put(Bytes.toBytes(i)).addColumn(TEST_FAM,Bytes.toBytes("q"),Bytes.toBytes(i));
    table.put(put);
  }
  String snapshotName="testAsyncSnapshotWillNotBlockSnapshotHFileCleaner01";
  UTIL.getAdmin().snapshotAsync(new org.apache.hadoop.hbase.client.SnapshotDescription(snapshotName,TABLE_NAME,SnapshotType.FLUSH));
  Waiter.waitFor(UTIL.getConfiguration(),10 * 1000L,200L,() -> UTIL.getAdmin().listSnapshots(Pattern.compile(snapshotName)).size() == 1);
  assertTrue(master.getSnapshotManager().isTakingAnySnapshot());
  Thread.sleep(11 * 1000L);
  assertFalse(master.getSnapshotManager().isTakingAnySnapshot());
}
