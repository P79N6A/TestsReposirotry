@Test public void testMergeWithoutPONR() throws Exception {
  final TableName tableName=TableName.valueOf("testMergeWithoutPONR");
  final ProcedureExecutor<MasterProcedureEnv> procExec=getMasterProcedureExecutor();
  List<RegionInfo> tableRegions=createTable(tableName);
  ProcedureTestingUtility.waitNoProcedureRunning(procExec);
  ProcedureTestingUtility.setKillAndToggleBeforeStoreUpdate(procExec,true);
  RegionInfo[] regionsToMerge=new RegionInfo[2];
  regionsToMerge[0]=tableRegions.get(0);
  regionsToMerge[1]=tableRegions.get(1);
  long procId=procExec.submitProcedure(new MergeTableRegionsProcedure(procExec.getEnvironment(),regionsToMerge,true));
  MasterProcedureTestingUtility.testRecoveryAndDoubleExecution(procExec,procId,9,false);
  ProcedureTestingUtility.setKillAndToggleBeforeStoreUpdate(procExec,false);
  MasterProcedureTestingUtility.restartMasterProcedureExecutor(procExec);
  ProcedureTestingUtility.waitProcedure(procExec,procId);
  assertRegionCount(tableName,initialRegionCount - 1);
}
