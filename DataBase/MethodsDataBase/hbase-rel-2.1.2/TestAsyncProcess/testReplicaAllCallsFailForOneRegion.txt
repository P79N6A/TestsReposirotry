@Test public void testReplicaAllCallsFailForOneRegion() throws Exception {
  MyAsyncProcessWithReplicas ap=createReplicaAp(500,1000,0,0);
  ap.addFailures(hri1,hri1r1,hri1r2,hri2r1);
  List<Get> rows=makeTimelineGets(DUMMY_BYTES_1,DUMMY_BYTES_2);
  AsyncProcessTask task=AsyncProcessTask.newBuilder().setPool(ap.service).setRpcTimeout(RPC_TIMEOUT).setOperationTimeout(OPERATION_TIMEOUT).setTableName(DUMMY_TABLE).setRowAccess(rows).setResults(new Object[2]).setSubmittedRows(SubmittedRows.ALL).build();
  AsyncRequestFuture ars=ap.submit(task);
  verifyReplicaResult(ars,RR.FAILED,RR.FALSE);
  Assert.assertEquals(3,ars.getErrors().getNumExceptions());
  for (int i=0; i < ars.getErrors().getNumExceptions(); ++i) {
    Assert.assertArrayEquals(DUMMY_BYTES_1,ars.getErrors().getRow(i).getRow());
  }
}
