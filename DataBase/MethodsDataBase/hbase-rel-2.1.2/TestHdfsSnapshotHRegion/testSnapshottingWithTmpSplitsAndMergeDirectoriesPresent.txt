@Test public void testSnapshottingWithTmpSplitsAndMergeDirectoriesPresent() throws Exception {
  RegionInfo firstRegion=TEST_UTIL.getConnection().getRegionLocator(table.getName()).getAllRegionLocations().stream().findFirst().get().getRegion();
  String encodedName=firstRegion.getEncodedName();
  Path tableDir=FSUtils.getTableDir(TEST_UTIL.getDefaultRootDirPath(),TABLE_NAME);
  Path regionDirectoryPath=new Path(tableDir,encodedName);
  TEST_UTIL.getTestFileSystem().create(new Path(regionDirectoryPath,HRegionFileSystem.REGION_TEMP_DIR));
  TEST_UTIL.getTestFileSystem().create(new Path(regionDirectoryPath,HRegionFileSystem.REGION_SPLITS_DIR));
  TEST_UTIL.getTestFileSystem().create(new Path(regionDirectoryPath,HRegionFileSystem.REGION_MERGES_DIR));
  String snapshotDir=client.createSnapshot(baseDir,"foo_snapshot");
  HRegion snapshottedRegion=openSnapshotRegion(firstRegion,FSUtils.getTableDir(new Path(snapshotDir),TABLE_NAME));
  Assert.assertNotNull(snapshottedRegion);
  snapshottedRegion.close();
}
