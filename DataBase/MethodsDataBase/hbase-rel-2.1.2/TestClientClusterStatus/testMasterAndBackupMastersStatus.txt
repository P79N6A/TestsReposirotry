@Test public void testMasterAndBackupMastersStatus() throws Exception {
  List<MasterThread> masterThreads=CLUSTER.getMasterThreads();
  int numActive=0;
  int activeIndex=0;
  ServerName activeName=null;
  HMaster active=null;
  for (int i=0; i < masterThreads.size(); i++) {
    if (masterThreads.get(i).getMaster().isActiveMaster()) {
      numActive++;
      activeIndex=i;
      active=masterThreads.get(activeIndex).getMaster();
      activeName=active.getServerName();
    }
  }
  Assert.assertNotNull(active);
  Assert.assertEquals(1,numActive);
  Assert.assertEquals(MASTERS,masterThreads.size());
  EnumSet<Option> options=EnumSet.of(Option.MASTER,Option.BACKUP_MASTERS);
  ClusterStatus status=new ClusterStatus(ADMIN.getClusterMetrics(options));
  Assert.assertTrue(status.getMaster().equals(activeName));
  Assert.assertEquals(MASTERS - 1,status.getBackupMastersSize());
}
