@Test public void testMinimumNumberOfThreads() throws Exception {
  Stoppable stop=new StoppableImplementation();
  Configuration conf=UTIL.getConfiguration();
  Path testDir=UTIL.getDataTestDir();
  FileSystem fs=UTIL.getTestFileSystem();
  String confKey="hbase.test.cleaner.delegates";
  conf.set(confKey,AlwaysDelete.class.getName());
  conf.set(CleanerChore.CHORE_POOL_SIZE,"2");
  AllValidPaths chore=new AllValidPaths("test-file-cleaner",stop,conf,fs,testDir,confKey);
  int numProcs=Runtime.getRuntime().availableProcessors();
  assertEquals(numProcs,chore.calculatePoolSize(Integer.toString(numProcs)));
  assertEquals(numProcs,chore.calculatePoolSize(Integer.toString(numProcs + 2)));
  assertEquals(1,chore.calculatePoolSize("0.0"));
}
