@Test public void testRegionServerObserver() throws IOException {
  try (Connection connection=ConnectionFactory.createConnection(UTIL.getConfiguration());Admin admin=connection.getAdmin()){
    LOG.info("Rolling WALs");
    admin.rollWALWriter(UTIL.getMiniHBaseCluster().getServerHoldingMeta());
  }
   MetricRegistryInfo info=MetricsCoprocessor.createRegistryInfoForRSCoprocessor(CustomRegionServerObserver.class.getName());
  Optional<MetricRegistry> registry=MetricRegistries.global().get(info);
  assertTrue(registry.isPresent());
  Optional<Metric> metric=registry.get().get("rollWALRequests");
  assertTrue(metric.isPresent());
  Counter rollWalRequests=(Counter)metric.get();
  assertEquals(1,rollWalRequests.getCount());
}
