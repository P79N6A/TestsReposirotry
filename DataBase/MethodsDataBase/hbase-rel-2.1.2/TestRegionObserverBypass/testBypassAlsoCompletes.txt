/** 
 * Test that when bypass is called, we skip out calling any other coprocessors stacked up method, in this case, a prePut. If the column family is 'test', then bypass is invoked.
 */
@Test public void testBypassAlsoCompletes() throws IOException {
  EnvironmentEdgeManagerTestHelper.injectEdge(new IncrementingEnvironmentEdge());
  Table t=util.getConnection().getTable(tableName);
  List<Put> puts=new ArrayList<>();
  Put p=new Put(row1);
  p.addColumn(dummy,dummy,dummy);
  puts.add(p);
  p=new Put(row2);
  p.addColumn(test,dummy,dummy);
  puts.add(p);
  p=new Put(row3);
  p.addColumn(test,dummy,dummy);
  puts.add(p);
  t.put(puts);
  checkRowAndDelete(t,row1,1);
  checkRowAndDelete(t,row2,0);
  checkRowAndDelete(t,row3,0);
  assertEquals("Total CP invocation count",5,TestCoprocessor.PREPUT_INVOCATIONS.get());
  assertEquals("Total CP bypasses",2,TestCoprocessor.PREPUT_BYPASSES.get());
}
