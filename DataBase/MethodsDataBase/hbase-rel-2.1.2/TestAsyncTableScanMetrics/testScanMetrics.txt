@Test public void testScanMetrics() throws Exception {
  Pair<List<Result>,ScanMetrics> pair=method.scan(new Scan().setScanMetricsEnabled(true));
  List<Result> results=pair.getFirst();
  assertEquals(3,results.size());
  long bytes=results.stream().flatMap(r -> Arrays.asList(r.rawCells()).stream()).mapToLong(c -> PrivateCellUtil.estimatedSerializedSizeOf(c)).sum();
  ScanMetrics scanMetrics=pair.getSecond();
  assertEquals(NUM_REGIONS,scanMetrics.countOfRegions.get());
  assertEquals(bytes,scanMetrics.countOfBytesInResults.get());
  assertEquals(NUM_REGIONS,scanMetrics.countOfRPCcalls.get());
  assertEquals(3,scanMetrics.countOfRowsScanned.get());
}
