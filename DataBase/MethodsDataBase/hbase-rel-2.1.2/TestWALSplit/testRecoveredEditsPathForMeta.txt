/** 
 * {@see https://issues.apache.org/jira/browse/HBASE-3020}
 */
@Test public void testRecoveredEditsPathForMeta() throws IOException {
  byte[] encoded=RegionInfoBuilder.FIRST_META_REGIONINFO.getEncodedNameAsBytes();
  Path tdir=FSUtils.getTableDir(HBASEDIR,TableName.META_TABLE_NAME);
  Path regiondir=new Path(tdir,RegionInfoBuilder.FIRST_META_REGIONINFO.getEncodedName());
  fs.mkdirs(regiondir);
  long now=System.currentTimeMillis();
  Entry entry=new Entry(new WALKeyImpl(encoded,TableName.META_TABLE_NAME,1,now,HConstants.DEFAULT_CLUSTER_ID),new WALEdit());
  Path p=WALSplitter.getRegionSplitEditsPath(entry,FILENAME_BEING_SPLIT,TMPDIRNAME,conf);
  String parentOfParent=p.getParent().getParent().getName();
  assertEquals(parentOfParent,RegionInfoBuilder.FIRST_META_REGIONINFO.getEncodedName());
}
