@Test public void testRestoreSnapshot() throws Exception {
  Table table=TEST_UTIL.createTable(tableName,Bytes.toBytes("f1"));
  for (int i=0; i < 3000; i++) {
    table.put(new Put(Bytes.toBytes(i)).addColumn(Bytes.toBytes("f1"),Bytes.toBytes("cq"),Bytes.toBytes(i)));
  }
  assertEquals(0,admin.listSnapshots().get().size());
  admin.snapshot(snapshotName1,tableName).get();
  admin.snapshot(snapshotName2,tableName).get();
  assertEquals(2,admin.listSnapshots().get().size());
  admin.disableTable(tableName).get();
  admin.restoreSnapshot(snapshotName1,true).get();
  admin.enableTable(tableName).get();
  assertResult(tableName,3000);
  admin.disableTable(tableName).get();
  admin.restoreSnapshot(snapshotName2,false).get();
  admin.enableTable(tableName).get();
  assertResult(tableName,3000);
}
