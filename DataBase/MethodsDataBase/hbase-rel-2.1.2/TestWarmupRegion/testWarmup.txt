/** 
 * Basic client side validation of HBASE-4536
 */
@Test public void testWarmup() throws Exception {
  int serverid=0;
  HRegion region=TEST_UTIL.getMiniHBaseCluster().getRegions(TABLENAME).get(0);
  RegionInfo info=region.getRegionInfo();
  runwarmup();
  for (int i=0; i < 10; i++) {
    HRegionServer rs=TEST_UTIL.getMiniHBaseCluster().getRegionServer(serverid);
    byte[] destName=Bytes.toBytes(rs.getServerName().toString());
    assertTrue(destName != null);
    LOG.info("i=" + i);
    TEST_UTIL.getMiniHBaseCluster().getMaster().move(info.getEncodedNameAsBytes(),destName);
    serverid=(serverid + 1) % 2;
  }
}
