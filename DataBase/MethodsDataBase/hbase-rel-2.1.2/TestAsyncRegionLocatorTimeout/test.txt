@Test public void test() throws InterruptedException, ExecutionException {
  SLEEP_MS=1000;
  long startNs=System.nanoTime();
  try {
    LOCATOR.getRegionLocation(TABLE_NAME,EMPTY_START_ROW,RegionLocateType.CURRENT,TimeUnit.MILLISECONDS.toNanos(500)).get();
    fail();
  }
 catch (  ExecutionException e) {
    e.printStackTrace();
    assertThat(e.getCause(),instanceOf(TimeoutIOException.class));
  }
  long costMs=TimeUnit.NANOSECONDS.toMillis(System.nanoTime() - startNs);
  assertTrue(costMs >= 500);
  assertTrue(costMs < 1000);
  Thread.sleep(2000);
  HRegionLocation loc=LOCATOR.getRegionLocation(TABLE_NAME,EMPTY_START_ROW,RegionLocateType.CURRENT,TimeUnit.MILLISECONDS.toNanos(500)).get();
  assertEquals(loc.getServerName(),TEST_UTIL.getHBaseCluster().getRegionServer(0).getServerName());
}
