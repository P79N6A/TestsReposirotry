@Test public void testScheduler() throws Exception {
  long regionProc=procExecutor.submitProcedure(new DummyRegionProcedure(UTIL.getMiniHBaseCluster().getMaster().getMasterProcedureExecutor().getEnvironment(),regionInfo));
  WALProcedureStore walProcedureStore=(WALProcedureStore)procExecutor.getStore();
  walProcedureStore.rollWriterForTesting();
  Thread.sleep(500);
  procExecutor.submitProcedure(new DummyTableProcedure(UTIL.getMiniHBaseCluster().getMaster().getMasterProcedureExecutor().getEnvironment(),tablename));
  ProcedureTestingUtility.restart(procExecutor);
  while (procExecutor.getProcedure(regionProc) == null) {
    Thread.sleep(500);
  }
  DummyRegionProcedure dummyRegionProcedure=(DummyRegionProcedure)procExecutor.getProcedure(regionProc);
  dummyRegionProcedure.resume();
  UTIL.waitFor(5000,() -> dummyRegionProcedure.isFinished());
}
