@SuppressWarnings("unchecked") @Test public void testMultipleRegionSizes(){
  final Configuration conf=getDefaultHBaseConfiguration();
  final HRegionServer rs=mockRegionServer(conf);
  final List<Long> r1Sizes=Arrays.asList(1024L,2048L);
  final long r1Sum=sum(r1Sizes);
  final List<Long> r2Sizes=Arrays.asList(1024L * 1024L);
  final long r2Sum=sum(r2Sizes);
  final List<Long> r3Sizes=Arrays.asList(10L * 1024L * 1024L);
  final long r3Sum=sum(r3Sizes);
  final FileSystemUtilizationChore chore=new FileSystemUtilizationChore(rs);
  doAnswer(new ExpectedRegionSizeSummationAnswer(sum(Arrays.asList(r1Sum,r2Sum,r3Sum)))).when(rs).reportRegionSizesForQuotas((Map<RegionInfo,Long>)any());
  final Region r1=mockRegionWithSize(r1Sizes);
  final Region r2=mockRegionWithSize(r2Sizes);
  final Region r3=mockRegionWithSize(r3Sizes);
  Mockito.doReturn(Arrays.asList(r1,r2,r3)).when(rs).getRegions();
  chore.chore();
}
