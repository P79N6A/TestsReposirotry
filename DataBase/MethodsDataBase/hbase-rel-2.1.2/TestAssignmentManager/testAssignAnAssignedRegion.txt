@Test public void testAssignAnAssignedRegion() throws Exception {
  final TableName tableName=TableName.valueOf("testAssignAnAssignedRegion");
  final RegionInfo hri=createRegionInfo(tableName,1);
  collectAssignmentManagerMetrics();
  rsDispatcher.setMockRsExecutor(new GoodRsExecutor());
  final Future<byte[]> futureA=submitProcedure(am.createAssignProcedure(hri));
  waitOnFuture(futureA);
  am.getRegionStates().isRegionInState(hri,State.OPEN);
  final Future<byte[]> futureB=submitProcedure(am.createAssignProcedure(hri));
  waitOnFuture(futureB);
  am.getRegionStates().isRegionInState(hri,State.OPEN);
  assertEquals(assignSubmittedCount + 2,assignProcMetrics.getSubmittedCounter().getCount());
  assertEquals(assignFailedCount,assignProcMetrics.getFailedCounter().getCount());
}
