@Test public void testNonViolatingQuotaCachesPolicyEnforcment(){
  final Map<TableName,SpaceQuotaSnapshot> snapshots=new HashMap<>();
  final TableName tableName=TableName.valueOf("my_table");
  snapshots.put(tableName,new SpaceQuotaSnapshot(SpaceQuotaStatus.notInViolation(),0,1024));
  final ActivePolicyEnforcement ape=new ActivePolicyEnforcement(Collections.emptyMap(),snapshots,rss);
  SpaceViolationPolicyEnforcement policyEnforcement=ape.getPolicyEnforcement(tableName);
  assertTrue("Found the wrong class: " + policyEnforcement.getClass(),policyEnforcement instanceof DefaultViolationPolicyEnforcement);
  SpaceViolationPolicyEnforcement copy=ape.getPolicyEnforcement(tableName);
  assertTrue("Expected the instance to be cached",policyEnforcement == copy);
  Entry<TableName,SpaceViolationPolicyEnforcement> entry=ape.getLocallyCachedPolicies().entrySet().iterator().next();
  assertTrue(policyEnforcement == entry.getValue());
}
