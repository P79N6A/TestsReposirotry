@Test public void testNoPeriodicFlush() throws InterruptedException, ExecutionException {
  try (AsyncBufferedMutator mutator=CONN.getBufferedMutatorBuilder(TABLE_NAME).disableWriteBufferPeriodicFlush().build()){
    Put put=new Put(Bytes.toBytes(0)).addColumn(CF,CQ,VALUE);
    CompletableFuture<?> future=mutator.mutate(put);
    Thread.sleep(2000);
    assertFalse(future.isDone());
    mutator.flush();
    future.get();
  }
   AsyncTable<?> table=CONN.getTable(TABLE_NAME);
  assertArrayEquals(VALUE,table.get(new Get(Bytes.toBytes(0))).get().getValue(CF,CQ));
}
