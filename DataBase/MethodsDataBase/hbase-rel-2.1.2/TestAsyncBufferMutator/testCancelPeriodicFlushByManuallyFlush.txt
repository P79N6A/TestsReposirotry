@Test public void testCancelPeriodicFlushByManuallyFlush() throws InterruptedException, ExecutionException {
  try (AsyncBufferedMutatorImpl mutator=(AsyncBufferedMutatorImpl)CONN.getBufferedMutatorBuilder(TABLE_NAME).setWriteBufferPeriodicFlush(1,TimeUnit.SECONDS).build()){
    CompletableFuture<?> future=mutator.mutate(new Put(Bytes.toBytes(0)).addColumn(CF,CQ,VALUE));
    Timeout task=mutator.periodicFlushTask;
    assertNotNull(task);
    mutator.flush();
    assertTrue(task.isCancelled());
    future.get();
    AsyncTable<?> table=CONN.getTable(TABLE_NAME);
    assertArrayEquals(VALUE,table.get(new Get(Bytes.toBytes(0))).get().getValue(CF,CQ));
  }
 }
