@Test public void testCreateACLWithSameUser() throws ZooKeeperConnectionException, IOException {
  Configuration conf=HBaseConfiguration.create();
  conf.set(Superusers.SUPERUSER_CONF_KEY,"user4,@group1,user5,user6");
  UserGroupInformation.setLoginUser(UserGroupInformation.createRemoteUser("user4"));
  String node="/hbase/testCreateACL";
  ZKWatcher watcher=new ZKWatcher(conf,node,null,false);
  List<ACL> aclList=ZKUtil.createACL(watcher,node,true);
  assertEquals(3,aclList.size());
  assertFalse(aclList.contains(new ACL(Perms.ALL,new Id("sasl","@group1"))));
  assertTrue(aclList.contains(new ACL(Perms.ALL,new Id("auth",""))));
  assertTrue(aclList.contains(new ACL(Perms.ALL,new Id("sasl","user5"))));
  assertTrue(aclList.contains(new ACL(Perms.ALL,new Id("sasl","user6"))));
}
