@Test @Ignore("Intermittent argument matching failures, see HBASE-18813") public void testWriteTableTimeout() throws Exception {
  ExecutorService executor=new ScheduledThreadPoolExecutor(1);
  Canary.RegionStdOutSink sink=spy(new Canary.RegionStdOutSink());
  Canary canary=new Canary(executor,sink);
  String[] args={"-writeSniffing","-writeTableTimeout",String.valueOf(Long.MAX_VALUE)};
  assertEquals(0,ToolRunner.run(testingUtility.getConfiguration(),canary,args));
  assertNotEquals("verify non-null write latency",null,sink.getWriteLatency());
  assertNotEquals("verify non-zero write latency",0L,sink.getWriteLatency());
  verify(mockAppender,times(1)).doAppend(argThat(new ArgumentMatcher<LoggingEvent>(){
    @Override public boolean matches(    LoggingEvent argument){
      return argument.getRenderedMessage().contains("The configured write timeout was");
    }
  }
));
}
