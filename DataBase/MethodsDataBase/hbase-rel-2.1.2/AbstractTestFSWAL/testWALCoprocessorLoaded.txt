/** 
 * A loaded WAL coprocessor won't break existing WAL test cases.
 */
@Test public void testWALCoprocessorLoaded() throws Exception {
  AbstractFSWAL<?> wal=null;
  try {
    wal=newWAL(FS,CommonFSUtils.getWALRootDir(CONF),DIR.toString(),HConstants.HREGION_OLDLOGDIR_NAME,CONF,null,true,null,null);
    WALCoprocessorHost host=wal.getCoprocessorHost();
    Coprocessor c=host.findCoprocessor(SampleRegionWALCoprocessor.class);
    assertNotNull(c);
  }
  finally {
    if (wal != null) {
      wal.close();
    }
  }
}
