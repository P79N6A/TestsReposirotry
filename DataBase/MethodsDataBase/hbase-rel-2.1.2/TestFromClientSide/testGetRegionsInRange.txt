@Test public void testGetRegionsInRange() throws Exception {
  byte[] startKey=Bytes.toBytes("ddc");
  byte[] endKey=Bytes.toBytes("mmm");
  TableName tableName=TableName.valueOf(name.getMethodName());
  TEST_UTIL.createMultiRegionTable(tableName,new byte[][]{FAMILY},10);
  int numOfRegions=-1;
  try (RegionLocator r=TEST_UTIL.getConnection().getRegionLocator(tableName)){
    numOfRegions=r.getStartKeys().length;
  }
   assertEquals(26,numOfRegions);
  List<HRegionLocation> regionsList=getRegionsInRange(tableName,startKey,endKey);
  assertEquals(10,regionsList.size());
  startKey=Bytes.toBytes("fff");
  regionsList=getRegionsInRange(tableName,startKey,endKey);
  assertEquals(7,regionsList.size());
  endKey=Bytes.toBytes("nnn");
  regionsList=getRegionsInRange(tableName,startKey,endKey);
  assertEquals(8,regionsList.size());
  regionsList=getRegionsInRange(tableName,HConstants.EMPTY_START_ROW,endKey);
  assertEquals(13,regionsList.size());
  regionsList=getRegionsInRange(tableName,startKey,HConstants.EMPTY_END_ROW);
  assertEquals(21,regionsList.size());
  regionsList=getRegionsInRange(tableName,HConstants.EMPTY_START_ROW,HConstants.EMPTY_END_ROW);
  assertEquals(26,regionsList.size());
  endKey=Bytes.toBytes("zzz1");
  regionsList=getRegionsInRange(tableName,startKey,endKey);
  assertEquals(21,regionsList.size());
  startKey=Bytes.toBytes("aac");
  regionsList=getRegionsInRange(tableName,startKey,endKey);
  assertEquals(26,regionsList.size());
  startKey=endKey=Bytes.toBytes("ccc");
  regionsList=getRegionsInRange(tableName,startKey,endKey);
  assertEquals(1,regionsList.size());
}
