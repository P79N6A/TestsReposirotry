@Test public void testOperationTimeout() throws Exception {
  TEST_UTIL.getConfiguration().setInt(HConstants.HBASE_CLIENT_RETRIES_NUMBER,100);
  TEST_UTIL.getConfiguration().set(CoprocessorHost.MASTER_COPROCESSOR_CONF_KEY,TestOperationTimeoutCoprocessor.class.getName());
  TEST_UTIL.startMiniCluster(2);
  ASYNC_CONN=ConnectionFactory.createAsyncConnection(TEST_UTIL.getConfiguration()).get();
  try {
    getAdminBuilder.get().setOperationTimeout(DEFAULT_OPERATION_TIMEOUT / 2,TimeUnit.MILLISECONDS).build().getNamespaceDescriptor(DEFAULT_NAMESPACE_NAME_STR).get();
    fail("We expect an exception here");
  }
 catch (  Exception e) {
  }
  try {
    getAdminBuilder.get().setOperationTimeout(DEFAULT_OPERATION_TIMEOUT * 2,TimeUnit.MILLISECONDS).build().getNamespaceDescriptor(DEFAULT_NAMESPACE_NAME_STR).get();
  }
 catch (  Exception e) {
    fail("The Operation should succeed, unexpected exception: " + e.getMessage());
  }
}
