@Test public void testReadSnapshotRegionManifest() throws IOException {
  fs.delete(new Path(snapshotDir,SnapshotManifest.DATA_MANIFEST_NAME),true);
  Path regionPath=createRegionManifest();
  try {
    conf.setInt(SnapshotManifest.SNAPSHOT_MANIFEST_SIZE_LIMIT_CONF_KEY,128 * 1024 * 1024);
    SnapshotManifest.open(conf,fs,snapshotDir,snapshotDesc);
  }
 catch (  CorruptedSnapshotException e) {
    fail("fail to test snapshot manifest because region message size is too small.");
  }
 finally {
    fs.delete(regionPath,false);
  }
}
