@Test public void testGetFavoredNodes() throws IOException {
  Map<String,Integer> rackToServerCount=new HashMap<>();
  Set<String> rackList=Sets.newHashSet("rack1","rack2","rack3");
  for (  String rack : rackList) {
    rackToServerCount.put(rack,4);
  }
  List<ServerName> servers=getServersFromRack(rackToServerCount);
  FavoredNodeAssignmentHelper helper=new FavoredNodeAssignmentHelper(servers,rackManager);
  helper.initialize();
  assertTrue(helper.canPlaceFavoredNodes());
  RegionInfo region=RegionInfoBuilder.newBuilder(TableName.valueOf(name.getMethodName())).setStartKey(HConstants.EMPTY_START_ROW).setEndKey(HConstants.EMPTY_END_ROW).build();
  for (int maxattempts=0; maxattempts < MAX_ATTEMPTS; maxattempts++) {
    List<ServerName> fn=helper.generateFavoredNodes(region);
    checkDuplicateFN(fn);
    checkFNRacks(fn);
  }
}
