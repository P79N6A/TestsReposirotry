@Test public void testGenMissingFavoredNodeOneRack() throws IOException {
  Map<String,Integer> rackToServerCount=new HashMap<>();
  final String rack="rack1";
  rackToServerCount.put(rack,6);
  List<ServerName> servers=getServersFromRack(rackToServerCount);
  FavoredNodeAssignmentHelper helper=new FavoredNodeAssignmentHelper(servers,rackManager);
  helper.initialize();
  assertTrue(helper.canPlaceFavoredNodes());
  ServerName snRack1SN1=ServerName.valueOf("foo1:1234",ServerName.NON_STARTCODE);
  ServerName snRack1SN2=ServerName.valueOf("foo2:1234",ServerName.NON_STARTCODE);
  ServerName snRack1SN3=ServerName.valueOf("foo3:1234",ServerName.NON_STARTCODE);
  List<ServerName> fn=Lists.newArrayList(snRack1SN1,snRack1SN2);
  for (int attempts=0; attempts < MAX_ATTEMPTS; attempts++) {
    checkDuplicateFN(fn,helper.generateMissingFavoredNode(fn));
  }
  fn=Lists.newArrayList(snRack1SN1,snRack1SN2);
  List<ServerName> skipServers=Lists.newArrayList(snRack1SN3);
  for (int attempts=0; attempts < MAX_ATTEMPTS; attempts++) {
    ServerName genSN=helper.generateMissingFavoredNode(fn,skipServers);
    checkDuplicateFN(fn,genSN);
    assertNotEquals("Generated FN should not match excluded one",snRack1SN3,genSN);
  }
}
