@Test public void statusAndFullDetailsAreExposed(){
  Map<String,HealthIndicator> healthIndicators=new HashMap<>();
  healthIndicators.put("up",one);
  healthIndicators.put("upAgain",two);
  HealthEndpoint endpoint=new HealthEndpoint(createHealthIndicator(healthIndicators));
  Health health=endpoint.health();
  assertThat(health.getStatus()).isEqualTo(Status.UP);
  assertThat(health.getDetails()).containsOnlyKeys("up","upAgain");
  Health upHealth=(Health)health.getDetails().get("up");
  assertThat(upHealth.getDetails()).containsOnly(entry("first","1"));
  Health upAgainHealth=(Health)health.getDetails().get("upAgain");
  assertThat(upAgainHealth.getDetails()).containsOnly(entry("second","2"));
}
