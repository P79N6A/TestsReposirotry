@Test public void viaTunnel(){
  AnnotationConfigServletWebServerApplicationContext serverContext=new AnnotationConfigServletWebServerApplicationContext();
  serverContext.register(ServerConfiguration.class);
  serverContext.refresh();
  AnnotationConfigApplicationContext tunnelContext=new AnnotationConfigApplicationContext();
  TestPropertyValues.of("server.port:" + serverContext.getWebServer().getPort()).applyTo(tunnelContext);
  tunnelContext.register(TunnelConfiguration.class);
  tunnelContext.refresh();
  String url="http://localhost:" + tunnelContext.getBean(TestTunnelClient.class).port + "/hello";
  ResponseEntity<String> entity=new TestRestTemplate().getForEntity(url,String.class);
  assertThat(entity.getStatusCode()).isEqualTo(HttpStatus.OK);
  assertThat(entity.getBody()).isEqualTo("Hello World");
  serverContext.close();
  tunnelContext.close();
}
