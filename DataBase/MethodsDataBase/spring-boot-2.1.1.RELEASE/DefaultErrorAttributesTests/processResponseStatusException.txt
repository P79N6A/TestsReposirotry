@Test public void processResponseStatusException(){
  RuntimeException nested=new RuntimeException("Test");
  ResponseStatusException error=new ResponseStatusException(HttpStatus.BAD_REQUEST,"invalid request",nested);
  this.errorAttributes=new DefaultErrorAttributes(true);
  MockServerHttpRequest request=MockServerHttpRequest.get("/test").build();
  ServerRequest serverRequest=buildServerRequest(request,error);
  Map<String,Object> attributes=this.errorAttributes.getErrorAttributes(serverRequest,false);
  assertThat(attributes.get("status")).isEqualTo(400);
  assertThat(attributes.get("message")).isEqualTo("invalid request");
  assertThat(attributes.get("exception")).isEqualTo(RuntimeException.class.getName());
  assertThat(this.errorAttributes.getError(serverRequest)).isSameAs(error);
}
