@Test public void throwWhenPidFileIsReadOnlyWithSpring() throws Exception {
  File file=this.temporaryFolder.newFile();
  file.setReadOnly();
  SpringApplicationEvent event=createPreparedEvent("spring.pid.fail-on-write-error","true");
  ApplicationPidFileWriter listener=new ApplicationPidFileWriter(file);
  assertThatIllegalStateException().isThrownBy(() -> listener.onApplicationEvent(event)).withMessageContaining("Cannot create pid file");
}
