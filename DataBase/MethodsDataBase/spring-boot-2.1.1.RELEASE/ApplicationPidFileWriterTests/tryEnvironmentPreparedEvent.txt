@Test public void tryEnvironmentPreparedEvent() throws Exception {
  File file=this.temporaryFolder.newFile();
  SpringApplicationEvent event=createEnvironmentPreparedEvent("spring.pid.file",file.getAbsolutePath());
  ApplicationPidFileWriter listener=new ApplicationPidFileWriter();
  listener.onApplicationEvent(event);
  assertThat(FileCopyUtils.copyToString(new FileReader(file))).isEmpty();
  listener.setTriggerEventType(ApplicationEnvironmentPreparedEvent.class);
  listener.onApplicationEvent(event);
  assertThat(FileCopyUtils.copyToString(new FileReader(file))).isNotEmpty();
}
