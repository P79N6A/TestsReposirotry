@Test public void runWithCustomHealthMappingShouldMapStatusCode(){
  this.contextRunner.withPropertyValues("management.health.status.http-mapping.CUSTOM=500").run((context) -> {
    Object extension=context.getBean(HealthEndpointWebExtension.class);
    HealthWebEndpointResponseMapper responseMapper=(HealthWebEndpointResponseMapper)ReflectionTestUtils.getField(extension,"responseMapper");
    Class<SecurityContext> securityContext=SecurityContext.class;
    assertThat(responseMapper.map(Health.down().build(),mock(securityContext)).getStatus()).isEqualTo(503);
    assertThat(responseMapper.map(Health.status("OUT_OF_SERVICE").build(),mock(securityContext)).getStatus()).isEqualTo(503);
    assertThat(responseMapper.map(Health.status("CUSTOM").build(),mock(securityContext)).getStatus()).isEqualTo(500);
  }
);
}
