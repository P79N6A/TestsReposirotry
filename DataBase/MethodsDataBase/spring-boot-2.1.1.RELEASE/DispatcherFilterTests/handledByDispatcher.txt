@Test public void handledByDispatcher() throws Exception {
  HttpServletRequest request=new MockHttpServletRequest("GET","/hello");
  HttpServletResponse response=new MockHttpServletResponse();
  willReturn(true).given(this.dispatcher).handle(any(ServerHttpRequest.class),any(ServerHttpResponse.class));
  this.filter.doFilter(request,response,this.chain);
  verifyZeroInteractions(this.chain);
  verify(this.dispatcher).handle(this.serverRequestCaptor.capture(),this.serverResponseCaptor.capture());
  ServerHttpRequest dispatcherRequest=this.serverRequestCaptor.getValue();
  ServletServerHttpRequest actualRequest=(ServletServerHttpRequest)dispatcherRequest;
  ServerHttpResponse dispatcherResponse=this.serverResponseCaptor.getValue();
  ServletServerHttpResponse actualResponse=(ServletServerHttpResponse)dispatcherResponse;
  assertThat(actualRequest.getServletRequest()).isEqualTo(request);
  assertThat(actualResponse.getServletResponse()).isEqualTo(response);
}
