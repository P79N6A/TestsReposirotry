@Test public void retriesOnConnectException() throws Exception {
  File sourceFolder=this.temp.newFolder();
  ClassPathChangedEvent event=createClassPathChangedEvent(sourceFolder);
  this.requestFactory.willRespond(new ConnectException());
  this.requestFactory.willRespond(HttpStatus.OK);
  this.uploader.onApplicationEvent(event);
  assertThat(this.requestFactory.getExecutedRequests()).hasSize(2);
  verifyUploadRequest(sourceFolder,this.requestFactory.getExecutedRequests().get(1));
}
