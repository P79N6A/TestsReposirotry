@Test public void nestedZip64ArchivesAreHandledGracefully() throws IOException {
  File file=this.temporaryFolder.newFile("test.jar");
  JarOutputStream output=new JarOutputStream(new FileOutputStream(file));
  JarEntry zip64JarEntry=new JarEntry("nested/zip64.jar");
  output.putNextEntry(zip64JarEntry);
  byte[] zip64JarData=writeZip64Jar();
  zip64JarEntry.setSize(zip64JarData.length);
  zip64JarEntry.setCompressedSize(zip64JarData.length);
  zip64JarEntry.setMethod(ZipEntry.STORED);
  CRC32 crc32=new CRC32();
  crc32.update(zip64JarData);
  zip64JarEntry.setCrc(crc32.getValue());
  output.write(zip64JarData);
  output.closeEntry();
  output.close();
  JarFileArchive jarFileArchive=new JarFileArchive(file);
  assertThatIllegalStateException().isThrownBy(() -> jarFileArchive.getNestedArchive(getEntriesMap(jarFileArchive).get("nested/zip64.jar"))).withMessageContaining("Failed to get nested archive for entry nested/zip64.jar");
}
