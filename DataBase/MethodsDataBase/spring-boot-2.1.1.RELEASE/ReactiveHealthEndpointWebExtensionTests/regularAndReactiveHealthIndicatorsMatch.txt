@Test public void regularAndReactiveHealthIndicatorsMatch(){
  this.contextRunner.withPropertyValues("management.endpoint.health.show-details=always").withUserConfiguration(HealthIndicatorsConfiguration.class).run((context) -> {
    HealthEndpoint endpoint=context.getBean(HealthEndpoint.class);
    ReactiveHealthEndpointWebExtension extension=context.getBean(ReactiveHealthEndpointWebExtension.class);
    Health endpointHealth=endpoint.health();
    SecurityContext securityContext=mock(SecurityContext.class);
    given(securityContext.getPrincipal()).willReturn(mock(Principal.class));
    Health extensionHealth=extension.health(securityContext).block().getBody();
    assertThat(endpointHealth.getDetails()).containsOnlyKeys("application","first","second");
    assertThat(extensionHealth.getDetails()).containsOnlyKeys("application","first","second");
  }
);
}
