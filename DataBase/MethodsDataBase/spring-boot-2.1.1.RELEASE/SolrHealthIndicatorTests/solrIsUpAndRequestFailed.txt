@Test public void solrIsUpAndRequestFailed() throws Exception {
  SolrClient solrClient=mock(SolrClient.class);
  given(solrClient.request(any(CoreAdminRequest.class),isNull())).willReturn(mockResponse(400));
  SolrHealthIndicator healthIndicator=new SolrHealthIndicator(solrClient);
  Health health=healthIndicator.health();
  assertThat(health.getStatus()).isEqualTo(Status.DOWN);
  assertThat(health.getDetails().get("status")).isEqualTo(400);
}
