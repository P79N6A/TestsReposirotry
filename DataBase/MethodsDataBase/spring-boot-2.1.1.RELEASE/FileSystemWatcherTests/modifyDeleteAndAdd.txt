@Test public void modifyDeleteAndAdd() throws Exception {
  File folder=this.temp.newFolder();
  File modify=touch(new File(folder,"modify.txt"));
  File delete=touch(new File(folder,"delete.txt"));
  this.watcher.addSourceFolder(folder);
  this.watcher.start();
  FileCopyUtils.copy("abc".getBytes(),modify);
  delete.delete();
  File add=touch(new File(folder,"add.txt"));
  this.watcher.stopAfter(1);
  ChangedFiles changedFiles=getSingleChangedFiles();
  Set<ChangedFile> actual=changedFiles.getFiles();
  Set<ChangedFile> expected=new HashSet<>();
  expected.add(new ChangedFile(folder,modify,Type.MODIFY));
  expected.add(new ChangedFile(folder,delete,Type.DELETE));
  expected.add(new ChangedFile(folder,add,Type.ADD));
  assertThat(actual).isEqualTo(expected);
}
