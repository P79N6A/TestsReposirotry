@Test public void startupWithSpecifiedValues() throws Exception {
  AbstractFilterRegistrationBean<?> bean=createFilterRegistrationBean();
  bean.setName("test");
  bean.setAsyncSupported(false);
  bean.setInitParameters(Collections.singletonMap("a","b"));
  bean.addInitParameter("c","d");
  bean.setUrlPatterns(new LinkedHashSet<>(Arrays.asList("/a","/b")));
  bean.addUrlPatterns("/c");
  bean.setServletNames(new LinkedHashSet<>(Arrays.asList("s1","s2")));
  bean.addServletNames("s3");
  bean.setServletRegistrationBeans(Collections.singleton(mockServletRegistration("s4")));
  bean.addServletRegistrationBeans(mockServletRegistration("s5"));
  bean.setMatchAfter(true);
  bean.onStartup(this.servletContext);
  verify(this.servletContext).addFilter(eq("test"),getExpectedFilter());
  verify(this.registration).setAsyncSupported(false);
  Map<String,String> expectedInitParameters=new HashMap<>();
  expectedInitParameters.put("a","b");
  expectedInitParameters.put("c","d");
  verify(this.registration).setInitParameters(expectedInitParameters);
  verify(this.registration).addMappingForUrlPatterns(EnumSet.of(DispatcherType.REQUEST),true,"/a","/b","/c");
  verify(this.registration).addMappingForServletNames(EnumSet.of(DispatcherType.REQUEST),true,"s4","s5","s1","s2","s3");
}
