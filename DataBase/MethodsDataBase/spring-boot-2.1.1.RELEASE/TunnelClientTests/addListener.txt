@Test public void addListener() throws Exception {
  TunnelClient client=new TunnelClient(0,this.tunnelConnection);
  TunnelClientListener listener=mock(TunnelClientListener.class);
  client.addListener(listener);
  int port=client.start();
  SocketChannel channel=SocketChannel.open(new InetSocketAddress(port));
  Thread.sleep(200);
  channel.close();
  client.getServerThread().stopAcceptingConnections();
  client.getServerThread().join(2000);
  verify(listener).onOpen(any(SocketChannel.class));
  verify(listener).onClose(any(SocketChannel.class));
}
