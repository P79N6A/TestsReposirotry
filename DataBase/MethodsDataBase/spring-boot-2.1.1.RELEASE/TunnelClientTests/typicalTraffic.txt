@Test public void typicalTraffic() throws Exception {
  TunnelClient client=new TunnelClient(0,this.tunnelConnection);
  int port=client.start();
  SocketChannel channel=SocketChannel.open(new InetSocketAddress(port));
  channel.write(ByteBuffer.wrap("hello".getBytes()));
  ByteBuffer buffer=ByteBuffer.allocate(5);
  channel.read(buffer);
  channel.close();
  this.tunnelConnection.verifyWritten("hello");
  assertThat(new String(buffer.array())).isEqualTo("olleh");
}
