@Test public void clientCanCloseServer() throws Exception {
  MockHttpConnection h1=new MockHttpConnection();
  this.server.handle(h1);
  MockHttpConnection h2=new MockHttpConnection("DISCONNECT",1);
  h2.getServletRequest().addHeader("Content-Type","application/x-disconnect");
  this.server.handle(h2);
  this.server.getServerThread().join();
  assertThat(h1.getServletResponse().getStatus()).isEqualTo(410);
  assertThat(this.serverChannel.isOpen()).isFalse();
}
