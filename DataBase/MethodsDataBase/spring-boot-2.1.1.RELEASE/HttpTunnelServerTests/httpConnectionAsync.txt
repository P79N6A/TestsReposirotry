@Test public void httpConnectionAsync() throws Exception {
  ServerHttpAsyncRequestControl async=mock(ServerHttpAsyncRequestControl.class);
  ServerHttpRequest request=mock(ServerHttpRequest.class);
  given(request.getAsyncRequestControl(this.response)).willReturn(async);
  HttpConnection connection=new HttpConnection(request,this.response);
  connection.waitForResponse();
  verify(async).start();
  connection.respond(HttpStatus.NO_CONTENT);
  verify(async).complete();
}
