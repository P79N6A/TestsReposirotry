@Test public void specificApplicationContextInitializer(){
  SpringApplication application=new SpringApplication(ExampleConfig.class);
  application.setWebApplicationType(WebApplicationType.NONE);
  final AtomicReference<ApplicationContext> reference=new AtomicReference<>();
  application.setInitializers(Arrays.asList((ApplicationContextInitializer<ConfigurableApplicationContext>)reference::set));
  this.context=application.run("--foo=bar");
  assertThat(this.context).isSameAs(reference.get());
  assertThat(getEnvironment().getProperty("foo")).isEqualTo("bar");
}
