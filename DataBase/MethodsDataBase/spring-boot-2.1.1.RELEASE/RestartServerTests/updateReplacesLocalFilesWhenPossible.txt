@Test public void updateReplacesLocalFilesWhenPossible() throws Exception {
  File folder=this.temp.newFolder();
  File classFile=new File(folder,"ClassA.class");
  FileCopyUtils.copy("abc".getBytes(),classFile);
  URL url=folder.toURI().toURL();
  URLClassLoader classLoader=new URLClassLoader(new URL[]{url});
  SourceFolderUrlFilter filter=new DefaultSourceFolderUrlFilter();
  MockRestartServer server=new MockRestartServer(filter,classLoader);
  ClassLoaderFiles files=new ClassLoaderFiles();
  ClassLoaderFile fileA=new ClassLoaderFile(Kind.ADDED,"def".getBytes());
  files.addFile("my/module-a","ClassA.class",fileA);
  server.updateAndRestart(files);
  assertThat(FileCopyUtils.copyToByteArray(classFile)).isEqualTo("def".getBytes());
}
