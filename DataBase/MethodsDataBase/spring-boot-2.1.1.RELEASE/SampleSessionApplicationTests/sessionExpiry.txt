@Test public void sessionExpiry() throws Exception {
  ConfigurableApplicationContext context=createContext();
  String port=context.getEnvironment().getProperty("local.server.port");
  URI uri=URI.create("http://localhost:" + port + "/");
  RestTemplate restTemplate=new RestTemplate();
  ResponseEntity<String> firstResponse=firstRequest(restTemplate,uri);
  String sessionId1=firstResponse.getBody();
  String cookie=firstResponse.getHeaders().getFirst("Set-Cookie");
  String sessionId2=nextRequest(restTemplate,uri,cookie).getBody();
  assertThat(sessionId1).isEqualTo(sessionId2);
  Thread.sleep(1000);
  String loginPage=nextRequest(restTemplate,uri,cookie).getBody();
  assertThat(loginPage).containsIgnoringCase("login");
}
