@Test public void scriptsHaveCorrectPermissions() throws IOException {
  assertThat(this.gradleBuild.build("bootDistTar").task(":bootDistTar").getOutcome()).isEqualTo(TaskOutcome.SUCCESS);
  String name=this.gradleBuild.getProjectDir().getName();
  File distribution=new File(this.gradleBuild.getProjectDir(),"build/distributions/" + name + "-boot.tar");
  assertThat(distribution).isFile();
  tarEntries(distribution,(entry) -> {
    int filePermissions=entry.getMode() & 0777;
    if (entry.isFile() && !entry.getName().startsWith(name + "-boot/bin/")) {
      assertThat(filePermissions).isEqualTo(0644);
    }
 else {
      assertThat(filePermissions).isEqualTo(0755);
    }
  }
);
}
