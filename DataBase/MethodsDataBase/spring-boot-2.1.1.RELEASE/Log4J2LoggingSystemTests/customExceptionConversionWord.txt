@Test public void customExceptionConversionWord() throws Exception {
  System.setProperty(LoggingSystemProperties.EXCEPTION_CONVERSION_WORD,"%ex");
  try {
    this.loggingSystem.beforeInitialize();
    this.logger.info("Hidden");
    this.loggingSystem.initialize(null,null,getLogFile(null,tmpDir()));
    Matcher<String> expectedOutput=Matchers.allOf(containsString("java.lang.RuntimeException: Expected"),not(containsString("Wrapped by:")));
    this.output.expect(expectedOutput);
    this.logger.warn("Expected exception",new RuntimeException("Expected",new RuntimeException("Cause")));
    String fileContents=FileCopyUtils.copyToString(new FileReader(new File(tmpDir() + "/spring.log")));
    assertThat(fileContents).is(Matched.by(expectedOutput));
  }
  finally {
    System.clearProperty(LoggingSystemProperties.EXCEPTION_CONVERSION_WORD);
  }
}
