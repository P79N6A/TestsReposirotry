@Test public void timeout() throws Exception {
  this.server.delay(1000);
  this.server.start();
  ByteChannel channel=this.connection.open(10);
  long startTime=System.currentTimeMillis();
  try {
    channel.read(ByteBuffer.allocate(5));
    fail("No socket timeout thrown");
  }
 catch (  SocketTimeoutException ex) {
    long runTime=System.currentTimeMillis() - startTime;
    assertThat(runTime).isGreaterThanOrEqualTo(10L);
    assertThat(runTime).isLessThan(10000L);
  }
}
