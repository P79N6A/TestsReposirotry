@Test public void handlesExceptionWithDashD() throws Exception {
  willThrow(new RuntimeException()).given(this.regularCommand).run();
  int status=this.commandRunner.runAndHandleErrors("command","-d");
  assertThat(System.getProperty("debug")).isEqualTo("true");
  assertThat(status).isEqualTo(1);
  assertThat(this.calls).containsOnly(Call.ERROR_MESSAGE,Call.PRINT_STACK_TRACE);
}
