@Test public void customProtocolResolverIsUsedInWebApplication(){
  GenericWebApplicationContext context=new GenericWebApplicationContext(new MockServletContext());
  Resource resource=mock(Resource.class);
  ProtocolResolver resolver=mockProtocolResolver("foo:some-file.txt",resource);
  context.addProtocolResolver(resolver);
  this.resolver=new ClassLoaderFilesResourcePatternResolver(context,this.files);
  Resource actual=this.resolver.getResource("foo:some-file.txt");
  assertThat(actual).isSameAs(resource);
  verify(resolver).resolve(eq("foo:some-file.txt"),any(ResourceLoader.class));
}
