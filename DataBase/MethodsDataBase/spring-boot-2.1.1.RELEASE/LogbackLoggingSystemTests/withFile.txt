@Test public void withFile() throws Exception {
  this.loggingSystem.beforeInitialize();
  this.logger.info("Hidden");
  this.loggingSystem.initialize(this.initializationContext,null,getLogFile(null,tmpDir()));
  this.logger.info("Hello world");
  String output=this.output.toString().trim();
  File file=new File(tmpDir() + "/spring.log");
  assertThat(output).contains("Hello world").doesNotContain("Hidden");
  assertThat(getLineWithText(output,"Hello world")).contains("INFO");
  assertThat(file.exists()).isTrue();
  assertThat(getLineWithText(file,"Hello world")).contains("INFO");
  assertThat(ReflectionTestUtils.getField(getRollingPolicy(),"maxFileSize").toString()).isEqualTo("10 MB");
  assertThat(getRollingPolicy().getMaxHistory()).isEqualTo(CoreConstants.UNBOUND_HISTORY);
}
