@Test public void createManagementPortFile() throws Exception {
  File file=this.temporaryFolder.newFile();
  WebServerPortFileWriter listener=new WebServerPortFileWriter(file);
  listener.onApplicationEvent(mockEvent("",8080));
  listener.onApplicationEvent(mockEvent("management",9090));
  assertThat(FileCopyUtils.copyToString(new FileReader(file))).isEqualTo("8080");
  String managementFile=file.getName();
  managementFile=managementFile.substring(0,managementFile.length() - StringUtils.getFilenameExtension(managementFile).length() - 1);
  managementFile=managementFile + "-management." + StringUtils.getFilenameExtension(file.getName());
  FileReader reader=new FileReader(new File(file.getParentFile(),managementFile));
  assertThat(FileCopyUtils.copyToString(reader)).isEqualTo("9090");
  assertThat(collectFileNames(file.getParentFile())).contains(managementFile);
}
