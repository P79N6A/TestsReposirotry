@Test public void profilesAddedToEnvironmentAndViaPropertyDuplicateEnvironmentWins(){
  TestPropertySourceUtils.addInlinedPropertiesToEnvironment(this.environment,"spring.profiles.active=other,dev");
  this.environment.addActiveProfile("other");
  this.initializer.postProcessEnvironment(this.environment,this.application);
  assertThat(this.environment.getActiveProfiles()).contains("dev","other");
  assertThat(this.environment.getProperty("my.property")).isEqualTo("fromdevpropertiesfile");
  validateProfilePrecedence(null,"other","dev");
}
