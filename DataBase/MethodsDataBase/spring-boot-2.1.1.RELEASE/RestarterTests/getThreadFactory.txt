@Test public void getThreadFactory() throws Exception {
  final ClassLoader parentLoader=Thread.currentThread().getContextClassLoader();
  final ClassLoader contextClassLoader=new URLClassLoader(new URL[0]);
  Thread thread=new Thread(() -> {
    Runnable runnable=mock(Runnable.class);
    Thread regular=new Thread();
    ThreadFactory factory=Restarter.getInstance().getThreadFactory();
    Thread viaFactory=factory.newThread(runnable);
    assertThat(regular.getContextClassLoader()).isEqualTo(contextClassLoader);
    assertThat(viaFactory.getContextClassLoader()).isEqualTo(parentLoader);
  }
);
  thread.setContextClassLoader(contextClassLoader);
  thread.start();
  thread.join();
}
