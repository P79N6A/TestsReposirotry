@Test public void accessManagerVetoRequest() throws Exception {
  given(this.accessManager.isAllowed(any(ServerHttpRequest.class))).willReturn(false);
  HandlerMapper mapper=mock(HandlerMapper.class);
  Handler handler=mock(Handler.class);
  given(mapper.getHandler(any(ServerHttpRequest.class))).willReturn(handler);
  Dispatcher dispatcher=new Dispatcher(this.accessManager,Collections.singleton(mapper));
  dispatcher.handle(this.serverRequest,this.serverResponse);
  verifyZeroInteractions(handler);
  assertThat(this.response.getStatus()).isEqualTo(403);
}
