@Test public void conditionalOnMissingBeanWithDeducedTypeThatIsPartiallyMissingFromClassPath(){
  try {
    new AnnotationConfigApplicationContext(ImportingConfiguration.class).close();
    fail("Context refresh was successful");
  }
 catch (  Exception ex) {
    Throwable beanTypeDeductionException=findNestedCause(ex,BeanTypeDeductionException.class);
    assertThat(beanTypeDeductionException).hasMessage("Failed to deduce bean type for " + OnMissingBeanConfiguration.class.getName() + ".objectMapper");
    assertThat(findNestedCause(beanTypeDeductionException,NoClassDefFoundError.class)).isNotNull();
  }
}
