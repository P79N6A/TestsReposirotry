@Test public void allBeanMethodsArePublic() throws IOException {
  Set<String> nonPublicBeanMethods=new HashSet<>();
  for (  AnnotationMetadata configurationClass : findConfigurationClasses()) {
    Set<MethodMetadata> beanMethods=configurationClass.getAnnotatedMethods(Bean.class.getName());
    for (    MethodMetadata methodMetadata : beanMethods) {
      if (!isPublic(methodMetadata)) {
        nonPublicBeanMethods.add(methodMetadata.getDeclaringClassName() + "." + methodMetadata.getMethodName());
      }
    }
  }
  assertThat(nonPublicBeanMethods).as("Found non-public @Bean methods").isEmpty();
}
