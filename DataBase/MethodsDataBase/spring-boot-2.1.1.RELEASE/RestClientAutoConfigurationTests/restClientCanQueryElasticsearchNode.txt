@Test public void restClientCanQueryElasticsearchNode(){
  new ElasticsearchNodeTemplate().doWithNode((node) -> this.contextRunner.withPropertyValues("spring.elasticsearch.rest.uris=http://localhost:" + node.getHttpPort()).run((context) -> {
    RestHighLevelClient client=context.getBean(RestHighLevelClient.class);
    Map<String,String> source=new HashMap<>();
    source.put("a","alpha");
    source.put("b","bravo");
    IndexRequest index=new IndexRequest("foo","bar","1").source(source);
    client.index(index,RequestOptions.DEFAULT);
    GetRequest getRequest=new GetRequest("foo","bar","1");
    assertThat(client.get(getRequest,RequestOptions.DEFAULT).isExists()).isTrue();
  }
));
}
