@Test public void startBlocksUntilReadyToServe(){
  AbstractServletWebServerFactory factory=getFactory();
  final Date[] date=new Date[1];
  this.webServer=factory.getWebServer((servletContext) -> {
    try {
      Thread.sleep(500);
      date[0]=new Date();
    }
 catch (    InterruptedException ex) {
      throw new ServletException(ex);
    }
  }
);
  this.webServer.start();
  assertThat(date[0]).isNotNull();
}
