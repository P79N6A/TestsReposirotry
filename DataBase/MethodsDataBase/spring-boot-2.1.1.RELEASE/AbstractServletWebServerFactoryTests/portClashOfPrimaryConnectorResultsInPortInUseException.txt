@Test public void portClashOfPrimaryConnectorResultsInPortInUseException() throws IOException {
  doWithBlockedPort((port) -> {
    try {
      AbstractServletWebServerFactory factory=getFactory();
      factory.setPort(port);
      AbstractServletWebServerFactoryTests.this.webServer=factory.getWebServer();
      AbstractServletWebServerFactoryTests.this.webServer.start();
      fail();
    }
 catch (    RuntimeException ex) {
      handleExceptionCausedByBlockedPort(ex,port);
    }
  }
);
}
