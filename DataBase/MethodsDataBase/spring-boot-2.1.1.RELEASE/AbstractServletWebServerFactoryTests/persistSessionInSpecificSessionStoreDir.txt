@Test public void persistSessionInSpecificSessionStoreDir() throws Exception {
  AbstractServletWebServerFactory factory=getFactory();
  File sessionStoreDir=this.temporaryFolder.newFolder();
  factory.getSession().setPersistent(true);
  factory.getSession().setStoreDir(sessionStoreDir);
  this.webServer=factory.getWebServer(sessionServletRegistration());
  this.webServer.start();
  getResponse(getLocalUrl("/session"));
  this.webServer.stop();
  File[] dirContents=sessionStoreDir.listFiles((dir,name) -> !(".".equals(name) || "..".equals(name)));
  assertThat(dirContents.length).isGreaterThan(0);
}
