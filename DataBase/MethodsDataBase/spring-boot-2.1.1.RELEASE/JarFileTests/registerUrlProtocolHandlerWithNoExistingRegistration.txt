@Test public void registerUrlProtocolHandlerWithNoExistingRegistration(){
  String original=System.getProperty(PROTOCOL_HANDLER);
  try {
    System.clearProperty(PROTOCOL_HANDLER);
    JarFile.registerUrlProtocolHandler();
    String protocolHandler=System.getProperty(PROTOCOL_HANDLER);
    assertThat(protocolHandler).isEqualTo(HANDLERS_PACKAGE);
  }
  finally {
    if (original == null) {
      System.clearProperty(PROTOCOL_HANDLER);
    }
 else {
      System.setProperty(PROTOCOL_HANDLER,original);
    }
  }
}
