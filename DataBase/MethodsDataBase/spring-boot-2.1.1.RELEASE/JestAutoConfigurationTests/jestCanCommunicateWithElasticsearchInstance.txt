@Test public void jestCanCommunicateWithElasticsearchInstance(){
  new ElasticsearchNodeTemplate().doWithNode((node) -> this.contextRunner.withPropertyValues("spring.elasticsearch.jest.uris=http://localhost:" + node.getHttpPort()).run((context) -> {
    JestClient client=context.getBean(JestClient.class);
    Map<String,String> source=new HashMap<>();
    source.put("a","alpha");
    source.put("b","bravo");
    Index index=new Index.Builder(source).index("foo").type("bar").id("1").build();
    execute(client,index);
    Get getRequest=new Get.Builder("foo","1").build();
    assertThat(execute(client,getRequest).getResponseCode()).isEqualTo(200);
  }
));
}
