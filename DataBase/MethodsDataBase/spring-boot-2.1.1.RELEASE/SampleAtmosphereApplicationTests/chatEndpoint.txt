@Test public void chatEndpoint(){
  ConfigurableApplicationContext context=new SpringApplicationBuilder(ClientConfiguration.class,PropertyPlaceholderAutoConfiguration.class).properties("websocket.uri:ws://localhost:" + this.port + "/chat/websocket").run("--spring.main.web-application-type=none");
  long count=context.getBean(ClientConfiguration.class).latch.getCount();
  AtomicReference<String> messagePayloadReference=context.getBean(ClientConfiguration.class).messagePayload;
  context.close();
  assertThat(count).isEqualTo(0L);
  assertThat(messagePayloadReference.get()).contains("{\"message\":\"test\",\"author\":\"test\",\"time\":");
}
