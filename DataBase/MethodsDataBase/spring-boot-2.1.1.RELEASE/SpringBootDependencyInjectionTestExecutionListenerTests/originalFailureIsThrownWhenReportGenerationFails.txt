@Test public void originalFailureIsThrownWhenReportGenerationFails() throws Exception {
  TestContext testContext=mock(TestContext.class);
  IllegalStateException originalFailure=new IllegalStateException();
  given(testContext.getTestInstance()).willThrow(originalFailure);
  SpringApplication application=new SpringApplication(Config.class);
  application.setWebApplicationType(WebApplicationType.NONE);
  given(testContext.getApplicationContext()).willThrow(new RuntimeException());
  assertThatIllegalStateException().isThrownBy(() -> this.reportListener.prepareTestInstance(testContext)).isEqualTo(originalFailure);
}
