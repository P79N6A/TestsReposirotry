@Test public void generateProjectAndExtractUnsupportedArchive() throws Exception {
  File folder=this.temporaryFolder.newFolder();
  String fileName=UUID.randomUUID().toString() + ".zip";
  File file=new File(fileName);
  assertThat(file.exists()).as("file should not exist").isFalse();
  try {
    byte[] archive=createFakeZipArchive("test.txt","Fake content");
    MockHttpProjectGenerationRequest request=new MockHttpProjectGenerationRequest("application/foobar",fileName,archive);
    mockSuccessfulProjectGeneration(request);
    assertThat(this.command.run("--extract",folder.getAbsolutePath())).isEqualTo(ExitStatus.OK);
    assertThat(file.exists()).as("file should have been saved instead").isTrue();
  }
  finally {
    assertThat(file.delete()).as("failed to delete test file").isTrue();
  }
}
