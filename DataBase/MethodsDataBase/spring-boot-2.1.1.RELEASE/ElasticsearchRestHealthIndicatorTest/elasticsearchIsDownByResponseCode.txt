@Test public void elasticsearchIsDownByResponseCode() throws IOException {
  Response response=mock(Response.class);
  StatusLine statusLine=mock(StatusLine.class);
  when(statusLine.getStatusCode()).thenReturn(500);
  when(response.getStatusLine()).thenReturn(statusLine);
  when(this.restClient.performRequest(any(Request.class))).thenReturn(response);
  assertThat(this.elasticsearchRestHealthIndicator.health().getStatus()).isEqualTo(Status.DOWN);
}
