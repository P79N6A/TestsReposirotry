@Test public void legacyCallbacksAreConfiguredAndOrdered(){
  this.contextRunner.withUserConfiguration(EmbeddedDataSourceConfiguration.class,LegacyCallbackConfiguration.class).run((context) -> {
    assertThat(context).hasSingleBean(Flyway.class);
    Flyway flyway=context.getBean(Flyway.class);
    FlywayCallback callbackOne=context.getBean("legacyCallbackOne",FlywayCallback.class);
    FlywayCallback callbackTwo=context.getBean("legacyCallbackTwo",FlywayCallback.class);
    assertThat(flyway.getCallbacks()).hasSize(2);
    InOrder orderedCallbacks=inOrder(callbackOne,callbackTwo);
    orderedCallbacks.verify(callbackTwo).beforeMigrate(any(Connection.class));
    orderedCallbacks.verify(callbackOne).beforeMigrate(any(Connection.class));
  }
);
}
