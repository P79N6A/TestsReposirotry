@Test public void customLayout() throws Exception {
  TestJarFile libJar=new TestJarFile(this.temporaryFolder);
  libJar.addClass("a/b/C.class",ClassWithoutMainMethod.class);
  File libJarFile=libJar.getFile();
  this.testJarFile.addClass("a/b/C.class",ClassWithMainMethod.class);
  File file=this.testJarFile.getFile();
  Repackager repackager=new Repackager(file);
  Layout layout=mock(Layout.class);
  LibraryScope scope=mock(LibraryScope.class);
  given(layout.getLauncherClassName()).willReturn("testLauncher");
  given(layout.getLibraryDestination(anyString(),eq(scope))).willReturn("test/");
  given(layout.getLibraryDestination(anyString(),eq(LibraryScope.COMPILE))).willReturn("test-lib/");
  repackager.setLayout(layout);
  repackager.repackage((callback) -> callback.library(new Library(libJarFile,scope)));
  assertThat(hasEntry(file,"test/" + libJarFile.getName())).isTrue();
  assertThat(getManifest(file).getMainAttributes().getValue("Spring-Boot-Lib")).isEqualTo("test-lib/");
  assertThat(getManifest(file).getMainAttributes().getValue("Main-Class")).isEqualTo("testLauncher");
}
