@Test public void allEntriesUseUnixPlatformAndUtf8NameEncoding() throws IOException {
  this.testJarFile.addClass("A.class",ClassWithMainMethod.class);
  File source=this.testJarFile.getFile();
  File dest=this.temporaryFolder.newFile("dest.jar");
  Repackager repackager=new Repackager(source);
  repackager.repackage(dest,NO_LIBRARIES);
  try (ZipFile zip=new ZipFile(dest)){
    Enumeration<ZipArchiveEntry> entries=zip.getEntries();
    while (entries.hasMoreElements()) {
      ZipArchiveEntry entry=entries.nextElement();
      assertThat(entry.getPlatform()).isEqualTo(ZipArchiveEntry.PLATFORM_UNIX);
      assertThat(entry.getGeneralPurposeBit().usesUTF8ForNames()).isTrue();
    }
  }
 }
