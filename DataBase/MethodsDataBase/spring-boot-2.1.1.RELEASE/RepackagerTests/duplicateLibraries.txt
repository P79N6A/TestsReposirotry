@Test public void duplicateLibraries() throws Exception {
  TestJarFile libJar=new TestJarFile(this.temporaryFolder);
  libJar.addClass("a/b/C.class",ClassWithoutMainMethod.class);
  File libJarFile=libJar.getFile();
  this.testJarFile.addClass("a/b/C.class",ClassWithMainMethod.class);
  File file=this.testJarFile.getFile();
  Repackager repackager=new Repackager(file);
  assertThatIllegalStateException().isThrownBy(() -> repackager.repackage((callback) -> {
    callback.library(new Library(libJarFile,LibraryScope.COMPILE,false));
    callback.library(new Library(libJarFile,LibraryScope.COMPILE,false));
  }
)).withMessageContaining("Duplicate library");
}
