@Test public void preventsNonZeroExitCodeWhenAllOtherThreadsAreDaemonThreads(){
  try {
    SilentExitExceptionHandler.exitCurrentThread();
  }
 catch (  Exception ex) {
    TestSilentExitExceptionHandler silentExitExceptionHandler=new TestSilentExitExceptionHandler();
    silentExitExceptionHandler.uncaughtException(Thread.currentThread(),ex);
    try {
      assertThat(silentExitExceptionHandler.nonZeroExitCodePrevented).isTrue();
    }
  finally {
      silentExitExceptionHandler.cleanUp();
    }
  }
}
