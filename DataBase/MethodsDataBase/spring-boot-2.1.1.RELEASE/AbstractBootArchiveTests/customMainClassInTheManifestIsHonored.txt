@Test public void customMainClassInTheManifestIsHonored() throws IOException {
  this.task.setMainClassName("com.example.Main");
  this.task.getManifest().getAttributes().put("Main-Class","com.example.CustomLauncher");
  this.task.execute();
  assertThat(this.task.getArchivePath()).exists();
  try (JarFile jarFile=new JarFile(this.task.getArchivePath())){
    assertThat(jarFile.getManifest().getMainAttributes().getValue("Main-Class")).isEqualTo("com.example.CustomLauncher");
    assertThat(jarFile.getManifest().getMainAttributes().getValue("Start-Class")).isEqualTo("com.example.Main");
    assertThat(jarFile.getEntry("org/springframework/boot/loader/LaunchedURLClassLoader.class")).isNull();
  }
 }
