@Test public void customStartClassInTheManifestIsHonored() throws IOException {
  this.task.setMainClassName("com.example.Main");
  this.task.getManifest().getAttributes().put("Start-Class","com.example.CustomMain");
  this.task.execute();
  assertThat(this.task.getArchivePath()).exists();
  try (JarFile jarFile=new JarFile(this.task.getArchivePath())){
    assertThat(jarFile.getManifest().getMainAttributes().getValue("Main-Class")).isEqualTo(this.launcherClass);
    assertThat(jarFile.getManifest().getMainAttributes().getValue("Start-Class")).isEqualTo("com.example.CustomMain");
  }
 }
