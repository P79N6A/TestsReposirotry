@Test public void grapeRootConfiguresLocalRepositoryLocation(){
  given(this.repositorySystem.newLocalRepositoryManager(eq(this.session),any(LocalRepository.class))).willAnswer(new LocalRepositoryManagerAnswer());
  System.setProperty("grape.root","foo");
  try {
    new GrapeRootRepositorySystemSessionAutoConfiguration().apply(this.session,this.repositorySystem);
  }
  finally {
    System.clearProperty("grape.root");
  }
  verify(this.repositorySystem,times(1)).newLocalRepositoryManager(eq(this.session),any(LocalRepository.class));
  assertThat(this.session.getLocalRepository()).isNotNull();
  assertThat(this.session.getLocalRepository().getBasedir().getAbsolutePath()).endsWith(File.separatorChar + "foo" + File.separatorChar+ "repository");
}
