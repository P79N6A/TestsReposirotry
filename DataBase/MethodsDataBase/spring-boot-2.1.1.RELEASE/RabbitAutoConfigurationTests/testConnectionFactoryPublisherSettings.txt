@Test public void testConnectionFactoryPublisherSettings(){
  this.contextRunner.withUserConfiguration(TestConfiguration.class).withPropertyValues("spring.rabbitmq.publisher-confirms=true","spring.rabbitmq.publisher-returns=true").run((context) -> {
    CachingConnectionFactory connectionFactory=context.getBean(CachingConnectionFactory.class);
    RabbitTemplate rabbitTemplate=context.getBean(RabbitTemplate.class);
    assertThat(connectionFactory.isPublisherConfirms()).isTrue();
    assertThat(connectionFactory.isPublisherReturns()).isTrue();
    assertThat(getMandatory(rabbitTemplate)).isTrue();
  }
);
}
