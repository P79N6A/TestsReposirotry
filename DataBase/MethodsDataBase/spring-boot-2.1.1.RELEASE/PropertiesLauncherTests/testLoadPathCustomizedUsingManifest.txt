@SuppressWarnings("unchecked") @Test public void testLoadPathCustomizedUsingManifest() throws Exception {
  System.setProperty("loader.home",this.temporaryFolder.getRoot().getAbsolutePath());
  Manifest manifest=new Manifest();
  manifest.getMainAttributes().put(Attributes.Name.MANIFEST_VERSION,"1.0");
  manifest.getMainAttributes().putValue("Loader-Path","/foo.jar, /bar");
  File manifestFile=new File(this.temporaryFolder.getRoot(),"META-INF/MANIFEST.MF");
  manifestFile.getParentFile().mkdirs();
  manifest.write(new FileOutputStream(manifestFile));
  PropertiesLauncher launcher=new PropertiesLauncher();
  assertThat((List<String>)ReflectionTestUtils.getField(launcher,"paths")).containsExactly("/foo.jar","/bar/");
}
