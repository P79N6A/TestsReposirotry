@Test public void testUsingJpa(){
  this.contextRunner.withUserConfiguration(TestConfiguration.class,EmbeddedDataSourceConfiguration.class,HibernateJpaAutoConfiguration.class).run((context) -> {
    PlatformTransactionManager transactionManager=context.getBean(PlatformTransactionManager.class);
    assertThat(transactionManager.toString().contains("JpaTransactionManager")).isTrue();
    assertThat(context).hasSingleBean(EntityManagerFactory.class);
    assertThat(context.getBean(JobRepository.class).getLastJobExecution("job",new JobParameters())).isNull();
  }
);
}
