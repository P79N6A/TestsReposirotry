@Test @SuppressWarnings("unchecked") public void shouldNotApplySpringSecurityConfigurerWhenSpringSecurityNotOnClassPath(){
  FilteredClassLoader classLoader=new FilteredClassLoader(SecurityMockServerConfigurers.class);
  this.contextRunner.withUserConfiguration(BaseConfiguration.class).withClassLoader(classLoader).run((context) -> {
    WebTestClient webTestClient=context.getBean(WebTestClient.class);
    WebTestClient.Builder builder=(WebTestClient.Builder)ReflectionTestUtils.getField(webTestClient,"builder");
    WebHttpHandlerBuilder httpHandlerBuilder=(WebHttpHandlerBuilder)ReflectionTestUtils.getField(builder,"httpHandlerBuilder");
    List<WebFilter> filters=(List<WebFilter>)ReflectionTestUtils.getField(httpHandlerBuilder,"filters");
    assertThat(filters).isEmpty();
  }
);
}
