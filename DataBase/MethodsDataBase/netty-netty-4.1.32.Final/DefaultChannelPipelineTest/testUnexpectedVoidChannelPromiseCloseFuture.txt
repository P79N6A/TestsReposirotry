@Test(expected=IllegalArgumentException.class) public void testUnexpectedVoidChannelPromiseCloseFuture() throws Exception {
  ChannelPipeline pipeline=new LocalChannel().pipeline();
  group.register(pipeline.channel()).sync();
  try {
    ChannelPromise promise=(ChannelPromise)pipeline.channel().closeFuture();
    pipeline.close(promise);
  }
  finally {
    pipeline.close();
  }
}
