@Test public void testAddReplaceHandlerNotRegistered() throws Throwable {
  final AtomicReference<Throwable> error=new AtomicReference<Throwable>();
  ChannelHandler handler=new ErrorChannelHandler(error);
  ChannelPipeline pipeline=new LocalChannel().pipeline();
  pipeline.addFirst(handler);
  pipeline.replace(handler,null,new ErrorChannelHandler(error));
  Throwable cause=error.get();
  if (cause != null) {
    throw cause;
  }
}
