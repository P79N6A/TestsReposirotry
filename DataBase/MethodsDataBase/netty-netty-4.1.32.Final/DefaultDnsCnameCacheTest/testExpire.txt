@Test public void testExpire() throws Throwable {
  EventLoopGroup group=new DefaultEventLoopGroup(1);
  try {
    EventLoop loop=group.next();
    final DefaultDnsCnameCache cache=new DefaultDnsCnameCache();
    cache.cache("netty.io","mapping.netty.io",1,loop);
    Throwable error=loop.schedule(new Callable<Throwable>(){
      @Override public Throwable call(){
        try {
          assertNull(cache.get("netty.io"));
          return null;
        }
 catch (        Throwable cause) {
          return cause;
        }
      }
    }
,1,TimeUnit.SECONDS).get();
    if (error != null) {
      throw error;
    }
  }
  finally {
    group.shutdownGracefully();
  }
}
