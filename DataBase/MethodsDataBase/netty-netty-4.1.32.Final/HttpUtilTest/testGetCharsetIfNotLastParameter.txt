@Test public void testGetCharsetIfNotLastParameter(){
  String NORMAL_CONTENT_TYPE_WITH_PARAMETERS="application/soap-xml; charset=utf-8; " + "action=\"http://www.soap-service.by/foo/add\"";
  HttpMessage message=new DefaultHttpRequest(HttpVersion.HTTP_1_1,HttpMethod.POST,"http://localhost:7788/foo");
  message.headers().set(HttpHeaderNames.CONTENT_TYPE,NORMAL_CONTENT_TYPE_WITH_PARAMETERS);
  assertEquals(CharsetUtil.UTF_8,HttpUtil.getCharset(message));
  assertEquals(CharsetUtil.UTF_8,HttpUtil.getCharset(NORMAL_CONTENT_TYPE_WITH_PARAMETERS));
  assertEquals("utf-8",HttpUtil.getCharsetAsSequence(message));
  assertEquals("utf-8",HttpUtil.getCharsetAsSequence(NORMAL_CONTENT_TYPE_WITH_PARAMETERS));
}
