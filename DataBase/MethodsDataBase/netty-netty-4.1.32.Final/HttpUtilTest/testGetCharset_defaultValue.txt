@Test public void testGetCharset_defaultValue(){
  final String SIMPLE_CONTENT_TYPE="text/html";
  final String CONTENT_TYPE_WITH_INCORRECT_CHARSET="text/html; charset=UTFFF";
  HttpMessage message=new DefaultHttpResponse(HttpVersion.HTTP_1_1,HttpResponseStatus.OK);
  message.headers().set(HttpHeaderNames.CONTENT_TYPE,SIMPLE_CONTENT_TYPE);
  assertEquals(CharsetUtil.ISO_8859_1,HttpUtil.getCharset(message));
  assertEquals(CharsetUtil.ISO_8859_1,HttpUtil.getCharset(SIMPLE_CONTENT_TYPE));
  message.headers().set(HttpHeaderNames.CONTENT_TYPE,SIMPLE_CONTENT_TYPE);
  assertEquals(CharsetUtil.UTF_8,HttpUtil.getCharset(message,StandardCharsets.UTF_8));
  assertEquals(CharsetUtil.UTF_8,HttpUtil.getCharset(SIMPLE_CONTENT_TYPE,StandardCharsets.UTF_8));
  message.headers().set(HttpHeaderNames.CONTENT_TYPE,CONTENT_TYPE_WITH_INCORRECT_CHARSET);
  assertEquals(CharsetUtil.ISO_8859_1,HttpUtil.getCharset(message));
  assertEquals(CharsetUtil.ISO_8859_1,HttpUtil.getCharset(CONTENT_TYPE_WITH_INCORRECT_CHARSET));
  message.headers().set(HttpHeaderNames.CONTENT_TYPE,CONTENT_TYPE_WITH_INCORRECT_CHARSET);
  assertEquals(CharsetUtil.UTF_8,HttpUtil.getCharset(message,StandardCharsets.UTF_8));
  assertEquals(CharsetUtil.UTF_8,HttpUtil.getCharset(CONTENT_TYPE_WITH_INCORRECT_CHARSET,StandardCharsets.UTF_8));
}
