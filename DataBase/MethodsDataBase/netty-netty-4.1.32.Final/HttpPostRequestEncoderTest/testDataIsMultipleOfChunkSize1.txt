@Test public void testDataIsMultipleOfChunkSize1() throws Exception {
  DefaultHttpDataFactory factory=new DefaultHttpDataFactory(DefaultHttpDataFactory.MINSIZE);
  DefaultFullHttpRequest request=new DefaultFullHttpRequest(HttpVersion.HTTP_1_1,HttpMethod.POST,"http://localhost");
  HttpPostRequestEncoder encoder=new HttpPostRequestEncoder(factory,request,true,HttpConstants.DEFAULT_CHARSET,HttpPostRequestEncoder.EncoderMode.RFC1738);
  MemoryFileUpload first=new MemoryFileUpload("resources","","application/json",null,CharsetUtil.UTF_8,-1);
  first.setMaxSize(-1);
  first.setContent(new ByteArrayInputStream(new byte[7955]));
  encoder.addBodyHttpData(first);
  MemoryFileUpload second=new MemoryFileUpload("resources2","","application/json",null,CharsetUtil.UTF_8,-1);
  second.setMaxSize(-1);
  second.setContent(new ByteArrayInputStream(new byte[7928]));
  encoder.addBodyHttpData(second);
  assertNotNull(encoder.finalizeRequest());
  checkNextChunkSize(encoder,8080);
  checkNextChunkSize(encoder,8080);
  HttpContent httpContent=encoder.readChunk((ByteBufAllocator)null);
  assertTrue("Expected LastHttpContent is not received",httpContent instanceof LastHttpContent);
  httpContent.release();
  assertTrue("Expected end of input is not receive",encoder.isEndOfInput());
}
