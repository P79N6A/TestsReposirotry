@Test public void differentConfigsPerOrigin(){
  String host1="http://host1:80";
  String host2="http://host2";
  CorsConfig rule1=forOrigin(host1).allowedRequestMethods(HttpMethod.GET).build();
  CorsConfig rule2=forOrigin(host2).allowedRequestMethods(HttpMethod.GET,HttpMethod.POST).allowCredentials().build();
  List<CorsConfig> corsConfigs=Arrays.asList(rule1,rule2);
  final HttpResponse preFlightHost1=preflightRequest(corsConfigs,host1,"",false);
  assertThat(preFlightHost1.headers().get(ACCESS_CONTROL_ALLOW_METHODS),is("GET"));
  assertThat(preFlightHost1.headers().getAsString(ACCESS_CONTROL_ALLOW_CREDENTIALS),is(nullValue()));
  final HttpResponse preFlightHost2=preflightRequest(corsConfigs,host2,"",false);
  assertValues(preFlightHost2,ACCESS_CONTROL_ALLOW_METHODS.toString(),"GET","POST");
  assertThat(preFlightHost2.headers().getAsString(ACCESS_CONTROL_ALLOW_CREDENTIALS),IsEqual.equalTo("true"));
}
