@Test public void specificConfigPrecedenceOverGeneric(){
  String host1="http://host1";
  String host2="http://host2";
  CorsConfig forHost1=forOrigin(host1).allowedRequestMethods(HttpMethod.GET).maxAge(3600L).build();
  CorsConfig allowAll=forAnyOrigin().allowedRequestMethods(HttpMethod.POST,HttpMethod.GET,HttpMethod.OPTIONS).maxAge(1800).build();
  List<CorsConfig> rules=Arrays.asList(forHost1,allowAll);
  final HttpResponse host1Response=preflightRequest(rules,host1,"",false);
  assertThat(host1Response.headers().get(ACCESS_CONTROL_ALLOW_METHODS),is("GET"));
  assertThat(host1Response.headers().getAsString(ACCESS_CONTROL_MAX_AGE),equalTo("3600"));
  final HttpResponse host2Response=preflightRequest(rules,host2,"",false);
  assertValues(host2Response,ACCESS_CONTROL_ALLOW_METHODS.toString(),"POST","GET","OPTIONS");
  assertThat(host2Response.headers().getAsString(ACCESS_CONTROL_ALLOW_ORIGIN),equalTo("*"));
  assertThat(host2Response.headers().getAsString(ACCESS_CONTROL_MAX_AGE),equalTo("1800"));
}
