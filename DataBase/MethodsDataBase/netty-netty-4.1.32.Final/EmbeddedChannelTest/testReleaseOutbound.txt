@Test public void testReleaseOutbound(){
  ByteBuf in=Unpooled.buffer();
  ByteBuf out=Unpooled.buffer();
  try {
    EmbeddedChannel channel=new EmbeddedChannel();
    assertTrue(channel.writeInbound(in));
    assertEquals(1,in.refCnt());
    assertTrue(channel.writeOutbound(out));
    assertEquals(1,out.refCnt());
    assertTrue(channel.releaseOutbound());
    assertEquals(1,in.refCnt());
    assertEquals(0,out.refCnt());
    assertTrue(channel.finish());
    assertNull(channel.readOutbound());
    ByteBuf buffer=channel.readInbound();
    assertSame(in,buffer);
    buffer.release();
    assertNull(channel.readInbound());
  }
  finally {
    release(in,out);
  }
}
