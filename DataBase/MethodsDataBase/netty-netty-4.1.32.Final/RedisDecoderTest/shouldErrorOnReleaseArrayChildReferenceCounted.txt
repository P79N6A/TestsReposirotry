@Test(expected=IllegalReferenceCountException.class) public void shouldErrorOnReleaseArrayChildReferenceCounted() throws Exception {
  ByteBuf buf=Unpooled.buffer();
  buf.writeBytes(byteBufOf("*2\r\n"));
  buf.writeBytes(byteBufOf("*3\r\n:1\r\n:2\r\n:3\r\n"));
  buf.writeBytes(byteBufOf("$3\r\nFoo\r\n"));
  assertTrue(channel.writeInbound(buf));
  ArrayRedisMessage msg=channel.readInbound();
  List<RedisMessage> children=msg.children();
  ReferenceCountUtil.release(msg);
  ReferenceCountUtil.release(children.get(1));
}
