@Test public void testFailsOnMissingResponse(){
  HttpClientCodec codec=new HttpClientCodec(4096,8192,8192,true);
  EmbeddedChannel ch=new EmbeddedChannel(codec);
  assertTrue(ch.writeOutbound(new DefaultFullHttpRequest(HttpVersion.HTTP_1_1,HttpMethod.GET,"http://localhost/")));
  ByteBuf buffer=ch.readOutbound();
  assertNotNull(buffer);
  buffer.release();
  try {
    ch.finish();
    fail();
  }
 catch (  CodecException e) {
    assertTrue(e instanceof PrematureChannelClosureException);
  }
}
