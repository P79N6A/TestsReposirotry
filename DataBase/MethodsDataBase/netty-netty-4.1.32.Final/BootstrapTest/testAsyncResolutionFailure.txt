@Test public void testAsyncResolutionFailure() throws Exception {
  final Bootstrap bootstrapA=new Bootstrap();
  bootstrapA.group(groupA);
  bootstrapA.channel(LocalChannel.class);
  bootstrapA.resolver(new TestAddressResolverGroup(false));
  bootstrapA.handler(dummyHandler);
  final ServerBootstrap bootstrapB=new ServerBootstrap();
  bootstrapB.group(groupB);
  bootstrapB.channel(LocalServerChannel.class);
  bootstrapB.childHandler(dummyHandler);
  SocketAddress localAddress=bootstrapB.bind(LocalAddress.ANY).sync().channel().localAddress();
  ChannelFuture connectFuture=bootstrapA.connect(localAddress);
  assertThat(connectFuture.await(10000),is(true));
  assertThat(connectFuture.cause(),is(instanceOf(UnknownHostException.class)));
  assertThat(connectFuture.channel().isOpen(),is(false));
}
