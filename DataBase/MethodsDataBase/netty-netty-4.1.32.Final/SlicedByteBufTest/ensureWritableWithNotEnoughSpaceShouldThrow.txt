@Test(expected=IndexOutOfBoundsException.class) public void ensureWritableWithNotEnoughSpaceShouldThrow(){
  ByteBuf slice=newBuffer(10);
  ByteBuf unwrapped=slice.unwrap();
  unwrapped.writerIndex(unwrapped.writerIndex() + 5);
  try {
    slice.ensureWritable(1);
    fail();
  }
  finally {
    slice.release();
  }
}
