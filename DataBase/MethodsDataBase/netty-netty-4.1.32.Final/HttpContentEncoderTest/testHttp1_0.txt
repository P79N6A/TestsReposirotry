@Test public void testHttp1_0() throws Exception {
  EmbeddedChannel ch=new EmbeddedChannel(new TestEncoder());
  FullHttpRequest req=new DefaultFullHttpRequest(HttpVersion.HTTP_1_0,HttpMethod.GET,"/");
  assertTrue(ch.writeInbound(req));
  HttpResponse res=new DefaultHttpResponse(HttpVersion.HTTP_1_0,HttpResponseStatus.OK);
  res.headers().set(HttpHeaderNames.CONTENT_LENGTH,HttpHeaderValues.ZERO);
  assertTrue(ch.writeOutbound(res));
  assertTrue(ch.writeOutbound(LastHttpContent.EMPTY_LAST_CONTENT));
  assertTrue(ch.finish());
  FullHttpRequest request=ch.readInbound();
  assertTrue(request.release());
  assertNull(ch.readInbound());
  HttpResponse response=ch.readOutbound();
  assertSame(res,response);
  LastHttpContent content=ch.readOutbound();
  assertSame(LastHttpContent.EMPTY_LAST_CONTENT,content);
  content.release();
  assertNull(ch.readOutbound());
}
