@Test public void testForEachByteDesc(){
  buffer.clear();
  for (int i=0; i < CAPACITY; i++) {
    buffer.writeByte(i + 1);
  }
  final AtomicInteger lastIndex=new AtomicInteger();
  assertThat(buffer.forEachByteDesc(CAPACITY / 4,CAPACITY * 2 / 4,new ByteProcessor(){
    int i=CAPACITY * 3 / 4 - 1;
    @Override public boolean process(    byte value) throws Exception {
      assertThat(value,is((byte)(i + 1)));
      lastIndex.set(i);
      i--;
      return true;
    }
  }
),is(-1));
  assertThat(lastIndex.get(),is(CAPACITY / 4));
}
