/** 
 * Provide content into HTTP data with input stream.
 * @throws Exception In case of any exception.
 */
@Test public void testSetContentFromStream() throws Exception {
  Random random=new SecureRandom();
  for (int i=0; i < 20; i++) {
    int size=random.nextInt(Short.MAX_VALUE);
    byte[] bytes=new byte[size];
    random.nextBytes(bytes);
    TestHttpData data=new TestHttpData("name",UTF_8,0);
    data.setContent(new ByteArrayInputStream(bytes));
    ByteBuf buffer=data.getByteBuf();
    assertEquals(0,buffer.readerIndex());
    assertEquals(bytes.length,buffer.writerIndex());
    assertArrayEquals(bytes,Arrays.copyOf(buffer.array(),bytes.length));
  }
}
