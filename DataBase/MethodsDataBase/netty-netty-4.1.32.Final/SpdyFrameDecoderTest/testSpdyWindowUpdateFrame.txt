@Test public void testSpdyWindowUpdateFrame() throws Exception {
  short type=9;
  byte flags=0;
  int length=8;
  int streamId=RANDOM.nextInt() & 0x7FFFFFFF;
  int deltaWindowSize=RANDOM.nextInt() & 0x7FFFFFFF | 0x01;
  ByteBuf buf=Unpooled.buffer(SPDY_HEADER_SIZE + length);
  encodeControlFrameHeader(buf,type,flags,length);
  buf.writeInt(streamId);
  buf.writeInt(deltaWindowSize);
  decoder.decode(buf);
  verify(delegate).readWindowUpdateFrame(streamId,deltaWindowSize);
  assertFalse(buf.isReadable());
}
