@Test public void testSpdyDataFrame() throws Exception {
  int streamId=RANDOM.nextInt() & 0x7FFFFFFF | 0x01;
  byte flags=0;
  int length=1024;
  ByteBuf buf=Unpooled.buffer(SPDY_HEADER_SIZE + length);
  encodeDataFrameHeader(buf,streamId,flags,length);
  for (int i=0; i < 256; i++) {
    buf.writeInt(RANDOM.nextInt());
  }
  decoder.decode(buf);
  verify(delegate).readDataFrame(streamId,false,buf.slice(SPDY_HEADER_SIZE,length));
  assertFalse(buf.isReadable());
  buf.release();
}
