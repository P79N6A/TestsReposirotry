@Test public void testDuplicateOfDuplicate() throws Exception {
  ByteBuf buf=Unpooled.buffer(8).setIndex(1,7);
  ByteBuf dup=buf.duplicate().setIndex(2,6);
  ByteBuf dup2=dup.duplicate();
  assertThat(dup2,not(sameInstance(dup)));
  assertThat(dup2,instanceOf(DuplicatedByteBuf.class));
  assertThat(dup2.unwrap(),sameInstance(buf));
  assertThat(dup2.readerIndex(),is(dup.readerIndex()));
  assertThat(dup2.writerIndex(),is(dup.writerIndex()));
  assertThat(dup2.capacity(),is(dup.capacity()));
  assertThat(dup2.maxCapacity(),is(dup.maxCapacity()));
}
