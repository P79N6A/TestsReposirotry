@Test public void testDuplicateOfReadOnly() throws Exception {
  ByteBuf buf=Unpooled.buffer(8).setIndex(1,7);
  ByteBuf ro=Unpooled.unmodifiableBuffer(buf).setIndex(2,6);
  ByteBuf dup=ro.duplicate();
  assertThat(dup,instanceOf(ReadOnlyByteBuf.class));
  assertThat(dup.unwrap(),sameInstance(buf));
  assertThat(dup.readerIndex(),is(ro.readerIndex()));
  assertThat(dup.writerIndex(),is(ro.writerIndex()));
  assertThat(dup.capacity(),is(ro.capacity()));
  assertThat(dup.maxCapacity(),is(ro.maxCapacity()));
}
