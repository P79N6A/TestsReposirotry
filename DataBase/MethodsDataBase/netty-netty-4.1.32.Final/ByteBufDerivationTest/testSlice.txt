@Test public void testSlice() throws Exception {
  ByteBuf buf=Unpooled.buffer(8).setIndex(1,7);
  ByteBuf slice=buf.slice(1,7);
  assertThat(slice,instanceOf(AbstractUnpooledSlicedByteBuf.class));
  assertThat(slice.unwrap(),sameInstance(buf));
  assertThat(slice.readerIndex(),is(0));
  assertThat(slice.writerIndex(),is(7));
  assertThat(slice.capacity(),is(7));
  assertThat(slice.maxCapacity(),is(7));
  slice.setIndex(1,6);
  assertThat(buf.readerIndex(),is(1));
  assertThat(buf.writerIndex(),is(7));
}
