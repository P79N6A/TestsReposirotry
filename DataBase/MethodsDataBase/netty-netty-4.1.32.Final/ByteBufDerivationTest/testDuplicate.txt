@Test public void testDuplicate() throws Exception {
  ByteBuf buf=Unpooled.buffer(8).setIndex(1,7);
  ByteBuf dup=buf.duplicate();
  assertThat(dup,instanceOf(DuplicatedByteBuf.class));
  assertThat(dup.unwrap(),sameInstance(buf));
  assertThat(dup.readerIndex(),is(buf.readerIndex()));
  assertThat(dup.writerIndex(),is(buf.writerIndex()));
  assertThat(dup.capacity(),is(buf.capacity()));
  assertThat(dup.maxCapacity(),is(buf.maxCapacity()));
  dup.setIndex(2,6);
  assertThat(buf.readerIndex(),is(1));
  assertThat(buf.writerIndex(),is(7));
}
