@Test public void halfWindowRemainingShouldUpdateAllWindows() throws Http2Exception {
  int dataSize=(int)(DEFAULT_WINDOW_SIZE * DEFAULT_WINDOW_UPDATE_RATIO) + 1;
  int initialWindowSize=DEFAULT_WINDOW_SIZE;
  int windowDelta=getWindowDelta(initialWindowSize,initialWindowSize,dataSize);
  receiveFlowControlledFrame(STREAM_ID,dataSize,0,false);
  assertTrue(consumeBytes(STREAM_ID,dataSize));
  verifyWindowUpdateSent(CONNECTION_STREAM_ID,windowDelta);
  verifyWindowUpdateSent(STREAM_ID,windowDelta);
}
