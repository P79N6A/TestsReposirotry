@Test public void testSerialization() throws IOException, ClassNotFoundException {
  ChannelId normalInstance=EmbeddedChannelId.INSTANCE;
  ByteBuf buf=Unpooled.buffer();
  ObjectOutputStream outStream=new ObjectOutputStream(new ByteBufOutputStream(buf));
  try {
    outStream.writeObject(normalInstance);
  }
  finally {
    outStream.close();
  }
  ObjectInputStream inStream=new ObjectInputStream(new ByteBufInputStream(buf,true));
  final ChannelId deserializedInstance;
  try {
    deserializedInstance=(ChannelId)inStream.readObject();
  }
  finally {
    inStream.close();
  }
  Assert.assertEquals(normalInstance,deserializedInstance);
  Assert.assertEquals(normalInstance.hashCode(),deserializedInstance.hashCode());
  Assert.assertEquals(0,normalInstance.compareTo(deserializedInstance));
}
