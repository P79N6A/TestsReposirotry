@Test public void propagateSettings() throws Exception {
  boostrapEnv(1,1,2);
  final Http2Settings settings=new Http2Settings().pushEnabled(true);
  runInChannel(clientChannel,new Http2Runnable(){
    @Override public void run(){
      clientHandler.encoder().writeSettings(ctxClient(),settings,newPromiseClient());
      clientChannel.flush();
    }
  }
);
  assertTrue(settingsLatch.await(5,SECONDS));
  ArgumentCaptor<Http2Settings> settingsCaptor=ArgumentCaptor.forClass(Http2Settings.class);
  verify(settingsListener,times(2)).messageReceived(settingsCaptor.capture());
  assertEquals(settings,settingsCaptor.getValue());
}
