@Test public void closingStreamWithChildrenDoesNotCauseConcurrentModification() throws Http2Exception {
  final Http2Stream streamA=connection.local().createStream(1,false);
  final int numStreams=INITIAL_CHILDREN_MAP_SIZE - 1;
  for (int i=0, streamId=3; i < numStreams; ++i, streamId+=INITIAL_CHILDREN_MAP_SIZE) {
    final Http2Stream stream=connection.local().createStream(streamId,false);
    setPriority(stream.id(),streamA.id(),DEFAULT_PRIORITY_WEIGHT,false);
  }
  assertEquals(INITIAL_CHILDREN_MAP_SIZE,connection.numActiveStreams());
  streamA.close();
  assertEquals(numStreams,connection.numActiveStreams());
}
