@Test(expected=Http2Exception.class) public void clientUpgradeWithoutUpgradeHandlerThrowsHttp2Exception() throws Http2Exception {
  Http2MultiplexCodec codec=Http2MultiplexCodecBuilder.forClient(new NoopHandler()).build();
  EmbeddedChannel ch=new EmbeddedChannel(codec);
  try {
    codec.onHttpClientUpgrade();
  }
  finally {
    assertTrue(ch.finishAndReleaseAll());
  }
}
