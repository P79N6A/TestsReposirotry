/** 
 * Test-case for https://github.com/netty/netty/issues/1656
 */
@Test(expected=EncoderException.class) public void testException(){
  EmbeddedChannel channel=new EmbeddedChannel(new MessageToMessageEncoder<Object>(){
    @Override protected void encode(    ChannelHandlerContext ctx,    Object msg,    List<Object> out) throws Exception {
      throw new Exception();
    }
  }
);
  channel.writeOutbound(new Object());
}
