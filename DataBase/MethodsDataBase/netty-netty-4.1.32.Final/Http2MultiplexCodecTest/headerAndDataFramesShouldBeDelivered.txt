@Test public void headerAndDataFramesShouldBeDelivered(){
  LastInboundHandler inboundHandler=new LastInboundHandler();
  childChannelInitializer.handler=inboundHandler;
  Http2HeadersFrame headersFrame=new DefaultHttp2HeadersFrame(request).stream(inboundStream);
  Http2DataFrame dataFrame1=new DefaultHttp2DataFrame(bb("hello")).stream(inboundStream);
  Http2DataFrame dataFrame2=new DefaultHttp2DataFrame(bb("world")).stream(inboundStream);
  assertFalse(inboundHandler.isChannelActive());
  inboundStream.state=Http2Stream.State.OPEN;
  codec.onHttp2StreamStateChanged(inboundStream);
  codec.onHttp2Frame(headersFrame);
  assertTrue(inboundHandler.isChannelActive());
  codec.onHttp2Frame(dataFrame1);
  codec.onHttp2Frame(dataFrame2);
  assertEquals(headersFrame,inboundHandler.readInbound());
  assertEquals(dataFrame1,inboundHandler.readInbound());
  assertEquals(dataFrame2,inboundHandler.readInbound());
  assertNull(inboundHandler.readInbound());
  dataFrame1.release();
  dataFrame2.release();
}
