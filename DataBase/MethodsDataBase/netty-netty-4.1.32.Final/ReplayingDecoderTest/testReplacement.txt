@Test public void testReplacement() throws Exception {
  EmbeddedChannel ch=new EmbeddedChannel(new BloatedLineDecoder());
  ch.writeInbound(Unpooled.wrappedBuffer(new byte[]{'A','B'}));
  assertNull(ch.readInbound());
  ch.writeInbound(Unpooled.wrappedBuffer(new byte[]{'C','\n'}));
  ByteBuf buf=Unpooled.wrappedBuffer(new byte[]{'A','B','C'});
  ByteBuf buf2=ch.readInbound();
  assertEquals(buf,buf2);
  buf.release();
  buf2.release();
  ch.finish();
  assertNull(ch.readInbound());
}
