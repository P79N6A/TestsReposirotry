@Test(timeout=10000) public void testRemoveOnEventLoopIteration() throws Exception {
  CountingRunnable onIteration1=new CountingRunnable();
  loopC.executeAfterEventLoopIteration(onIteration1);
  CountingRunnable onIteration2=new CountingRunnable();
  loopC.executeAfterEventLoopIteration(onIteration2);
  loopC.removeAfterEventLoopIterationTask(onIteration1);
  CountingRunnable noopTask=new CountingRunnable();
  loopC.submit(noopTask).sync();
  loopC.iterationEndSignal.take();
  MatcherAssert.assertThat("Unexpected invocation count for regular task.",noopTask.getInvocationCount(),is(1));
  MatcherAssert.assertThat("Unexpected invocation count for on every eventloop iteration task.",onIteration2.getInvocationCount(),is(1));
  MatcherAssert.assertThat("Unexpected invocation count for on every eventloop iteration task.",onIteration1.getInvocationCount(),is(0));
}
