@Test public void testTruncatedHeaderName() throws Exception {
  ByteBuf headerBlock=Unpooled.buffer(maxHeaderSize + 18);
  headerBlock.writeInt(1);
  headerBlock.writeInt(maxHeaderSize + 1);
  for (int i=0; i < maxHeaderSize + 1; i++) {
    headerBlock.writeByte('a');
  }
  headerBlock.writeInt(5);
  headerBlock.writeBytes(valueBytes);
  decoder.decode(ByteBufAllocator.DEFAULT,headerBlock,frame);
  decoder.endHeaderBlock(frame);
  assertFalse(headerBlock.isReadable());
  assertTrue(frame.isTruncated());
  assertFalse(frame.isInvalid());
  assertEquals(0,frame.headers().names().size());
  headerBlock.release();
}
