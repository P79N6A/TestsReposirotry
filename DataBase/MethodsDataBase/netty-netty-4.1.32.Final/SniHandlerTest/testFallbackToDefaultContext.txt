@Test public void testFallbackToDefaultContext() throws Exception {
  SslContext nettyContext=makeSslContext(provider,false);
  SslContext leanContext=makeSslContext(provider,false);
  SslContext leanContext2=makeSslContext(provider,false);
  try {
    DomainNameMapping<SslContext> mapping=new DomainNameMappingBuilder<SslContext>(nettyContext).add("*.netty.io",nettyContext).add("*.LEANCLOUD.CN",leanContext).add("chat4.leancloud.cn",leanContext2).build();
    SniHandler handler=new SniHandler(mapping);
    EmbeddedChannel ch=new EmbeddedChannel(handler);
    byte[] message={22,3,1,0,0};
    try {
      ch.writeInbound(Unpooled.wrappedBuffer(message));
    }
 catch (    Exception e) {
    }
    ch.close();
    ByteBuf buf=ch.readOutbound();
    if (buf != null) {
      assertFalse(buf.isReadable());
      buf.release();
    }
    assertThat(ch.finish(),is(false));
    assertThat(handler.hostname(),nullValue());
    assertThat(handler.sslContext(),is(nettyContext));
  }
  finally {
    releaseAll(leanContext,leanContext2,nettyContext);
  }
}
