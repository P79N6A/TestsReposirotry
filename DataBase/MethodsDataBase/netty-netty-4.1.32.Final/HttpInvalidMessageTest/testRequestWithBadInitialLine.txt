@Test public void testRequestWithBadInitialLine() throws Exception {
  EmbeddedChannel ch=new EmbeddedChannel(new HttpRequestDecoder());
  ch.writeInbound(Unpooled.copiedBuffer("GET / HTTP/1.0 with extra\r\n",CharsetUtil.UTF_8));
  HttpRequest req=ch.readInbound();
  DecoderResult dr=req.decoderResult();
  assertFalse(dr.isSuccess());
  assertTrue(dr.isFailure());
  ensureInboundTrafficDiscarded(ch);
}
