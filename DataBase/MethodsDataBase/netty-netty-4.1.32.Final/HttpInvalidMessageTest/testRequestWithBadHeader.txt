@Test public void testRequestWithBadHeader() throws Exception {
  EmbeddedChannel ch=new EmbeddedChannel(new HttpRequestDecoder());
  ch.writeInbound(Unpooled.copiedBuffer("GET /maybe-something HTTP/1.0\r\n",CharsetUtil.UTF_8));
  ch.writeInbound(Unpooled.copiedBuffer("Good_Name: Good Value\r\n",CharsetUtil.UTF_8));
  ch.writeInbound(Unpooled.copiedBuffer("Bad=Name: Bad Value\r\n",CharsetUtil.UTF_8));
  ch.writeInbound(Unpooled.copiedBuffer("\r\n",CharsetUtil.UTF_8));
  HttpRequest req=ch.readInbound();
  DecoderResult dr=req.decoderResult();
  assertFalse(dr.isSuccess());
  assertTrue(dr.isFailure());
  assertEquals("Good Value",req.headers().get(of("Good_Name")));
  assertEquals("/maybe-something",req.uri());
  ensureInboundTrafficDiscarded(ch);
}
