@Test public void testResponseWithBadHeader() throws Exception {
  EmbeddedChannel ch=new EmbeddedChannel(new HttpResponseDecoder());
  ch.writeInbound(Unpooled.copiedBuffer("HTTP/1.0 200 Maybe OK\r\n",CharsetUtil.UTF_8));
  ch.writeInbound(Unpooled.copiedBuffer("Good_Name: Good Value\r\n",CharsetUtil.UTF_8));
  ch.writeInbound(Unpooled.copiedBuffer("Bad=Name: Bad Value\r\n",CharsetUtil.UTF_8));
  ch.writeInbound(Unpooled.copiedBuffer("\r\n",CharsetUtil.UTF_8));
  HttpResponse res=ch.readInbound();
  DecoderResult dr=res.decoderResult();
  assertFalse(dr.isSuccess());
  assertTrue(dr.isFailure());
  assertEquals("Maybe OK",res.status().reasonPhrase());
  assertEquals("Good Value",res.headers().get(of("Good_Name")));
  ensureInboundTrafficDiscarded(ch);
}
