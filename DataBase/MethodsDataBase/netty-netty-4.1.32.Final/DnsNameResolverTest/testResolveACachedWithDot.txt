@Test public void testResolveACachedWithDot(){
  final DnsCache cache=new DefaultDnsCache();
  DnsNameResolver resolver=newResolver(ResolvedAddressTypes.IPV4_ONLY).resolveCache(cache).build();
  try {
    String domain=DOMAINS.iterator().next();
    String domainWithDot=domain + '.';
    resolver.resolve(domain).syncUninterruptibly();
    List<? extends DnsCacheEntry> cached=cache.get(domain,null);
    List<? extends DnsCacheEntry> cached2=cache.get(domainWithDot,null);
    assertEquals(1,cached.size());
    assertSame(cached,cached2);
  }
  finally {
    resolver.close();
  }
}
