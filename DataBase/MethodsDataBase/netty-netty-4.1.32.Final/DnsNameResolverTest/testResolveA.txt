@Test public void testResolveA() throws Exception {
  DnsNameResolver resolver=newResolver(ResolvedAddressTypes.IPV4_ONLY).ttl(Integer.MAX_VALUE,Integer.MAX_VALUE).build();
  try {
    final Map<String,InetAddress> resultA=testResolve0(resolver,EXCLUSIONS_RESOLVE_A,null);
    final Map<String,InetAddress> resultB=testResolve0(resolver,EXCLUSIONS_RESOLVE_A,null);
    assertThat(resultB.size(),is(resultA.size()));
    for (    Entry<String,InetAddress> e : resultA.entrySet()) {
      InetAddress expected=e.getValue();
      InetAddress actual=resultB.get(e.getKey());
      if (!actual.equals(expected)) {
        System.err.println("Cache for " + e.getKey() + ": "+ resolver.resolveAll(e.getKey()).getNow());
      }
      assertThat(actual,is(expected));
    }
  }
  finally {
    resolver.close();
  }
}
