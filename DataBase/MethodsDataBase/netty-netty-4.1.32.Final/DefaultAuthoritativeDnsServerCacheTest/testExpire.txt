@Test public void testExpire() throws Throwable {
  InetSocketAddress resolved1=new InetSocketAddress(InetAddress.getByAddress("ns1",new byte[]{10,0,0,1}),53);
  InetSocketAddress resolved2=new InetSocketAddress(InetAddress.getByAddress("ns2",new byte[]{10,0,0,2}),53);
  EventLoopGroup group=new DefaultEventLoopGroup(1);
  try {
    EventLoop loop=group.next();
    final DefaultAuthoritativeDnsServerCache cache=new DefaultAuthoritativeDnsServerCache();
    cache.cache("netty.io",resolved1,1,loop);
    cache.cache("netty.io",resolved2,10000,loop);
    Throwable error=loop.schedule(new Callable<Throwable>(){
      @Override public Throwable call(){
        try {
          assertNull(cache.get("netty.io"));
          return null;
        }
 catch (        Throwable cause) {
          return cause;
        }
      }
    }
,1,TimeUnit.SECONDS).get();
    if (error != null) {
      throw error;
    }
  }
  finally {
    group.shutdownGracefully();
  }
}
