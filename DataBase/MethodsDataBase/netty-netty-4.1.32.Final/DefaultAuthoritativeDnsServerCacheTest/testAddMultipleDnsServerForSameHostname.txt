@Test public void testAddMultipleDnsServerForSameHostname() throws Exception {
  InetSocketAddress resolved1=new InetSocketAddress(InetAddress.getByAddress("ns1",new byte[]{10,0,0,1}),53);
  InetSocketAddress resolved2=new InetSocketAddress(InetAddress.getByAddress("ns2",new byte[]{10,0,0,2}),53);
  EventLoopGroup group=new DefaultEventLoopGroup(1);
  try {
    EventLoop loop=group.next();
    final DefaultAuthoritativeDnsServerCache cache=new DefaultAuthoritativeDnsServerCache();
    cache.cache("netty.io",resolved1,100,loop);
    cache.cache("netty.io",resolved2,10000,loop);
    DnsServerAddressStream entries=cache.get("netty.io");
    assertEquals(2,entries.size());
    assertEquals(resolved1,entries.next());
    assertEquals(resolved2,entries.next());
  }
  finally {
    group.shutdownGracefully();
  }
}
