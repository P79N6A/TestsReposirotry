@Test public void testOutboundClosedAfterChannelInactive() throws Exception {
  SslContext context=SslContextBuilder.forClient().build();
  SSLEngine engine=context.newEngine(UnpooledByteBufAllocator.DEFAULT);
  EmbeddedChannel channel=new EmbeddedChannel();
  assertFalse(channel.finish());
  channel.pipeline().addLast(new SslHandler(engine));
  assertFalse(engine.isOutboundDone());
  channel.close().syncUninterruptibly();
  assertTrue(engine.isOutboundDone());
}
