@Test public void testCloseFutureNotified() throws Exception {
  SSLEngine engine=newServerModeSSLEngine();
  SslHandler handler=new SslHandler(engine);
  EmbeddedChannel ch=new EmbeddedChannel(handler);
  ch.close();
  ByteBuf buf=ch.readOutbound();
  assertFalse(buf.isReadable());
  buf.release();
  assertFalse(ch.finishAndReleaseAll());
  assertTrue(handler.handshakeFuture().cause() instanceof ClosedChannelException);
  assertTrue(handler.sslCloseFuture().cause() instanceof ClosedChannelException);
}
