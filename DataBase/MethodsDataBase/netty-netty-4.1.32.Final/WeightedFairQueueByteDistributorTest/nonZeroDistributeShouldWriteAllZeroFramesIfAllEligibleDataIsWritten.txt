/** 
 * In this test, we call distribute with 100 bytes which is the total amount eligible to be written, and also have streams with 0 bytes to write. All of these streams should be written with a single call to distribute. <pre> 0 / \ A   B / \ C   D </pre> After the tree shift: <pre> 0 | [A] | B / \ C   D </pre>
 */
@Test public void nonZeroDistributeShouldWriteAllZeroFramesIfAllEligibleDataIsWritten() throws Http2Exception {
  initState(STREAM_A,400,false);
  initState(STREAM_B,100,true);
  initState(STREAM_C,0,true);
  initState(STREAM_D,0,true);
  setPriority(STREAM_B,STREAM_A,DEFAULT_PRIORITY_WEIGHT,true);
  assertFalse(write(100));
  verifyNeverWrite(STREAM_A);
  verifyWrite(STREAM_B,100);
  verifyAnyWrite(STREAM_B,1);
  verifyWrite(STREAM_C,0);
  verifyAnyWrite(STREAM_C,1);
  verifyWrite(STREAM_D,0);
  verifyAnyWrite(STREAM_D,1);
}
