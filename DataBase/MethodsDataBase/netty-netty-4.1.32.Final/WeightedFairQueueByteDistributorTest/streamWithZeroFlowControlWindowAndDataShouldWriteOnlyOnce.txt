/** 
 * In this test, we allow A to send, but expect the flow controller will only write to the stream 1 time. This is because we give the stream a chance to write its empty frame 1 time, and the stream will not be written to again until a update stream is called. <pre> 0 / \ A   B / \ C   D </pre>
 */
@Test public void streamWithZeroFlowControlWindowAndDataShouldWriteOnlyOnce() throws Http2Exception {
  initState(STREAM_A,0,true,true);
  blockedStreamShouldSpreadDataToChildren(true);
  initState(STREAM_A,0,true,true);
  assertFalse(write(1));
  verifyWrite(times(2),STREAM_A,0);
  assertFalse(write(1));
  verifyWrite(times(2),STREAM_A,0);
}
