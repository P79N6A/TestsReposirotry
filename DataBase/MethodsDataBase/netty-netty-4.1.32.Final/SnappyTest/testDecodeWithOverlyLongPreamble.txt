@Test(expected=DecompressionException.class) public void testDecodeWithOverlyLongPreamble() throws Exception {
  ByteBuf in=Unpooled.wrappedBuffer(new byte[]{-0x80,-0x80,-0x80,-0x80,0x7f,0x04 << 2,0x6e,0x65,0x74,0x74,0x79});
  ByteBuf out=Unpooled.buffer(10);
  try {
    snappy.decode(in,out);
  }
  finally {
    in.release();
    out.release();
  }
}
