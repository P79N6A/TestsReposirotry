@Test public void testJsonArrayOverMultipleWrites(){
  EmbeddedChannel ch=new EmbeddedChannel(new JsonObjectDecoder());
  String arrayPart1="[{\"test";
  String arrayPart2="case\"  : \"\\\"}]Escaped dou\\\"ble quotes \\\" in JSON str\\\"ing\"";
  String arrayPart3="  }\n\n    , ";
  String arrayPart4="{\"testcase\" : \"Streaming string me";
  String arrayPart5="ssage\"} ]";
  ch.writeInbound(Unpooled.copiedBuffer("   " + arrayPart1,CharsetUtil.UTF_8));
  ch.writeInbound(Unpooled.copiedBuffer(arrayPart2,CharsetUtil.UTF_8));
  ch.writeInbound(Unpooled.copiedBuffer(arrayPart3,CharsetUtil.UTF_8));
  ch.writeInbound(Unpooled.copiedBuffer(arrayPart4,CharsetUtil.UTF_8));
  ch.writeInbound(Unpooled.copiedBuffer(arrayPart5 + "      ",CharsetUtil.UTF_8));
  ByteBuf res=ch.readInbound();
  assertEquals(arrayPart1 + arrayPart2 + arrayPart3+ arrayPart4+ arrayPart5,res.toString(CharsetUtil.UTF_8));
  res.release();
  assertFalse(ch.finish());
}
