@Test public void testMultipleJsonObjectsInOneWrite(){
  EmbeddedChannel ch=new EmbeddedChannel(new JsonObjectDecoder());
  String object1="{\"key\" : \"value1\"}", object2="{\"key\" : \"value2\"}", object3="{\"key\" : \"value3\"}";
  ch.writeInbound(Unpooled.copiedBuffer(object1 + object2 + object3,CharsetUtil.UTF_8));
  ByteBuf res=ch.readInbound();
  assertEquals(object1,res.toString(CharsetUtil.UTF_8));
  res.release();
  res=ch.readInbound();
  assertEquals(object2,res.toString(CharsetUtil.UTF_8));
  res.release();
  res=ch.readInbound();
  assertEquals(object3,res.toString(CharsetUtil.UTF_8));
  res.release();
  assertFalse(ch.finish());
}
