@Test public void testCompressedEmptyFrame(){
  EmbeddedChannel encoderChannel=new EmbeddedChannel(ZlibCodecFactory.newZlibEncoder(ZlibWrapper.NONE,9,15,8));
  EmbeddedChannel decoderChannel=new EmbeddedChannel(new PerFrameDeflateDecoder(false));
  encoderChannel.writeOutbound(Unpooled.EMPTY_BUFFER);
  ByteBuf compressedPayload=encoderChannel.readOutbound();
  BinaryWebSocketFrame compressedFrame=new BinaryWebSocketFrame(true,RSV1 | RSV3,compressedPayload);
  decoderChannel.writeInbound(compressedFrame);
  BinaryWebSocketFrame uncompressedFrame=decoderChannel.readInbound();
  assertNotNull(uncompressedFrame);
  assertNotNull(uncompressedFrame.content());
  assertTrue(uncompressedFrame instanceof BinaryWebSocketFrame);
  assertEquals(RSV3,uncompressedFrame.rsv());
  assertEquals(0,uncompressedFrame.content().readableBytes());
  uncompressedFrame.release();
}
