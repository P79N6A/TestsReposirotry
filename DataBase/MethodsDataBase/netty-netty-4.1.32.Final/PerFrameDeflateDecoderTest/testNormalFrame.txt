@Test public void testNormalFrame(){
  EmbeddedChannel decoderChannel=new EmbeddedChannel(new PerFrameDeflateDecoder(false));
  byte[] payload=new byte[300];
  random.nextBytes(payload);
  BinaryWebSocketFrame frame=new BinaryWebSocketFrame(true,RSV3,Unpooled.wrappedBuffer(payload));
  decoderChannel.writeInbound(frame);
  BinaryWebSocketFrame newFrame=decoderChannel.readInbound();
  assertNotNull(newFrame);
  assertNotNull(newFrame.content());
  assertTrue(newFrame instanceof BinaryWebSocketFrame);
  assertEquals(RSV3,newFrame.rsv());
  assertEquals(300,newFrame.content().readableBytes());
  byte[] finalPayload=new byte[300];
  newFrame.content().readBytes(finalPayload);
  assertTrue(Arrays.equals(finalPayload,payload));
  newFrame.release();
}
