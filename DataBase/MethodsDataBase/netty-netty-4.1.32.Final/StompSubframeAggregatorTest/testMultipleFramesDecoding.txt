@Test public void testMultipleFramesDecoding(){
  ByteBuf incoming=Unpooled.buffer();
  incoming.writeBytes(StompTestConstants.CONNECT_FRAME.getBytes());
  incoming.writeBytes(StompTestConstants.CONNECTED_FRAME.getBytes());
  channel.writeInbound(incoming);
  channel.writeInbound(Unpooled.wrappedBuffer(StompTestConstants.SEND_FRAME_1.getBytes()));
  StompFrame frame=channel.readInbound();
  Assert.assertEquals(StompCommand.CONNECT,frame.command());
  frame.release();
  frame=channel.readInbound();
  Assert.assertEquals(StompCommand.CONNECTED,frame.command());
  frame.release();
  frame=channel.readInbound();
  Assert.assertEquals(StompCommand.SEND,frame.command());
  frame.release();
  Assert.assertNull(channel.readInbound());
}
