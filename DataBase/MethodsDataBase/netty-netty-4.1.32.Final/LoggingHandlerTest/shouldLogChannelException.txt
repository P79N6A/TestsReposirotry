@Test public void shouldLogChannelException() throws Exception {
  String msg="illegalState";
  Throwable cause=new IllegalStateException(msg);
  EmbeddedChannel channel=new EmbeddedChannel(new LoggingHandler());
  channel.pipeline().fireExceptionCaught(cause);
  verify(appender).doAppend(argThat(new RegexLogMatcher(".+EXCEPTION: " + cause.getClass().getCanonicalName() + ": "+ msg+ '$')));
}
