@Test public void shouldLogByteBufDataRead() throws Exception {
  ByteBuf msg=Unpooled.copiedBuffer("hello",CharsetUtil.UTF_8);
  EmbeddedChannel channel=new EmbeddedChannel(new LoggingHandler());
  channel.writeInbound(msg);
  verify(appender).doAppend(argThat(new RegexLogMatcher(".+READ: " + msg.readableBytes() + "B$")));
  ByteBuf handledMsg=channel.readInbound();
  assertThat(msg,is(sameInstance(handledMsg)));
  handledMsg.release();
  assertThat(channel.readInbound(),is(nullValue()));
}
