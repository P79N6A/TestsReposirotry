@Test public void testIPV6Decode(){
  int startChannels=ch.pipeline().names().size();
  String header="PROXY TCP6 2001:0db8:85a3:0000:0000:8a2e:0370:7334 1050:0:0:0:5:600:300c:326b 56324 443\r\n";
  ch.writeInbound(copiedBuffer(header,CharsetUtil.US_ASCII));
  Object msgObj=ch.readInbound();
  assertEquals(startChannels - 1,ch.pipeline().names().size());
  assertTrue(msgObj instanceof HAProxyMessage);
  HAProxyMessage msg=(HAProxyMessage)msgObj;
  assertEquals(HAProxyProtocolVersion.V1,msg.protocolVersion());
  assertEquals(HAProxyCommand.PROXY,msg.command());
  assertEquals(HAProxyProxiedProtocol.TCP6,msg.proxiedProtocol());
  assertEquals("2001:0db8:85a3:0000:0000:8a2e:0370:7334",msg.sourceAddress());
  assertEquals("1050:0:0:0:5:600:300c:326b",msg.destinationAddress());
  assertEquals(56324,msg.sourcePort());
  assertEquals(443,msg.destinationPort());
  assertNull(ch.readInbound());
  assertFalse(ch.finish());
}
