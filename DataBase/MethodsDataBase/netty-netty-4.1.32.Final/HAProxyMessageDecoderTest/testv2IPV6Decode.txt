@Test public void testv2IPV6Decode(){
  byte[] header=new byte[52];
  header[0]=0x0D;
  header[1]=0x0A;
  header[2]=0x0D;
  header[3]=0x0A;
  header[4]=0x00;
  header[5]=0x0D;
  header[6]=0x0A;
  header[7]=0x51;
  header[8]=0x55;
  header[9]=0x49;
  header[10]=0x54;
  header[11]=0x0A;
  header[12]=0x21;
  header[13]=0x21;
  header[14]=0x00;
  header[15]=0x24;
  header[16]=0x20;
  header[17]=0x01;
  header[18]=0x0d;
  header[19]=(byte)0xb8;
  header[20]=(byte)0x85;
  header[21]=(byte)0xa3;
  header[22]=0x00;
  header[23]=0x00;
  header[24]=0x00;
  header[25]=0x00;
  header[26]=(byte)0x8a;
  header[27]=0x2e;
  header[28]=0x03;
  header[29]=0x70;
  header[30]=0x73;
  header[31]=0x34;
  header[32]=0x10;
  header[33]=0x50;
  header[34]=0x00;
  header[35]=0x00;
  header[36]=0x00;
  header[37]=0x00;
  header[38]=0x00;
  header[39]=0x00;
  header[40]=0x00;
  header[41]=0x05;
  header[42]=0x06;
  header[43]=0x00;
  header[44]=0x30;
  header[45]=0x0c;
  header[46]=0x32;
  header[47]=0x6b;
  header[48]=(byte)0xdc;
  header[49]=0x04;
  header[50]=0x01;
  header[51]=(byte)0xbb;
  int startChannels=ch.pipeline().names().size();
  ch.writeInbound(copiedBuffer(header));
  Object msgObj=ch.readInbound();
  assertEquals(startChannels - 1,ch.pipeline().names().size());
  assertTrue(msgObj instanceof HAProxyMessage);
  HAProxyMessage msg=(HAProxyMessage)msgObj;
  assertEquals(HAProxyProtocolVersion.V2,msg.protocolVersion());
  assertEquals(HAProxyCommand.PROXY,msg.command());
  assertEquals(HAProxyProxiedProtocol.TCP6,msg.proxiedProtocol());
  assertEquals("2001:db8:85a3:0:0:8a2e:370:7334",msg.sourceAddress());
  assertEquals("1050:0:0:0:5:600:300c:326b",msg.destinationAddress());
  assertEquals(56324,msg.sourcePort());
  assertEquals(443,msg.destinationPort());
  assertNull(ch.readInbound());
  assertFalse(ch.finish());
}
