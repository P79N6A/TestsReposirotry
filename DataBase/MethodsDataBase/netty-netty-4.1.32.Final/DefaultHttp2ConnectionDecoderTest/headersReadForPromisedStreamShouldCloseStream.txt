@Test() public void headersReadForPromisedStreamShouldCloseStream() throws Exception {
  when(stream.state()).thenReturn(RESERVED_REMOTE);
  decode().onHeadersRead(ctx,STREAM_ID,EmptyHttp2Headers.INSTANCE,0,true);
  verify(stream).open(true);
  verify(lifecycleManager).closeStreamRemote(eq(stream),eq(future));
  verify(listener).onHeadersRead(eq(ctx),eq(STREAM_ID),eq(EmptyHttp2Headers.INSTANCE),eq(0),eq(DEFAULT_PRIORITY_WEIGHT),eq(false),eq(0),eq(true));
}
