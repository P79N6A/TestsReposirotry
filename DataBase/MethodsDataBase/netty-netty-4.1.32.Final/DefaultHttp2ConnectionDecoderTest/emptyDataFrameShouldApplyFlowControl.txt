@Test public void emptyDataFrameShouldApplyFlowControl() throws Exception {
  final ByteBuf data=EMPTY_BUFFER;
  int padding=0;
  mockFlowControl(0);
  try {
    decode().onDataRead(ctx,STREAM_ID,data,padding,true);
    verify(localFlow).receiveFlowControlledFrame(eq(stream),eq(data),eq(padding),eq(true));
    verify(localFlow).consumeBytes(eq(stream),eq(0));
    verify(listener).onDataRead(eq(ctx),eq(STREAM_ID),eq(data),eq(padding),eq(true));
  }
  finally {
    data.release();
  }
}
