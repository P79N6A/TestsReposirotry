@Test public void headersReadForPromisedStreamShouldHalfOpenStream() throws Exception {
  when(stream.state()).thenReturn(RESERVED_REMOTE);
  decode().onHeadersRead(ctx,STREAM_ID,EmptyHttp2Headers.INSTANCE,0,false);
  verify(stream).open(false);
  verify(listener).onHeadersRead(eq(ctx),eq(STREAM_ID),eq(EmptyHttp2Headers.INSTANCE),eq(0),eq(DEFAULT_PRIORITY_WEIGHT),eq(false),eq(0),eq(false));
}
