@Test public void testRegularDecode(){
  byte[] b=new byte[2048];
  for (int i=2; i < 2048; i++) {
    b[i]=1;
  }
  b[0]=-2;
  b[1]=15;
  assertTrue(ch.writeOutbound(wrappedBuffer(b,2,b.length - 2)));
  ByteBuf expected=wrappedBuffer(b);
  ByteBuf actual=ch.readOutbound();
  assertThat(actual,is(expected));
  assertFalse(ch.finish());
  expected.release();
  actual.release();
}
