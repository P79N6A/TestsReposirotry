@Test public void testSearchDomainWithNdots0() throws Exception {
  Set<String> domains=new HashSet<String>();
  domains.add("host1");
  domains.add("host1.foo.com");
  domains.add("host2.foo.com");
  TestDnsServer.MapRecordStoreA store=new TestDnsServer.MapRecordStoreA(domains);
  dnsServer=new TestDnsServer(store);
  dnsServer.start();
  resolver=newResolver().searchDomains(Collections.singleton("foo.com")).ndots(0).build();
  String resolved=assertResolve(resolver,"host1");
  assertEquals(store.getAddress("host1"),resolved);
  resolved=assertResolve(resolver,"host1.foo.com");
  assertEquals(store.getAddress("host1.foo.com"),resolved);
  assertNotResolve(resolver,"host2");
}
