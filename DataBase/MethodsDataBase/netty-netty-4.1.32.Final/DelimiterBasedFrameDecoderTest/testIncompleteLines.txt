@Test public void testIncompleteLines(){
  EmbeddedChannel ch=new EmbeddedChannel(new DelimiterBasedFrameDecoder(8192,false,Delimiters.lineDelimiter()));
  ch.writeInbound(Unpooled.copiedBuffer("Test",Charset.defaultCharset()));
  assertNull(ch.readInbound());
  ch.writeInbound(Unpooled.copiedBuffer("Line\r\ng\r\n",Charset.defaultCharset()));
  ByteBuf buf=ch.readInbound();
  assertEquals("TestLine\r\n",buf.toString(Charset.defaultCharset()));
  ByteBuf buf2=ch.readInbound();
  assertEquals("g\r\n",buf2.toString(Charset.defaultCharset()));
  assertNull(ch.readInbound());
  ch.finish();
  buf.release();
  buf2.release();
}
