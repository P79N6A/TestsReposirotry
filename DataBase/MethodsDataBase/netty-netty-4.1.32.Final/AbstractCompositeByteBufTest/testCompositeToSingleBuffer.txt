@Test public void testCompositeToSingleBuffer(){
  CompositeByteBuf buf=compositeBuffer(3);
  buf.addComponent(wrappedBuffer(new byte[]{1,2,3}));
  assertEquals(1,buf.numComponents());
  buf.addComponent(wrappedBuffer(new byte[]{4}));
  assertEquals(2,buf.numComponents());
  buf.addComponent(wrappedBuffer(new byte[]{5,6}));
  assertEquals(3,buf.numComponents());
  ByteBuffer nioBuffer=buf.nioBuffer(0,6);
  byte[] bytes=nioBuffer.array();
  assertEquals(6,bytes.length);
  assertArrayEquals(new byte[]{1,2,3,4,5,6},bytes);
  buf.release();
}
