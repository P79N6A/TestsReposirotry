@Test public void testFullConsolidation(){
  CompositeByteBuf buf=compositeBuffer(Integer.MAX_VALUE);
  buf.addComponent(wrappedBuffer(new byte[]{1}));
  buf.addComponent(wrappedBuffer(new byte[]{2,3}));
  buf.addComponent(wrappedBuffer(new byte[]{4,5,6}));
  buf.consolidate();
  assertEquals(1,buf.numComponents());
  assertTrue(buf.hasArray());
  assertNotNull(buf.array());
  assertEquals(0,buf.arrayOffset());
  buf.release();
}
