@Test public void testReleasesItsComponents2(){
  ByteBuf buffer=PooledByteBufAllocator.DEFAULT.buffer();
  buffer.writeBytes(new byte[]{1,2,3,4,5,6,7,8,9,10});
  ByteBuf s1=buffer.readRetainedSlice(2);
  ByteBuf s2=s1.readRetainedSlice(2);
  ByteBuf s3=s2.readRetainedSlice(2);
  ByteBuf s4=s3.readRetainedSlice(2);
  ByteBuf composite=Unpooled.compositeBuffer().addComponent(s1).addComponents(s2,s3,s4).order(ByteOrder.LITTLE_ENDIAN);
  assertEquals(1,composite.refCnt());
  assertEquals(2,buffer.refCnt());
  composite.release();
  assertEquals(0,composite.refCnt());
  assertEquals(1,buffer.refCnt());
  buffer.release();
  assertEquals(0,buffer.refCnt());
}
