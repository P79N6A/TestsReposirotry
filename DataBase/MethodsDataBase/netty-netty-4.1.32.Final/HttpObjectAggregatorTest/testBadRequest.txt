@Test public void testBadRequest(){
  EmbeddedChannel ch=new EmbeddedChannel(new HttpRequestDecoder(),new HttpObjectAggregator(1024 * 1024));
  ch.writeInbound(Unpooled.copiedBuffer("GET / HTTP/1.0 with extra\r\n",CharsetUtil.UTF_8));
  Object inbound=ch.readInbound();
  assertThat(inbound,is(instanceOf(FullHttpRequest.class)));
  assertTrue(((DecoderResultProvider)inbound).decoderResult().isFailure());
  assertNull(ch.readInbound());
  ch.finish();
}
