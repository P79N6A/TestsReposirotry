/** 
 * If the length of the content is 0 for sure,  {@link HttpContentEncoder} should skip encoding.
 */
@Test public void testEmptyFullContent() throws Exception {
  EmbeddedChannel ch=new EmbeddedChannel(new HttpContentCompressor());
  ch.writeInbound(newRequest());
  FullHttpResponse res=new DefaultFullHttpResponse(HttpVersion.HTTP_1_1,HttpResponseStatus.OK,Unpooled.EMPTY_BUFFER);
  ch.writeOutbound(res);
  Object o=ch.readOutbound();
  assertThat(o,is(instanceOf(FullHttpResponse.class)));
  res=(FullHttpResponse)o;
  assertThat(res.headers().get(HttpHeaderNames.TRANSFER_ENCODING),is(nullValue()));
  assertThat(res.headers().get(HttpHeaderNames.CONTENT_ENCODING),is(nullValue()));
  assertThat(res.content().readableBytes(),is(0));
  assertThat(res.content().toString(CharsetUtil.US_ASCII),is(""));
  res.release();
  assertThat(ch.readOutbound(),is(nullValue()));
}
