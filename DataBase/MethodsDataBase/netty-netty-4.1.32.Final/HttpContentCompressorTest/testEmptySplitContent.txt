/** 
 * If the length of the content is unknown,  {@link HttpContentEncoder} should not skip encoding the contenteven if the actual length is turned out to be 0.
 */
@Test public void testEmptySplitContent() throws Exception {
  EmbeddedChannel ch=new EmbeddedChannel(new HttpContentCompressor());
  ch.writeInbound(newRequest());
  ch.writeOutbound(new DefaultHttpResponse(HttpVersion.HTTP_1_1,HttpResponseStatus.OK));
  assertEncodedResponse(ch);
  ch.writeOutbound(LastHttpContent.EMPTY_LAST_CONTENT);
  HttpContent chunk=(HttpContent)ch.readOutbound();
  assertThat(ByteBufUtil.hexDump(chunk.content()),is("1f8b080000000000000003000000000000000000"));
  assertThat(chunk,is(instanceOf(HttpContent.class)));
  chunk.release();
  chunk=ch.readOutbound();
  assertThat(chunk.content().isReadable(),is(false));
  assertThat(chunk,is(instanceOf(LastHttpContent.class)));
  chunk.release();
  assertThat(ch.readOutbound(),is(nullValue()));
}
