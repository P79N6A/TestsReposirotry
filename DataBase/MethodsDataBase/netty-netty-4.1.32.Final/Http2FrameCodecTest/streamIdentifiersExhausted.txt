@Test public void streamIdentifiersExhausted() throws Http2Exception {
  int maxServerStreamId=Integer.MAX_VALUE - 1;
  assertNotNull(frameCodec.connection().local().createStream(maxServerStreamId,false));
  Http2FrameStream stream=frameCodec.newStream();
  assertNotNull(stream);
  ChannelPromise writePromise=channel.newPromise();
  channel.writeAndFlush(new DefaultHttp2HeadersFrame(new DefaultHttp2Headers()).stream(stream),writePromise);
  assertThat(writePromise.cause(),instanceOf(Http2NoMoreStreamIdsException.class));
}
