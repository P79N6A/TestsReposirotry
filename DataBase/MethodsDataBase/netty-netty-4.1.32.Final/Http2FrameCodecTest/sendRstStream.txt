@Test public void sendRstStream() throws Exception {
  frameListener.onHeadersRead(http2HandlerCtx,3,request,31,true);
  Http2Stream stream=frameCodec.connection().stream(3);
  assertNotNull(stream);
  assertEquals(State.HALF_CLOSED_REMOTE,stream.state());
  Http2HeadersFrame inboundHeaders=inboundHandler.readInbound();
  assertNotNull(inboundHeaders);
  assertTrue(inboundHeaders.isEndStream());
  Http2FrameStream stream2=inboundHeaders.stream();
  assertNotNull(stream2);
  assertEquals(3,stream2.id());
  inboundHandler.writeOutbound(new DefaultHttp2ResetFrame(314).stream(stream2));
  verify(frameWriter).writeRstStream(eq(http2HandlerCtx),eq(3),eq(314L),anyChannelPromise());
  assertEquals(State.CLOSED,stream.state());
  assertTrue(channel.isActive());
}
