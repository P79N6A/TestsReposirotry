@Test public void sendGoAway() throws Exception {
  frameListener.onHeadersRead(http2HandlerCtx,3,request,31,false);
  Http2Stream stream=frameCodec.connection().stream(3);
  assertNotNull(stream);
  assertEquals(State.OPEN,stream.state());
  ByteBuf debugData=bb("debug");
  ByteBuf expected=debugData.copy();
  Http2GoAwayFrame goAwayFrame=new DefaultHttp2GoAwayFrame(Http2Error.NO_ERROR.code(),debugData.slice());
  goAwayFrame.setExtraStreamIds(2);
  inboundHandler.writeOutbound(goAwayFrame);
  verify(frameWriter).writeGoAway(eq(http2HandlerCtx),eq(7),eq(Http2Error.NO_ERROR.code()),eq(expected),anyChannelPromise());
  assertEquals(1,debugData.refCnt());
  assertEquals(State.OPEN,stream.state());
  assertTrue(channel.isActive());
  expected.release();
}
