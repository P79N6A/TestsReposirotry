@Test public void streamZeroWindowUpdateIncrementsConnectionWindow() throws Http2Exception {
  Http2Connection connection=frameCodec.connection();
  Http2LocalFlowController localFlow=connection.local().flowController();
  int initialWindowSizeBefore=localFlow.initialWindowSize();
  Http2Stream connectionStream=connection.connectionStream();
  int connectionWindowSizeBefore=localFlow.windowSize(connectionStream);
  ((DefaultHttp2LocalFlowController)localFlow).windowUpdateRatio(connectionStream,.999f);
  int windowUpdate=1024;
  channel.write(new DefaultHttp2WindowUpdateFrame(windowUpdate));
  assertEquals(initialWindowSizeBefore,localFlow.initialWindowSize());
  assertEquals(connectionWindowSizeBefore + windowUpdate,localFlow.windowSize(connectionStream));
}
