@Test public void testSingleFrameChunked(){
  EmbeddedChannel channel=new EmbeddedChannel(new StompSubframeDecoder(10000,5));
  ByteBuf incoming=Unpooled.buffer();
  incoming.writeBytes(StompTestConstants.SEND_FRAME_2.getBytes());
  channel.writeInbound(incoming);
  StompHeadersSubframe frame=channel.readInbound();
  assertNotNull(frame);
  assertEquals(StompCommand.SEND,frame.command());
  StompContentSubframe content=channel.readInbound();
  String s=content.content().toString(UTF_8);
  assertEquals("hello",s);
  content.release();
  content=channel.readInbound();
  s=content.content().toString(UTF_8);
  assertEquals(", que",s);
  content.release();
  content=channel.readInbound();
  s=content.content().toString(UTF_8);
  assertEquals("ue a!",s);
  content.release();
  content=channel.readInbound();
  s=content.content().toString(UTF_8);
  assertEquals("!!",s);
  content.release();
  assertNull(channel.readInbound());
}
