@Test public void shouldGetMultipleResultSetsWithOneStatement() throws IOException {
  try (SqlSession sqlSession=sqlSessionFactory.openSession()){
    Mapper mapper=sqlSession.getMapper(Mapper.class);
    List<List<?>> results=mapper.getUsersAndGroups();
    Assert.assertEquals(2,results.size());
    Assert.assertEquals(6,results.get(0).size());
    OrderDetail detail=(OrderDetail)results.get(0).get(0);
    Assert.assertEquals(1,detail.getOrderId());
    Assert.assertEquals(1,detail.getLineNumber());
    Assert.assertEquals(1,detail.getQuantity());
    Assert.assertEquals("Pen",detail.getItemDescription());
    Assert.assertEquals(2,results.get(1).size());
    OrderHeader header=(OrderHeader)results.get(1).get(0);
    Assert.assertEquals(1,header.getOrderId());
    Assert.assertEquals("Fred",header.getCustName());
  }
 }
