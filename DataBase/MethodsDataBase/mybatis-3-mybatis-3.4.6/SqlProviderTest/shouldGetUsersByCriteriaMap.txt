@Test public void shouldGetUsersByCriteriaMap(){
  SqlSession sqlSession=sqlSessionFactory.openSession();
  try {
    Mapper mapper=sqlSession.getMapper(Mapper.class);
{
      Map<String,Object> criteria=new HashMap<String,Object>();
      criteria.put("id",1);
      List<User> users=mapper.getUsersByCriteriaMap(criteria);
      assertEquals(1,users.size());
      assertEquals("User1",users.get(0).getName());
    }
{
      Map<String,Object> criteria=new HashMap<String,Object>();
      criteria.put("name","User");
      List<User> users=mapper.getUsersByCriteriaMap(criteria);
      assertEquals(4,users.size());
      assertEquals("User1",users.get(0).getName());
      assertEquals("User2",users.get(1).getName());
      assertEquals("User3",users.get(2).getName());
      assertEquals("User4",users.get(3).getName());
    }
  }
  finally {
    sqlSession.close();
  }
}
