@Test public void shouldGetUsersByCriteria(){
  SqlSession sqlSession=sqlSessionFactory.openSession();
  try {
    Mapper mapper=sqlSession.getMapper(Mapper.class);
{
      User criteria=new User();
      criteria.setId(1);
      List<User> users=mapper.getUsersByCriteria(criteria);
      assertEquals(1,users.size());
      assertEquals("User1",users.get(0).getName());
    }
{
      User criteria=new User();
      criteria.setName("User");
      List<User> users=mapper.getUsersByCriteria(criteria);
      assertEquals(4,users.size());
      assertEquals("User1",users.get(0).getName());
      assertEquals("User2",users.get(1).getName());
      assertEquals("User3",users.get(2).getName());
      assertEquals("User4",users.get(3).getName());
    }
  }
  finally {
    sqlSession.close();
  }
}
