@Test public void shouldGetOrderDetailsEachHavingAnOrderHeaderAnnotationBased() throws IOException {
  SqlSession sqlSession=sqlSessionFactory.openSession();
  try {
    Mapper mapper=sqlSession.getMapper(Mapper.class);
    List<OrderDetail> orderDetails=mapper.getOrderDetailsWithHeadersAnnotationBased();
    Assert.assertEquals(6,orderDetails.size());
    for (    OrderDetail orderDetail : orderDetails) {
      Assert.assertNotNull(orderDetail.getOrderHeader());
    }
  }
  finally {
    sqlSession.close();
  }
}
