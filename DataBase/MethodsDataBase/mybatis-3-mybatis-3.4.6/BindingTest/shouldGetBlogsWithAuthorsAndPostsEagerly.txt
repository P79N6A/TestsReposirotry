@Test public void shouldGetBlogsWithAuthorsAndPostsEagerly(){
  SqlSession session=sqlSessionFactory.openSession();
  try {
    BoundBlogMapper mapper=session.getMapper(BoundBlogMapper.class);
    List<Blog> blogs=mapper.selectBlogsWithAutorAndPostsEagerly();
    assertEquals(2,blogs.size());
    assertFalse(blogs.get(0) instanceof Factory);
    assertEquals(101,blogs.get(0).getAuthor().getId());
    assertEquals(1,blogs.get(0).getPosts().size());
    assertEquals(1,blogs.get(0).getPosts().get(0).getId());
    assertFalse(blogs.get(1) instanceof Factory);
    assertEquals(102,blogs.get(1).getAuthor().getId());
    assertEquals(1,blogs.get(1).getPosts().size());
    assertEquals(2,blogs.get(1).getPosts().get(0).getId());
  }
  finally {
    session.close();
  }
}
