@Test public void testSelectShouldFlushLocalCacheIfFlushLocalCacheAtferEachStatementIsTrue() throws SQLException {
  sqlSessionFactory.getConfiguration().setLocalCacheScope(LocalCacheScope.STATEMENT);
  SqlSession sqlSession=sqlSessionFactory.openSession(ExecutorType.SIMPLE);
  try {
    PersonMapper personMapper=sqlSession.getMapper(PersonMapper.class);
    List<Person> people=personMapper.selectAllNoFlush();
    updateDatabase(sqlSession.getConnection());
    people=personMapper.selectAllFlush();
    assertEquals("Simone",people.get(0).getFirstName());
    sqlSession.commit();
  }
  finally {
    sqlSession.close();
  }
}
