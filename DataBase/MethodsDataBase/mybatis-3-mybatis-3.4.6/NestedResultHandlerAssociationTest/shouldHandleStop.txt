@Test public void shouldHandleStop() throws Exception {
  SqlSession sqlSession=sqlSessionFactory.openSession();
  final SimpleDateFormat fmt=new SimpleDateFormat("yyyy-MM-dd");
  final List<Account> accounts=new ArrayList<Account>();
  try {
    Date targetMonth=fmt.parse("2014-01-01");
    sqlSession.select("collectPageByBirthMonth",targetMonth,new ResultHandler(){
      @Override public void handleResult(      ResultContext context){
        Account account=(Account)context.getResultObject();
        accounts.add(account);
        if (accounts.size() > 1)         context.stop();
      }
    }
);
  }
  finally {
    sqlSession.close();
  }
  assertEquals(2,accounts.size());
  assertEquals("Bob1",accounts.get(0).getAccountName());
  assertEquals("Bob2",accounts.get(1).getAccountName());
}
