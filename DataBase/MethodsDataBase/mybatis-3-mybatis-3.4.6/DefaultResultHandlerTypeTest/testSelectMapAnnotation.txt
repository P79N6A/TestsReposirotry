@Test public void testSelectMapAnnotation() throws Exception {
  String xmlConfig="org/apache/ibatis/submitted/result_handler_type/MapperConfig.xml";
  SqlSessionFactory sqlSessionFactory=getSqlSessionFactoryXmlConfig(xmlConfig);
  SqlSession sqlSession=sqlSessionFactory.openSession();
  try {
    PersonMapper mapper=sqlSession.getMapper(PersonMapper.class);
    Map<Integer,Person> map=mapper.selectAsMap();
    assertEquals(map.size(),2);
    assertEquals("java.util.LinkedHashMap",map.getClass().getCanonicalName());
  }
  finally {
    sqlSession.close();
  }
}
