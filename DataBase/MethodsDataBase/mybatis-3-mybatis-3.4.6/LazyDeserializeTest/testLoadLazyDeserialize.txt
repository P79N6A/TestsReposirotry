@Test public void testLoadLazyDeserialize() throws Exception {
  factory.getConfiguration().setConfigurationFactory(this.getClass());
  final SqlSession session=factory.openSession();
  try {
    final Mapper mapper=session.getMapper(Mapper.class);
    final LazyObjectFoo foo=mapper.loadFoo(FOO_ID);
    final byte[] serializedFoo=this.serializeFoo(foo);
    final LazyObjectFoo deserializedFoo=this.deserializeFoo(serializedFoo);
    assertNotNull(deserializedFoo);
    assertEquals(Integer.valueOf(FOO_ID),deserializedFoo.getId());
    assertNotNull(deserializedFoo.getLazyObjectBar());
    assertEquals(Integer.valueOf(BAR_ID),deserializedFoo.getLazyObjectBar().getId());
  }
  finally {
    session.close();
  }
}
