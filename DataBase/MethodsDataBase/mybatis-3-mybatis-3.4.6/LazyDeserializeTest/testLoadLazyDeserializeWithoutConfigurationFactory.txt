@Test public void testLoadLazyDeserializeWithoutConfigurationFactory() throws Exception {
  final SqlSession session=factory.openSession();
  try {
    final Mapper mapper=session.getMapper(Mapper.class);
    final LazyObjectFoo foo=mapper.loadFoo(FOO_ID);
    final byte[] serializedFoo=this.serializeFoo(foo);
    final LazyObjectFoo deserializedFoo=this.deserializeFoo(serializedFoo);
    try {
      deserializedFoo.getLazyObjectBar();
      fail();
    }
 catch (    ExecutorException e) {
      assertTrue(e.getMessage().contains("Cannot get Configuration as configuration factory was not set."));
    }
  }
  finally {
    session.close();
  }
}
