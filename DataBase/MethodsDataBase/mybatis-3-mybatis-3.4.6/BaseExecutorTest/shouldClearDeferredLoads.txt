@Test public void shouldClearDeferredLoads() throws Exception {
  Executor executor=createExecutor(new JdbcTransaction(ds,null,false));
  try {
    MappedStatement selectBlog=ExecutorTestHelper.prepareComplexSelectBlogMappedStatement(config);
    MappedStatement selectPosts=ExecutorTestHelper.prepareSelectPostsForBlogMappedStatement(config);
    config.addMappedStatement(selectBlog);
    config.addMappedStatement(selectPosts);
    MappedStatement selectAuthor=ExecutorTestHelper.prepareSelectOneAuthorMappedStatement(config);
    MappedStatement insertAuthor=ExecutorTestHelper.prepareInsertAuthorMappedStatement(config);
    executor.query(selectPosts,1,RowBounds.DEFAULT,Executor.NO_RESULT_HANDLER);
    Author author=new Author(-1,"someone","******","someone@apache.org",null,Section.NEWS);
    executor.update(insertAuthor,author);
    executor.query(selectAuthor,-1,RowBounds.DEFAULT,Executor.NO_RESULT_HANDLER);
    executor.flushStatements();
    executor.rollback(true);
  }
  finally {
    executor.rollback(true);
    executor.close(false);
  }
}
