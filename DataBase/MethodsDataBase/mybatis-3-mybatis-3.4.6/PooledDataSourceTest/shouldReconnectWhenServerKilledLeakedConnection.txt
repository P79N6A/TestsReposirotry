@Ignore("See the comments") @Test public void shouldReconnectWhenServerKilledLeakedConnection() throws Exception {
  final String URL="jdbc:mysql://localhost:3306/test";
  final String USERNAME="admin";
  final String PASSWORD="";
  PooledDataSource ds=new PooledDataSource();
  ds.setDriver("com.mysql.jdbc.Driver");
  ds.setUrl(URL);
  ds.setUsername(USERNAME);
  ds.setPassword(PASSWORD);
  ds.setPoolMaximumActiveConnections(1);
  ds.setPoolMaximumIdleConnections(1);
  ds.setPoolTimeToWait(1000);
  ds.setPoolMaximumCheckoutTime(2000);
  ds.setPoolPingEnabled(true);
  ds.setPoolPingQuery("select 1");
  ds.setDefaultAutoCommit(true);
  ds.setPoolPingConnectionsNotUsedFor(1000);
  Connection con=ds.getConnection();
  exexuteQuery(con);
  Thread.sleep(TimeUnit.SECONDS.toMillis(3));
  con.close();
  con=ds.getConnection();
  exexuteQuery(con);
  con.close();
}
