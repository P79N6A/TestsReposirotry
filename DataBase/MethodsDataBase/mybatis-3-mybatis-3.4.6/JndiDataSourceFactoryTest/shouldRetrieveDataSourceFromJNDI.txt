@Test public void shouldRetrieveDataSourceFromJNDI() throws Exception {
  createJndiDataSource();
  JndiDataSourceFactory factory=new JndiDataSourceFactory();
  factory.setProperties(new Properties(){
{
      setProperty(JndiDataSourceFactory.ENV_PREFIX + Context.INITIAL_CONTEXT_FACTORY,TEST_INITIAL_CONTEXT_FACTORY);
      setProperty(JndiDataSourceFactory.INITIAL_CONTEXT,TEST_INITIAL_CONTEXT);
      setProperty(JndiDataSourceFactory.DATA_SOURCE,TEST_DATA_SOURCE);
    }
  }
);
  DataSource actualDataSource=factory.getDataSource();
  assertEquals(expectedDataSource,actualDataSource);
}
