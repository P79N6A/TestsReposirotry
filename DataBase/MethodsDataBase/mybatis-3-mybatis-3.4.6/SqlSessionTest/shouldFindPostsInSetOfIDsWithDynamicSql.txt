@Test public void shouldFindPostsInSetOfIDsWithDynamicSql() throws Exception {
  SqlSession session=sqlMapper.openSession();
  try {
    List<Post> posts=session.selectList("org.apache.ibatis.domain.blog.mappers.PostMapper.findPost",new HashMap<String,List<Integer>>(){
{
        put("ids",new ArrayList<Integer>(){
{
            add(1);
            add(2);
            add(3);
          }
        }
);
      }
    }
);
    assertEquals(3,posts.size());
  }
  finally {
    session.close();
  }
}
