@Test public void shouldDeleteAuthor() throws Exception {
  SqlSession session=sqlMapper.openSession();
  try {
    final int id=102;
    List<Author> authors=session.selectList("org.apache.ibatis.domain.blog.mappers.AuthorMapper.selectAuthor",id);
    assertEquals(1,authors.size());
    int updates=session.delete("org.apache.ibatis.domain.blog.mappers.AuthorMapper.deleteAuthor",id);
    assertEquals(1,updates);
    authors=session.selectList("org.apache.ibatis.domain.blog.mappers.AuthorMapper.selectAuthor",id);
    assertEquals(0,authors.size());
    session.rollback();
    authors=session.selectList("org.apache.ibatis.domain.blog.mappers.AuthorMapper.selectAuthor",id);
    assertEquals(1,authors.size());
  }
  finally {
    session.close();
  }
}
