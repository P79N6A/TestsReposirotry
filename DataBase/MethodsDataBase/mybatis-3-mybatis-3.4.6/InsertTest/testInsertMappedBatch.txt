@Test public void testInsertMappedBatch() throws Exception {
  try (SqlSession sqlSession=sqlSessionFactory.openSession(ExecutorType.BATCH)){
    InsertMapper mapper=sqlSession.getMapper(InsertMapper.class);
    Name name=new Name();
    name.setFirstName("Fred");
    name.setLastName("Flintstone");
    mapper.insertNameMapped(name);
    Name name2=new Name();
    name2.setFirstName("Wilma");
    name2.setLastName("Flintstone");
    mapper.insertNameMapped(name2);
    List<BatchResult> batchResults=sqlSession.flushStatements();
    assertNotNull(name.getId());
    assertNotNull(name2.getId());
    assertEquals(1,batchResults.size());
  }
 }
