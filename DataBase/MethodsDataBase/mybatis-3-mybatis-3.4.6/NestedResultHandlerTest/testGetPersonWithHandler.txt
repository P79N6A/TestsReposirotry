@Test public void testGetPersonWithHandler(){
  SqlSession sqlSession=sqlSessionFactory.openSession();
  try {
    sqlSession.select("getPersons",new ResultHandler(){
      public void handleResult(      ResultContext context){
        Person person=(Person)context.getResultObject();
        if ("grandma".equals(person.getName())) {
          Assert.assertEquals(2,person.getItems().size());
        }
      }
    }
);
  }
  finally {
    sqlSession.close();
  }
}
