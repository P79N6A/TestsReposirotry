@Test public void shouldApplyTypeHandlerOnGeneratedKey(){
  addMapper();
  SqlSession sqlSession=sqlSessionFactory.openSession();
  try {
    Mapper mapper=sqlSession.getMapper(Mapper.class);
    Product product=new Product();
    product.setName("new product");
    mapper.insertProduct(product);
    assertNotNull(product.getId());
    assertNotNull(product.getId().getValue());
  }
  finally {
    sqlSession.close();
  }
}
