@Test public void shouldPickSameTypeHandlerMappedToDifferentJdbcTypes() throws Exception {
  sqlSessionFactory.getConfiguration().getTypeHandlerRegistry().register(ProductId.class,JdbcType.BIGINT,ProductIdTypeHandler.class);
  addMapper();
  SqlSession sqlSession=sqlSessionFactory.openSession();
  try {
    Mapper mapper=sqlSession.getMapper(Mapper.class);
    Product product=mapper.getProductByNameXml("iPad");
    assertEquals(Integer.valueOf(2),product.getId().getValue());
  }
  finally {
    sqlSession.close();
  }
}
