@Test public void shouldInsertNestedPasswordFieldOfComplexType() throws Exception {
  SqlSession sqlSession=sqlSessionFactory.openSession();
  try {
    User user=new User();
    user.setId(500000L);
    user.setPassword(new EncryptedString("secret"));
    user.setUsername("johnny" + Calendar.getInstance().getTimeInMillis());
    user.setAdministrator(true);
    sqlSession.insert("User.insert",user);
    user=(User)sqlSession.selectOne("User.find",user.getId());
    assertNotNull(user.getId());
    sqlSession.rollback();
  }
  finally {
    sqlSession.close();
  }
}
