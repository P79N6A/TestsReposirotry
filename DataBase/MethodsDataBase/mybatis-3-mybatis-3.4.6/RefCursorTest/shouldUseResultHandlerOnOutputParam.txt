@Test public void shouldUseResultHandlerOnOutputParam() throws IOException {
class OrderResultHandler implements ResultHandler<Order> {
    private List<Order> orders=new ArrayList<Order>();
    @Override public void handleResult(    ResultContext<? extends Order> resultContext){
      Order order=resultContext.getResultObject();
      order.setCustomerName("Anonymous");
      orders.add(order);
    }
    List<Order> getResult(){
      return orders;
    }
  }
  try (SqlSession sqlSession=sqlSessionFactory.openSession()){
    OrdersMapper mapper=sqlSession.getMapper(OrdersMapper.class);
    OrderResultHandler handler=new OrderResultHandler();
    Map<String,Object> parameter=new HashMap<String,Object>();
    parameter.put("orderId",1);
    mapper.getOrder3(parameter,handler);
    assertNull(parameter.get("order"));
    assertEquals(Integer.valueOf(3),parameter.get("detailCount"));
    assertEquals("Anonymous",handler.getResult().get(0).getCustomerName());
  }
 }
