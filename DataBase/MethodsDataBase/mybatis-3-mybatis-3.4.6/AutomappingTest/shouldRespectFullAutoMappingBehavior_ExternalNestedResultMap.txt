@Test public void shouldRespectFullAutoMappingBehavior_ExternalNestedResultMap(){
  sqlSessionFactory.getConfiguration().setAutoMappingBehavior(AutoMappingBehavior.FULL);
  SqlSession sqlSession=sqlSessionFactory.openSession();
  try {
    Mapper mapper=sqlSession.getMapper(Mapper.class);
    User user=mapper.getUserWithPets_External(2);
    Assert.assertEquals(Integer.valueOf(2),user.getId());
    Assert.assertEquals("User2",user.getName());
    Assert.assertEquals("Chien",user.getPets().get(0).getPetName());
    Assert.assertEquals("John",user.getPets().get(0).getBreeder().getBreederName());
  }
  finally {
    sqlSession.close();
  }
}
