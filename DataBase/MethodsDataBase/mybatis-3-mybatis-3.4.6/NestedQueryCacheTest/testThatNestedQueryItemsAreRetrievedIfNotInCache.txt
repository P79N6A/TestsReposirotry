@Test public void testThatNestedQueryItemsAreRetrievedIfNotInCache() throws Exception {
  SqlSession sqlSession=sqlSessionFactory.openSession();
  Author author=null;
  try {
    final BlogMapper blogMapper=sqlSession.getMapper(BlogMapper.class);
    author=blogMapper.selectBlog(1).getAuthor();
    assertNotNull("blog author",blogMapper.selectBlog(1).getAuthor());
    assertNotNull("blog author",blogMapper.selectBlogUsingConstructor(1).getAuthor());
  }
  finally {
    sqlSession.close();
  }
  sqlSession=sqlSessionFactory.openSession();
  try {
    final AuthorMapper authorMapper=sqlSession.getMapper(AuthorMapper.class);
    Author cachedAuthor=authorMapper.selectAuthor(101);
    assertThat(cachedAuthor).isSameAs(author);
  }
  finally {
    sqlSession.close();
  }
}
