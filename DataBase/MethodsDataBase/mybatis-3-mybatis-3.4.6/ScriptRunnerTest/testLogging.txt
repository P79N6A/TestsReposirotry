@Test public void testLogging() throws Exception {
  DataSource ds=createUnpooledDataSource(JPETSTORE_PROPERTIES);
  Connection conn=ds.getConnection();
  ScriptRunner runner=new ScriptRunner(conn);
  runner.setAutoCommit(true);
  runner.setStopOnError(false);
  runner.setErrorLogWriter(null);
  runner.setSendFullScript(false);
  StringWriter sw=new StringWriter();
  PrintWriter logWriter=new PrintWriter(sw);
  runner.setLogWriter(logWriter);
  Reader reader=new StringReader("select userid from account where userid = 'j2ee';");
  runner.runScript(reader);
  conn.close();
  assertEquals("select userid from account where userid = 'j2ee'" + System.getProperty("line.separator") + System.getProperty("line.separator")+ "USERID\t"+ System.getProperty("line.separator")+ "j2ee\t"+ System.getProperty("line.separator"),sw.toString());
}
