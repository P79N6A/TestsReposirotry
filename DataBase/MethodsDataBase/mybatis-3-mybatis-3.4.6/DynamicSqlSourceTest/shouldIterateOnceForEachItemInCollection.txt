@Test public void shouldIterateOnceForEachItemInCollection() throws Exception {
  final HashMap<String,String[]> parameterObject=new HashMap<String,String[]>(){
{
      put("array",new String[]{"one","two","three"});
    }
  }
;
  final String expected="SELECT * FROM BLOG WHERE ID in (  one = ? AND two = ? AND three = ? )";
  DynamicSqlSource source=createDynamicSqlSource(new TextSqlNode("SELECT * FROM BLOG WHERE ID in"),new ForEachSqlNode(new Configuration(),mixedContents(new TextSqlNode("${item} = #{item}")),"array","index","item","(",")","AND"));
  BoundSql boundSql=source.getBoundSql(parameterObject);
  assertEquals(expected,boundSql.getSql());
  assertEquals(3,boundSql.getParameterMappings().size());
  assertEquals("__frch_item_0",boundSql.getParameterMappings().get(0).getProperty());
  assertEquals("__frch_item_1",boundSql.getParameterMappings().get(1).getProperty());
  assertEquals("__frch_item_2",boundSql.getParameterMappings().get(2).getProperty());
}
