/** 
 * Contrary to the spec, some drivers require case-sensitive column names when getting result.
 * @see <a href="http://code.google.com/p/mybatis/issues/detail?id=557">Issue 557</a>
 */
@Test public void shouldRetainColumnNameCase() throws Exception {
  final MappedStatement ms=getMappedStatement();
  final Executor executor=null;
  final ParameterHandler parameterHandler=null;
  final ResultHandler resultHandler=null;
  final BoundSql boundSql=null;
  final RowBounds rowBounds=new RowBounds(0,100);
  final DefaultResultSetHandler fastResultSetHandler=new DefaultResultSetHandler(executor,ms,parameterHandler,resultHandler,boundSql,rowBounds);
  when(stmt.getResultSet()).thenReturn(rs);
  when(rs.getMetaData()).thenReturn(rsmd);
  when(rs.getType()).thenReturn(ResultSet.TYPE_FORWARD_ONLY);
  when(rs.next()).thenReturn(true).thenReturn(false);
  when(rs.getInt("CoLuMn1")).thenReturn(100);
  when(rs.wasNull()).thenReturn(false);
  when(rsmd.getColumnCount()).thenReturn(1);
  when(rsmd.getColumnLabel(1)).thenReturn("CoLuMn1");
  when(rsmd.getColumnType(1)).thenReturn(Types.INTEGER);
  when(rsmd.getColumnClassName(1)).thenReturn(Integer.class.getCanonicalName());
  when(stmt.getConnection()).thenReturn(conn);
  when(conn.getMetaData()).thenReturn(dbmd);
  when(dbmd.supportsMultipleResultSets()).thenReturn(false);
  final List<Object> results=fastResultSetHandler.handleResultSets(stmt);
  assertEquals(1,results.size());
  assertEquals(Integer.valueOf(100),((HashMap)results.get(0)).get("cOlUmN1"));
}
