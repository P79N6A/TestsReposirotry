@Test public void testRenameFileWithNoAccess() throws IOException {
  final FileSystem fs=FileSystem.getLocalFileSystem();
  final File srcFile=temporaryFolder.newFile("someFile.txt");
  final File destFile=new File(temporaryFolder.newFolder(),"target");
  Assume.assumeTrue(srcFile.getParentFile().setWritable(false,false));
  Assume.assumeTrue(srcFile.setWritable(false,false));
  try {
    final Path srcFilePath=new Path(srcFile.toURI());
    final Path destFilePath=new Path(destFile.toURI());
    assertFalse(fs.rename(srcFilePath,destFilePath));
  }
  finally {
    srcFile.getParentFile().setWritable(true,false);
    srcFile.setWritable(true,false);
  }
}
