@Test public void testStateDoesNotInterfere() throws Exception {
  TestOperator testOperator=new TestOperator();
  KeyedOneInputStreamOperatorTestHarness<Integer,Tuple2<Integer,String>,String> testHarness=new KeyedOneInputStreamOperatorTestHarness<>(testOperator,new TestKeySelector(),BasicTypeInfo.INT_TYPE_INFO);
  testHarness.open();
  testHarness.processElement(new Tuple2<>(0,"SET_STATE:HELLO"),0);
  testHarness.processElement(new Tuple2<>(1,"SET_STATE:CIAO"),0);
  testHarness.processElement(new Tuple2<>(1,"EMIT_STATE"),0);
  testHarness.processElement(new Tuple2<>(0,"EMIT_STATE"),0);
  assertThat(extractResult(testHarness),contains("ON_ELEMENT:1:CIAO","ON_ELEMENT:0:HELLO"));
}
