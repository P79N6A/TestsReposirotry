@Test public void testSafetyNetClose() throws Exception {
  setup(20);
  startThreads();
  joinThreads();
  for (int i=0; i < 5 && unclosedCounter.get() > 0; ++i) {
    System.gc();
    Thread.sleep(50);
  }
  Assert.assertEquals(0,unclosedCounter.get());
  closeableRegistry.close();
}
