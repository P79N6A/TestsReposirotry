@Test public void testStartStopAssignLeadership() throws Exception {
  final UUID uuid=UUID.randomUUID();
  final SingleLeaderElectionService service=new SingleLeaderElectionService(executor,uuid);
  final LeaderContender contender=mockContender(service);
  final LeaderContender otherContender=mockContender(service);
  service.start(contender);
  verify(contender,times(1)).grantLeadership(uuid);
  service.stop();
  verify(contender,times(1)).revokeLeadership();
  service.start(otherContender);
  verify(otherContender,times(1)).grantLeadership(uuid);
  verify(contender,times(1)).grantLeadership(uuid);
  verify(contender,times(1)).revokeLeadership();
}
