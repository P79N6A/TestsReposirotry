/** 
 * The test cluster has the following resources: - 2 Nodes with 4096 MB each. - RM_SCHEDULER_MINIMUM_ALLOCATION_MB is 512 <p>We allocate: 1 JobManager with 256 MB (will be automatically upgraded to 512 due to min alloc mb) 5 TaskManagers with 1585 MB <p>user sees a total request of: 8181 MB (fits) system sees a total request of: 8437 (doesn't fit due to min alloc mb)
 */
@Ignore("The test is too resource consuming (8.5 GB of memory)") @Test public void testResourceComputation() throws IOException {
  addTestAppender(AbstractYarnClusterDescriptor.class,Level.WARN);
  LOG.info("Starting testResourceComputation()");
  runWithArgs(new String[]{"-j",flinkUberjar.getAbsolutePath(),"-t",flinkLibFolder.getAbsolutePath(),"-n","5","-jm","256m","-tm","1585m"},"Number of connected TaskManagers changed to",null,RunTypes.YARN_SESSION,0);
  LOG.info("Finished testResourceComputation()");
  checkForLogString("This YARN session requires 8437MB of memory in the cluster. There are currently only 8192MB available.");
}
