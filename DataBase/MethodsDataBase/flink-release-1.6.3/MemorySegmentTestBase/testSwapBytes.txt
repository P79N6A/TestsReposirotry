@Test public void testSwapBytes(){
  final int halfPageSize=pageSize / 2;
  final byte[] bytes1=new byte[pageSize];
  final byte[] bytes2=new byte[halfPageSize];
  Arrays.fill(bytes2,(byte)1);
  MemorySegment seg1=createSegment(pageSize);
  MemorySegment seg2=createSegment(halfPageSize);
  seg1.put(0,bytes1);
  seg2.put(0,bytes2);
  int pos=0;
  while (pos < halfPageSize) {
    int len=random.nextInt(pageSize / 40);
    len=Math.min(len,halfPageSize - pos);
    seg1.swapBytes(new byte[len],seg2,pos + halfPageSize,pos,len);
    pos+=len;
  }
  for (int i=0; i < halfPageSize; i++) {
    assertEquals((byte)0,seg1.get(i));
    assertEquals((byte)0,seg2.get(i));
    assertEquals((byte)1,seg1.get(i + halfPageSize));
  }
}
