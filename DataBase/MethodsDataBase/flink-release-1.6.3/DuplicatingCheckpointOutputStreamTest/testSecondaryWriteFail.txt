/** 
 * This is the first of a set of tests that check that exceptions from the secondary stream do not impact that we can create a result for the first stream.
 */
@Test public void testSecondaryWriteFail() throws Exception {
  DuplicatingCheckpointOutputStream duplicatingStream=createDuplicatingStreamWithFailingSecondary();
  testFailingSecondaryStream(duplicatingStream,() -> {
    for (int i=0; i < 128; i++) {
      duplicatingStream.write(42);
    }
  }
);
}
