/** 
 * Tests that we can wait for the termination of the rpc service
 */
@Test(timeout=60000) public void testTerminationFuture() throws Exception {
  final ActorSystem actorSystem=AkkaUtils.createDefaultActorSystem();
  final AkkaRpcService rpcService=new AkkaRpcService(actorSystem,Time.milliseconds(1000));
  CompletableFuture<Void> terminationFuture=rpcService.getTerminationFuture();
  assertFalse(terminationFuture.isDone());
  CompletableFuture.runAsync(rpcService::stopService,actorSystem.dispatcher());
  terminationFuture.get();
}
