@Test public void testScopeGenerationWithoutReporters() throws Exception {
  Configuration config=new Configuration();
  config.setString(MetricOptions.SCOPE_NAMING_TM,"A.B.C.D");
  MetricRegistryImpl testRegistry=new MetricRegistryImpl(MetricRegistryConfiguration.fromConfiguration(config));
  try {
    TaskManagerMetricGroup group=new TaskManagerMetricGroup(testRegistry,"host","id");
    assertEquals("MetricReporters list should be empty",0,testRegistry.getReporters().size());
    assertEquals("A.B.X.D.1",group.getMetricIdentifier("1",FILTER_C));
    assertEquals("A.X.C.D.1",group.getMetricIdentifier("1",FILTER_B));
    assertEquals("A.X.C.D.1",group.getMetricIdentifier("1",FILTER_B,-1));
    assertEquals("A.X.C.D.1",group.getMetricIdentifier("1",FILTER_B,2));
  }
  finally {
    testRegistry.shutdown().get();
  }
}
