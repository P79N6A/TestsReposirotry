@Test public void testDeleteDirectory() throws Exception {
  File doesNotExist=new File(tmp.newFolder(),"abc");
  FileUtils.deleteDirectory(doesNotExist);
  File cannotDeleteParent=tmp.newFolder();
  File cannotDeleteChild=new File(cannotDeleteParent,"child");
  try {
    assumeTrue(cannotDeleteChild.createNewFile());
    assumeTrue(cannotDeleteParent.setWritable(false));
    assumeTrue(cannotDeleteChild.setWritable(false));
    FileUtils.deleteDirectory(cannotDeleteParent);
    fail("this should fail with an exception");
  }
 catch (  AccessDeniedException ignored) {
  }
 finally {
    cannotDeleteParent.setWritable(true);
    cannotDeleteChild.setWritable(true);
  }
}
