@Test public void testRestoreTailWithNewId() throws Exception {
  OperatorID headOperatorID=new OperatorID(42L,42L);
  JobManagerTaskRestore restore=createRunAndCheckpointOperatorChain(headOperatorID,new CounterOperator(),new OperatorID(44L,44L),new CounterOperator(),Optional.empty());
  TaskStateSnapshot stateHandles=restore.getTaskStateSnapshot();
  assertEquals(2,stateHandles.getSubtaskStateMappings().size());
  createRunAndCheckpointOperatorChain(headOperatorID,new CounterOperator(),new OperatorID(4444L,4444L),new CounterOperator(),Optional.of(restore));
  assertEquals(Collections.singleton(headOperatorID),RESTORED_OPERATORS);
}
