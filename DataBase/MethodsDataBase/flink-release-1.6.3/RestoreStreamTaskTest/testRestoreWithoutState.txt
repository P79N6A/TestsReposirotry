@Test public void testRestoreWithoutState() throws Exception {
  OperatorID headOperatorID=new OperatorID(42L,42L);
  OperatorID tailOperatorID=new OperatorID(44L,44L);
  JobManagerTaskRestore restore=createRunAndCheckpointOperatorChain(headOperatorID,new StatelessOperator(),tailOperatorID,new CounterOperator(),Optional.empty());
  TaskStateSnapshot stateHandles=restore.getTaskStateSnapshot();
  assertEquals(2,stateHandles.getSubtaskStateMappings().size());
  createRunAndCheckpointOperatorChain(headOperatorID,new StatelessOperator(),tailOperatorID,new CounterOperator(),Optional.of(restore));
  assertEquals(new HashSet<>(Arrays.asList(headOperatorID,tailOperatorID)),RESTORED_OPERATORS);
}
