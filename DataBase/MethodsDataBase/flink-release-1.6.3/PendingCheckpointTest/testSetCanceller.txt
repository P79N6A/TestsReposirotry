@Test public void testSetCanceller() throws Exception {
  final CheckpointProperties props=new CheckpointProperties(false,CheckpointType.CHECKPOINT,true,true,true,true,true);
  PendingCheckpoint aborted=createPendingCheckpoint(props);
  aborted.abortDeclined();
  assertTrue(aborted.isDiscarded());
  assertFalse(aborted.setCancellerHandle(mock(ScheduledFuture.class)));
  PendingCheckpoint pending=createPendingCheckpoint(props);
  ScheduledFuture<?> canceller=mock(ScheduledFuture.class);
  assertTrue(pending.setCancellerHandle(canceller));
  pending.abortDeclined();
  verify(canceller).cancel(false);
}
