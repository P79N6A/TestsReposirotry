/** 
 * FLINK-5985. <p>This tests checks the inverse of  {@link #testNullSubtaskStateLeadsToStatelessTask()}. We want to test that for subtasks that acknowledge some state are given an entry in the task states of the checkpoint.
 */
@Test public void testNonNullSubtaskStateLeadsToStatefulTask() throws Exception {
  PendingCheckpoint pending=createPendingCheckpoint(CheckpointProperties.forCheckpoint(CheckpointRetentionPolicy.NEVER_RETAIN_AFTER_TERMINATION));
  pending.acknowledgeTask(ATTEMPT_ID,mock(TaskStateSnapshot.class),mock(CheckpointMetrics.class));
  Assert.assertFalse(pending.getOperatorStates().isEmpty());
}
