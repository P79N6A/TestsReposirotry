/** 
 * FLINK-5985. <p>Ensures that subtasks that acknowledge their state as 'null' are considered stateless. This means that they should not appear in the task states map of the checkpoint.
 */
@Test public void testNullSubtaskStateLeadsToStatelessTask() throws Exception {
  PendingCheckpoint pending=createPendingCheckpoint(CheckpointProperties.forCheckpoint(CheckpointRetentionPolicy.NEVER_RETAIN_AFTER_TERMINATION));
  pending.acknowledgeTask(ATTEMPT_ID,null,mock(CheckpointMetrics.class));
  Assert.assertTrue(pending.getOperatorStates().isEmpty());
}
