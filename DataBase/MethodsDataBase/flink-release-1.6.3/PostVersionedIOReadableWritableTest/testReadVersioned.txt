@Test public void testReadVersioned() throws IOException {
  String payload="test-data";
  TestPostVersionedReadableWritable versionedReadableWritable=new TestPostVersionedReadableWritable(payload);
  byte[] serialized;
  try (ByteArrayOutputStreamWithPos out=new ByteArrayOutputStreamWithPos()){
    versionedReadableWritable.write(new DataOutputViewStreamWrapper(out));
    serialized=out.toByteArray();
  }
   TestPostVersionedReadableWritable restoredVersionedReadableWritable=new TestPostVersionedReadableWritable();
  try (ByteArrayInputStreamWithPos in=new ByteArrayInputStreamWithPos(serialized)){
    restoredVersionedReadableWritable.read(in);
  }
   Assert.assertEquals(payload,restoredVersionedReadableWritable.getData());
}
