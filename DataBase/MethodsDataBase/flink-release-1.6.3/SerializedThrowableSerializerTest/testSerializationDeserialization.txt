@Test public void testSerializationDeserialization() throws Exception {
  final String lastExceptionMessage="message";
  final String causeMessage="cause";
  final SerializedThrowable serializedThrowable=new SerializedThrowable(new RuntimeException(lastExceptionMessage,new RuntimeException(causeMessage)));
  final String json=objectMapper.writeValueAsString(serializedThrowable);
  final SerializedThrowable deserializedSerializedThrowable=objectMapper.readValue(json,SerializedThrowable.class);
  assertThat(deserializedSerializedThrowable.getMessage(),equalTo(lastExceptionMessage));
  assertThat(deserializedSerializedThrowable.getFullStringifiedStackTrace(),equalTo(serializedThrowable.getFullStringifiedStackTrace()));
  assertThat(deserializedSerializedThrowable.getCause().getMessage(),equalTo(causeMessage));
  assertThat(deserializedSerializedThrowable.getCause(),instanceOf(SerializedThrowable.class));
}
