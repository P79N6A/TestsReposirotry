/** 
 * Tests  {@link NetworkBufferPool#requestMemorySegments(int)} with the invalid argument tocause exception.
 */
@Test public void testRequestMemorySegmentsWithInvalidArgument() throws Exception {
  final int numBuffers=10;
  NetworkBufferPool globalPool=new NetworkBufferPool(numBuffers,128);
  try {
    globalPool.requestMemorySegments(0);
    fail("Should throw an IllegalArgumentException");
  }
 catch (  IllegalArgumentException e) {
    assertEquals(globalPool.getNumberOfAvailableMemorySegments(),numBuffers);
  }
 finally {
    globalPool.destroy();
  }
}
