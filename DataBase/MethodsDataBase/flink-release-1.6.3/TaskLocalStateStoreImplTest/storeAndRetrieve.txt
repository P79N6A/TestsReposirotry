/** 
 * Tests basic store/retrieve of local state.
 */
@Test public void storeAndRetrieve() throws Exception {
  final int chkCount=3;
  for (int i=0; i < chkCount; ++i) {
    Assert.assertNull(taskLocalStateStore.retrieveLocalState(i));
  }
  List<TaskStateSnapshot> taskStateSnapshots=storeStates(chkCount);
  checkStoredAsExpected(taskStateSnapshots,0,chkCount);
  Assert.assertNull(taskLocalStateStore.retrieveLocalState(chkCount + 1));
}
