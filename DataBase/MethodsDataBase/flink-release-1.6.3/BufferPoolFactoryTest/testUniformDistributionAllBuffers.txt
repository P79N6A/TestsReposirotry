/** 
 * Tests that buffers, once given to an initial buffer pool, get re-distributed to a second one in case both buffer pools request half of the available buffer count.
 */
@Test public void testUniformDistributionAllBuffers() throws IOException {
  BufferPool first=networkBufferPool.createBufferPool(networkBufferPool.getTotalNumberOfMemorySegments() / 2,Integer.MAX_VALUE);
  assertEquals(networkBufferPool.getTotalNumberOfMemorySegments(),first.getNumBuffers());
  BufferPool second=networkBufferPool.createBufferPool(networkBufferPool.getTotalNumberOfMemorySegments() / 2,Integer.MAX_VALUE);
  assertEquals(networkBufferPool.getTotalNumberOfMemorySegments() / 2,first.getNumBuffers());
  assertEquals(networkBufferPool.getTotalNumberOfMemorySegments() / 2,second.getNumBuffers());
}
