/** 
 * Tests a checkpoint history with allowed size 0.
 */
@Test public void testZeroMaxSizeHistory() throws Exception {
  CheckpointStatsHistory history=new CheckpointStatsHistory(0);
  history.addInProgressCheckpoint(createPendingCheckpointStats(0));
  assertFalse(history.replacePendingCheckpointById(createCompletedCheckpointStats(0)));
  CheckpointStatsHistory snapshot=history.createSnapshot();
  int counter=0;
  for (  AbstractCheckpointStats ignored : snapshot.getCheckpoints()) {
    counter++;
  }
  assertEquals(0,counter);
  assertNotNull(snapshot.getCheckpointById(0));
}
