/** 
 * Tests that a snapshot cannot be modified or copied.
 */
@Test public void testModifySnapshot() throws Exception {
  CheckpointStatsHistory history=new CheckpointStatsHistory(3);
  history.addInProgressCheckpoint(createPendingCheckpointStats(0));
  history.addInProgressCheckpoint(createPendingCheckpointStats(1));
  history.addInProgressCheckpoint(createPendingCheckpointStats(2));
  CheckpointStatsHistory snapshot=history.createSnapshot();
  try {
    snapshot.addInProgressCheckpoint(createPendingCheckpointStats(4));
    fail("Did not throw expected Exception");
  }
 catch (  UnsupportedOperationException ignored) {
  }
  try {
    snapshot.replacePendingCheckpointById(createCompletedCheckpointStats(2));
    fail("Did not throw expected Exception");
  }
 catch (  UnsupportedOperationException ignored) {
  }
  try {
    snapshot.createSnapshot();
    fail("Did not throw expected Exception");
  }
 catch (  UnsupportedOperationException ignored) {
  }
}
