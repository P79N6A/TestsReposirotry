@Test public void testRetainedSliceIndex() throws Exception {
  ByteBuf retainedSlice=buffer.retainedSlice(0,buffer.capacity());
  assertEquals(0,retainedSlice.readerIndex());
  retainedSlice.release();
  retainedSlice=buffer.retainedSlice(0,buffer.capacity() - 1);
  assertEquals(0,retainedSlice.readerIndex());
  retainedSlice.release();
  retainedSlice=buffer.retainedSlice(1,buffer.capacity() - 1);
  assertEquals(0,retainedSlice.readerIndex());
  retainedSlice.release();
  retainedSlice=buffer.retainedSlice(1,buffer.capacity() - 2);
  assertEquals(0,retainedSlice.readerIndex());
  retainedSlice.release();
  retainedSlice=buffer.retainedSlice(0,buffer.capacity());
  assertEquals(buffer.capacity(),retainedSlice.writerIndex());
  retainedSlice.release();
  retainedSlice=buffer.retainedSlice(0,buffer.capacity() - 1);
  assertEquals(buffer.capacity() - 1,retainedSlice.writerIndex());
  retainedSlice.release();
  retainedSlice=buffer.retainedSlice(1,buffer.capacity() - 1);
  assertEquals(buffer.capacity() - 1,retainedSlice.writerIndex());
  retainedSlice.release();
  retainedSlice=buffer.retainedSlice(1,buffer.capacity() - 2);
  assertEquals(buffer.capacity() - 2,retainedSlice.writerIndex());
  retainedSlice.release();
}
