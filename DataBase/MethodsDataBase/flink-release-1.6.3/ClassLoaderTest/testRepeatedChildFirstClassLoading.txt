@Test public void testRepeatedChildFirstClassLoading() throws Exception {
  final ClassLoader parentClassLoader=getClass().getClassLoader();
  final URL childCodePath=getClass().getProtectionDomain().getCodeSource().getLocation();
  final URLClassLoader childClassLoader=FlinkUserCodeClassLoaders.childFirst(new URL[]{childCodePath},parentClassLoader,new String[0]);
  final String className=ClassLoaderTest.class.getName();
  final Class<?> clazz1=Class.forName(className,false,parentClassLoader);
  final Class<?> clazz2=Class.forName(className,false,childClassLoader);
  final Class<?> clazz3=Class.forName(className,false,childClassLoader);
  final Class<?> clazz4=Class.forName(className,false,childClassLoader);
  assertNotEquals(clazz1,clazz2);
  assertEquals(clazz2,clazz3);
  assertEquals(clazz2,clazz4);
  childClassLoader.close();
}
