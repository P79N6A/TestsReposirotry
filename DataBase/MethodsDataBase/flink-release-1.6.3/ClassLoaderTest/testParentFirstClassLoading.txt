@Test public void testParentFirstClassLoading() throws Exception {
  final ClassLoader parentClassLoader=getClass().getClassLoader();
  final URL childCodePath=getClass().getProtectionDomain().getCodeSource().getLocation();
  final URLClassLoader childClassLoader1=FlinkUserCodeClassLoaders.parentFirst(new URL[]{childCodePath},parentClassLoader);
  final URLClassLoader childClassLoader2=FlinkUserCodeClassLoaders.parentFirst(new URL[]{childCodePath},parentClassLoader);
  final String className=ClassLoaderTest.class.getName();
  final Class<?> clazz1=Class.forName(className,false,parentClassLoader);
  final Class<?> clazz2=Class.forName(className,false,childClassLoader1);
  final Class<?> clazz3=Class.forName(className,false,childClassLoader2);
  assertEquals(clazz1,clazz2);
  assertEquals(clazz1,clazz3);
  childClassLoader1.close();
  childClassLoader2.close();
}
