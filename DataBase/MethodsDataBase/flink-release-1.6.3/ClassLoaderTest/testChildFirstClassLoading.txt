@Test public void testChildFirstClassLoading() throws Exception {
  final ClassLoader parentClassLoader=getClass().getClassLoader();
  final URL childCodePath=getClass().getProtectionDomain().getCodeSource().getLocation();
  final URLClassLoader childClassLoader1=FlinkUserCodeClassLoaders.childFirst(new URL[]{childCodePath},parentClassLoader,new String[0]);
  final URLClassLoader childClassLoader2=FlinkUserCodeClassLoaders.childFirst(new URL[]{childCodePath},parentClassLoader,new String[0]);
  final String className=ClassLoaderTest.class.getName();
  final Class<?> clazz1=Class.forName(className,false,parentClassLoader);
  final Class<?> clazz2=Class.forName(className,false,childClassLoader1);
  final Class<?> clazz3=Class.forName(className,false,childClassLoader2);
  assertNotEquals(clazz1,clazz2);
  assertNotEquals(clazz1,clazz3);
  assertNotEquals(clazz2,clazz3);
  childClassLoader1.close();
  childClassLoader2.close();
}
