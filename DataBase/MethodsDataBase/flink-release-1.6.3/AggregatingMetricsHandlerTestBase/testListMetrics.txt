@Test public void testListMetrics() throws Exception {
  HandlerRequest<EmptyRequestBody,P> request=new HandlerRequest<>(EmptyRequestBody.getInstance(),handler.getMessageHeaders().getUnresolvedMessageParameters(),pathParameters,Collections.emptyMap());
  AggregatedMetricsResponseBody response=handler.handleRequest(request,MOCK_DISPATCHER_GATEWAY).get();
  List<String> availableMetrics=response.getMetrics().stream().map(AggregatedMetric::getId).sorted().collect(Collectors.toList());
  assertEquals(2,availableMetrics.size());
  assertEquals("abc.metric1",availableMetrics.get(0));
  assertEquals("abc.metric2",availableMetrics.get(1));
}
