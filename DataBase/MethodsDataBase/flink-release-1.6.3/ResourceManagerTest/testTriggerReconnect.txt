@Test public void testTriggerReconnect(){
  new JavaTestKit(system){
{
      new Within(duration("10 seconds")){
        @Override protected void run(){
          Configuration shortTimeoutConfig=config.clone();
          shortTimeoutConfig.setString(AkkaOptions.LOOKUP_TIMEOUT,"99999 s");
          fakeJobManager=TestingUtils.createForwardingActor(system,getTestActor(),HighAvailabilityServices.DEFAULT_LEADER_ID,Option.<String>empty());
          jobManagerLeaderRetrievalService.notifyListener(fakeJobManager.path(),HighAvailabilityServices.DEFAULT_LEADER_ID);
          resourceManager=TestingUtils.createResourceManager(system,shortTimeoutConfig,highAvailabilityServices);
          RegisterResourceManager msg=expectMsgClass(RegisterResourceManager.class);
          resourceManager.tell(new RegisterResourceManagerSuccessful(fakeJobManager.actor(),Collections.<ResourceID>emptyList()),fakeJobManager);
          resourceManager.tell(new TriggerRegistrationAtJobManager(fakeJobManager.actor()),fakeJobManager);
          expectMsgClass(RegisterResourceManager.class);
        }
      }
;
    }
  }
;
}
