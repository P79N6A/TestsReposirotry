@Test public void testSlotAllocationNoResourceManager() throws Exception {
  final JobID jid=new JobID();
  final SlotPool pool=new SlotPool(rpcService,jid,LocationPreferenceSchedulingStrategy.getInstance(),SystemClock.getInstance(),TestingUtils.infiniteTime(),TestingUtils.infiniteTime());
  try {
    pool.start(JobMasterId.generate(),"foobar");
    CompletableFuture<LogicalSlot> future=pool.allocateSlot(new SlotRequestId(),new ScheduledUnit(SchedulerTestUtils.getDummyTask()),SlotProfile.noLocality(DEFAULT_TESTING_PROFILE),true,fastTimeout);
    try {
      future.get();
      fail("We expected an ExecutionException.");
    }
 catch (    ExecutionException e) {
      assertTrue(ExceptionUtils.stripExecutionException(e) instanceof TimeoutException);
    }
  }
  finally {
    RpcUtils.terminateRpcEndpoint(pool,timeout);
  }
}
