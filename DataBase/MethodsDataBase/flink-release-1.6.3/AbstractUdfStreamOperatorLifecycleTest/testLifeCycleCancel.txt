@Test public void testLifeCycleCancel() throws Exception {
  ACTUAL_ORDER_TRACKING.clear();
  Configuration taskManagerConfig=new Configuration();
  StreamConfig cfg=new StreamConfig(new Configuration());
  MockSourceFunction srcFun=new MockSourceFunction();
  cfg.setStreamOperator(new LifecycleTrackingStreamSource<>(srcFun,false));
  cfg.setOperatorID(new OperatorID());
  cfg.setTimeCharacteristic(TimeCharacteristic.ProcessingTime);
  Task task=StreamTaskTest.createTask(SourceStreamTask.class,cfg,taskManagerConfig);
  task.startTaskThread();
  LifecycleTrackingStreamSource.runStarted.await();
  task.cancelExecution();
  task.getExecutingThread().join();
  assertEquals(ExecutionState.CANCELED,task.getExecutionState());
  assertEquals(EXPECTED_CALL_ORDER_CANCEL_RUNNING,ACTUAL_ORDER_TRACKING);
}
