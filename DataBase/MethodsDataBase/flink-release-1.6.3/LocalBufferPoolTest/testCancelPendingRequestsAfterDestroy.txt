@Test @SuppressWarnings("unchecked") public void testCancelPendingRequestsAfterDestroy() throws IOException {
  BufferListener listener=Mockito.mock(BufferListener.class);
  localBufferPool.setNumBuffers(1);
  Buffer available=localBufferPool.requestBuffer();
  Buffer unavailable=localBufferPool.requestBuffer();
  assertNull(unavailable);
  localBufferPool.addBufferListener(listener);
  localBufferPool.lazyDestroy();
  available.recycleBuffer();
  verify(listener,times(1)).notifyBufferDestroyed();
}
