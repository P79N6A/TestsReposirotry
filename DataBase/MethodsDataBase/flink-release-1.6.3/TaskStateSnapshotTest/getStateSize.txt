@Test public void getStateSize(){
  Random random=new Random(0x42);
  TaskStateSnapshot taskStateSnapshot=new TaskStateSnapshot();
  Assert.assertEquals(0,taskStateSnapshot.getStateSize());
  OperatorSubtaskState emptyOperatorSubtaskState=new OperatorSubtaskState();
  Assert.assertFalse(emptyOperatorSubtaskState.hasState());
  taskStateSnapshot.putSubtaskStateByOperatorID(new OperatorID(),emptyOperatorSubtaskState);
  Assert.assertEquals(0,taskStateSnapshot.getStateSize());
  OperatorStateHandle stateHandle_1=StateHandleDummyUtil.createNewOperatorStateHandle(2,random);
  OperatorSubtaskState nonEmptyOperatorSubtaskState_1=new OperatorSubtaskState(stateHandle_1,null,null,null);
  OperatorStateHandle stateHandle_2=StateHandleDummyUtil.createNewOperatorStateHandle(2,random);
  OperatorSubtaskState nonEmptyOperatorSubtaskState_2=new OperatorSubtaskState(null,stateHandle_2,null,null);
  taskStateSnapshot.putSubtaskStateByOperatorID(new OperatorID(),nonEmptyOperatorSubtaskState_1);
  taskStateSnapshot.putSubtaskStateByOperatorID(new OperatorID(),nonEmptyOperatorSubtaskState_2);
  long totalSize=stateHandle_1.getStateSize() + stateHandle_2.getStateSize();
  Assert.assertEquals(totalSize,taskStateSnapshot.getStateSize());
}
