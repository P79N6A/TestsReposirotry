@Test public void testTrailingEmptyField(){
  try {
    FieldParser<T> parser=getParser();
    byte[] bytes="||".getBytes(ConfigConstants.DEFAULT_CHARSET);
    for (int i=0; i < 2; i++) {
      int numRead=parser.parseField(bytes,i,bytes.length,new byte[]{'|'},parser.createValue());
      assertEquals(FieldParser.ParseErrorState.EMPTY_COLUMN,parser.getErrorState());
      if (this.allowsEmptyField()) {
        assertTrue("Parser declared the empty string as invalid.",numRead != -1);
        assertEquals("Invalid number of bytes read returned.",i + 1,numRead);
      }
 else {
        assertTrue("Parser accepted the empty string.",numRead == -1);
      }
      parser.resetParserState();
    }
  }
 catch (  Exception e) {
    System.err.println(e.getMessage());
    e.printStackTrace();
    fail("Test erroneous: " + e.getMessage());
  }
}
