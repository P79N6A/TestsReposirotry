/** 
 * Verifies that when attempting to create a group with the name of an existing one the existing one will be returned instead.
 */
@Test public void testDuplicateGroupName() throws Exception {
  Configuration config=new Configuration();
  MetricRegistryImpl registry=new MetricRegistryImpl(MetricRegistryConfiguration.fromConfiguration(config));
  MetricGroup root=new TaskManagerMetricGroup(registry,"host","id");
  MetricGroup group1=root.addGroup("group");
  MetricGroup group2=root.addGroup("group");
  MetricGroup group3=root.addGroup("group");
  Assert.assertTrue(group1 == group2 && group2 == group3);
  registry.shutdown().get();
}
