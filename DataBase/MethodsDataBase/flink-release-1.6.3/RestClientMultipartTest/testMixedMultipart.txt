@Test public void testMixedMultipart() throws Exception {
  Collection<FileUpload> files=MULTIPART_UPLOAD_RESOURCE.getFilesToUpload().stream().map(file -> new FileUpload(file.toPath(),"application/octet-stream")).collect(Collectors.toList());
  MultipartUploadResource.TestRequestBody json=new MultipartUploadResource.TestRequestBody();
  CompletableFuture<EmptyResponseBody> responseFuture=restClient.sendRequest(MULTIPART_UPLOAD_RESOURCE.getServerSocketAddress().getHostName(),MULTIPART_UPLOAD_RESOURCE.getServerSocketAddress().getPort(),MULTIPART_UPLOAD_RESOURCE.getMixedHandler().getMessageHeaders(),EmptyMessageParameters.getInstance(),json,files);
  responseFuture.get();
  Assert.assertEquals(json,MULTIPART_UPLOAD_RESOURCE.getMixedHandler().lastReceivedRequest);
}
