@Test public void testRegisterStatesAtRegistry(){
  OperatorState state=mock(OperatorState.class);
  Map<OperatorID,OperatorState> operatorStates=new HashMap<>();
  operatorStates.put(new OperatorID(),state);
  CompletedCheckpoint checkpoint=new CompletedCheckpoint(new JobID(),0,0,1,operatorStates,Collections.emptyList(),CheckpointProperties.forCheckpoint(CheckpointRetentionPolicy.RETAIN_ON_FAILURE),new TestCompletedCheckpointStorageLocation());
  SharedStateRegistry sharedStateRegistry=new SharedStateRegistry();
  checkpoint.registerSharedStatesAfterRestored(sharedStateRegistry);
  verify(state,times(1)).registerSharedStates(sharedStateRegistry);
}
