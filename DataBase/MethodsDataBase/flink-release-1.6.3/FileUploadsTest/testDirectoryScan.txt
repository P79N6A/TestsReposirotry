@Test public void testDirectoryScan() throws IOException {
  Path rootDir=Paths.get("root");
  Path rootFile=rootDir.resolve("rootFile");
  Path subDir=rootDir.resolve("sub");
  Path subFile=subDir.resolve("subFile");
  Path tmp=temporaryFolder.getRoot().toPath();
  Files.createDirectory(tmp.resolve(rootDir));
  Files.createDirectory(tmp.resolve(subDir));
  Files.createFile(tmp.resolve(rootFile));
  Files.createFile(tmp.resolve(subFile));
  try (FileUploads fileUploads=new FileUploads(tmp.resolve(rootDir))){
    Collection<Path> detectedFiles=fileUploads.getUploadedFiles().stream().map(File::toPath).collect(Collectors.toList());
    Assert.assertEquals(2,detectedFiles.size());
    Assert.assertTrue(detectedFiles.contains(tmp.resolve(rootFile)));
    Assert.assertTrue(detectedFiles.contains(tmp.resolve(subFile)));
  }
 }
