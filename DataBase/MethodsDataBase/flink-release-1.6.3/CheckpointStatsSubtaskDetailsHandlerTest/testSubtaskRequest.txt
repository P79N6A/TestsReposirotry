/** 
 * Tests a subtask details request.
 */
@Test public void testSubtaskRequest() throws Exception {
  PendingCheckpointStats checkpoint=mock(PendingCheckpointStats.class);
  when(checkpoint.getCheckpointId()).thenReturn(1992139L);
  when(checkpoint.getStatus()).thenReturn(CheckpointStatsStatus.IN_PROGRESS);
  when(checkpoint.getTriggerTimestamp()).thenReturn(0L);
  TaskStateStats task=createTaskStateStats(1237);
  when(checkpoint.getTaskStateStats(any(JobVertexID.class))).thenReturn(task);
  JsonNode rootNode=triggerRequest(checkpoint);
  assertEquals(checkpoint.getCheckpointId(),rootNode.get("id").asLong());
  assertEquals(checkpoint.getStatus().toString(),rootNode.get("status").asText());
  verifyTaskNode(rootNode,task,checkpoint.getTriggerTimestamp());
}
