@Test public void buildingBufferMultipleTimes(){
  BufferBuilder bufferBuilder=createBufferBuilder();
  try (BufferConsumer bufferConsumer=bufferBuilder.createBufferConsumer()){
    bufferBuilder.appendAndCommit(toByteBuffer(0,1));
    bufferBuilder.appendAndCommit(toByteBuffer(2));
    assertContent(bufferConsumer,0,1,2);
    bufferBuilder.appendAndCommit(toByteBuffer(3,42));
    bufferBuilder.appendAndCommit(toByteBuffer(44));
    assertContent(bufferConsumer,3,42,44);
    ArrayList<Integer> originalValues=new ArrayList<>();
    while (!bufferBuilder.isFull()) {
      bufferBuilder.appendAndCommit(toByteBuffer(1337));
      originalValues.add(1337);
    }
    assertContent(bufferConsumer,originalValues.stream().mapToInt(Integer::intValue).toArray());
  }
 }
