@Test public void copy(){
  BufferBuilder bufferBuilder=createBufferBuilder();
  BufferConsumer bufferConsumer1=bufferBuilder.createBufferConsumer();
  bufferBuilder.appendAndCommit(toByteBuffer(0,1));
  BufferConsumer bufferConsumer2=bufferConsumer1.copy();
  bufferBuilder.appendAndCommit(toByteBuffer(2));
  assertContent(bufferConsumer1,0,1,2);
  assertContent(bufferConsumer2,0,1,2);
  BufferConsumer bufferConsumer3=bufferConsumer1.copy();
  bufferBuilder.appendAndCommit(toByteBuffer(3,42));
  BufferConsumer bufferConsumer4=bufferConsumer1.copy();
  assertContent(bufferConsumer1,3,42);
  assertContent(bufferConsumer2,3,42);
  assertContent(bufferConsumer3,3,42);
  assertContent(bufferConsumer4,3,42);
}
