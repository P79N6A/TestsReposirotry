/** 
 * Test that toString returns a substring of the buffer with range(0, position).
 */
@Test public void testToString() throws IOException {
  byte[] data="1234567890".getBytes(ConfigConstants.DEFAULT_CHARSET);
  ByteArrayOutputStreamWithPos stream=new ByteArrayOutputStreamWithPos(data.length);
  stream.write(data);
  Assert.assertArrayEquals(data,stream.toString().getBytes(ConfigConstants.DEFAULT_CHARSET));
  for (int i=0; i < data.length; i++) {
    stream.setPosition(i);
    Assert.assertArrayEquals(Arrays.copyOf(data,i),stream.toString().getBytes(ConfigConstants.DEFAULT_CHARSET));
  }
  stream.setPosition(data.length + 1);
  Assert.assertArrayEquals(Arrays.copyOf(data,data.length + 1),stream.toString().getBytes(ConfigConstants.DEFAULT_CHARSET));
}
