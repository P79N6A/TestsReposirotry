@Test public void testFailWhileCanceling() throws Exception {
  final RestartStrategy restartStrategy=new NoRestartStrategy();
  final ExecutionGraph graph=createExecutionGraph(restartStrategy).f0;
  assertEquals(JobStatus.RUNNING,graph.getState());
  switchAllTasksToRunning(graph);
  graph.cancel();
  assertEquals(JobStatus.CANCELLING,graph.getState());
  graph.failGlobal(new Exception("test"));
  assertEquals(JobStatus.FAILING,graph.getState());
  completeCanceling(graph);
  assertEquals(JobStatus.FAILED,graph.getState());
}
