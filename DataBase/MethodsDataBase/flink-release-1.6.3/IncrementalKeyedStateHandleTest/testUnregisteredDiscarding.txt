/** 
 * This test checks, that for an unregistered  {@link IncrementalKeyedStateHandle} all state(including shared) is discarded.
 */
@Test public void testUnregisteredDiscarding() throws Exception {
  IncrementalKeyedStateHandle stateHandle=create(new Random(42));
  stateHandle.discardState();
  for (  StreamStateHandle handle : stateHandle.getPrivateState().values()) {
    verify(handle).discardState();
  }
  for (  StreamStateHandle handle : stateHandle.getSharedState().values()) {
    verify(handle).discardState();
  }
  verify(stateHandle.getMetaStateHandle()).discardState();
}
