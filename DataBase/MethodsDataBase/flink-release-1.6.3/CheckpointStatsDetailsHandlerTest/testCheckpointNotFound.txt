/** 
 * Test lookup of not existing checkpoint in history.
 */
@Test public void testCheckpointNotFound() throws Exception {
  CheckpointStatsHistory history=mock(CheckpointStatsHistory.class);
  when(history.getCheckpointById(anyLong())).thenReturn(null);
  CheckpointStatsSnapshot snapshot=mock(CheckpointStatsSnapshot.class);
  when(snapshot.getHistory()).thenReturn(history);
  AccessExecutionGraph graph=mock(AccessExecutionGraph.class);
  when(graph.getCheckpointStatsSnapshot()).thenReturn(snapshot);
  CheckpointStatsDetailsHandler handler=new CheckpointStatsDetailsHandler(mock(ExecutionGraphCache.class),Executors.directExecutor(),new CheckpointStatsCache(0));
  Map<String,String> params=new HashMap<>();
  params.put("checkpointid","123");
  String json=handler.handleRequest(graph,params).get();
  assertEquals("{}",json);
  verify(history,times(1)).getCheckpointById(anyLong());
}
