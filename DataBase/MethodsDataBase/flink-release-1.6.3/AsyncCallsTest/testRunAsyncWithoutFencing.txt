/** 
 * Tests that code can be executed in the main thread without respecting the fencing token.
 */
@Test public void testRunAsyncWithoutFencing() throws Exception {
  final CompletableFuture<UUID> resultFuture=new CompletableFuture<>();
  final UUID newFencingToken=UUID.randomUUID();
  testRunAsync(endpoint -> {
    endpoint.runAsyncWithoutFencing(() -> resultFuture.complete(endpoint.getFencingToken()));
    return resultFuture;
  }
,newFencingToken);
  assertEquals(newFencingToken,resultFuture.get(timeout.toMilliseconds(),TimeUnit.MILLISECONDS));
}
