/** 
 * Verify that an empty  {@code ListState} yields {@code null}.
 */
@Test public void testListStateDefaultValue() throws Exception {
  AbstractKeyedStateBackend<Integer> backend=createKeyedBackend(IntSerializer.INSTANCE);
  ListStateDescriptor<String> kvId=new ListStateDescriptor<>("id",String.class);
  ListState<String> state=backend.getPartitionedState(VoidNamespace.INSTANCE,VoidNamespaceSerializer.INSTANCE,kvId);
  backend.setCurrentKey(1);
  assertNull(state.get());
  state.update(Arrays.asList("Ciao","Bello"));
  assertThat(state.get(),containsInAnyOrder("Ciao","Bello"));
  state.clear();
  assertNull(state.get());
  backend.dispose();
}
