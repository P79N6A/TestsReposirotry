@Test public void testValueStateWorkWithTtl() throws Exception {
  AbstractKeyedStateBackend<Integer> backend=createKeyedBackend(IntSerializer.INSTANCE);
  try {
    ValueStateDescriptor<MutableLong> kvId=new ValueStateDescriptor<>("id",MutableLong.class);
    kvId.enableTimeToLive(StateTtlConfig.newBuilder(Time.seconds(1)).build());
    ValueState<MutableLong> state=backend.getPartitionedState(VoidNamespace.INSTANCE,VoidNamespaceSerializer.INSTANCE,kvId);
    backend.setCurrentKey(1);
    state.update(new MutableLong());
    state.value();
  }
  finally {
    backend.close();
    backend.dispose();
  }
}
