/** 
 * Verify that  {@link ValueStateDescriptor} allows {@code null} as default.
 */
@Test public void testValueStateNullAsDefaultValue() throws Exception {
  AbstractKeyedStateBackend<Integer> backend=createKeyedBackend(IntSerializer.INSTANCE);
  ValueStateDescriptor<String> kvId=new ValueStateDescriptor<>("id",String.class,null);
  ValueState<String> state=backend.getPartitionedState(VoidNamespace.INSTANCE,VoidNamespaceSerializer.INSTANCE,kvId);
  backend.setCurrentKey(1);
  assertNull(state.value());
  state.update("Ciao");
  assertEquals("Ciao",state.value());
  state.clear();
  assertNull(state.value());
  backend.dispose();
}
