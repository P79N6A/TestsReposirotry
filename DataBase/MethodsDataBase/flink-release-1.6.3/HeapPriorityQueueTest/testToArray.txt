@Test @SuppressWarnings("unchecked") public void testToArray(){
  final int testSize=10;
  List<TestElement[]> tests=new ArrayList<>(2);
  tests.add(new TestElement[0]);
  tests.add(new TestElement[testSize]);
  tests.add(new TestElement[testSize + 1]);
  for (  TestElement[] testArray : tests) {
    Arrays.fill(testArray,new TestElement(42L,4711L));
    HashSet<TestElement> checkSet=new HashSet<>(testSize);
    HeapPriorityQueue<TestElement> timerPriorityQueue=newPriorityQueue(1);
    Assert.assertEquals(testArray.length,timerPriorityQueue.toArray(testArray).length);
    insertRandomElements(timerPriorityQueue,checkSet,testSize);
    TestElement[] toArray=timerPriorityQueue.toArray(testArray);
    Assert.assertEquals((testArray.length >= testSize),(testArray == toArray));
    int count=0;
    for (    TestElement o : toArray) {
      if (o == null) {
        break;
      }
      Assert.assertTrue(checkSet.remove(o));
      ++count;
    }
    Assert.assertEquals(timerPriorityQueue.size(),count);
    Assert.assertTrue(checkSet.isEmpty());
  }
}
