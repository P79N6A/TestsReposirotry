@Test public void testDirectoryDownloadedFromBlob() throws Exception {
  JobID jobID=new JobID();
  ExecutionAttemptID attemptID=new ExecutionAttemptID();
  final String fileName="test_file";
  final DistributedCache.DistributedCacheEntry entry=new DistributedCache.DistributedCacheEntry(fileName,false,InstantiationUtil.serializeObject(permanentBlobKey),true);
  Future<Path> copyResult=fileCache.createTmpFile(fileName,entry,jobID,attemptID);
  final Path dstPath=copyResult.get();
  final FileSystem fs=dstPath.getFileSystem();
  final FileStatus fileStatus=fs.getFileStatus(dstPath);
  assertTrue(fileStatus.isDir());
  final Path cacheFile=new Path(dstPath,"cacheFile");
  assertTrue(fs.exists(cacheFile));
  final String actualContent=FileUtils.readFileUtf8(new File(cacheFile.getPath()));
  assertEquals(testFileContent,actualContent);
}
