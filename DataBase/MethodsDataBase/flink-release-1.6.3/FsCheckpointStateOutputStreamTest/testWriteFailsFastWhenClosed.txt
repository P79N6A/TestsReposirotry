@Test public void testWriteFailsFastWhenClosed() throws Exception {
  FsCheckpointStateOutputStream stream=new FsCheckpointStateOutputStream(Path.fromLocalFile(tempDir.newFolder()),FileSystem.getLocalFileSystem(),1024,512);
  assertFalse(stream.isClosed());
  stream.close();
  assertTrue(stream.isClosed());
  try {
    stream.write(1);
    fail();
  }
 catch (  IOException e) {
  }
  try {
    stream.write(new byte[4],1,2);
    fail();
  }
 catch (  IOException e) {
  }
}
