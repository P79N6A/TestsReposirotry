/** 
 * Suspending from FAILED should do nothing.
 */
@Test public void testSuspendedOutOfFailed() throws Exception {
  final TaskManagerGateway gateway=spy(new SimpleAckingTaskManagerGateway());
  final int parallelism=10;
  final ExecutionGraph eg=createExecutionGraph(gateway,parallelism);
  eg.scheduleForExecution();
  ExecutionGraphTestUtils.switchAllVerticesToRunning(eg);
  eg.failGlobal(new Exception("fail global"));
  assertEquals(JobStatus.FAILING,eg.getState());
  validateCancelRpcCalls(gateway,parallelism);
  ExecutionGraphTestUtils.completeCancellingForAllVertices(eg);
  assertEquals(JobStatus.FAILED,eg.getState());
  eg.suspend(new Exception("suspend"));
  assertEquals(JobStatus.FAILED,eg.getState());
  validateCancelRpcCalls(gateway,parallelism);
}
