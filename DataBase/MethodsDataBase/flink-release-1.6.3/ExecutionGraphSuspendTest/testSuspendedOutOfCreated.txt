/** 
 * Going into SUSPENDING out of CREATED should immediately cancel everything and not send out RPC calls.
 */
@Test public void testSuspendedOutOfCreated() throws Exception {
  final TaskManagerGateway gateway=spy(new SimpleAckingTaskManagerGateway());
  final int parallelism=10;
  final ExecutionGraph eg=createExecutionGraph(gateway,parallelism);
  assertEquals(JobStatus.CREATED,eg.getState());
  eg.suspend(new Exception("suspend"));
  assertEquals(JobStatus.SUSPENDED,eg.getState());
  validateAllVerticesInState(eg,ExecutionState.CANCELED);
  validateCancelRpcCalls(gateway,0);
  ensureCannotLeaveSuspendedState(eg,gateway);
}
