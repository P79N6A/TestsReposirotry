/** 
 * Suspending from CANCELLED should do nothing.
 */
@Test public void testSuspendedOutOfCanceled() throws Exception {
  final TaskManagerGateway gateway=spy(new SimpleAckingTaskManagerGateway());
  final int parallelism=10;
  final ExecutionGraph eg=createExecutionGraph(gateway,parallelism);
  eg.scheduleForExecution();
  ExecutionGraphTestUtils.switchAllVerticesToRunning(eg);
  eg.cancel();
  assertEquals(JobStatus.CANCELLING,eg.getState());
  validateCancelRpcCalls(gateway,parallelism);
  ExecutionGraphTestUtils.completeCancellingForAllVertices(eg);
  assertEquals(JobStatus.CANCELED,eg.getTerminationFuture().get());
  eg.suspend(new Exception("suspend"));
  assertEquals(JobStatus.CANCELED,eg.getState());
  validateCancelRpcCalls(gateway,parallelism);
}
