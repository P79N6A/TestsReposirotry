@Test public void testManyFailuresWithinRate() throws Exception {
  final int numAttempts=10;
  final int intervalMillis=1;
  final FailureRateRestartStrategy restartStrategy=new FailureRateRestartStrategy(1,Time.milliseconds(intervalMillis),Time.milliseconds(0));
  for (int attempsLeft=numAttempts; attempsLeft > 0; --attempsLeft) {
    assertTrue(restartStrategy.canRestart());
    restartStrategy.restart(new NoOpRestarter(),executor);
    sleepGuaranteed(2 * intervalMillis);
  }
  assertTrue(restartStrategy.canRestart());
}
