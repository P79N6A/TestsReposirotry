@Test public void testFailuresExceedingRate() throws Exception {
  final int numFailures=3;
  final int intervalMillis=10_000;
  final FailureRateRestartStrategy restartStrategy=new FailureRateRestartStrategy(numFailures,Time.milliseconds(intervalMillis),Time.milliseconds(0));
  for (int failuresLeft=numFailures; failuresLeft > 0; --failuresLeft) {
    assertTrue(restartStrategy.canRestart());
    restartStrategy.restart(new NoOpRestarter(),executor);
  }
  assertFalse(restartStrategy.canRestart());
}
