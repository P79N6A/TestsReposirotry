/** 
 * Tests that a CLI call with a custom savepoint directory target is forwarded correctly to the cluster client.
 */
@Test public void testTriggerSavepointCustomTarget() throws Exception {
  replaceStdOutAndStdErr();
  JobID jobId=new JobID();
  String savepointDirectory="customTargetDirectory";
  final ClusterClient<String> clusterClient=createClusterClient(savepointDirectory);
  try {
    MockedCliFrontend frontend=new MockedCliFrontend(clusterClient);
    String[] parameters={jobId.toString(),savepointDirectory};
    frontend.savepoint(parameters);
    verify(clusterClient,times(1)).triggerSavepoint(eq(jobId),eq(savepointDirectory));
    assertTrue(buffer.toString().contains(savepointDirectory));
  }
  finally {
    clusterClient.shutdown();
    restoreStdOutAndStdErr();
  }
}
