@Test public void testDisposeSavepointFailure() throws Exception {
  replaceStdOutAndStdErr();
  String savepointPath="expectedSavepointPath";
  Exception testException=new Exception("expectedTestException");
  DisposeSavepointClusterClient clusterClient=new DisposeSavepointClusterClient((  String path) -> FutureUtils.completedExceptionally(testException),getConfiguration());
  try {
    CliFrontend frontend=new MockedCliFrontend(clusterClient);
    String[] parameters={"-d",savepointPath};
    try {
      frontend.savepoint(parameters);
      fail("Savepoint should have failed.");
    }
 catch (    Exception e) {
      assertTrue(ExceptionUtils.findThrowableWithMessage(e,testException.getMessage()).isPresent());
    }
  }
  finally {
    clusterClient.shutdown();
    restoreStdOutAndStdErr();
  }
}
