@Test public void testDismissingSnapshotNotRunnable() throws Exception {
  setupRocksKeyedStateBackend();
  try {
    RunnableFuture<SnapshotResult<KeyedStateHandle>> snapshot=keyedStateBackend.snapshot(0L,0L,testStreamFactory,CheckpointOptions.forCheckpointWithDefaultLocation());
    snapshot.cancel(true);
    Thread asyncSnapshotThread=new Thread(snapshot);
    asyncSnapshotThread.start();
    try {
      snapshot.get();
      fail();
    }
 catch (    Exception ignored) {
    }
    asyncSnapshotThread.join();
    verifyRocksObjectsReleased();
  }
  finally {
    this.keyedStateBackend.dispose();
    this.keyedStateBackend=null;
  }
}
