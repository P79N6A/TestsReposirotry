@Test public void testBuilderFromEnvironment() throws Exception {
  final Configuration conf=new Configuration();
  final UserGroupInformation ugi=UserGroupInformation.createRemoteUser("test");
  ugi.doAs(new PrivilegedAction<Object>(){
    @Override public Object run(){
      try {
        HadoopUserOverlay.Builder builder=HadoopUserOverlay.newBuilder().fromEnvironment(conf);
        assertEquals(ugi,builder.ugi);
        return null;
      }
 catch (      Exception ex) {
        throw new AssertionError(ex);
      }
    }
  }
);
}
