/** 
 * Tests that command line options override the configuration settings.
 */
@Test public void testRESTManualConfigurationOverride() throws Exception {
  final String configuredHostname="localhost";
  final int configuredPort=1234;
  final Configuration configuration=new Configuration();
  configuration.setString(JobManagerOptions.ADDRESS,configuredHostname);
  configuration.setInteger(JobManagerOptions.PORT,configuredPort);
  configuration.setString(RestOptions.ADDRESS,configuredHostname);
  configuration.setInteger(RestOptions.PORT,configuredPort);
  final DefaultCLI defaultCLI=new DefaultCLI(configuration);
  final String manualHostname="123.123.123.123";
  final int manualPort=4321;
  final String[] args={"-m",manualHostname + ':' + manualPort};
  CommandLine commandLine=defaultCLI.parseCommandLineOptions(args,false);
  final StandaloneClusterDescriptor clusterDescriptor=defaultCLI.createClusterDescriptor(commandLine);
  final RestClusterClient<?> clusterClient=clusterDescriptor.retrieve(defaultCLI.getClusterId(commandLine));
  URL webMonitorBaseUrl=clusterClient.getWebMonitorBaseUrl().get();
  assertThat(webMonitorBaseUrl.getHost(),equalTo(manualHostname));
  assertThat(webMonitorBaseUrl.getPort(),equalTo(manualPort));
}
