@Test public void testJobSubmitCancelStop() throws Exception {
  TestJobSubmitHandler submitHandler=new TestJobSubmitHandler();
  TestJobTerminationHandler terminationHandler=new TestJobTerminationHandler();
  TestJobExecutionResultHandler testJobExecutionResultHandler=new TestJobExecutionResultHandler(JobExecutionResultResponseBody.created(new JobResult.Builder().applicationStatus(ApplicationStatus.SUCCEEDED).jobId(jobId).netRuntime(Long.MAX_VALUE).build()));
  try (TestRestServerEndpoint ignored=createRestServerEndpoint(submitHandler,terminationHandler,testJobExecutionResultHandler)){
    Assert.assertFalse(submitHandler.jobSubmitted);
    restClusterClient.submitJob(jobGraph,ClassLoader.getSystemClassLoader());
    Assert.assertTrue(submitHandler.jobSubmitted);
    Assert.assertFalse(terminationHandler.jobCanceled);
    restClusterClient.cancel(jobId);
    Assert.assertTrue(terminationHandler.jobCanceled);
    Assert.assertFalse(terminationHandler.jobStopped);
    restClusterClient.stop(jobId);
    Assert.assertTrue(terminationHandler.jobStopped);
  }
 }
