/** 
 * Tests a complete checkpoint stats snapshot.
 */
@Test public void testCheckpointStatsRequest() throws Exception {
  TestCheckpointStats testCheckpointStats=createTestCheckpointStats();
  CheckpointStatsHandler handler=new CheckpointStatsHandler(mock(ExecutionGraphCache.class),Executors.directExecutor());
  String json=handler.handleRequest(testCheckpointStats.graph,Collections.<String,String>emptyMap()).get();
  ObjectMapper mapper=new ObjectMapper();
  JsonNode rootNode=mapper.readTree(json);
  compareCheckpointStats(testCheckpointStats,rootNode);
}
