/** 
 * Tests that temporary directories have the right behavior on completion and deletion.
 */
@Test public void temporary() throws Exception {
  File folderRoot=temporaryFolder.getRoot();
  File folder=new File(folderRoot,String.valueOf(UUID.randomUUID()));
  Assert.assertTrue(folder.mkdirs());
  Path folderPath=new Path(folder.toURI());
  SnapshotDirectory tmpSnapshotDirectory=SnapshotDirectory.temporary(folderPath);
  Assert.assertNull(tmpSnapshotDirectory.completeSnapshotAndGetHandle());
  Assert.assertTrue(tmpSnapshotDirectory.cleanup());
  Assert.assertFalse(folder.exists());
}
