@Test public void testNonSslRedirectForEnabledSsl() throws Exception {
  Assume.assumeTrue(config.getBoolean(SecurityOptions.SSL_REST_ENABLED));
  OkHttpClient client=new OkHttpClient.Builder().followRedirects(false).build();
  String httpsUrl=serverEndpoint.getRestBaseUrl() + "/path";
  String httpUrl=httpsUrl.replace("https://","http://");
  Request request=new Request.Builder().url(httpUrl).build();
  try (final Response response=client.newCall(request).execute()){
    assertEquals(HttpResponseStatus.MOVED_PERMANENTLY.code(),response.code());
    assertThat(response.headers().names(),hasItems("Location"));
    assertEquals(httpsUrl,response.header("Location"));
  }
 }
