/** 
 * Tests that requests larger than  {@link #TEST_REST_MAX_CONTENT_LENGTH} are rejected.
 */
@Test public void testShouldRespectMaxContentLengthLimitForRequests() throws Exception {
  testHandler.handlerBody=id -> {
    throw new AssertionError("Request should not arrive at server.");
  }
;
  try {
    sendRequestToTestHandler(new TestRequest(2,createStringOfSize(TEST_REST_MAX_CONTENT_LENGTH))).get();
    fail("Expected exception not thrown");
  }
 catch (  final ExecutionException e) {
    final Throwable throwable=ExceptionUtils.stripExecutionException(e);
    assertThat(throwable,instanceOf(RestClientException.class));
    assertThat(throwable.getMessage(),containsString("Try to raise"));
  }
}
