@Test public void testMonitoringSourceRestore() throws Exception {
  File testFolder=tempFolder.newFolder();
  TextInputFormat format=new TextInputFormat(new Path(testFolder.getAbsolutePath()));
  final ContinuousFileMonitoringFunction<String> monitoringFunction=new ContinuousFileMonitoringFunction<>(format,FileProcessingMode.PROCESS_CONTINUOUSLY,1,INTERVAL);
  StreamSource<TimestampedFileInputSplit,ContinuousFileMonitoringFunction<String>> src=new StreamSource<>(monitoringFunction);
  final AbstractStreamOperatorTestHarness<TimestampedFileInputSplit> testHarness=new AbstractStreamOperatorTestHarness<>(src,1,1,0);
  testHarness.setup();
  MigrationTestUtil.restoreFromSnapshot(testHarness,OperatorSnapshotUtil.getResourceFilename("monitoring-function-migration-test-" + expectedModTime + "-flink"+ testMigrateVersion+ "-snapshot"),testMigrateVersion);
  testHarness.open();
  Assert.assertEquals((long)expectedModTime,monitoringFunction.getGlobalModificationTime());
}
