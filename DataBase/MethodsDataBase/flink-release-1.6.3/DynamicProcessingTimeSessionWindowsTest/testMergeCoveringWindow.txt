@Test public void testMergeCoveringWindow(){
  MergingWindowAssigner.MergeCallback callback=mock(MergingWindowAssigner.MergeCallback.class);
  SessionWindowTimeGapExtractor extractor=mock(SessionWindowTimeGapExtractor.class);
  when(extractor.extract(any())).thenReturn(5000L);
  DynamicProcessingTimeSessionWindows assigner=DynamicProcessingTimeSessionWindows.withDynamicGap(extractor);
  assigner.mergeWindows(Lists.newArrayList(new TimeWindow(1,1),new TimeWindow(0,2),new TimeWindow(4,7),new TimeWindow(5,6)),callback);
  verify(callback,times(1)).merge((Collection<TimeWindow>)argThat(containsInAnyOrder(new TimeWindow(1,1),new TimeWindow(0,2))),eq(new TimeWindow(0,2)));
  verify(callback,times(1)).merge((Collection<TimeWindow>)argThat(containsInAnyOrder(new TimeWindow(5,6),new TimeWindow(4,7))),eq(new TimeWindow(4,7)));
  verify(callback,times(2)).merge(anyCollection(),Matchers.anyObject());
}
