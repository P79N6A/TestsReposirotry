/** 
 * This method tests that hooks with the same identifier are not registered multiple times.
 */
@Test public void testDeduplicateOnRegister(){
  final CheckpointCoordinator cc=instantiateCheckpointCoordinator(new JobID());
  MasterTriggerRestoreHook<?> hook1=mock(MasterTriggerRestoreHook.class);
  when(hook1.getIdentifier()).thenReturn("test id");
  MasterTriggerRestoreHook<?> hook2=mock(MasterTriggerRestoreHook.class);
  when(hook2.getIdentifier()).thenReturn("test id");
  MasterTriggerRestoreHook<?> hook3=mock(MasterTriggerRestoreHook.class);
  when(hook3.getIdentifier()).thenReturn("anotherId");
  assertTrue(cc.addMasterHook(hook1));
  assertFalse(cc.addMasterHook(hook2));
  assertTrue(cc.addMasterHook(hook3));
}
