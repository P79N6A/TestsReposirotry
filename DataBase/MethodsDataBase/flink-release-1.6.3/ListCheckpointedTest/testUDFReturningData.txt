@Test public void testUDFReturningData() throws Exception {
  TestUserFunction userFunction=new TestUserFunction(Arrays.asList(1,2,3));
  AbstractStreamOperatorTestHarness<Integer> testHarness=new AbstractStreamOperatorTestHarness<>(new StreamMap<>(userFunction),1,1,0);
  testHarness.open();
  OperatorSubtaskState snapshot=testHarness.snapshot(0L,0L);
  testHarness.initializeState(snapshot);
  Assert.assertTrue(userFunction.isRestored());
}
