@Test public void testReconnect() throws Exception {
  final String connectionId1="Test RPC Connection ID 1";
  final String connectionId2="Test RPC Connection ID 2";
  final String testRpcConnectionEndpointAddress="<TestRpcConnectionEndpointAddress>";
  final UUID leaderId=UUID.randomUUID();
  final TestRegistrationGateway testGateway=new TestRegistrationGateway(new RetryingRegistrationTest.TestRegistrationSuccess(connectionId1),new RetryingRegistrationTest.TestRegistrationSuccess(connectionId2));
  rpcService.registerGateway(testRpcConnectionEndpointAddress,testGateway);
  TestRpcConnection connection=new TestRpcConnection(testRpcConnectionEndpointAddress,leaderId,rpcService.getExecutor(),rpcService);
  connection.start();
  final String actualConnectionId1=connection.getConnectionFuture().get();
  assertEquals(actualConnectionId1,connectionId1);
  assertTrue(connection.tryReconnect());
  final String actualConnectionId2=connection.getConnectionFuture().get();
  assertEquals(actualConnectionId2,connectionId2);
}
