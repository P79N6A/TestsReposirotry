/** 
 * Tests that interrupt happens via watch dog if canceller is stuck in cancel. Task cancellation blocks the task canceller. Interrupt after cancel via cancellation watch dog.
 */
@Test public void testWatchDogInterruptsTask() throws Exception {
  Configuration config=new Configuration();
  config.setLong(TaskManagerOptions.TASK_CANCELLATION_INTERVAL.key(),5);
  config.setLong(TaskManagerOptions.TASK_CANCELLATION_TIMEOUT.key(),60 * 1000);
  Task task=createTask(InvokableBlockingInCancel.class,config);
  task.startTaskThread();
  awaitLatch.await();
  task.cancelExecution();
  task.getExecutingThread().join();
  for (  Object msg : taskManagerMessages) {
    assertFalse("Unexpected FatalError message",msg instanceof TaskManagerMessages.FatalError);
  }
}
