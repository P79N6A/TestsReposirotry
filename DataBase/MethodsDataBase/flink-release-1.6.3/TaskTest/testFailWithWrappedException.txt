@Test public void testFailWithWrappedException(){
  try {
    Task task=createTask(FailingInvokableWithChainedException.class);
    task.registerExecutionListener(listener);
    task.run();
    assertEquals(ExecutionState.FAILED,task.getExecutionState());
    assertTrue(task.isCanceledOrFailed());
    Throwable cause=task.getFailureCause();
    assertTrue(cause instanceof IOException);
    validateTaskManagerStateChange(ExecutionState.RUNNING,task,false);
    validateUnregisterTask(task.getExecutionId());
    validateListenerMessage(ExecutionState.RUNNING,task,false);
    validateListenerMessage(ExecutionState.FAILED,task,true);
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}
