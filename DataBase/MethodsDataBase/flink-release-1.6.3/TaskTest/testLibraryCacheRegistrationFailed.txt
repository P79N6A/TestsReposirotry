@Test public void testLibraryCacheRegistrationFailed(){
  try {
    BlobCacheService blobService=createBlobCache();
    Task task=createTask(TestInvokableCorrect.class,blobService,mock(LibraryCacheManager.class));
    assertEquals(ExecutionState.CREATED,task.getExecutionState());
    assertFalse(task.isCanceledOrFailed());
    assertNull(task.getFailureCause());
    task.registerExecutionListener(listener);
    task.run();
    assertEquals(ExecutionState.FAILED,task.getExecutionState());
    assertTrue(task.isCanceledOrFailed());
    assertNotNull(task.getFailureCause());
    assertNotNull(task.getFailureCause().getMessage());
    assertTrue(task.getFailureCause().getMessage().contains("classloader"));
    validateListenerMessage(ExecutionState.FAILED,task,true);
    validateUnregisterTask(task.getExecutionId());
    assertNull(task.getInvokable());
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}
