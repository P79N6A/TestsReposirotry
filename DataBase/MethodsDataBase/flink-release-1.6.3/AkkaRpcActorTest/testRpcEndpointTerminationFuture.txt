/** 
 * Tests that we can wait for a RpcEndpoint to terminate.
 * @throws ExecutionException
 * @throws InterruptedException
 */
@Test(timeout=5000) public void testRpcEndpointTerminationFuture() throws Exception {
  final DummyRpcEndpoint rpcEndpoint=new DummyRpcEndpoint(akkaRpcService);
  rpcEndpoint.start();
  CompletableFuture<Void> terminationFuture=rpcEndpoint.getTerminationFuture();
  assertFalse(terminationFuture.isDone());
  CompletableFuture.runAsync(() -> rpcEndpoint.shutDown(),akkaRpcService.getExecutor());
  terminationFuture.get();
}
