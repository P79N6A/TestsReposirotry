/** 
 * Tests that exception thrown in the postStop method are returned by the termination future.
 */
@Test public void testPostStopExceptionPropagation() throws Exception {
  FailingPostStopEndpoint rpcEndpoint=new FailingPostStopEndpoint(akkaRpcService,"FailingPostStopEndpoint");
  rpcEndpoint.start();
  rpcEndpoint.shutDown();
  CompletableFuture<Void> terminationFuture=rpcEndpoint.getTerminationFuture();
  try {
    terminationFuture.get();
  }
 catch (  ExecutionException e) {
    assertTrue(e.getCause() instanceof FailingPostStopEndpoint.PostStopException);
  }
}
