@Test public void testExceptionPropagation() throws Exception {
  ExceptionalEndpoint rpcEndpoint=new ExceptionalEndpoint(akkaRpcService);
  rpcEndpoint.start();
  ExceptionalGateway rpcGateway=rpcEndpoint.getSelfGateway(ExceptionalGateway.class);
  CompletableFuture<Integer> result=rpcGateway.doStuff();
  try {
    result.get(timeout.getSize(),timeout.getUnit());
    fail("this should fail with an exception");
  }
 catch (  ExecutionException e) {
    Throwable cause=e.getCause();
    assertEquals(RuntimeException.class,cause.getClass());
    assertEquals("my super specific test exception",cause.getMessage());
  }
}
