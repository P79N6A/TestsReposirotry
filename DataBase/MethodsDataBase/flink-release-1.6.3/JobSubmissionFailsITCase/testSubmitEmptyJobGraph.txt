@Test public void testSubmitEmptyJobGraph() throws Exception {
  final JobGraph jobGraph=new JobGraph("Testing job");
  ClusterClient<?> client=MINI_CLUSTER_RESOURCE.getClusterClient();
  client.setDetached(detached);
  try {
    client.submitJob(jobGraph,JobSubmissionFailsITCase.class.getClassLoader());
    fail("Job submission should have thrown an exception.");
  }
 catch (  Exception e) {
    Optional<Throwable> expectedCause=ExceptionUtils.findThrowable(e,throwable -> throwable.getMessage() != null && throwable.getMessage().contains("empty"));
    if (!expectedCause.isPresent()) {
      throw e;
    }
  }
  client.setDetached(false);
  client.submitJob(getWorkingJobGraph(),JobSubmissionFailsITCase.class.getClassLoader());
}
