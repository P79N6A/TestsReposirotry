/** 
 * Verifies that  {@link TaskManagerServicesConfiguration#hasNewNetworkBufConf(Configuration)}returns the correct result for mixed old/new configurations.
 */
@SuppressWarnings("deprecation") @Test public void hasNewNetworkBufConfMixed() throws Exception {
  Configuration config=new Configuration();
  assertTrue(TaskManagerServicesConfiguration.hasNewNetworkBufConf(config));
  config.setInteger(TaskManagerOptions.NETWORK_NUM_BUFFERS,1);
  assertFalse(TaskManagerServicesConfiguration.hasNewNetworkBufConf(config));
  Configuration config1=config.clone();
  config1.setFloat(TaskManagerOptions.NETWORK_BUFFERS_MEMORY_FRACTION,0.1f);
  assertTrue(TaskManagerServicesConfiguration.hasNewNetworkBufConf(config1));
  config1=config.clone();
  config1.setString(TaskManagerOptions.NETWORK_BUFFERS_MEMORY_MIN,"1024");
  assertTrue(TaskManagerServicesConfiguration.hasNewNetworkBufConf(config1));
  config1=config.clone();
  config1.setString(TaskManagerOptions.NETWORK_BUFFERS_MEMORY_MAX,"1024");
  assertTrue(TaskManagerServicesConfiguration.hasNewNetworkBufConf(config1));
}
