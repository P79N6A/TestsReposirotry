@Test public void testNotifyListenerLater() throws Exception {
  final String localhost="localhost";
  settableLeaderRetrievalService.notifyListener(localhost,HighAvailabilityServices.DEFAULT_LEADER_ID);
  final TestingListener listener=new TestingListener();
  settableLeaderRetrievalService.start(listener);
  assertThat(listener.getAddress(),equalTo(localhost));
  assertThat(listener.getLeaderSessionID(),equalTo(HighAvailabilityServices.DEFAULT_LEADER_ID));
}
