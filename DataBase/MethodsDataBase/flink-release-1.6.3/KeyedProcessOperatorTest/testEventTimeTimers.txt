@Test public void testEventTimeTimers() throws Exception {
  final int expectedKey=17;
  KeyedProcessOperator<Integer,Integer,Integer> operator=new KeyedProcessOperator<>(new TriggeringFlatMapFunction(TimeDomain.EVENT_TIME,expectedKey));
  OneInputStreamOperatorTestHarness<Integer,Integer> testHarness=new KeyedOneInputStreamOperatorTestHarness<>(operator,new IdentityKeySelector<Integer>(),BasicTypeInfo.INT_TYPE_INFO);
  testHarness.setup();
  testHarness.open();
  testHarness.processWatermark(new Watermark(0));
  testHarness.processElement(new StreamRecord<>(expectedKey,42L));
  testHarness.processWatermark(new Watermark(5));
  ConcurrentLinkedQueue<Object> expectedOutput=new ConcurrentLinkedQueue<>();
  expectedOutput.add(new Watermark(0L));
  expectedOutput.add(new StreamRecord<>(expectedKey,42L));
  expectedOutput.add(new StreamRecord<>(1777,5L));
  expectedOutput.add(new Watermark(5L));
  TestHarnessUtil.assertOutputEquals("Output was not correct.",expectedOutput,testHarness.getOutput());
  testHarness.close();
}
