@Test public void testParseStringErrors() throws Exception {
  StringParser stringParser=new StringParser();
  stringParser.enableQuotedStringParsing((byte)'"');
  Map<String,StringParser.ParseErrorState> failures=new HashMap<>();
  failures.put("\"string\" trailing",FieldParser.ParseErrorState.UNQUOTED_CHARS_AFTER_QUOTED_STRING);
  failures.put("\"unterminated ",FieldParser.ParseErrorState.UNTERMINATED_QUOTED_STRING);
  for (  Map.Entry<String,StringParser.ParseErrorState> failure : failures.entrySet()) {
    int result=stringParser.parseField(failure.getKey().getBytes(ConfigConstants.DEFAULT_CHARSET),0,failure.getKey().length(),new byte[]{(byte)'|'},null);
    assertEquals(-1,result);
    assertEquals(failure.getValue(),stringParser.getErrorState());
  }
}
