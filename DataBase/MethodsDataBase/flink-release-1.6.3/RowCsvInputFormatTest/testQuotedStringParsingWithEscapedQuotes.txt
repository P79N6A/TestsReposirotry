@Test public void testQuotedStringParsingWithEscapedQuotes() throws Exception {
  String fileContent="\"\\\"Hello\\\" World\"|\"We are\\\" young\"";
  File tempFile=File.createTempFile("CsvReaderQuotedString","tmp");
  tempFile.deleteOnExit();
  tempFile.setWritable(true);
  OutputStreamWriter writer=new OutputStreamWriter(new FileOutputStream(tempFile));
  writer.write(fileContent);
  writer.close();
  TypeInformation[] fieldTypes=new TypeInformation[]{BasicTypeInfo.STRING_TYPE_INFO,BasicTypeInfo.STRING_TYPE_INFO};
  RowCsvInputFormat inputFormat=new RowCsvInputFormat(new Path(tempFile.toURI().toString()),fieldTypes);
  inputFormat.enableQuotedStringParsing('"');
  inputFormat.setFieldDelimiter("|");
  inputFormat.setDelimiter('\n');
  inputFormat.configure(new Configuration());
  FileInputSplit[] splits=inputFormat.createInputSplits(1);
  inputFormat.open(splits[0]);
  Row record=inputFormat.nextRecord(new Row(2));
  assertEquals("\\\"Hello\\\" World",record.getField(0));
  assertEquals("We are\\\" young",record.getField(1));
}
