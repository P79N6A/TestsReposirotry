@Test public void testResolveCheckpointStorageLocation() throws Exception {
  final FileSystem checkpointFileSystem=mock(FileSystem.class);
  final FsCheckpointStorage storage=new FsCheckpointStorage(new TestingPath("hdfs:///checkpoint/",checkpointFileSystem),null,new JobID(),FILE_SIZE_THRESHOLD);
  final FsCheckpointStorageLocation checkpointStreamFactory=(FsCheckpointStorageLocation)storage.resolveCheckpointStorageLocation(1L,CheckpointStorageLocationReference.getDefault());
  assertEquals(checkpointFileSystem,checkpointStreamFactory.getFileSystem());
  final CheckpointStorageLocationReference savepointLocationReference=AbstractFsCheckpointStorage.encodePathAsReference(new Path("file:///savepoint/"));
  final FsCheckpointStorageLocation savepointStreamFactory=(FsCheckpointStorageLocation)storage.resolveCheckpointStorageLocation(2L,savepointLocationReference);
  final FileSystem fileSystem=savepointStreamFactory.getFileSystem();
  assertTrue(fileSystem instanceof LocalFileSystem);
}
