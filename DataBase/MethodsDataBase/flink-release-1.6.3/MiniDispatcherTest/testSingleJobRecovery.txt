/** 
 * Tests that the  {@link MiniDispatcher} recovers the single job with which itwas started.
 */
@Test public void testSingleJobRecovery() throws Exception {
  final MiniDispatcher miniDispatcher=createMiniDispatcher(ClusterEntrypoint.ExecutionMode.DETACHED);
  miniDispatcher.start();
  try {
    dispatcherLeaderElectionService.isLeader(UUID.randomUUID()).get();
    final JobGraph actualJobGraph=jobGraphFuture.get();
    assertThat(actualJobGraph.getJobID(),is(jobGraph.getJobID()));
  }
  finally {
    RpcUtils.terminateRpcEndpoint(miniDispatcher,timeout);
  }
}
