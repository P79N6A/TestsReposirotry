/** 
 * Tests that counter node is removed from ZooKeeper after shutdown.
 */
@Test public void testShutdownRemovesState() throws Exception {
  CheckpointIDCounter counter=createCompletedCheckpoints();
  counter.start();
  CuratorFramework client=ZooKeeper.getClient();
  assertNotNull(client.checkExists().forPath("/checkpoint-id-counter"));
  counter.shutdown(JobStatus.FINISHED);
  assertNull(client.checkExists().forPath("/checkpoint-id-counter"));
}
