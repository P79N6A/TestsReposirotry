/** 
 * Test deployment to non-existing queue & ensure that the system logs a WARN message for the user. (Users had unexpected behavior of Flink on YARN because they mistyped the target queue. With an error message, we can help users identifying the issue)
 */
@Test public void testNonexistingQueueWARNmessage() throws IOException {
  LOG.info("Starting testNonexistingQueueWARNmessage()");
  addTestAppender(AbstractYarnClusterDescriptor.class,Level.WARN);
  try {
    runWithArgs(new String[]{"-j",flinkUberjar.getAbsolutePath(),"-t",flinkLibFolder.getAbsolutePath(),"-n","1","-jm","768m","-tm","1024m","-qu","doesntExist"},"to unknown queue: doesntExist",null,RunTypes.YARN_SESSION,1);
  }
 catch (  Exception e) {
    assertTrue(ExceptionUtils.findThrowableWithMessage(e,"to unknown queue: doesntExist").isPresent());
  }
  checkForLogString("The specified queue 'doesntExist' does not exist. Available queues");
  LOG.info("Finished testNonexistingQueueWARNmessage()");
}
