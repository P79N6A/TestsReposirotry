@Test public void testNettyEpoll() throws Exception {
  MiniClusterResource cluster=trySetUpCluster();
  try {
    StreamExecutionEnvironment env=StreamExecutionEnvironment.getExecutionEnvironment();
    env.setParallelism(NUM_TASK_MANAGERS);
    env.getConfig().disableSysoutLogging();
    DataStream<Integer> input=env.fromElements(1,2,3,4,1,2,3,42);
    input.keyBy(new KeySelector<Integer,Integer>(){
      @Override public Integer getKey(      Integer value) throws Exception {
        return value;
      }
    }
).sum(0).print();
    env.execute();
  }
  finally {
    cluster.after();
  }
}
