/** 
 * Tests that we can dispose a savepoint.
 */
@Test public void testSavepointDisposal() throws Exception {
  final URI externalPointer=createTestingSavepoint();
  final Path savepointPath=Paths.get(externalPointer);
  dispatcher=createAndStartDispatcher(heartbeatServices,haServices,new ExpectedJobIdJobManagerRunnerFactory(TEST_JOB_ID,createdJobManagerRunnerLatch));
  final DispatcherGateway dispatcherGateway=dispatcher.getSelfGateway(DispatcherGateway.class);
  dispatcherLeaderElectionService.isLeader(UUID.randomUUID()).get();
  assertThat(Files.exists(savepointPath),is(true));
  dispatcherGateway.disposeSavepoint(externalPointer.toString(),TIMEOUT).get();
  assertThat(Files.exists(savepointPath),is(false));
}
