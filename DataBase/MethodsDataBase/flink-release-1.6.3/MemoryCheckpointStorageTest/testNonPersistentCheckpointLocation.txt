@Test public void testNonPersistentCheckpointLocation() throws Exception {
  MemoryBackendCheckpointStorage storage=new MemoryBackendCheckpointStorage(new JobID(),null,null,DEFAULT_MAX_STATE_SIZE);
  CheckpointStorageLocation location=storage.initializeLocationForCheckpoint(9);
  CheckpointMetadataOutputStream stream=location.createMetadataOutputStream();
  stream.write(99);
  CompletedCheckpointStorageLocation completed=stream.closeAndFinalizeCheckpoint();
  StreamStateHandle handle=completed.getMetadataHandle();
  assertTrue(handle instanceof ByteStreamStateHandle);
  try {
    storage.resolveCheckpoint(completed.getExternalPointer());
    fail("should fail with an exception");
  }
 catch (  Exception e) {
  }
}
