/** 
 * Tests that a local rpc call with a non serializable argument can be executed.
 */
@Test public void testNonSerializableLocalMessageTransfer() throws Exception {
  LinkedBlockingQueue<Object> linkedBlockingQueue=new LinkedBlockingQueue<>();
  TestEndpoint testEndpoint=new TestEndpoint(akkaRpcService1,linkedBlockingQueue);
  testEndpoint.start();
  TestGateway testGateway=testEndpoint.getSelfGateway(TestGateway.class);
  NonSerializableObject expected=new NonSerializableObject(42);
  testGateway.foobar(expected);
  assertThat(linkedBlockingQueue.take(),Is.<Object>is(expected));
}
