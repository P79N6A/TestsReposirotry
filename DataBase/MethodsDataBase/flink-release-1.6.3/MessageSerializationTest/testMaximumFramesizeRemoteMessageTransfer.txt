/** 
 * Tests that a message which exceeds the maximum frame size is detected and a corresponding exception is thrown.
 */
@Test(expected=IOException.class) public void testMaximumFramesizeRemoteMessageTransfer() throws Exception {
  LinkedBlockingQueue<Object> linkedBlockingQueue=new LinkedBlockingQueue<>();
  TestEndpoint testEndpoint=new TestEndpoint(akkaRpcService1,linkedBlockingQueue);
  testEndpoint.start();
  String address=testEndpoint.getAddress();
  CompletableFuture<TestGateway> remoteGatewayFuture=akkaRpcService2.connect(address,TestGateway.class);
  TestGateway remoteGateway=remoteGatewayFuture.get(timeout.getSize(),timeout.getUnit());
  int bufferSize=maxFrameSize + 1;
  byte[] buffer=new byte[bufferSize];
  remoteGateway.foobar(buffer);
  fail("Should have failed due to exceeding the maximum framesize.");
}
