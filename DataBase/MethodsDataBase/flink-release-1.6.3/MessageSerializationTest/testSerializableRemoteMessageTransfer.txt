/** 
 * Tests that a remote rpc call with a serializable argument can be successfully executed.
 */
@Test public void testSerializableRemoteMessageTransfer() throws Exception {
  LinkedBlockingQueue<Object> linkedBlockingQueue=new LinkedBlockingQueue<>();
  TestEndpoint testEndpoint=new TestEndpoint(akkaRpcService1,linkedBlockingQueue);
  testEndpoint.start();
  String address=testEndpoint.getAddress();
  CompletableFuture<TestGateway> remoteGatewayFuture=akkaRpcService2.connect(address,TestGateway.class);
  TestGateway remoteGateway=remoteGatewayFuture.get(timeout.getSize(),timeout.getUnit());
  int expected=42;
  remoteGateway.foobar(expected);
  assertThat(linkedBlockingQueue.take(),Is.<Object>is(expected));
}
