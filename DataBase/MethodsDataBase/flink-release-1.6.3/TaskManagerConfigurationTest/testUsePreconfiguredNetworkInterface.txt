@Test public void testUsePreconfiguredNetworkInterface() throws Exception {
  final String TEST_HOST_NAME="testhostname";
  Configuration config=new Configuration();
  config.setString(TaskManagerOptions.HOST,TEST_HOST_NAME);
  config.setString(JobManagerOptions.ADDRESS,"localhost");
  config.setInteger(JobManagerOptions.PORT,7891);
  HighAvailabilityServices highAvailabilityServices=HighAvailabilityServicesUtils.createHighAvailabilityServices(config,Executors.directExecutor(),HighAvailabilityServicesUtils.AddressResolution.NO_ADDRESS_RESOLUTION);
  try {
    Tuple2<String,Iterator<Integer>> address=TaskManager.selectNetworkInterfaceAndPortRange(config,highAvailabilityServices);
    assertEquals(TEST_HOST_NAME,address._1());
  }
  finally {
    highAvailabilityServices.closeAndCleanupAllData();
  }
}
