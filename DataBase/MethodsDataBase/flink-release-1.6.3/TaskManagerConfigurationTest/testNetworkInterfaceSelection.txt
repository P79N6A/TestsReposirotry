@Test public void testNetworkInterfaceSelection() throws Exception {
  ServerSocket server;
  String hostname="localhost";
  try {
    InetAddress localhostAddress=InetAddress.getByName(hostname);
    server=new ServerSocket(0,50,localhostAddress);
  }
 catch (  IOException e) {
    System.err.println("Skipping 'testNetworkInterfaceSelection' test.");
    return;
  }
  Configuration config=new Configuration();
  config.setString(JobManagerOptions.ADDRESS,hostname);
  config.setInteger(JobManagerOptions.PORT,server.getLocalPort());
  HighAvailabilityServices highAvailabilityServices=HighAvailabilityServicesUtils.createHighAvailabilityServices(config,Executors.directExecutor(),HighAvailabilityServicesUtils.AddressResolution.NO_ADDRESS_RESOLUTION);
  try {
    assertNotNull(TaskManager.selectNetworkInterfaceAndPortRange(config,highAvailabilityServices)._1());
  }
  finally {
    highAvailabilityServices.closeAndCleanupAllData();
    IOUtils.closeQuietly(server);
  }
}
