@Test public void testRespondWithFile() throws Exception {
  File webDir=tmp.newFolder("webDir");
  Router router=new Router().addGet("/:*",new HistoryServerStaticFileServerHandler(webDir));
  WebFrontendBootstrap webUI=new WebFrontendBootstrap(router,LoggerFactory.getLogger(HistoryServerStaticFileServerHandlerTest.class),tmp.newFolder("uploadDir"),null,"localhost",0,new Configuration());
  int port=webUI.getServerPort();
  try {
    String notFound404=HistoryServerTest.getFromHTTP("http://localhost:" + port + "/hello");
    Assert.assertTrue(notFound404.contains("404 Not Found"));
    String index=HistoryServerTest.getFromHTTP("http://localhost:" + port + "/index.html");
    Assert.assertTrue(index.contains("Completed Jobs"));
    String index2=HistoryServerTest.getFromHTTP("http://localhost:" + port + "/");
    Assert.assertEquals(index,index2);
    File dir=new File(webDir,"dir.json");
    dir.mkdirs();
    String dirNotFound404=HistoryServerTest.getFromHTTP("http://localhost:" + port + "/dir");
    Assert.assertTrue(dirNotFound404.contains("404 Not Found"));
    tmp.newFile("secret");
    String x=HistoryServerTest.getFromHTTP("http://localhost:" + port + "/../secret");
    Assert.assertTrue(x.contains("404 Not Found"));
  }
  finally {
    webUI.shutdown();
  }
}
