@Test public void testCheckpointedStreamingClassloaderJobWithCustomClassLoader() throws IOException, ProgramInvocationException {
  PackagedProgram streamingCheckpointedProg=new PackagedProgram(new File(STREAMING_CHECKPOINTED_PROG_JAR_FILE));
  TestStreamEnvironment.setAsContext(testCluster,parallelism,Collections.singleton(new Path(STREAMING_CHECKPOINTED_PROG_JAR_FILE)),Collections.<URL>emptyList());
  try {
    streamingCheckpointedProg.invokeInteractiveModeForExecution();
  }
 catch (  Exception e) {
    try {
      Optional<Throwable> exception=ExceptionUtils.findThrowable(e,candidate -> candidate.getClass().getCanonicalName().equals("org.apache.flink.test.classloading.jar.CheckpointedStreamingProgram.SuccessException"));
      if (!exception.isPresent()) {
        throw e;
      }
 else {
        Assert.fail("Deserialization of user exception should have failed.");
      }
    }
 catch (    NoClassDefFoundError expected) {
    }
  }
}
