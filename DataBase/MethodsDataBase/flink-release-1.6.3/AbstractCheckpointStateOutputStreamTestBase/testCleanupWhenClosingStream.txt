/** 
 * Tests that the underlying stream file is deleted upon calling close.
 */
@Test public void testCleanupWhenClosingStream() throws IOException {
  final FileSystem fs=FileSystem.getLocalFileSystem();
  final Path folder=new Path(tmp.newFolder().toURI());
  final String fileName="nonCreativeTestFileName";
  final Path path=new Path(folder,fileName);
  try (FSDataOutputStream stream=createTestStream(fs,folder,fileName)){
    Random rnd=new Random();
    for (int i=0; i < rnd.nextInt(1000); i++) {
      stream.write(rnd.nextInt(100));
    }
    assertTrue(fs.exists(path));
  }
   assertFalse(fs.exists(path));
}
