/** 
 * Tests that a suspended checkpoint coordinator calls suspend on the store and counter.
 */
@Test public void testSuspendCheckpointCoordinator() throws Exception {
  CheckpointIDCounter counter=mock(CheckpointIDCounter.class);
  CompletedCheckpointStore store=mock(CompletedCheckpointStore.class);
  ExecutionGraph graph=createExecutionGraphAndEnableCheckpointing(counter,store);
  graph.suspend(new Exception("Test Exception"));
  verify(counter,times(1)).shutdown(eq(JobStatus.SUSPENDED));
  verify(store,times(1)).shutdown(eq(JobStatus.SUSPENDED));
}
