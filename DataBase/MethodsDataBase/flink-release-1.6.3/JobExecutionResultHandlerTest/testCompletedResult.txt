@Test public void testCompletedResult() throws Exception {
  final JobStatus jobStatus=JobStatus.FINISHED;
  final ArchivedExecutionGraph executionGraph=new ArchivedExecutionGraphBuilder().setJobID(TEST_JOB_ID).setState(jobStatus).build();
  final TestingRestfulGateway testingRestfulGateway=TestingRestfulGateway.newBuilder().setRequestJobStatusFunction(jobId -> {
    assertThat(jobId,equalTo(TEST_JOB_ID));
    return CompletableFuture.completedFuture(jobStatus);
  }
).setRequestJobResultFunction(jobId -> {
    assertThat(jobId,equalTo(TEST_JOB_ID));
    return CompletableFuture.completedFuture(JobResult.createFrom(executionGraph));
  }
).build();
  final JobExecutionResultResponseBody responseBody=jobExecutionResultHandler.handleRequest(testRequest,testingRestfulGateway).get();
  assertThat(responseBody.getStatus().getId(),equalTo(QueueStatus.Id.COMPLETED));
  assertThat(responseBody.getJobExecutionResult(),not(nullValue()));
}
