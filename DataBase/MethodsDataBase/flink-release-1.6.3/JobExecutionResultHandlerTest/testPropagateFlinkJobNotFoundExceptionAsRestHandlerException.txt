@Test public void testPropagateFlinkJobNotFoundExceptionAsRestHandlerException() throws Exception {
  final TestingRestfulGateway testingRestfulGateway=TestingRestfulGateway.newBuilder().setRequestJobStatusFunction(jobId -> FutureUtils.completedExceptionally(new FlinkJobNotFoundException(jobId))).build();
  try {
    jobExecutionResultHandler.handleRequest(testRequest,testingRestfulGateway).get();
    fail("Expected exception not thrown");
  }
 catch (  final ExecutionException e) {
    final Throwable cause=ExceptionUtils.stripCompletionException(e.getCause());
    assertThat(cause,instanceOf(RestHandlerException.class));
    assertThat(((RestHandlerException)cause).getHttpResponseStatus(),equalTo(HttpResponseStatus.NOT_FOUND));
  }
}
