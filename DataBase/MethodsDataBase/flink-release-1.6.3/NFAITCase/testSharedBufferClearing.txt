@Test public void testSharedBufferClearing() throws Exception {
  Pattern<Event,?> pattern=Pattern.<Event>begin("start").followedBy("end");
  Event a=new Event(40,"a",1.0);
  Event b=new Event(41,"b",2.0);
  SharedBuffer<Event> spiedBuffer=Mockito.spy(sharedBuffer);
  NFA<Event> nfa=compile(pattern,false);
  nfa.process(spiedBuffer,nfa.createInitialNFAState(),a,1);
  nfa.process(spiedBuffer,nfa.createInitialNFAState(),b,2);
  Mockito.verify(spiedBuffer,Mockito.never()).advanceTime(anyLong());
  nfa.advanceTime(spiedBuffer,nfa.createInitialNFAState(),2);
  Mockito.verify(spiedBuffer,Mockito.times(1)).advanceTime(2);
}
