@Test public void testFailedJobThrowsJobExecutionException() throws Exception {
  final FlinkException cause=new FlinkException("Test exception");
  final JobResult jobResult=JobResult.createFrom(new ArchivedExecutionGraphBuilder().setJobID(new JobID()).setState(JobStatus.FAILED).setFailureCause(new ErrorInfo(cause,42L)).build());
  try {
    jobResult.toJobExecutionResult(getClass().getClassLoader());
    fail("Job should fail with JobExecutionException.");
  }
 catch (  JobExecutionException expected) {
    assertThat(expected.getCause(),is(equalTo(cause)));
  }
}
