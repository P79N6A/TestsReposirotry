@Test public void testLateWindowDropping() throws Exception {
  WindowAssigner<Integer,TimeWindow> mockAssigner=mockTimeWindowAssigner();
  Trigger<Integer,TimeWindow> mockTrigger=mockTrigger();
  InternalWindowFunction<Iterable<Integer>,Void,Integer,TimeWindow> mockWindowFunction=mockWindowFunction();
  KeyedOneInputStreamOperatorTestHarness<Integer,Integer,Void> testHarness=createWindowOperator(mockAssigner,mockTrigger,20L,mockWindowFunction);
  testHarness.open();
  when(mockAssigner.assignWindows(anyInt(),anyLong(),anyAssignerContext())).thenReturn(Arrays.asList(new TimeWindow(0,2)));
  assertEquals(0,testHarness.getOutput().size());
  assertEquals(0,testHarness.numKeyedStateEntries());
  shouldFireOnElement(mockTrigger);
  testHarness.processWatermark(new Watermark(21));
  testHarness.processElement(new StreamRecord<>(0,0L));
  assertEquals(0,testHarness.numKeyedStateEntries());
  assertEquals(0,testHarness.numEventTimeTimers());
  assertEquals(0,testHarness.numProcessingTimeTimers());
  assertEquals(0,testHarness.extractOutputStreamRecords().size());
}
