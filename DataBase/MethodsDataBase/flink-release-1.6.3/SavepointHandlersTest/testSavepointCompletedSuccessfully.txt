@Test public void testSavepointCompletedSuccessfully() throws Exception {
  final TestingRestfulGateway testingRestfulGateway=new TestingRestfulGateway.Builder().setTriggerSavepointFunction((  JobID jobId,  String targetDirectory) -> CompletableFuture.completedFuture(COMPLETED_SAVEPOINT_EXTERNAL_POINTER)).build();
  final TriggerId triggerId=savepointTriggerHandler.handleRequest(triggerSavepointRequest(),testingRestfulGateway).get().getTriggerId();
  AsynchronousOperationResult<SavepointInfo> savepointResponseBody;
  savepointResponseBody=savepointStatusHandler.handleRequest(savepointStatusRequest(triggerId),testingRestfulGateway).get();
  assertThat(savepointResponseBody.queueStatus().getId(),equalTo(QueueStatus.Id.COMPLETED));
  assertThat(savepointResponseBody.resource(),notNullValue());
  assertThat(savepointResponseBody.resource().getLocation(),equalTo(COMPLETED_SAVEPOINT_EXTERNAL_POINTER));
}
