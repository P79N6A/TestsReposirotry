@Test public void testTriggerSavepointWithDefaultDirectory() throws Exception {
  final CompletableFuture<String> targetDirectoryFuture=new CompletableFuture<>();
  final TestingRestfulGateway testingRestfulGateway=new TestingRestfulGateway.Builder().setTriggerSavepointFunction((  JobID jobId,  String targetDirectory) -> {
    targetDirectoryFuture.complete(targetDirectory);
    return CompletableFuture.completedFuture(COMPLETED_SAVEPOINT_EXTERNAL_POINTER);
  }
).build();
  final String defaultSavepointDir="/other/dir";
  final SavepointHandlers savepointHandlers=new SavepointHandlers(defaultSavepointDir);
  final SavepointHandlers.SavepointTriggerHandler savepointTriggerHandler=savepointHandlers.new SavepointTriggerHandler(LOCAL_REST_ADDRESS,leaderRetriever,TIMEOUT,Collections.emptyMap());
  savepointTriggerHandler.handleRequest(triggerSavepointRequestWithDefaultDirectory(),testingRestfulGateway).get();
  assertThat(targetDirectoryFuture.get(),equalTo(defaultSavepointDir));
}
