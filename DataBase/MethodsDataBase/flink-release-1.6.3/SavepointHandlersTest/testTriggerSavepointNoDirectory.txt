@Test public void testTriggerSavepointNoDirectory() throws Exception {
  TestingRestfulGateway testingRestfulGateway=new TestingRestfulGateway.Builder().setTriggerSavepointFunction((  JobID jobId,  String directory) -> CompletableFuture.completedFuture(COMPLETED_SAVEPOINT_EXTERNAL_POINTER)).build();
  try {
    savepointTriggerHandler.handleRequest(triggerSavepointRequestWithDefaultDirectory(),testingRestfulGateway).get();
    fail("Expected exception not thrown.");
  }
 catch (  RestHandlerException rhe) {
    assertThat(rhe.getMessage(),equalTo("Config key [state.savepoints.dir] is not set. " + "Property [target-directory] must be provided."));
    assertThat(rhe.getHttpResponseStatus(),equalTo(HttpResponseStatus.BAD_REQUEST));
  }
}
