@Test public void testMergeConsecutiveWindows(){
  MergingWindowAssigner.MergeCallback callback=mock(MergingWindowAssigner.MergeCallback.class);
  EventTimeSessionWindows assigner=EventTimeSessionWindows.withGap(Time.milliseconds(5000));
  assigner.mergeWindows(Lists.newArrayList(new TimeWindow(0,1),new TimeWindow(1,2),new TimeWindow(2,3),new TimeWindow(4,5),new TimeWindow(5,6)),callback);
  verify(callback,times(1)).merge((Collection<TimeWindow>)argThat(containsInAnyOrder(new TimeWindow(0,1),new TimeWindow(1,2),new TimeWindow(2,3))),eq(new TimeWindow(0,3)));
  verify(callback,times(1)).merge((Collection<TimeWindow>)argThat(containsInAnyOrder(new TimeWindow(4,5),new TimeWindow(5,6))),eq(new TimeWindow(4,6)));
  verify(callback,times(2)).merge(anyCollection(),Matchers.anyObject());
}
