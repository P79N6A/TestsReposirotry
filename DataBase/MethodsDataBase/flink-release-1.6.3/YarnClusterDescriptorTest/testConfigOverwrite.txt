@Test public void testConfigOverwrite() throws ClusterDeploymentException {
  Configuration configuration=new Configuration();
  configuration.setInteger(YarnConfigOptions.VCORES,Integer.MAX_VALUE);
  configuration.setInteger(ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN,0);
  LegacyYarnClusterDescriptor clusterDescriptor=new LegacyYarnClusterDescriptor(configuration,yarnConfiguration,temporaryFolder.getRoot().getAbsolutePath(),yarnClient,true);
  clusterDescriptor.setLocalJarPath(new Path(flinkJar.getPath()));
  ClusterSpecification clusterSpecification=new ClusterSpecification.ClusterSpecificationBuilder().setMasterMemoryMB(1).setTaskManagerMemoryMB(1).setNumberTaskManagers(1).setSlotsPerTaskManager(1).createClusterSpecification();
  try {
    clusterDescriptor.deploySessionCluster(clusterSpecification);
    fail("The deploy call should have failed.");
  }
 catch (  ClusterDeploymentException e) {
    if (!(e.getCause() instanceof IllegalConfigurationException)) {
      throw e;
    }
  }
 finally {
    clusterDescriptor.close();
  }
}
