@Test public void testConnectionTimeout() throws Exception {
  final Configuration config=new Configuration();
  config.setLong(RestOptions.CONNECTION_TIMEOUT,1);
  try (final RestClient restClient=new RestClient(RestClientConfiguration.fromConfiguration(config),Executors.directExecutor())){
    restClient.sendRequest(unroutableIp,80,new TestMessageHeaders(),EmptyMessageParameters.getInstance(),EmptyRequestBody.getInstance()).get(60,TimeUnit.SECONDS);
  }
 catch (  final ExecutionException e) {
    final Throwable throwable=ExceptionUtils.stripExecutionException(e);
    assertThat(throwable,instanceOf(ConnectTimeoutException.class));
    assertThat(throwable.getMessage(),containsString(unroutableIp));
  }
}
