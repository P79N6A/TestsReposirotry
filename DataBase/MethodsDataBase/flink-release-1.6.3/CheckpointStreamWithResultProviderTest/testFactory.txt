@Test public void testFactory() throws Exception {
  CheckpointStreamFactory primaryFactory=createCheckpointStreamFactory();
  try (CheckpointStreamWithResultProvider primaryOnly=CheckpointStreamWithResultProvider.createSimpleStream(CheckpointedStateScope.EXCLUSIVE,primaryFactory)){
    Assert.assertTrue(primaryOnly instanceof CheckpointStreamWithResultProvider.PrimaryStreamOnly);
  }
   LocalRecoveryDirectoryProvider directoryProvider=createLocalRecoveryDirectoryProvider();
  try (CheckpointStreamWithResultProvider primaryAndSecondary=CheckpointStreamWithResultProvider.createDuplicatingStream(42L,CheckpointedStateScope.EXCLUSIVE,primaryFactory,directoryProvider)){
    Assert.assertTrue(primaryAndSecondary instanceof CheckpointStreamWithResultProvider.PrimaryAndSecondaryStream);
  }
 }
