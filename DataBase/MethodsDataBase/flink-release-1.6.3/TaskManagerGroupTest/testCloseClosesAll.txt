@Test public void testCloseClosesAll() throws IOException {
  final TaskManagerMetricGroup group=new TaskManagerMetricGroup(registry,"localhost",new AbstractID().toString());
  final JobID jid1=new JobID();
  final JobID jid2=new JobID();
  final String jobName1="testjob";
  final String jobName2="anotherJob";
  final JobVertexID vertex11=new JobVertexID();
  final JobVertexID vertex12=new JobVertexID();
  final JobVertexID vertex21=new JobVertexID();
  final ExecutionAttemptID execution11=new ExecutionAttemptID();
  final ExecutionAttemptID execution12=new ExecutionAttemptID();
  final ExecutionAttemptID execution21=new ExecutionAttemptID();
  TaskMetricGroup tmGroup11=group.addTaskForJob(jid1,jobName1,vertex11,execution11,"test",17,0);
  TaskMetricGroup tmGroup12=group.addTaskForJob(jid1,jobName1,vertex12,execution12,"test",13,1);
  TaskMetricGroup tmGroup21=group.addTaskForJob(jid2,jobName2,vertex21,execution21,"test",7,1);
  group.close();
  assertTrue(tmGroup11.isClosed());
  assertTrue(tmGroup12.isClosed());
  assertTrue(tmGroup21.isClosed());
}
