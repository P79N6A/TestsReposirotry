/** 
 * Tests HA mode configuration with deprecated config values.
 */
@Test public void testDeprecatedFromConfig() throws Exception {
  Configuration config=new Configuration();
  config.setString("recovery.mode",ConfigConstants.DEFAULT_RECOVERY_MODE);
  assertEquals(DEFAULT_HA_MODE,HighAvailabilityMode.fromConfig(config));
  config.setString("recovery.mode",HighAvailabilityMode.ZOOKEEPER.name().toLowerCase());
  assertEquals(HighAvailabilityMode.ZOOKEEPER,HighAvailabilityMode.fromConfig(config));
  config.setString("high-availability",HighAvailabilityMode.NONE.name().toLowerCase());
  config.setString("recovery.mode",HighAvailabilityMode.ZOOKEEPER.name().toLowerCase());
  assertEquals(HighAvailabilityMode.NONE,HighAvailabilityMode.fromConfig(config));
}
