@Test public void testRejectNonJarFiles() throws Exception {
  final Path uploadedFile=Files.createFile(jarDir.resolve("katrin.png"));
  final HandlerRequest<EmptyRequestBody,EmptyMessageParameters> request=createRequest(uploadedFile);
  try {
    jarUploadHandler.handleRequest(request,mockDispatcherGateway).get();
    fail("Expected exception not thrown.");
  }
 catch (  final ExecutionException e) {
    final Throwable throwable=ExceptionUtils.stripCompletionException(e.getCause());
    assertThat(throwable,instanceOf(RestHandlerException.class));
    final RestHandlerException restHandlerException=(RestHandlerException)throwable;
    assertThat(restHandlerException.getHttpResponseStatus(),equalTo(HttpResponseStatus.BAD_REQUEST));
  }
}
