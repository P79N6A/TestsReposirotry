/** 
 * Tests that an querying an unknown trigger id will return an exceptionally completed future.
 */
@Test public void testUnknownTriggerId() throws Exception {
  final TestingRestfulGateway testingRestfulGateway=new TestingRestfulGateway.Builder().build();
  try {
    testingStatusHandler.handleRequest(statusOperationRequest(new TriggerId()),testingRestfulGateway).get();
    fail("This should have failed with a RestHandlerException.");
  }
 catch (  ExecutionException ee) {
    final Optional<RestHandlerException> optionalRestHandlerException=ExceptionUtils.findThrowable(ee,RestHandlerException.class);
    assertThat(optionalRestHandlerException.isPresent(),is(true));
    final RestHandlerException restHandlerException=optionalRestHandlerException.get();
    assertThat(restHandlerException.getMessage(),containsString("Operation not found"));
    assertThat(restHandlerException.getHttpResponseStatus(),is(HttpResponseStatus.NOT_FOUND));
  }
}
