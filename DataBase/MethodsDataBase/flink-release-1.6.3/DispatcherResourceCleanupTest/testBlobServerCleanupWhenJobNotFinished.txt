@Test public void testBlobServerCleanupWhenJobNotFinished() throws Exception {
  submitJob();
  resultFuture.completeExceptionally(new JobNotFinishedException(jobId));
  terminationFuture.complete(null);
  assertThat(cleanupJobFuture.get(),equalTo(jobId));
  assertThat(blobFile.exists(),is(false));
  try {
    deleteAllHABlobsFuture.get(50L,TimeUnit.MILLISECONDS);
    fail("We should not delete the HA blobs.");
  }
 catch (  TimeoutException ignored) {
  }
  assertThat(deleteAllHABlobsFuture.isDone(),is(false));
}
