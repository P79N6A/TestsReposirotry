@Test public void testHABlobsAreNotRemovedIfHAJobGraphRemovalFails() throws Exception {
  submittedJobGraphStore.setRemovalFailure(new Exception("Failed to Remove future"));
  submitJob();
  ArchivedExecutionGraph executionGraph=new ArchivedExecutionGraphBuilder().setJobID(jobId).setState(JobStatus.CANCELED).build();
  resultFuture.complete(executionGraph);
  terminationFuture.complete(null);
  assertThat(cleanupJobFuture.get(),equalTo(jobId));
  assertThat(deleteAllHABlobsFuture.isDone(),is(false));
}
