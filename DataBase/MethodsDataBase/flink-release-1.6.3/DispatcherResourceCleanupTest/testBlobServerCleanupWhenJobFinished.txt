@Test public void testBlobServerCleanupWhenJobFinished() throws Exception {
  submitJob();
  resultFuture.complete(new ArchivedExecutionGraphBuilder().setJobID(jobId).setState(JobStatus.FINISHED).build());
  terminationFuture.complete(null);
  assertThat(cleanupJobFuture.get(),equalTo(jobId));
  assertThat(deleteAllHABlobsFuture.get(),equalTo(jobId));
  assertThat(blobFile.exists(),is(false));
}
