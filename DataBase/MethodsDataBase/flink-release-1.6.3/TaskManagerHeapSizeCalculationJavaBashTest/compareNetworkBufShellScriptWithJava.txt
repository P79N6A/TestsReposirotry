/** 
 * Tests that  {@link TaskManagerServices#calculateNetworkBufferMemory(long,Configuration)} has the sameresult as the shell script.
 */
@Test public void compareNetworkBufShellScriptWithJava() throws Exception {
  int managedMemSize=Integer.valueOf(TaskManagerOptions.MANAGED_MEMORY_SIZE.defaultValue());
  float managedMemFrac=TaskManagerOptions.MANAGED_MEMORY_FRACTION.defaultValue();
  compareNetworkBufJavaVsScript(getConfig(1000,false,0.1f,64L << 20,1L << 30,managedMemSize,managedMemFrac),0.0f);
  compareNetworkBufJavaVsScript(getConfig(1000,true,0.1f,64L << 20,1L << 30,10,managedMemFrac),0.0f);
  compareNetworkBufJavaVsScript(getConfig(1000,true,0.1f,64L << 20,1L << 30,managedMemSize,0.1f),0.0f);
  Random ran=new Random();
  for (int i=0; i < NUM_RANDOM_TESTS; ++i) {
    compareNetworkBufJavaVsScript(getRandomConfig(ran),0.01f);
  }
}
