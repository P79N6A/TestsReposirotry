@Test public void testRootSlotRelease() throws ExecutionException, InterruptedException {
  final CompletableFuture<SlotRequestId> slotReleasedFuture=new CompletableFuture<>();
  final TestingAllocatedSlotActions allocatedSlotActions=new TestingAllocatedSlotActions();
  allocatedSlotActions.setReleaseSlotConsumer(tuple3 -> slotReleasedFuture.complete(tuple3.f0));
  final SlotSharingManager slotSharingManager=new SlotSharingManager(SLOT_SHARING_GROUP_ID,allocatedSlotActions,SLOT_OWNER);
  SlotRequestId slotRequestId=new SlotRequestId();
  SlotRequestId allocatedSlotRequestId=new SlotRequestId();
  CompletableFuture<SlotContext> slotContextFuture=new CompletableFuture<>();
  SlotSharingManager.MultiTaskSlot rootSlot=slotSharingManager.createRootSlot(slotRequestId,slotContextFuture,allocatedSlotRequestId);
  assertTrue(slotSharingManager.contains(slotRequestId));
  rootSlot.release(new FlinkException("Test exception"));
  assertEquals(allocatedSlotRequestId,slotReleasedFuture.get());
  assertFalse(slotSharingManager.contains(slotRequestId));
}
