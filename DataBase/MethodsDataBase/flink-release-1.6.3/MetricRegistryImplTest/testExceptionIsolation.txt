@Test public void testExceptionIsolation() throws Exception {
  Configuration config=new Configuration();
  config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + "test1." + ConfigConstants.METRICS_REPORTER_CLASS_SUFFIX,FailingReporter.class.getName());
  config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + "test2." + ConfigConstants.METRICS_REPORTER_CLASS_SUFFIX,TestReporter7.class.getName());
  MetricRegistryImpl registry=new MetricRegistryImpl(MetricRegistryConfiguration.fromConfiguration(config));
  Counter metric=new SimpleCounter();
  registry.register(metric,"counter",new MetricGroupTest.DummyAbstractMetricGroup(registry));
  assertEquals(metric,TestReporter7.addedMetric);
  assertEquals("counter",TestReporter7.addedMetricName);
  registry.unregister(metric,"counter",new MetricGroupTest.DummyAbstractMetricGroup(registry));
  assertEquals(metric,TestReporter7.removedMetric);
  assertEquals("counter",TestReporter7.removedMetricName);
  registry.shutdown().get();
}
