@Test public void testConfigurableDelimiterForReporters() throws Exception {
  Configuration config=new Configuration();
  config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + "test1." + ConfigConstants.METRICS_REPORTER_SCOPE_DELIMITER,"_");
  config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + "test1." + ConfigConstants.METRICS_REPORTER_CLASS_SUFFIX,TestReporter.class.getName());
  config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + "test2." + ConfigConstants.METRICS_REPORTER_SCOPE_DELIMITER,"-");
  config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + "test2." + ConfigConstants.METRICS_REPORTER_CLASS_SUFFIX,TestReporter.class.getName());
  config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + "test3." + ConfigConstants.METRICS_REPORTER_SCOPE_DELIMITER,"AA");
  config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + "test3." + ConfigConstants.METRICS_REPORTER_CLASS_SUFFIX,TestReporter.class.getName());
  MetricRegistryImpl registry=new MetricRegistryImpl(MetricRegistryConfiguration.fromConfiguration(config));
  assertEquals(GLOBAL_DEFAULT_DELIMITER,registry.getDelimiter());
  assertEquals('_',registry.getDelimiter(0));
  assertEquals('-',registry.getDelimiter(1));
  assertEquals(GLOBAL_DEFAULT_DELIMITER,registry.getDelimiter(2));
  assertEquals(GLOBAL_DEFAULT_DELIMITER,registry.getDelimiter(3));
  assertEquals(GLOBAL_DEFAULT_DELIMITER,registry.getDelimiter(-1));
  registry.shutdown().get();
}
