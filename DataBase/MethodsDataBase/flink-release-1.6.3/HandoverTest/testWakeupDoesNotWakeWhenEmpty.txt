@Test public void testWakeupDoesNotWakeWhenEmpty() throws Exception {
  Handover handover=new Handover();
  handover.wakeupProducer();
  try {
    handover.produce(createTestRecords());
  }
 catch (  Handover.WakeupException e) {
    fail();
  }
  handover.wakeupProducer();
  try {
    handover.produce(createTestRecords());
    fail("should throw an exception");
  }
 catch (  Handover.WakeupException e) {
  }
  assertNotNull(handover.pollNext());
  try {
    handover.produce(createTestRecords());
  }
 catch (  Handover.WakeupException e) {
    fail();
  }
}
