@Test public void testProducerFailedException() throws Exception {
  PartitionRequestQueue queue=new PartitionRequestQueue();
  ResultSubpartitionView view=new ReleasedResultSubpartitionView();
  ResultPartitionProvider partitionProvider=(partitionId,index,availabilityListener) -> view;
  EmbeddedChannel ch=new EmbeddedChannel(queue);
  CreditBasedSequenceNumberingViewReader seqView=new CreditBasedSequenceNumberingViewReader(new InputChannelID(),2,queue);
  seqView.requestSubpartitionView(partitionProvider,new ResultPartitionID(),0);
  seqView.notifyDataAvailable();
  ch.runPendingTasks();
  Object msg=ch.readOutbound();
  assertEquals(msg.getClass(),NettyMessage.ErrorResponse.class);
  NettyMessage.ErrorResponse err=(NettyMessage.ErrorResponse)msg;
  assertTrue(err.cause instanceof CancelTaskException);
}
