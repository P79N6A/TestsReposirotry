@Test public void testInitializeSerializerBeforeSerialization() throws Exception {
  final TestStateDescriptor<String> descr=new TestStateDescriptor<>("test",String.class);
  assertFalse(descr.isSerializerInitialized());
  try {
    descr.getSerializer();
    fail("should fail with an exception");
  }
 catch (  IllegalStateException ignored) {
  }
  descr.initializeSerializerUnlessSet(new ExecutionConfig());
  assertTrue(descr.isSerializerInitialized());
  assertNotNull(descr.getSerializer());
  assertTrue(descr.getSerializer() instanceof StringSerializer);
  TestStateDescriptor<String> clone=CommonTestUtils.createCopySerializable(descr);
  assertTrue(clone.isSerializerInitialized());
  assertNotNull(clone.getSerializer());
  assertTrue(clone.getSerializer() instanceof StringSerializer);
}
