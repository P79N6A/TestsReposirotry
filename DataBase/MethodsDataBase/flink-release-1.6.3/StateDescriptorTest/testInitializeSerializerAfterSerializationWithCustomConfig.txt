@Test public void testInitializeSerializerAfterSerializationWithCustomConfig() throws Exception {
  assertEquals("broken test assumption",-1,new KryoSerializer<>(String.class,new ExecutionConfig()).getKryo().getRegistration(File.class).getId());
  final ExecutionConfig config=new ExecutionConfig();
  config.registerKryoType(File.class);
  final TestStateDescriptor<Path> original=new TestStateDescriptor<>("test",Path.class);
  TestStateDescriptor<Path> clone=CommonTestUtils.createCopySerializable(original);
  clone.initializeSerializerUnlessSet(config);
  assertTrue(((KryoSerializer<?>)clone.getSerializer()).getKryo().getRegistration(File.class).getId() > 0);
}
