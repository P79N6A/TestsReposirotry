@Test public void testInitializeSerializerAfterSerialization() throws Exception {
  final TestStateDescriptor<String> descr=new TestStateDescriptor<>("test",String.class);
  assertFalse(descr.isSerializerInitialized());
  try {
    descr.getSerializer();
    fail("should fail with an exception");
  }
 catch (  IllegalStateException ignored) {
  }
  TestStateDescriptor<String> clone=CommonTestUtils.createCopySerializable(descr);
  assertFalse(clone.isSerializerInitialized());
  try {
    clone.getSerializer();
    fail("should fail with an exception");
  }
 catch (  IllegalStateException ignored) {
  }
  clone.initializeSerializerUnlessSet(new ExecutionConfig());
  assertTrue(clone.isSerializerInitialized());
  assertNotNull(clone.getSerializer());
  assertTrue(clone.getSerializer() instanceof StringSerializer);
}
