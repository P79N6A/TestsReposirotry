@Test public void testArchiver() throws Exception {
  JsonArchivist archivist=new SubtaskExecutionAttemptDetailsHandler.SubtaskExecutionAttemptDetailsJsonArchivist();
  AccessExecutionGraph originalJob=ArchivedJobGenerationUtils.getTestJob();
  AccessExecutionJobVertex originalTask=ArchivedJobGenerationUtils.getTestTask();
  AccessExecution originalAttempt=ArchivedJobGenerationUtils.getTestAttempt();
  Collection<ArchivedJson> archives=archivist.archiveJsonWithPath(originalJob);
  Assert.assertEquals(2,archives.size());
  Iterator<ArchivedJson> iterator=archives.iterator();
  ArchivedJson archive1=iterator.next();
  Assert.assertEquals("/jobs/" + originalJob.getJobID() + "/vertices/"+ originalTask.getJobVertexId()+ "/subtasks/"+ originalAttempt.getParallelSubtaskIndex(),archive1.getPath());
  compareAttemptDetails(originalAttempt,archive1.getJson());
  ArchivedJson archive2=iterator.next();
  Assert.assertEquals("/jobs/" + originalJob.getJobID() + "/vertices/"+ originalTask.getJobVertexId()+ "/subtasks/"+ originalAttempt.getParallelSubtaskIndex()+ "/attempts/"+ originalAttempt.getAttemptNumber(),archive2.getPath());
  compareAttemptDetails(originalAttempt,archive2.getJson());
}
