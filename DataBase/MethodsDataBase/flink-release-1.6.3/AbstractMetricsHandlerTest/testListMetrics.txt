@Test public void testListMetrics() throws Exception {
  final CompletableFuture<MetricCollectionResponseBody> completableFuture=testMetricsHandler.handleRequest(new HandlerRequest<>(EmptyRequestBody.getInstance(),new TestMessageParameters(),Collections.emptyMap(),Collections.emptyMap()),mockDispatcherGateway);
  assertTrue(completableFuture.isDone());
  final MetricCollectionResponseBody metricCollectionResponseBody=completableFuture.get();
  assertThat(metricCollectionResponseBody.getMetrics(),hasSize(1));
  final Metric metric=metricCollectionResponseBody.getMetrics().iterator().next();
  assertThat(metric.getId(),equalTo(TEST_METRIC_NAME));
  assertThat(metric.getValue(),equalTo(null));
}
