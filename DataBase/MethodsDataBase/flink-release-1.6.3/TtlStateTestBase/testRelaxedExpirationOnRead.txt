@Test public void testRelaxedExpirationOnRead() throws Exception {
  initTest(StateTtlConfig.UpdateType.OnReadAndWrite,StateTtlConfig.StateVisibility.ReturnExpiredIfNotCleanedUp);
  timeProvider.time=0;
  ctx().update(ctx().updateEmpty);
  takeAndRestoreSnapshot();
  timeProvider.time=50;
  assertEquals("Unexpired state should be available",ctx().getUpdateEmpty,ctx().get());
  takeAndRestoreSnapshot();
  timeProvider.time=170;
  assertEquals("Expired state should be available",ctx().getUpdateEmpty,ctx().get());
  assertEquals("Expired state should be cleared on access",ctx().emptyValue,ctx().get());
}
