@Test public void testRelaxedExpirationOnWrite() throws Exception {
  initTest(StateTtlConfig.UpdateType.OnCreateAndWrite,StateTtlConfig.StateVisibility.ReturnExpiredIfNotCleanedUp);
  timeProvider.time=0;
  ctx().update(ctx().updateEmpty);
  takeAndRestoreSnapshot();
  timeProvider.time=120;
  assertEquals("Expired state should be available",ctx().getUpdateEmpty,ctx().get());
  assertEquals("Original state should be cleared on access",ctx().emptyValue,ctx().getOriginal());
  assertEquals("Expired state should be cleared on access",ctx().emptyValue,ctx().get());
}
