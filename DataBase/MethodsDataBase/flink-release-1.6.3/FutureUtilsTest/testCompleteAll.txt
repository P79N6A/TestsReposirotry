@Test public void testCompleteAll() throws Exception {
  final CompletableFuture<String> inputFuture1=new CompletableFuture<>();
  final CompletableFuture<Integer> inputFuture2=new CompletableFuture<>();
  final List<CompletableFuture<?>> futuresToComplete=Arrays.asList(inputFuture1,inputFuture2);
  final FutureUtils.ConjunctFuture<Void> completeFuture=FutureUtils.completeAll(futuresToComplete);
  assertThat(completeFuture.isDone(),is(false));
  assertThat(completeFuture.getNumFuturesCompleted(),is(0));
  assertThat(completeFuture.getNumFuturesTotal(),is(futuresToComplete.size()));
  inputFuture2.complete(42);
  assertThat(completeFuture.isDone(),is(false));
  assertThat(completeFuture.getNumFuturesCompleted(),is(1));
  inputFuture1.complete("foobar");
  assertThat(completeFuture.isDone(),is(true));
  assertThat(completeFuture.getNumFuturesCompleted(),is(2));
  completeFuture.get();
}
