@Test public void testMixedMultipart() throws Exception {
  OkHttpClient client=new OkHttpClient();
  MultipartUploadResource.MultipartMixedHandler mixedHandler=MULTIPART_UPLOAD_RESOURCE.getMixedHandler();
  Request jsonRequest=buildJsonRequest(mixedHandler.getMessageHeaders().getTargetRestEndpointURL(),new MultipartUploadResource.TestRequestBody());
  try (Response response=client.newCall(jsonRequest).execute()){
    assertEquals(HttpResponseStatus.INTERNAL_SERVER_ERROR.code(),response.code());
  }
   Request fileRequest=buildFileRequest(mixedHandler.getMessageHeaders().getTargetRestEndpointURL());
  try (Response response=client.newCall(fileRequest).execute()){
    assertEquals(HttpResponseStatus.BAD_REQUEST.code(),response.code());
  }
   MultipartUploadResource.TestRequestBody json=new MultipartUploadResource.TestRequestBody();
  Request mixedRequest=buildMixedRequest(mixedHandler.getMessageHeaders().getTargetRestEndpointURL(),json);
  try (Response response=client.newCall(mixedRequest).execute()){
    assertEquals(mixedHandler.getMessageHeaders().getResponseStatusCode().code(),response.code());
    assertEquals(json,mixedHandler.lastReceivedRequest);
  }
 }
