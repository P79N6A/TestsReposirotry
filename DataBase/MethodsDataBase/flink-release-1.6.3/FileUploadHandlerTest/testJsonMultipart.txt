@Test public void testJsonMultipart() throws Exception {
  OkHttpClient client=new OkHttpClient();
  MultipartUploadResource.MultipartJsonHandler jsonHandler=MULTIPART_UPLOAD_RESOURCE.getJsonHandler();
  MultipartUploadResource.TestRequestBody json=new MultipartUploadResource.TestRequestBody();
  Request jsonRequest=buildJsonRequest(jsonHandler.getMessageHeaders().getTargetRestEndpointURL(),json);
  try (Response response=client.newCall(jsonRequest).execute()){
    assertEquals(jsonHandler.getMessageHeaders().getResponseStatusCode().code(),response.code());
    assertEquals(json,jsonHandler.lastReceivedRequest);
  }
   Request fileRequest=buildFileRequest(jsonHandler.getMessageHeaders().getTargetRestEndpointURL());
  try (Response response=client.newCall(fileRequest).execute()){
    assertEquals(HttpResponseStatus.BAD_REQUEST.code(),response.code());
  }
   Request mixedRequest=buildMixedRequest(jsonHandler.getMessageHeaders().getTargetRestEndpointURL(),new MultipartUploadResource.TestRequestBody());
  try (Response response=client.newCall(mixedRequest).execute()){
    assertEquals(HttpResponseStatus.BAD_REQUEST.code(),response.code());
  }
 }
