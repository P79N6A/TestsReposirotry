@Test public void normal(){
  Flux<DataBuffer> body=Flux.just("baz").map(s -> s.getBytes(StandardCharsets.UTF_8)).map(dataBufferFactory::wrap);
  ClientResponse response=ClientResponse.create(HttpStatus.BAD_GATEWAY,ExchangeStrategies.withDefaults()).header("foo","bar").cookie("baz","qux").body(body).build();
  assertEquals(HttpStatus.BAD_GATEWAY,response.statusCode());
  HttpHeaders responseHeaders=response.headers().asHttpHeaders();
  assertEquals("bar",responseHeaders.getFirst("foo"));
  assertNotNull("qux",response.cookies().getFirst("baz"));
  assertEquals("qux",response.cookies().getFirst("baz").getValue());
  StepVerifier.create(response.bodyToFlux(String.class)).expectNext("baz").verifyComplete();
}
