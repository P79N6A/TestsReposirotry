@Test public void innerConfigurationClassesProcessedInCorrectOrder(){
  beanFactory.registerBeanDefinition("config",new RootBeanDefinition(ConfigWithOrderedInnerClasses.class));
  ConfigurationClassPostProcessor pp=new ConfigurationClassPostProcessor();
  pp.postProcessBeanFactory(beanFactory);
  beanFactory.addBeanPostProcessor(new AutowiredAnnotationBeanPostProcessor());
  Foo foo=beanFactory.getBean(Foo.class);
  assertTrue(foo instanceof ExtendedFoo);
  Bar bar=beanFactory.getBean(Bar.class);
  assertSame(foo,bar.foo);
}
