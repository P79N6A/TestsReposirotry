/** 
 * Enhanced  {@link Configuration} classes are only necessary for respectingcertain bean semantics, like singleton-scoping, scoped proxies, etc. <p>Technically,  {@link ConfigurationClassPostProcessor} could fail to enhance theregistered Configuration classes and many use cases would still work. Certain cases, however, like inter-bean singleton references would not. We test for such a case below, and in doing so prove that enhancement is working.
 */
@Test public void enhancementIsPresentBecauseSingletonSemanticsAreRespected(){
  beanFactory.registerBeanDefinition("config",new RootBeanDefinition(SingletonBeanConfig.class));
  ConfigurationClassPostProcessor pp=new ConfigurationClassPostProcessor();
  pp.postProcessBeanFactory(beanFactory);
  Foo foo=beanFactory.getBean("foo",Foo.class);
  Bar bar=beanFactory.getBean("bar",Bar.class);
  assertSame(foo,bar.foo);
  assertTrue(Arrays.asList(beanFactory.getDependentBeans("foo")).contains("bar"));
}
