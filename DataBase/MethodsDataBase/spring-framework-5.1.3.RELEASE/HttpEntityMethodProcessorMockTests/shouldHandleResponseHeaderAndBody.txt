@Test public void shouldHandleResponseHeaderAndBody() throws Exception {
  HttpHeaders responseHeaders=new HttpHeaders();
  responseHeaders.set("header","headerValue");
  ResponseEntity<String> returnValue=new ResponseEntity<>("body",responseHeaders,HttpStatus.ACCEPTED);
  initStringMessageConversion(TEXT_PLAIN);
  processor.handleReturnValue(returnValue,returnTypeResponseEntity,mavContainer,webRequest);
  ArgumentCaptor<HttpOutputMessage> outputMessage=ArgumentCaptor.forClass(HttpOutputMessage.class);
  verify(stringHttpMessageConverter).write(eq("body"),eq(TEXT_PLAIN),outputMessage.capture());
  assertTrue(mavContainer.isRequestHandled());
  assertEquals("headerValue",outputMessage.getValue().getHeaders().get("header").get(0));
}
