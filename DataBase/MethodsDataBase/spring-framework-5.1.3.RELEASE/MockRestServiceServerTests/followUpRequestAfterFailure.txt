@Test public void followUpRequestAfterFailure(){
  MockRestServiceServer server=MockRestServiceServer.bindTo(this.restTemplate).build();
  server.expect(requestTo("/some-service/some-endpoint")).andRespond(request -> {
    throw new SocketException("pseudo network error");
  }
);
  server.expect(requestTo("/reporting-service/report-error")).andExpect(method(POST)).andRespond(withSuccess());
  try {
    this.restTemplate.getForEntity("/some-service/some-endpoint",String.class);
  }
 catch (  Exception ex) {
    this.restTemplate.postForEntity("/reporting-service/report-error",ex.toString(),String.class);
  }
  server.verify();
}
