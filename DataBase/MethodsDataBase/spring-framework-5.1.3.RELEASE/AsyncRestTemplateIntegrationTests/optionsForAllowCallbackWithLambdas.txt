@Test public void optionsForAllowCallbackWithLambdas() throws Exception {
  ListenableFuture<Set<HttpMethod>> allowedFuture=template.optionsForAllow(new URI(baseUrl + "/get"));
  allowedFuture.addCallback(result -> assertEquals("Invalid response",EnumSet.of(HttpMethod.GET,HttpMethod.OPTIONS,HttpMethod.HEAD,HttpMethod.TRACE),result),ex -> fail(ex.getMessage()));
  waitTillDone(allowedFuture);
}
