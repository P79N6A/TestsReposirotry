@Test public void inputStream() throws IOException {
  DataBuffer buffer=createDataBuffer(4);
  buffer.write(new byte[]{'a','b','c','d','e'});
  buffer.readPosition(1);
  InputStream inputStream=buffer.asInputStream();
  assertEquals(4,inputStream.available());
  int result=inputStream.read();
  assertEquals('b',result);
  assertEquals(3,inputStream.available());
  byte[] bytes=new byte[2];
  int len=inputStream.read(bytes);
  assertEquals(2,len);
  assertArrayEquals(new byte[]{'c','d'},bytes);
  assertEquals(1,inputStream.available());
  Arrays.fill(bytes,(byte)0);
  len=inputStream.read(bytes);
  assertEquals(1,len);
  assertArrayEquals(new byte[]{'e',(byte)0},bytes);
  assertEquals(0,inputStream.available());
  assertEquals(-1,inputStream.read());
  assertEquals(-1,inputStream.read(bytes));
  release(buffer);
}
