@Test(expected=TransactionRequiredException.class) public void transactionRequiredExceptionOnPersist(){
  EntityManagerFactory emf=mock(EntityManagerFactory.class);
  EntityManager em=SharedEntityManagerCreator.createSharedEntityManager(emf);
  em.persist(new Object());
}
