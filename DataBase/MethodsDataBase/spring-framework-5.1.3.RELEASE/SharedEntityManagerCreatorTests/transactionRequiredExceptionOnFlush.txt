@Test(expected=TransactionRequiredException.class) public void transactionRequiredExceptionOnFlush(){
  EntityManagerFactory emf=mock(EntityManagerFactory.class);
  EntityManager em=SharedEntityManagerCreator.createSharedEntityManager(emf);
  em.flush();
}
