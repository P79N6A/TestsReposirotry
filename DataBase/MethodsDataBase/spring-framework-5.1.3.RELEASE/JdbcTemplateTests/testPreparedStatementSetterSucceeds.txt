@Test public void testPreparedStatementSetterSucceeds() throws Exception {
  final String sql="UPDATE FOO SET NAME=? WHERE ID = 1";
  final String name="Gary";
  int expectedRowsUpdated=1;
  given(this.preparedStatement.executeUpdate()).willReturn(expectedRowsUpdated);
  PreparedStatementSetter pss=ps -> ps.setString(1,name);
  int actualRowsUpdated=new JdbcTemplate(this.dataSource).update(sql,pss);
  assertEquals("updated correct # of rows",actualRowsUpdated,expectedRowsUpdated);
  verify(this.preparedStatement).setString(1,name);
  verify(this.preparedStatement).close();
  verify(this.connection).close();
}
