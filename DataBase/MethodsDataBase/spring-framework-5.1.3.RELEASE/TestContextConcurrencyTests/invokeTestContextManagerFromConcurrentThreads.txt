@Test public void invokeTestContextManagerFromConcurrentThreads(){
  TestContextManager tcm=new TestContextManager(TestCase.class);
  IntStream.range(1,20).forEach(i -> {
    actualMethods.clear();
    stream(TestCase.class.getDeclaredMethods()).parallel().forEach(testMethod -> {
      try {
        tcm.beforeTestClass();
        tcm.beforeTestMethod(testInstance,testMethod);
        tcm.afterTestMethod(testInstance,testMethod,null);
        tcm.afterTestClass();
      }
 catch (      Exception ex) {
        throw new RuntimeException(ex);
      }
    }
);
    assertThat(actualMethods,equalTo(expectedMethods));
  }
);
  assertEquals(0,tcm.getTestContext().attributeNames().length);
}
