@Test public void httpEntityWithContentType() throws Exception {
  initServlet(wac -> {
    RootBeanDefinition adapterDef=new RootBeanDefinition(RequestMappingHandlerAdapter.class);
    List<HttpMessageConverter<?>> messageConverters=new ArrayList<>();
    messageConverters.add(new MappingJackson2HttpMessageConverter());
    messageConverters.add(new Jaxb2RootElementHttpMessageConverter());
    adapterDef.getPropertyValues().add("messageConverters",messageConverters);
    wac.registerBeanDefinition("handlerAdapter",adapterDef);
  }
,ResponseEntityController.class);
  MockHttpServletRequest request=new MockHttpServletRequest("GET","/test-entity");
  MockHttpServletResponse response=new MockHttpServletResponse();
  getServlet().service(request,response);
  assertEquals(200,response.getStatus());
  assertEquals("application/xml",response.getHeader("Content-Type"));
  assertEquals("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>" + "<testEntity><name>Foo Bar</name></testEntity>",response.getContentAsString());
}
