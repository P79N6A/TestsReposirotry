@Test public void beanConditionOn(){
  AnnotationConfigApplicationContext ctx=new AnnotationConfigApplicationContext();
  ctx.setEnvironment(new MockEnvironment().withProperty("bar.enabled","true"));
  ctx.register(BeanConditionConfig.class);
  ctx.refresh();
  this.context=ctx;
  FooService service=this.context.getBean(FooService.class);
  Cache cache=getCache();
  Object key=new Object();
  Object value=service.getWithCondition(key);
  assertCacheHit(key,value,cache);
  value=service.getWithCondition(key);
  assertCacheHit(key,value,cache);
  assertEquals(2,this.context.getBean(BeanConditionConfig.Bar.class).count);
}
