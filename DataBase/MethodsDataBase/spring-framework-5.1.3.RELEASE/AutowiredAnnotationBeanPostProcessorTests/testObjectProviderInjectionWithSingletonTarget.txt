@Test public void testObjectProviderInjectionWithSingletonTarget(){
  bf.registerBeanDefinition("annotatedBean",new RootBeanDefinition(ObjectProviderInjectionBean.class));
  bf.registerBeanDefinition("testBean",new RootBeanDefinition(TestBean.class));
  ObjectProviderInjectionBean bean=(ObjectProviderInjectionBean)bf.getBean("annotatedBean");
  assertSame(bf.getBean("testBean"),bean.getTestBean());
  assertSame(bf.getBean("testBean"),bean.getOptionalTestBean());
  assertSame(bf.getBean("testBean"),bean.getOptionalTestBeanWithDefault());
  assertEquals(bf.getBean("testBean"),bean.consumeOptionalTestBean());
  assertSame(bf.getBean("testBean"),bean.getUniqueTestBean());
  assertSame(bf.getBean("testBean"),bean.getUniqueTestBeanWithDefault());
  assertEquals(bf.getBean("testBean"),bean.consumeUniqueTestBean());
  List<?> testBeans=bean.iterateTestBeans();
  assertEquals(1,testBeans.size());
  assertTrue(testBeans.contains(bf.getBean("testBean")));
  testBeans=bean.forEachTestBeans();
  assertEquals(1,testBeans.size());
  assertTrue(testBeans.contains(bf.getBean("testBean")));
  testBeans=bean.streamTestBeans();
  assertEquals(1,testBeans.size());
  assertTrue(testBeans.contains(bf.getBean("testBean")));
  testBeans=bean.sortedTestBeans();
  assertEquals(1,testBeans.size());
  assertTrue(testBeans.contains(bf.getBean("testBean")));
}
