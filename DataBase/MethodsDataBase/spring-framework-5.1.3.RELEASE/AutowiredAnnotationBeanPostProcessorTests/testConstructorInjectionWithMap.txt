@Test public void testConstructorInjectionWithMap(){
  RootBeanDefinition bd=new RootBeanDefinition(MapConstructorInjectionBean.class);
  bd.setScope(RootBeanDefinition.SCOPE_PROTOTYPE);
  bf.registerBeanDefinition("annotatedBean",bd);
  TestBean tb1=new TestBean("tb1");
  bf.registerSingleton("testBean1",tb1);
  RootBeanDefinition tb2=new RootBeanDefinition(NullFactoryMethods.class);
  tb2.setFactoryMethodName("createTestBean");
  bf.registerBeanDefinition("testBean2",tb2);
  MapConstructorInjectionBean bean=(MapConstructorInjectionBean)bf.getBean("annotatedBean");
  assertEquals(1,bean.getTestBeanMap().size());
  assertSame(tb1,bean.getTestBeanMap().get("testBean1"));
  assertNull(bean.getTestBeanMap().get("testBean2"));
  bean=(MapConstructorInjectionBean)bf.getBean("annotatedBean");
  assertEquals(1,bean.getTestBeanMap().size());
  assertSame(tb1,bean.getTestBeanMap().get("testBean1"));
  assertNull(bean.getTestBeanMap().get("testBean2"));
}
