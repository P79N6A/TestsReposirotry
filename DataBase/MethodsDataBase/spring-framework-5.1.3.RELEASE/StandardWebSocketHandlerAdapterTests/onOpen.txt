@Test public void onOpen() throws Throwable {
  URI uri=URI.create("http://example.org");
  given(this.session.getRequestURI()).willReturn(uri);
  this.adapter.onOpen(this.session,null);
  verify(this.webSocketHandler).afterConnectionEstablished(this.webSocketSession);
  verify(this.session,atLeast(2)).addMessageHandler(any(MessageHandler.Whole.class));
  given(this.session.getRequestURI()).willReturn(uri);
  assertEquals(uri,this.webSocketSession.getUri());
}
