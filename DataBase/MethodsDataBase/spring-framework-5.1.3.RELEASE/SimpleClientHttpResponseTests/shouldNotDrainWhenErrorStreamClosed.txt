@Test public void shouldNotDrainWhenErrorStreamClosed() throws Exception {
  InputStream is=mock(InputStream.class);
  given(this.connection.getErrorStream()).willReturn(is);
  doNothing().when(is).close();
  given(is.read(any())).willThrow(new NullPointerException("from HttpURLConnection#ErrorStream"));
  InputStream responseStream=this.response.getBody();
  responseStream.close();
  this.response.close();
  verify(is).close();
}
