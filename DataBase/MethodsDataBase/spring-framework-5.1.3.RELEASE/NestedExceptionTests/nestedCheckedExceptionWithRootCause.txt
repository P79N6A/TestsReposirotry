@Test public void nestedCheckedExceptionWithRootCause(){
  String myMessage="mesg for this exception";
  String rootCauseMsg="this is the obscure message of the root cause";
  Exception rootCause=new Exception(rootCauseMsg);
  NestedCheckedException nex=new NestedCheckedException(myMessage,rootCause){
  }
;
  assertEquals(nex.getCause(),rootCause);
  assertTrue(nex.getMessage().contains(myMessage));
  assertTrue(nex.getMessage().endsWith(rootCauseMsg));
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  PrintWriter pw=new PrintWriter(baos);
  nex.printStackTrace(pw);
  pw.flush();
  String stackTrace=new String(baos.toByteArray());
  assertTrue(stackTrace.contains(rootCause.getClass().getName()));
  assertTrue(stackTrace.contains(rootCauseMsg));
}
