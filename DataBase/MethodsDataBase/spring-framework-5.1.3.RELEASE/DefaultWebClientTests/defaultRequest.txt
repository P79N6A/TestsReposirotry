@Test public void defaultRequest(){
  ThreadLocal<String> context=new NamedThreadLocal<>("foo");
  Map<String,Object> actual=new HashMap<>();
  ExchangeFilterFunction filter=(request,next) -> {
    actual.putAll(request.attributes());
    return next.exchange(request);
  }
;
  WebClient client=this.builder.defaultRequest(spec -> spec.attribute("foo",context.get())).filter(filter).build();
  try {
    context.set("bar");
    client.get().uri("/path").attribute("foo","bar").exchange();
  }
  finally {
    context.remove();
  }
  assertEquals("bar",actual.get("foo"));
}
