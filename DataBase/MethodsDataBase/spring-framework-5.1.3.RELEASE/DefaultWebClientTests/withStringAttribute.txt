@Test public void withStringAttribute(){
  Map<String,Object> actual=new HashMap<>();
  ExchangeFilterFunction filter=(request,next) -> {
    actual.putAll(request.attributes());
    return next.exchange(request);
  }
;
  this.builder.filter(filter).build().get().uri("/path").attribute("foo","bar").exchange();
  assertEquals("bar",actual.get("foo"));
  ClientRequest request=verifyAndGetRequest();
  assertEquals("bar",request.attribute("foo").get());
}
