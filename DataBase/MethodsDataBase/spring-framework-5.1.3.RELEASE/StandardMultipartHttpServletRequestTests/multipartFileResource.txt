@Test public void multipartFileResource() throws IOException {
  String name="file";
  String disposition="form-data; name=\"" + name + "\"; filename=\"myFile.txt\"";
  StandardMultipartHttpServletRequest request=requestWithPart(name,disposition,"myBody");
  MultipartFile multipartFile=request.getFile(name);
  assertNotNull(multipartFile);
  MultiValueMap<String,Object> map=new LinkedMultiValueMap<>();
  map.add(name,multipartFile.getResource());
  MockHttpOutputMessage output=new MockHttpOutputMessage();
  new FormHttpMessageConverter().write(map,null,output);
  assertThat(output.getBodyAsString(StandardCharsets.UTF_8),containsString("Content-Disposition: form-data; name=\"file\"; filename=\"myFile.txt\"\r\n" + "Content-Type: text/plain\r\n" + "Content-Length: 6\r\n"+ "\r\n"+ "myBody\r\n"));
}
