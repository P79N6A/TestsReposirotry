@Test public void enrichAndValidateAttributesWithSingleElementThatOverridesAnArray(){
  Map<String,Object> attributes=new HashMap<String,Object>(){
{
      put("value","/foo");
      put("name","test");
    }
  }
;
  Map<String,Object> expected=new HashMap<String,Object>(){
{
      put("value",asArray("/foo"));
      put("path",asArray("/foo"));
      put("name","test");
      put("method",new RequestMethod[0]);
    }
  }
;
  MapAnnotationAttributeExtractor extractor=new MapAnnotationAttributeExtractor(attributes,WebMapping.class,null);
  Map<String,Object> enriched=extractor.getSource();
  assertEquals("attribute map size",expected.size(),enriched.size());
  expected.forEach((attr,expectedValue) -> assertThat("for attribute '" + attr + "'",enriched.get(attr),is(expectedValue)));
}
