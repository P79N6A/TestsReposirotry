@Test public void withInterfaceOnTargetCglibProxy(){
  ProxyFactory targetFactory=new ProxyFactory();
  targetFactory.setTarget(new TestWithInterfaceImpl());
  targetFactory.setProxyTargetClass(true);
  ProxyFactory proxyFactory=new ProxyFactory();
  proxyFactory.setTarget(targetFactory.getProxy());
  proxyFactory.addInterface(TestWithInterface.class);
  proxyFactory.addAdvice(this.ti);
  TestWithInterface proxy=(TestWithInterface)proxyFactory.getProxy();
  proxy.doSomething();
  assertGetTransactionAndCommitCount(1);
  proxy.doSomethingElse();
  assertGetTransactionAndCommitCount(2);
  proxy.doSomethingElse();
  assertGetTransactionAndCommitCount(3);
  proxy.doSomething();
  assertGetTransactionAndCommitCount(4);
  proxy.doSomethingDefault();
  assertGetTransactionAndCommitCount(5);
}
