@Test public void testBeanFactoryPostProcessorWithInnerBeanAsApplicationListener(){
  StaticApplicationContext ac=new StaticApplicationContext();
  RootBeanDefinition rbd=new RootBeanDefinition(NestingBeanFactoryPostProcessor.class);
  rbd.getPropertyValues().add("listeningBean",new RootBeanDefinition(ListeningBean.class));
  ac.registerBeanDefinition("bfpp",rbd);
  ac.refresh();
  assertTrue(ac.getBean(NestingBeanFactoryPostProcessor.class).getListeningBean().received instanceof ContextRefreshedEvent);
}
