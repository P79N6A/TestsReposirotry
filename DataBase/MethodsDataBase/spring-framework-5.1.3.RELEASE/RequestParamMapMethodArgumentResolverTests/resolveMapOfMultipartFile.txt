@Test @SuppressWarnings("unchecked") public void resolveMapOfMultipartFile() throws Exception {
  MockMultipartHttpServletRequest request=new MockMultipartHttpServletRequest();
  MultipartFile expected1=new MockMultipartFile("mfile","Hello World".getBytes());
  MultipartFile expected2=new MockMultipartFile("other","Hello World 3".getBytes());
  request.addFile(expected1);
  request.addFile(expected2);
  webRequest=new ServletWebRequest(request);
  MethodParameter param=this.testMethod.annot(requestParam().noName()).arg(Map.class,String.class,MultipartFile.class);
  Object result=resolver.resolveArgument(param,null,webRequest,null);
  assertTrue(result instanceof Map);
  Map<String,MultipartFile> resultMap=(Map<String,MultipartFile>)result;
  assertEquals(2,resultMap.size());
  assertEquals(expected1,resultMap.get("mfile"));
  assertEquals(expected2,resultMap.get("other"));
}
