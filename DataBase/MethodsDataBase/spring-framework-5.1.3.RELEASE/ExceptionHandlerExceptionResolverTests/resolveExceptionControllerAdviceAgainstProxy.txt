@Test public void resolveExceptionControllerAdviceAgainstProxy() throws Exception {
  AnnotationConfigApplicationContext ctx=new AnnotationConfigApplicationContext(MyControllerAdviceConfig.class);
  this.resolver.setApplicationContext(ctx);
  this.resolver.afterPropertiesSet();
  IllegalStateException ex=new IllegalStateException();
  HandlerMethod handlerMethod=new HandlerMethod(new ProxyFactory(new ResponseBodyController()).getProxy(),"handle");
  ModelAndView mav=this.resolver.resolveException(this.request,this.response,handlerMethod,ex);
  assertNotNull("Exception was not handled",mav);
  assertTrue(mav.isEmpty());
  assertEquals("BasePackageTestExceptionResolver: IllegalStateException",this.response.getContentAsString());
}
