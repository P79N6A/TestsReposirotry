@Test public void sendMessageToControllerAndReceiveReplyViaTopic() throws Exception {
  TextMessage m0=create(StompCommand.CONNECT).headers("accept-version:1.1").build();
  TextMessage m1=create(StompCommand.SUBSCRIBE).headers("id:subs1","destination:/topic/increment").build();
  TextMessage m2=create(StompCommand.SEND).headers("destination:/app/increment").body("5").build();
  TestClientWebSocketHandler clientHandler=new TestClientWebSocketHandler(2,m0,m1,m2);
  WebSocketSession session=doHandshake(clientHandler,"/ws").get();
  try {
    assertTrue(clientHandler.latch.await(TIMEOUT,TimeUnit.SECONDS));
  }
  finally {
    session.close();
  }
}
