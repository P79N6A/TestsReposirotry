@Test public void streaming(){
  Flux<Msg> result=this.webClient.get().uri("/message-stream").exchange().doOnNext(response -> {
    Assert.assertEquals("true",response.headers().contentType().get().getParameters().get("delimited"));
    Assert.assertEquals("sample.proto",response.headers().header("X-Protobuf-Schema").get(0));
    Assert.assertEquals("Msg",response.headers().header("X-Protobuf-Message").get(0));
  }
).flatMapMany(response -> response.bodyToFlux(Msg.class));
  StepVerifier.create(result).expectNext(Msg.newBuilder().setFoo("Foo").setBlah(SecondMsg.newBuilder().setBlah(0).build()).build()).expectNext(Msg.newBuilder().setFoo("Foo").setBlah(SecondMsg.newBuilder().setBlah(1).build()).build()).thenCancel().verify();
}
