@Test public void toEntityTypeReference(){
  DefaultDataBufferFactory factory=new DefaultDataBufferFactory();
  DefaultDataBuffer dataBuffer=factory.wrap(ByteBuffer.wrap("foo".getBytes(StandardCharsets.UTF_8)));
  Flux<DataBuffer> body=Flux.just(dataBuffer);
  mockTextPlainResponse(body);
  List<HttpMessageReader<?>> messageReaders=Collections.singletonList(new DecoderHttpMessageReader<>(StringDecoder.allMimeTypes()));
  when(mockExchangeStrategies.messageReaders()).thenReturn(messageReaders);
  ResponseEntity<String> result=defaultClientResponse.toEntity(new ParameterizedTypeReference<String>(){
  }
).block();
  assertEquals("foo",result.getBody());
  assertEquals(HttpStatus.OK,result.getStatusCode());
  assertEquals(HttpStatus.OK.value(),result.getStatusCodeValue());
  assertEquals(MediaType.TEXT_PLAIN,result.getHeaders().getContentType());
}
