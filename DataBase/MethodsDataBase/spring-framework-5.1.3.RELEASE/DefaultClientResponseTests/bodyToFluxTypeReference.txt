@Test public void bodyToFluxTypeReference(){
  DefaultDataBufferFactory factory=new DefaultDataBufferFactory();
  DefaultDataBuffer dataBuffer=factory.wrap(ByteBuffer.wrap("foo".getBytes(StandardCharsets.UTF_8)));
  Flux<DataBuffer> body=Flux.just(dataBuffer);
  mockTextPlainResponse(body);
  List<HttpMessageReader<?>> messageReaders=Collections.singletonList(new DecoderHttpMessageReader<>(StringDecoder.allMimeTypes()));
  when(mockExchangeStrategies.messageReaders()).thenReturn(messageReaders);
  Flux<String> resultFlux=defaultClientResponse.bodyToFlux(new ParameterizedTypeReference<String>(){
  }
);
  Mono<List<String>> result=resultFlux.collectList();
  assertEquals(Collections.singletonList("foo"),result.block());
}
