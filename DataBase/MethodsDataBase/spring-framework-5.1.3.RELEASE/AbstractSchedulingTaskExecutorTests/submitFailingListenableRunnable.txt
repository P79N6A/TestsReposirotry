@Test public void submitFailingListenableRunnable() throws Exception {
  TestTask task=new TestTask(0);
  ListenableFuture<?> future=executor.submitListenable(task);
  future.addCallback(result -> outcome=result,ex -> outcome=ex);
  Awaitility.await().dontCatchUncaughtExceptions().atMost(1,TimeUnit.SECONDS).pollInterval(10,TimeUnit.MILLISECONDS).until(() -> future.isDone() && outcome != null);
  assertSame(RuntimeException.class,outcome.getClass());
}
