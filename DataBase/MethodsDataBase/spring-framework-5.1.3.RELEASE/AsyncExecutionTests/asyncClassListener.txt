@Test public void asyncClassListener() throws Exception {
  originalThreadName=Thread.currentThread().getName();
  listenerCalled=0;
  listenerConstructed=0;
  GenericApplicationContext context=new GenericApplicationContext();
  context.registerBeanDefinition("asyncTest",new RootBeanDefinition(AsyncClassListener.class));
  context.registerBeanDefinition("autoProxyCreator",new RootBeanDefinition(DefaultAdvisorAutoProxyCreator.class));
  context.registerBeanDefinition("asyncAdvisor",new RootBeanDefinition(AsyncAnnotationAdvisor.class));
  context.refresh();
  context.close();
  Awaitility.await().atMost(1,TimeUnit.SECONDS).pollInterval(10,TimeUnit.MILLISECONDS).until(() -> listenerCalled == 2);
  assertEquals(1,listenerConstructed);
}
