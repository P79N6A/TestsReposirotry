@Test(expected=UnknownHttpStatusCodeException.class) public void handleErrorForCustomClientError() throws Exception {
  HttpHeaders headers=new HttpHeaders();
  headers.setContentType(MediaType.TEXT_PLAIN);
  given(response.getRawStatusCode()).willReturn(499);
  given(response.getStatusText()).willReturn("Custom status code");
  given(response.getHeaders()).willReturn(headers);
  handler.handleError(response);
}
