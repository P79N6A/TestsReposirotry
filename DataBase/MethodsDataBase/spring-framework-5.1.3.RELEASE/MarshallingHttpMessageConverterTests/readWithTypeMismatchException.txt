@Test public void readWithTypeMismatchException() throws Exception {
  MockHttpInputMessage inputMessage=new MockHttpInputMessage(new byte[0]);
  Marshaller marshaller=mock(Marshaller.class);
  Unmarshaller unmarshaller=mock(Unmarshaller.class);
  given(unmarshaller.unmarshal(isA(StreamSource.class))).willReturn(Integer.valueOf(3));
  MarshallingHttpMessageConverter converter=new MarshallingHttpMessageConverter(marshaller,unmarshaller);
  try {
    converter.read(String.class,inputMessage);
    fail("Should have thrown HttpMessageNotReadableException");
  }
 catch (  HttpMessageNotReadableException ex) {
    assertTrue(ex.getCause() instanceof TypeMismatchException);
  }
}
