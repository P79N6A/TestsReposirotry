@Test public void embeddedCandidatesAreDetected() throws IOException, ClassNotFoundException {
  String nestedType="org.springframework.context.index.sample.SampleEmbedded.Another$AnotherPublicCandidate";
  Class<?> type=ClassUtils.forName(nestedType,getClass().getClassLoader());
  assertThat(type,sameInstance(SampleEmbedded.Another.AnotherPublicCandidate.class));
  CandidateComponentsMetadata metadata=compile(SampleEmbedded.class);
  assertThat(metadata,hasComponent(SampleEmbedded.PublicCandidate.class,Component.class));
  assertThat(metadata,hasComponent(nestedType,Component.class.getName()));
  assertThat(metadata.getItems(),hasSize(2));
}
