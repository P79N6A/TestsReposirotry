@Test public void testGenericMatchingWithUnresolvedOrderedStream(){
  DefaultListableBeanFactory bf=new DefaultListableBeanFactory();
  bf.setDependencyComparator(AnnotationAwareOrderComparator.INSTANCE);
  bf.setAutowireCandidateResolver(new GenericTypeAwareAutowireCandidateResolver());
  RootBeanDefinition bd1=new RootBeanDefinition(NumberStoreFactory.class);
  bd1.setFactoryMethodName("newDoubleStore");
  bf.registerBeanDefinition("store1",bd1);
  RootBeanDefinition bd2=new RootBeanDefinition(NumberStoreFactory.class);
  bd2.setFactoryMethodName("newFloatStore");
  bf.registerBeanDefinition("store2",bd2);
  ObjectProvider<NumberStore<?>> numberStoreProvider=bf.getBeanProvider(ResolvableType.forClass(NumberStore.class));
  List<NumberStore<?>> resolved=numberStoreProvider.orderedStream().collect(Collectors.toList());
  assertEquals(2,resolved.size());
  assertSame(bf.getBean("store2"),resolved.get(0));
  assertSame(bf.getBean("store1"),resolved.get(1));
}
