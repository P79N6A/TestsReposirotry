/** 
 * Tests support for parameterized instance  {@code factory-method} declarations suchas EasyMock's  {@code IMocksControl.createMock()} method which has the followingsignature. <pre> {@code public <T> T createMock(Class<T> toMock)}</pre> <p>See SPR-10411
 */
@Test public void parameterizedInstanceFactoryMethod(){
  DefaultListableBeanFactory bf=new DefaultListableBeanFactory();
  RootBeanDefinition rbd=new RootBeanDefinition(MocksControl.class);
  bf.registerBeanDefinition("mocksControl",rbd);
  rbd=new RootBeanDefinition();
  rbd.setFactoryBeanName("mocksControl");
  rbd.setFactoryMethodName("createMock");
  rbd.getConstructorArgumentValues().addGenericArgumentValue(Runnable.class);
  bf.registerBeanDefinition("mock",rbd);
  assertTrue(bf.isTypeMatch("mock",Runnable.class));
  assertTrue(bf.isTypeMatch("mock",Runnable.class));
  assertEquals(Runnable.class,bf.getType("mock"));
  assertEquals(Runnable.class,bf.getType("mock"));
  Map<String,Runnable> beans=bf.getBeansOfType(Runnable.class);
  assertEquals(1,beans.size());
}
