@Test public void parameterizedInstanceFactoryMethodWithTempClassLoader(){
  DefaultListableBeanFactory bf=new DefaultListableBeanFactory();
  bf.setTempClassLoader(new OverridingClassLoader(getClass().getClassLoader()));
  RootBeanDefinition rbd=new RootBeanDefinition(MocksControl.class);
  bf.registerBeanDefinition("mocksControl",rbd);
  rbd=new RootBeanDefinition();
  rbd.setFactoryBeanName("mocksControl");
  rbd.setFactoryMethodName("createMock");
  rbd.getConstructorArgumentValues().addGenericArgumentValue(Runnable.class);
  bf.registerBeanDefinition("mock",rbd);
  assertTrue(bf.isTypeMatch("mock",Runnable.class));
  assertTrue(bf.isTypeMatch("mock",Runnable.class));
  assertEquals(Runnable.class,bf.getType("mock"));
  assertEquals(Runnable.class,bf.getType("mock"));
  Map<String,Runnable> beans=bf.getBeansOfType(Runnable.class);
  assertEquals(1,beans.size());
}
