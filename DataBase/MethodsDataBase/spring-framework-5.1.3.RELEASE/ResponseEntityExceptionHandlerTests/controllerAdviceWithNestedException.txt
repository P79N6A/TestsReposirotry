@Test public void controllerAdviceWithNestedException(){
  StaticWebApplicationContext ctx=new StaticWebApplicationContext();
  ctx.registerSingleton("exceptionHandler",ApplicationExceptionHandler.class);
  ctx.refresh();
  ExceptionHandlerExceptionResolver resolver=new ExceptionHandlerExceptionResolver();
  resolver.setApplicationContext(ctx);
  resolver.afterPropertiesSet();
  IllegalStateException ex=new IllegalStateException(new ServletRequestBindingException("message"));
  assertNull(resolver.resolveException(this.servletRequest,this.servletResponse,null,ex));
}
