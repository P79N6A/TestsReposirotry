@Test public void externalResources() throws Exception {
  this.resourceFactory.setUseGlobalResources(false);
  this.resourceFactory.setConnectionProvider(this.connectionProvider);
  this.resourceFactory.setLoopResources(this.loopResources);
  this.resourceFactory.afterPropertiesSet();
  ConnectionProvider connectionProvider=this.resourceFactory.getConnectionProvider();
  LoopResources loopResources=this.resourceFactory.getLoopResources();
  assertSame(this.connectionProvider,connectionProvider);
  assertSame(this.loopResources,loopResources);
  verifyNoMoreInteractions(this.connectionProvider,this.loopResources);
  this.resourceFactory.destroy();
  verifyNoMoreInteractions(this.connectionProvider,this.loopResources);
}
