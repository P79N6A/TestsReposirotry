@Test public void preFlightRequestWithCorsConfigurationSource() throws Exception {
  this.handlerMapping.setCorsConfigurationSource(new CustomCorsConfigurationSource());
  String origin="http://domain2.com";
  ServerWebExchange exchange=createExchange(HttpMethod.OPTIONS,"/welcome.html",origin);
  Object actual=this.handlerMapping.getHandler(exchange).block();
  assertNotNull(actual);
  assertNotSame(this.welcomeController,actual);
  assertEquals("http://domain2.com",exchange.getResponse().getHeaders().getFirst(HttpHeaders.ACCESS_CONTROL_ALLOW_ORIGIN));
  assertEquals("true",exchange.getResponse().getHeaders().getFirst(HttpHeaders.ACCESS_CONTROL_ALLOW_CREDENTIALS));
}
