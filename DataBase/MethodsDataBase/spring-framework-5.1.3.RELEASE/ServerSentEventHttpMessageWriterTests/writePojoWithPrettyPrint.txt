@Test public void writePojoWithPrettyPrint(){
  ObjectMapper mapper=Jackson2ObjectMapperBuilder.json().indentOutput(true).build();
  this.messageWriter=new ServerSentEventHttpMessageWriter(new Jackson2JsonEncoder(mapper));
  Flux<Pojo> source=Flux.just(new Pojo("foofoo","barbar"),new Pojo("foofoofoo","barbarbar"));
  testWrite(source,outputMessage,Pojo.class);
  StepVerifier.create(outputMessage.getBody()).consumeNextWith(stringConsumer("data:")).consumeNextWith(stringConsumer("{\n" + "data:  \"foo\" : \"foofoo\",\n" + "data:  \"bar\" : \"barbar\"\n"+ "data:}")).consumeNextWith(stringConsumer("\n")).consumeNextWith(stringConsumer("\n")).consumeNextWith(stringConsumer("data:")).consumeNextWith(stringConsumer("{\n" + "data:  \"foo\" : \"foofoofoo\",\n" + "data:  \"bar\" : \"barbarbar\"\n"+ "data:}")).consumeNextWith(stringConsumer("\n")).consumeNextWith(stringConsumer("\n")).expectComplete().verify();
}
