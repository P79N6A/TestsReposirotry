@Test public void fromRequestWithForwardedPrefix() throws Exception {
  this.request.addHeader("X-Forwarded-Prefix","/prefix");
  this.request.setContextPath("/mvc-showcase");
  this.request.setRequestURI("/mvc-showcase/bar");
  HttpServletRequest requestToUse=adaptFromForwardedHeaders(this.request);
  UriComponents result=ServletUriComponentsBuilder.fromRequest(requestToUse).build();
  assertEquals("http://localhost/prefix/bar",result.toUriString());
}
