/** 
 * If a contextConfigLocation init-param has been specified for the ContextLoaderListener, then it should take precedence. This is generally not a recommended practice, but when it does happen, the init-param should be considered more specific than the programmatic configuration, given that it still quite possibly externalized in hybrid web.xml + WebApplicationInitializer cases.
 */
@Test public void abstractRefreshableWAC_respectsInitParam_overProgrammaticConfigLocations(){
  XmlWebApplicationContext ctx=new XmlWebApplicationContext();
  ctx.setConfigLocation("programmatic.xml");
  ContextLoaderListener cll=new ContextLoaderListener(ctx);
  MockServletContext sc=new MockServletContext();
  sc.addInitParameter(ContextLoader.CONFIG_LOCATION_PARAM,"from-init-param.xml");
  try {
    cll.contextInitialized(new ServletContextEvent(sc));
    fail("expected exception");
  }
 catch (  Throwable t) {
    assertTrue(t.getMessage(),t.getMessage().endsWith("Could not open ServletContext resource [/from-init-param.xml]"));
  }
}
