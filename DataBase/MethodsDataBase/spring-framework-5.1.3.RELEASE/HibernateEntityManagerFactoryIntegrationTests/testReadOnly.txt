@Test public void testReadOnly(){
  assertSame(FlushMode.AUTO,sharedEntityManager.unwrap(Session.class).getHibernateFlushMode());
  assertFalse(sharedEntityManager.unwrap(Session.class).isDefaultReadOnly());
  endTransaction();
  this.transactionDefinition.setReadOnly(true);
  startNewTransaction();
  assertSame(FlushMode.MANUAL,sharedEntityManager.unwrap(Session.class).getHibernateFlushMode());
  assertTrue(sharedEntityManager.unwrap(Session.class).isDefaultReadOnly());
}
