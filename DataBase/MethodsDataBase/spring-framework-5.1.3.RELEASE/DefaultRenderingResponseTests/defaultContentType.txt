@Test public void defaultContentType(){
  Mono<RenderingResponse> result=RenderingResponse.create("view").build();
  MockServerWebExchange exchange=MockServerWebExchange.from(MockServerHttpRequest.get("http://localhost"));
  TestView view=new TestView();
  ViewResolver viewResolver=mock(ViewResolver.class);
  when(viewResolver.resolveViewName(any(),any())).thenReturn(Mono.just(view));
  List<ViewResolver> viewResolvers=new ArrayList<>();
  viewResolvers.add(viewResolver);
  ServerResponse.Context context=mock(ServerResponse.Context.class);
  when(context.viewResolvers()).thenReturn(viewResolvers);
  StepVerifier.create(result.flatMap(response -> response.writeTo(exchange,context))).verifyComplete();
  assertEquals(ViewResolverSupport.DEFAULT_CONTENT_TYPE,exchange.getResponse().getHeaders().getContentType());
}
