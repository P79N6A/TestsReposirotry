@Test public void deferredResultSubscriberWithError() throws Exception {
  IllegalStateException ex=new IllegalStateException();
  MonoProcessor<String> mono=MonoProcessor.create();
  testDeferredResultSubscriber(mono,Mono.class,forClass(String.class),() -> mono.onError(ex),ex);
  AtomicReference<SingleEmitter<String>> ref=new AtomicReference<>();
  Single<String> single=Single.fromEmitter(ref::set);
  testDeferredResultSubscriber(single,Single.class,forClass(String.class),() -> ref.get().onError(ex),ex);
  AtomicReference<io.reactivex.SingleEmitter<String>> ref2=new AtomicReference<>();
  io.reactivex.Single<String> single2=io.reactivex.Single.create(ref2::set);
  testDeferredResultSubscriber(single2,io.reactivex.Single.class,forClass(String.class),() -> ref2.get().onError(ex),ex);
}
