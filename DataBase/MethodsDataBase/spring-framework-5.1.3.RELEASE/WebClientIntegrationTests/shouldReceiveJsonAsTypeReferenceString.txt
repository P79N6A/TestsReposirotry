@Test public void shouldReceiveJsonAsTypeReferenceString(){
  String content="{\"containerValue\":{\"fooValue\":\"bar\"}}";
  prepareResponse(response -> response.setHeader("Content-Type","application/json").setBody(content));
  Mono<ValueContainer<Foo>> result=this.webClient.get().uri("/json").accept(MediaType.APPLICATION_JSON).retrieve().bodyToMono(new ParameterizedTypeReference<ValueContainer<Foo>>(){
  }
);
  StepVerifier.create(result).assertNext(valueContainer -> {
    Foo foo=valueContainer.getContainerValue();
    assertNotNull(foo);
    assertEquals("bar",foo.getFooValue());
  }
).expectComplete().verify(Duration.ofSeconds(3));
  expectRequestCount(1);
  expectRequest(request -> {
    assertEquals("/json",request.getPath());
    assertEquals("application/json",request.getHeader(HttpHeaders.ACCEPT));
  }
);
}
