@Test public void shouldGetErrorSignalWhenRetrievingUnknownStatusCode(){
  int errorStatus=555;
  assertNull(HttpStatus.resolve(errorStatus));
  String errorMessage="Something went wrong";
  prepareResponse(response -> response.setResponseCode(errorStatus).setHeader("Content-Type","text/plain").setBody(errorMessage));
  Mono<String> result=this.webClient.get().uri("/unknownPage").retrieve().bodyToMono(String.class);
  StepVerifier.create(result).expectErrorSatisfies(throwable -> {
    assertTrue(throwable instanceof UnknownHttpStatusCodeException);
    UnknownHttpStatusCodeException ex=(UnknownHttpStatusCodeException)throwable;
    assertEquals("Unknown status code [" + errorStatus + "]",ex.getMessage());
    assertEquals(errorStatus,ex.getRawStatusCode());
    assertEquals("",ex.getStatusText());
    assertEquals(MediaType.TEXT_PLAIN,ex.getHeaders().getContentType());
    assertEquals(errorMessage,ex.getResponseBodyAsString());
  }
).verify(Duration.ofSeconds(3));
  expectRequestCount(1);
  expectRequest(request -> {
    assertEquals("*/*",request.getHeader(HttpHeaders.ACCEPT));
    assertEquals("/unknownPage",request.getPath());
  }
);
}
