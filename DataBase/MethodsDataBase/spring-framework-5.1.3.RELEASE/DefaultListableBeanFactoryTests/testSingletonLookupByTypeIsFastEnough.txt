@Test public void testSingletonLookupByTypeIsFastEnough(){
  Assume.group(TestGroup.PERFORMANCE);
  Assume.notLogging(factoryLog);
  DefaultListableBeanFactory lbf=new DefaultListableBeanFactory();
  lbf.registerBeanDefinition("test",new RootBeanDefinition(TestBean.class));
  lbf.freezeConfiguration();
  StopWatch sw=new StopWatch();
  sw.start("singleton");
  for (int i=0; i < 1000000; i++) {
    lbf.getBean(TestBean.class);
  }
  sw.stop();
  assertTrue("Singleton lookup took too long: " + sw.getTotalTimeMillis(),sw.getTotalTimeMillis() < 1000);
}
