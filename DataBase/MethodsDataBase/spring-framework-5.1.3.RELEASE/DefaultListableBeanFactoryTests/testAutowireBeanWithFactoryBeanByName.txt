/** 
 * Verifies that a dependency on a  {@link FactoryBean} can <strong>not</strong>be autowired <em>by name</em>, as &amp; is an illegal character in Java method names. In other words, you can't name a method {@code set&amp;FactoryBean(...)}.
 */
@Test(expected=TypeMismatchException.class) public void testAutowireBeanWithFactoryBeanByName(){
  DefaultListableBeanFactory lbf=new DefaultListableBeanFactory();
  RootBeanDefinition bd=new RootBeanDefinition(LazyInitFactory.class);
  lbf.registerBeanDefinition("factoryBean",bd);
  LazyInitFactory factoryBean=(LazyInitFactory)lbf.getBean("&factoryBean");
  assertNotNull("The FactoryBean should have been registered.",factoryBean);
  lbf.autowire(FactoryBeanDependentBean.class,AutowireCapableBeanFactory.AUTOWIRE_BY_NAME,true);
}
