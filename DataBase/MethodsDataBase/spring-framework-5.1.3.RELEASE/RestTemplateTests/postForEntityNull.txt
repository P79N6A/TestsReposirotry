@Test public void postForEntityNull() throws Exception {
  mockTextPlainHttpMessageConverter();
  HttpHeaders requestHeaders=new HttpHeaders();
  mockSentRequest(POST,"http://example.com",requestHeaders);
  mockResponseStatus(HttpStatus.OK);
  HttpHeaders responseHeaders=new HttpHeaders();
  responseHeaders.setContentType(MediaType.TEXT_PLAIN);
  responseHeaders.setContentLength(10);
  given(response.getHeaders()).willReturn(responseHeaders);
  given(response.getBody()).willReturn(StreamUtils.emptyInput());
  given(converter.read(String.class,response)).willReturn(null);
  ResponseEntity<String> result=template.postForEntity("http://example.com",null,String.class);
  assertFalse("Invalid POST result",result.hasBody());
  assertEquals("Invalid Content-Type",MediaType.TEXT_PLAIN,result.getHeaders().getContentType());
  assertEquals("Invalid content length",0,requestHeaders.getContentLength());
  assertEquals("Invalid status code",HttpStatus.OK,result.getStatusCode());
  verify(response).close();
}
