@Test public void optionsForAllow() throws Exception {
  mockSentRequest(OPTIONS,"http://example.com");
  mockResponseStatus(HttpStatus.OK);
  HttpHeaders responseHeaders=new HttpHeaders();
  EnumSet<HttpMethod> expected=EnumSet.of(GET,POST);
  responseHeaders.setAllow(expected);
  given(response.getHeaders()).willReturn(responseHeaders);
  Set<HttpMethod> result=template.optionsForAllow("http://example.com");
  assertEquals("Invalid OPTIONS result",expected,result);
  verify(response).close();
}
