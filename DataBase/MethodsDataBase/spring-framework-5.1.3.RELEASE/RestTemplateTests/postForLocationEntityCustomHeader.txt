@Test public void postForLocationEntityCustomHeader() throws Exception {
  HttpHeaders requestHeaders=new HttpHeaders();
  mockSentRequest(POST,"http://example.com",requestHeaders);
  mockTextPlainHttpMessageConverter();
  mockResponseStatus(HttpStatus.OK);
  HttpHeaders responseHeaders=new HttpHeaders();
  URI expected=new URI("http://example.com/hotels");
  responseHeaders.setLocation(expected);
  given(response.getHeaders()).willReturn(responseHeaders);
  HttpHeaders entityHeaders=new HttpHeaders();
  entityHeaders.set("MyHeader","MyValue");
  HttpEntity<String> entity=new HttpEntity<>("Hello World",entityHeaders);
  URI result=template.postForLocation("http://example.com",entity);
  assertEquals("Invalid POST result",expected,result);
  assertEquals("No custom header set","MyValue",requestHeaders.getFirst("MyHeader"));
  verify(response).close();
}
