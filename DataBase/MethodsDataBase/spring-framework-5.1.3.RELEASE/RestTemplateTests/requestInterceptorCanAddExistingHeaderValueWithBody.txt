@Test public void requestInterceptorCanAddExistingHeaderValueWithBody() throws Exception {
  ClientHttpRequestInterceptor interceptor=(request,body,execution) -> {
    request.getHeaders().add("MyHeader","MyInterceptorValue");
    return execution.execute(request,body);
  }
;
  template.setInterceptors(Collections.singletonList(interceptor));
  MediaType contentType=MediaType.TEXT_PLAIN;
  given(converter.canWrite(String.class,contentType)).willReturn(true);
  HttpHeaders requestHeaders=new HttpHeaders();
  mockSentRequest(POST,"http://example.com",requestHeaders);
  mockResponseStatus(HttpStatus.OK);
  HttpHeaders entityHeaders=new HttpHeaders();
  entityHeaders.setContentType(contentType);
  entityHeaders.add("MyHeader","MyEntityValue");
  HttpEntity<String> entity=new HttpEntity<>("Hello World",entityHeaders);
  template.exchange("http://example.com",POST,entity,Void.class);
  assertThat(requestHeaders.get("MyHeader"),contains("MyEntityValue","MyInterceptorValue"));
  verify(response).close();
}
