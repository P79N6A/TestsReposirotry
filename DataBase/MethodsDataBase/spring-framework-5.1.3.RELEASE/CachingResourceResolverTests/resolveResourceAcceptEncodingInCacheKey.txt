@Test public void resolveResourceAcceptEncodingInCacheKey() throws IOException {
  String file="bar.css";
  EncodedResourceResolverTests.createGzippedFile(file);
  MockHttpServletRequest request=new MockHttpServletRequest("GET",file);
  Resource expected=this.chain.resolveResource(request,file,this.locations);
  String cacheKey=resourceKey(file);
  assertSame(expected,this.cache.get(cacheKey).get());
  request=new MockHttpServletRequest("GET",file);
  request.addHeader("Accept-Encoding","gzip ; a=b  , deflate ,  br  ; c=d ");
  expected=this.chain.resolveResource(request,file,this.locations);
  cacheKey=resourceKey(file + "+encoding=br,gzip");
  assertSame(expected,this.cache.get(cacheKey).get());
  request=new MockHttpServletRequest("GET",file);
  request.addHeader("Accept-Encoding","deflate");
  expected=this.chain.resolveResource(request,file,this.locations);
  cacheKey=resourceKey(file);
  assertSame(expected,this.cache.get(cacheKey).get());
}
