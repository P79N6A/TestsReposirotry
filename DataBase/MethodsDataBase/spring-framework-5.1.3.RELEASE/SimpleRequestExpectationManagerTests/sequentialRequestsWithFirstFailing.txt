@Test public void sequentialRequestsWithFirstFailing() throws Exception {
  this.manager.expectRequest(once(),requestTo("/foo")).andExpect(method(GET)).andRespond(request -> {
    throw new SocketException("pseudo network error");
  }
);
  this.manager.expectRequest(once(),requestTo("/handle-error")).andExpect(method(POST)).andRespond(withSuccess());
  try {
    this.manager.validateRequest(createRequest(GET,"/foo"));
    fail("Expected SocketException");
  }
 catch (  SocketException ex) {
  }
  this.manager.validateRequest(createRequest(POST,"/handle-error"));
  this.manager.verify();
}
