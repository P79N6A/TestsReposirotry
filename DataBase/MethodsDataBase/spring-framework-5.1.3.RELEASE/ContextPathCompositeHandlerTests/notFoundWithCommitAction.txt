@Test public void notFoundWithCommitAction(){
  AtomicBoolean commitInvoked=new AtomicBoolean(false);
  ServerHttpRequest request=MockServerHttpRequest.get("/unknown/path").build();
  ServerHttpResponse response=new MockServerHttpResponse();
  response.beforeCommit(() -> {
    commitInvoked.set(true);
    return Mono.empty();
  }
);
  Map<String,HttpHandler> map=new HashMap<>();
  TestHttpHandler handler=new TestHttpHandler();
  map.put("/path",handler);
  new ContextPathCompositeHandler(map).handle(request,response).block(Duration.ofSeconds(5));
  assertNotInvoked(handler);
  assertEquals(HttpStatus.NOT_FOUND,response.getStatusCode());
  assertTrue(commitInvoked.get());
}
