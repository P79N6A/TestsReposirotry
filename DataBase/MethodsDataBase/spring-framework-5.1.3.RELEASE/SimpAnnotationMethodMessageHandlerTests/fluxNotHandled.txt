@Test @SuppressWarnings({"unchecked","rawtypes"}) public void fluxNotHandled(){
  Message emptyMessage=MessageBuilder.withPayload(new byte[0]).build();
  given(this.channel.send(any(Message.class))).willReturn(true);
  given(this.converter.toMessage(any(),any(MessageHeaders.class))).willReturn(emptyMessage);
  ReactiveController controller=new ReactiveController();
  this.messageHandler.registerHandler(controller);
  this.messageHandler.setDestinationPrefixes(Arrays.asList("/app1","/app2/"));
  Message<?> message=createMessage("/app1/flux");
  this.messageHandler.handleMessage(message);
  assertNotNull(controller.flux);
  controller.flux.onNext("foo");
  verify(this.converter,never()).toMessage(any(),any(MessageHeaders.class));
}
