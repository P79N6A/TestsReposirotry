public void test_factory() throws Exception {
  DruidDataSourceFactory factory=new DruidDataSourceFactory();
  Reference ref=new Reference(DataSource.class.getName());
  ref.add(new StringRefAddr(DruidDataSourceFactory.PROP_REMOVEABANDONED,"true"));
  ref.add(new StringRefAddr(DruidDataSourceFactory.PROP_MAXACTIVE,"20"));
  Hashtable<String,String> env=new Hashtable<String,String>();
  dataSource=(DruidDataSource)factory.getObjectInstance(ref,null,null,env);
  Assert.assertTrue(dataSource.isRemoveAbandoned());
  Assert.assertEquals(20,dataSource.getMaxActive());
}
