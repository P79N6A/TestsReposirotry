public void test_stat() throws Exception {
  Assert.assertTrue(dataSource.isInited());
  EncodingConvertFilter filter=(EncodingConvertFilter)dataSource.getProxyFilters().get(0);
  DruidPooledConnection conn=dataSource.getConnection();
  final String PARAM_VALUE="中国";
  PreparedStatement stmt=conn.prepareStatement("select ?");
  stmt.setString(1,PARAM_VALUE);
  MockPreparedStatement raw=stmt.unwrap(MockPreparedStatement.class);
  String param1=(String)raw.getParameters().get(0);
  Assert.assertEquals(PARAM_VALUE,new String(param1.getBytes(SERVER_ENCODING),CLIENT_ENCODING));
  Assert.assertFalse(param1.equals(PARAM_VALUE));
  ResultSet rs=stmt.executeQuery();
  MyResultSet rawRs=rs.unwrap(MyResultSet.class);
  rawRs.setValue(filter.encode((ConnectionProxy)conn.getConnection(),text));
  rs.next();
  Assert.assertEquals(text,rs.getString(1));
  rs.close();
  stmt.close();
  conn.close();
}
