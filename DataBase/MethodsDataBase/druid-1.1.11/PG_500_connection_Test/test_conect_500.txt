public void test_conect_500() throws Exception {
  dataSource.init();
  Assert.assertFalse(dataSource.isOracle());
  Assert.assertTrue(dataSource.getValidConnectionChecker() instanceof PGValidConnectionChecker);
  int taskCount=1000 * 100;
  final CountDownLatch endLatch=new CountDownLatch(taskCount);
  Runnable task=new Runnable(){
    @Override public void run(){
      Connection conn=null;
      Statement stmt=null;
      ResultSet rs=null;
      try {
        conn=dataSource.getConnection();
        stmt=conn.createStatement();
        rs=stmt.executeQuery("SELECT 1");
        while (rs.next()) {
        }
      }
 catch (      SQLException ex) {
      }
 finally {
        endLatch.countDown();
      }
      JdbcUtils.close(rs);
      JdbcUtils.close(stmt);
      JdbcUtils.close(conn);
    }
  }
;
  ExecutorService executor=Executors.newFixedThreadPool(100);
  for (int i=0; i < taskCount; ++i) {
    executor.submit(task);
  }
  endLatch.await();
}
