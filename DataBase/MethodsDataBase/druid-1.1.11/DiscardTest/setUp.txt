protected void setUp() throws Exception {
  driver=new MockDriver(){
    public ResultSet executeQuery(    MockStatementBase stmt,    String sql) throws SQLException {
      if (failed) {
        throw new SQLException("","",1040);
      }
      return super.executeQuery(stmt,sql);
    }
    public Connection connect(    String url,    Properties info) throws SQLException {
      while (failed) {
        try {
          Thread.sleep(1);
        }
 catch (        InterruptedException e) {
          throw new SQLException(e.getMessage(),e);
        }
      }
      return super.connect(url,info);
    }
  }
;
  dataSource=new DruidDataSource();
  dataSource.setUrl("jdbc:mock:xxx");
  dataSource.setTestOnBorrow(false);
  dataSource.setDriver(driver);
  dataSource.setDbType("mysql");
  dataSource.setMinIdle(1);
  dataSource.setMaxActive(1);
  dataSource.setFilters("log4j");
  dataSource.setExceptionSorter(new MySqlExceptionSorter());
}
