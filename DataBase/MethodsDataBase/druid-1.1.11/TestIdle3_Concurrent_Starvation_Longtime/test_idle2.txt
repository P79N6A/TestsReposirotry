public void test_idle2() throws Exception {
{
    Assert.assertEquals(0,dataSource.getCreateCount());
    Assert.assertEquals(0,dataSource.getActiveCount());
    Connection conn=dataSource.getConnection();
    Assert.assertEquals(dataSource.getInitialSize(),dataSource.getCreateCount());
    Assert.assertEquals(dataSource.getInitialSize(),driver.getConnections().size());
    Assert.assertEquals(1,dataSource.getActiveCount());
    conn.close();
    Assert.assertEquals(0,dataSource.getDestroyCount());
    Assert.assertEquals(1,driver.getConnections().size());
    Assert.assertEquals(1,dataSource.getCreateCount());
    Assert.assertEquals(0,dataSource.getActiveCount());
  }
  for (int i=0; i < 1; ++i) {
    final int threadCount=1000;
    concurrent(threadCount);
  }
  for (int i=0; i < 1000; ++i) {
    Assert.assertEquals(0,dataSource.getActiveCount());
    Connection conn=dataSource.getConnection();
    Assert.assertEquals(1,dataSource.getActiveCount());
    conn.close();
  }
  dataSource.close();
}
