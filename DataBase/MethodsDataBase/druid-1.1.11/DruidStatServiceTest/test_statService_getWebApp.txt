public void test_statService_getWebApp() throws Exception {
  String uri="/";
  MockServletContext servletContext=new MockServletContext();
  MockFilterConfig filterConfig=new MockFilterConfig(servletContext);
  WebStatFilter filter=new WebStatFilter();
  filter.init(filterConfig);
  MockHttpServletRequest request=new MockHttpServletRequest("GET",uri);
  MockHttpServletResponse response=new MockHttpServletResponse();
  MockFilterChain chain=new MockFilterChain();
  filter.doFilter(request,response,chain);
  String result=DruidStatService.getInstance().service("/webapp.json");
  Map<String,Object> resultMap=(Map<String,Object>)JSONUtils.parse(result);
  List<Map<String,Object>> contentList=(List<Map<String,Object>>)resultMap.get("Content");
  assertThat(contentList.size(),equalTo(1));
  Map<String,Object> contentMap=contentList.get(0);
  assertThat((Integer)contentMap.get("RequestCount"),equalTo(1));
  MockHttpServletRequest request2=new MockHttpServletRequest("GET",uri);
  MockHttpServletResponse response2=new MockHttpServletResponse();
  MockFilterChain chain2=new MockFilterChain();
  filter.doFilter(request2,response2,chain2);
  result=DruidStatService.getInstance().service("/webapp.json");
  resultMap=(Map<String,Object>)JSONUtils.parse(result);
  contentList=(List<Map<String,Object>>)resultMap.get("Content");
  assertThat(contentList.size(),equalTo(1));
  contentMap=contentList.get(0);
  assertThat((Integer)contentMap.get("RequestCount"),equalTo(2));
  filter.destroy();
}
