public void test_sys_property() throws Exception {
  String password="abcdefg1234";
  String[] keys=ConfigTools.genKeyPair(1024);
  File file=File.createTempFile("MyTest",Long.toString(System.nanoTime()));
  Properties properties=new Properties();
  properties.put(DruidDataSourceFactory.PROP_URL,"jdbc:mock:xx0");
  properties.put(DruidDataSourceFactory.PROP_USERNAME,"sa");
  properties.put(DruidDataSourceFactory.PROP_PASSWORD,ConfigTools.encrypt(keys[0],password));
  properties.put(ConfigFilter.CONFIG_DECRYPT,"true");
  properties.store(new FileOutputStream(file),"");
  System.getProperties().put(ConfigFilter.SYS_PROP_CONFIG_KEY,keys[1]);
  System.getProperties().put(ConfigFilter.SYS_PROP_CONFIG_FILE,"file://" + file.getAbsolutePath());
  try {
    dataSource.init();
    Assert.assertEquals("jdbc:mock:xx0",dataSource.getUrl());
    Assert.assertEquals("sa",dataSource.getUsername());
    Assert.assertEquals(password,dataSource.getPassword());
  }
  finally {
    System.clearProperty(ConfigFilter.SYS_PROP_CONFIG_KEY);
    System.clearProperty(ConfigFilter.SYS_PROP_CONFIG_FILE);
  }
}
