@Test public void stalledThreadAppearsInStackTrace() throws Exception {
  JUnitCore core=new JUnitCore();
  Result result=core.run(InfiniteLoopTest.class);
  assertEquals(1,result.getRunCount());
  assertEquals(1,result.getFailureCount());
  Throwable exception=result.getFailures().get(0).getException();
  assertThat(stackForException(exception),containsString("infiniteLoop"));
}
