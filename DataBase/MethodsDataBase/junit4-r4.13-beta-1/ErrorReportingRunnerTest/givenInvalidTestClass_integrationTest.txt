@Test public void givenInvalidTestClass_integrationTest(){
  Result result=JUnitCore.runClasses(TestClassWithErrors.class);
  assertThat(result.getFailureCount(),is(1));
  Throwable failure=result.getFailures().get(0).getException();
  assertThat(failure,instanceOf(InvalidTestClassError.class));
  assertThat(failure.getMessage(),allOf(startsWith("Invalid test class '" + TestClassWithErrors.class.getName() + "'"),containsString("\n  1. "),containsString("\n  2. ")));
}
