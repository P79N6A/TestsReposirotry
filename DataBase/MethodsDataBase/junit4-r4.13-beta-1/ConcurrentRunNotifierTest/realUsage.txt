@Test public void realUsage() throws Exception {
  ConcurrentRunListener listener1=new ConcurrentRunListener();
  ConcurrentRunListener listener2=new ConcurrentRunListener();
  fNotifier.addListener(listener1);
  fNotifier.addListener(listener2);
  final int numParallelTests=4;
  ExecutorService pool=Executors.newFixedThreadPool(numParallelTests);
  for (int i=0; i < numParallelTests; ++i) {
    pool.submit(new Runnable(){
      public void run(){
        fNotifier.fireTestStarted(null);
      }
    }
);
  }
  pool.shutdown();
  assertTrue(pool.awaitTermination(TIMEOUT,TimeUnit.SECONDS));
  fNotifier.removeListener(listener1);
  fNotifier.removeListener(listener2);
  assertThat(listener1.fTestStarted.get(),is(numParallelTests));
  assertThat(listener2.fTestStarted.get(),is(numParallelTests));
}
