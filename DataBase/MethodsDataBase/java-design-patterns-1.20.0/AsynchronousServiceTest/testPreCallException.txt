@Test public void testPreCallException() throws Exception {
  final AsynchronousService service=new AsynchronousService(new LinkedBlockingQueue<>());
  final AsyncTask<Object> task=mock(AsyncTask.class);
  final IllegalStateException exception=new IllegalStateException();
  doThrow(exception).when(task).onPreCall();
  service.execute(task);
  verify(task,timeout(2000)).onError(eq(exception));
  final InOrder inOrder=inOrder(task);
  inOrder.verify(task,times(1)).onPreCall();
  inOrder.verify(task,times(1)).onError(exception);
  verifyNoMoreInteractions(task);
}
