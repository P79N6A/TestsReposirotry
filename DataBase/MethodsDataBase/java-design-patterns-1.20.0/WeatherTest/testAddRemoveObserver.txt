/** 
 * Add a  {@link WeatherObserver}, verify if it gets notified of a weather change, remove the observer again and verify that there are no more notifications.
 */
@Test public void testAddRemoveObserver(){
  final WeatherObserver observer=mock(WeatherObserver.class);
  final Weather weather=new Weather();
  weather.addObserver(observer);
  verifyZeroInteractions(observer);
  weather.timePasses();
  assertEquals("The weather changed to rainy.",appender.getLastMessage());
  verify(observer).update(WeatherType.RAINY);
  weather.removeObserver(observer);
  weather.timePasses();
  assertEquals("The weather changed to windy.",appender.getLastMessage());
  verifyNoMoreInteractions(observer);
  assertEquals(2,appender.getLogSize());
}
