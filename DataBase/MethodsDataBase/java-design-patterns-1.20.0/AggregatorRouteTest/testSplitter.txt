/** 
 * Test if endpoint receives three separate messages.
 * @throws Exception in case of en exception during the test
 */
@Test @DirtiesContext public void testSplitter() throws Exception {
  entry.sendBody("TEST1");
  entry.sendBody("TEST2");
  entry.sendBody("TEST3");
  entry.sendBody("TEST4");
  entry.sendBody("TEST5");
  endpoint.expectedMessageCount(2);
  endpoint.assertIsSatisfied();
  String body=(String)endpoint.getReceivedExchanges().get(0).getIn().getBody();
  assertEquals(3,body.split(";").length);
  String body2=(String)endpoint.getReceivedExchanges().get(1).getIn().getBody();
  assertEquals(2,body2.split(";").length);
}
