/** 
 * Use the same object 100 times subsequently. This should not take much time since the heavy object instantiation is done only once. Verify if we get the same object each time.
 */
@Test public void testSubsequentCheckinCheckout(){
  assertTimeout(ofMillis(5000),() -> {
    final OliphauntPool pool=new OliphauntPool();
    assertEquals(pool.toString(),"Pool available=0 inUse=0");
    final Oliphaunt expectedOliphaunt=pool.checkOut();
    assertEquals(pool.toString(),"Pool available=0 inUse=1");
    pool.checkIn(expectedOliphaunt);
    assertEquals(pool.toString(),"Pool available=1 inUse=0");
    for (int i=0; i < 100; i++) {
      final Oliphaunt oliphaunt=pool.checkOut();
      assertEquals(pool.toString(),"Pool available=0 inUse=1");
      assertSame(expectedOliphaunt,oliphaunt);
      assertEquals(expectedOliphaunt.getId(),oliphaunt.getId());
      assertEquals(expectedOliphaunt.toString(),oliphaunt.toString());
      pool.checkIn(oliphaunt);
      assertEquals(pool.toString(),"Pool available=1 inUse=0");
    }
  }
);
}
