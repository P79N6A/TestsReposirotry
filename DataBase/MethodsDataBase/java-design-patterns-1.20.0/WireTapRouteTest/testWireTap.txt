/** 
 * Test if both endpoints receive exactly one message containing the same, unchanged body.
 * @throws Exception in case of en exception during the test
 */
@Test @DirtiesContext public void testWireTap() throws Exception {
  entry.sendBody("TEST");
  endpoint.expectedMessageCount(1);
  wireTapEndpoint.expectedMessageCount(1);
  endpoint.assertIsSatisfied();
  wireTapEndpoint.assertIsSatisfied();
  Message endpointIn=endpoint.getExchanges().get(0).getIn();
  Message wireTapEndpointIn=wireTapEndpoint.getExchanges().get(0).getIn();
  assertEquals("TEST",endpointIn.getBody());
  assertEquals("TEST",wireTapEndpointIn.getBody());
}
