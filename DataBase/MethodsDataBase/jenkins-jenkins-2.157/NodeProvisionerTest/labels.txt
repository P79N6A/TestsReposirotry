/** 
 * Scenario: loads on one label shouldn't translate to load on another label.
 */
@Test public void labels() throws Exception {
  try (BulkChange bc=new BulkChange(r.jenkins)){
    DummyCloudImpl cloud=initHudson(0);
    Label blue=r.jenkins.getLabel("blue");
    Label red=r.jenkins.getLabel("red");
    cloud.label=red;
    List<FreeStyleProject> redJobs=create5SlowJobs(new Latch(5));
    for (    FreeStyleProject p : redJobs)     p.setAssignedLabel(red);
    List<FreeStyleProject> blueJobs=create5SlowJobs(new Latch(5));
    for (    FreeStyleProject p : blueJobs)     p.setAssignedLabel(blue);
    List<Future<FreeStyleBuild>> blueBuilds=buildAll(blueJobs);
    verifySuccessfulCompletion(buildAll(redJobs));
    assertEquals(5,cloud.numProvisioned);
    for (    Future<FreeStyleBuild> bb : blueBuilds)     assertFalse(bb.isDone());
  }
 }
