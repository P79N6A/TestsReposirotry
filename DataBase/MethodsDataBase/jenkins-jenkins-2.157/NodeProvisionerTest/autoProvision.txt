/** 
 * Scenario: schedule a build and see if one slave is provisioned.
 */
@Test public void autoProvision() throws Exception {
  try (BulkChange bc=new BulkChange(r.jenkins)){
    DummyCloudImpl cloud=initHudson(10);
    FreeStyleProject p=createJob(new SleepBuilder(10));
    Future<FreeStyleBuild> f=p.scheduleBuild2(0);
    f.get(30,TimeUnit.SECONDS);
    assertEquals(1,cloud.numProvisioned);
  }
 }
