@Test public void security218() throws Exception {
  pool=Executors.newCachedThreadPool();
  try {
    FullDuplexHttpStream con=new FullDuplexHttpStream(j.getURL(),"cli",null);
    Channel ch=new ChannelBuilder("test connection",pool).build(con.getInputStream(),con.getOutputStream());
    ch.call(new Security218());
    fail("Expected the call to be rejected");
  }
 catch (  Exception e) {
    assertThat(Functions.printThrowable(e),containsString("Rejected: " + Security218.class.getName()));
  }
 finally {
    pool.shutdown();
  }
}
