@Test public void getJobsRecursivelyFromViewGroup() throws Exception {
  final CompositeView rootView=mock(CompositeView.class);
  when(rootView.getAllItems()).thenCallRealMethod();
  final View leftView=view();
  final View rightView=view();
  final TopLevelItem rootJob=job("rootJob");
  final TopLevelItem leftJob=job("leftJob");
  final TopLevelItem rightJob=job("rightJob");
  final TopLevelItem sharedJob=job("sharedJob");
  when(rootView.getViews()).thenReturn(Arrays.asList(leftView,rightView));
  when(rootView.getItems()).thenReturn(Arrays.asList(rootJob,sharedJob));
  when(leftView.getItems()).thenReturn(Arrays.asList(leftJob,sharedJob));
  when(rightView.getItems()).thenReturn(Arrays.asList(rightJob));
  when(jenkins.getView("Root")).thenReturn(rootView);
  assertThat(runWith("Root"),equalTo(0));
  assertThat(stderr,is(empty()));
  assertThat(stdout,listsJobs("rootJob","leftJob","rightJob","sharedJob"));
}
