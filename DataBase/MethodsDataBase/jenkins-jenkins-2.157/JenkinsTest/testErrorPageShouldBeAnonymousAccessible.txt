@Test @Issue("JENKINS-20866") public void testErrorPageShouldBeAnonymousAccessible() throws Exception {
  HudsonPrivateSecurityRealm s=new HudsonPrivateSecurityRealm(false,false,null);
  User alice=s.createAccount("alice","alice");
  j.jenkins.setSecurityRealm(s);
  GlobalMatrixAuthorizationStrategy auth=new GlobalMatrixAuthorizationStrategy();
  j.jenkins.setAuthorizationStrategy(auth);
  assertTrue(!Jenkins.getInstance().hasPermission(Jenkins.ANONYMOUS,Jenkins.READ));
  WebClient wc=j.createWebClient();
  wc.getOptions().setThrowExceptionOnFailingStatusCode(false);
  HtmlPage p=wc.goTo("error/reportError");
  assertEquals(p.asText(),400,p.getWebResponse().getStatusCode());
  assertTrue(p.getWebResponse().getContentAsString().contains("My car is black"));
}
