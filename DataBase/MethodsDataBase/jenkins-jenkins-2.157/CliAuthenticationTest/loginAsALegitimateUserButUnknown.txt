@Test @Issue("JENKINS-27026") public void loginAsALegitimateUserButUnknown() throws Exception {
  j.jenkins.setSecurityRealm(new MockSecurityRealm());
  String username="alice";
  unsuccessfulCommand("login","--username",username,"--password","badCredentials");
  spySecurityListener.failedToAuthenticateCalls.assertLastEventIsAndThenRemoveIt(username);
  spySecurityListener.failedToLogInCalls.assertNoNewEvents();
  spySecurityListener.authenticatedCalls.assertNoNewEvents();
  spySecurityListener.loggedInCalls.assertNoNewEvents();
  unsuccessfulCommand("login","--username",username,"--password","usernameNotFound");
  spySecurityListener.failedToAuthenticateCalls.assertLastEventIsAndThenRemoveIt(username);
  spySecurityListener.failedToLogInCalls.assertNoNewEvents();
  spySecurityListener.authenticatedCalls.assertNoNewEvents();
  spySecurityListener.loggedInCalls.assertNoNewEvents();
  unsuccessfulCommand("login","--username",username,"--password","mayOrMayNotExist");
  spySecurityListener.failedToAuthenticateCalls.assertLastEventIsAndThenRemoveIt(username);
  spySecurityListener.failedToLogInCalls.assertNoNewEvents();
  spySecurityListener.authenticatedCalls.assertNoNewEvents();
  spySecurityListener.loggedInCalls.assertNoNewEvents();
  unsuccessfulCommand("login","--username",username,"--password","dataAccess");
  spySecurityListener.failedToAuthenticateCalls.assertNoNewEvents();
  spySecurityListener.failedToLogInCalls.assertNoNewEvents();
  spySecurityListener.authenticatedCalls.assertNoNewEvents();
  spySecurityListener.loggedInCalls.assertNoNewEvents();
}
