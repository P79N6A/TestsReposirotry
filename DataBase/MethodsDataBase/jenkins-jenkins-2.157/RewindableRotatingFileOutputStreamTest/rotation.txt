@Test public void rotation() throws IOException, InterruptedException {
  File base=tmp.newFile("test.log");
  RewindableRotatingFileOutputStream os=new RewindableRotatingFileOutputStream(base,3);
  PrintWriter w=new PrintWriter(os,true);
  for (int i=0; i <= 4; i++) {
    w.println("Content" + i);
    os.rewind();
  }
  w.println("Content5");
  w.close();
  assertEquals("Content5",new FilePath(base).readToString().trim());
  assertEquals("Content4",new FilePath(new File(base.getPath() + ".1")).readToString().trim());
  assertEquals("Content3",new FilePath(new File(base.getPath() + ".2")).readToString().trim());
  assertEquals("Content2",new FilePath(new File(base.getPath() + ".3")).readToString().trim());
  assertFalse(new File(base.getPath() + ".4").exists());
  os.deleteAll();
}
