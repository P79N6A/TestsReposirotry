@Test public void postWithUsernameAndTokenInBasicAuthHeader() throws Exception {
  FreeStyleProject p=j.createFreeStyleProject("bar");
  j.jenkins.setSecurityRealm(j.createDummySecurityRealm());
  User.getById("foo",true);
  WebClient wc=createClientForUser("foo");
  WebRequest wr=new WebRequest(new URL(j.getURL(),"job/bar/build"),HttpMethod.POST);
  assertEquals(201,wc.getPage(wr).getWebResponse().getStatusCode());
  j.waitUntilNoActivity();
  Cause.UserIdCause triggeredBy=p.getBuildByNumber(1).getCause(Cause.UserIdCause.class);
  assertEquals("foo",triggeredBy.getUserId());
}
