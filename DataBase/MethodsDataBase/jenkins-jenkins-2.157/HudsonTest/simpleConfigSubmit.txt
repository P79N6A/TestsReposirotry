/** 
 * Performs a very basic round-trip of a non-empty system configuration screen. This makes sure that the structured form submission is working (to some limited extent.)
 */
@Test @LocalData @Email("http://www.nabble.com/Hudson.configure-calling-deprecated-Descriptor.configure-td19051815.html") public void simpleConfigSubmit() throws Exception {
  HtmlPage configPage=j.createWebClient().goTo("configure");
  HtmlForm form=configPage.getFormByName("config");
  j.submit(form);
  HtmlPage toolsConfigPage=j.createWebClient().goTo("configureTools");
  HtmlForm toolsForm=toolsConfigPage.getFormByName("config");
  j.submit(toolsForm);
  assertEquals(2,j.jenkins.getNumExecutors());
  assertSame(Mode.NORMAL,j.jenkins.getMode());
  assertSame(SecurityRealm.NO_AUTHENTICATION,j.jenkins.getSecurityRealm());
  assertSame(AuthorizationStrategy.UNSECURED,j.jenkins.getAuthorizationStrategy());
  assertEquals(5,j.jenkins.getQuietPeriod());
  List<JDK> jdks=j.jenkins.getJDKs();
  assertEquals(3,jdks.size());
  assertJDK(jdks.get(0),"jdk1","/tmp");
  assertJDK(jdks.get(1),"jdk2","/tmp");
  AntInstallation[] ants=j.jenkins.getDescriptorByType(Ant.DescriptorImpl.class).getInstallations();
  assertEquals(2,ants.length);
  assertAnt(ants[0],"ant1","/tmp");
  assertAnt(ants[1],"ant2","/tmp");
}
