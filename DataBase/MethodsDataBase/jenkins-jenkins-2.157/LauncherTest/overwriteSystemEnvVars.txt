@Issue("JENKINS-19926") @Test public void overwriteSystemEnvVars() throws Exception {
  Map<String,String> env=new HashMap<String,String>();
  env.put("jenkins_19926","original value");
  Slave slave=rule.createSlave(new EnvVars(env));
  FreeStyleProject project=rule.createFreeStyleProject();
  project.addProperty(new ParametersDefinitionProperty(new StringParameterDefinition("jenkins_19926","${jenkins_19926} and new value")));
  final CommandInterpreter script=Functions.isWindows() ? new BatchFile("echo %jenkins_19926%") : new Shell("echo ${jenkins_19926}");
  project.getBuildersList().add(script);
  project.setAssignedNode(slave.getComputer().getNode());
  FreeStyleBuild build=project.scheduleBuild2(0).get();
  rule.assertLogContains("original value and new value",build);
}
