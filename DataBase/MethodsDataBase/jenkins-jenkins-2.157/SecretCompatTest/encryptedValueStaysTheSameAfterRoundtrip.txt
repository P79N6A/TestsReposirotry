@Test @Issue("SECURITY-304") public void encryptedValueStaysTheSameAfterRoundtrip() throws Exception {
  FreeStyleProject project=j.createFreeStyleProject();
  project.addProperty(new ParametersDefinitionProperty(new PasswordParameterDefinition("p","s3cr37","Keep this a secret")));
  project.getAllActions();
  project=j.configRoundtrip(project);
  String round1=project.getConfigFile().asString();
  project=j.configRoundtrip(project);
  String round2=project.getConfigFile().asString();
  assertEquals(round1,round2);
  project=j.jenkins.getItemByFullName(project.getFullName(),FreeStyleProject.class);
  project.removeProperty(ParametersDefinitionProperty.class);
  project.addProperty(new ParametersDefinitionProperty(new PasswordParameterDefinition("p","s3cr37","Keep this a secret")));
  project=j.configRoundtrip(project);
  String round3=project.getConfigFile().asString();
  assertNotEquals(round2,round3);
  project=j.configRoundtrip(project);
  String round4=project.getConfigFile().asString();
  assertEquals(round3,round4);
}
