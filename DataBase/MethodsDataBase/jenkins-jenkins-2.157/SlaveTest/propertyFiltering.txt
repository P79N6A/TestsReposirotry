@Test @Issue("JENKINS-36280") public void propertyFiltering() throws Exception {
  DumbSlave.DescriptorImpl descriptor=j.getInstance().getDescriptorByType(DumbSlave.DescriptorImpl.class);
  DescriptorExtensionList<NodeProperty<?>,NodePropertyDescriptor> descriptors=NodeProperty.all();
  assumeThat("we need at least two node properties to test this",descriptors.size(),not(anyOf(is(0),is(1))));
  assertThat(descriptor.nodePropertyDescriptors(null),containsInAnyOrder(descriptors.toArray(new Descriptor[descriptors.size()])));
  NodePropertyDescriptor victim=descriptors.iterator().next();
  assertThat(descriptor.nodePropertyDescriptors(null),hasItem(victim));
  DynamicFilter.descriptors().add(victim);
  assertThat(descriptor.nodePropertyDescriptors(null),not(hasItem(victim)));
  DynamicFilter.descriptors().remove(victim);
  assertThat(descriptor.nodePropertyDescriptors(null),hasItem(victim));
}
