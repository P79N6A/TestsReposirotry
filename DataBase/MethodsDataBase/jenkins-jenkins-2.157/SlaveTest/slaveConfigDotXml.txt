/** 
 * Programmatic config.xml submission.
 */
@Test public void slaveConfigDotXml() throws Exception {
  DumbSlave s=j.createSlave();
  JenkinsRule.WebClient wc=j.createWebClient();
  Page p=wc.goTo("computer/" + s.getNodeName() + "/config.xml","application/xml");
  String xml=p.getWebResponse().getContentAsString();
  new XmlSlurper().parseText(xml);
  post("computer/" + s.getNodeName() + "/config.xml",xml);
  assertNotNull(j.jenkins.getNode(s.getNodeName()));
  xml=IOUtils.toString(getClass().getResource("SlaveTest/slave.xml").openStream());
  xml=xml.replace("NAME",s.getNodeName());
  post("computer/" + s.getNodeName() + "/config.xml",xml);
  s=(DumbSlave)j.jenkins.getNode(s.getNodeName());
  assertNotNull(s);
  assertEquals("some text",s.getNodeDescription());
  assertEquals(JNLPLauncher.class,s.getLauncher().getClass());
}
