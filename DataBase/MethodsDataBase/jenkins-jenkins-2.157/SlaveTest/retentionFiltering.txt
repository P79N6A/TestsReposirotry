@Test @Issue("JENKINS-36280") public void retentionFiltering() throws Exception {
  DumbSlave.DescriptorImpl descriptor=j.getInstance().getDescriptorByType(DumbSlave.DescriptorImpl.class);
  DescriptorExtensionList<RetentionStrategy<?>,Descriptor<RetentionStrategy<?>>> descriptors=RetentionStrategy.all();
  assumeThat("we need at least two retention strategies to test this",descriptors.size(),not(anyOf(is(0),is(1))));
  assertThat(descriptor.retentionStrategyDescriptors(null),containsInAnyOrder(descriptors.toArray(new Descriptor[descriptors.size()])));
  Descriptor<RetentionStrategy<?>> victim=descriptors.iterator().next();
  assertThat(descriptor.retentionStrategyDescriptors(null),hasItem(victim));
  DynamicFilter.descriptors().add(victim);
  assertThat(descriptor.retentionStrategyDescriptors(null),not(hasItem(victim)));
  DynamicFilter.descriptors().remove(victim);
  assertThat(descriptor.retentionStrategyDescriptors(null),hasItem(victim));
}
