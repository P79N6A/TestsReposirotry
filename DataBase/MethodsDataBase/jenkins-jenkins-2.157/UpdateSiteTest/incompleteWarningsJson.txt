@Test public void incompleteWarningsJson() throws Exception {
  PersistedList<UpdateSite> sites=j.jenkins.getUpdateCenter().getSites();
  sites.clear();
  URL url=new URL(baseUrl,"/plugins/warnings-update-center-malformed.json");
  UpdateSite site=new UpdateSite(UpdateCenter.ID_DEFAULT,url.toString());
  sites.add(site);
  assertEquals(FormValidation.ok(),site.updateDirectly(false).get());
  assertEquals("number of warnings",7,site.getData().getWarnings().size());
  assertNotEquals("plugin data is present",Collections.emptyMap(),site.getData().plugins);
}
