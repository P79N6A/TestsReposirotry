@Test public void shouldCreateUsageLinks() throws Exception {
  FreeStyleProject project=createAndRunProjectWithPublisher("fpProducer","test.txt");
  final FreeStyleBuild build=project.getLastBuild();
  FreeStyleProject project2=rule.createFreeStyleProject();
  project2.getBuildersList().add(new WorkspaceCopyFileBuilder("test.txt",project.getName(),build.getNumber()));
  project2.getPublishersList().add(new Fingerprinter("test.txt"));
  FreeStyleBuild build2=rule.buildAndAssertSuccess(project2);
  Fingerprint fp=getFingerprint(build,"test.txt");
  Fingerprint.BuildPtr original=fp.getOriginal();
  assertEquals("Original reference contains a wrong job name",project.getName(),original.getName());
  assertEquals("Original reference contains a wrong build number",build.getNumber(),original.getNumber());
  Hashtable<String,Fingerprint.RangeSet> usages=fp.getUsages();
  assertTrue("Usages do not have a reference to " + project,usages.containsKey(project.getName()));
  assertTrue("Usages do not have a reference to " + project2,usages.containsKey(project2.getName()));
}
