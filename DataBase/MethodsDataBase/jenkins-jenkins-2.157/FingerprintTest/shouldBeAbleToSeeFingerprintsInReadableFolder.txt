@Test public void shouldBeAbleToSeeFingerprintsInReadableFolder() throws Exception {
  final SecuredMockFolder folder=rule.jenkins.createProject(SecuredMockFolder.class,"folder");
  final FreeStyleProject project=createAndRunProjectWithPublisher(folder,"project","test.txt");
  final FreeStyleBuild build=project.getLastBuild();
  final Fingerprint fingerprint=getFingerprint(build,"test.txt");
  User user1=User.get("user1");
  setupProjectMatrixAuthStrategy(false,Jenkins.READ,Item.DISCOVER);
  setJobPermissionsOnce(project,"user1",Item.DISCOVER);
  folder.setPermissions("user1",Item.READ);
  try (ACLContext acl=ACL.as(user1)){
    assertTrue("Test framework issue: User1 should be able to read the folder",folder.hasPermission(Item.READ));
    Fingerprint.BuildPtr original=fingerprint.getOriginal();
    assertThat("user1 should able to see the origin",fingerprint.getOriginal(),notNullValue());
    assertEquals("user1 sees the wrong original name with Item.DISCOVER",project.getFullName(),original.getName());
    assertEquals("user1 sees the wrong original number with Item.DISCOVER",build.getNumber(),original.getNumber());
    assertEquals("user1 should be able to see the job",1,fingerprint._getUsages().size());
    assertThat("User should be unable do retrieve the job due to the missing read",original.getJob(),nullValue());
  }
 }
