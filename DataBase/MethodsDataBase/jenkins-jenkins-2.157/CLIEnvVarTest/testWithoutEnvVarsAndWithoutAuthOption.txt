@Test public void testWithoutEnvVarsAndWithoutAuthOption() throws Exception {
  r.jenkins.setSecurityRealm(r.createDummySecurityRealm());
  r.jenkins.setAuthorizationStrategy(new MockAuthorizationStrategy().grant(Jenkins.ADMINISTER).everywhere().to("admin"));
  try (ByteArrayOutputStream baos=new ByteArrayOutputStream()){
    assertEquals(0,launch(Collections.emptyMap(),baos,null,"java","-Duser.home=" + home,"-jar",jar.getAbsolutePath(),"-s",r.getURL().toString(),"who-am-i"));
    assertThat(baos.toString(),containsString("Authenticated as: anonymous"));
  }
 }
