@Test public void testGetSuggestionsHasBothNamesAndDisplayNames() throws Exception {
  final String projectName="project name";
  final String displayName="display name";
  FreeStyleProject project1=j.createFreeStyleProject(projectName);
  project1.setDisplayName(displayName);
  WebClient wc=j.createWebClient();
  Page result=wc.goTo("search/suggest?query=name","application/json");
  assertNotNull(result);
  j.assertGoodStatus(result);
  String content=result.getWebResponse().getContentAsString();
  System.out.println(content);
  JSONObject jsonContent=(JSONObject)JSONSerializer.toJSON(content);
  assertNotNull(jsonContent);
  JSONArray jsonArray=jsonContent.getJSONArray("suggestions");
  assertNotNull(jsonArray);
  assertEquals(2,jsonArray.size());
  boolean foundProjectName=false;
  boolean foundDisplayName=false;
  for (  Object suggestion : jsonArray) {
    JSONObject jsonSuggestion=(JSONObject)suggestion;
    String name=(String)jsonSuggestion.get("name");
    if (projectName.equals(name)) {
      foundProjectName=true;
    }
 else     if (displayName.equals(name)) {
      foundDisplayName=true;
    }
  }
  assertTrue(foundProjectName);
  assertTrue(foundDisplayName);
}
