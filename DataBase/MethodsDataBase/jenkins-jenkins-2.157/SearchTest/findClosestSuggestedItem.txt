/** 
 * This test verifies that if 2 search results are found with the same search name, that the one with the search query in the url is returned
 */
@Test public void findClosestSuggestedItem(){
  final String query="foobar 123";
  final String searchName="sameDisplayName";
  SearchItem searchItemHit=new SearchItem(){
    public SearchIndex getSearchIndex(){
      return null;
    }
    public String getSearchName(){
      return searchName;
    }
    public String getSearchUrl(){
      return "/job/" + Util.rawEncode(query) + "/";
    }
  }
;
  SearchItem searchItemNoHit=new SearchItem(){
    public SearchIndex getSearchIndex(){
      return null;
    }
    public String getSearchName(){
      return searchName;
    }
    public String getSearchUrl(){
      return "/job/someotherJob/";
    }
  }
;
  SuggestedItem suggestedHit=new SuggestedItem(searchItemHit);
  SuggestedItem suggestedNoHit=new SuggestedItem(searchItemNoHit);
  ArrayList<SuggestedItem> list=new ArrayList<SuggestedItem>();
  list.add(suggestedNoHit);
  list.add(suggestedHit);
  SuggestedItem found=Search.findClosestSuggestedItem(list,query);
  assertEquals(searchItemHit,found.item);
  SuggestedItem found2=Search.findClosestSuggestedItem(list,"abcd");
  assertEquals(searchItemNoHit,found2.item);
}
