@Issue("JENKINS-48407") @Test public void checkPermissionsRespectUmask() throws IOException, InterruptedException {
  final File newFile=tmp.newFile();
  boolean posixSupported=isPosixSupported(newFile);
  assumeThat(posixSupported,is(true));
  Path filePath=newFile.toPath();
  AtomicFileWriter w=new AtomicFileWriter(filePath,StandardCharsets.UTF_8);
  w.write("whatever");
  w.commit();
  assertFalse(w.getTemporaryPath().toFile().exists());
  assertTrue(filePath.toFile().exists());
  assertThat(Files.getPosixFilePermissions(filePath),equalTo(DEFAULT_GIVEN_PERMISSIONS));
}
