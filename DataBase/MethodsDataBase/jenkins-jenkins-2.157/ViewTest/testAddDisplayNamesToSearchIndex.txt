@Test public void testAddDisplayNamesToSearchIndex(){
  final String url1="url1";
  final String displayName1="displayName1";
  final String url2="url2";
  final String displayName2="displayName2";
  SearchIndexBuilder sib=new SearchIndexBuilder();
  TopLevelItem item1=Mockito.mock(TopLevelItem.class);
  Mockito.when(item1.getSearchUrl()).thenReturn(url1);
  Mockito.when(item1.getDisplayName()).thenReturn(displayName1);
  TopLevelItem item2=Mockito.mock(TopLevelItem.class);
  Mockito.when(item2.getSearchUrl()).thenReturn(url2);
  Mockito.when(item2.getDisplayName()).thenReturn(displayName2);
  Collection<TopLevelItem> items=new ArrayList<TopLevelItem>();
  items.add(item1);
  items.add(item2);
  View view=Mockito.mock(View.class);
  Mockito.doCallRealMethod().when(view).addDisplayNamesToSearchIndex(sib,items);
  view.addDisplayNamesToSearchIndex(sib,items);
  SearchIndex index=sib.make();
  List<SearchItem> result=new ArrayList<SearchItem>();
  index.find(displayName1,result);
  assertEquals(1,result.size());
  SearchItem actual=result.get(0);
  assertEquals(actual.getSearchName(),item1.getDisplayName());
  assertEquals(actual.getSearchUrl(),item1.getSearchUrl());
  result.clear();
  index.find(displayName2,result);
  assertEquals(1,result.size());
  actual=result.get(0);
  assertEquals(actual.getSearchName(),item2.getDisplayName());
  assertEquals(actual.getSearchUrl(),item2.getSearchUrl());
}
