@Test @Issue("JENKINS-4605") public void abortDuringCheckoutMarksBuildAsAborted() throws Exception {
  FreeStyleProject p=j.createFreeStyleProject();
  p.setScm(new NullSCM(){
    @Override public boolean checkout(    AbstractBuild<?,?> build,    Launcher launcher,    FilePath remoteDir,    BuildListener listener,    File changeLogFile) throws IOException, InterruptedException {
      throw new InterruptedException();
    }
    private Object writeReplace(){
      return new NullSCM();
    }
  }
);
  FreeStyleBuild build=p.scheduleBuild2(0).get();
  assertEquals(Result.ABORTED,build.getResult());
}
