@Test public void persistQueueOnCrash(){
  j.addStepWithDirtyShutdown(new Statement(){
    @Override public void evaluate() throws Throwable {
      Queue.Saver.DELAY_SECONDS=0;
      scheduleSomeBuild();
      assertBuildIsScheduled();
      ExtensionList.lookup(Queue.Saver.class).get(0).getNextSave().get(3,TimeUnit.SECONDS);
      assertTrue("queue.xml does not exist",j.j.jenkins.getQueue().getXMLQueueFile().exists());
    }
  }
);
  j.addStep(new Statement(){
    @Override public void evaluate(){
      assertBuildIsScheduled();
    }
  }
);
}
