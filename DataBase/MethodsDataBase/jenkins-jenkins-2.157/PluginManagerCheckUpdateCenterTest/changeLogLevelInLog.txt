/** 
 * Checks if the message to activate the warnings is written in the log when the log level is higher than WARNING and the attempts higher than 1.
 * @throws Exception See {@link #updateSiteWrongJsonTest()}
 */
@Test public void changeLogLevelInLog() throws Exception {
  Logger pmLogger=Logger.getLogger(PluginManager.class.getName());
  Logger rLogger=Logger.getLogger(Retrier.class.getName());
  Level pmLevel=pmLogger.getLevel();
  Level rLevel=rLogger.getLevel();
  try {
    pmLogger.setLevel(Level.SEVERE);
    rLogger.setLevel(Level.SEVERE);
    PluginManager.CHECK_UPDATE_ATTEMPTS=2;
    updateSiteWrongJsonTest();
    assertThat(logging,LoggerRule.recorded(is(Messages.PluginManager_UpdateSiteChangeLogLevel(Retrier.class.getName()))));
  }
  finally {
    pmLogger.setLevel(pmLevel);
    rLogger.setLevel(rLevel);
  }
}
