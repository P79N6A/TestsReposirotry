@Test public void disconnectCause() throws Exception {
  DumbSlave slave=j.createOnlineSlave();
  FreeStyleProject p=j.createFreeStyleProject();
  p.setAssignedNode(slave);
  Future<FreeStyleBuild> r=startBlockingBuild(p);
  User johnny=User.get("Johnny");
  p.getLastBuild().getBuiltOn().toComputer().disconnect(new OfflineCause.UserCause(johnny,"Taking offline to break your build"));
  FreeStyleBuild b=r.get();
  String log=b.getLog();
  assertEquals(b.getResult(),Result.FAILURE);
  assertThat(log,containsString("Finished: FAILURE"));
  assertThat(log,containsString("Build step 'BlockingBuilder' marked build as failure"));
  assertThat(log,containsString("Agent went offline during the build"));
  assertThat(log,containsString("Disconnected by Johnny : Taking offline to break your buil"));
}
