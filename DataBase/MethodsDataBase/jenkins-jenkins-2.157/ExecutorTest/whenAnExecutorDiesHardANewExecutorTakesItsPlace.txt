@Test @Issue("JENKINS-4756") public void whenAnExecutorDiesHardANewExecutorTakesItsPlace() throws Exception {
  j.jenkins.setNumExecutors(1);
  Computer c=j.jenkins.toComputer();
  Executor e=getExecutorByNumber(c,0);
  j.jenkins.getQueue().schedule(new QueueTest.TestTask(new AtomicInteger()){
    @Override public Queue.Executable createExecutable() throws IOException {
      throw new IllegalStateException("oops");
    }
  }
,0);
  while (e.isActive()) {
    Thread.sleep(10);
  }
  waitUntilExecutorSizeIs(c,1);
  assertNotNull(getExecutorByNumber(c,0));
}
