@Test public void configXmlPostShouldUpdateNodeConfiguration() throws Exception {
  when(req.getMethod()).thenReturn("POST");
  GlobalMatrixAuthorizationStrategy auth=new GlobalMatrixAuthorizationStrategy();
  rule.jenkins.setAuthorizationStrategy(auth);
  auth.add(Computer.CONFIGURE,"user");
  when(req.getInputStream()).thenReturn(xmlNode("node.xml"));
  computer.doConfigDotXml(req,rsp);
  final Node updatedSlave=rule.jenkins.getNode("SlaveFromXML");
  assertThat(updatedSlave.getNodeName(),equalTo("SlaveFromXML"));
  assertThat(updatedSlave.getNumExecutors(),equalTo(42));
}
