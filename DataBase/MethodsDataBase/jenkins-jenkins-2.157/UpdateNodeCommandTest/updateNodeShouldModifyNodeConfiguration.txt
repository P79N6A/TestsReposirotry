@Test public void updateNodeShouldModifyNodeConfiguration() throws Exception {
  j.createSlave("MySlave",null,null);
  final CLICommandInvoker.Result result=command.authorizedTo(Computer.CONFIGURE,Jenkins.READ).withStdin(Computer.class.getResourceAsStream("node.xml")).invokeWithArgs("MySlave");
  assertThat(result,succeededSilently());
  assertThat("A slave with old name should not exist",j.jenkins.getNode("MySlave"),nullValue());
  final Node updatedSlave=j.jenkins.getNode("SlaveFromXML");
  assertThat(updatedSlave.getNodeName(),equalTo("SlaveFromXML"));
  assertThat(updatedSlave.getNumExecutors(),equalTo(42));
}
