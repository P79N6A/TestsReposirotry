@Issue("JENKINS-27607") @Test public void json() throws Exception {
  FreeStyleProject p=j.createFreeStyleProject("p");
  JenkinsRule.WebClient wc=j.createWebClient();
  WebResponse response=wc.goTo(p.getUrl() + "api/json?tree=name","application/json").getWebResponse();
  JSONObject json=JSONObject.fromObject(response.getContentAsString());
  assertEquals("p",json.get("name"));
  String s=wc.goTo(p.getUrl() + "api/json?tree=name&jsonp=wrap","application/javascript").getWebResponse().getContentAsString();
  assertTrue(s.startsWith("wrap("));
  assertEquals(')',s.charAt(s.length() - 1));
  json=JSONObject.fromObject(s.substring("wrap(".length(),s.length() - 1));
  assertEquals("p",json.get("name"));
}
