@Ignore("too expensive to make it correct") @Test @PrepareForTest({Stapler.class,Jenkins.class}) public void testGetRelativeLinkTo_JobNotContainedInView() throws Exception {
  Jenkins j=createMockJenkins();
  ItemGroup parent=j;
  String contextPath="/jenkins";
  StaplerRequest req=createMockRequest(contextPath);
  mockStatic(Stapler.class);
  when(Stapler.getCurrentRequest()).thenReturn(req);
  View view=mock(View.class);
  when(view.getOwner().getItemGroup()).thenReturn(parent);
  createMockAncestors(req,createAncestor(j,"../.."),createAncestor(view,"."));
  TopLevelItem i=createMockItem(parent,"job/i/");
  when(view.getItems()).thenReturn(Collections.<TopLevelItem>emptyList());
  String result=Functions.getRelativeLinkTo(i);
  assertEquals("/jenkins/job/i/",result);
}
