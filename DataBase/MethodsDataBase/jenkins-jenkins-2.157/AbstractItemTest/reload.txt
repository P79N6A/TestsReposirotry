/** 
 * Tests the reload functionality
 */
@Test public void reload() throws Exception {
  Jenkins jenkins=j.jenkins;
  FreeStyleProject p=jenkins.createProject(FreeStyleProject.class,"foo");
  p.setDescription("Hello World");
  FreeStyleBuild b=j.assertBuildStatusSuccess(p.scheduleBuild2(0));
  b.setDescription("This is my build");
  File f=p.getConfigFile().getFile();
  FileUtils.writeStringToFile(f,FileUtils.readFileToString(f).replaceAll("Hello World","Good Evening"));
  p.doReload();
  assertEquals("Good Evening",p.getDescription());
  FreeStyleBuild b2=p.getBuildByNumber(1);
  assertNotEquals(b,b2);
  assertEquals(b.getDescription(),b2.getDescription());
}
