@Test @SuppressWarnings("unchecked") public void testInternalComparator() throws Exception {
  List<ApiTokenStats.SingleTokenStats> tokenStatsList=Arrays.asList(createSingleTokenStatsByReflection("A",null,0),createSingleTokenStatsByReflection("B","2018-05-01 09:10:59.234",2),createSingleTokenStatsByReflection("C","2018-05-01 09:10:59.234",3),createSingleTokenStatsByReflection("D","2018-05-01 09:10:59.235",1));
  Field field=ApiTokenStats.SingleTokenStats.class.getDeclaredField("COMP_BY_LAST_USE_THEN_COUNTER");
  field.setAccessible(true);
  Comparator<ApiTokenStats.SingleTokenStats> comparator=(Comparator<ApiTokenStats.SingleTokenStats>)field.get(null);
  Collections.shuffle(tokenStatsList,new Random(42));
  tokenStatsList.sort(comparator);
  List<String> idList=tokenStatsList.stream().map(ApiTokenStats.SingleTokenStats::getTokenUuid).collect(Collectors.toList());
  assertThat(idList,contains("A","B","C","D"));
}
