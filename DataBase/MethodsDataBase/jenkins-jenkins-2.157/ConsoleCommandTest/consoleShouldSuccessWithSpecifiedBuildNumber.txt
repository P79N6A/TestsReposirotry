@Test public void consoleShouldSuccessWithSpecifiedBuildNumber() throws Exception {
  FreeStyleProject project=j.createFreeStyleProject("aProject");
  if (Functions.isWindows()) {
    project.getBuildersList().add(new BatchFile("echo %BUILD_NUMBER%"));
  }
 else {
    project.getBuildersList().add(new Shell("echo ${BUILD_NUMBER}"));
  }
  assertThat(project.scheduleBuild2(0).get().getLog(),containsString("echo 1"));
  assertThat(project.scheduleBuild2(0).get().getLog(),containsString("echo 2"));
  assertThat(project.scheduleBuild2(0).get().getLog(),containsString("echo 3"));
  final CLICommandInvoker.Result result=command.authorizedTo(Jenkins.READ,Job.READ,Item.BUILD).invokeWithArgs("aProject","2");
  assertThat(result,succeeded());
  assertThat(result.stdout(),containsString("echo 2"));
}
