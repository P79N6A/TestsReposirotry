@Test @Issue("SECURITY-616") public void testCheckMethod() throws Exception {
  FreeStyleProject p=j.createFreeStyleProject("p");
  p.addProperty(new VulnerableProperty(Secret.fromString("")));
  HtmlPasswordInput field=j.createWebClient().getPage(p,"configure").getFormByName("config").getInputByName("_.secret");
  while (VulnerableProperty.DescriptorImpl.incomingURL == null) {
    Thread.sleep(100);
  }
  VulnerableProperty.DescriptorImpl.incomingURL=null;
  String secret="s3cr3t";
  field.setText(secret);
  while (VulnerableProperty.DescriptorImpl.incomingURL == null) {
    Thread.sleep(100);
  }
  assertThat(VulnerableProperty.DescriptorImpl.incomingURL,not(containsString(secret)));
  assertEquals(secret,VulnerableProperty.DescriptorImpl.checkedSecret);
}
