/** 
 * Editing code mirror should still gets reflected when you click apply.
 */
@Test @Issue("JENKINS-18436") public void editDescription() throws Exception {
  j.jenkins.setMarkupFormatter(RawHtmlMarkupFormatter.INSTANCE);
  FreeStyleProject p=j.createFreeStyleProject();
  FreeStyleBuild b=j.assertBuildStatusSuccess(p.scheduleBuild2(0));
  HtmlPage config=j.createWebClient().getPage(b,"configure");
  HtmlForm form=config.getFormByName("config");
  config.executeJavaScript(IOUtils.toString(ApplyButtonTest.class.getResource("JSON.js")));
  config.executeJavaScript("document.getElementsByTagName('TEXTAREA')[0].codemirrorObject.setLine(0,'foobar')");
  j.getButtonByCaption(form,"Apply").click();
  assertEquals("foobar",b.getDescription());
}
