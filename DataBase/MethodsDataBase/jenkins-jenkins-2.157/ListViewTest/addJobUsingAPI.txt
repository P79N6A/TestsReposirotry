@Issue("JENKINS-41128") @Test public void addJobUsingAPI() throws Exception {
  ListView v=new ListView("view",j.jenkins);
  j.jenkins.addView(v);
  StaplerRequest req=mock(StaplerRequest.class);
  StaplerResponse rsp=mock(StaplerResponse.class);
  String configXml=IOUtils.toString(getClass().getResourceAsStream(String.format("%s/%s/config.xml",getClass().getSimpleName(),testName.getMethodName())),"UTF-8");
  when(req.getMethod()).thenReturn("POST");
  when(req.getParameter("name")).thenReturn("job1");
  when(req.getInputStream()).thenReturn(new Stream(IOUtils.toInputStream(configXml)));
  when(req.getContentType()).thenReturn("application/xml");
  v.doCreateItem(req,rsp);
  List<TopLevelItem> items=v.getItems();
  assertEquals(1,items.size());
  assertEquals("job1",items.get(0).getName());
}
