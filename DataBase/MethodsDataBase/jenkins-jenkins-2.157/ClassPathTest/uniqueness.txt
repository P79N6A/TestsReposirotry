@Ignore("TODO too many failures to solve them all now") @Issue("JENKINS-46754") @Test public void uniqueness() throws Exception {
  Map<String,List<String>> entries=new TreeMap<>();
  for (  File jar : new File(WarExploder.getExplodedDir(),"WEB-INF/lib").listFiles((dir,name) -> name.endsWith(".jar"))) {
    String jarname=jar.getName();
    try (JarFile jf=new JarFile(jar)){
      Iterators.forEnumeration(jf.entries()).forEachRemaining(e -> {
        String name=e.getName();
        if (name.startsWith("META-INF/") || name.endsWith("/") || !name.contains("/")) {
          return;
        }
        entries.computeIfAbsent(name,k -> new ArrayList<>()).add(jarname);
      }
);
    }
   }
  entries.forEach((name,jarnames) -> {
    if (jarnames.size() > 1) {
      errors.addError(new AssertionError(name + " duplicated in " + jarnames));
    }
  }
);
}
