/** 
 * Compute 'known-correct' digests and see if I still get them when computed concurrently to another digest.
 */
@Issue("JENKINS-10346") @Test public void testDigestThreadSafety() throws InterruptedException {
  String a="abcdefgh";
  String b="123456789";
  String digestA=Util.getDigestOf(a);
  String digestB=Util.getDigestOf(b);
  DigesterThread t1=new DigesterThread(a,digestA);
  DigesterThread t2=new DigesterThread(b,digestB);
  t1.start();
  t2.start();
  t1.join();
  t2.join();
  if (t1.error != null) {
    fail(t1.error);
  }
  if (t2.error != null) {
    fail(t2.error);
  }
}
