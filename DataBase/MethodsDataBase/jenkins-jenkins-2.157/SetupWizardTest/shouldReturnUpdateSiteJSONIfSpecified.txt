@Test @Issue("JENKINS-34833") public void shouldReturnUpdateSiteJSONIfSpecified() throws Exception {
  CustomUpdateSite us=new CustomUpdateSite(tmpdir.getRoot());
  us.init();
  j.jenkins.getUpdateCenter().getSites().add(us);
  JenkinsRule.WebClient wc=j.createWebClient();
  j.jenkins.setSecurityRealm(SecurityRealm.NO_AUTHENTICATION);
  j.jenkins.setAuthorizationStrategy(AuthorizationStrategy.UNSECURED);
  String response=jsonRequest(wc,"setupWizard/platformPluginList");
  assertThat("Missing plugin is suggestions ",response,containsString("antisamy-markup-formatter"));
  assertThat("Missing category is suggestions ",response,containsString("Organization and Administration"));
  assertThat("Missing plugin is suggestions ",response,not(containsString("active-directory")));
  assertThat("Missing category is suggestions ",response,not(containsString("Pipelines and Continuous Delivery")));
}
