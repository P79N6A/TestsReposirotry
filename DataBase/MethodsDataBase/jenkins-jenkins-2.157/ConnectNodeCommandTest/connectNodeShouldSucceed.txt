@Test public void connectNodeShouldSucceed() throws Exception {
  DumbSlave slave=j.createSlave("aNode","",null);
  CLICommandInvoker.Result result=command.authorizedTo(Computer.CONNECT,Jenkins.READ).invokeWithArgs("aNode");
  assertThat(result,succeededSilently());
  assertThat(slave.toComputer().isOnline(),equalTo(true));
  result=command.authorizedTo(Computer.CONNECT,Jenkins.READ).invokeWithArgs("aNode");
  assertThat(result,succeededSilently());
  assertThat(slave.toComputer().isOnline(),equalTo(true));
  slave.toComputer().disconnect();
  slave.toComputer().waitUntilOffline();
  assertThat(slave.toComputer().isOnline(),equalTo(false));
  assertThat(slave.toComputer().isOffline(),equalTo(true));
  result=command.authorizedTo(Computer.CONNECT,Jenkins.READ).invokeWithArgs("aNode");
  assertThat(result,succeededSilently());
  assertThat(slave.toComputer().isOnline(),equalTo(true));
}
