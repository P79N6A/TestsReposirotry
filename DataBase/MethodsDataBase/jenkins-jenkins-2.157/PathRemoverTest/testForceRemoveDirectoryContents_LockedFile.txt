@Test public void testForceRemoveDirectoryContents_LockedFile() throws Exception {
  assumeTrue(Functions.isWindows());
  File dir=tmp.newFolder();
  File d1=new File(dir,"d1");
  File d2=new File(dir,"d2");
  File f1=new File(dir,"f1");
  File d1f1=new File(d1,"d1f1");
  File d2f2=new File(d2,"d1f2");
  mkdirs(d1,d2);
  touchWithFileName(f1,d1f1,d2f2);
  locker.acquireLock(d1f1);
  PathRemover remover=PathRemover.newRemoverWithStrategy(retriesAttempted -> retriesAttempted < 1);
  expectedException.expectMessage(allOf(containsString(dir.getPath()),containsString("Tried 1 time.")));
  remover.forceRemoveDirectoryContents(dir.toPath());
  assertFalse(d2.exists());
  assertFalse(f1.exists());
  assertFalse(d2f2.exists());
}
