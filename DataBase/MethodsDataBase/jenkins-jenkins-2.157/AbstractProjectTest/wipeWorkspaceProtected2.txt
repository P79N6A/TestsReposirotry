/** 
 * Makes sure that the workspace deletion link is not provided when the user doesn't have an access.
 */
@Test @PresetData(DataSet.ANONYMOUS_READONLY) public void wipeWorkspaceProtected2() throws Exception {
  ((GlobalMatrixAuthorizationStrategy)j.jenkins.getAuthorizationStrategy()).add(AbstractProject.WORKSPACE,"anonymous");
  wipeWorkspaceProtected();
  JenkinsRule.WebClient webClient=j.createWebClient();
  HtmlPage page=webClient.getPage(j.jenkins.getItem("test0"));
  page=(HtmlPage)page.getAnchorByText("Workspace").click();
  try {
    String wipeOutLabel=ResourceBundle.getBundle("hudson/model/AbstractProject/sidepanel").getString("Wipe Out Workspace");
    page.getAnchorByText(wipeOutLabel);
    fail("shouldn't find a link");
  }
 catch (  ElementNotFoundException e) {
  }
}
