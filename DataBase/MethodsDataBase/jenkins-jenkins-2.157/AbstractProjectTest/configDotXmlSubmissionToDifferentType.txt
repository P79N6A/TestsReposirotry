/** 
 * Trying to POST to config.xml by a different job type should fail.
 */
@Test public void configDotXmlSubmissionToDifferentType() throws Exception {
  TestPluginManager tpm=(TestPluginManager)j.jenkins.pluginManager;
  tpm.installDetachedPlugin("javadoc");
  tpm.installDetachedPlugin("junit");
  tpm.installDetachedPlugin("display-url-api");
  tpm.installDetachedPlugin("mailer");
  tpm.installDetachedPlugin("maven-plugin");
  j.jenkins.setCrumbIssuer(null);
  FreeStyleProject p=j.createFreeStyleProject();
  HttpURLConnection con=postConfigDotXml(p,"<maven2-moduleset />");
  assertEquals(500,con.getResponseCode());
  String msg=IOUtils.toString(con.getErrorStream());
  System.out.println(msg);
  assertThat(msg,allOf(containsString(FreeStyleProject.class.getName()),containsString(MavenModuleSet.class.getName())));
  con=postConfigDotXml(p,"<project />");
  assertEquals(200,con.getResponseCode());
}
