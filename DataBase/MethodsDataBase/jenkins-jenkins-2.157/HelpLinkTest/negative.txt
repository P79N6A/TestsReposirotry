/** 
 * Make sure that this test is meaningful. Intentionally put 404 and verify that it's detected.
 */
@Test public void negative() throws Exception {
  DescriptorImpl d=new DescriptorImpl();
  Publisher.all().add(d);
  try {
    FreeStyleProject p=j.createFreeStyleProject();
    p.getPublishersList().add(new HelpNotFoundBuilder());
    JenkinsRule.WebClient webclient=j.createWebClient();
    WebResponseListener.StatusListener statusListener=new WebResponseListener.StatusListener(404);
    webclient.addWebResponseListener(statusListener);
    clickAllHelpLinks(webclient,p);
    statusListener.assertHasResponses();
    String contentAsString=statusListener.getResponses().get(0).getContentAsString();
    Assert.assertTrue(contentAsString.contains(d.getHelpFile()));
  }
  finally {
    Publisher.all().remove(d);
  }
}
