/** 
 * script.js defined in the annotator needs to be incorporated into the console page.
 */
@Test public void scriptInclusion() throws Exception {
  FreeStyleProject p=r.createFreeStyleProject();
  FreeStyleBuild b=r.buildAndAssertSuccess(p);
  HtmlPage html=r.createWebClient().getPage(b,"console");
  assertNotNull(html.getElementById("inserted-by-test1"));
  assertNotNull(html.getElementById("inserted-by-test2"));
  for (  DomElement e : html.getElementsByTagName("script")) {
    String src=e.getAttribute("src");
    if (!src.isEmpty()) {
      assertThat(src,containsString(Jenkins.SESSION_HASH));
    }
  }
}
