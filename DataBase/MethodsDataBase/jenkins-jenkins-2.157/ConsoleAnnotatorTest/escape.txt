/** 
 * Makes sure '<', '&', are escaped.
 */
@Issue("JENKINS-5952") @Test public void escape() throws Exception {
  FreeStyleProject p=r.createFreeStyleProject();
  p.getBuildersList().add(new TestBuilder(){
    @Override public boolean perform(    AbstractBuild<?,?> build,    Launcher launcher,    BuildListener listener) throws InterruptedException, IOException {
      listener.getLogger().println("<b>&amp;</b>");
      return true;
    }
  }
);
  FreeStyleBuild b=r.buildAndAssertSuccess(p);
  HtmlPage html=r.createWebClient().getPage(b,"console");
  String text=html.asText();
  System.out.println(text);
  assertTrue(text.contains("<b>&amp;</b>"));
  assertTrue(JenkinsRule.getLog(b).contains("<b>&amp;</b>"));
}
