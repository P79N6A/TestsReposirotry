@Test public void huge64bitFile(){
  File hugeFile=new File(tmpDir,"huge64bitFileTest.txt");
  try {
    RandomAccessFile largeFile=new RandomAccessFile(hugeFile,"rw");
    largeFile.setLength(4 * 1024 * 1024* 1024 + 2);
  }
 catch (  IOException e) {
    LOGGER.log(Level.SEVERE,"Couldn't set up huge file for huge64bitFile test",e);
    return;
  }
  File zipFile=null;
  ZipArchiver archiver=null;
  try {
    zipFile=File.createTempFile("test",".zip");
    archiver=new ZipArchiver(Files.newOutputStream(zipFile.toPath()));
    archiver.visit(hugeFile,"huge64bitFileTest.txt");
  }
 catch (  Exception e) {
    fail("exception driving ZipArchiver",e);
  }
 finally {
    if (archiver != null) {
      try {
        archiver.close();
      }
 catch (      IOException e) {
      }
    }
  }
  String zipEntryName=null;
  ZipFile zipFileVerify=null;
  try {
    zipFileVerify=new ZipFile(zipFile);
    zipEntryName=((ZipEntry)zipFileVerify.entries().nextElement()).getName();
  }
 catch (  Exception e) {
    fail("failure enumerating zip entries",e);
  }
 finally {
    if (zipFileVerify != null) {
      try {
        zipFileVerify.close();
      }
 catch (      IOException e) {
      }
    }
  }
  assertEquals("huge64bitFileTest.txt",zipEntryName);
}
