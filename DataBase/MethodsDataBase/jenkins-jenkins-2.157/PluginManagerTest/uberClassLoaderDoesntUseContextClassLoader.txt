/** 
 * Makes sure that thread context classloader isn't used by  {@link UberClassLoader}, or else infinite cycle ensues.
 */
@Url("http://jenkins.361315.n4.nabble.com/channel-example-and-plugin-classes-gives-ClassNotFoundException-td3756092.html") @Test public void uberClassLoaderDoesntUseContextClassLoader() throws Exception {
  Thread t=Thread.currentThread();
  URLClassLoader ucl=new URLClassLoader(new URL[0],r.jenkins.pluginManager.uberClassLoader);
  ClassLoader old=t.getContextClassLoader();
  t.setContextClassLoader(ucl);
  try {
    try {
      ucl.loadClass("No such class");
      fail();
    }
 catch (    ClassNotFoundException e) {
    }
    ucl.loadClass(Hudson.class.getName());
  }
  finally {
    t.setContextClassLoader(old);
  }
}
