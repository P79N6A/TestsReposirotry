@Issue("JENKINS-12753") @WithPlugin("tasks.jpi") @Test public void dynamicLoadRestartRequiredException() throws Exception {
  File jpi=new File(r.jenkins.getRootDir(),"plugins/tasks.jpi");
  assertTrue(jpi.isFile());
  FileUtils.touch(jpi);
  File timestamp=new File(r.jenkins.getRootDir(),"plugins/tasks/.timestamp2");
  assertTrue(timestamp.isFile());
  long lastMod=timestamp.lastModified();
  try {
    r.jenkins.getPluginManager().dynamicLoad(jpi);
    fail("should not have worked");
  }
 catch (  RestartRequiredException x) {
  }
  assertEquals("should not have tried to delete & unpack",lastMod,timestamp.lastModified());
}
