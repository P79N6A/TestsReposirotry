/** 
 * An attempt to reproduce the file descriptor leak. If this operation leaks a file descriptor, 2500 should be enough, I think.
 */
@Test public void noFileLeakInCopyTo() throws Exception {
  for (int j=0; j < 2500; j++) {
    File tmp=temp.newFile();
    FilePath f=new FilePath(tmp);
    File tmp2=temp.newFile();
    FilePath f2=new FilePath(channels.british,tmp2.getPath());
    f.copyTo(f2);
    f.delete();
    f2.delete();
  }
}
