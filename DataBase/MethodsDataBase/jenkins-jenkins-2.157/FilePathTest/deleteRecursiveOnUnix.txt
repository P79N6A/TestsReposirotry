@Test public void deleteRecursiveOnUnix() throws Exception {
  assumeFalse("Uses Unix-specific features",Functions.isWindows());
  Path targetDir=temp.newFolder("target").toPath();
  Path targetContents=Files.createFile(targetDir.resolve("contents.txt"));
  Path toDelete=temp.newFolder("toDelete").toPath();
  Util.createSymlink(toDelete.toFile(),"../targetDir","link",TaskListener.NULL);
  Files.createFile(toDelete.resolve("foo"));
  Files.createFile(toDelete.resolve("bar"));
  FilePath f=new FilePath(toDelete.toFile());
  f.deleteRecursive();
  assertTrue("symlink target should not be deleted",Files.exists(targetDir));
  assertTrue("symlink target contents should not be deleted",Files.exists(targetContents));
  assertFalse("could not delete target",Files.exists(toDelete));
}
