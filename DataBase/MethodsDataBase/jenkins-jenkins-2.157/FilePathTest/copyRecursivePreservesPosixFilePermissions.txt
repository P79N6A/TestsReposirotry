@Issue("JENKINS-13128") @Test public void copyRecursivePreservesPosixFilePermissions() throws Exception {
  assumeFalse("windows doesn't support posix file permissions",Functions.isWindows());
  File src=temp.newFolder("src");
  File dst=temp.newFolder("dst");
  Path sourceFile=Files.createFile(src.toPath().resolve("test-file"));
  Set<PosixFilePermission> allRWX=EnumSet.allOf(PosixFilePermission.class);
  Files.setPosixFilePermissions(sourceFile,allRWX);
  FilePath f=new FilePath(src);
  f.copyRecursiveTo(new FilePath(dst));
  Path destinationFile=dst.toPath().resolve("test-file");
  assertTrue("file was not copied",Files.exists(destinationFile));
  Set<PosixFilePermission> destinationPermissions=Files.getPosixFilePermissions(destinationFile);
  assertEquals("file permissions not copied",allRWX,destinationPermissions);
}
