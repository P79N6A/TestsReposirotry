@Test public void multipleDownstreamDependencies() throws Exception {
  FreeStyleProject upstream=createFreeStyleProjectWithFingerprints(doubleContents,doubleFiles);
  FreeStyleProject downstream=createFreeStyleProjectWithFingerprints(singleContents,singleFiles);
  FreeStyleProject downstream2=createFreeStyleProjectWithFingerprints(singleContents2,singleFiles2);
  j.assertBuildStatusSuccess(upstream.scheduleBuild2(0).get());
  j.assertBuildStatusSuccess(downstream.scheduleBuild2(0).get());
  j.assertBuildStatusSuccess(downstream2.scheduleBuild2(0).get());
  j.jenkins.rebuildDependencyGraph();
  List<AbstractProject> downstreamProjects=upstream.getDownstreamProjects();
  List<AbstractProject> upstreamProjects=downstream.getUpstreamProjects();
  List<AbstractProject> upstreamProjects2=downstream2.getUpstreamProjects();
  assertEquals(2,downstreamProjects.size());
  assertEquals(1,upstreamProjects.size());
  assertEquals(1,upstreamProjects2.size());
  assertTrue(upstreamProjects.contains(upstream));
  assertTrue(upstreamProjects2.contains(upstream));
  assertTrue(downstreamProjects.contains(downstream));
  assertTrue(downstreamProjects.contains(downstream2));
}
