@Test public void fingerprintDependencies() throws Exception {
  FreeStyleProject upstream=createFreeStyleProjectWithFingerprints(singleContents,singleFiles);
  FreeStyleProject downstream=createFreeStyleProjectWithFingerprints(singleContents,singleFiles);
  j.assertBuildStatusSuccess(upstream.scheduleBuild2(0).get());
  j.assertBuildStatusSuccess(downstream.scheduleBuild2(0).get());
  j.jenkins.rebuildDependencyGraph();
  List<AbstractProject> downstreamProjects=upstream.getDownstreamProjects();
  List<AbstractProject> upstreamProjects=downstream.getUpstreamProjects();
  assertEquals(1,downstreamProjects.size());
  assertEquals(1,upstreamProjects.size());
  assertTrue(upstreamProjects.contains(upstream));
  assertTrue(downstreamProjects.contains(downstream));
}
