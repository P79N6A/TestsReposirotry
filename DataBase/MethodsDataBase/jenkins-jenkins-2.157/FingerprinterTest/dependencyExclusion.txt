@Test public void dependencyExclusion() throws Exception {
  FreeStyleProject upstream=createFreeStyleProjectWithFingerprints(singleContents,singleFiles);
  FreeStyleProject downstream=createFreeStyleProjectWithFingerprints(singleContents,singleFiles);
  FreeStyleBuild upstreamBuild=j.assertBuildStatusSuccess(upstream.scheduleBuild2(0).get());
  j.assertBuildStatusSuccess(downstream.scheduleBuild2(0).get());
  upstreamBuild.delete();
  Jenkins.getInstance().rebuildDependencyGraph();
  List<AbstractProject> upstreamProjects=downstream.getUpstreamProjects();
  List<AbstractProject> downstreamProjects=upstream.getDownstreamProjects();
  assertEquals(0,upstreamProjects.size());
  assertEquals(0,downstreamProjects.size());
}
