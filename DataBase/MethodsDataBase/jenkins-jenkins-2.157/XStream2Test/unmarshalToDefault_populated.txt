@Issue("JENKINS-21017") @Test public void unmarshalToDefault_populated(){
  String populatedXml="<hudson.util.XStream2Test_-WithDefaults>\n" + "  <stringDefaultValue>my string</stringDefaultValue>\n" + "  <stringDefaultNull>not null</stringDefaultNull>\n"+ "  <arrayDefaultValue>\n"+ "    <string>1</string>\n"+ "    <string>2</string>\n"+ "    <string>3</string>\n"+ "  </arrayDefaultValue>\n"+ "  <arrayDefaultEmpty>\n"+ "    <string>1</string>\n"+ "    <string>2</string>\n"+ "    <string>3</string>\n"+ "  </arrayDefaultEmpty>\n"+ "  <arrayDefaultNull>\n"+ "    <string>1</string>\n"+ "    <string>2</string>\n"+ "    <string>3</string>\n"+ "  </arrayDefaultNull>\n"+ "  <listDefaultValue>\n"+ "    <string>1</string>\n"+ "    <string>2</string>\n"+ "    <string>3</string>\n"+ "  </listDefaultValue>\n"+ "  <listDefaultEmpty>\n"+ "    <string>1</string>\n"+ "    <string>2</string>\n"+ "    <string>3</string>\n"+ "  </listDefaultEmpty>\n"+ "  <listDefaultNull>\n"+ "    <string>1</string>\n"+ "    <string>2</string>\n"+ "    <string>3</string>\n"+ "  </listDefaultNull>\n"+ "</hudson.util.XStream2Test_-WithDefaults>";
  WithDefaults existingInstance=new WithDefaults("foobar","foobar",new String[]{"foobar","barfoo","fumanchu"},new String[]{"foobar","barfoo","fumanchu"},new String[]{"foobar","barfoo","fumanchu"},Arrays.asList("foobar","barfoo","fumanchu"),Arrays.asList("foobar","barfoo","fumanchu"),Arrays.asList("foobar","barfoo","fumanchu"));
  WithDefaults newInstance=new WithDefaults();
  String xmlA=Jenkins.XSTREAM2.toXML(fromXMLNullingOut(populatedXml,existingInstance));
  String xmlB=Jenkins.XSTREAM2.toXML(fromXMLNullingOut(populatedXml,newInstance));
  String xmlC=Jenkins.XSTREAM2.toXML(fromXMLNullingOut(populatedXml,null));
  assertThat("Deserializing over an existing instance is the same as with no root",xmlA,is(xmlC));
  assertThat("Deserializing over an new instance is the same as with no root",xmlB,is(xmlC));
}
