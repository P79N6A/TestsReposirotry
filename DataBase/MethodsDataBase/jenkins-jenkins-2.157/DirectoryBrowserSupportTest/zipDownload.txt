@Issue("JENKINS-19752") @Test public void zipDownload() throws Exception {
  FreeStyleProject p=j.createFreeStyleProject();
  p.setScm(new SingleFileSCM("artifact.out","Hello world!"));
  p.getPublishersList().add(new ArtifactArchiver("*","",true));
  assertEquals(Result.SUCCESS,p.scheduleBuild2(0).get().getResult());
  HtmlPage page=j.createWebClient().goTo("job/" + p.getName() + "/lastSuccessfulBuild/artifact/");
  Page download=page.getAnchorByHref("./*zip*/archive.zip").click();
  File zipfile=download((UnexpectedPage)download);
  ZipFile readzip=new ZipFile(zipfile);
  InputStream is=readzip.getInputStream(readzip.getEntry("archive/artifact.out"));
  assertFalse("Downloaded zip file must not be empty",is.read() == -1);
  is.close();
  readzip.close();
  zipfile.delete();
}
