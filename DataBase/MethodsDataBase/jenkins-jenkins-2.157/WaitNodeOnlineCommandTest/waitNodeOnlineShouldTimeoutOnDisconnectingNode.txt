@Test public void waitNodeOnlineShouldTimeoutOnDisconnectingNode() throws Exception {
  DumbSlave slave=j.createSlave("aNode","",null);
  slave.toComputer().disconnect();
  boolean timeoutOccurred=false;
  FutureTask task=new FutureTask(new Callable(){
    public Object call(){
      final CLICommandInvoker.Result result=command.authorizedTo(Jenkins.READ).invokeWithArgs("aNode");
      fail("Never should return from previous CLI call!");
      return null;
    }
  }
);
  try {
    task.get(30,TimeUnit.SECONDS);
  }
 catch (  TimeoutException e) {
    timeoutOccurred=true;
  }
 finally {
    task.cancel(true);
  }
  if (!timeoutOccurred)   fail("Missing timeout for CLI call");
}
