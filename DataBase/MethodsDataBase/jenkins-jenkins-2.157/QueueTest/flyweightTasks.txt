@Issue("JENKINS-8790") @Test public void flyweightTasks() throws Exception {
  MatrixProject m=r.jenkins.createProject(MatrixProject.class,"p");
  m.addProperty(new ParametersDefinitionProperty(new StringParameterDefinition("FOO","value")));
  if (Functions.isWindows()) {
    m.getBuildersList().add(new BatchFile("ping -n 3 127.0.0.1 >nul"));
  }
 else {
    m.getBuildersList().add(new Shell("sleep 3"));
  }
  m.setAxes(new AxisList(new TextAxis("DoesntMatter","aaa","bbb")));
  List<Future<MatrixBuild>> futures=new ArrayList<Future<MatrixBuild>>();
  for (int i=0; i < 3; i++) {
    futures.add(m.scheduleBuild2(0,new UserIdCause(),new ParametersAction(new StringParameterValue("FOO","value" + i))));
  }
  for (  Future<MatrixBuild> f : futures) {
    r.assertBuildStatusSuccess(f);
  }
}
