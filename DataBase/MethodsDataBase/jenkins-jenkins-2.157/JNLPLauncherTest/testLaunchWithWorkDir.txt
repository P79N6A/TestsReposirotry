/** 
 * Starts a JNLP agent and makes sure it successfully connects to Jenkins. 
 */
@Test @Issue("JENKINS-39370") public void testLaunchWithWorkDir() throws Exception {
  Assume.assumeFalse("Skipping JNLPLauncherTest.testLaunch because we are running headless",GraphicsEnvironment.isHeadless());
  File workDir=tmpDir.newFolder("workDir");
  Computer c=addTestSlave(false);
  launchJnlpAndVerify(c,buildJnlpArgs(c).add("-workDir",workDir.getAbsolutePath()));
  assertTrue("Remoting work dir should have been created",new File(workDir,"remoting").exists());
}
