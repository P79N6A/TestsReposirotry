@Test public void testAddAndGetProperty() throws Exception {
{
    User user=User.get("John Smith");
    UserProperty prop=new SomeUserProperty();
    user.addProperty(prop);
    assertNotNull("User should have SomeUserProperty property.",user.getProperty(SomeUserProperty.class));
    assertEquals("UserProperty1 should be assigned to its descriptor",prop,user.getProperties().get(prop.getDescriptor()));
    assertTrue("User should should contain SomeUserProperty.",user.getAllProperties().contains(prop));
  }
  j.jenkins.reload();
{
    assertNotNull("User should have SomeUserProperty property.",User.getById("John Smith",false).getProperty(SomeUserProperty.class));
  }
}
