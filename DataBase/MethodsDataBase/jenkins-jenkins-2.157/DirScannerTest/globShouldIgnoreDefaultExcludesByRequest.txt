@Test public void globShouldIgnoreDefaultExcludesByRequest() throws Exception {
  FilePath tmp=new FilePath(tmpRule.getRoot());
  try {
    tmp.child(".gitignore").touch(0);
    FilePath git=tmp.child(".git");
    git.mkdirs();
    git.child("HEAD").touch(0);
    DirScanner glob=new DirScanner.Glob("**/*",null,false);
    MatchingFileVisitor gitdir=new MatchingFileVisitor("HEAD");
    MatchingFileVisitor gitignore=new MatchingFileVisitor(".gitignore");
    glob.scan(new File(tmp.getRemote()),gitdir);
    glob.scan(new File(tmp.getRemote()),gitignore);
    assertTrue(gitdir.found);
    assertTrue(gitignore.found);
  }
  finally {
    tmp.deleteRecursive();
  }
}
