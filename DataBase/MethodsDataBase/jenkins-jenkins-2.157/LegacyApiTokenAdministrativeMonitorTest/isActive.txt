@Test public void isActive() throws Exception {
  ApiTokenPropertyConfiguration config=ApiTokenPropertyConfiguration.get();
  config.setCreationOfLegacyTokenEnabled(true);
  config.setTokenGenerationOnCreationEnabled(false);
  User user=User.getById("user",true);
  ApiTokenProperty apiTokenProperty=user.getProperty(ApiTokenProperty.class);
  assertFalse(apiTokenProperty.hasLegacyToken());
  LegacyApiTokenAdministrativeMonitor monitor=j.jenkins.getExtensionList(AdministrativeMonitor.class).get(LegacyApiTokenAdministrativeMonitor.class);
  assertFalse(monitor.isActivated());
  ApiTokenStore.TokenUuidAndPlainValue tokenInfo=apiTokenProperty.getTokenStore().generateNewToken("Not Legacy");
  assertFalse(monitor.isActivated());
  apiTokenProperty.getTokenStore().revokeToken(tokenInfo.tokenUuid);
  assertFalse(monitor.isActivated());
  apiTokenProperty.changeApiToken();
  assertTrue(monitor.isActivated());
}
