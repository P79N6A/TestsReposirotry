@Test public void monitorManagePageFilterAreWorking() throws Exception {
  j.jenkins.setSecurityRealm(j.createDummySecurityRealm());
  ApiTokenPropertyConfiguration config=ApiTokenPropertyConfiguration.get();
  config.setCreationOfLegacyTokenEnabled(true);
  config.setTokenGenerationOnCreationEnabled(false);
  prepareUsersForFilters();
  LegacyApiTokenAdministrativeMonitor monitor=j.jenkins.getExtensionList(AdministrativeMonitor.class).get(LegacyApiTokenAdministrativeMonitor.class);
  JenkinsRule.WebClient wc=j.createWebClient();
  HtmlPage page=wc.goTo(monitor.getUrl() + "/manage");
  checkUserWithLegacyTokenListHasSizeOf(page,1 + 2 + 3+ 4,2 + 4,3 + 4);
  HtmlElement document=page.getDocumentElement();
  HtmlElement filterDiv=document.getOneHtmlElementByAttribute("div","class","selection-panel");
  DomNodeList<HtmlElement> filters=filterDiv.getElementsByTagName("a");
  assertEquals(3,filters.size());
  HtmlAnchor filterAll=(HtmlAnchor)filters.get(0);
  HtmlAnchor filterOnlyFresh=(HtmlAnchor)filters.get(1);
  HtmlAnchor filterOnlyRecent=(HtmlAnchor)filters.get(2);
{
    checkNumberOfSelectedTr(document,0);
    HtmlElementUtil.click(filterAll);
    checkNumberOfSelectedTr(document,1 + 2 + 3+ 4);
    HtmlElementUtil.click(filterAll);
    checkNumberOfSelectedTr(document,0);
  }
{
    HtmlElementUtil.click(filterOnlyFresh);
    checkNumberOfSelectedTr(document,2 + 4);
    HtmlElementUtil.click(filterOnlyFresh);
    checkNumberOfSelectedTr(document,0);
  }
{
    HtmlElementUtil.click(filterOnlyRecent);
    checkNumberOfSelectedTr(document,3 + 4);
    HtmlElementUtil.click(filterOnlyRecent);
    checkNumberOfSelectedTr(document,0);
  }
{
    HtmlElementUtil.click(filterOnlyFresh);
    checkNumberOfSelectedTr(document,2 + 4);
    HtmlElementUtil.click(filterOnlyRecent);
    checkNumberOfSelectedTr(document,3 + 4);
    HtmlElementUtil.click(filterAll);
    checkNumberOfSelectedTr(document,1 + 2 + 3+ 4);
  }
}
