@Test public void xstreamRequiresWhitelist() throws Exception {
  assumeThat(ClassFilterImpl.WHITELISTED_CLASSES,not(contains(LinkedListMultimap.class.getName())));
  Config config=GlobalConfiguration.all().get(Config.class);
  config.save();
  config.obj=LinkedListMultimap.create();
  config.save();
  assertThat(config.getConfigFile().asString(),not(containsString("LinkedListMultimap")));
  config.unrelated="modified";
  FileUtils.write(config.getConfigFile().getFile(),new XStream().toXML(config));
  assertThat(config.getConfigFile().asString(),allOf(containsString("LinkedListMultimap"),containsString("modified")));
  config.obj=null;
  config.unrelated=null;
  config.load();
  assertNull(config.obj);
  assertEquals("modified",config.unrelated);
  Map<Saveable,OldDataMonitor.VersionRange> data=ExtensionList.lookupSingleton(OldDataMonitor.class).getData();
  assertEquals(Collections.singleton(config),data.keySet());
  assertThat(data.values().iterator().next().extra,allOf(containsString("LinkedListMultimap"),containsString("https://jenkins.io/redirect/class-filter/")));
}
