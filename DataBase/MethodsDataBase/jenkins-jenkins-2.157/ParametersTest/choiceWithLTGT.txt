@Test public void choiceWithLTGT() throws Exception {
  FreeStyleProject project=j.createFreeStyleProject();
  ParametersDefinitionProperty pdp=new ParametersDefinitionProperty(new ChoiceParameterDefinition("choice","Choice 1\nChoice <2>","choice description"));
  project.addProperty(pdp);
  CaptureEnvironmentBuilder builder=new CaptureEnvironmentBuilder();
  project.getBuildersList().add(builder);
  WebClient wc=j.createWebClient();
  wc.getOptions().setThrowExceptionOnFailingStatusCode(false);
  HtmlPage page=wc.goTo("job/" + project.getName() + "/build?delay=0sec");
  HtmlForm form=page.getFormByName("parameters");
  HtmlElement element=(HtmlElement)DomNodeUtil.selectSingleNode(form,".//tr[td/div/input/@value='choice']");
  assertNotNull(element);
  assertEquals("choice description",((HtmlElement)DomNodeUtil.selectSingleNode(element.getNextSibling().getNextSibling(),"td[@class='setting-description']")).getTextContent());
  assertEquals("choice",((HtmlElement)DomNodeUtil.selectSingleNode(element,"td[@class='setting-name']")).getTextContent());
  HtmlOption opt=(HtmlOption)DomNodeUtil.selectSingleNode(element,"td/div/select/option[@value='Choice <2>']");
  assertNotNull(opt);
  assertEquals("Choice <2>",opt.asText());
  opt.setSelected(true);
  j.submit(form);
  Queue.Item q=j.jenkins.getQueue().getItem(project);
  if (q != null)   q.getFuture().get();
 else   Thread.sleep(1000);
  assertNotNull(builder.getEnvVars());
  assertEquals("Choice <2>",builder.getEnvVars().get("CHOICE"));
}
