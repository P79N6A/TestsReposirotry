/** 
 * Job is restricted, but label can not be provided by any cloud, only normal slaves. Then job will not submit, because no slave is available.
 * @throws Exception
 */
@Test public void testUnrestrictedJobNoLabelByCloudNoQueue() throws Exception {
  assertTrue(j.jenkins.clouds.isEmpty());
  Slave s1=j.createOnlineSlave();
  FreeStyleProject proj=j.createFreeStyleProject("JENKINS-21394-noqueue");
  proj.setAssignedLabel(s1.getSelfLabel());
  RequiresWorkspaceSCM requiresWorkspaceScm=new RequiresWorkspaceSCM(true);
  proj.setScm(requiresWorkspaceScm);
  j.buildAndAssertSuccess(proj);
  Slave s2=j.createSlave();
  proj.setAssignedLabel(s2.getSelfLabel());
  requiresWorkspaceScm.hasChange=true;
  PollingResult pr=proj.poll(j.createTaskListener());
  assertFalse(pr.hasChanges());
  SCMTrigger t=new SCMTrigger("@daily",true);
  t.start(proj,true);
  proj.addTrigger(t);
  t.new Runner().run();
  HtmlPage log=j.createWebClient().getPage(proj,"scmPollLog");
  String logastext=log.asText();
  assertTrue(logastext.contains("(" + AbstractProject.WorkspaceOfflineReason.all_suitable_nodes_are_offline.name() + ")"));
}
