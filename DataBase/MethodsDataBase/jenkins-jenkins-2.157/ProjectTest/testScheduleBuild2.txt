@Test public void testScheduleBuild2() throws IOException, InterruptedException {
  FreeStyleProject p=j.createFreeStyleProject("project");
  p.setAssignedLabel(j.jenkins.getLabel("nonExist"));
  p.scheduleBuild(0,new LegacyCodeCause(),new Action[0]);
  assertNotNull("Project should be in queue.",Queue.getInstance().getItem(p));
  p.setAssignedLabel(null);
  int count=0;
  while (count < 5 && p.getLastBuild() == null) {
    Thread.sleep(1000);
    count++;
  }
  assertNotNull("Build should be done or in progress.",p.getLastBuild());
}
