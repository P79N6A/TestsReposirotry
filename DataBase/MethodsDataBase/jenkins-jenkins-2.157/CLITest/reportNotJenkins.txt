@Test @Issue("JENKINS-44361") public void reportNotJenkins() throws Exception {
  home=tempHome();
  grabCliJar();
  String url=r.getURL().toExternalForm() + "not-jenkins/";
  for (  String transport : Arrays.asList("-remoting","-http","-ssh")) {
    ByteArrayOutputStream baos=new ByteArrayOutputStream();
    int ret=new Launcher.LocalLauncher(StreamTaskListener.fromStderr()).launch().cmds("java","-Duser.home=" + home,"-jar",jar.getAbsolutePath(),"-s",url,transport,"-user","asdf","who-am-i").stdout(baos).stderr(baos).join();
    assertThat(baos.toString(),containsString("There's no Jenkins running at"));
    assertNotEquals(0,ret);
  }
}
