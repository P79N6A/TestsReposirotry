@Issue("JENKINS-41745") @Test public void strictHostKey() throws Exception {
  home=tempHome();
  grabCliJar();
  r.jenkins.setSecurityRealm(r.createDummySecurityRealm());
  r.jenkins.setAuthorizationStrategy(new MockAuthorizationStrategy().grant(Jenkins.ADMINISTER).everywhere().to("admin"));
  SSHD.get().setPort(0);
  File privkey=tmp.newFile("id_rsa");
  FileUtils.copyURLToFile(CLITest.class.getResource("id_rsa"),privkey);
  User.get("admin").addProperty(new UserPropertyImpl(IOUtils.toString(CLITest.class.getResource("id_rsa.pub"))));
  assertNotEquals(0,new Launcher.LocalLauncher(StreamTaskListener.fromStderr()).launch().cmds("java","-Duser.home=" + home,"-jar",jar.getAbsolutePath(),"-s",r.getURL().toString(),"-ssh","-user","admin","-i",privkey.getAbsolutePath(),"-strictHostKey","who-am-i").stdout(System.out).stderr(System.err).join());
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  assertEquals(0,new Launcher.LocalLauncher(StreamTaskListener.fromStderr()).launch().cmds("java","-Duser.home=" + home,"-jar",jar.getAbsolutePath(),"-s",r.getURL().toString(),"-ssh","-user","admin","-i",privkey.getAbsolutePath(),"-logger","FINEST","who-am-i").stdout(baos).stderr(System.err).join());
  assertThat(baos.toString(),containsString("Authenticated as: admin"));
  baos=new ByteArrayOutputStream();
  assertEquals(0,new Launcher.LocalLauncher(StreamTaskListener.fromStderr()).launch().cmds("java","-Duser.home=" + home,"-jar",jar.getAbsolutePath(),"-s",r.getURL().toString().replaceFirst("/$",""),"-ssh","-user","admin","-i",privkey.getAbsolutePath(),"-strictHostKey","who-am-i").stdout(baos).stderr(System.err).join());
  assertThat(baos.toString(),containsString("Authenticated as: admin"));
}
