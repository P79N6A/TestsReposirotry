@Test @Issue("SECURITY-170") public void undefinedParametersOverride() throws Exception {
  FreeStyleProject p=j.createFreeStyleProject();
  p.addProperty(new ParametersDefinitionProperty(Arrays.asList(new ParameterDefinition[]{new StringParameterDefinition("foo","foo"),new StringParameterDefinition("bar","bar")})));
  ParametersCheckBuilder b=new ParametersCheckBuilder(true);
  p.getBuildersList().add(b);
  p.save();
  try {
    System.setProperty(ParametersAction.KEEP_UNDEFINED_PARAMETERS_SYSTEM_PROPERTY_NAME,"true");
    j.assertBuildStatusSuccess(p.scheduleBuild2(0,new Cause.UserIdCause(),new ParametersAction(new StringParameterValue("foo","baz"),new StringParameterValue("undef","undef"))));
  }
  finally {
    System.clearProperty(ParametersAction.KEEP_UNDEFINED_PARAMETERS_SYSTEM_PROPERTY_NAME);
  }
}
