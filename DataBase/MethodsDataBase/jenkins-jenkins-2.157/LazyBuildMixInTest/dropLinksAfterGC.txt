@Issue("JENKINS-22395") @Test public void dropLinksAfterGC() throws Exception {
  RunListener.all().clear();
  FreeStyleProject p=r.createFreeStyleProject();
  FreeStyleBuild b1=r.buildAndAssertSuccess(p);
  FreeStyleBuild b2=r.buildAndAssertSuccess(p);
  FreeStyleBuild b3=r.buildAndAssertSuccess(p);
  assertEquals(b2,b1.getNextBuild());
  assertEquals(b3,b2.getNextBuild());
  assertEquals(null,b3.getNextBuild());
  assertEquals(null,b1.getPreviousBuild());
  assertEquals(b1,b2.getPreviousBuild());
  assertEquals(b2,b3.getPreviousBuild());
  b1.getRunMixIn().createReference().clear();
  b2.delete();
  FreeStyleBuild b1a=b2.getPreviousBuild();
  assertNotSame(b1,b1a);
  assertEquals(1,b1a.getNumber());
  assertEquals(b3,b1a.getNextBuild());
}
