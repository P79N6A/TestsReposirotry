@Test public void updateViewWithWrongViewTypeShouldFail() throws Exception {
  TreeView tv=new TreeView("aView");
  j.jenkins.addView(tv);
  final CLICommandInvoker.Result result=command.authorizedTo(View.READ,View.CONFIGURE,Jenkins.READ).withStdin(this.getClass().getResourceAsStream("/hudson/cli/view.xml")).invokeWithArgs("aView");
  assertThat(result,failedWith(1));
  assertThat(result.stderr(),containsString("Expecting view type: " + tv.getClass() + " but got: class hudson.model.ListView instead."));
}
