@Test @Issue("JENKINS-20989") public void allDownstreamProjectsShouldObserveCompletedParent() throws Exception {
  j.jenkins.setNumExecutors(3);
  final FreeStyleProject us=j.createFreeStyleProject();
  us.getPublishersList().add(new SlowTrigger("downstream,downstream2"));
  FreeStyleProject ds=createDownstreamProject();
  ds.getBuildersList().add(new AssertTriggerBuildCompleted(us,j.createWebClient()));
  FreeStyleProject ds2=j.createFreeStyleProject("downstream2");
  ds2.setQuietPeriod(0);
  ds2.getBuildersList().add(new AssertTriggerBuildCompleted(us,j.createWebClient()));
  j.jenkins.rebuildDependencyGraph();
  FreeStyleBuild upstream=j.buildAndAssertSuccess(us);
  FreeStyleBuild dsb=assertDownstreamBuild(ds,upstream);
  j.waitForCompletion(dsb);
  j.assertBuildStatusSuccess(dsb);
  dsb=assertDownstreamBuild(ds2,upstream);
  j.waitForCompletion(dsb);
  j.assertBuildStatusSuccess(dsb);
}
