@Test @Issue("JENKINS-48761") public void shouldBeAbleToConnectAgentWithMinimalSupportedVersion() throws Exception {
  Label agentLabel=new LabelAtom("old-agent");
  Slave agent=j.createOnlineSlave(agentLabel);
  boolean isUnix=agent.getComputer().isUnix();
  assertThat("Received wrong agent version. A minimal supported version is expected",agent.getComputer().getSlaveVersion(),equalTo(RemotingVersionInfo.getMinimumSupportedVersion().toString()));
  FreeStyleProject project=j.createFreeStyleProject("foo");
  project.setAssignedLabel(agentLabel);
  project.getBuildersList().add(isUnix ? new Shell("echo Hello") : new BatchFile("echo 'hello'"));
  j.buildAndAssertSuccess(project);
  NodeMonitorAssert.assertMonitors(NodeMonitor.getAll(),agent.getComputer());
}
