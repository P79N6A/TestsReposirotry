/** 
 * Custom workspace and variable expansion.
 */
@Test @Issue("JENKINS-3997") public void customWorkspaceVariableExpansion() throws Exception {
  FreeStyleProject f=j.createFreeStyleProject();
  File d=new File(j.createTmpDir(),"${JOB_NAME}");
  f.setCustomWorkspace(d.getPath());
  FreeStyleBuild b=j.buildAndAssertSuccess(f);
  String path=b.getWorkspace().getRemote();
  System.out.println(path);
  assertFalse(path.contains("${JOB_NAME}"));
  assertEquals(b.getWorkspace().getName(),f.getName());
}
