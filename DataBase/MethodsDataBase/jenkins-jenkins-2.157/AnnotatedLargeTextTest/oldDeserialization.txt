@Issue("SECURITY-382") @Test public void oldDeserialization() throws Exception {
  ByteBuffer buf=new ByteBuffer();
  buf.write(("hello" + ConsoleNote.PREAMBLE_STR + "AAAAwR+LCAAAAAAAAP9dzLEOwVAUxvHThtiNprYxsGiMQhiwNSIhMR/tSZXr3Lr3oJPwPt7FM5hM3gFh8i3/5Bt+1yeUrYH6ap9Yza1Ys9WKWuMiR05wqWhEgpmyEy306Jxvwb19ccGNoBJjLplmgWq0xgOGCjkNZ2IyTrsRlFayVTs4gVMYqP3pw28/JnznuABF/rYWyIyeJfLQe1vxZiDQ7NnYZLn0UZGRRjA9MiV+0OyFv3+utadQyH8B+aJxVM4AAAA="+ ConsoleNote.POSTAMBLE_STR+ "there\n").getBytes());
  AnnotatedLargeText<Void> text=new AnnotatedLargeText<>(buf,Charsets.UTF_8,true,null);
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  text.writeLogTo(0,baos);
  assertEquals("hellothere\n",baos.toString());
  StringWriter w=new StringWriter();
  text.writeHtmlTo(0,w);
  assertEquals("hellothere\n",w.toString());
  assertThat(logging.getMessages(),hasItem("Failed to resurrect annotation"));
  ConsoleNote.INSECURE=true;
  try {
    w=new StringWriter();
    text.writeHtmlTo(0,w);
    assertThat(w.toString(),containsString("<script>"));
  }
  finally {
    ConsoleNote.INSECURE=false;
  }
}
