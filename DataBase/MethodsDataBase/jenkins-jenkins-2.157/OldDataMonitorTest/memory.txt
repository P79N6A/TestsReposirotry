@Issue("JENKINS-19544") @Test public void memory() throws Exception {
  FreeStyleProject p=r.createFreeStyleProject("p");
  FreeStyleBuild b=r.assertBuildStatusSuccess(p.scheduleBuild2(0));
  b.addAction(new BadAction2());
  b.save();
  r.jenkins.getQueue().clearLeftItems();
  p._getRuns().purgeCache();
  b=p.getBuildByNumber(1);
  assertEquals(Collections.singleton(b),OldDataMonitor.get(r.jenkins).getData().keySet());
  WeakReference<?> ref=new WeakReference<Object>(b);
  b=null;
  MemoryAssert.assertGC(ref);
}
