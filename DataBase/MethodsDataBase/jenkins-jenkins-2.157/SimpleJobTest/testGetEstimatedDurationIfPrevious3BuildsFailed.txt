@Test public void testGetEstimatedDurationIfPrevious3BuildsFailed() throws IOException {
  final SortedMap<Integer,TestBuild> runs=new TreeMap<Integer,TestBuild>();
  Job project=createMockProject(runs);
  TestBuild prev5Build=new TestBuild(project,Result.UNSTABLE,1,null);
  runs.put(6,prev5Build);
  TestBuild prev4Build=new TestBuild(project,Result.SUCCESS,1,prev5Build);
  runs.put(5,prev4Build);
  TestBuild prev3Build=new TestBuild(project,Result.SUCCESS,1,prev4Build);
  runs.put(4,prev3Build);
  TestBuild previous2Build=new TestBuild(project,Result.FAILURE,50,prev3Build);
  runs.put(3,previous2Build);
  TestBuild previousBuild=new TestBuild(project,Result.FAILURE,50,previous2Build);
  runs.put(2,previousBuild);
  TestBuild lastBuild=new TestBuild(project,Result.FAILURE,50,previousBuild);
  runs.put(1,lastBuild);
  assertEquals(1,project.getEstimatedDuration());
}
