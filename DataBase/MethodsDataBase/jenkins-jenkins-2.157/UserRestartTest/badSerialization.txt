@Issue("JENKINS-45892") @Test public void badSerialization(){
  rr.then(r -> {
    r.jenkins.setSecurityRealm(r.createDummySecurityRealm());
    FreeStyleProject p=r.createFreeStyleProject("p");
    User u=User.get("pqhacker");
    u.setFullName("Pat Q. Hacker");
    u.save();
    p.addProperty(new BadProperty(u));
    String text=p.getConfigFile().asString();
    assertThat(text,not(containsString("<fullName>Pat Q. Hacker</fullName>")));
    assertThat(text,containsString("<id>pqhacker</id>"));
  }
);
  rr.then(r -> {
    FreeStyleProject p=r.jenkins.getItemByFullName("p",FreeStyleProject.class);
    User u=p.getProperty(BadProperty.class).user;
    assertEquals(User.get("pqhacker"),u);
  }
);
}
