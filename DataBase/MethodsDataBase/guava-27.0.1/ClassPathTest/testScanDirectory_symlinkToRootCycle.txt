@AndroidIncompatible public void testScanDirectory_symlinkToRootCycle() throws IOException {
  ClassLoader loader=ClassPathTest.class.getClassLoader();
  java.nio.file.Path root=createTempDirectory("ClassPathTest");
  try {
    createFile(root.resolve("some.txt"));
    java.nio.file.Path child=createDirectory(root.resolve("child"));
    createSymbolicLink(child.resolve("grandchild"),root);
    ClassPath.DefaultScanner scanner=new ClassPath.DefaultScanner();
    scanner.scan(root.toFile(),loader);
    assertEquals(ImmutableSet.of(new ResourceInfo("some.txt",loader)),scanner.getResources());
  }
  finally {
    deleteRecursivelyOrLog(root);
  }
}
