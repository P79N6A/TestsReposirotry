public void testGetClassPathUrls() throws Exception {
  String oldPathSeparator=PATH_SEPARATOR.value();
  String oldClassPath=JAVA_CLASS_PATH.value();
  System.setProperty(PATH_SEPARATOR.key(),":");
  System.setProperty(JAVA_CLASS_PATH.key(),Joiner.on(":").join("relative/path/to/some.jar","/absolute/path/to/some.jar","relative/path/to/class/root","/absolute/path/to/class/root"));
  try {
    ImmutableList<URL> urls=ClassPath.Scanner.parseJavaClassPath();
    assertThat(urls.get(0).getProtocol()).isEqualTo("file");
    assertThat(urls.get(0).getAuthority()).isNull();
    assertThat(urls.get(0).getPath()).endsWith("/relative/path/to/some.jar");
    assertThat(urls.get(1)).isEqualTo(new URL("file:///absolute/path/to/some.jar"));
    assertThat(urls.get(2).getProtocol()).isEqualTo("file");
    assertThat(urls.get(2).getAuthority()).isNull();
    assertThat(urls.get(2).getPath()).endsWith("/relative/path/to/class/root");
    assertThat(urls.get(3)).isEqualTo(new URL("file:///absolute/path/to/class/root"));
    assertThat(urls).hasSize(4);
  }
  finally {
    System.setProperty(PATH_SEPARATOR.key(),oldPathSeparator);
    System.setProperty(JAVA_CLASS_PATH.key(),oldClassPath);
  }
}
