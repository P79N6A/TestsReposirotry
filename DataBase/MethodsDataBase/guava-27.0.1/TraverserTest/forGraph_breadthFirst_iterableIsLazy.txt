/** 
 * Checks that the elements of the iterable are calculated on the fly. Concretely, that means that {@link SuccessorsFunction#successors(Object)} can only be called for a subset of all nodes.
 */
@Test public void forGraph_breadthFirst_iterableIsLazy(){
  RequestSavingGraph graph=new RequestSavingGraph(DIAMOND_GRAPH);
  Iterable<Character> result=Traverser.forGraph(graph).breadthFirst('a');
  assertEqualCharNodes(Iterables.limit(result,2),"ab");
  assertThat(graph.requestedNodes).containsExactly('a','a','b');
  assertEqualCharNodes(Iterables.limit(result,2),"ab");
  assertThat(graph.requestedNodes).containsExactly('a','a','a','b','b');
}
