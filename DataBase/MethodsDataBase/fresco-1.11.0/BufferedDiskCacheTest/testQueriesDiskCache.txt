@Test public void testQueriesDiskCache() throws Exception {
  when(mFileCache.getResource(eq(mCacheKey))).thenReturn(mBinaryResource);
  Task<EncodedImage> readTask=mBufferedDiskCache.get(mCacheKey,mIsCancelled);
  mReadPriorityExecutor.runUntilIdle();
  verify(mFileCache).getResource(eq(mCacheKey));
  EncodedImage result=readTask.getResult();
  assertEquals(2,result.getByteBufferRef().getUnderlyingReferenceTestOnly().getRefCountTestOnly());
  assertSame(mPooledByteBuffer,result.getByteBufferRef().get());
}
