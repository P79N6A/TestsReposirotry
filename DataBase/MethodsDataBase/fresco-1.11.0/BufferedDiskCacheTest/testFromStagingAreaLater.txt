@Test public void testFromStagingAreaLater() throws Exception {
  Task<EncodedImage> readTask=mBufferedDiskCache.get(mCacheKey,mIsCancelled);
  assertFalse(readTask.isCompleted());
  when(mStagingArea.get(mCacheKey)).thenReturn(mEncodedImage);
  mReadPriorityExecutor.runUntilIdle();
  EncodedImage result=readTask.getResult();
  assertSame(result,mEncodedImage);
  verify(mFileCache,never()).getResource(eq(mCacheKey));
  assertEquals(3,result.getByteBufferRef().getUnderlyingReferenceTestOnly().getRefCountTestOnly());
}
