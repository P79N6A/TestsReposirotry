@Test(expected=TooManyBitmapsException.class) public void testHitBitmapLimit_static(){
  assumeNotNull(mKitKatPurgeableDecoder);
  mBitmapCounter.increase(MockBitmapFactory.createForSize(MAX_BITMAP_SIZE,DEFAULT_BITMAP_CONFIG));
  try {
    mKitKatPurgeableDecoder.decodeFromEncodedImage(mEncodedImage,DEFAULT_BITMAP_CONFIG,null);
  }
  finally {
    verify(mBitmap).recycle();
    assertEquals(1,mBitmapCounter.getCount());
    assertEquals(MAX_BITMAP_SIZE,mBitmapCounter.getSize());
  }
}
