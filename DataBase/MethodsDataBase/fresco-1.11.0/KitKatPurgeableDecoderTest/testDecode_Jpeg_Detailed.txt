@Test public void testDecode_Jpeg_Detailed(){
  assumeNotNull(mKitKatPurgeableDecoder);
  setUpJpegDecode();
  CloseableReference<Bitmap> result=mKitKatPurgeableDecoder.decodeJPEGFromEncodedImage(mEncodedImage,DEFAULT_BITMAP_CONFIG,null,IMAGE_SIZE);
  verify(mFlexByteArrayPool).get(IMAGE_SIZE + 2);
  verifyStatic();
  BitmapFactory.decodeByteArray(same(mDecodeBuf),eq(0),eq(IMAGE_SIZE),argThat(new BitmapFactoryOptionsMatcher()));
  assertEquals(2,mByteBufferRef.getUnderlyingReferenceTestOnly().getRefCountTestOnly());
  assertEquals(mBitmap,result.get());
  assertTrue(result.isValid());
  assertEquals(1,mBitmapCounter.getCount());
  assertEquals(MockBitmapFactory.DEFAULT_BITMAP_SIZE,mBitmapCounter.getSize());
}
