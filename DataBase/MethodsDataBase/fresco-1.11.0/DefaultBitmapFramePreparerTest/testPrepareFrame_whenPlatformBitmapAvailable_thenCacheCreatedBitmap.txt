@Test public void testPrepareFrame_whenPlatformBitmapAvailable_thenCacheCreatedBitmap(){
  when(mPlatformBitmapFactory.createBitmap(BACKEND_INTRINSIC_WIDTH,BACKEND_INTRINSIC_HEIGHT,BITMAP_CONFIG)).thenReturn(mBitmapReference);
  when(mBitmapFrameRenderer.renderFrame(1,mBitmap)).thenReturn(true);
  mDefaultBitmapFramePreparer.prepareFrame(mBitmapFrameCache,mAnimationBackend,1);
  mExecutorService.getScheduledQueue().runNextPendingCommand();
  verify(mBitmapFrameCache,times(2)).contains(1);
  verify(mBitmapFrameCache).getBitmapToReuseForFrame(1,BACKEND_INTRINSIC_WIDTH,BACKEND_INTRINSIC_HEIGHT);
  verify(mPlatformBitmapFactory).createBitmap(BACKEND_INTRINSIC_WIDTH,BACKEND_INTRINSIC_HEIGHT,BITMAP_CONFIG);
  verify(mBitmapFrameRenderer).renderFrame(1,mBitmap);
  verify(mBitmapFrameCache).onFramePrepared(1,mBitmapReference,BitmapAnimationBackend.FRAME_TYPE_CREATED);
  verifyNoMoreInteractions(mPlatformBitmapFactory);
}
