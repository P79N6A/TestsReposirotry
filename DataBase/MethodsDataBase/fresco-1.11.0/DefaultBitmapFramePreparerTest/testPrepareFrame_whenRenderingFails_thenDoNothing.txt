@Test public void testPrepareFrame_whenRenderingFails_thenDoNothing(){
  when(mBitmapFrameCache.getBitmapToReuseForFrame(1,BACKEND_INTRINSIC_WIDTH,BACKEND_INTRINSIC_HEIGHT)).thenReturn(mBitmapReference);
  when(mPlatformBitmapFactory.createBitmap(BACKEND_INTRINSIC_WIDTH,BACKEND_INTRINSIC_HEIGHT,BITMAP_CONFIG)).thenReturn(mBitmapReference);
  when(mBitmapFrameRenderer.renderFrame(1,mBitmap)).thenReturn(false);
  mDefaultBitmapFramePreparer.prepareFrame(mBitmapFrameCache,mAnimationBackend,1);
  mExecutorService.getScheduledQueue().runNextPendingCommand();
  verify(mBitmapFrameCache,times(2)).contains(1);
  verify(mBitmapFrameCache).getBitmapToReuseForFrame(1,BACKEND_INTRINSIC_WIDTH,BACKEND_INTRINSIC_HEIGHT);
  verify(mPlatformBitmapFactory).createBitmap(BACKEND_INTRINSIC_WIDTH,BACKEND_INTRINSIC_HEIGHT,BITMAP_CONFIG);
  verify(mBitmapFrameRenderer,times(2)).renderFrame(1,mBitmap);
  verifyNoMoreInteractions(mBitmapFrameCache);
}
