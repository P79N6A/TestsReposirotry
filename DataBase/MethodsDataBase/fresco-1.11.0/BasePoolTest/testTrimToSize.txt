@Test public void testTrimToSize() throws Exception {
  mPool=new TestPool(100,100,makeBucketSizeArray(2,2,4,2,6,2));
  mStats.setPool(mPool);
  byte[] b1;
  mPool.get(2);
  b1=mPool.get(2);
  mPool.release(b1);
  b1=mPool.get(6);
  mPool.release(b1);
  b1=mPool.get(4);
  mPool.release(b1);
  mStats.refresh();
  Assert.assertEquals(12,mStats.mFreeBytes);
  Assert.assertEquals(2,mStats.mUsedBytes);
  mPool.trimToSize(100);
  mStats.refresh();
  Assert.assertEquals(12,mStats.mFreeBytes);
  Assert.assertEquals(2,mStats.mUsedBytes);
  mPool.trimToSize(8);
  mStats.refresh();
  Assert.assertEquals(6,mStats.mFreeBytes);
  Assert.assertEquals(2,mStats.mUsedBytes);
  Assert.assertEquals(ImmutableMap.of(2,new IntPair(1,0),4,new IntPair(0,0),6,new IntPair(0,1)),mStats.mBucketStats);
  mPool.trimToSize(1);
  mStats.refresh();
  Assert.assertEquals(0,mStats.mFreeBytes);
  Assert.assertEquals(2,mStats.mUsedBytes);
  Assert.assertEquals(ImmutableMap.of(2,new IntPair(1,0),4,new IntPair(0,0),6,new IntPair(0,0)),mStats.mBucketStats);
}
