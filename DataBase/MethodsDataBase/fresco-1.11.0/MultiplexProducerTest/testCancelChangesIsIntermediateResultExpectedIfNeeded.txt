@Test public void testCancelChangesIsIntermediateResultExpectedIfNeeded(){
  mProducerContext1.setIsIntermediateResultExpected(true);
  mProducerContext2.setIsIntermediateResultExpected(false);
  mMultiplexProducer.produceResults(mConsumer1,mProducerContext1);
  mMultiplexProducer.produceResults(mConsumer1,mProducerContext2);
  assertTrue(mMultiplexedContext1.isIntermediateResultExpected());
  ProducerContextCallbacks callbacks=mock(ProducerContextCallbacks.class);
  mMultiplexedContext1.addCallbacks(callbacks);
  mProducerContext1.cancel();
  assertFalse(mMultiplexedContext1.isIntermediateResultExpected());
  verify(callbacks).onIsIntermediateResultExpectedChanged();
}
