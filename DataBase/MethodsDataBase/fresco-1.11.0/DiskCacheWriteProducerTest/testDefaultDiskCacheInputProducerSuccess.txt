@Test public void testDefaultDiskCacheInputProducerSuccess(){
  setupInputProducerSuccess();
  mDiskCacheWriteProducer.produceResults(mConsumer,mProducerContext);
  verify(mDefaultBufferedDiskCache,never()).put(mCacheKey,mIntermediateEncodedImage);
  ArgumentCaptor<EncodedImage> argumentCaptor=ArgumentCaptor.forClass(EncodedImage.class);
  verify(mDefaultBufferedDiskCache).put(eq(mCacheKey),argumentCaptor.capture());
  EncodedImage encodedImage=argumentCaptor.getValue();
  assertSame(encodedImage.getByteBufferRef().getUnderlyingReferenceTestOnly(),mFinalImageReference.getUnderlyingReferenceTestOnly());
  verify(mConsumer).onNewResult(mIntermediateEncodedImage,Consumer.NO_FLAGS);
  verify(mConsumer).onNewResult(mFinalEncodedImage,Consumer.IS_LAST);
  verifyZeroInteractions(mProducerListener);
}
