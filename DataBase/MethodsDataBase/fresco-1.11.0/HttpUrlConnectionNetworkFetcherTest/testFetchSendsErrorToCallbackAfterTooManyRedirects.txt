@Test public void testFetchSendsErrorToCallbackAfterTooManyRedirects() throws IOException {
  mockRedirectTo(HTTPS_URL);
  mockRedirectTo(INITIAL_TEST_URL);
  mockRedirectTo(HTTPS_URL);
  mockRedirectTo(INITIAL_TEST_URL);
  mockRedirectTo(HTTPS_URL);
  mockRedirectTo(INITIAL_TEST_URL);
  HttpURLConnection mockResponseAfterSixRedirects=mockSuccess();
  runFetch();
  verify(mMockCallback).onFailure(any(IOException.class));
  verifyZeroInteractions(mockResponseAfterSixRedirects);
  verifyNoMoreInteractions(mMockCallback);
}
