@Test public void testHttpUrlConnectionTimeout() throws Exception {
  URL mockURL=PowerMockito.mock(URL.class);
  HttpURLConnection mockConnection=PowerMockito.mock(HttpURLConnection.class);
  mockConnection.setConnectTimeout(30000);
  PowerMockito.when(mockURL.openConnection()).thenReturn(mockConnection);
  SocketTimeoutException expectedException=new SocketTimeoutException();
  PowerMockito.when(mockConnection.getResponseCode()).thenThrow(expectedException);
  verify(mockConnection).setConnectTimeout(30000);
}
