@Test public void testFetchSendsSuccessToCallbackAfterRedirect() throws IOException {
  HttpURLConnection mockRedirect=mockRedirectTo(HTTPS_URL);
  InputStream mockInputStream=mock(InputStream.class);
  HttpURLConnection mockRedirectedConnection=mockSuccessWithStream(mockInputStream);
  runFetch();
  verify(mockRedirect).disconnect();
  InOrder inOrder=inOrder(mMockCallback,mockRedirectedConnection);
  inOrder.verify(mMockCallback).onResponse(mockInputStream,-1);
  inOrder.verify(mockRedirectedConnection).disconnect();
  verifyNoMoreInteractions(mMockCallback);
}
