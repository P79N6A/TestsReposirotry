/** 
 * Tests that an existing directory is nuked when it's not current version (doens't have the version directory used for the structure)
 * @throws Exception
 */
@Test public void testDirectoryIsNuked() throws Exception {
  Assert.assertEquals(0,mDirectory.listFiles().length);
  Assert.assertTrue(new File(mDirectory,"something-arbitrary").createNewFile());
  long lastModified=mDirectory.lastModified() - 1000;
  Assert.assertTrue(mDirectory.setLastModified(lastModified));
  Assert.assertEquals(lastModified,mDirectory.lastModified());
  getStorageSupplier(1).get();
  Assert.assertTrue(mDirectory.exists());
  Assert.assertTrue(lastModified < mDirectory.lastModified());
}
