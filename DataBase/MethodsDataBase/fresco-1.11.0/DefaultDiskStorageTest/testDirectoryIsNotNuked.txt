/** 
 * Tests that an existing directory is not nuked if the version directory used for the structure exists (so it's current version and doesn't suffer Samsung RFS problem)
 * @throws Exception
 */
@Test public void testDirectoryIsNotNuked() throws Exception {
  Assert.assertEquals(0,mDirectory.listFiles().length);
  final DefaultDiskStorage storage=getStorageSupplier(1).get();
  final String resourceId="file1";
  final byte[] CONTENT="content".getBytes("UTF-8");
  DiskStorage.Inserter inserter=storage.insert(resourceId,null);
  writeToResource(inserter,CONTENT);
  inserter.commit(null);
  long lastModified=mDirectory.lastModified() - 1000;
  Assert.assertTrue(mDirectory.setLastModified(lastModified));
  Assert.assertEquals(lastModified,mDirectory.lastModified());
  getStorageSupplier(1).get();
  Assert.assertTrue(mDirectory.exists());
  Assert.assertEquals(lastModified,mDirectory.lastModified());
}
