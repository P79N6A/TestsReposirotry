@Test public void testBasicOperations() throws Exception {
  DefaultDiskStorage storage=getStorageSupplier(1).get();
  final String resourceId1="R1";
  final String resourceId2="R2";
  BinaryResource resource1=storage.getResource(resourceId1,null);
  Assert.assertNull(resource1);
  byte[] key1Contents=new byte[]{0,1,2};
  writeToStorage(storage,resourceId1,key1Contents);
  resource1=storage.getResource(resourceId1,null);
  Assert.assertNotNull(resource1);
  File underlyingFile=((FileBinaryResource)resource1).getFile();
  Assert.assertArrayEquals(key1Contents,Files.toByteArray(underlyingFile));
  Assert.assertTrue(underlyingFile.delete());
  resource1=storage.getResource(resourceId1,null);
  Assert.assertNull(resource1);
  BinaryResource resource2=storage.getResource(resourceId2,null);
  Assert.assertNull(resource2);
}
