@Test public void testTempFileEviction() throws IOException {
  when(mClock.now()).thenReturn(TimeUnit.DAYS.toMillis(1000));
  DefaultDiskStorage storage=getStorageSupplier(1).get();
  final String resourceId1="resource1";
  DiskStorage.Inserter inserter=storage.insert(resourceId1,null);
  final File tempFile=((DefaultDiskStorage.InserterImpl)inserter).mTemporaryFile;
  purgeUnexpectedFiles(storage);
  assertTrue(tempFile.exists());
  if (!tempFile.setLastModified(mClock.now() - DefaultDiskStorage.TEMP_FILE_LIFETIME_MS - 1000)) {
    throw new IOException("Unable to update timestamp of file: " + tempFile);
  }
  purgeUnexpectedFiles(storage);
  assertFalse(tempFile.exists());
}
