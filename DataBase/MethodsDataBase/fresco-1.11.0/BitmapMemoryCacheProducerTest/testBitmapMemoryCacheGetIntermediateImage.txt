@Test public void testBitmapMemoryCacheGetIntermediateImage(){
  setupBitmapMemoryCacheGetIntermediateImage();
  setupInputProducerNotFound();
  mBitmapMemoryCacheProducer.produceResults(mConsumer,mProducerContext);
  verify(mConsumer).onNewResult(mIntermediateImageReference,Consumer.NO_FLAGS);
  verify(mConsumer).onNewResult(null,Consumer.IS_LAST);
  verify(mProducerListener).onProducerStart(mRequestId,PRODUCER_NAME);
  Map<String,String> extraMap=ImmutableMap.of(BitmapMemoryCacheProducer.EXTRA_CACHED_VALUE_FOUND,"false");
  verify(mProducerListener).onProducerFinishWithSuccess(mRequestId,PRODUCER_NAME,extraMap);
  verify(mProducerListener,never()).onUltimateProducerReached(anyString(),anyString(),anyBoolean());
  Assert.assertTrue(!mIntermediateImageReference.isValid());
}
