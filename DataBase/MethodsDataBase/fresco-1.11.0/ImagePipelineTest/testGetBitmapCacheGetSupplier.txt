@Test public void testGetBitmapCacheGetSupplier(){
  Supplier<DataSource<CloseableReference<CloseableImage>>> dataSourceSupplier=mImagePipeline.getDataSourceSupplier(mImageRequest,mCallerContext,ImageRequest.RequestLevel.BITMAP_MEMORY_CACHE);
  Producer<CloseableReference<CloseableImage>> bitmapCacheSequence=mock(Producer.class);
  when(mProducerSequenceFactory.getDecodedImageProducerSequence(mImageRequest)).thenReturn(bitmapCacheSequence);
  dataSourceSupplier.get();
  verify(mRequestListener1).onRequestStart(mImageRequest,mCallerContext,"0",false);
  verify(mRequestListener2).onRequestStart(mImageRequest,mCallerContext,"0",false);
  ArgumentCaptor<ProducerContext> producerContextArgumentCaptor=ArgumentCaptor.forClass(ProducerContext.class);
  verify(bitmapCacheSequence).produceResults(any(Consumer.class),producerContextArgumentCaptor.capture());
  assertTrue(producerContextArgumentCaptor.getValue().isIntermediateResultExpected());
  assertEquals(producerContextArgumentCaptor.getValue().getPriority(),Priority.HIGH);
}
