@Test public void testUpdatesCacheParams(){
  InOrder inOrder=inOrder(mParamsSupplier);
  CloseableReference<Integer> originalRef=newReference(700);
  CloseableReference<Integer> cachedRef=mCache.cache(KEYS[2],originalRef);
  originalRef.close();
  cachedRef.close();
  mCache.get(KEY);
  inOrder.verify(mParamsSupplier).get();
  PowerMockito.when(SystemClock.uptimeMillis()).thenReturn(CountingMemoryCache.PARAMS_INTERCHECK_INTERVAL_MS - 1);
  mCache.get(KEY);
  inOrder.verify(mParamsSupplier,never()).get();
  mCache.get(KEY);
  inOrder.verify(mParamsSupplier,never()).get();
  assertTotalSize(1,700);
  assertExclusivelyOwnedSize(1,700);
  mParams=new MemoryCacheParams(500,CACHE_MAX_COUNT,CACHE_EVICTION_QUEUE_MAX_SIZE,CACHE_EVICTION_QUEUE_MAX_COUNT,CACHE_ENTRY_MAX_SIZE);
  when(mParamsSupplier.get()).thenReturn(mParams);
  PowerMockito.when(SystemClock.uptimeMillis()).thenReturn(CountingMemoryCache.PARAMS_INTERCHECK_INTERVAL_MS);
  mCache.get(KEY);
  inOrder.verify(mParamsSupplier).get();
  assertTotalSize(0,0);
  assertExclusivelyOwnedSize(0,0);
  verify(mReleaser).release(700);
}
