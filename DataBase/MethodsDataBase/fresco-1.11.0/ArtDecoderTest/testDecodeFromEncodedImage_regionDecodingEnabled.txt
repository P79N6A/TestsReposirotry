@Test public void testDecodeFromEncodedImage_regionDecodingEnabled(){
  Rect region=new Rect(0,0,200,100);
  int size=MockBitmapFactory.bitmapSize(region.width(),region.height(),DEFAULT_BITMAP_CONFIG);
  Bitmap bitmap=MockBitmapFactory.create(region.width(),region.height(),DEFAULT_BITMAP_CONFIG);
  when(mBitmapRegionDecoder.decodeRegion(any(Rect.class),any(BitmapFactory.Options.class))).thenReturn(bitmap);
  doReturn(bitmap).when(mBitmapPool).get(size);
  CloseableReference<Bitmap> decodedImage=mArtDecoder.decodeFromEncodedImage(mEncodedImage,DEFAULT_BITMAP_CONFIG,region);
  assertTrue(decodedImage.get().getWidth() == region.width());
  assertTrue(decodedImage.get().getHeight() == region.height());
  closeAndVerifyClosed(decodedImage,bitmap);
  verify(mBitmapRegionDecoder).recycle();
}
