@Test public void testSmallImageDiskCacheGetNotFoundInputProducerSuccess(){
  when(mImageRequest.getCacheChoice()).thenReturn(ImageRequest.CacheChoice.SMALL);
  setupDiskCacheGetNotFound(mSmallImageBufferedDiskCache);
  setupInputProducerSuccess();
  mDiskCacheReadProducer.produceResults(mConsumer,mProducerContext);
  verify(mConsumer).onNewResult(mFinalEncodedImage,Consumer.IS_LAST);
  verify(mProducerListener).onProducerStart(mRequestId,PRODUCER_NAME);
  ArgumentCaptor<HashMap> captor=ArgumentCaptor.forClass(HashMap.class);
  verify(mProducerListener).onProducerFinishWithSuccess(eq(mRequestId),eq(PRODUCER_NAME),captor.capture());
  Map<String,String> resultMap=captor.getValue();
  assertEquals("false",resultMap.get(DiskCacheReadProducer.EXTRA_CACHED_VALUE_FOUND));
  assertNull(resultMap.get(DiskCacheReadProducer.ENCODED_IMAGE_SIZE));
  verify(mProducerListener,never()).onUltimateProducerReached(anyString(),anyString(),anyBoolean());
}
