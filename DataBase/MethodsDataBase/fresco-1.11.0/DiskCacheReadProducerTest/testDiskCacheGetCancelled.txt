@Test public void testDiskCacheGetCancelled(){
  setupDiskCacheGetWait(mDefaultBufferedDiskCache);
  mDiskCacheReadProducer.produceResults(mConsumer,mProducerContext);
  verify(mConsumer,never()).onCancellation();
  assertFalse(mIsCancelled.getValue().get());
  mProducerContext.cancel();
  assertTrue(mIsCancelled.getValue().get());
  mTaskCompletionSource.trySetCancelled();
  verify(mConsumer).onCancellation();
  verify(mInputProducer,never()).produceResults(any(Consumer.class),eq(mProducerContext));
  verify(mProducerListener).onProducerStart(mRequestId,PRODUCER_NAME);
  verify(mProducerListener).onProducerFinishWithCancellation(mRequestId,PRODUCER_NAME,null);
  verify(mProducerListener,never()).onProducerFinishWithFailure(eq(mRequestId),any(String.class),any(Exception.class),any(Map.class));
  verify(mProducerListener,never()).onProducerFinishWithSuccess(eq(mRequestId),any(String.class),any(Map.class));
  verify(mProducerListener,never()).onUltimateProducerReached(anyString(),anyString(),anyBoolean());
}
