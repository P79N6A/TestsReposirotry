@Test public void testLocalVideoMicroThumbnailReturnsNull() throws Exception {
  when(mProducerListener.requiresExtraMap(mRequestId)).thenReturn(true);
  when(android.media.ThumbnailUtils.createVideoThumbnail(mFile.getPath(),MediaStore.Images.Thumbnails.MICRO_KIND)).thenReturn(null);
  mLocalVideoThumbnailProducer.produceResults(mConsumer,mProducerContext);
  mExecutor.runUntilIdle();
  verify(mConsumer).onNewResult(null,Consumer.IS_LAST);
  verify(mProducerListener).onProducerStart(mRequestId,PRODUCER_NAME);
  Map<String,String> thumbnailNotFoundMap=ImmutableMap.of(LocalVideoThumbnailProducer.CREATED_THUMBNAIL,"false");
  verify(mProducerListener).onProducerFinishWithSuccess(mRequestId,PRODUCER_NAME,thumbnailNotFoundMap);
  verify(mProducerListener).onUltimateProducerReached(mRequestId,PRODUCER_NAME,false);
}
