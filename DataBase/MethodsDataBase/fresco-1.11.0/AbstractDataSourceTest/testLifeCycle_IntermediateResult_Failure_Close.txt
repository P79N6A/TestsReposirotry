@Test public void testLifeCycle_IntermediateResult_Failure_Close(){
  subscribe();
  Value value1=mock(Value.class);
  mDataSource.setResult(value1,INTERMEDIATE);
  verifySubscribers(ON_NEW_RESULT);
  verifyState(mDataSource,NOT_CLOSED,NOT_FINISHED,WITH_RESULT,value1,NOT_FAILED,null);
  Throwable throwable=mock(Throwable.class);
  mDataSource.setFailure(throwable);
  verifySubscribers(ON_FAILURE);
  verifyState(mDataSource,NOT_CLOSED,FINISHED,WITH_RESULT,value1,FAILED,throwable);
  mDataSource.close();
  verifySubscribers(NO_INTERACTIONS);
  verifyState(mDataSource,CLOSED,FINISHED,WITHOUT_RESULT,null,FAILED,throwable);
}
