@Test public void testOnNewResultLastNotJpeg(){
  when(ImageFormatChecker.getImageFormat_WrapIOException(any(InputStream.class))).thenReturn(DefaultImageFormats.WEBP_SIMPLE);
  mAddMetaDataConsumer.onNewResult(mFinalResult,Consumer.IS_LAST);
  ArgumentCaptor<EncodedImage> argumentCaptor=ArgumentCaptor.forClass(EncodedImage.class);
  verify(mConsumer).onNewResult(argumentCaptor.capture(),eq(Consumer.IS_LAST));
  EncodedImage encodedImage=argumentCaptor.getValue();
  assertTrue(EncodedImage.isValid(encodedImage));
  assertEquals(DefaultImageFormats.WEBP_SIMPLE,encodedImage.getImageFormat());
  assertEquals(0,encodedImage.getRotationAngle());
  assertEquals(-1,encodedImage.getWidth());
  assertEquals(-1,encodedImage.getHeight());
}
