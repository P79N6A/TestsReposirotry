@Test public void testCancellation(){
  final long startTime=10L;
  final long imageReleaseTime=123L;
  int expectedNumOfTimestamps=0;
  when(mMonotonicClock.now()).thenReturn(startTime);
  mListener.onSubmit(CONTROLLER_ID,CALLER_CONTEXT);
  expectedNumOfTimestamps++;
  when(mImagePerfState.getImageLoadStatus()).thenReturn(ImageLoadStatus.REQUESTED);
  when(mMonotonicClock.now()).thenReturn(imageReleaseTime);
  mListener.onRelease(CONTROLLER_ID);
  expectedNumOfTimestamps++;
  verify(mMonotonicClock,times(expectedNumOfTimestamps)).now();
  verify(mImagePerfMonitor).notifyStatusUpdated(eq(mImagePerfState),eq(ImageLoadStatus.REQUESTED));
  verify(mImagePerfMonitor).notifyStatusUpdated(eq(mImagePerfState),eq(ImageLoadStatus.CANCELED));
  verify(mImagePerfState).setControllerSubmitTimeMs(startTime);
  verify(mImagePerfState).setControllerCancelTimeMs(imageReleaseTime);
}
