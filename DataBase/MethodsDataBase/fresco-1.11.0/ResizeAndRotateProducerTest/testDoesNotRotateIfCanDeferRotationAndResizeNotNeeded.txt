@Test public void testDoesNotRotateIfCanDeferRotationAndResizeNotNeeded() throws Exception {
  whenResizingEnabled();
  int rotationAngle=180;
  int exifOrientation=ExifInterface.ORIENTATION_ROTATE_180;
  int sourceWidth=10;
  int sourceHeight=10;
  whenRequestWidthAndHeight(sourceWidth,sourceHeight);
  whenRequestsRotationFromMetadataWithDeferringAllowed();
  provideIntermediateResult(DefaultImageFormats.JPEG,sourceWidth,sourceHeight,rotationAngle,exifOrientation);
  verifyIntermediateResultPassedThroughUnchanged();
  provideFinalResult(DefaultImageFormats.JPEG,sourceWidth,sourceHeight,rotationAngle,exifOrientation);
  verifyFinalResultPassedThroughUnchanged();
  verifyZeroJpegTranscoderInteractions();
}
