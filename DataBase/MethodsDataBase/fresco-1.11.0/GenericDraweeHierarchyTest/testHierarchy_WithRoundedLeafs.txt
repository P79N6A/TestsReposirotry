@Test public void testHierarchy_WithRoundedLeafs() throws Exception {
  RoundingParams roundingParams=RoundingParams.asCircle();
  GenericDraweeHierarchy dh=mBuilder.setPlaceholderImage(mWrappedImage,ScaleType.CENTER).setFailureImage(mFailureImage,ScaleType.CENTER).setRetryImage(mRetryImage,null).setRoundingParams(roundingParams).build();
  RootDrawable rootDrawable=(RootDrawable)dh.getTopLevelDrawable();
  FadeDrawable fadeDrawable=(FadeDrawable)rootDrawable.getCurrent();
  assertNotNull(fadeDrawable);
  assertScaleTypeAndDrawable(mWrappedImage,ScaleType.CENTER,fadeDrawable.getDrawable(1));
  Rounded roundedPlaceholder=(Rounded)mWrappedImage.getCurrent().getCurrent();
  assertRoundingParams(roundingParams,roundedPlaceholder);
  Rounded roundedFailureImage=(Rounded)fadeDrawable.getDrawable(5).getCurrent();
  assertRoundingParams(roundingParams,roundedFailureImage);
  Rounded roundedRetryImage=(Rounded)fadeDrawable.getDrawable(4);
  assertRoundingParams(roundingParams,roundedRetryImage);
  verifyCallback(rootDrawable,mWrappedImage.getCurrent().getCurrent());
  verifyCallback(rootDrawable,(Drawable)roundedFailureImage);
  verifyCallback(rootDrawable,(Drawable)roundedRetryImage);
}
