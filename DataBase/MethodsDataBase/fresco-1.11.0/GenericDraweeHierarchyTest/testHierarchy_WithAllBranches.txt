@Test public void testHierarchy_WithAllBranches() throws Exception {
  GenericDraweeHierarchy dh=mBuilder.setPlaceholderImage(mPlaceholderImage,ScaleType.CENTER).setRetryImage(mRetryImage,ScaleType.FIT_CENTER).setFailureImage(mFailureImage,ScaleType.FIT_CENTER).setProgressBarImage(mProgressBarImage,ScaleType.CENTER).setActualImageScaleType(ScaleType.CENTER_CROP).build();
  RootDrawable rootDrawable=(RootDrawable)dh.getTopLevelDrawable();
  FadeDrawable fadeDrawable=(FadeDrawable)rootDrawable.getCurrent();
  assertEquals(7,fadeDrawable.getNumberOfLayers());
  assertNull(fadeDrawable.getDrawable(0));
  assertScaleTypeAndDrawable(mPlaceholderImage,ScaleType.CENTER,fadeDrawable.getDrawable(1));
  assertActualImageScaleType(ScaleType.CENTER_CROP,null,fadeDrawable.getDrawable(2));
  assertScaleTypeAndDrawable(mProgressBarImage,ScaleType.CENTER,fadeDrawable.getDrawable(3));
  assertScaleTypeAndDrawable(mRetryImage,ScaleType.FIT_CENTER,fadeDrawable.getDrawable(4));
  assertScaleTypeAndDrawable(mFailureImage,ScaleType.FIT_CENTER,fadeDrawable.getDrawable(5));
  assertNull(fadeDrawable.getDrawable(6));
  verifyCallback(rootDrawable,mPlaceholderImage);
}
