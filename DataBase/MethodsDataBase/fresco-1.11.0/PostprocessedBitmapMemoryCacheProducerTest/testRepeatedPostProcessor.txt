@Test public void testRepeatedPostProcessor(){
  when(mImageRequest.getPostprocessor()).thenReturn(mRepeatedPostprocessor);
  when(mMemoryCache.cache(mPostprocessedBitmapCacheKey,mImageRef1)).thenReturn(mImageRef1Clone);
  when(mMemoryCache.cache(mPostprocessedBitmapCacheKey,mImageRef2)).thenReturn(mImageRef2Clone);
  Consumer consumer=performCacheMiss();
  consumer.onNewResult(mImageRef1,Consumer.NO_FLAGS);
  mImageRef1.close();
  consumer.onNewResult(mImageRef2,Consumer.NO_FLAGS);
  mImageRef2.close();
  verify(mConsumer).onNewResult(mImageRef1Clone,Consumer.NO_FLAGS);
  verify(mConsumer).onNewResult(mImageRef2Clone,Consumer.NO_FLAGS);
  Assert.assertFalse(mImageRef1Clone.isValid());
  Assert.assertFalse(mImageRef2Clone.isValid());
}
