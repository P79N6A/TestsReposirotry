@Test public void testOnFailure_extraMap(){
  doReturn(true).when(mProducerListener).requiresExtraMap(REQUEST_ID);
  doThrow(mException).when(mResultSupplier).get();
  mStatefulProducerRunnable.run();
  verify(mConsumer).onFailure(mException);
  verify(mProducerListener).onProducerStart(REQUEST_ID,PRODUCER_NAME);
  verify(mProducerListener).onProducerFinishWithFailure(REQUEST_ID,PRODUCER_NAME,mException,mFailureMap);
  verify(mProducerListener,never()).onUltimateProducerReached(anyString(),anyString(),anyBoolean());
}
