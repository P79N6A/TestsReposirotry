@Test public void testShouldHandleExternalStorageRemoved(){
  expectInternalSetup();
  expectExternalSetup();
  when(mMockFileExternal.exists()).thenReturn(true).thenReturn(false);
  StatFsHelper statFsHelper=new StatFsHelper();
  statFsHelper.resetStats();
  long freeBytes=statFsHelper.getAvailableStorageSpace(StatFsHelper.StorageType.INTERNAL);
  assertEquals(INTERNAL_BLOCK_SIZE * INTERNAL_BLOCKS_FREE,freeBytes);
  freeBytes=statFsHelper.getAvailableStorageSpace(StatFsHelper.StorageType.EXTERNAL);
  assertEquals(0,freeBytes);
  verify(mMockStatFsInternal).restat(INTERNAL_PATH);
}
