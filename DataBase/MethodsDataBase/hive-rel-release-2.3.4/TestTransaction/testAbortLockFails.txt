@Test(expected=TransactionException.class) public void testAbortLockFails() throws Exception {
  doThrow(new LockException("")).when(mockLock).release();
  transaction.abort();
}
