@Test(expected=TransactionException.class) public void testCommitLockFails() throws Exception {
  doThrow(new LockException("")).when(mockLock).release();
  transaction.commit();
}
