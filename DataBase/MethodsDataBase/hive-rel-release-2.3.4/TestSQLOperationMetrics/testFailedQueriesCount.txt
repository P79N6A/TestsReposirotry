@Test public void testFailedQueriesCount() throws Exception {
  String json=((CodahaleMetrics)metrics).dumpJson();
  MetricsTestUtils.verifyMetricsJson(json,MetricsTestUtils.METER,MetricsConstant.HS2_FAILED_QUERIES,"");
  operation.onNewState(OperationState.ERROR,OperationState.RUNNING);
  json=((CodahaleMetrics)metrics).dumpJson();
  MetricsTestUtils.verifyMetricsJson(json,MetricsTestUtils.METER,MetricsConstant.HS2_FAILED_QUERIES,"1");
  operation.onNewState(OperationState.FINISHED,OperationState.RUNNING);
  json=((CodahaleMetrics)metrics).dumpJson();
  MetricsTestUtils.verifyMetricsJson(json,MetricsTestUtils.METER,MetricsConstant.HS2_FAILED_QUERIES,"1");
  operation.onNewState(OperationState.CANCELED,OperationState.RUNNING);
  json=((CodahaleMetrics)metrics).dumpJson();
  MetricsTestUtils.verifyMetricsJson(json,MetricsTestUtils.METER,MetricsConstant.HS2_FAILED_QUERIES,"1");
  operation.onNewState(OperationState.ERROR,OperationState.RUNNING);
  json=((CodahaleMetrics)metrics).dumpJson();
  MetricsTestUtils.verifyMetricsJson(json,MetricsTestUtils.METER,MetricsConstant.HS2_FAILED_QUERIES,"2");
}
