@Test public void testPermFunc() throws Exception {
  Path jarFilePath=getHiveContribJarPath();
  Statement stmt=conTestDb.createStatement();
  ResultSet res;
  stmt.execute("ADD JAR " + jarFilePath.toString());
  String queryStr="CREATE FUNCTION example_add AS '" + testUdfClassName + "' USING JAR '"+ jarFilePath+ "'";
  stmt.execute(queryStr);
  res=stmt.executeQuery("DESCRIBE FUNCTION " + testDbName + ".example_add");
  checkForNotExist(res);
  res=stmt.executeQuery("SELECT example_add(1, 2) FROM " + tableName + " LIMIT 1");
  assertTrue("query has results",res.next());
  assertEquals(3,res.getInt(1));
  assertFalse("no more results",res.next());
  Connection conn2=getConnection(testDbName);
  Statement stmt2=conn2.createStatement();
  stmt2.execute("USE " + testDbName);
  res=stmt2.executeQuery("DESCRIBE FUNCTION " + testDbName + ".example_add");
  checkForNotExist(res);
  res=stmt2.executeQuery("SELECT " + testDbName + ".example_add(1, 1) FROM "+ tableName+ " LIMIT 1");
  assertTrue("query has results",res.next());
  assertEquals(2,res.getInt(1));
  assertFalse("no more results",res.next());
  conn2.close();
  stmt.execute("DROP FUNCTION IF EXISTS " + testDbName + ".example_add");
  stmt.close();
}
