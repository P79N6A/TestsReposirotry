@Test public void testCompilationQueryMetric(){
  Timer timer=metricRegistry.getTimers().get(MetricsConstant.HS2_COMPILING_QUERIES);
  Counter counter=metricRegistry.getCounters().get(MetricsConstant.ACTIVE_CALLS + MetricsConstant.HS2_COMPILING_QUERIES);
  assertThat(timer,nullValue());
  assertThat(counter,nullValue());
  hook.beforeCompile(ctx);
  timer=metricRegistry.getTimers().get(MetricsConstant.HS2_COMPILING_QUERIES);
  counter=metricRegistry.getCounters().get(MetricsConstant.ACTIVE_CALLS + MetricsConstant.HS2_COMPILING_QUERIES);
  assertThat(timer.getCount(),equalTo(0l));
  assertThat(counter.getCount(),equalTo(1l));
  hook.afterCompile(ctx,false);
  timer=metricRegistry.getTimers().get(MetricsConstant.HS2_COMPILING_QUERIES);
  counter=metricRegistry.getCounters().get(MetricsConstant.ACTIVE_CALLS + MetricsConstant.HS2_COMPILING_QUERIES);
  assertThat(timer.getCount(),equalTo(1l));
  assertThat(counter.getCount(),equalTo(0l));
}
