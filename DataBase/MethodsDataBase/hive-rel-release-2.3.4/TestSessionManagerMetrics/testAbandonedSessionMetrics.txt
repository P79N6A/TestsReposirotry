@Test public void testAbandonedSessionMetrics() throws Exception {
  sm.start();
  String json=metrics.dumpJson();
  MetricsTestUtils.verifyMetricsJson(json,MetricsTestUtils.COUNTER,MetricsConstant.HS2_ABANDONED_SESSIONS,"");
  sm.openSession(TProtocolVersion.HIVE_CLI_SERVICE_PROTOCOL_V9,"user","passw","127.0.0.1",new HashMap<String,String>());
  Thread.sleep(3200);
  json=metrics.dumpJson();
  MetricsTestUtils.verifyMetricsJson(json,MetricsTestUtils.COUNTER,MetricsConstant.HS2_ABANDONED_SESSIONS,1);
}
