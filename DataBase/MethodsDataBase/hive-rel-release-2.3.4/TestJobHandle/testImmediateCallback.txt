@Test public void testImmediateCallback() throws Exception {
  JobHandleImpl<Serializable> handle=new JobHandleImpl<Serializable>(client,promise,"job",Lists.newArrayList(listener,listener2));
  assertTrue(handle.changeState(JobHandle.State.QUEUED));
  verify(listener).onJobQueued(handle);
  handle.changeState(JobHandle.State.STARTED);
  handle.addSparkJobId(1);
  handle.changeState(JobHandle.State.CANCELLED);
  InOrder inOrder=inOrder(listener2);
  inOrder.verify(listener2).onSparkJobStarted(same(handle),eq(1));
  inOrder.verify(listener2).onJobCancelled(same(handle));
}
