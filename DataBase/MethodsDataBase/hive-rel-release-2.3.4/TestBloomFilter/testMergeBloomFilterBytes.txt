@Test public void testMergeBloomFilterBytes() throws Exception {
  BloomFilter bf1=new BloomFilter(10000);
  BloomFilter bf2=new BloomFilter(10000);
  String[] inputs1={"bloo","bloom fil","bloom filter","cuckoo filter"};
  String[] inputs2={"2_bloo","2_bloom fil","2_bloom filter","2_cuckoo filter"};
  for (  String val : inputs1) {
    bf1.addString(val);
  }
  for (  String val : inputs2) {
    bf2.addString(val);
  }
  ByteArrayOutputStream bytesOut=new ByteArrayOutputStream();
  BloomFilter.serialize(bytesOut,bf1);
  byte[] bf1Bytes=bytesOut.toByteArray();
  bytesOut.reset();
  BloomFilter.serialize(bytesOut,bf1);
  byte[] bf2Bytes=bytesOut.toByteArray();
  BloomFilter.mergeBloomFilterBytes(bf1Bytes,0,bf1Bytes.length,bf2Bytes,0,bf2Bytes.length);
  ByteArrayInputStream bytesIn=new ByteArrayInputStream(bf1Bytes,0,bf1Bytes.length);
  BloomFilter bfMerged=BloomFilter.deserialize(bytesIn);
  for (  String val : inputs1) {
    bfMerged.addString(val);
  }
  for (  String val : inputs2) {
    bfMerged.addString(val);
  }
}
