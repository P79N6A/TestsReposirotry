@Test public void testDeletedAndRecreatedNodeWhenSessionReconnects() throws Exception {
  CuratorFramework curator=newCurator();
  CuratorFramework observer=newCurator();
  SlotZnode node=createZnode(curator);
  assertTrue(node.start(30,TimeUnit.SECONDS));
  String originalPath=node.getActualPath();
  assertNodeExists(observer,originalPath);
  Trigger deletedTrigger=Trigger.deleted();
  observer.checkExists().usingWatcher(deletedTrigger).forPath(node.getActualPath());
  killSession(curator);
  assertTrue(deletedTrigger.firedWithin(30,TimeUnit.SECONDS));
  Trigger createdTrigger=Trigger.created();
  Stat stat=observer.checkExists().usingWatcher(createdTrigger).forPath(originalPath);
  assertTrue(stat != null || createdTrigger.firedWithin(30,TimeUnit.SECONDS));
}
