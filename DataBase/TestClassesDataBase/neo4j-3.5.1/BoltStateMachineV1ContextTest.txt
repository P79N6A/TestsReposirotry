class BoltStateMachineV1ContextTest {
  @Test void shouldHandleFailure() throws BoltConnectionFatality {
    BoltStateMachine machine=mock(BoltStateMachine.class);
    BoltStateMachineV1Context context=newContext(machine,mock(BoltStateMachineSPI.class));
    RuntimeException cause=new RuntimeException();
    context.handleFailure(cause,true);
    verify(machine).handleFailure(cause,true);
  }
  @Test void shouldResetMachine() throws BoltConnectionFatality {
    BoltStateMachine machine=mock(BoltStateMachine.class);
    BoltStateMachineV1Context context=newContext(machine,mock(BoltStateMachineSPI.class));
    context.resetMachine();
    verify(machine).reset();
  }
  private static BoltStateMachineV1Context newContext(  BoltStateMachine machine,  BoltStateMachineSPI boltSPI){
    BoltChannel boltChannel=new BoltChannel("bolt-1","bolt",mock(Channel.class));
    return new BoltStateMachineV1Context(machine,boltChannel,boltSPI,new MutableConnectionState(),Clock.systemUTC());
  }
}
