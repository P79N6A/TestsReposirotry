public class OnlineIndexProxyTest {
  private final long indexId=1;
  private final IndexDescriptor descriptor=TestIndexDescriptorFactory.forLabel(1,2);
  private final IndexProviderDescriptor providerDescriptor=mock(IndexProviderDescriptor.class);
  private final IndexAccessor accessor=mock(IndexAccessor.class);
  private final IndexStoreView storeView=mock(IndexStoreView.class);
  @Test public void shouldRemoveIndexCountsWhenTheIndexItselfIsDropped() throws IOException {
    CapableIndexDescriptor capableIndexDescriptor=descriptor.withId(indexId).withoutCapabilities();
    OnlineIndexProxy index=new OnlineIndexProxy(capableIndexDescriptor,accessor,storeView,false);
    index.drop();
    verify(accessor).drop();
    verify(storeView).replaceIndexCounts(indexId,0L,0L,0L);
    verifyNoMoreInteractions(accessor,storeView);
  }
}
