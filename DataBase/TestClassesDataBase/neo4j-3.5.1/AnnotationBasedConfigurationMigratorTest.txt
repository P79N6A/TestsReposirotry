public class AnnotationBasedConfigurationMigratorTest {
  private static final AtomicBoolean wasCalled=new AtomicBoolean(false);
static class SomeSettings implements LoadableConfig {
    @SuppressWarnings("unused") @Migrator private static ConfigurationMigrator migrator=(rawConfiguration,log) -> {
      wasCalled.set(true);
      return rawConfiguration;
    }
;
  }
  @Test public void migratorShouldGetPickedUp(){
    AnnotationBasedConfigurationMigrator migrator=new AnnotationBasedConfigurationMigrator(Collections.singleton(new SomeSettings()));
    migrator.apply(new HashMap<>(),mock(Log.class));
    assertThat(wasCalled.get(),is(true));
  }
}
