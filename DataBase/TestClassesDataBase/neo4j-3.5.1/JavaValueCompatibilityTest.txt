public class JavaValueCompatibilityTest {
  private GraphDatabaseService db;
  @Before public void setUp(){
    db=new TestGraphDatabaseFactory().newImpermanentDatabaseBuilder().newGraphDatabase();
  }
  @After public void tearDown(){
    db.shutdown();
  }
  @Test public void collections_in_collections_look_alright(){
    Result result=db.execute("CREATE (n:TheNode) RETURN [[ [1,2],[3,4] ],[[5,6]]] as x");
    Map<String,Object> next=result.next();
    @SuppressWarnings("unchecked") List<List<Object>> x=(List<List<Object>>)next.get("x");
    Iterable objects=x.get(0);
    assertThat(objects,isA(Iterable.class));
  }
}
