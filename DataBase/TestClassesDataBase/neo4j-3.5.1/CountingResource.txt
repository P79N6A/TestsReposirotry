private static class CountingResource implements Resource {
  private AtomicInteger closed=new AtomicInteger();
  @Override public void close(){
    closed.incrementAndGet();
  }
  int closeCount(){
    return closed.get();
  }
}
