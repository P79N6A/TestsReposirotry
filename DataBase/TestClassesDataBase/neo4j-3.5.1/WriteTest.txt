private static class WriteTest {
  private final AnyValue value;
  private final Object[] expected;
  private WriteTest(  AnyValue value,  Object... expected){
    this.value=value;
    this.expected=expected;
  }
  @Override public String toString(){
    return String.format("%s should write %s",value,Arrays.toString(expected));
  }
  void verifyWriteTo(){
    BufferAnyValueWriter writer=new BufferAnyValueWriter();
    value.writeTo(writer);
    writer.assertBuffer(expected);
  }
}
