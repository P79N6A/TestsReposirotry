class GlobalMemoryTrackerTest {
  @Test void trackMemoryAllocations(){
    long initialUsedMemory=GlobalMemoryTracker.INSTANCE.usedDirectMemory();
    GlobalMemoryTracker.INSTANCE.allocated(10);
    GlobalMemoryTracker.INSTANCE.allocated(20);
    GlobalMemoryTracker.INSTANCE.allocated(40);
    assertEquals(70,GlobalMemoryTracker.INSTANCE.usedDirectMemory() - initialUsedMemory);
  }
  @Test void trackMemoryDeallocations(){
    long initialUsedMemory=GlobalMemoryTracker.INSTANCE.usedDirectMemory();
    GlobalMemoryTracker.INSTANCE.allocated(100);
    assertEquals(100,GlobalMemoryTracker.INSTANCE.usedDirectMemory() - initialUsedMemory);
    GlobalMemoryTracker.INSTANCE.deallocated(20);
    assertEquals(80,GlobalMemoryTracker.INSTANCE.usedDirectMemory() - initialUsedMemory);
    GlobalMemoryTracker.INSTANCE.deallocated(40);
    assertEquals(40,GlobalMemoryTracker.INSTANCE.usedDirectMemory() - initialUsedMemory);
  }
}
