private class BinarySearch {
  private int longestSuccessful;
  private int minArrayLength;
  private int maxArrayLength=1;
  private int arrayLength=1;
  private boolean foundMaxLimit;
  boolean finished(){
    return arrayLength == minArrayLength;
  }
  void progress(  boolean wasAbleToWrite){
    if (wasAbleToWrite) {
      longestSuccessful=Math.max(arrayLength,longestSuccessful);
      if (!foundMaxLimit) {
        minArrayLength=arrayLength;
        maxArrayLength*=2;
        arrayLength=maxArrayLength;
      }
 else {
        minArrayLength=arrayLength;
        arrayLength=(minArrayLength + maxArrayLength) / 2;
      }
    }
 else {
      foundMaxLimit=true;
      maxArrayLength=arrayLength;
      arrayLength=(minArrayLength + maxArrayLength) / 2;
    }
  }
}
