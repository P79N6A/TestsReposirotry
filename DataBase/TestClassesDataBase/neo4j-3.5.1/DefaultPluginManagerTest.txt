public class DefaultPluginManagerTest {
  private static PluginManager manager;
  private static GraphDatabaseAPI graphDb;
  @BeforeClass public static void loadExtensionManager(){
    graphDb=(GraphDatabaseAPI)new TestGraphDatabaseFactory().newImpermanentDatabase();
    manager=new DefaultPluginManager(NullLogProvider.getInstance());
  }
  @AfterClass public static void destroyExtensionManager(){
    manager=null;
    if (graphDb != null) {
      graphDb.shutdown();
    }
    graphDb=null;
  }
  @Test public void canGetUrisForNode(){
    Map<String,List<String>> extensions=manager.getExensionsFor(GraphDatabaseService.class);
    List<String> methods=extensions.get(FunctionalTestPlugin.class.getSimpleName());
    assertNotNull(methods);
    assertThat(methods,hasItem(FunctionalTestPlugin.CREATE_NODE));
  }
  @Test public void canInvokeExtension() throws Exception {
    manager.invoke(graphDb,FunctionalTestPlugin.class.getSimpleName(),GraphDatabaseService.class,FunctionalTestPlugin.CREATE_NODE,graphDb,new NullFormat(null,(MediaType[])null).readParameterList(""));
  }
}
