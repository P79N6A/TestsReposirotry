public abstract static class Transaction {
  final long startTimestamp=currentTimeMillis();
  protected abstract void transactionData(  TransactionDataBuilder tx,  IdGenerator next);
  public TransactionRepresentation representation(  IdGenerator idGenerator,  int masterId,  int authorId,  long lastCommittedTx,  NeoStores neoStores){
    TransactionWriter writer=new TransactionWriter(neoStores);
    transactionData(new TransactionDataBuilder(writer,neoStores.getNodeStore()),idGenerator);
    idGenerator.updateCorrespondingIdGenerators(neoStores);
    return writer.representation(new byte[0],masterId,authorId,startTimestamp,lastCommittedTx,currentTimeMillis());
  }
}
