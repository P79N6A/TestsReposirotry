class MetaDataStoreCheckTest extends RecordCheckTestBase<NeoStoreRecord,ConsistencyReport.NeoStoreConsistencyReport,NeoStoreCheck> {
  MetaDataStoreCheckTest(){
    super(new NeoStoreCheck(new PropertyChain<>(from -> null)),ConsistencyReport.NeoStoreConsistencyReport.class,new int[0]);
  }
  @Test void shouldNotReportAnythingForRecordWithNoPropertyReference(){
    NeoStoreRecord record=new NeoStoreRecord();
    ConsistencyReport.NeoStoreConsistencyReport report=check(record);
    verifyNoMoreInteractions(report);
  }
  @Test void shouldNotReportAnythingForRecordWithConsistentReferenceToProperty(){
    NeoStoreRecord record=new NeoStoreRecord();
    record.setNextProp(add(inUse(new PropertyRecord(7))).getId());
    ConsistencyReport.NeoStoreConsistencyReport report=check(record);
    verifyNoMoreInteractions(report);
  }
  @Test void shouldReportPropertyNotInUse(){
    NeoStoreRecord record=new NeoStoreRecord();
    PropertyRecord property=add(notInUse(new PropertyRecord(7)));
    record.setNextProp(property.getId());
    ConsistencyReport.NeoStoreConsistencyReport report=check(record);
    verify(report).propertyNotInUse(property);
    verifyNoMoreInteractions(report);
  }
  @Test void shouldReportPropertyNotFirstInChain(){
    NeoStoreRecord record=new NeoStoreRecord();
    PropertyRecord property=add(inUse(new PropertyRecord(7)));
    property.setPrevProp(6);
    record.setNextProp(property.getId());
    ConsistencyReport.NeoStoreConsistencyReport report=check(record);
    verify(report).propertyNotFirstInChain(property);
    verifyNoMoreInteractions(report);
  }
}
