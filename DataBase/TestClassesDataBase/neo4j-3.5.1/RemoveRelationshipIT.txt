public class RemoveRelationshipIT extends AbstractRestFunctionalTestBase {
  private static FunctionalTestHelper functionalTestHelper;
  private static GraphDbHelper helper;
  @BeforeClass public static void setupServer(){
    functionalTestHelper=new FunctionalTestHelper(server());
    helper=functionalTestHelper.getGraphDbHelper();
  }
  @Test public void shouldGet204WhenRemovingAValidRelationship() throws Exception {
    long relationshipId=helper.createRelationship("KNOWS");
    JaxRsResponse response=sendDeleteRequest(new URI(functionalTestHelper.relationshipUri(relationshipId)));
    assertEquals(204,response.getStatus());
    response.close();
  }
  @Test public void shouldGet404WhenRemovingAnInvalidRelationship() throws Exception {
    long relationshipId=helper.createRelationship("KNOWS");
    JaxRsResponse response=sendDeleteRequest(new URI(functionalTestHelper.relationshipUri((relationshipId + 1) * 9999)));
    assertEquals(404,response.getStatus());
    response.close();
  }
  private JaxRsResponse sendDeleteRequest(  URI requestUri){
    return RestRequest.req().delete(requestUri);
  }
}
