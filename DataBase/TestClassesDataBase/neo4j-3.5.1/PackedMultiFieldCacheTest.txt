class PackedMultiFieldCacheTest {
  @Test void shouldPutValuesIntoSlots(){
    PackedMultiFieldCache cache=new PackedMultiFieldCache(5,10,25,24);
    int index=10;
    long[] values=new long[]{3,100,12345,67890};
    cache.put(index,values);
    for (int i=0; i < values.length; i++) {
      assertEquals(values[i],cache.get(index,i));
    }
  }
  @Test void shouldHaveCorrectDefaultValues(){
    PackedMultiFieldCache cache=new PackedMultiFieldCache(1,34,35);
    int index=0;
    cache.clear(index);
    assertEquals(0,cache.get(index,0));
    assertEquals(0,cache.get(index,1));
    assertEquals(-1,cache.get(index,2));
  }
  @Test void shouldBeAbleToChangeSlotSize(){
    PackedMultiFieldCache cache=new PackedMultiFieldCache(1,5);
    int index=10;
    assertThrows(IllegalStateException.class,() -> cache.put(index,0,10));
    cache.setSlotSizes(5,20);
    cache.put(index,0,10);
    assertEquals(10,cache.get(index,0));
  }
}
