private class FaultyLonelyProcessingStepTest extends LonelyProcessingStep {
  private volatile boolean endOfUpstreamCalled;
  private volatile boolean panicOnEndUpstream;
  FaultyLonelyProcessingStepTest(  List<Step<?>> pipeLine){
    super(new StageExecution("Faulty",null,Configuration.DEFAULT,pipeLine,0),"Faulty",Configuration.DEFAULT);
  }
  @Override protected void process(){
    throw new RuntimeException("Process exception");
  }
  @Override public void endOfUpstream(){
    endOfUpstreamCalled=true;
    panicOnEndUpstream=isPanic();
    super.endOfUpstream();
  }
  private boolean isPanicOnEndUpstream(){
    return panicOnEndUpstream;
  }
}
