private class LockingPrintWriter extends PrintWriter {
  LockingPrintWriter(  OutputStream out){
    super(out);
    lock=new Object();
  }
  void withLock(  Callable callable) throws Exception {
synchronized (lock) {
      callable.call();
    }
  }
}
