@RunWith(MockitoJUnitRunner.class) public class PopulatingIndexProxyTest {
  @Mock private CapableIndexDescriptor capableIndexDescriptor;
  @Mock private IndexPopulationJob indexPopulationJob;
  @Mock private MultipleIndexPopulator.IndexPopulation indexPopulation;
  private PopulatingIndexProxy populatingIndexProxy;
  @Before public void setUp(){
    populatingIndexProxy=new PopulatingIndexProxy(capableIndexDescriptor,indexPopulationJob,indexPopulation);
  }
  @Test public void cancelPopulationJobOnClose(){
    populatingIndexProxy.close();
    verify(indexPopulationJob).cancelPopulation(indexPopulation);
  }
  @Test public void cancelPopulationJobOnDrop(){
    populatingIndexProxy.drop();
    verify(indexPopulationJob).cancelPopulation(indexPopulation);
  }
}
