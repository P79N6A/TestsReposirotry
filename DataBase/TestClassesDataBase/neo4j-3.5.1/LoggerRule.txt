/** 
 * Creates a logger for tests, and marks beginning and end of tests with log messages
 */
public class LoggerRule extends ExternalResource {
  private final Level level;
  private Logger logger;
  private String testName;
  public LoggerRule(){
    this(Level.INFO);
  }
  public LoggerRule(  Level level){
    this.level=level;
  }
  @Override protected void before() throws Throwable {
    logger.info("Begin test:" + testName);
    super.before();
  }
  @Override protected void after(){
    super.after();
    logger.info("Finished test:" + testName);
  }
  @Override public Statement apply(  Statement base,  Description description){
    testName=description.getDisplayName();
    logger=Logger.getLogger(description.getTestClass().getName());
    logger.setLevel(level);
    return super.apply(base,description);
  }
  public Logger getLogger(){
    return logger;
  }
}
