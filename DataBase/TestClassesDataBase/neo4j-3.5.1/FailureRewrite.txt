private abstract static class FailureRewrite<T> implements Function<GraphDatabaseService,T> {
  private final String message;
  FailureRewrite(  String message){
    this.message=message;
  }
  @Override public T apply(  GraphDatabaseService graphDb){
    try {
      return perform(graphDb);
    }
 catch (    AssertionError e) {
      AssertionError error=new AssertionError(message + ": " + e.getMessage());
      error.setStackTrace(e.getStackTrace());
      throw error;
    }
  }
  abstract T perform(  GraphDatabaseService graphDb);
}
