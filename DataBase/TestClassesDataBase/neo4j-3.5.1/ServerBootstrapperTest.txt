public class ServerBootstrapperTest {
  @Rule public final SuppressOutput suppress=SuppressOutput.suppress(SuppressOutput.System.out);
  @Rule public TestDirectory homeDir=TestDirectory.testDirectory();
  @Test public void shouldNotThrowNullPointerExceptionIfConfigurationValidationFails() throws Exception {
    ServerBootstrapper serverBootstrapper=new ServerBootstrapper(){
      @Override protected GraphFactory createGraphFactory(      Config config){
        return new CommunityGraphFactory();
      }
      @Override protected NeoServer createNeoServer(      GraphFactory graphFactory,      Config config,      GraphDatabaseDependencies dependencies){
        return mock(NeoServer.class);
      }
    }
;
    File dir=Files.createTempDirectory("test-server-bootstrapper").toFile();
    dir.deleteOnExit();
    serverBootstrapper.start(dir,Optional.empty(),MapUtil.stringMap(database_path.name(),homeDir.absolutePath().getAbsolutePath()));
    assertThat(suppress.getOutputVoice().lines(),not(empty()));
  }
}
