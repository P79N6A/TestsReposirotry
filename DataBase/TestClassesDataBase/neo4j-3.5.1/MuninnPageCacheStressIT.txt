/** 
 * A stress test for Muninn page cache. Uses @PageCacheStressTest - see details there. Configured to run until it sees a million evictions, which should take few minutes.
 */
@ExtendWith(TestDirectoryExtension.class) class MuninnPageCacheStressIT {
  @Inject TestDirectory testDirectory;
  @Test void shouldHandleTheStressOfManyManyEvictions() throws Exception {
    DefaultPageCacheTracer monitor=new DefaultPageCacheTracer();
    Condition condition=numberOfEvictions(monitor,100_000);
    PageCacheStressTest runner=new PageCacheStressTest.Builder().withWorkingDirectory(testDirectory.directory()).with(monitor).with(condition).build();
    runner.run();
  }
}
