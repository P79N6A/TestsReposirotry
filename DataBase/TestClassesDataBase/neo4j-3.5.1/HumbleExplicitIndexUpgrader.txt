private class HumbleExplicitIndexUpgrader extends LuceneExplicitIndexUpgrader {
  private final boolean successfulMigration;
  HumbleExplicitIndexUpgrader(  Path indexRootPath,  boolean successfulMigration){
    super(indexRootPath,NO_MONITOR);
    this.successfulMigration=successfulMigration;
  }
  @Override public void upgradeIndexes() throws ExplicitIndexMigrationException {
    if (!successfulMigration) {
      throw new ExplicitIndexMigrationException("testIndex","Index migration failed",null);
    }
  }
}
