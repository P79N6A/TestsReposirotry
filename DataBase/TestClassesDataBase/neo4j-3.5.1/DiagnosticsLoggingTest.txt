public class DiagnosticsLoggingTest {
  @Rule public CleanupRule cleanupRule=new CleanupRule();
  @Test public void shouldSeeExpectedDiagnostics(){
    AssertableLogProvider logProvider=new AssertableLogProvider();
    GraphDatabaseService db=new TestGraphDatabaseFactory().setInternalLogProvider(logProvider).newImpermanentDatabaseBuilder().setConfig(GraphDatabaseSettings.dump_configuration,Settings.TRUE).setConfig(GraphDatabaseSettings.pagecache_memory,"4M").newGraphDatabase();
    cleanupRule.add(db);
    logProvider.assertContainsMessageContaining("Network information");
    logProvider.assertContainsMessageContaining("Disk space on partition");
    logProvider.assertContainsMessageContaining("Local timezone");
    logProvider.assertContainsMessageContaining("Page cache: 4M");
    for (    MetaDataStore.Position position : MetaDataStore.Position.values()) {
      logProvider.assertContainsMessageContaining(position.name());
    }
    logProvider.assertContainsMessageContaining("Transaction log");
    logProvider.assertContainsMessageContaining("TimeZone version: ");
  }
}
