public class StringDeserializationTest {
  private final Configuration configuration=Configuration.COMMAS;
  private final Extractors extractors=new Extractors(configuration.arrayDelimiter());
  private final Header.Entry entry1=new Header.Entry(null,Type.START_ID,null,extractors.int_());
  private final Header.Entry entry2=new Header.Entry(null,Type.TYPE,null,extractors.string());
  private final Header.Entry entry3=new Header.Entry(null,Type.END_ID,null,extractors.int_());
  @Test public void shouldProvideDelimiterAfterFirstEmptyField(){
    StringDeserialization deserialization=new StringDeserialization(configuration);
    deserialization.handle(entry1,null);
    deserialization.handle(entry2,"MyType");
    deserialization.handle(entry3,123);
    String line=deserialization.materialize();
    assertEquals(line,",MyType,123");
  }
  @Test public void shouldProvideDelimiterBeforeLastEmptyField(){
    StringDeserialization deserialization=new StringDeserialization(configuration);
    deserialization.handle(entry1,123);
    deserialization.handle(entry2,"MyType");
    deserialization.handle(entry3,null);
    String line=deserialization.materialize();
    assertEquals(line,"123,MyType,");
  }
}
