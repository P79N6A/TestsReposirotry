@RunWith(MockitoJUnitRunner.class) public class OnFileTest {
  @Mock public ThrowingConsumer<Path,IOException> operation;
  @Mock public FileVisitor<Path> wrapped;
  @Test public void shouldNotOperateOnDirectories() throws IOException {
    Path dir=Paths.get("/some/path");
    onFile(operation,wrapped).preVisitDirectory(dir,null);
    verify(operation,never()).accept(dir);
  }
  @Test public void shouldOperateOnFiles() throws IOException {
    Path file=Paths.get("/some/path");
    onFile(operation,wrapped).visitFile(file,null);
    verify(operation).accept(file);
  }
}
