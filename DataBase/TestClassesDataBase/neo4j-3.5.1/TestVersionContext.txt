private class TestVersionContext extends TransactionVersionContext {
  private boolean useCorrectLastCommittedTxId;
  private int additionalAttempts;
  TestVersionContext(  LongSupplier transactionIdSupplier){
    super(transactionIdSupplier);
  }
  @Override public long lastClosedTransactionId(){
    return useCorrectLastCommittedTxId ? TransactionIdStore.BASE_TX_ID : super.lastClosedTransactionId();
  }
  @Override public void markAsDirty(){
    super.markAsDirty();
    useCorrectLastCommittedTxId=true;
  }
  @Override public boolean isDirty(){
    additionalAttempts++;
    return super.isDirty();
  }
  int getAdditionalAttempts(){
    return additionalAttempts;
  }
}
