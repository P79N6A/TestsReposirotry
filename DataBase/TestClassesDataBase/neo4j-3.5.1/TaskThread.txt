private static class TaskThread extends Thread implements ThreadInfo {
  private final Task[] tasks;
  private Exception failure;
  TaskThread(  String name,  Task[] tasks){
    super(name);
    this.tasks=tasks;
  }
  void complete(  List<Throwable> failures,  long timeout,  TimeUnit unit) throws InterruptedException {
    join(unit.toMillis(timeout));
    if (isAlive()) {
      failures.add(new ThreadStillRunningException(this));
    }
    if (failure != null) {
      failures.add(failure);
    }
  }
  @Override public void run(){
    try {
      for (      Task task : tasks) {
        task.perform();
      }
    }
 catch (    Exception e) {
      failure=e;
    }
  }
  @Override public Object blocker(){
    return getBlocker(this);
  }
}
