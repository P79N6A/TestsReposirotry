public static class JmxServiceDocTest {
  public JmxService jmxService;
  private final URI uri=URI.create("http://peteriscool.com:6666/");
  @Test public void correctRepresentation(){
    Response resp=jmxService.getServiceDefinition();
    assertEquals(200,resp.getStatus());
    String json=UTF8.decode((byte[])resp.getEntity());
    MatcherAssert.assertThat(json,containsString("resources"));
    MatcherAssert.assertThat(json,containsString(uri.toString()));
    MatcherAssert.assertThat(json,containsString("jmx/domain/{domain}/{objectName}"));
  }
  @Test public void shouldListDomainsCorrectly(){
    Response resp=jmxService.listDomains();
    assertEquals(200,resp.getStatus());
  }
  @Test public void testwork(){
    jmxService.queryBeans("[\"*:*\"]");
  }
  @Before public void setUp(){
    this.jmxService=new JmxService(new OutputFormat(new JsonFormat(),uri,null),null);
  }
}
