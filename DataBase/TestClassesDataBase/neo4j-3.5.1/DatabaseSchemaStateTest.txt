public class DatabaseSchemaStateTest {
  private final AssertableLogProvider logProvider=new AssertableLogProvider();
  private DatabaseSchemaState stateStore;
  @Test public void should_apply_updates_correctly(){
    stateStore.put("key","created_value");
    String result=stateStore.get("key");
    assertEquals("created_value",result);
  }
  @Test public void should_flush(){
    stateStore.put("key","created_value");
    stateStore.clear();
    String result=stateStore.get("key");
    assertNull(result);
    logProvider.assertExactly(inLog(DatabaseSchemaState.class).debug("Schema state store has been cleared."));
  }
  @Before public void before(){
    this.stateStore=new DatabaseSchemaState(logProvider);
  }
}
