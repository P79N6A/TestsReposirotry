public class StringEncoderTest {
  @Test public void shouldEncodeStringWithZeroLength(){
    Encoder encoder=new StringEncoder();
    long eId=encoder.encode("");
    assertTrue(eId != 0);
  }
  @Test public void shouldEncodeStringWithAnyLength(){
    Encoder encoder=new StringEncoder();
    MutableLongSet encoded=new LongHashSet();
    int total=1_000;
    int duplicates=0;
    for (int i=0; i < total; i++) {
      long encode=encoder.encode(abcStringOfLength(i));
      assertTrue(encode != 0);
      if (!encoded.add(encode)) {
        duplicates++;
      }
    }
    assertTrue(((float)duplicates / (float)total) < 0.01f);
  }
  private String abcStringOfLength(  int length){
    char[] chars=new char[length];
    for (int i=0; i < length; i++) {
      int ch='a' + (i % 20);
      chars[i]=(char)ch;
    }
    return new String(chars);
  }
}
