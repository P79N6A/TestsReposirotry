public class ConfigurationBeanIT {
  private static GraphDatabaseService graphdb;
  @BeforeClass public static void startDb(){
    graphdb=new TestGraphDatabaseFactory().newImpermanentDatabaseBuilder().newGraphDatabase();
  }
  @AfterClass public static void stopDb(){
    if (graphdb != null) {
      graphdb.shutdown();
    }
    graphdb=null;
  }
  @Test public void durationListedWithUnit(){
    ConfigurationBean configurationBean=((GraphDatabaseAPI)graphdb).getDependencyResolver().resolveDependency(JmxKernelExtension.class).getSingleManagementBean(ConfigurationBean.class);
    Object v=configurationBean.getAttribute(GraphDatabaseSettings.log_queries_threshold.name());
    assertEquals("0ms",v);
    AttributeList attrs=configurationBean.getAttributes(new String[]{GraphDatabaseSettings.log_queries_threshold.name()});
    assertEquals(1,attrs.size());
    Attribute attr=(Attribute)attrs.get(0);
    assertEquals("0ms",attr.getValue());
    assertEquals("dbms.logs.query.threshold = 0ms",attr.toString());
  }
}
