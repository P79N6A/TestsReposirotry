public class UpdateCapturingIndexUpdater implements IndexUpdater {
  private final IndexUpdater actual;
  private final Collection<IndexEntryUpdate<?>> updatesTarget;
  UpdateCapturingIndexUpdater(  IndexUpdater actual,  Collection<IndexEntryUpdate<?>> updatesTarget){
    this.actual=actual;
    this.updatesTarget=updatesTarget;
  }
  @Override public void process(  IndexEntryUpdate<?> update) throws IndexEntryConflictException {
    actual.process(update);
    updatesTarget.add(update);
  }
  @Override public void close() throws IndexEntryConflictException {
    actual.close();
  }
}
