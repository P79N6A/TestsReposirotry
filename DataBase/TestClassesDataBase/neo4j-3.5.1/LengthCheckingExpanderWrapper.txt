private static class LengthCheckingExpanderWrapper implements PathExpander<Object> {
  private final PathExpander expander;
  LengthCheckingExpanderWrapper(  PathExpander expander){
    this.expander=expander;
  }
  @Override @SuppressWarnings("unchecked") public Iterable<Relationship> expand(  Path path,  BranchState<Object> state){
    if (path.startNode().equals(path.endNode())) {
      assertEquals("Path length must be zero",0,path.length());
    }
 else {
      assertTrue("Path length must be positive",path.length() > 0);
    }
    return expander.expand(path,state);
  }
  @Override public PathExpander<Object> reverse(){
    return new LengthCheckingExpanderWrapper(expander.reverse());
  }
}
