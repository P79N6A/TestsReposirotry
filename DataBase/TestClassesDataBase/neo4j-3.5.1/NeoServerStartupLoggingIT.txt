public class NeoServerStartupLoggingIT extends ExclusiveServerTestBase {
  private static ByteArrayOutputStream out;
  private static NeoServer server;
  @BeforeClass public static void setupServer() throws IOException {
    out=new ByteArrayOutputStream();
    server=ServerHelper.createNonPersistentServer(FormattedLogProvider.toOutputStream(out));
  }
  @Before public void cleanTheDatabase(){
    ServerHelper.cleanTheDatabase(server);
  }
  @AfterClass public static void stopServer(){
    server.stop();
  }
  @Test public void shouldLogStartup(){
    String logContent=out.toString();
    assertThat(logContent.length(),is(greaterThan(0)));
    assertThat(logContent,containsString(NEO4J_IS_STARTING_MESSAGE));
    Client nonRedirectingClient=Client.create();
    nonRedirectingClient.setFollowRedirects(false);
    final JaxRsResponse response=new RestRequest(server.baseUri(),nonRedirectingClient).get();
    assertThat(response.getStatus(),is(greaterThan(199)));
  }
}
