public class Events {
  private final List<String> collected;
  private Events(){
    collected=new CopyOnWriteArrayList<>();
  }
  public Task trigger(  final String event){
    return () -> collected.add(event);
  }
  public void assertInOrder(  String... events) throws Exception {
    try {
      completeThreads();
    }
 catch (    Error|Exception ok) {
      throw ok;
    }
catch (    Throwable throwable) {
      throw new Exception("Unexpected Throwable",throwable);
    }
    String[] actual=collected.toArray(new String[events.length]);
    assertArrayEquals(events,actual);
  }
  public List<String> snapshot(){
    return new ArrayList<>(collected);
  }
}
