private class Page {
  private final PageType type;
  private final PageCorruption[] pageCorruptions;
  private Page(  PageType type,  PageCorruption... pageCorruptions){
    this.type=type;
    this.pageCorruptions=pageCorruptions;
  }
  private void write(  PageCursor cursor,  CorruptibleTreeNode node,  Layout<MutableLong,MutableLong> layout,  int stableGeneration,  int unstableGeneration,  int crashGeneration){
    type.write(cursor,node,layout,oldStableGeneration,stableGeneration);
    Arrays.stream(pageCorruptions).forEach(pc -> pc.corrupt(cursor,node,stableGeneration,unstableGeneration,crashGeneration));
  }
}
