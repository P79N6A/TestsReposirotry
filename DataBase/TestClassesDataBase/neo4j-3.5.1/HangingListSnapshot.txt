class HangingListSnapshot extends ListSnapshot<User> {
  private final DoubleLatch latch;
  HangingListSnapshot(  DoubleLatch latch,  long timestamp,  List<User> values){
    super(timestamp,values,true);
    this.latch=latch;
  }
  @Override public long timestamp(){
    latch.start();
    latch.finishAndWaitForAllToFinish();
    return super.timestamp();
  }
}
