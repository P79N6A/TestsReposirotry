private static final class CountingPrimitiveLongIteratorResource implements LongIterator, AutoCloseable {
  private final LongIterator delegate;
  private final AtomicInteger closeCounter;
  private CountingPrimitiveLongIteratorResource(  LongIterator delegate,  AtomicInteger closeCounter){
    this.delegate=delegate;
    this.closeCounter=closeCounter;
  }
  @Override public void close(){
    closeCounter.incrementAndGet();
  }
  @Override public boolean hasNext(){
    return delegate.hasNext();
  }
  @Override public long next(){
    return delegate.next();
  }
}
