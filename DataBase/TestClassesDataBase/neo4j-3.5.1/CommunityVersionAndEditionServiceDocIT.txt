public static class CommunityVersionAndEditionServiceDocIT extends ExclusiveServerTestBase {
  private static NeoServer server;
  private static FunctionalTestHelper functionalTestHelper;
  @ClassRule public static TemporaryFolder staticFolder=new TemporaryFolder();
  @Rule public TestData<RESTRequestGenerator> gen=TestData.producedThrough(RESTRequestGenerator.PRODUCER);
  @BeforeClass public static void setupServer() throws Exception {
    server=CommunityServerBuilder.server().usingDataDir(staticFolder.getRoot().getAbsolutePath()).build();
    suppressAll().call((Callable<Void>)() -> {
      server.start();
      return null;
    }
);
    functionalTestHelper=new FunctionalTestHelper(server);
  }
  @Before public void setupTheDatabase(){
  }
  @AfterClass public static void stopServer() throws Exception {
    suppressAll().call((Callable<Void>)() -> {
      server.stop();
      return null;
    }
);
  }
  @Test public void shouldReportCommunityEdition() throws Exception {
    String releaseVersion=server.getDatabase().getGraph().getDependencyResolver().resolveDependency(KernelData.class).version().getReleaseVersion();
    HTTP.Response res=HTTP.GET(functionalTestHelper.managementUri() + "/" + VersionAndEditionService.SERVER_PATH);
    assertEquals(200,res.status());
    assertThat(res.get("edition").asText(),equalTo("community"));
    assertThat(res.get("version").asText(),equalTo(releaseVersion));
  }
}
