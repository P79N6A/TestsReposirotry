public class CapturingCommitProcess implements TransactionCommitProcess {
  private long txId=TransactionIdStore.BASE_TX_ID;
  public TransactionRepresentation transaction;
  @Override public long commit(  TransactionToApply batch,  CommitEvent commitEvent,  TransactionApplicationMode mode){
    assert transaction == null : "Designed to only allow one transaction";
    assert batch.next() == null : "Designed to only allow one transaction";
    transaction=batch.transactionRepresentation();
    return ++txId;
  }
}
