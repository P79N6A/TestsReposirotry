public class SuppressOutputExtension extends StatefullFieldExtension<SuppressOutput> implements BeforeEachCallback, AfterEachCallback {
  private static final String SUPPRESS_OUTPUT="suppressOutput";
  private static final Namespace SUPPRESS_OUTPUT_NAMESPACE=Namespace.create(SUPPRESS_OUTPUT);
  @Override protected String getFieldKey(){
    return SUPPRESS_OUTPUT;
  }
  @Override protected Class<SuppressOutput> getFieldType(){
    return SuppressOutput.class;
  }
  @Override protected SuppressOutput createField(  ExtensionContext extensionContext){
    return SuppressOutput.suppressAll();
  }
  @Override protected Namespace getNameSpace(){
    return SUPPRESS_OUTPUT_NAMESPACE;
  }
  @Override public void afterEach(  ExtensionContext context){
    getStoredValue(context).releaseVoices(context.getExecutionException().isPresent());
    removeStoredValue(context);
  }
  @Override public void beforeEach(  ExtensionContext context){
    getStoredValue(context).captureVoices();
  }
}
