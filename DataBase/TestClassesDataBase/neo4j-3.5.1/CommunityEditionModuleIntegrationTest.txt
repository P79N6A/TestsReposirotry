@ExtendWith(TestDirectoryExtension.class) class CommunityEditionModuleIntegrationTest {
  @Inject private TestDirectory testDirectory;
  @Test void createBufferedIdComponentsByDefault(){
    GraphDatabaseAPI database=(GraphDatabaseAPI)new GraphDatabaseFactory().newEmbeddedDatabase(testDirectory.storeDir());
    try {
      DependencyResolver dependencyResolver=database.getDependencyResolver();
      IdController idController=dependencyResolver.resolveDependency(IdController.class);
      IdGeneratorFactory idGeneratorFactory=dependencyResolver.resolveDependency(IdGeneratorFactory.class);
      assertThat(idController,instanceOf(BufferedIdController.class));
      assertThat(idGeneratorFactory,instanceOf(BufferingIdGeneratorFactory.class));
    }
  finally {
      database.shutdown();
    }
  }
  @Test void fileWatcherFileNameFilter(){
    DatabaseLayout layout=testDirectory.databaseLayout();
    Predicate<String> filter=CommunityEditionModule.communityFileWatcherFileNameFilter();
    assertFalse(filter.test(layout.metadataStore().getName()));
    assertFalse(filter.test(layout.nodeStore().getName()));
    assertTrue(filter.test(TransactionLogFiles.DEFAULT_NAME + ".1"));
    assertTrue(filter.test(IndexConfigStore.INDEX_DB_FILE_NAME + ".any"));
  }
}
