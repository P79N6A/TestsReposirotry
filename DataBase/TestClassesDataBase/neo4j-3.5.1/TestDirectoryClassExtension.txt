public class TestDirectoryClassExtension implements BeforeAllCallback, AfterAllCallback {
  private TestDirectory testDirectory;
  @Override public void beforeAll(  ExtensionContext context) throws Exception {
    testDirectory=TestDirectory.testDirectory();
    Class testClass=context.getRequiredTestClass();
    String testName=context.getRequiredTestClass().getName();
    testDirectory.prepareDirectory(testClass,testName);
  }
  public TestDirectory getTestDirectory(){
    return testDirectory;
  }
  @Override public void afterAll(  ExtensionContext context){
    try {
      testDirectory.complete(!context.getExecutionException().isPresent());
    }
 catch (    IOException e) {
      throw new RuntimeException(e);
    }
  }
}
