private static class CountingMonitor implements TransactionTemplate.Monitor {
  int numRetry;
  List<Throwable> fails=new ArrayList<>();
  List<Throwable> failures=new ArrayList<>();
  @Override public void failure(  Throwable ex){
    failures.add(ex);
  }
  @Override public void failed(  Throwable ex){
    fails.add(ex);
  }
  @Override public void retrying(){
    numRetry++;
  }
}
