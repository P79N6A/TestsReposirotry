@SuppressWarnings("deprecation") private class Database extends ImpermanentGraphDatabase {
  Database(  File storeDir){
    super(storeDir);
  }
  @Override protected void create(  File storeDir,  Map<String,String> params,  GraphDatabaseFacadeFactory.Dependencies dependencies){
    File absoluteStoreDir=storeDir.getAbsoluteFile();
    File databasesRoot=absoluteStoreDir.getParentFile();
    params.put(GraphDatabaseSettings.active_database.name(),absoluteStoreDir.getName());
    params.put(GraphDatabaseSettings.databases_root_path.name(),databasesRoot.getAbsolutePath());
    new GraphDatabaseFacadeFactory(DatabaseInfo.COMMUNITY,CommunityEditionModule::new){
      @Override protected PlatformModule createPlatform(      File storeDir,      Config config,      Dependencies dependencies){
        return new ImpermanentPlatformModule(storeDir,config,databaseInfo,dependencies){
          @Override protected FileSystemAbstraction createFileSystemAbstraction(){
            return fs;
          }
        }
;
      }
    }
.initFacade(databasesRoot,params,dependencies,this);
  }
}
