/** 
 * Unit test for  {@link FragmentedMp4Extractor}. 
 */
@RunWith(RobolectricTestRunner.class) public final class FragmentedMp4ExtractorTest {
  @Test public void testSample() throws Exception {
    ExtractorAsserts.assertBehavior(getExtractorFactory(Collections.emptyList()),"mp4/sample_fragmented.mp4");
  }
  @Test public void testSampleSeekable() throws Exception {
    ExtractorAsserts.assertBehavior(getExtractorFactory(Collections.emptyList()),"mp4/sample_fragmented_seekable.mp4");
  }
  @Test public void testSampleWithSeiPayloadParsing() throws Exception {
    ExtractorFactory extractorFactory=getExtractorFactory(Collections.singletonList(Format.createTextSampleFormat(null,MimeTypes.APPLICATION_CEA608,0,null)));
    ExtractorAsserts.assertBehavior(extractorFactory,"mp4/sample_fragmented_sei.mp4");
  }
  private static ExtractorFactory getExtractorFactory(  final List<Format> closedCaptionFormats){
    return () -> new FragmentedMp4Extractor(0,null,null,null,closedCaptionFormats);
  }
}
