private static final class TestSource extends BaseDataSource {
  public TestSource(  boolean isNetwork){
    super(isNetwork);
  }
  @Override public long open(  DataSpec dataSpec) throws IOException {
    transferInitializing(dataSpec);
    transferStarted(dataSpec);
    return C.LENGTH_UNSET;
  }
  @Override public int read(  byte[] buffer,  int offset,  int readLength) throws IOException {
    bytesTransferred(readLength);
    return readLength;
  }
  @Override public @Nullable Uri getUri(){
    throw new UnsupportedOperationException();
  }
  @Override public void close() throws IOException {
    transferEnded();
  }
}
