private static final class TimelineGrabber implements Runnable {
  private final MediaSourceTestRunner testRunner;
  private final ConditionVariable finishedCondition;
  private Timeline timeline;
  private AssertionError error;
  public TimelineGrabber(  MediaSourceTestRunner testRunner){
    this.testRunner=testRunner;
    finishedCondition=new ConditionVariable();
  }
  @Override public void run(){
    try {
      timeline=testRunner.assertTimelineChange();
    }
 catch (    AssertionError e) {
      error=e;
    }
    finishedCondition.open();
  }
  public Timeline assertTimelineChangeBlocking(){
    assertThat(finishedCondition.block(MediaSourceTestRunner.TIMEOUT_MS)).isTrue();
    if (error != null) {
      throw error;
    }
    return timeline;
  }
}
