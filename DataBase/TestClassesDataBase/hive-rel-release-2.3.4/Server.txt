static class Server extends HadoopThriftAuthBridge.Server {
  public Server() throws TTransportException {
    super();
  }
  @Override public TTransportFactory createTransportFactory(  Map<String,String> saslProps) throws TTransportException {
    TSaslServerTransport.Factory transFactory=new TSaslServerTransport.Factory();
    transFactory.addServerDefinition(AuthMethod.DIGEST.getMechanismName(),null,SaslRpcServer.SASL_DEFAULT_REALM,saslProps,new SaslDigestCallbackHandler(secretManager));
    return new TUGIAssumingTransportFactory(transFactory,realUgi);
  }
}
