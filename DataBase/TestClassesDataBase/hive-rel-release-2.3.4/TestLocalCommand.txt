public class TestLocalCommand {
  private static final Logger LOG=LoggerFactory.getLogger(TestLocalCommand.class);
  @Test public void testSuccess() throws Exception {
    LocalCommand.CollectPolicy output=new LocalCommand.CollectPolicy();
    LocalCommand command=(new LocalCommandFactory(LOG)).create(output,"echo 123");
    Thread.sleep(500L);
    Assert.assertEquals(0,command.getExitCode());
    Assert.assertEquals(0,command.getExitCode());
    Assert.assertEquals("123",Strings.nullToEmpty(output.getOutput()).trim());
  }
  @Test public void testFailure() throws Exception {
    LocalCommand.CollectPolicy output=new LocalCommand.CollectPolicy();
    LocalCommand command=(new LocalCommandFactory(LOG)).create(output,"exit 1");
    Assert.assertEquals(1,command.getExitCode());
    Assert.assertEquals(1,command.getExitCode());
    Assert.assertEquals("",output.getOutput());
  }
}
