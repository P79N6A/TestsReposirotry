public class InmemoryChunksTrackerTest {
  @Test public void testTracker_1() throws Exception {
    val array=Nd4j.linspace(1,100000,10000).reshape(-1,1000);
    val splitter=MessageSplitter.getInstance();
    val message=new GradientsUpdateMessage("123",array);
    val messages=new ArrayList<VoidChunk>(splitter.split(message,16384));
    val tracker=new InmemoryChunksTracker<GradientsUpdateMessage>(messages.get(0));
    assertFalse(tracker.isComplete());
    for (    val m : messages)     tracker.append(m);
    assertTrue(tracker.isComplete());
    val des=tracker.getMessage();
    assertNotNull(des);
    val restored=des.getPayload();
    assertNotNull(restored);
    assertEquals(array,restored);
  }
}
