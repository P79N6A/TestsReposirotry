@Slf4j public class BaseDL4JTest {
  /** 
 * Override this to set the profiling mode for the tests defined in the child class
 */
  public OpExecutioner.ProfilingMode getProfilingMode(){
    return OpExecutioner.ProfilingMode.SCOPE_PANIC;
  }
  /** 
 * Override this to set the datatype of the tests defined in the child class
 */
  public DataBuffer.Type getDataType(){
    return DataBuffer.Type.FLOAT;
  }
  @Before public void beforeTest(){
    Nd4j.getExecutioner().setProfilingMode(getProfilingMode());
    Nd4j.setDataType(getDataType());
  }
  @After public void afterTest(){
    Nd4j.getWorkspaceManager().destroyAllWorkspacesForCurrentThread();
    MemoryWorkspace currWS=Nd4j.getMemoryManager().getCurrentWorkspace();
    Nd4j.getMemoryManager().setCurrentWorkspace(null);
    if (currWS != null) {
      log.error("Open workspace leaked from test! Exiting - {}, isOpen = {} - {}",currWS.getId(),currWS.isScopeActive(),currWS);
      System.exit(1);
    }
  }
}
