public class IOTimingTest {
  @Test public void testTiming() throws Exception {
    final RecordReader image=new ImageRecordReader(28,28);
    final NativeImageLoader nativeImageLoader=new NativeImageLoader(28,28);
    TimingStatistics timingStatistics=IOTiming.timeNDArrayCreation(image,new ClassPathResource("datavec-perf/largestblobtest.jpg").getInputStream(),new IOTiming.INDArrayCreationFunction(){
      @Override public INDArray createFromRecord(      List<Writable> record){
        NDArrayWritable imageWritable=(NDArrayWritable)record.get(0);
        return imageWritable.get();
      }
    }
);
    System.out.println(timingStatistics);
    TimingStatistics timingStatistics1=IOTiming.averageFileRead(1000,image,new ClassPathResource("datavec-perf/largestblobtest.jpg").getFile(),new IOTiming.INDArrayCreationFunction(){
      @Override public INDArray createFromRecord(      List<Writable> record){
        NDArrayWritable imageWritable=(NDArrayWritable)record.get(0);
        return imageWritable.get();
      }
    }
);
    System.out.println(timingStatistics1);
  }
}
