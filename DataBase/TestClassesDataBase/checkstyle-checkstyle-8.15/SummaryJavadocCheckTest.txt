public class SummaryJavadocCheckTest extends AbstractModuleTestSupport {
  @Override protected String getPackageLocation(){
    return "com/puppycrawl/tools/checkstyle/checks/javadoc/summaryjavadoc";
  }
  @Test public void testGetRequiredTokens(){
    final SummaryJavadocCheck checkObj=new SummaryJavadocCheck();
    final int[] expected={TokenTypes.BLOCK_COMMENT_BEGIN};
    assertArrayEquals("Default required tokens are invalid",expected,checkObj.getRequiredTokens());
  }
  @Test public void testCorrect() throws Exception {
    final DefaultConfiguration checkConfig=createModuleConfig(SummaryJavadocCheck.class);
    checkConfig.addAttribute("forbiddenSummaryFragments","^@return the *|^This method returns *|^A [{]@code [a-zA-Z0-9]+[}]( is a )");
    final String[] expected=CommonUtil.EMPTY_STRING_ARRAY;
    verify(checkConfig,getPath("InputSummaryJavadocCorrect.java"),expected);
  }
  @Test public void testIncorrect() throws Exception {
    final DefaultConfiguration checkConfig=createModuleConfig(SummaryJavadocCheck.class);
    checkConfig.addAttribute("forbiddenSummaryFragments","^@return the *|^This method returns |^A [{]@code [a-zA-Z0-9]+[}]( is a )");
    final String[] expected={"14: " + getCheckMessage(MSG_SUMMARY_JAVADOC_MISSING),"32: " + getCheckMessage(MSG_SUMMARY_JAVADOC_MISSING),"37: " + getCheckMessage(MSG_SUMMARY_FIRST_SENTENCE),"47: " + getCheckMessage(MSG_SUMMARY_JAVADOC),"53: " + getCheckMessage(MSG_SUMMARY_JAVADOC_MISSING),"58: " + getCheckMessage(MSG_SUMMARY_JAVADOC_MISSING),"69: " + getCheckMessage(MSG_SUMMARY_JAVADOC_MISSING),"83: " + getCheckMessage(MSG_SUMMARY_JAVADOC),"103: " + getCheckMessage(MSG_SUMMARY_JAVADOC_MISSING),"116: " + getCheckMessage(MSG_SUMMARY_FIRST_SENTENCE),"121: " + getCheckMessage(MSG_SUMMARY_JAVADOC_MISSING),"126: " + getCheckMessage(MSG_SUMMARY_JAVADOC_MISSING),"132: " + getCheckMessage(MSG_SUMMARY_FIRST_SENTENCE)};
    verify(checkConfig,getPath("InputSummaryJavadocIncorrect.java"),expected);
  }
  @Test public void testPeriod() throws Exception {
    final DefaultConfiguration checkConfig=createModuleConfig(SummaryJavadocCheck.class);
    checkConfig.addAttribute("period","_");
    final String[] expected={"5: " + getCheckMessage(MSG_SUMMARY_FIRST_SENTENCE),"10: " + getCheckMessage(MSG_SUMMARY_FIRST_SENTENCE)};
    verify(checkConfig,getPath("InputSummaryJavadocPeriod.java"),expected);
  }
  @Test public void testNoPeriod() throws Exception {
    final DefaultConfiguration checkConfig=createModuleConfig(SummaryJavadocCheck.class);
    checkConfig.addAttribute("period","");
    final String[] expected=CommonUtil.EMPTY_STRING_ARRAY;
    verify(checkConfig,getPath("InputSummaryJavadocNoPeriod.java"),expected);
  }
  @Test public void testDefaultConfiguration() throws Exception {
    final DefaultConfiguration checkConfig=createModuleConfig(SummaryJavadocCheck.class);
    final String[] expected={"14: " + getCheckMessage(MSG_SUMMARY_JAVADOC_MISSING),"32: " + getCheckMessage(MSG_SUMMARY_JAVADOC_MISSING),"37: " + getCheckMessage(MSG_SUMMARY_FIRST_SENTENCE),"53: " + getCheckMessage(MSG_SUMMARY_JAVADOC_MISSING),"58: " + getCheckMessage(MSG_SUMMARY_JAVADOC_MISSING),"69: " + getCheckMessage(MSG_SUMMARY_JAVADOC_MISSING),"103: " + getCheckMessage(MSG_SUMMARY_JAVADOC_MISSING),"116: " + getCheckMessage(MSG_SUMMARY_FIRST_SENTENCE),"121: " + getCheckMessage(MSG_SUMMARY_JAVADOC_MISSING),"126: " + getCheckMessage(MSG_SUMMARY_JAVADOC_MISSING),"132: " + getCheckMessage(MSG_SUMMARY_FIRST_SENTENCE)};
    createChecker(checkConfig);
    verify(checkConfig,getPath("InputSummaryJavadocIncorrect.java"),expected);
  }
  @Test public void testPeriodAtEnd() throws Exception {
    final DefaultConfiguration checkConfig=createModuleConfig(SummaryJavadocCheck.class);
    checkConfig.addAttribute("period",".");
    final String[] expected={"10: " + getCheckMessage(MSG_SUMMARY_JAVADOC_MISSING),"17: " + getCheckMessage(MSG_SUMMARY_JAVADOC_MISSING),"24: " + getCheckMessage(MSG_SUMMARY_JAVADOC_MISSING),"31: " + getCheckMessage(MSG_SUMMARY_FIRST_SENTENCE),"51: " + getCheckMessage(MSG_SUMMARY_FIRST_SENTENCE)};
    verify(checkConfig,getPath("InputSummaryJavadocPeriodAtEnd.java"),expected);
  }
}
