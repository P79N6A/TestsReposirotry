public class JavadocDetailNodeParserTest extends AbstractModuleTestSupport {
  private static final String OS_NAME=System.getProperty("os.name").toLowerCase(ENGLISH);
  @Override protected String getPackageLocation(){
    return "com/puppycrawl/tools/checkstyle/javadocdetailnodeparser";
  }
  @Test public void testParseJavadocAsDetailNode() throws Exception {
    final DetailAST ast=JavaParser.parseFile(new File(getPath("InputJavadocDetailNodeParser.java")),JavaParser.Options.WITH_COMMENTS).getNextSibling().getFirstChild().getFirstChild();
    final JavadocDetailNodeParser parser=new JavadocDetailNodeParser();
    final JavadocDetailNodeParser.ParseStatus status=parser.parseJavadocAsDetailNode(ast);
    final String actual=DetailNodeTreeStringPrinter.printTree(status.getTree(),"","");
    final String expected;
    if (OS_NAME.startsWith("windows")) {
      expected=new String(Files.readAllBytes(Paths.get(getPath("ExpectedJavadocDetailNodeParserWindows.txt"))),StandardCharsets.UTF_8);
    }
 else {
      expected=new String(Files.readAllBytes(Paths.get(getPath("ExpectedJavadocDetailNodeParser.txt"))),StandardCharsets.UTF_8);
    }
    assertEquals("Invalid parse result",expected,actual);
  }
}
