/** 
 * @author Tomasz Bak
 */
public class AbstractJersey2EurekaHttpClientTest extends EurekaHttpClientCompatibilityTestSuite {
  private AbstractJersey2EurekaHttpClient jersey2HttpClient;
  @Override @After public void tearDown() throws Exception {
    if (jersey2HttpClient != null) {
      jersey2HttpClient.shutdown();
    }
    super.tearDown();
  }
  @Override protected EurekaHttpClient getEurekaHttpClient(  URI serviceURI){
    Jersey2ApplicationClientFactoryBuilder factoryBuilder=Jersey2ApplicationClientFactory.newBuilder();
    if (serviceURI.getUserInfo() != null) {
      factoryBuilder.withFeature(HttpAuthenticationFeature.basicBuilder().build());
    }
    TransportClientFactory clientFactory=factoryBuilder.build();
    jersey2HttpClient=(AbstractJersey2EurekaHttpClient)clientFactory.newClient(new DefaultEndpoint(serviceURI.toString()));
    return jersey2HttpClient;
  }
}
