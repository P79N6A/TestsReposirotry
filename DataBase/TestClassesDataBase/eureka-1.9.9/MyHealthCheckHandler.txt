private static class MyHealthCheckHandler implements HealthCheckHandler {
  private final InstanceInfo.InstanceStatus health;
  private volatile boolean invoked;
  volatile boolean shouldException;
  private MyHealthCheckHandler(  InstanceInfo.InstanceStatus health){
    this.health=health;
  }
  public boolean isInvoked(){
    return invoked;
  }
  public void reset(){
    shouldException=false;
    invoked=false;
  }
  @Override public InstanceInfo.InstanceStatus getStatus(  InstanceInfo.InstanceStatus currentStatus){
    invoked=true;
    if (shouldException) {
      throw new RuntimeException("test induced exception");
    }
    return health;
  }
}
