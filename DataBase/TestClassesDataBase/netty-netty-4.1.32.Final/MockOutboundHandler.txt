private class MockOutboundHandler extends ChannelOutboundHandlerAdapter {
  @Override public void write(  ChannelHandlerContext ctx,  Object msg,  ChannelPromise promise) throws Exception {
    responses.add((FullHttpResponse)msg);
    promise.setSuccess();
  }
  @Override public void flush(  ChannelHandlerContext ctx) throws Exception {
  }
}
