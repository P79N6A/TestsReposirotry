private static final class StringInboundHandler extends ChannelInboundHandlerAdapter {
  boolean called;
  @Override public void channelRead(  ChannelHandlerContext ctx,  Object msg) throws Exception {
    called=true;
    if (!(msg instanceof String)) {
      ctx.fireChannelRead(msg);
    }
  }
}
