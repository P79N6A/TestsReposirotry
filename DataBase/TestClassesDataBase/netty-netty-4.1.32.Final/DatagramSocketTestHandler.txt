@ChannelHandler.Sharable private static class DatagramSocketTestHandler extends ChannelInboundHandlerAdapter {
  private final AtomicBoolean received;
  DatagramSocketTestHandler(  AtomicBoolean received){
    this.received=received;
  }
  @Override public void channelRead(  ChannelHandlerContext ctx,  Object msg) throws Exception {
    ReferenceCountUtil.release(msg);
    received.set(true);
  }
}
