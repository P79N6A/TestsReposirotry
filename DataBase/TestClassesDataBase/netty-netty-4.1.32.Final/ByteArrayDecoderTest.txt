public class ByteArrayDecoderTest {
  private EmbeddedChannel ch;
  @Before public void setUp(){
    ch=new EmbeddedChannel(new ByteArrayDecoder());
  }
  @Test public void testDecode(){
    byte[] b=new byte[2048];
    new Random().nextBytes(b);
    ch.writeInbound(wrappedBuffer(b));
    assertThat((byte[])ch.readInbound(),is(b));
  }
  @Test public void testDecodeEmpty(){
    ch.writeInbound(EMPTY_BUFFER);
    assertThat((byte[])ch.readInbound(),is(EmptyArrays.EMPTY_BYTES));
  }
  @Test public void testDecodeOtherType(){
    String str="Meep!";
    ch.writeInbound(str);
    assertThat(ch.readInbound(),is((Object)str));
  }
}
