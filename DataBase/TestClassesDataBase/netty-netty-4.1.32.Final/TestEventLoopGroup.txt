private static final class TestEventLoopGroup extends DefaultEventLoopGroup {
  ChannelPromise promise;
  TestEventLoopGroup(){
    super(1);
  }
  @Override public ChannelFuture register(  Channel channel){
    super.register(channel).syncUninterruptibly();
    promise=channel.newPromise();
    return promise;
  }
  @Override public ChannelFuture register(  ChannelPromise promise){
    throw new UnsupportedOperationException();
  }
  @Override public ChannelFuture register(  Channel channel,  final ChannelPromise promise){
    throw new UnsupportedOperationException();
  }
}
