private static final class TestFastThreadLocal extends FastThreadLocal<String> {
  final AtomicReference<String> onRemovalCalled=new AtomicReference<String>();
  @Override protected String initialValue() throws Exception {
    return Thread.currentThread().getName();
  }
  @Override protected void onRemoval(  String value) throws Exception {
    onRemovalCalled.set(value);
  }
}
