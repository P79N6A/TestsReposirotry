private static final class DisconnectingEmbeddedChannel extends EmbeddedChannel {
  private DisconnectingEmbeddedChannel(  ChannelHandler... handlers){
    super(handlers);
  }
  @Override public ChannelMetadata metadata(){
    return new ChannelMetadata(true);
  }
}
