private static class CustomTextFrameHandler extends ChannelInboundHandlerAdapter {
  private String content;
  @Override public void channelRead(  ChannelHandlerContext ctx,  Object msg) throws Exception {
    assertNull(content);
    content="processed: " + ((TextWebSocketFrame)msg).text();
    ReferenceCountUtil.release(msg);
  }
  String getContent(){
    return content;
  }
}
