public class ByteArrayEncoderTest {
  private EmbeddedChannel ch;
  @Before public void setUp(){
    ch=new EmbeddedChannel(new ByteArrayEncoder());
  }
  @After public void tearDown(){
    assertThat(ch.finish(),is(false));
  }
  @Test public void testEncode(){
    byte[] b=new byte[2048];
    new Random().nextBytes(b);
    ch.writeOutbound(b);
    ByteBuf encoded=ch.readOutbound();
    assertThat(encoded,is(wrappedBuffer(b)));
    encoded.release();
  }
  @Test public void testEncodeEmpty(){
    ch.writeOutbound(EmptyArrays.EMPTY_BYTES);
    assertThat((ByteBuf)ch.readOutbound(),is(sameInstance(EMPTY_BUFFER)));
  }
  @Test public void testEncodeOtherType(){
    String str="Meep!";
    ch.writeOutbound(str);
    assertThat(ch.readOutbound(),is((Object)str));
  }
}
