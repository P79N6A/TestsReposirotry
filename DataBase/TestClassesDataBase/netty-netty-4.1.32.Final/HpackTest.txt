@RunWith(Parameterized.class) public class HpackTest {
  private static final String TEST_DIR='/' + HpackTest.class.getPackage().getName().replaceAll("\\.","/") + "/testdata/";
  private final String fileName;
  public HpackTest(  String fileName){
    this.fileName=fileName;
  }
  @Parameters(name="{0}") public static Collection<Object[]> data(){
    URL url=HpackTest.class.getResource(TEST_DIR);
    File[] files=new File(url.getFile()).listFiles();
    if (files == null) {
      throw new NullPointerException("files");
    }
    ArrayList<Object[]> data=new ArrayList<Object[]>();
    for (    File file : files) {
      data.add(new Object[]{file.getName()});
    }
    return data;
  }
  @Test public void test() throws Exception {
    InputStream is=HpackTest.class.getResourceAsStream(TEST_DIR + fileName);
    HpackTestCase hpackTestCase=HpackTestCase.load(is);
    hpackTestCase.testCompress();
    hpackTestCase.testDecompress();
  }
}
