/** 
 * A custom EasyMock matcher that matches on Logback messages.
 */
private static final class RegexLogMatcher implements ArgumentMatcher<ILoggingEvent> {
  private final String expected;
  private String actualMsg;
  RegexLogMatcher(  String expected){
    this.expected=expected;
  }
  @Override @SuppressWarnings("DynamicRegexReplaceableByCompiledPattern") public boolean matches(  ILoggingEvent actual){
    actualMsg=actual.getMessage().split("(?s)[\\r\\n]+")[0];
    return actualMsg.matches(expected);
  }
}
