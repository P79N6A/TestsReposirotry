/** 
 * Designed to keep reading as long as autoread is enabled.
 */
private static final class TestRecvByteBufAllocator implements RecvByteBufAllocator {
  @Override public ExtendedHandle newHandle(){
    return new ExtendedHandle(){
      private ChannelConfig config;
      private int attemptedBytesRead;
      private int lastBytesRead;
      @Override public ByteBuf allocate(      ByteBufAllocator alloc){
        return alloc.ioBuffer(guess(),guess());
      }
      @Override public int guess(){
        return 1;
      }
      @Override public void reset(      ChannelConfig config){
        this.config=config;
      }
      @Override public void incMessagesRead(      int numMessages){
      }
      @Override public void lastBytesRead(      int bytes){
        lastBytesRead=bytes;
      }
      @Override public int lastBytesRead(){
        return lastBytesRead;
      }
      @Override public void attemptedBytesRead(      int bytes){
        attemptedBytesRead=bytes;
      }
      @Override public int attemptedBytesRead(){
        return attemptedBytesRead;
      }
      @Override public boolean continueReading(){
        return config.isAutoRead();
      }
      @Override public boolean continueReading(      UncheckedBooleanSupplier maybeMoreDataSupplier){
        return config.isAutoRead();
      }
      @Override public void readComplete(){
      }
    }
;
  }
}
