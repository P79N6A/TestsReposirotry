public class DefaultHttpRequestTest {
  @Test public void testHeaderRemoval(){
    HttpMessage m=new DefaultHttpRequest(HttpVersion.HTTP_1_1,HttpMethod.GET,"/");
    HttpHeaders h=m.headers();
    for (int i=0; i < 1000; i++) {
      h.set(of(String.valueOf(i)),AsciiString.EMPTY_STRING);
    }
    for (int i=999; i >= 0; i--) {
      h.remove(of(String.valueOf(i)));
    }
    for (int i=0; i < 1000; i++) {
      assertNull(h.get(of(String.valueOf(i))));
    }
    assertTrue(h.isEmpty());
  }
}
