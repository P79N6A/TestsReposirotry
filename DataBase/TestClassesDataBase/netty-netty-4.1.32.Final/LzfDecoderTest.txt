public class LzfDecoderTest extends AbstractDecoderTest {
  public LzfDecoderTest() throws Exception {
  }
  @Override public void initChannel(){
    channel=new EmbeddedChannel(new LzfDecoder());
  }
  @Test public void testUnexpectedBlockIdentifier() throws Exception {
    expected.expect(DecompressionException.class);
    expected.expectMessage("unexpected block identifier");
    ByteBuf in=Unpooled.buffer();
    in.writeShort(0x1234);
    in.writeByte(BLOCK_TYPE_NON_COMPRESSED);
    in.writeShort(0);
    channel.writeInbound(in);
  }
  @Test public void testUnknownTypeOfChunk() throws Exception {
    expected.expect(DecompressionException.class);
    expected.expectMessage("unknown type of chunk");
    ByteBuf in=Unpooled.buffer();
    in.writeByte(BYTE_Z);
    in.writeByte(BYTE_V);
    in.writeByte(0xFF);
    in.writeInt(0);
    channel.writeInbound(in);
  }
  @Override protected byte[] compress(  byte[] data) throws Exception {
    return LZFEncoder.encode(data);
  }
}
