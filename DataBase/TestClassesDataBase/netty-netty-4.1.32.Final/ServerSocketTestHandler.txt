@ChannelHandler.Sharable private static class ServerSocketTestHandler extends ChannelInboundHandlerAdapter {
  private final AtomicBoolean accepted;
  ServerSocketTestHandler(  AtomicBoolean accepted){
    this.accepted=accepted;
  }
  @Override public void channelActive(  ChannelHandlerContext ctx) throws Exception {
    accepted.set(true);
    ctx.close();
  }
}
