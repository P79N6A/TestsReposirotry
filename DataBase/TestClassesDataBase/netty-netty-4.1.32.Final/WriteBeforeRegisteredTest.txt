public class WriteBeforeRegisteredTest extends AbstractClientSocketTest {
  @Test(timeout=30000) public void testWriteBeforeConnect() throws Throwable {
    run();
  }
  public void testWriteBeforeConnect(  Bootstrap cb) throws Throwable {
    TestHandler h=new TestHandler();
    SocketChannel ch=null;
    try {
      ch=(SocketChannel)cb.handler(h).connect(newSocketAddress()).channel();
      ch.writeAndFlush(Unpooled.wrappedBuffer(new byte[]{1}));
    }
  finally {
      if (ch != null) {
        ch.close();
      }
    }
  }
private static class TestHandler extends ChannelInboundHandlerAdapter {
    @Override public void exceptionCaught(    ChannelHandlerContext ctx,    Throwable cause) throws Exception {
      cause.printStackTrace();
    }
  }
}
