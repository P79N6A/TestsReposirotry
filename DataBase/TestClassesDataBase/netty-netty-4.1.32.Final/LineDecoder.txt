private static final class LineDecoder extends ReplayingDecoder<Void> {
  LineDecoder(){
  }
  @Override protected void decode(  ChannelHandlerContext ctx,  ByteBuf in,  List<Object> out){
    ByteBuf msg=in.readBytes(in.bytesBefore((byte)'\n'));
    out.add(msg);
    in.skipBytes(1);
  }
}
