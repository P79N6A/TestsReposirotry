public class CSVVectorIteratorTest extends MahoutTestCase {
  @Test public void testCount() throws Exception {
    StringWriter sWriter=new StringWriter();
    try (TextualVectorWriter writer=new TextualVectorWriter(sWriter){
      @Override public void write(      Vector vector) throws IOException {
        String vecStr=VectorHelper.vectorToCSVString(vector,false);
        getWriter().write(vecStr);
      }
    }
){
      Iterable<Vector> iter=new RandomVectorIterable(50);
      writer.write(iter);
    }
     Iterator<Vector> csvIter=new CSVVectorIterator(new StringReader(sWriter.getBuffer().toString()));
    int count=0;
    while (csvIter.hasNext()) {
      csvIter.next();
      count++;
    }
    assertEquals(50,count);
  }
}
