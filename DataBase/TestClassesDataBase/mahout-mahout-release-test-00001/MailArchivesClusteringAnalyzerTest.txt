/** 
 * Unit tests for the MailArchivesClusteringAnalyzer text analyzer.
 */
public class MailArchivesClusteringAnalyzerTest extends MahoutTestCase {
  @Test public void testAnalysis() throws Exception {
    Analyzer analyzer=new MailArchivesClusteringAnalyzer();
    String text="A test message\n" + "atokenthatistoolongtobeusefulforclustertextanalysis\n" + "Mahout is a scalable, machine-learning LIBRARY\n"+ "we've added some additional stopwords such as html, mailto, regards\t"+ "apache_hadoop provides the foundation for scalability\n"+ "www.nabble.com general-help@incubator.apache.org\n"+ "public void int protected package";
    Reader reader=new StringReader(text);
    String[] expectedTokens={"test","mahout","scalabl","machin","learn","librari","weve","ad","stopword","apache_hadoop","provid","foundat","scalabl"};
    TokenStream tokenStream=analyzer.tokenStream("test",reader);
    assertNotNull(tokenStream);
    tokenStream.reset();
    CharTermAttribute termAtt=tokenStream.addAttribute(CharTermAttribute.class);
    int e=0;
    while (tokenStream.incrementToken() && e < expectedTokens.length) {
      assertEquals(expectedTokens[e++],termAtt.toString());
    }
    assertEquals(e,expectedTokens.length);
    tokenStream.end();
    tokenStream.close();
  }
}
