public class SmartNullsGenericBugTest {
  @Test public void smart_nulls_generic_bug(){
    final ConcreteDao concreteDao=mock(ConcreteDao.class,withSettings().defaultAnswer(Answers.RETURNS_SMART_NULLS));
    Assertions.assertThatThrownBy(new ThrowableAssert.ThrowingCallable(){
      public void call(){
        concreteDao.findById();
      }
    }
).isInstanceOf(ClassCastException.class);
  }
static class AbstractDao<T> {
    T findById(){
      return null;
    }
  }
static class Entity {
  }
static class ConcreteDao extends AbstractDao<Entity> {
  }
}
