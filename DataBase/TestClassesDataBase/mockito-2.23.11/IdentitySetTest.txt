public class IdentitySetTest {
  IdentitySet set=new IdentitySet();
  @Test public void shouldWork() throws Exception {
    Object o=new Object();
    set.add(o);
    assertTrue(set.contains(o));
    assertFalse(set.contains(new Object()));
  }
class Fake {
    @Override public boolean equals(    Object obj){
      return true;
    }
  }
  @Test public void shouldWorkEvenIfEqualsTheSame() throws Exception {
    assertEquals(new Fake(),new Fake());
    Fake fake=new Fake();
    set.add(fake);
    assertTrue(set.contains(fake));
    assertFalse(set.contains(new Fake()));
  }
}
