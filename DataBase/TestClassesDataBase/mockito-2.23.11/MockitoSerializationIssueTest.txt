public class MockitoSerializationIssueTest {
  @Test public void should_filter_out_test_class_from_stacktrace_when_clean_flag_is_true(){
    ConfigurationAccess.getConfig().overrideCleansStackTrace(true);
    MockitoSerializationIssue issue=new MockitoSerializationIssue("msg",new Exception("cause"));
    assertThat(Arrays.toString(issue.getUnfilteredStackTrace())).contains("MockitoSerializationIssueTest");
    assertThat(Arrays.toString(issue.getStackTrace())).doesNotContain("MockitoSerializationIssueTest");
  }
  @Test public void should_keep_executing_class_in_stacktrace_when_clean_flag_is_false(){
    ConfigurationAccess.getConfig().overrideCleansStackTrace(false);
    MockitoSerializationIssue issue=new MockitoSerializationIssue("msg",new Exception("cause"));
    assertThat(Arrays.toString(issue.getUnfilteredStackTrace())).contains("MockitoSerializationIssueTest");
    assertThat(Arrays.toString(issue.getStackTrace())).contains("MockitoSerializationIssueTest");
  }
}
