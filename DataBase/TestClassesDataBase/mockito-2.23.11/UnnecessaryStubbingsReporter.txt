/** 
 * Reports unnecessary stubbings
 */
public class UnnecessaryStubbingsReporter implements MockCreationListener {
  private List<Object> mocks=new LinkedList<Object>();
  public void validateUnusedStubs(  Class<?> testClass,  RunNotifier notifier){
    Collection<Invocation> unused=new UnusedStubbingsFinder().getUnusedStubbingsByLocation(mocks);
    if (unused.isEmpty()) {
      return;
    }
    Description unnecessaryStubbings=Description.createTestDescription(testClass,"unnecessary Mockito stubbings");
    notifier.fireTestFailure(new Failure(unnecessaryStubbings,Reporter.formatUnncessaryStubbingException(testClass,unused)));
  }
  @Override public void onMockCreated(  Object mock,  MockCreationSettings settings){
    mocks.add(mock);
  }
}
