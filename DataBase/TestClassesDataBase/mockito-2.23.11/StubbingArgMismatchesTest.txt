public class StubbingArgMismatchesTest extends TestBase {
  SimpleMockitoLogger logger=new SimpleMockitoLogger();
  StubbingArgMismatches mismatches=new StubbingArgMismatches();
  @Test public void no_op_when_no_mismatches() throws Exception {
    mismatches.format("MyTest.myTestMethod",logger);
    assertTrue(logger.isEmpty());
  }
  @Test public void logs_mismatch() throws Exception {
    mismatches.add(new InvocationBuilder().args("a").location("-> at A.java").toInvocation(),new InvocationBuilder().args("b").location("-> at B.java").toInvocation());
    mismatches.format("MyTest.myTestMethod",logger);
    assertEquals("[MockitoHint] MyTest.myTestMethod (see javadoc for MockitoHint):\n" + "[MockitoHint] 1. Unused... -> at B.java\n" + "[MockitoHint]  ...args ok? -> at A.java\n",logger.getLoggedInfo());
  }
  @Test public void multiple_matching_invocations_per_stub_plus_some_other_invocation() throws Exception {
    Invocation stubbing=new InvocationBuilder().args("a").location("-> at A.java").toInvocation();
    mismatches.add(new InvocationBuilder().args("x").location("-> at X.java").toInvocation(),stubbing);
    mismatches.add(new InvocationBuilder().args("y").location("-> at Y.java").toInvocation(),stubbing);
    mismatches.add(new InvocationBuilder().method("differentMethod").args("n").location("-> at N.java").toInvocation(),new InvocationBuilder().method("differentMethod").args("m").location("-> at M.java").toInvocation());
    mismatches.format("MyTest.myTestMethod",logger);
    assertEquals("[MockitoHint] MyTest.myTestMethod (see javadoc for MockitoHint):\n" + "[MockitoHint] 1. Unused... -> at A.java\n" + "[MockitoHint]  ...args ok? -> at X.java\n"+ "[MockitoHint]  ...args ok? -> at Y.java\n"+ "[MockitoHint] 2. Unused... -> at M.java\n"+ "[MockitoHint]  ...args ok? -> at N.java\n",logger.getLoggedInfo());
  }
}
