/** 
 * Test class for  {@link TimerImpl}
 */
@Category(SmallTests.class) public class TestTimerImpl {
  @ClassRule public static final HBaseClassTestRule CLASS_RULE=HBaseClassTestRule.forClass(TestTimerImpl.class);
  private Timer timer;
  @Before public void setup(){
    this.timer=new TimerImpl();
  }
  @Test public void testUpdate(){
    timer.update(40,TimeUnit.MILLISECONDS);
    timer.update(41,TimeUnit.MILLISECONDS);
    timer.update(42,TimeUnit.MILLISECONDS);
    assertEquals(3,timer.getHistogram().getCount());
    assertEquals(3,timer.getMeter().getCount());
    assertEquals(TimeUnit.MILLISECONDS.toMicros(41),timer.getHistogram().snapshot().getMedian());
  }
}
