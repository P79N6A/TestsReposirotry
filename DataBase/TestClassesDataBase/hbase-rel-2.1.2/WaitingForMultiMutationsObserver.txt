public static class WaitingForMultiMutationsObserver implements RegionCoprocessor, RegionObserver {
  final CountDownLatch latch=new CountDownLatch(1);
  @Override public Optional<RegionObserver> getRegionObserver(){
    return Optional.of(this);
  }
  @Override public void postBatchMutate(  final ObserverContext<RegionCoprocessorEnvironment> c,  final MiniBatchOperationInProgress<Mutation> miniBatchOp) throws IOException {
    try {
      latch.await();
    }
 catch (    InterruptedException ex) {
      throw new IOException(ex);
    }
  }
}
