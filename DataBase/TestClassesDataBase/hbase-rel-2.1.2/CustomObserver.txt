public static class CustomObserver implements RegionCoprocessor, RegionObserver {
  volatile CountDownLatch postCompact;
  @Override public void postCompact(  ObserverContext<RegionCoprocessorEnvironment> e,  Store store,  StoreFile resultFile,  CompactionLifeCycleTracker tracker,  CompactionRequest request) throws IOException {
    postCompact.countDown();
  }
  @Override public void start(  CoprocessorEnvironment e) throws IOException {
    postCompact=new CountDownLatch(1);
  }
  @Override public Optional<RegionObserver> getRegionObserver(){
    return Optional.of(this);
  }
}
