public static class OperationAttributesTestController implements RegionCoprocessor, RegionObserver {
  @Override public Optional<RegionObserver> getRegionObserver(){
    return Optional.of(this);
  }
  @Override public void prePut(  ObserverContext<RegionCoprocessorEnvironment> e,  Put put,  WALEdit edit,  Durability durability) throws IOException {
    Region region=e.getEnvironment().getRegion();
    if (!region.getRegionInfo().isMetaRegion() && !region.getRegionInfo().getTable().isSystemTable()) {
      if (put.getAttribute(TEST_ATR_KEY) != null) {
        LOG.debug("allow any put to happen " + region.getRegionInfo().getRegionNameAsString());
      }
 else {
        e.bypass();
      }
    }
  }
}
