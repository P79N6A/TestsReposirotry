@Category({LargeTests.class,ClientTests.class}) public class TestRestoreSnapshotFromClientWithRegionReplicas extends RestoreSnapshotFromClientTestBase {
  @ClassRule public static final HBaseClassTestRule CLASS_RULE=HBaseClassTestRule.forClass(TestRestoreSnapshotFromClientWithRegionReplicas.class);
  @Override protected int getNumReplicas(){
    return 3;
  }
  @Test public void testOnlineSnapshotAfterSplittingRegions() throws IOException, InterruptedException {
    List<RegionInfo> regionInfos=admin.getRegions(tableName);
    RegionReplicaUtil.removeNonDefaultRegions(regionInfos);
    splitRegion(regionInfos.get(0));
    admin.snapshot(snapshotName1,tableName);
    TableName clonedTableName=TableName.valueOf(name.getMethodName() + "-" + System.currentTimeMillis());
    admin.cloneSnapshot(snapshotName1,clonedTableName);
    verifyRowCount(TEST_UTIL,clonedTableName,snapshot1Rows);
  }
}
