private static class MockClientScanner extends ClientSimpleScanner {
  private boolean rpcFinished=false;
  private boolean rpcFinishedFired=false;
  private boolean initialized=false;
  public MockClientScanner(  final Configuration conf,  final Scan scan,  final TableName tableName,  ClusterConnection connection,  RpcRetryingCallerFactory rpcFactory,  RpcControllerFactory controllerFactory,  ExecutorService pool,  int primaryOperationTimeout) throws IOException {
    super(conf,scan,tableName,connection,rpcFactory,controllerFactory,pool,primaryOperationTimeout);
  }
  @Override protected boolean moveToNextRegion(){
    if (!initialized) {
      initialized=true;
      return super.moveToNextRegion();
    }
    if (!rpcFinished) {
      return super.moveToNextRegion();
    }
    if (rpcFinishedFired) {
      throw new RuntimeException("Expected nextScanner to only be called once after " + " short-circuit was triggered.");
    }
    rpcFinishedFired=true;
    return false;
  }
  public void setRpcFinished(  boolean rpcFinished){
    this.rpcFinished=rpcFinished;
  }
}
