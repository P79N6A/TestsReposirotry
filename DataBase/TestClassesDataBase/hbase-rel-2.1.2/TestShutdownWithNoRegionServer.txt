/** 
 * Testcase to confirm that we will not hang when shutdown a cluster with no live region servers.
 */
@Category({MasterTests.class,MediumTests.class}) public class TestShutdownWithNoRegionServer {
  @ClassRule public static final HBaseClassTestRule CLASS_RULE=HBaseClassTestRule.forClass(TestShutdownWithNoRegionServer.class);
  private static final HBaseTestingUtility UTIL=new HBaseTestingUtility();
  @BeforeClass public static void setUp() throws Exception {
    UTIL.startMiniCluster(1);
  }
  @AfterClass public static void tearDown() throws Exception {
    UTIL.shutdownMiniCluster();
  }
  @Test public void test() throws InterruptedException {
    RegionServerThread t=UTIL.getMiniHBaseCluster().stopRegionServer(0);
    t.join();
  }
}
