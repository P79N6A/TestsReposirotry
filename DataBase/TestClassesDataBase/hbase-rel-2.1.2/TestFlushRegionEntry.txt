@Category({RegionServerTests.class,MediumTests.class}) public class TestFlushRegionEntry {
  @ClassRule public static final HBaseClassTestRule CLASS_RULE=HBaseClassTestRule.forClass(TestFlushRegionEntry.class);
  @Rule public TestName name=new TestName();
  @BeforeClass public static void setUp() throws Exception {
    ManualEnvironmentEdge edge=new ManualEnvironmentEdge();
    edge.setValue(12345);
    EnvironmentEdgeManager.injectEdge(edge);
  }
  @AfterClass public static void teardown(){
    EnvironmentEdgeManager.reset();
  }
  @Test public void testFlushRegionEntryEquality(){
    RegionInfo hri=RegionInfoBuilder.newBuilder(TableName.valueOf(name.getMethodName())).setRegionId(1).setReplicaId(0).build();
    HRegion r=mock(HRegion.class);
    doReturn(hri).when(r).getRegionInfo();
    FlushRegionEntry entry=new FlushRegionEntry(r,true,FlushLifeCycleTracker.DUMMY);
    FlushRegionEntry other=new FlushRegionEntry(r,true,FlushLifeCycleTracker.DUMMY);
    assertEquals(entry.hashCode(),other.hashCode());
    assertEquals(entry,other);
  }
}
