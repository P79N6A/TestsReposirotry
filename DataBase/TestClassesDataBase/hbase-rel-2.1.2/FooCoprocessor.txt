public static class FooCoprocessor implements MasterCoprocessor, RegionServerCoprocessor {
  @Override public void start(  CoprocessorEnvironment env) throws IOException {
    String where=null;
    if (env instanceof MasterCoprocessorEnvironment) {
      where="master";
    }
 else     if (env instanceof RegionServerCoprocessorEnvironment) {
      where="regionserver";
    }
 else     if (env instanceof RegionCoprocessorEnvironment) {
      LOG.error("on RegionCoprocessorEnvironment!!");
    }
    LOG.info("start coprocessor on " + where);
  }
  @Override public void stop(  CoprocessorEnvironment env) throws IOException {
    String fileName=null;
    if (env instanceof MasterCoprocessorEnvironment) {
      fileName=MASTER_FILE;
    }
 else     if (env instanceof RegionServerCoprocessorEnvironment) {
      fileName=REGIONSERVER_FILE;
    }
 else     if (env instanceof RegionCoprocessorEnvironment) {
      LOG.error("on RegionCoprocessorEnvironment!!");
    }
    Configuration conf=UTIL.getConfiguration();
    Path resultFile=new Path(UTIL.getDataTestDirOnTestFS(),fileName);
    FileSystem fs=FileSystem.get(conf);
    boolean result=fs.createNewFile(resultFile);
    LOG.info("create file " + resultFile + " return rc "+ result);
  }
}
