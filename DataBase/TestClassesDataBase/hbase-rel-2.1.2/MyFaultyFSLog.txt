class MyFaultyFSLog extends FaultyFSLog {
  StoreFlushContext storeFlushCtx;
  public MyFaultyFSLog(  FileSystem fs,  Path rootDir,  String logName,  Configuration conf) throws IOException {
    super(fs,rootDir,logName,conf);
  }
  void setStoreFlushCtx(  StoreFlushContext storeFlushCtx){
    this.storeFlushCtx=storeFlushCtx;
  }
  @Override public void sync(  long txid) throws IOException {
    storeFlushCtx.prepare();
    super.sync(txid);
  }
}
