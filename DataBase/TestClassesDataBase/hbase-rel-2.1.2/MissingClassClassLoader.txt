private static class MissingClassClassLoader extends ClassLoader {
  public MissingClassClassLoader(){
    super(getClassLoader());
  }
  @Override public Class<?> loadClass(  String name) throws ClassNotFoundException {
    if (name.equals(getFullClassName("MissingClass"))) {
      throw new ClassNotFoundException(name);
    }
    return super.findClass(name);
  }
}
