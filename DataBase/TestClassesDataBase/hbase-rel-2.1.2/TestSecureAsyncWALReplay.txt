@Category({RegionServerTests.class,MediumTests.class}) public class TestSecureAsyncWALReplay extends TestAsyncWALReplay {
  @ClassRule public static final HBaseClassTestRule CLASS_RULE=HBaseClassTestRule.forClass(TestSecureAsyncWALReplay.class);
  @BeforeClass public static void setUpBeforeClass() throws Exception {
    Configuration conf=AbstractTestWALReplay.TEST_UTIL.getConfiguration();
    conf.set(HConstants.CRYPTO_KEYPROVIDER_CONF_KEY,KeyProviderForTesting.class.getName());
    conf.set(HConstants.CRYPTO_MASTERKEY_NAME_CONF_KEY,"hbase");
    conf.setClass("hbase.regionserver.hlog.reader.impl",SecureProtobufLogReader.class,Reader.class);
    conf.setClass("hbase.regionserver.hlog.async.writer.impl",SecureAsyncProtobufLogWriter.class,AsyncWriter.class);
    conf.setBoolean(HConstants.ENABLE_WAL_ENCRYPTION,true);
    TestAsyncWALReplay.setUpBeforeClass();
  }
}
