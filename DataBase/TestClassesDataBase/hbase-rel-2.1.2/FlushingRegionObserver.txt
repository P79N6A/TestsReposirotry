public static class FlushingRegionObserver extends SimpleRegionObserver {
  @Override public void postPut(  final ObserverContext<RegionCoprocessorEnvironment> c,  final Put put,  final WALEdit edit,  final Durability durability) throws IOException {
    HRegion region=(HRegion)c.getEnvironment().getRegion();
    super.postPut(c,put,edit,durability);
    if (Bytes.equals(put.getRow(),Bytes.toBytes("row2"))) {
      region.flush(false);
      Assert.assertTrue(region.getMemStoreDataSize() >= 0);
    }
  }
}
