/** 
 * RegionObserver that has a Counter for preGet()
 */
public static class CustomRegionObserver implements RegionCoprocessor, RegionObserver {
  private Counter preGetCounter;
  @Override public void preGetOp(  ObserverContext<RegionCoprocessorEnvironment> e,  Get get,  List<Cell> results) throws IOException {
    preGetCounter.increment();
  }
  @Override public Optional<RegionObserver> getRegionObserver(){
    return Optional.of(this);
  }
  @Override public void start(  CoprocessorEnvironment env) throws IOException {
    if (env instanceof RegionCoprocessorEnvironment) {
      MetricRegistry registry=((RegionCoprocessorEnvironment)env).getMetricRegistryForRegionServer();
      if (preGetCounter == null) {
        preGetCounter=registry.counter("preGetRequests");
      }
    }
  }
}
