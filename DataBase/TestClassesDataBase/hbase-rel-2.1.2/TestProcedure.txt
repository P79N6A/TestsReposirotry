public static final class TestProcedure extends NoopProcedure<MasterProcedureEnv> implements TableProcedureInterface {
  @Override protected Procedure<MasterProcedureEnv>[] execute(  MasterProcedureEnv env) throws ProcedureYieldException, ProcedureSuspendedException, InterruptedException {
    if (ARRIVE != null) {
      ARRIVE.countDown();
      ARRIVE=null;
    }
    if (FINISH_PROC) {
      return null;
    }
    setTimeout(1000);
    setState(ProcedureState.WAITING_TIMEOUT);
    throw new ProcedureSuspendedException();
  }
  @Override protected synchronized boolean setTimeoutFailure(  MasterProcedureEnv env){
    setState(ProcedureState.RUNNABLE);
    env.getProcedureScheduler().addBack(this);
    return false;
  }
  @Override protected void afterReplay(  MasterProcedureEnv env){
    if (FAIL_LOAD) {
      throw new RuntimeException("Inject error");
    }
  }
  @Override public TableName getTableName(){
    return NAME;
  }
  @Override public TableOperationType getTableOperationType(){
    return TableOperationType.READ;
  }
}
