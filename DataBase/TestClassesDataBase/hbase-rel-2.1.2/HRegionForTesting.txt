/** 
 * The same as HRegion class, the only difference is that instantiateHStore will create a different HStore - HStoreForTesting. [HBASE-8518]
 */
public static class HRegionForTesting extends HRegion {
  public HRegionForTesting(  final Path tableDir,  final WAL wal,  final FileSystem fs,  final Configuration confParam,  final RegionInfo regionInfo,  final TableDescriptor htd,  final RegionServerServices rsServices){
    this(new HRegionFileSystem(confParam,fs,tableDir,regionInfo),wal,confParam,htd,rsServices);
  }
  public HRegionForTesting(  HRegionFileSystem fs,  WAL wal,  Configuration confParam,  TableDescriptor htd,  RegionServerServices rsServices){
    super(fs,wal,confParam,htd,rsServices);
  }
  /** 
 * Create HStore instance.
 * @return If Mob is enabled, return HMobStore, otherwise return HStoreForTesting.
 */
  @Override protected HStore instantiateHStore(  final ColumnFamilyDescriptor family) throws IOException {
    if (family.isMobEnabled()) {
      if (HFile.getFormatVersion(this.conf) < HFile.MIN_FORMAT_VERSION_WITH_TAGS) {
        throw new IOException("A minimum HFile version of " + HFile.MIN_FORMAT_VERSION_WITH_TAGS + " is required for MOB feature. Consider setting "+ HFile.FORMAT_VERSION_KEY+ " accordingly.");
      }
      return new HMobStore(this,family,this.conf);
    }
    return new HStoreForTesting(this,family,this.conf);
  }
}
