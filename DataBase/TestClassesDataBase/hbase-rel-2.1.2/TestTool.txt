/** 
 * Simple tool to test options parsing. 3 options: required, optional, and boolean 2 deprecated options to test backward compatibility: -opt (old version of --optional) and -bool (old version of --boolean).
 */
private static class TestTool extends AbstractHBaseTool {
  String requiredValue;
  String optionalValue;
  boolean booleanValue;
  @Override protected void addOptions(){
    addRequiredOption(Options.REQUIRED);
    addOption(Options.OPTIONAL);
    addOption(Options.BOOLEAN);
  }
  @Override protected void processOptions(  CommandLine cmd){
    requiredValue=cmd.getOptionValue(Options.REQUIRED.getLongOpt());
    if (cmd.hasOption(Options.OPTIONAL.getLongOpt())) {
      optionalValue=cmd.getOptionValue(Options.OPTIONAL.getLongOpt());
    }
    booleanValue=booleanValue || cmd.hasOption(Options.BOOLEAN.getLongOpt());
  }
  @Override protected void processOldArgs(  List<String> args){
    List<String> invalidArgs=new ArrayList<>();
    while (args.size() > 0) {
      String cmd=args.remove(0);
      if (cmd.equals("-opt")) {
        optionalValue=args.remove(0);
      }
 else       if (cmd.equals("-bool")) {
        booleanValue=true;
      }
 else {
        invalidArgs.add(cmd);
      }
    }
    args.addAll(invalidArgs);
  }
  @Override protected int doWork() throws Exception {
    return EXIT_SUCCESS;
  }
}
