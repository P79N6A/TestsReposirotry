public static class InjectAbortOnLoadListener implements ProcedureExecutor.ProcedureExecutorListener {
  private final ProcedureExecutor<MasterProcedureEnv> procExec;
  private TreeSet<Long> procsToAbort=null;
  public InjectAbortOnLoadListener(  final ProcedureExecutor<MasterProcedureEnv> procExec){
    this.procExec=procExec;
  }
  public void addProcId(  long procId){
    if (procsToAbort == null) {
      procsToAbort=new TreeSet<>();
    }
    procsToAbort.add(procId);
  }
  @Override public void procedureLoaded(  long procId){
    if (procsToAbort != null && !procsToAbort.contains(procId)) {
      return;
    }
    procExec.abort(procId);
  }
  @Override public void procedureAdded(  long procId){
  }
  @Override public void procedureFinished(  long procId){
  }
}
