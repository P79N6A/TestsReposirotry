public static class TestEventHandler extends EventHandler {
  private final AtomicBoolean lock;
  private AtomicInteger counter;
  public TestEventHandler(  Server server,  EventType eventType,  AtomicBoolean lock,  AtomicInteger counter){
    super(server,eventType);
    this.lock=lock;
    this.counter=counter;
  }
  @Override public void process() throws IOException {
    int num=counter.incrementAndGet();
    LOG.info("Running process #" + num + ", threadName="+ Thread.currentThread().getName());
synchronized (lock) {
      while (lock.get()) {
        try {
          lock.wait();
        }
 catch (        InterruptedException e) {
        }
      }
    }
    counter.incrementAndGet();
  }
}
