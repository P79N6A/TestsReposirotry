/** 
 * Unit tests for  {@link UrlBasedCorsConfigurationSource}.
 * @author Sebastien Deleuze
 * @author Rossen Stoyanchev
 */
public class UrlBasedCorsConfigurationSourceTests {
  private final UrlBasedCorsConfigurationSource configSource=new UrlBasedCorsConfigurationSource();
  @Test public void empty(){
    MockServerWebExchange exchange=MockServerWebExchange.from(MockServerHttpRequest.get("/bar/test.html"));
    assertNull(this.configSource.getCorsConfiguration(exchange));
  }
  @Test public void registerAndMatch(){
    CorsConfiguration config=new CorsConfiguration();
    this.configSource.registerCorsConfiguration("/bar/**",config);
    MockServerWebExchange exchange=MockServerWebExchange.from(MockServerHttpRequest.get("/foo/test.html"));
    assertNull(this.configSource.getCorsConfiguration(exchange));
    exchange=MockServerWebExchange.from(MockServerHttpRequest.get("/bar/test.html"));
    assertEquals(config,this.configSource.getCorsConfiguration(exchange));
  }
}
