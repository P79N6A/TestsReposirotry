@Configuration @Import(FooConfig.class) @EnableCaching static class BeanConditionConfig {
  @Autowired Environment env;
  @Bean public Bar bar(){
    return new Bar(Boolean.valueOf(env.getProperty("bar.enabled")));
  }
static class Bar {
    public int count;
    private final boolean enabled;
    public Bar(    boolean enabled){
      this.enabled=enabled;
    }
    public boolean isEnabled(){
      this.count++;
      return this.enabled;
    }
  }
}
