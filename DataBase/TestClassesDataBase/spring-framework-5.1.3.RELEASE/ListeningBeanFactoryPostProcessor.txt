public static class ListeningBeanFactoryPostProcessor implements BeanFactoryPostProcessor, ApplicationListener {
  public ApplicationEvent received;
  @Override public void postProcessBeanFactory(  ConfigurableListableBeanFactory beanFactory) throws BeansException {
  }
  @Override public void onApplicationEvent(  ApplicationEvent event){
    Assert.state(this.received == null,"Just one ContextRefreshedEvent expected");
    this.received=event;
  }
}
