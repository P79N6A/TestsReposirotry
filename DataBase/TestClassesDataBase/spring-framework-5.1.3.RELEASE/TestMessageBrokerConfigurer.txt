@Configuration @ComponentScan(basePackageClasses=StompWebSocketIntegrationTests.class,useDefaultFilters=false,includeFilters=@ComponentScan.Filter(IntegrationTestController.class)) static class TestMessageBrokerConfigurer implements WebSocketMessageBrokerConfigurer {
  @Autowired private HandshakeHandler handshakeHandler;
  @Override public void registerStompEndpoints(  StompEndpointRegistry registry){
    registry.addEndpoint("/ws").setHandshakeHandler(this.handshakeHandler);
  }
  @Override public void configureMessageBroker(  MessageBrokerRegistry configurer){
    configurer.setApplicationDestinationPrefixes("/app");
    configurer.enableSimpleBroker("/topic","/queue");
  }
  @Bean @Scope(scopeName="websocket",proxyMode=ScopedProxyMode.INTERFACES) public ScopedBean scopedBean(){
    return new ScopedBeanImpl("55");
  }
}
