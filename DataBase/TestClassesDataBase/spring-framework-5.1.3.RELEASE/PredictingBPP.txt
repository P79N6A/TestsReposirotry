static class PredictingBPP extends InstantiationAwareBeanPostProcessorAdapter {
  @Override public Class<?> predictBeanType(  Class<?> beanClass,  String beanName){
    return FactoryBean.class.isAssignableFrom(beanClass) ? PredictedType.class : null;
  }
}
