public static class InitAndIB implements InitializingBean, DisposableBean {
  public static boolean constructed;
  public boolean afterPropertiesSetInvoked, initMethodInvoked, destroyed, customDestroyed;
  public InitAndIB(){
    constructed=true;
  }
  @Override public void afterPropertiesSet(){
    if (this.initMethodInvoked)     fail();
    this.afterPropertiesSetInvoked=true;
  }
  /** 
 * Init method 
 */
  public void customInit() throws ServletException {
    if (!this.afterPropertiesSetInvoked)     fail();
    this.initMethodInvoked=true;
  }
  @Override public void destroy(){
    if (this.customDestroyed)     fail();
    if (this.destroyed) {
      throw new IllegalStateException("Already destroyed");
    }
    this.destroyed=true;
  }
  public void customDestroy(){
    if (!this.destroyed)     fail();
    if (this.customDestroyed) {
      throw new IllegalStateException("Already customDestroyed");
    }
    this.customDestroyed=true;
  }
}
