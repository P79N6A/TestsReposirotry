private static class StubTcpConnection implements TcpConnection<byte[]> {
  private final List<Message<byte[]>> messages=new ArrayList<>();
  public List<Message<byte[]>> getMessages(){
    return this.messages;
  }
  @Override public ListenableFuture<Void> send(  Message<byte[]> message){
    this.messages.add(message);
    return getVoidFuture();
  }
  @Override public void onReadInactivity(  Runnable runnable,  long duration){
  }
  @Override public void onWriteInactivity(  Runnable runnable,  long duration){
  }
  @Override public void close(){
  }
}
