/** 
 * Tests dependent on access to resources under the web application root directory.
 * @author Rossen Stoyanchev
 */
@RunWith(SpringJUnit4ClassRunner.class) @WebAppConfiguration("src/test/resources/META-INF/web-resources") @ContextHierarchy({@ContextConfiguration("root-context.xml"),@ContextConfiguration("servlet-context.xml")}) public class WebAppResourceTests {
  @Autowired private WebApplicationContext wac;
  private MockMvc mockMvc;
  @Before public void setup(){
    this.mockMvc=MockMvcBuilders.webAppContextSetup(this.wac).alwaysExpect(status().isOk()).build();
  }
  @Test public void tilesDefinitions() throws Exception {
    this.mockMvc.perform(get("/")).andExpect(forwardedUrl("/WEB-INF/layouts/standardLayout.jsp"));
  }
  @Test public void resourceRequest() throws Exception {
    this.mockMvc.perform(get("/resources/Spring.js")).andExpect(content().contentType("application/javascript")).andExpect(content().string(containsString("Spring={};")));
  }
  @Test public void resourcesViaDefaultServlet() throws Exception {
    this.mockMvc.perform(get("/unknown/resource")).andExpect(handler().handlerType(DefaultServletHttpRequestHandler.class)).andExpect(forwardedUrl("default"));
  }
}
