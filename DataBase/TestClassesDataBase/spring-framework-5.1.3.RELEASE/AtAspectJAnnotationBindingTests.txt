/** 
 * @author Adrian Colyer
 * @author Juergen Hoeller
 * @author Chris Beams
 */
public class AtAspectJAnnotationBindingTests {
  private AnnotatedTestBean testBean;
  private ClassPathXmlApplicationContext ctx;
  @Before public void setup(){
    ctx=new ClassPathXmlApplicationContext(getClass().getSimpleName() + "-context.xml",getClass());
    testBean=(AnnotatedTestBean)ctx.getBean("testBean");
  }
  @Test public void testAnnotationBindingInAroundAdvice(){
    assertEquals("this value doThis",testBean.doThis());
    assertEquals("that value doThat",testBean.doThat());
    assertEquals(2,testBean.doArray().length);
  }
  @Test public void testNoMatchingWithoutAnnotationPresent(){
    assertEquals("doTheOther",testBean.doTheOther());
  }
  @Test public void testPointcutEvaluatedAgainstArray(){
    ctx.getBean("arrayFactoryBean");
  }
}
