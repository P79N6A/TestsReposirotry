@Configuration @SuppressWarnings("unused") static class OrderedWebFilterBeanConfig {
  private static final String ATTRIBUTE="attr";
  @Bean @Order(2) public WebFilter filterA(){
    return createFilter("FilterA");
  }
  @Bean @Order(1) public WebFilter filterB(){
    return createFilter("FilterB");
  }
  private WebFilter createFilter(  String name){
    return (exchange,chain) -> {
      String value=exchange.getAttribute(ATTRIBUTE);
      value=(value != null ? value + "::" + name : name);
      exchange.getAttributes().put(ATTRIBUTE,value);
      return chain.filter(exchange);
    }
;
  }
  @Bean public WebHandler webHandler(){
    return exchange -> {
      String value=exchange.getAttributeOrDefault(ATTRIBUTE,"none");
      return writeToResponse(exchange,value);
    }
;
  }
}
