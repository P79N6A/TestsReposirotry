@Transactional(rollbackFor=IllegalStateException.class) public static class TestWithRollback {
  public void doSomethingErroneous(){
    assertTrue(TransactionSynchronizationManager.isActualTransactionActive());
    assertFalse(TransactionSynchronizationManager.isCurrentTransactionReadOnly());
    throw new IllegalStateException();
  }
  @Transactional(rollbackFor=IllegalArgumentException.class) public void doSomethingElseErroneous(){
    assertTrue(TransactionSynchronizationManager.isActualTransactionActive());
    assertFalse(TransactionSynchronizationManager.isCurrentTransactionReadOnly());
    throw new IllegalArgumentException();
  }
}
