@Component static class ExceptionEventListener extends AbstractTestEventListener {
  @Autowired private CountDownLatch countDownLatch;
  @EventListener public void handle(  TestEvent event){
    collectEvent(event);
    if ("fail".equals(event.msg)) {
      throw new IllegalStateException("Test exception");
    }
  }
  @EventListener @Async public void handleAsync(  AnotherTestEvent event){
    collectEvent(event);
    if ("fail".equals(event.content)) {
      this.countDownLatch.countDown();
      throw new IllegalStateException("Test exception");
    }
  }
}
