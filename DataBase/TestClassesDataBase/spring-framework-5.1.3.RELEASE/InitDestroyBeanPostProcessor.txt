public static class InitDestroyBeanPostProcessor implements DestructionAwareBeanPostProcessor {
  @Override public Object postProcessBeforeInitialization(  Object bean,  String beanName) throws BeansException {
    if (bean instanceof AnnotatedInitDestroyBean) {
      assertFalse(((AnnotatedInitDestroyBean)bean).initCalled);
    }
    return bean;
  }
  @Override public Object postProcessAfterInitialization(  Object bean,  String beanName) throws BeansException {
    if (bean instanceof AnnotatedInitDestroyBean) {
      assertTrue(((AnnotatedInitDestroyBean)bean).initCalled);
    }
    return bean;
  }
  @Override public void postProcessBeforeDestruction(  Object bean,  String beanName) throws BeansException {
    if (bean instanceof AnnotatedInitDestroyBean) {
      assertFalse(((AnnotatedInitDestroyBean)bean).destroyCalled);
    }
  }
  @Override public boolean requiresDestruction(  Object bean){
    return true;
  }
}
