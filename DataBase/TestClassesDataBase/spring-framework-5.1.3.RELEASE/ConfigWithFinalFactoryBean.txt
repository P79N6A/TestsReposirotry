@Configuration protected static class ConfigWithFinalFactoryBean {
  @Bean public FactoryBean<FooInterface> foo(){
    return new FinalFactoryBean();
  }
  @Bean public Bar bar() throws Exception {
    assertTrue(foo().isSingleton());
    return new Bar(foo().getObject());
  }
}
