@Configuration @EnableJms static class EnableJmsHandlerMethodFactoryConfig implements JmsListenerConfigurer {
  @Override public void configureJmsListeners(  JmsListenerEndpointRegistrar registrar){
    registrar.setMessageHandlerMethodFactory(customMessageHandlerMethodFactory());
  }
  @Bean public MessageHandlerMethodFactory customMessageHandlerMethodFactory(){
    DefaultMessageHandlerMethodFactory factory=new DefaultMessageHandlerMethodFactory();
    factory.setValidator(new TestValidator());
    return factory;
  }
  @Bean public JmsListenerContainerTestFactory defaultFactory(){
    return new JmsListenerContainerTestFactory();
  }
}
