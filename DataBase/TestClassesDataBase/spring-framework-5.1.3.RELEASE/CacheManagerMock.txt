private static class CacheManagerMock {
  private final List<String> cacheNames;
  private final CacheManager cacheManager;
  private CacheManagerMock(){
    this.cacheNames=new ArrayList<>();
    this.cacheManager=mock(CacheManager.class);
    given(cacheManager.getCacheNames()).willReturn(cacheNames);
  }
  private CacheManager getCacheManager(){
    return cacheManager;
  }
  @SuppressWarnings("unchecked") public void addCache(  String name){
    cacheNames.add(name);
    Cache cache=mock(Cache.class);
    given(cache.getName()).willReturn(name);
    given(cacheManager.getCache(name)).willReturn(cache);
  }
  public void removeCache(  String name){
    cacheNames.remove(name);
    given(cacheManager.getCache(name)).willReturn(null);
  }
}
