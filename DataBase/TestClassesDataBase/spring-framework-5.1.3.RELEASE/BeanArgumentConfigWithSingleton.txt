@Configuration static class BeanArgumentConfigWithSingleton {
  @Bean @Lazy public DependingFoo foo(  BarArgument bar){
    return new DependingFoo(bar);
  }
  @Bean public FooFactory fooFactory(){
    return new FooFactory(){
      @Override public DependingFoo createFoo(      BarArgument bar){
        return foo(bar);
      }
    }
;
  }
}
