@Controller @MessageMapping("listenable-future") private static class ListenableFutureController {
  private ListenableFutureTask<String> future;
  private boolean exceptionCaught=false;
  @MessageMapping("success") public ListenableFutureTask<String> handleListenableFuture(){
    this.future=new ListenableFutureTask<>(() -> "foo");
    return this.future;
  }
  @MessageMapping("failure") public ListenableFutureTask<String> handleListenableFutureException(){
    this.future=new ListenableFutureTask<>(() -> {
      throw new IllegalStateException();
    }
);
    return this.future;
  }
  @MessageExceptionHandler(IllegalStateException.class) public void handleValidationException(){
    this.exceptionCaught=true;
  }
}
