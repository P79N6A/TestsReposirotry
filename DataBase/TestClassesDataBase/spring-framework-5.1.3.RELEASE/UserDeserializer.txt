public static class UserDeserializer extends JsonDeserializer<User> {
  @Autowired private Capitalizer capitalizer;
  @Override public User deserialize(  JsonParser jsonParser,  DeserializationContext deserializationContext) throws IOException {
    ObjectCodec oc=jsonParser.getCodec();
    JsonNode node=oc.readTree(jsonParser);
    return new User(this.capitalizer.capitalize(node.get("username").asText()));
  }
}
