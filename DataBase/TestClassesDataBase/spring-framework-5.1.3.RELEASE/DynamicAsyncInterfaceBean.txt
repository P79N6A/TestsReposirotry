public static class DynamicAsyncInterfaceBean implements FactoryBean<AsyncInterface> {
  private final AsyncInterface proxy;
  public DynamicAsyncInterfaceBean(){
    ProxyFactory pf=new ProxyFactory(new HashMap<>());
    DefaultIntroductionAdvisor advisor=new DefaultIntroductionAdvisor(new MethodInterceptor(){
      @Override public Object invoke(      MethodInvocation invocation) throws Throwable {
        assertTrue(!Thread.currentThread().getName().equals(originalThreadName));
        if (Future.class.equals(invocation.getMethod().getReturnType())) {
          return new AsyncResult<>(invocation.getArguments()[0].toString());
        }
        return null;
      }
    }
);
    advisor.addInterface(AsyncInterface.class);
    pf.addAdvisor(advisor);
    this.proxy=(AsyncInterface)pf.getProxy();
  }
  @Override public AsyncInterface getObject(){
    return this.proxy;
  }
  @Override public Class<?> getObjectType(){
    return this.proxy.getClass();
  }
  @Override public boolean isSingleton(){
    return true;
  }
}
