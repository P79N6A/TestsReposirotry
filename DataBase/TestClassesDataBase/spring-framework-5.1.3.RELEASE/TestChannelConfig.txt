@Configuration static class TestChannelConfig extends DelegatingWebSocketMessageBrokerConfiguration {
  @Override @Bean public AbstractSubscribableChannel clientInboundChannel(){
    TestChannel channel=new TestChannel();
    channel.setInterceptors(super.clientInboundChannel().getInterceptors());
    return channel;
  }
  @Override @Bean public AbstractSubscribableChannel clientOutboundChannel(){
    TestChannel channel=new TestChannel();
    channel.setInterceptors(super.clientOutboundChannel().getInterceptors());
    return channel;
  }
  @Override public AbstractSubscribableChannel brokerChannel(){
    TestChannel channel=new TestChannel();
    channel.setInterceptors(super.brokerChannel().getInterceptors());
    return channel;
  }
}
