@Nested @SpringJUnitConfig(PopulatedSchemaDatabaseConfig.class) @Transactional class NestedTests {
  @Autowired JdbcTemplate jdbcTemplate;
  @BeforeTransaction @AfterTransaction void checkInitialDatabaseState(){
    assertEquals(0,countRowsInTable("user"));
  }
  @Test @Sql("/org/springframework/test/context/jdbc/data.sql") void nestedSqlScripts(){
    assertEquals(1,countRowsInTable("user"));
  }
  private int countRowsInTable(  String tableName){
    return JdbcTestUtils.countRowsInTable(this.jdbcTemplate,tableName);
  }
}
