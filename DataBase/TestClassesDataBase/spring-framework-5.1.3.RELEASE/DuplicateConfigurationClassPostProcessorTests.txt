/** 
 * Corners the bug originally reported by SPR-8824, where the presence of two {@link ConfigurationClassPostProcessor} beans in combination with a @Configurationclass having at least one @Bean method causes a "Singleton 'foo' isn't currently in creation" exception.
 * @author Chris Beams
 * @since 3.1
 */
public class DuplicateConfigurationClassPostProcessorTests {
  @Test public void repro(){
    GenericApplicationContext ctx=new GenericApplicationContext();
    ctx.registerBeanDefinition("a",new RootBeanDefinition(ConfigurationClassPostProcessor.class));
    ctx.registerBeanDefinition("b",new RootBeanDefinition(ConfigurationClassPostProcessor.class));
    ctx.registerBeanDefinition("myConfig",new RootBeanDefinition(Config.class));
    ctx.refresh();
  }
@Configuration static class Config {
    @Bean public String string(){
      return "bean";
    }
  }
}
