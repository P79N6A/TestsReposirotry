@RestController @SuppressWarnings("unused") static class ProtobufController {
  @GetMapping("/message") Mono<Msg> message(){
    return Mono.just(TEST_MSG);
  }
  @GetMapping("/messages") Flux<Msg> messages(){
    return Flux.just(TEST_MSG,TEST_MSG,TEST_MSG);
  }
  @GetMapping(value="/message-stream",produces="application/x-protobuf;delimited=true") Flux<Msg> messageStream(){
    return testInterval(Duration.ofMillis(50),5).map(l -> Msg.newBuilder().setFoo("Foo").setBlah(SecondMsg.newBuilder().setBlah(l.intValue()).build()).build());
  }
  @GetMapping("/empty") Mono<Msg> empty(){
    return Mono.empty();
  }
  @GetMapping("default-instance") Mono<Msg> defaultInstance(){
    return Mono.just(Msg.getDefaultInstance());
  }
}
