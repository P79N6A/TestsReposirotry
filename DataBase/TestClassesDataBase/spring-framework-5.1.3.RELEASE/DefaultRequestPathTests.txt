/** 
 * Unit tests for  {@link DefaultRequestPath}.
 * @author Rossen Stoyanchev
 */
public class DefaultRequestPathTests {
  @Test public void requestPath() throws Exception {
    testRequestPath("/app/a/b/c","/app","/a/b/c");
    testRequestPath("/a/b/c","","/a/b/c");
    testRequestPath("/a/b","/a/b","");
    testRequestPath("/","","/");
    testRequestPath("","","");
    testRequestPath("","/","");
    testRequestPath("/app/a/","/app","/a/");
    testRequestPath("/app/a//","/app","/a//");
  }
  private void testRequestPath(  String fullPath,  String contextPath,  String pathWithinApplication){
    URI uri=URI.create("http://localhost:8080" + fullPath);
    RequestPath requestPath=RequestPath.parse(uri,contextPath);
    assertEquals(contextPath.equals("/") ? "" : contextPath,requestPath.contextPath().value());
    assertEquals(pathWithinApplication,requestPath.pathWithinApplication().value());
  }
  @Test public void updateRequestPath() throws Exception {
    URI uri=URI.create("http://localhost:8080/aA/bB/cC");
    RequestPath requestPath=RequestPath.parse(uri,null);
    assertEquals("",requestPath.contextPath().value());
    assertEquals("/aA/bB/cC",requestPath.pathWithinApplication().value());
    requestPath=requestPath.modifyContextPath("/aA");
    assertEquals("/aA",requestPath.contextPath().value());
    assertEquals("/bB/cC",requestPath.pathWithinApplication().value());
  }
}
