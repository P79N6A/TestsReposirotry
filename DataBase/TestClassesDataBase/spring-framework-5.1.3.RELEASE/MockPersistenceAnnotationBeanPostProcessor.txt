@SuppressWarnings("serial") private static class MockPersistenceAnnotationBeanPostProcessor extends PersistenceAnnotationBeanPostProcessor {
  @Override protected EntityManagerFactory findEntityManagerFactory(  @Nullable String emfName,  String requestingBeanName){
    return mockEmf;
  }
}
