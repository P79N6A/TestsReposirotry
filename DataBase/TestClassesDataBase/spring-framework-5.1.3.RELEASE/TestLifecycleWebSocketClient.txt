private static class TestLifecycleWebSocketClient implements WebSocketClient, Lifecycle {
  private boolean running;
  private WebSocketHandler webSocketHandler;
  private HttpHeaders headers;
  private URI uri;
  public TestLifecycleWebSocketClient(  boolean running){
    this.running=running;
  }
  @Override public void start(){
    this.running=true;
  }
  @Override public void stop(){
    this.running=false;
  }
  @Override public boolean isRunning(){
    return this.running;
  }
  @Override public ListenableFuture<WebSocketSession> doHandshake(  WebSocketHandler handler,  String uriTemplate,  Object... uriVars){
    URI uri=UriComponentsBuilder.fromUriString(uriTemplate).buildAndExpand(uriVars).encode().toUri();
    return doHandshake(handler,null,uri);
  }
  @Override public ListenableFuture<WebSocketSession> doHandshake(  WebSocketHandler handler,  WebSocketHttpHeaders headers,  URI uri){
    this.webSocketHandler=handler;
    this.headers=headers;
    this.uri=uri;
    return new ListenableFutureTask<>(() -> null);
  }
}
