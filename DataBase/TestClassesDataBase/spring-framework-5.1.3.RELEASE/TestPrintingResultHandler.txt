private static class TestPrintingResultHandler extends PrintingResultHandler {
  TestPrintingResultHandler(){
    super(new TestResultValuePrinter());
  }
  @Override public TestResultValuePrinter getPrinter(){
    return (TestResultValuePrinter)super.getPrinter();
  }
private static class TestResultValuePrinter implements ResultValuePrinter {
    private String printedHeading;
    private Map<String,Map<String,Object>> printedValues=new HashMap<>();
    @Override public void printHeading(    String heading){
      this.printedHeading=heading;
      this.printedValues.put(heading,new HashMap<>());
    }
    @Override public void printValue(    String label,    Object value){
      Assert.notNull(this.printedHeading,"Heading not printed before label " + label + " with value "+ value);
      this.printedValues.get(this.printedHeading).put(label,value);
    }
  }
}
