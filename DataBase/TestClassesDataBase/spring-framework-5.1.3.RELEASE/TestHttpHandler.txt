private static class TestHttpHandler implements HttpHandler {
  private ServerHttpRequest savedRequest;
  private final Function<ServerHttpResponse,Mono<Void>> responseMonoFunction;
  public TestHttpHandler(  Function<ServerHttpResponse,Mono<Void>> function){
    this.responseMonoFunction=function;
  }
  public ServerHttpRequest getSavedRequest(){
    return this.savedRequest;
  }
  @Override public Mono<Void> handle(  ServerHttpRequest request,  ServerHttpResponse response){
    this.savedRequest=request;
    return this.responseMonoFunction.apply(response);
  }
}
