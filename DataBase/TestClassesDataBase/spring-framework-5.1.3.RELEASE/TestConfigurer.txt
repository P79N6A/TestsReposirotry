@Configuration static class TestConfigurer implements WebSocketMessageBrokerConfigurer {
  @Bean public TestController subscriptionController(){
    return new TestController();
  }
  @Override public void registerStompEndpoints(  StompEndpointRegistry registry){
    registry.addEndpoint("/simpleBroker");
  }
  @Override public void configureWebSocketTransport(  WebSocketTransportRegistration registration){
    registration.setMessageSizeLimit(128 * 1024);
    registration.setSendTimeLimit(25 * 1000);
    registration.setSendBufferSizeLimit(1024 * 1024);
    registration.setTimeToFirstMessage(30 * 1000);
  }
  @Override public void configureMessageBroker(  MessageBrokerRegistry registry){
    registry.enableSimpleBroker().setTaskScheduler(mock(TaskScheduler.class)).setHeartbeatValue(new long[]{15000,15000});
  }
}
