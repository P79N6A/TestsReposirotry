private static class SessionClosingHandler implements WebSocketHandler {
  @Override public Mono<Void> handle(  WebSocketSession session){
    return session.send(Flux.error(new Throwable()).onErrorResume(ex -> session.close(CloseStatus.GOING_AWAY)).cast(WebSocketMessage.class));
  }
}
