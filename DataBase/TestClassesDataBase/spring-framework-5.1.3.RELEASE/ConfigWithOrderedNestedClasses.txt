@Configuration static class ConfigWithOrderedNestedClasses {
@Configuration @Order(1) static class SingletonBeanConfig {
    public @Bean Foo foo(){
      return new Foo();
    }
    public @Bean Bar bar(){
      return new Bar(foo());
    }
  }
@Configuration @Order(2) static class OverridingSingletonBeanConfig {
    public @Bean ExtendedFoo foo(){
      return new ExtendedFoo();
    }
    public @Bean Bar bar(){
      return new Bar(foo());
    }
  }
}
