static class MockTargetSource implements TargetSource {
  private Object target;
  public int gets;
  public int releases;
  public void reset(){
    this.target=null;
    gets=releases=0;
  }
  public void setTarget(  Object target){
    this.target=target;
  }
  /** 
 * @see org.springframework.aop.TargetSource#getTargetClass()
 */
  @Override public Class<?> getTargetClass(){
    return target.getClass();
  }
  /** 
 * @see org.springframework.aop.TargetSource#getTarget()
 */
  @Override public Object getTarget() throws Exception {
    ++gets;
    return target;
  }
  /** 
 * @see org.springframework.aop.TargetSource#releaseTarget(java.lang.Object)
 */
  @Override public void releaseTarget(  Object pTarget) throws Exception {
    if (pTarget != this.target)     throw new RuntimeException("Released wrong target");
    ++releases;
  }
  /** 
 * Check that gets and releases match
 */
  public void verify(){
    if (gets != releases)     throw new RuntimeException("Expectation failed: " + gets + " gets and "+ releases+ " releases");
  }
  /** 
 * @see org.springframework.aop.TargetSource#isStatic()
 */
  @Override public boolean isStatic(){
    return false;
  }
}
