private static class TestServerHandler extends TextWebSocketHandler {
  private WebSocketSession session;
  @Override public void afterConnectionEstablished(  WebSocketSession session) throws Exception {
    this.session=session;
  }
  public WebSocketSession awaitSession(  long timeToWait) throws InterruptedException {
    awaitEvent(() -> this.session != null,timeToWait," session");
    return this.session;
  }
}
