private static class ContentInterceptor implements ClientHttpRequestInterceptor {
  private final Resource resource;
  private ContentInterceptor(  Resource resource){
    this.resource=resource;
  }
  @Override public ClientHttpResponse intercept(  HttpRequest request,  byte[] body,  ClientHttpRequestExecution execution) throws IOException {
    ClientHttpResponse response=execution.execute(request,body);
    byte[] expected=FileCopyUtils.copyToByteArray(this.resource.getInputStream());
    byte[] actual=FileCopyUtils.copyToByteArray(response.getBody());
    assertEquals(new String(expected),new String(actual));
    return response;
  }
}
