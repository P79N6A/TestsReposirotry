@Configuration @EnableJms static class EnableJmsCustomConfig implements JmsListenerConfigurer {
  @Override public void configureJmsListeners(  JmsListenerEndpointRegistrar registrar){
    registrar.setEndpointRegistry(customRegistry());
    SimpleJmsListenerEndpoint endpoint=new SimpleJmsListenerEndpoint();
    endpoint.setId("myCustomEndpointId");
    endpoint.setDestination("myQueue");
    endpoint.setMessageListener(simpleMessageListener());
    registrar.registerEndpoint(endpoint);
  }
  @Bean public JmsListenerContainerTestFactory jmsListenerContainerFactory(){
    return new JmsListenerContainerTestFactory();
  }
  @Bean public JmsListenerEndpointRegistry customRegistry(){
    return new JmsListenerEndpointRegistry();
  }
  @Bean public JmsListenerContainerTestFactory customFactory(){
    return new JmsListenerContainerTestFactory();
  }
  @Bean public MessageListener simpleMessageListener(){
    return new MessageListenerAdapter();
  }
}
