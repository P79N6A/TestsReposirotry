@Controller public static class ProducesController {
  @GetMapping(path="/something",produces="text/html") public void handleHtml(  Writer writer) throws IOException {
    writer.write("html");
  }
  @GetMapping(path="/something",produces="application/xml") public void handleXml(  Writer writer) throws IOException {
    writer.write("xml");
  }
  @GetMapping(path="/something",produces="text/csv") public String handleCsv(){
    throw new IllegalArgumentException();
  }
  @ExceptionHandler public ResponseEntity<Map<String,String>> handle(  IllegalArgumentException ex){
    return ResponseEntity.status(500).body(Collections.singletonMap("reason","error"));
  }
}
