@RunWith(SpringJUnit4ClassRunner.class) @ContextHierarchy(@ContextConfiguration(name="foo")) static abstract class FooTestCase implements ApplicationContextAware {
@Configuration static class Config {
    @Bean public String bean(){
      return "foo";
    }
  }
  @Override public void setApplicationContext(  ApplicationContext applicationContext) throws BeansException {
    ContextHierarchyDirtiesContextTests.context=applicationContext;
    ContextHierarchyDirtiesContextTests.baz=applicationContext.getBean("bean",String.class);
    ContextHierarchyDirtiesContextTests.bar=applicationContext.getParent().getBean("bean",String.class);
    ContextHierarchyDirtiesContextTests.foo=applicationContext.getParent().getParent().getBean("bean",String.class);
  }
}
