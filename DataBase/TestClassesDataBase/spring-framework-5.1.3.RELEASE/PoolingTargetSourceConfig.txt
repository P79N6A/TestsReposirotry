@Configuration static class PoolingTargetSourceConfig {
  @Bean @Scope(value="request",proxyMode=ScopedProxyMode.TARGET_CLASS) public ProxyFactoryBean myObject(){
    ProxyFactoryBean pfb=new ProxyFactoryBean();
    pfb.setTargetSource(poolTargetSource());
    return pfb;
  }
  @Bean public CommonsPool2TargetSource poolTargetSource(){
    CommonsPool2TargetSource pool=new CommonsPool2TargetSource();
    pool.setMaxSize(3);
    pool.setTargetBeanName("myObjectTarget");
    return pool;
  }
  @Bean(name="myObjectTarget") @Scope(scopeName="prototype") public Object myObjectTarget(){
    return new Object();
  }
}
