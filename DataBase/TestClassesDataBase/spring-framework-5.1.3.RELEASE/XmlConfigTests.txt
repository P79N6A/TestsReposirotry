/** 
 * Tests with XML configuration.
 * @author Rossen Stoyanchev
 * @author Sam Brannen
 */
@RunWith(SpringJUnit4ClassRunner.class) @WebAppConfiguration("src/test/resources/META-INF/web-resources") @ContextHierarchy({@ContextConfiguration("root-context.xml"),@ContextConfiguration("servlet-context.xml")}) public class XmlConfigTests {
  @Autowired private WebApplicationContext wac;
  @Autowired private PersonDao personDao;
  private MockMvc mockMvc;
  @Before public void setup(){
    this.mockMvc=MockMvcBuilders.webAppContextSetup(this.wac).build();
    given(this.personDao.getPerson(5L)).willReturn(new Person("Joe"));
  }
  @Test public void person() throws Exception {
    this.mockMvc.perform(get("/person/5").accept(MediaType.APPLICATION_JSON)).andDo(print()).andExpect(status().isOk()).andExpect(content().string("{\"name\":\"Joe\",\"someDouble\":0.0,\"someBoolean\":false}"));
  }
  @Test public void tilesDefinitions() throws Exception {
    this.mockMvc.perform(get("/")).andExpect(status().isOk()).andExpect(forwardedUrl("/WEB-INF/layouts/standardLayout.jsp"));
  }
}
