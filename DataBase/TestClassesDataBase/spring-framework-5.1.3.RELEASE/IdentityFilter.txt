private static class IdentityFilter implements WebFilter {
  private final Mono<Principal> userMono;
  IdentityFilter(  String userName){
    this.userMono=Mono.just(new TestUser(userName));
  }
  @Override public Mono<Void> filter(  ServerWebExchange exchange,  WebFilterChain chain){
    exchange=exchange.mutate().principal(this.userMono).build();
    return chain.filter(exchange);
  }
}
