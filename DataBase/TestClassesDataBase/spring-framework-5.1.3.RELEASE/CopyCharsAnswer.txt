private static class CopyCharsAnswer implements Answer<Object> {
  @Override public Object answer(  InvocationOnMock invocation) throws Throwable {
    char[] chars=(char[])invocation.getArguments()[0];
    char[] copy=new char[chars.length];
    System.arraycopy(chars,0,copy,0,chars.length);
    invocation.getArguments()[0]=copy;
    return null;
  }
}
