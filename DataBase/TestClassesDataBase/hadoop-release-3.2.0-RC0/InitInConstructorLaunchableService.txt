/** 
 * Init in the constructor and make sure that it isn't inited again.
 */
public class InitInConstructorLaunchableService extends AbstractLaunchableService {
  public static final String NAME="org.apache.hadoop.service.launcher.testservices.InitInConstructorLaunchableService";
  private final Configuration originalConf=new Configuration();
  public InitInConstructorLaunchableService(){
    super("InitInConstructorLaunchableService");
    init(originalConf);
  }
  @Override public void init(  Configuration conf){
    Assert.assertEquals(STATE.NOTINITED,getServiceState());
    super.init(conf);
  }
  @Override public Configuration bindArgs(  Configuration config,  List<String> args) throws Exception {
    Assert.assertEquals(STATE.INITED,getServiceState());
    Assert.assertTrue(isInState(STATE.INITED));
    Assert.assertNotSame(getConfig(),config);
    return null;
  }
  @Override public int execute() throws Exception {
    Assert.assertEquals(STATE.STARTED,getServiceState());
    Assert.assertSame(originalConf,getConfig());
    return super.execute();
  }
}
