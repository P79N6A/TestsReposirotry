/** 
 * Unit test for FadvisedChunkedFile.
 */
public class TestFadvisedChunkedFile {
  @Test public void testDoubleClose() throws Exception {
    File absoluteFile=new File("target",TestFadvisedChunkedFile.class.getSimpleName()).getAbsoluteFile();
    absoluteFile.deleteOnExit();
    try {
      try (RandomAccessFile f=new RandomAccessFile(absoluteFile.getAbsolutePath(),"rw")){
        FadvisedChunkedFile af=new FadvisedChunkedFile(f,0,5,2,true,10,null,"foo");
        assertTrue("fd not valid",f.getFD().valid());
        af.close();
        assertFalse("fd still valid",f.getFD().valid());
        af.close();
        assertFalse("fd still valid",f.getFD().valid());
      }
     }
  finally {
      absoluteFile.delete();
    }
  }
}
