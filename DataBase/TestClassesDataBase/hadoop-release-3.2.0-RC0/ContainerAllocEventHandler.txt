private final class ContainerAllocEventHandler implements EventHandler<ContainerAllocatorEvent> {
  private AtomicInteger failedMapContainerReqEventCnt=new AtomicInteger(0);
  @Override public void handle(  ContainerAllocatorEvent event){
    if (event.getType() == ContainerAllocator.EventType.CONTAINER_REQ && ((ContainerRequestEvent)event).getEarlierAttemptFailed()) {
      failedMapContainerReqEventCnt.incrementAndGet();
    }
  }
  public void waitForFailedMapContainerReqEvents(  int count) throws InterruptedException {
    while (failedMapContainerReqEventCnt.get() != count) {
      Thread.sleep(50);
    }
    failedMapContainerReqEventCnt.set(0);
  }
}
