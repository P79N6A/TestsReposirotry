private class ListPermissionVerifier extends PermissionVerifier {
  private InodeType inodeType;
  void set(  Path path,  InodeType inodeType,  short ancestorPermission,  short parentPermission,  short permission){
    this.inodeType=inodeType;
    super.set(path,ancestorPermission,parentPermission,permission);
  }
  void setInodeType(  Path path,  InodeType inodeType){
    this.path=path;
    this.inodeType=inodeType;
    setOpPermission();
    this.ugi=null;
  }
  @Override void setOpPermission(){
    this.opParentPermission=SEARCH_MASK;
switch (inodeType) {
case FILE:
      this.opPermission=0;
    break;
case DIR:
  this.opPermission=READ_MASK | SEARCH_MASK;
break;
default :
throw new IllegalArgumentException("Illegal inode type: " + inodeType);
}
}
@Override void call() throws IOException {
fs.listStatus(path);
}
}
