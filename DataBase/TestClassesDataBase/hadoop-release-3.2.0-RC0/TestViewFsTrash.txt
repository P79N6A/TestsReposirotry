public class TestViewFsTrash {
  FileSystem fsTarget;
  FileSystem fsView;
  Configuration conf;
  FileSystemTestHelper fileSystemTestHelper=new FileSystemTestHelper();
class TestLFS extends LocalFileSystem {
    Path home;
    TestLFS() throws IOException {
      this(new Path(fileSystemTestHelper.getTestRootDir()));
    }
    TestLFS(    Path home) throws IOException {
      super();
      this.home=home;
    }
    @Override public Path getHomeDirectory(){
      return home;
    }
  }
  @Before public void setUp() throws Exception {
    fsTarget=FileSystem.getLocal(new Configuration());
    fsTarget.mkdirs(new Path(fileSystemTestHelper.getTestRootPath(fsTarget),"dir1"));
    conf=ViewFileSystemTestSetup.createConfig();
    fsView=ViewFileSystemTestSetup.setupForViewFileSystem(conf,fileSystemTestHelper,fsTarget);
    conf.set("fs.defaultFS",FsConstants.VIEWFS_URI.toString());
  }
  @After public void tearDown() throws Exception {
    ViewFileSystemTestSetup.tearDown(fileSystemTestHelper,fsTarget);
    fsTarget.delete(new Path(fsTarget.getHomeDirectory(),".Trash/Current"),true);
  }
  @Test public void testTrash() throws IOException {
    TestTrash.trashShell(conf,fileSystemTestHelper.getTestRootPath(fsView),fsTarget,new Path(fsTarget.getHomeDirectory(),".Trash/Current"));
  }
}
