private class MyMockNM extends NodeManager {
  private final ResourcePluginManager rpm;
  public MyMockNM(  ResourcePluginManager rpm){
    this.rpm=rpm;
  }
  @Override protected NodeStatusUpdater createNodeStatusUpdater(  Context context,  Dispatcher dispatcher,  NodeHealthCheckerService healthChecker){
    ((NodeManager.NMContext)context).setResourcePluginManager(rpm);
    return new BaseNodeStatusUpdaterForTest(context,dispatcher,healthChecker,metrics,new BaseResourceTrackerForTest());
  }
  @Override protected ContainerManagerImpl createContainerManager(  Context context,  ContainerExecutor exec,  DeletionService del,  NodeStatusUpdater nodeStatusUpdater,  ApplicationACLsManager aclsManager,  LocalDirsHandlerService diskhandler){
    return new MyContainerManager(context,exec,del,nodeStatusUpdater,metrics,diskhandler);
  }
  @Override protected ResourcePluginManager createResourcePluginManager(){
    return rpm;
  }
}
