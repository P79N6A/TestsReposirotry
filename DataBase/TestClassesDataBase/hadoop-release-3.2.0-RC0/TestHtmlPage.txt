public class TestHtmlPage {
public static class TestView extends HtmlPage {
    @Override public void render(    Page.HTML<__> html){
      html.title("test").p("#testid").__("test note").__().__();
    }
  }
public static class ShortView extends HtmlPage {
    @Override public void render(    Page.HTML<__> html){
      html.title("short test").p().__("should throw");
    }
  }
  @Test public void testUsual(){
    Injector injector=WebAppTests.testPage(TestView.class);
    PrintWriter out=injector.getInstance(PrintWriter.class);
    verify(out).print(" http-equiv=\"X-UA-Compatible\"");
    verify(out).print(" content=\"IE=8\"");
    verify(out).print(" http-equiv=\"Content-type\"");
    verify(out).print(String.format(" content=\"%s\"",MimeType.HTML));
    verify(out).print("test");
    verify(out).print(" id=\"testid\"");
    verify(out).print("test note");
  }
  @Test(expected=WebAppException.class) public void testShort(){
    WebAppTests.testPage(ShortView.class);
  }
}
