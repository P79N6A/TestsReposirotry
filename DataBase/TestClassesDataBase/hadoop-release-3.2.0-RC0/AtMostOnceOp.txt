abstract class AtMostOnceOp {
  private final String name;
  final DFSClient client;
  int expectedUpdateCount=0;
  AtMostOnceOp(  String name,  DFSClient client){
    this.name=name;
    this.client=client;
  }
  abstract void prepare() throws Exception ;
  abstract void invoke() throws Exception ;
  abstract boolean checkNamenodeBeforeReturn() throws Exception ;
  abstract Object getResult();
  int getExpectedCacheUpdateCount(){
    return expectedUpdateCount;
  }
}
