/** 
 * A dummy invocation handler extending RetryInvocationHandler. We can use a boolean flag to control whether the method invocation succeeds or not. 
 */
private static class DummyRetryInvocationHandler extends RetryInvocationHandler<ClientProtocol> {
  static final AtomicBoolean block=new AtomicBoolean(false);
  DummyRetryInvocationHandler(  FailoverProxyProvider<ClientProtocol> proxyProvider,  RetryPolicy retryPolicy){
    super(proxyProvider,retryPolicy);
  }
  @Override protected Object invokeMethod(  Method method,  Object[] args) throws Throwable {
    Object result=super.invokeMethod(method,args);
    if (block.get()) {
      throw new UnknownHostException("Fake Exception");
    }
 else {
      return result;
    }
  }
}
