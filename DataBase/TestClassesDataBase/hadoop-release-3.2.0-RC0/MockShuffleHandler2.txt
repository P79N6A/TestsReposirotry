private static class MockShuffleHandler2 extends org.apache.hadoop.mapred.ShuffleHandler {
  boolean socketKeepAlive=false;
  @Override protected Shuffle getShuffle(  final Configuration conf){
    return new Shuffle(conf){
      @Override protected void verifyRequest(      String appid,      ChannelHandlerContext ctx,      HttpRequest request,      HttpResponse response,      URL requestUri) throws IOException {
        SocketChannel channel=(SocketChannel)(ctx.getChannel());
        socketKeepAlive=channel.getConfig().isKeepAlive();
      }
    }
;
  }
  protected boolean isSocketKeepAlive(){
    return socketKeepAlive;
  }
}
