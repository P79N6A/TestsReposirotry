abstract static class ReadStrategy {
  /** 
 * Initialize a ReadStrategy object from a DomainSocket.
 */
  public abstract void init(  DomainSocket s) throws IOException ;
  /** 
 * Read some bytes.
 */
  public abstract int read(  byte b[],  int off,  int length) throws IOException ;
  public void readFully(  byte buf[],  int off,  int len) throws IOException {
    int toRead=len;
    while (toRead > 0) {
      int ret=read(buf,off,toRead);
      if (ret < 0) {
        throw new IOException("Premature EOF from inputStream");
      }
      toRead-=ret;
      off+=ret;
    }
  }
}
