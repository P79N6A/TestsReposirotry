/** 
 * An invocation handler which does nothing when invoking methods, and just counts the number of times close() is called.
 */
private static class StoppedInvocationHandler implements InvocationHandler, Closeable {
  private int closeCalled=0;
  @Override public Object invoke(  Object proxy,  Method method,  Object[] args) throws Throwable {
    return null;
  }
  @Override public void close() throws IOException {
    closeCalled++;
  }
  public int getCloseCalled(){
    return closeCalled;
  }
}
