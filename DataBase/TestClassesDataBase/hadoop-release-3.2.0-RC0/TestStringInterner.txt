/** 
 * Tests string interning  {@link StringInterner}
 */
public class TestStringInterner {
  /** 
 * Test different references are returned for any of string  instances that are equal to each other but not interned.
 */
  @Test public void testNoIntern(){
    String literalABC="ABC";
    String substringABC="ABCDE".substring(0,3);
    String heapABC=new String("ABC");
    assertNotSame(literalABC,substringABC);
    assertNotSame(literalABC,heapABC);
    assertNotSame(substringABC,heapABC);
  }
  /** 
 * Test the same strong reference is returned for any  of string instances that are equal to each other.
 */
  @Test public void testStrongIntern(){
    String strongInternLiteralABC=strongIntern("ABC");
    String strongInternSubstringABC=strongIntern("ABCDE".substring(0,3));
    String strongInternHeapABC=strongIntern(new String("ABC"));
    assertSame(strongInternLiteralABC,strongInternSubstringABC);
    assertSame(strongInternLiteralABC,strongInternHeapABC);
    assertSame(strongInternSubstringABC,strongInternHeapABC);
  }
  /** 
 * Test the same weak reference is returned for any  of string instances that are equal to each other.
 */
  @Test public void testWeakIntern(){
    String weakInternLiteralABC=weakIntern("ABC");
    String weakInternSubstringABC=weakIntern("ABCDE".substring(0,3));
    String weakInternHeapABC=weakIntern(new String("ABC"));
    assertSame(weakInternLiteralABC,weakInternSubstringABC);
    assertSame(weakInternLiteralABC,weakInternHeapABC);
    assertSame(weakInternSubstringABC,weakInternHeapABC);
  }
}
