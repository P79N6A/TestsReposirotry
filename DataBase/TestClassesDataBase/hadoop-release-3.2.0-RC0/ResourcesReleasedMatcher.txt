private static class ResourcesReleasedMatcher extends LocalizationCleanupMatcher {
  final HashSet<LocalResourceRequest> resources=new HashSet<LocalResourceRequest>();
  ResourcesReleasedMatcher(  Map<String,LocalResource> allResources,  EnumSet<LocalResourceVisibility> vis,  Container c) throws URISyntaxException {
    super(c);
    for (    Entry<String,LocalResource> e : allResources.entrySet()) {
      if (vis.contains(e.getValue().getVisibility())) {
        resources.add(new LocalResourceRequest(e.getValue()));
      }
    }
  }
  @Override public boolean matches(  Object o){
    if (!super.matches(o)) {
      return false;
    }
    ContainerLocalizationCleanupEvent evt=(ContainerLocalizationCleanupEvent)o;
    final HashSet<LocalResourceRequest> expected=new HashSet<LocalResourceRequest>(resources);
    for (    Collection<LocalResourceRequest> rc : evt.getResources().values()) {
      for (      LocalResourceRequest rsrc : rc) {
        if (!expected.remove(rsrc)) {
          return false;
        }
      }
    }
    return expected.isEmpty();
  }
}
