public class Bug_for_xuershan extends TestCase {
  private DruidDataSource dataSource;
  private MockDriver driver;
  protected void setUp() throws Exception {
    driver=new MockDriver(){
      public ResultSet createResultSet(      MockPreparedStatement stmt){
        return null;
      }
    }
;
    dataSource=new DruidDataSource();
    dataSource.setUrl("jdbc:mock:xx");
    dataSource.setDriver(driver);
  }
  protected void tearDown() throws Exception {
    JdbcUtils.close(dataSource);
  }
  public void test_bug_for_xuershan() throws Exception {
    String sql="select 1";
    Connection conn=dataSource.getConnection();
    PreparedStatement stmt=conn.prepareStatement(sql);
    stmt.execute();
    Assert.assertNull(stmt.getResultSet());
    stmt.close();
    conn.close();
  }
}
