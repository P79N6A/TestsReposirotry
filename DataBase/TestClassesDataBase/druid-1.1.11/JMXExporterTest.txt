public class JMXExporterTest extends TestCase {
  public void test_export() throws Exception {
    String file="com/alibaba/druid/jmx/spring_stat_export.xml";
    ObjectName objectName=new ObjectName("com.alibaba.druid:type=JdbcStatManager");
    Assert.assertFalse(ManagementFactory.getPlatformMBeanServer().isRegistered(objectName));
    ClassPathXmlApplicationContext context=new ClassPathXmlApplicationContext(file);
    Assert.assertTrue(ManagementFactory.getPlatformMBeanServer().isRegistered(objectName));
    context.close();
    Assert.assertFalse(ManagementFactory.getPlatformMBeanServer().isRegistered(objectName));
  }
}
