public class MySqlCreateProcedureTest14 extends MysqlTest {
  public void test_0() throws Exception {
    String sql="CREATE DEFINER = 'admin'@'localhost' PROCEDURE account_count()\n" + "SQL SECURITY INVOKER\n" + "BEGIN\n"+ "  SELECT 'Number of accounts:', COUNT(*) FROM mysql.user;\n"+ "END;";
    List<SQLStatement> statementList=SQLUtils.parseStatements(sql,JdbcConstants.MYSQL);
    SQLStatement stmt=statementList.get(0);
    assertEquals(1,statementList.size());
    System.out.println(SQLUtils.toMySqlString(stmt));
    assertEquals("CREATE PROCEDURE account_count ()\n" + "SQL SECURITY INVOKER\n" + "BEGIN\n"+ "\tSELECT 'Number of accounts:', COUNT(*)\n"+ "\tFROM mysql.user;\n"+ "END;",SQLUtils.toMySqlString(stmt));
    SchemaStatVisitor visitor=SQLUtils.createSchemaStatVisitor(JdbcConstants.MYSQL);
    stmt.accept(visitor);
    System.out.println("Tables : " + visitor.getTables());
    System.out.println("fields : " + visitor.getColumns());
    assertEquals(1,visitor.getTables().size());
    assertEquals(1,visitor.getColumns().size());
    assertEquals(0,visitor.getConditions().size());
    assertTrue(visitor.containsColumn("mysql.user","*"));
  }
}
