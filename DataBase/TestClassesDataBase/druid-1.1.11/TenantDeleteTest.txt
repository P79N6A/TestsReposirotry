public class TenantDeleteTest extends TestCase {
  private String sql="DELETE FROM orders WHERE FID = ?";
  private WallConfig config=new WallConfig();
  protected void setUp() throws Exception {
    config.setTenantTablePattern("*");
    config.setTenantColumn("tenant");
  }
  public void testMySql() throws Exception {
    WallProvider.setTenantValue(123);
    MySqlWallProvider provider=new MySqlWallProvider(config);
    WallProvider.setTenantValue("test");
    WallCheckResult checkResult=provider.check(sql);
    Assert.assertEquals(0,checkResult.getViolations().size());
    String resultSql=SQLUtils.toSQLString(checkResult.getStatementList(),JdbcConstants.MYSQL);
    Assert.assertEquals("DELETE FROM orders" + "\nWHERE FID = ?",resultSql);
  }
}
