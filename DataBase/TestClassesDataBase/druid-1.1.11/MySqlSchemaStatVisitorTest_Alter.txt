public class MySqlSchemaStatVisitorTest_Alter extends TestCase {
  public void test_0() throws Exception {
    String sql="alter table sql_perf add index `idx_instance_8` (`host`,`port`,`hashcode`,`item`,`time`,`value`);";
    MySqlStatementParser parser=new MySqlStatementParser(sql);
    List<SQLStatement> statementList=parser.parseStatementList();
    SQLStatement statemen=statementList.get(0);
    Assert.assertEquals(1,statementList.size());
    SchemaStatVisitor visitor=new MySqlSchemaStatVisitor();
    statemen.accept(visitor);
    assertEquals(1,visitor.getTables().size());
    assertTrue(visitor.containsTable("sql_perf"));
    assertEquals(6,visitor.getColumns().size());
    assertTrue(visitor.getColumns().contains(new Column("sql_perf","host")));
    assertTrue(visitor.getColumns().contains(new Column("sql_perf","port")));
    assertTrue(visitor.getColumns().contains(new Column("sql_perf","hashcode")));
    assertTrue(visitor.getColumns().contains(new Column("sql_perf","item")));
    assertTrue(visitor.getColumns().contains(new Column("sql_perf","time")));
    assertTrue(visitor.getColumns().contains(new Column("sql_perf","value")));
  }
}
