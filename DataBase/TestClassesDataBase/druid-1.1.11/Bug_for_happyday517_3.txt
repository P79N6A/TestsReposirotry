public class Bug_for_happyday517_3 extends TestCase {
  private DruidDataSource dataSource;
  private MockDriver driver;
  private int originalDataSourceCount=0;
  protected void setUp() throws Exception {
    originalDataSourceCount=DruidDataSourceStatManager.getInstance().getDataSourceList().size();
    driver=new MockDriver();
    dataSource=new DruidDataSource();
    dataSource.setDriver(driver);
    dataSource.setUrl("jdbc:mock:xxx");
    dataSource.setFilters("stat,trace,log4j,encoding");
    dataSource.setDefaultAutoCommit(false);
  }
  protected void tearDown() throws Exception {
    dataSource.close();
    Assert.assertEquals(originalDataSourceCount,DruidDataSourceStatManager.getInstance().getDataSourceList().size());
  }
  public void test_bug() throws Exception {
    Connection conn=dataSource.getConnection();
    Assert.assertEquals(false,conn.getAutoCommit());
    conn.close();
  }
}
