public class TestOracle extends TestCase {
  private String jdbcUrl;
  private String user;
  private String password;
  private String driverClass;
  private String SQL;
  protected void setUp() throws Exception {
    jdbcUrl="jdbc:oracle:thin:@a.b.c.d:1521:xx";
    user="a";
    password="b";
    SQL="SELECT * FROM AV_INFO WHERE ID = ?";
    driverClass="oracle.jdbc.driver.OracleDriver";
  }
  public void test_o() throws Exception {
    DruidDataSource dataSource=new DruidDataSource();
    dataSource.setDriverClassName(driverClass);
    dataSource.setUrl(jdbcUrl);
    dataSource.setUsername(user);
    dataSource.setPassword(password);
    dataSource.setPoolPreparedStatements(true);
    dataSource.setMaxOpenPreparedStatements(50);
    dataSource.setUseOracleImplicitCache(true);
    for (int i=1; i <= 1; ++i) {
      Connection conn=dataSource.getConnection();
      int rowNum=i + 1;
      String sql=SQL + " AND ROWNUM <= " + rowNum;
      PreparedStatement stmt=conn.prepareStatement(sql);
      stmt.setInt(1,61);
      ResultSet rs=stmt.executeQuery();
      int rowCount=0;
      while (rs.next()) {
        rowCount++;
      }
      Assert.assertEquals(true,rowCount > 0);
      rs.close();
      stmt.close();
      conn.close();
    }
    dataSource.close();
  }
}
