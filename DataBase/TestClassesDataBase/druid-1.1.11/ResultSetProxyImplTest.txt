public class ResultSetProxyImplTest extends TestCase {
  String sql="SELECT 1";
  protected void tearDown() throws Exception {
    DruidDriver.getProxyDataSources().clear();
    Assert.assertEquals(0,JdbcStatManager.getInstance().getSqlList().size());
  }
  public void test_resultset() throws Exception {
    MockDriver driver=new MockDriver();
    DataSourceProxyConfig config=new DataSourceProxyConfig();
    config.setUrl("");
    config.setRawUrl("jdbc:mock:");
    DataSourceProxyImpl dataSource=new DataSourceProxyImpl(driver,config);
{
      StatFilter filter=new StatFilter();
      filter.init(dataSource);
      config.getFilters().add(filter);
    }
{
      Log4jFilter filter=new Log4jFilter();
      filter.init(dataSource);
      config.getFilters().add(filter);
    }
    Connection conn=dataSource.connect(null);
    conn.setClientInfo("name",null);
    Statement stmt=conn.createStatement();
    ResultSetProxy rs=(ResultSetProxy)stmt.executeQuery(sql);
    rs.insertRow();
    rs.refreshRow();
    rs.moveToInsertRow();
    rs.moveToCurrentRow();
    rs.next();
    rs.updateRef(1,null);
    rs.updateArray(1,null);
    rs.updateRowId(1,null);
    rs.updateNString(1,null);
    rs.updateNClob(1,(NClob)null);
    rs.updateNClob(1,(Reader)null);
    rs.updateNClob(1,(Reader)null,0);
    rs.updateSQLXML(1,null);
    rs.updateNCharacterStream(1,null);
    rs.updateNCharacterStream(1,null,0);
    rs.getArray("1");
    rs.updateRef("1",null);
    rs.updateArray("1",null);
    rs.updateRowId("1",null);
    rs.updateNString("1",null);
    rs.updateNClob("1",(NClob)null);
    rs.updateNClob("1",(Reader)null);
    rs.updateNClob("1",(Reader)null,0);
    rs.updateSQLXML("1",null);
    rs.updateNCharacterStream("1",null);
    rs.updateNCharacterStream("1",null,0);
  }
}
