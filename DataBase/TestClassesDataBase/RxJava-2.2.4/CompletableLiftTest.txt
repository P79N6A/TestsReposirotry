public class CompletableLiftTest {
  @Test public void callbackThrows(){
    List<Throwable> errors=TestHelper.trackPluginErrors();
    try {
      Completable.complete().lift(new CompletableOperator(){
        @Override public CompletableObserver apply(        CompletableObserver o) throws Exception {
          throw new TestException();
        }
      }
).test();
      TestHelper.assertUndeliverable(errors,0,TestException.class);
    }
  finally {
      RxJavaPlugins.reset();
    }
  }
}
