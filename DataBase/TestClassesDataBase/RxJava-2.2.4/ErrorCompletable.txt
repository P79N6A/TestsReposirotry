/** 
 * A class containing a completable instance that emits a TestException and counts the number of subscribers.
 */
static final class ErrorCompletable extends AtomicInteger {
  private static final long serialVersionUID=7192337844700923752L;
  public final Completable completable=Completable.unsafeCreate(new CompletableSource(){
    @Override public void subscribe(    CompletableObserver observer){
      getAndIncrement();
      EmptyDisposable.error(new TestException(),observer);
    }
  }
);
  /** 
 * Asserts the given number of subscriptions happened.
 * @param n the expected number of subscriptions
 */
  public void assertSubscriptions(  int n){
    Assert.assertEquals(n,get());
  }
}
