public class FlowableLiftTest {
  @Test public void callbackCrash(){
    List<Throwable> errors=TestHelper.trackPluginErrors();
    try {
      Flowable.just(1).lift(new FlowableOperator<Object,Integer>(){
        @Override public Subscriber<? super Integer> apply(        Subscriber<? super Object> subscriber) throws Exception {
          throw new TestException();
        }
      }
).test();
      fail("Should have thrown");
    }
 catch (    NullPointerException ex) {
      assertTrue(ex.toString(),ex.getCause() instanceof TestException);
      TestHelper.assertUndeliverable(errors,0,TestException.class);
    }
 finally {
      RxJavaPlugins.reset();
    }
  }
}
