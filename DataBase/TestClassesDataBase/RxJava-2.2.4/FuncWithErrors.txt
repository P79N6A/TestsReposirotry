public static class FuncWithErrors implements ObservableSource<String> {
  private final int numFailures;
  private final AtomicInteger count=new AtomicInteger(0);
  FuncWithErrors(  int count){
    this.numFailures=count;
  }
  @Override public void subscribe(  final Observer<? super String> o){
    o.onSubscribe(Disposables.empty());
    o.onNext("beginningEveryTime");
    int i=count.getAndIncrement();
    if (i < numFailures) {
      o.onError(new RuntimeException("forced failure: " + (i + 1)));
    }
 else {
      o.onNext("onSuccessOnly");
      o.onComplete();
    }
  }
}
