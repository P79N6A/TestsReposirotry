public class ExecutorSchedulerDelayedRunnableTest {
  @Test(expected=TestException.class) public void delayedRunnableCrash(){
    DelayedRunnable dl=new DelayedRunnable(new Runnable(){
      @Override public void run(){
        throw new TestException();
      }
    }
);
    dl.run();
  }
  @Test public void dispose(){
    final AtomicInteger count=new AtomicInteger();
    DelayedRunnable dl=new DelayedRunnable(new Runnable(){
      @Override public void run(){
        count.incrementAndGet();
      }
    }
);
    dl.dispose();
    dl.dispose();
    dl.run();
    assertEquals(0,count.get());
  }
}
