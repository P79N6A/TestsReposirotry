private static class TestAsyncErrorFlowable implements Publisher<String> {
  String[] valuesToReturn;
  TestAsyncErrorFlowable(  String... values){
    valuesToReturn=values;
  }
  Thread t;
  @Override public void subscribe(  final Subscriber<? super String> subscriber){
    subscriber.onSubscribe(new BooleanSubscription());
    t=new Thread(new Runnable(){
      @Override public void run(){
        for (        String s : valuesToReturn) {
          if (s == null) {
            System.out.println("throwing exception");
            try {
              Thread.sleep(100);
            }
 catch (            Throwable e) {
            }
            subscriber.onError(new NullPointerException());
            return;
          }
 else {
            subscriber.onNext(s);
          }
        }
        System.out.println("subscription complete");
        subscriber.onComplete();
      }
    }
);
    t.start();
  }
}
