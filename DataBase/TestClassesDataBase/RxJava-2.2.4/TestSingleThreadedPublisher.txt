/** 
 * This spawns a single thread for the subscribe execution.
 */
static class TestSingleThreadedPublisher implements Publisher<String> {
  final String[] values;
  private Thread t;
  TestSingleThreadedPublisher(  final String... values){
    this.values=values;
  }
  @Override public void subscribe(  final Subscriber<? super String> subscriber){
    subscriber.onSubscribe(new BooleanSubscription());
    System.out.println("TestSingleThreadedObservable subscribed to ...");
    t=new Thread(new Runnable(){
      @Override public void run(){
        try {
          System.out.println("running TestSingleThreadedObservable thread");
          for (          String s : values) {
            System.out.println("TestSingleThreadedObservable onNext: " + s);
            subscriber.onNext(s);
          }
          subscriber.onComplete();
        }
 catch (        Throwable e) {
          throw new RuntimeException(e);
        }
      }
    }
);
    System.out.println("starting TestSingleThreadedObservable thread");
    t.start();
    System.out.println("done starting TestSingleThreadedObservable thread");
  }
  public void waitToFinish(){
    try {
      t.join();
    }
 catch (    InterruptedException e) {
      throw new RuntimeException(e);
    }
  }
}
