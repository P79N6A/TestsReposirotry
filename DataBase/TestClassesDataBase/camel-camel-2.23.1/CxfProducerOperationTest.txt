/** 
 * @version 
 */
public class CxfProducerOperationTest extends CxfProducerTest {
  private static final String NAMESPACE="http://apache.org/hello_world_soap_http";
  protected String getSimpleEndpointUri(){
    return "cxf://" + getSimpleServerAddress() + "?serviceClass=org.apache.camel.component.cxf.HelloService"+ "&defaultOperationName="+ ECHO_OPERATION;
  }
  protected String getJaxwsEndpointUri(){
    return "cxf://" + getJaxWsServerAddress() + "?serviceClass=org.apache.hello_world_soap_http.Greeter"+ "&defaultOperationName="+ GREET_ME_OPERATION+ "&defaultOperationNamespace="+ NAMESPACE;
  }
  protected Exchange sendSimpleMessage(){
    return sendSimpleMessage(getSimpleEndpointUri());
  }
  private Exchange sendSimpleMessage(  String endpointUri){
    Exchange exchange=template.send(endpointUri,new Processor(){
      public void process(      final Exchange exchange){
        final List<String> params=new ArrayList<>();
        params.add(TEST_MESSAGE);
        exchange.getIn().setBody(params);
        exchange.getIn().setHeader(Exchange.FILE_NAME,"testFile");
        exchange.getIn().setHeader("requestObject",new DefaultCxfBinding());
      }
    }
);
    return exchange;
  }
  protected Exchange sendJaxWsMessage(){
    Exchange exchange=template.send(getJaxwsEndpointUri(),new Processor(){
      public void process(      final Exchange exchange){
        final List<String> params=new ArrayList<>();
        params.add(TEST_MESSAGE);
        exchange.getIn().setBody(params);
        exchange.getIn().setHeader(Exchange.FILE_NAME,"testFile");
      }
    }
);
    return exchange;
  }
  @Test public void testSendingComplexParameter() throws Exception {
    Exchange exchange=template.send(getSimpleEndpointUri(),new Processor(){
      public void process(      final Exchange exchange){
        final List<String> para1=new ArrayList<>();
        para1.add("para1");
        final List<String> para2=new ArrayList<>();
        para2.add("para2");
        List<List<String>> parameters=new ArrayList<>();
        parameters.add(para1);
        parameters.add(para2);
        exchange.getIn().setBody(parameters);
        exchange.getIn().setHeader(CxfConstants.OPERATION_NAME,"complexParameters");
      }
    }
);
    if (exchange.getException() != null) {
      throw exchange.getException();
    }
    assertEquals("Get a wrong response.","param:para1para2",exchange.getOut().getBody(String.class));
  }
}
