public class RestComponentTest {
  private CamelContext context;
  private RestComponent rest;
  @Before public void createSubjects(){
    SimpleRegistry registry=new SimpleRegistry();
    registry.put("host-ref","http://localhost:8080");
    context=new DefaultCamelContext(registry);
    rest=new RestComponent();
    rest.setCamelContext(context);
  }
  @Test public void shouldResolveHostParameterAsReference() throws Exception {
    final Map<String,Object> parameters=new HashMap<>();
    parameters.put("host","#host-ref");
    final RestEndpoint endpoint=(RestEndpoint)rest.createEndpoint("rest://GET:/path:?host=#host-ref","GET:/path",parameters);
    Assert.assertEquals("http://localhost:8080",endpoint.getHost());
  }
  @Test public void shouldResolveHostParameterAsGivenValue() throws Exception {
    final Map<String,Object> parameters=new HashMap<>();
    parameters.put("host","http://localhost:8080");
    final RestEndpoint endpoint=(RestEndpoint)rest.createEndpoint("rest://GET:/path:?host=http%3A%2F%2Flocalhost%3A8080","GET:/path",parameters);
    Assert.assertEquals("http://localhost:8080",endpoint.getHost());
  }
}
