/** 
 * @version 
 */
public class BrowseTest extends ContextTestSupport {
  private static final Logger LOG=LoggerFactory.getLogger(BrowseTest.class);
  protected Object body1="one";
  protected Object body2="two";
  @Test public void testListEndpoints() throws Exception {
    template.sendBody("browse:foo",body1);
    template.sendBody("browse:foo",body2);
    Collection<Endpoint> list=context.getEndpoints();
    assertEquals("number of endpoints",2,list.size());
    for (    Endpoint endpoint : list) {
      List<Exchange> exchanges=((BrowseEndpoint)endpoint).getExchanges();
      LOG.debug(">>>> {} has: {}",endpoint,exchanges);
      assertEquals("Exchanges received on " + endpoint,2,exchanges.size());
      assertInMessageBodyEquals(exchanges.get(0),body1);
      assertInMessageBodyEquals(exchanges.get(1),body2);
    }
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      public void configure() throws Exception {
        from("browse:foo").to("browse:bar");
      }
    }
;
  }
}
