/** 
 * @version
 */
public class DefaultProducerTemplateNonBlockingAsyncTest extends DefaultProducerTemplateAsyncTest {
  @Override @Before public void setUp() throws Exception {
    super.setUp();
    template.stop();
    template.setThreadedAsyncMode(false);
    template.start();
  }
  @Test public void testRunningInSameThread() throws ExecutionException, InterruptedException {
    Thread originalThread=Thread.currentThread();
    CompletableFuture<Exchange> future=template.asyncSend("direct:echo",e -> {
      Assert.assertSame(originalThread,Thread.currentThread());
      e.getIn().setBody("Hi");
    }
);
    Assert.assertEquals("HiHi",template.extractFutureBody(future,String.class));
  }
}
