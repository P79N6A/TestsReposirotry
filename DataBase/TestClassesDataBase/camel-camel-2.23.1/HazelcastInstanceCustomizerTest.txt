@RunWith(SpringRunner.class) @DirtiesContext @SpringBootApplication @SpringBootTest(classes={HazelcastInstanceCustomizerTest.TestConfiguration.class},properties={"debug=false","camel.component.customizer.enabled=false","camel.component.hazelcast.customizer.enabled=true","camel.component.hazelcast-set.customizer.enabled=true","camel.component.hazelcast-topic.customizer.enabled=true"}) public class HazelcastInstanceCustomizerTest {
  @Autowired HazelcastInstance instance;
  @Autowired HazelcastTopicComponent topicComponent;
  @Autowired List<ComponentCustomizer<HazelcastTopicComponent>> topicCustomizers;
  @Autowired HazelcastSetComponent setComponent;
  @Autowired List<ComponentCustomizer<HazelcastSetComponent>> setCustomizers;
  @Autowired HazelcastListComponent listComponent;
  @Test public void testInstanceCustomizer() throws Exception {
    Assert.assertNotNull(instance);
    Assert.assertNotNull(topicComponent);
    Assert.assertEquals(1,topicCustomizers.size());
    Assert.assertEquals(instance,topicComponent.getHazelcastInstance());
    Assert.assertNotNull(setComponent);
    Assert.assertEquals(1,setCustomizers.size());
    Assert.assertEquals(instance,setComponent.getHazelcastInstance());
    Assert.assertNotNull(listComponent);
    Assert.assertNull(listComponent.getHazelcastInstance());
  }
@Configuration public static class TestConfiguration {
    @Bean(destroyMethod="shutdown") public HazelcastInstance hazelcastInstance(){
      return Hazelcast.newHazelcastInstance();
    }
  }
}
