public class LocalNexusConnectorRepositoryTest extends Assert {
  private CamelConnectorCatalog catalog=new DefaultCamelConnectorCatalog();
  @Test public void testLocalNexus() throws Exception {
    LocalFileConnectorNexusRepository repo=new LocalFileConnectorNexusRepository();
    repo.setInitialDelay(2);
    repo.setDelay(3);
    repo.setNexusUrl("dummy");
    repo.setCamelConnectorCatalog(catalog);
    final CountDownLatch latch=new CountDownLatch(1);
    repo.setOnAddConnector(latch::countDown);
    int before=catalog.findConnector(false).size();
    repo.start();
    assertTrue("Should have found connector",latch.await(10,TimeUnit.SECONDS));
    repo.stop();
    int after=catalog.findConnector(false).size();
    assertTrue("There should be 1 connector found",after - before == 1);
  }
}
