/** 
 * The class source won't be generated again if the generator MOJO finds it under src/test/java.
 */
public class CalendarFreebusyIntegrationTest extends AbstractGoogleCalendarTestSupport {
  private static final Logger LOG=LoggerFactory.getLogger(CalendarFreebusyIntegrationTest.class);
  private static final String PATH_PREFIX=GoogleCalendarApiCollection.getCollection().getApiName(CalendarFreebusyApiMethod.class).getName();
  @Test public void testQuery() throws Exception {
    com.google.api.services.calendar.model.FreeBusyRequest request=new FreeBusyRequest();
    List<FreeBusyRequestItem> items=new ArrayList<>();
    items.add(new FreeBusyRequestItem().setId(getCalendar().getId()));
    request.setItems(items);
    request.setTimeMin(DateTime.parseRfc3339("2014-11-10T20:45:30-00:00"));
    request.setTimeMax(DateTime.parseRfc3339("2014-11-10T21:45:30-00:00"));
    final com.google.api.services.calendar.model.FreeBusyResponse result=requestBody("direct://QUERY",request);
    assertNotNull("query result",result);
    LOG.debug("query: " + result);
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      @Override public void configure(){
        from("direct://QUERY").to("google-calendar://" + PATH_PREFIX + "/query?inBody=content");
      }
    }
;
  }
}
