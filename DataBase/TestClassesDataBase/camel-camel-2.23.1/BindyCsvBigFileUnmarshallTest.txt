@ContextConfiguration public class BindyCsvBigFileUnmarshallTest extends AbstractJUnit4SpringContextTests {
  @EndpointInject(uri="mock:result") private MockEndpoint resultEndpoint;
  @Test public void testUnMarshallMessage() throws Exception {
    resultEndpoint.expectedMessageCount(1);
    resultEndpoint.assertIsSatisfied();
    assertCountRecords();
  }
  protected void assertCountRecords(){
    Exchange exchange=resultEndpoint.getExchanges().get(0);
    List<?> models=exchange.getIn().getBody(List.class);
    assertEquals(10000,models.size());
  }
public static class ContextConfig extends RouteBuilder {
    public void configure(){
      BindyCsvDataFormat camelDataFormat=new BindyCsvDataFormat(org.apache.camel.dataformat.bindy.model.simple.oneclass.Order.class);
      from("file://src/test/data/big?noop=true").unmarshal(camelDataFormat).to("mock:result");
    }
  }
}
