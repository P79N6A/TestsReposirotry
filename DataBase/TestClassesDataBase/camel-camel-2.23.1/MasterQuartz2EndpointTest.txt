@ContextConfiguration public class MasterQuartz2EndpointTest extends AbstractJUnit4SpringContextTests {
  protected static ZKServerFactoryBean lastServerBean;
  protected static CuratorFactoryBean lastClientBean;
  @Autowired protected CamelContext camelContext;
  @EndpointInject(uri="mock:results") protected MockEndpoint resultEndpoint;
  @Autowired protected ZKServerFactoryBean zkServerBean;
  @Autowired protected CuratorFactoryBean zkClientBean;
  @Before public void startService() throws Exception {
    ServiceHelper.startService(camelContext);
  }
  @After public void afterRun() throws Exception {
    lastServerBean=zkServerBean;
    lastClientBean=zkClientBean;
    ServiceHelper.stopServices(camelContext);
  }
  @AfterClass public static void shutDownZK() throws Exception {
    lastClientBean.destroy();
    lastServerBean.destroy();
  }
  @Test public void testEndpoint() throws Exception {
    resultEndpoint.expectedMinimumMessageCount(2);
    MockEndpoint.assertIsSatisfied(camelContext);
  }
}
