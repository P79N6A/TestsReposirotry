public class BatchPutAttributesCommandTest {
  private BatchPutAttributesCommand command;
  private AmazonSDBClientMock sdbClient;
  private SdbConfiguration configuration;
  private Exchange exchange;
  @Before public void setUp(){
    sdbClient=new AmazonSDBClientMock();
    configuration=new SdbConfiguration();
    configuration.setDomainName("DOMAIN1");
    exchange=new DefaultExchange(new DefaultCamelContext());
    command=new BatchPutAttributesCommand(sdbClient,configuration,exchange);
  }
  @Test public void execute(){
    List<ReplaceableItem> replaceableItems=new ArrayList<>();
    replaceableItems.add(new ReplaceableItem("ITEM1"));
    exchange.getIn().setHeader(SdbConstants.REPLACEABLE_ITEMS,replaceableItems);
    command.execute();
    assertEquals("DOMAIN1",sdbClient.batchPutAttributesRequest.getDomainName());
    assertEquals(replaceableItems,sdbClient.batchPutAttributesRequest.getItems());
  }
  @Test public void determineReplaceableItems(){
    assertNull(this.command.determineReplaceableItems());
    List<ReplaceableItem> replaceableItems=new ArrayList<>();
    replaceableItems.add(new ReplaceableItem("ITEM1"));
    exchange.getIn().setHeader(SdbConstants.REPLACEABLE_ITEMS,replaceableItems);
    assertEquals(replaceableItems,this.command.determineReplaceableItems());
  }
}
