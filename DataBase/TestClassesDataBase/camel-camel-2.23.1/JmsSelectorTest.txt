/** 
 * @version
 */
public class JmsSelectorTest extends JmsTestSupport {
  @Override protected boolean useJmx(){
    return true;
  }
  @Test public void testJmsSelector() throws Exception {
    MockEndpoint resultEndpoint=getMockEndpoint("mock:result");
    String expectedBody="Hello there!";
    String expectedBody2="Goodbye!";
    resultEndpoint.expectedBodiesReceived(expectedBody2);
    resultEndpoint.message(0).header("cheese").isEqualTo("y");
    template.sendBodyAndHeader("sjms:test.a",expectedBody,"cheese","x");
    template.sendBodyAndHeader("sjms:test.a",expectedBody2,"cheese","y");
    resultEndpoint.assertIsSatisfied();
  }
  protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      public void configure() throws Exception {
        from("sjms:test.a").to("log:test-before?showAll=true").to("sjms:test.b");
        from("sjms:test.b?messageSelector=cheese='y'").to("log:test-after?showAll=true").to("mock:result");
      }
    }
;
  }
}
