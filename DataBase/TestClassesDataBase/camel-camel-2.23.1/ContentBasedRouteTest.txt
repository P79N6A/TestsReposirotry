/** 
 * @version 
 */
public class ContentBasedRouteTest extends SpringTestSupport {
  protected MockEndpoint matchedEndpoint;
  protected MockEndpoint notMatchedEndpoint;
  protected Object body="<hello>world!</hello>";
  protected String header="destination";
  @Test public void testMatchesPredicate() throws Exception {
    matchedEndpoint.expectedMessageCount(1);
    notMatchedEndpoint.expectedMessageCount(0);
    template.sendBodyAndHeader("direct:start",body,header,"firstChoice");
    assertIsSatisfied(matchedEndpoint,notMatchedEndpoint);
  }
  @Test public void testDoesNotMatchPredicate() throws Exception {
    matchedEndpoint.expectedMessageCount(0);
    notMatchedEndpoint.expectedMessageCount(1);
    template.sendBodyAndHeader("direct:start",body,header,"notMatchedValue");
    assertIsSatisfied(matchedEndpoint,notMatchedEndpoint);
  }
  @Override @Before public void setUp() throws Exception {
    super.setUp();
    matchedEndpoint=getMockEndpoint("mock:matched");
    notMatchedEndpoint=getMockEndpoint("mock:notMatched");
  }
  protected AbstractXmlApplicationContext createApplicationContext(){
    return new ClassPathXmlApplicationContext("org/apache/camel/spring/example/contentBasedRoute.xml");
  }
}
