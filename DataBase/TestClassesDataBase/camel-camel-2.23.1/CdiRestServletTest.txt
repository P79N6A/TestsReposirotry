@RunWith(Arquillian.class) public class CdiRestServletTest {
  @Deployment public static Archive<?> createTestArchive(){
    return ShrinkWrap.create(WebArchive.class).addClass(Application.class).addAsWebInfResource(EmptyAsset.INSTANCE,ArchivePaths.create("beans.xml")).setWebXML(Paths.get("src/main/webapp/WEB-INF/web.xml").toFile());
  }
  @Test @RunAsClient public void testWithPath(  @ArquillianResource URL url) throws Exception {
    assertThat(IOHelper.loadText(new URL(url,"camel/say/hello").openStream()),is(equalTo("Hello World!\n")));
  }
  @Test @RunAsClient public void testWithUriTemplate(  @ArquillianResource URL url) throws Exception {
    assertThat(IOHelper.loadText(new URL(url,"camel/say/hello/Antonin").openStream()),is(equalTo("Hello Antonin, I'm CamelContext(hello)!\n")));
  }
}
