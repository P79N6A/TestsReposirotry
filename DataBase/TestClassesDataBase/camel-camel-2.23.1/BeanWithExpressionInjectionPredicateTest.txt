/** 
 * @version 
 */
public class BeanWithExpressionInjectionPredicateTest extends ContextTestSupport {
  protected MyBean myBean=new MyBean();
  @Test public void testSendMessage() throws Exception {
    template.sendBody("direct:in","Hello");
    assertEquals("Hello",myBean.body);
    assertEquals(false,myBean.foo);
  }
  @Test public void testSendMessageWithFoo() throws Exception {
    template.sendBodyAndHeader("direct:in","Hello","foo",123);
    assertEquals("Hello",myBean.body);
    assertEquals(true,myBean.foo);
  }
  @Override protected Context createJndiContext() throws Exception {
    JndiContext answer=new JndiContext();
    answer.bind("myBean",myBean);
    return answer;
  }
  protected RouteBuilder createRouteBuilder(){
    return new RouteBuilder(){
      public void configure(){
        from("direct:in").bean("myBean");
      }
    }
;
  }
public static class MyBean {
    public String body;
    public boolean foo;
    public void read(    String body,    @Simple("${header.foo} != null") boolean foo){
      this.body=body;
      this.foo=foo;
    }
  }
}
