public static class MyDataFormatDefinition extends DataFormatDefinition {
  public static DataFormat getDataFormat(  RouteContext routeContext,  DataFormatDefinition type,  String ref){
    return new MyDataFormatDefinition().createDataFormat();
  }
  public DataFormat getDataFormat(  RouteContext routeContext){
    return createDataFormat();
  }
  private DataFormat createDataFormat(){
    return new DataFormat(){
      @Override public void marshal(      Exchange exchange,      Object graph,      OutputStream stream) throws Exception {
        assertEquals(B.class,graph.getClass());
        PrintWriter pw=new PrintWriter(new OutputStreamWriter(stream));
        pw.print("<fooResponse/>");
        pw.close();
      }
      @Override public Object unmarshal(      Exchange exchange,      InputStream stream) throws Exception {
        BufferedReader br=new BufferedReader(new InputStreamReader(stream));
        assertEquals("<foo/>",br.readLine());
        return new A();
      }
    }
;
  }
}
