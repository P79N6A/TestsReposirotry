@Ignore("Integration test that requires ironmq account.") public class FileCopyExample extends CamelTestSupport {
  private String projectId="myIronMQproject";
  private String token="myIronMQToken";
  private final String ironMQEndpoint="ironmq:testqueue?projectId=" + projectId + "&token="+ token+ "&ironMQCloud=https://mq-aws-eu-west-1-1.iron.io&preserveHeaders=true";
  @Before public void clean(){
    template.sendBodyAndHeader(ironMQEndpoint,"fo",IronMQConstants.OPERATION,IronMQConstants.CLEARQUEUE);
    deleteDirectory("target/out");
  }
  @Test public void testCopyFileOverIronMQ() throws Exception {
    getMockEndpoint("mock:result").expectedMessageCount(1);
    assertMockEndpointsSatisfied();
    assertFileExists("target/out/test.txt");
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      public void configure(){
        from("file:src/test/data?noop=true").convertBodyTo(String.class).log("sending : ${body}").to(ironMQEndpoint);
        from(ironMQEndpoint).log("got message : ${body}").to("file:target/out").to("mock:result");
      }
    }
;
  }
}
