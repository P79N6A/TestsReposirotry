@ContextConfiguration public class SimpleLanguageWithSprinPropertyPlaceholderRouteTest extends SpringRunWithTestSupport {
  @Produce(uri="direct:startSimple") protected ProducerTemplate template;
  @Before public void setUp() throws Exception {
    deleteDirectory("target/outBox");
    deleteDirectory("target/outBoxSimple");
  }
  @Test @DirtiesContext public void replaceSimpleExpression() throws Exception {
    template.sendBody("Test");
    await().atMost(2,TimeUnit.SECONDS).untilAsserted(() -> assertFileExists("target/outBoxSimple/"));
  }
  @Ignore(value="disabled because of https://jira.springsource.org/browse/SPR-7593") @Test @DirtiesContext public void replaceExpression() throws Exception {
    template.sendBody("direct:start","Test");
    await().atMost(2,TimeUnit.SECONDS).untilAsserted(() -> assertFileExists("target/outBox/" + getTestFileName()));
  }
  private String getTestFileName(){
    SimpleDateFormat sdf=new SimpleDateFormat("yyyyMMdd");
    String s=sdf.format(new Date());
    return "test-" + s + ".txt";
  }
}
