/** 
 * @version 
 */
public class RefInvalidTest extends ContextTestSupport {
  private SimpleRegistry registry=new SimpleRegistry();
  @Test public void testOk() throws Exception {
    getMockEndpoint("mock:result").expectedMessageCount(1);
    template.sendBody("ref:foo","Hello World");
    assertMockEndpointsSatisfied();
  }
  @Test public void testInvalid() throws Exception {
    try {
      template.sendBody("ref:xxx","Hello World");
      fail("Should have thrown an exception");
    }
 catch (    ResolveEndpointFailedException e) {
      assertEquals("Failed to resolve endpoint: ref://xxx due to: No bean could be found in the registry for: xxx of type: org.apache.camel.Endpoint",e.getMessage());
      NoSuchBeanException cause=assertIsInstanceOf(NoSuchBeanException.class,e.getCause());
      assertEquals("xxx",cause.getName());
    }
  }
  @Override protected CamelContext createCamelContext() throws Exception {
    CamelContext context=new DefaultCamelContext(registry);
    registry.put("foo",context.getEndpoint("seda:foo"));
    return context;
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      @Override public void configure() throws Exception {
        from("ref:foo").routeId("foo").to("mock:result");
      }
    }
;
  }
}
