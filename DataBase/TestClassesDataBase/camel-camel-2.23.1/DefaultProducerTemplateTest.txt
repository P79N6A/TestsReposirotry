@RunWith(Arquillian.class) public class DefaultProducerTemplateTest {
  @Inject private ProducerTemplate producer;
  @Inject @Uri("mock:outbound") private MockEndpoint out;
  @Deployment public static Archive<?> deployment(){
    return ShrinkWrap.create(JavaArchive.class).addPackage(CdiCamelExtension.class.getPackage()).addClass(UriEndpointRoute.class).addAsManifestResource(EmptyAsset.INSTANCE,"beans.xml");
  }
  @Test public void sendMessageToInbound() throws InterruptedException {
    out.expectedMessageCount(1);
    out.expectedBodiesReceived("test");
    producer.sendBody("direct:inbound","test");
    assertIsSatisfied(2L,TimeUnit.SECONDS,out);
  }
}
