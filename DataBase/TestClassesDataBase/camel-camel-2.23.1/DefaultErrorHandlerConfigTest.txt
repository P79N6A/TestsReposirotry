/** 
 * @version 
 */
@ContextConfiguration public class DefaultErrorHandlerConfigTest extends SpringRunWithTestSupport {
  @Autowired protected ProducerTemplate template;
  @Autowired protected CamelContext context;
  protected Object expectedBody="<hello>world!</hello>";
  @Test public void testRouteInheritsConfiguredErrorHandler() throws Exception {
    assertReceivedMessageWithErrorHandlerValue("foo",null);
  }
  @Test public void testRouteConfiguredErrorHandler() throws Exception {
    assertReceivedMessageWithErrorHandlerValue("bar",null);
  }
  protected void assertReceivedMessageWithErrorHandlerValue(  String name,  String value) throws Exception {
    template.sendBody("direct:" + name,expectedBody);
    MockEndpoint endpoint=MockEndpoint.resolve(context,"mock:" + name);
    endpoint.expectedMessageCount(1);
    endpoint.assertIsSatisfied();
  }
}
