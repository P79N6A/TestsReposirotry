@RunWith(CamelSpringJUnit4ClassRunner.class) @ContextConfiguration(classes={AutowiringContextConfig.class},loader=CamelSpringDelegatingTestContextLoader.class) public class AutodetectingConfigTest extends AbstractJUnit4SpringContextTests {
  @EndpointInject(uri="mock:autowire") MockEndpoint autowireMockEndpoint;
  @EndpointInject(uri="mock:module") MockEndpoint moduleMockEndpoint;
  @Produce ProducerTemplate producer;
  String message="Hello!";
  @Test public void shouldAutodetectRouteBuilders() throws InterruptedException {
    autowireMockEndpoint.expectedMessageCount(1);
    autowireMockEndpoint.message(0).body().isEqualTo(message);
    producer.sendBody("direct:autowire",message);
    autowireMockEndpoint.assertIsSatisfied();
  }
  @Test public void shouldWireRouteBuildersFromModule() throws InterruptedException {
    moduleMockEndpoint.expectedMessageCount(1);
    moduleMockEndpoint.message(0).body().isEqualTo(message);
    producer.sendBody("direct:module",message);
    moduleMockEndpoint.assertIsSatisfied();
  }
}
