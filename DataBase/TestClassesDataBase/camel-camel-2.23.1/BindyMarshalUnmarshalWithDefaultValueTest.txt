/** 
 */
public class BindyMarshalUnmarshalWithDefaultValueTest extends CamelTestSupport {
  @Test public void testBindyMarshalWithDefaultValue() throws Exception {
    MockEndpoint mock=getMockEndpoint("mock:resultMarshal");
    mock.expectedBodiesReceived("\"123\",\"Wednesday, November 9, 2011\",\"North Pole\"" + ConverterUtils.getStringCarriageReturn("WINDOWS"));
    WeatherModel model=new WeatherModel();
    model.setId(123);
    model.setDate("Wednesday, November 9, 2011");
    template.sendBody("direct:marshal",model);
    assertMockEndpointsSatisfied();
  }
  @Test public void testBindyUnmarshalWithDefaultValue() throws Exception {
    MockEndpoint mock=getMockEndpoint("mock:resultUnmarshal");
    String request="\"123\",\"Wednesday, November 9, 2011\",\"\"" + ConverterUtils.getStringCarriageReturn("WINDOWS");
    template.sendBody("direct:unmarshal",request);
    WeatherModel answer=mock.getReceivedExchanges().get(0).getIn().getBody(WeatherModel.class);
    assertEquals(123,answer.getId());
    assertEquals("Wednesday, November 9, 2011",answer.getDate());
    assertEquals("North Pole",answer.getPlace());
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      @Override public void configure() throws Exception {
        from("direct:marshal").marshal().bindy(BindyType.Csv,org.apache.camel.dataformat.bindy.csv2.WeatherModel.class).to("mock:resultMarshal");
        from("direct:unmarshal").unmarshal().bindy(BindyType.Csv,org.apache.camel.dataformat.bindy.csv2.WeatherModel.class).to("mock:resultUnmarshal");
      }
    }
;
  }
}
