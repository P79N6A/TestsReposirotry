/** 
 * This test verifies the system property to un-select platform mbean server.
 * @version 
 */
public class JmxInstrumentationUsingPlatformMBSTest extends JmxInstrumentationUsingPropertiesTest {
  @Override protected boolean useJmx(){
    return true;
  }
  @Override @Before public void setUp() throws Exception {
    System.setProperty(JmxSystemPropertyKeys.USE_PLATFORM_MBS,"false");
    super.setUp();
  }
  @Override @Test public void testMBeanServerType() throws Exception {
    if (isPlatform("aix")) {
      return;
    }
    try {
      mbsc.getMBeanInfo(new ObjectName("java.lang:type=OperatingSystem"));
      assertFalse(true);
    }
 catch (    InstanceNotFoundException e) {
    }
  }
  @Override protected MBeanServerConnection getMBeanConnection() throws Exception {
    if (mbsc == null) {
      List<MBeanServer> servers=MBeanServerFactory.findMBeanServer(null);
      for (      MBeanServer server : servers) {
        if (domainName.equals(server.getDefaultDomain())) {
          mbsc=server;
          break;
        }
      }
    }
    return mbsc;
  }
}
