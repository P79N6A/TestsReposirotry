public class Olingo4RouteTest extends CamelTestSupport {
  protected static final String TEST_SERVICE_BASE_URL="http://services.odata.org/TripPinRESTierService";
  @SuppressWarnings("unchecked") protected <T>T requestBody(  String endpoint,  Object body) throws CamelExecutionException {
    return (T)template().requestBody(endpoint,body);
  }
  @Test public void testRead() throws Exception {
    final ClientEntitySet entities=(ClientEntitySet)requestBody("direct:readentities",null);
    assertNotNull(entities);
    assertEquals(20,entities.getEntities().size());
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      public void configure(){
        from("direct:readentities").to("olingo4://read/People?serviceUri=" + TEST_SERVICE_BASE_URL);
      }
    }
;
  }
}
