public class GenericXmlTokenizeTest extends ContextTestSupport {
  @Test public void testSendClosedTagMessageToTokenize() throws Exception {
    String message="<?xml version='1.0' encoding='UTF-8' ?><parent><child anotherAttr='' some_attr=''></child></parent>";
    String expectedMessage="<child anotherAttr=\"\" some_attr=\"\"/>";
    MockEndpoint resultEndpoint=getMockEndpoint("mock:result");
    resultEndpoint.expectedBodiesReceived(expectedMessage);
    template.sendBody("direct:start",message);
    resultEndpoint.assertIsSatisfied();
  }
  @Test public void testSendSelfClosingTagMessageToTokenize() throws Exception {
    String message="<?xml version='1.0' encoding='UTF-8' ?><parent xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'><child some_attr='' anotherAttr='' /></parent>";
    String expectedMessage="<child anotherAttr=\"\" some_attr=\"\"/>";
    MockEndpoint resultEndpoint=getMockEndpoint("mock:result");
    resultEndpoint.expectedBodiesReceived(expectedMessage);
    template.sendBody("direct:start",message);
    resultEndpoint.assertIsSatisfied();
  }
  @Override protected RouteBuilder createRouteBuilder(){
    return new RouteBuilder(){
      public void configure(){
        from("direct:start").split().xpath("//child").to("mock:result");
      }
    }
;
  }
}
