@ContextConfiguration public class BindySimpleCsvMarshallTrimClipTest extends AbstractJUnit4SpringContextTests {
  private static final String URI_MOCK_RESULT="mock:result";
  private static final String URI_DIRECT_START="direct:start";
  private String expected;
  @Produce(uri=URI_DIRECT_START) private ProducerTemplate template;
  @EndpointInject(uri=URI_MOCK_RESULT) private MockEndpoint result;
  @Test @DirtiesContext public void testMarshallMessage() throws Exception {
    expected="Mr,John,Doeeeeeeee,Cityyyyyyy\r\n";
    result.expectedBodiesReceived(expected);
    template.sendBody(generateModel());
    result.assertIsSatisfied();
  }
  public Object generateModel(){
    Customer customer=new Customer();
    customer.setSalutation("Mr");
    customer.setFirstName(" John ");
    customer.setLastName("Doeeeeeeeeeeeee");
    customer.setCity("Cityyyyyyy     ");
    return customer;
  }
public static class ContextConfig extends RouteBuilder {
    public void configure(){
      BindyCsvDataFormat camelDataFormat=new BindyCsvDataFormat(org.apache.camel.dataformat.bindy.model.simple.oneclassandtrimandclip.Customer.class);
      from(URI_DIRECT_START).marshal(camelDataFormat).to(URI_MOCK_RESULT);
    }
  }
}
