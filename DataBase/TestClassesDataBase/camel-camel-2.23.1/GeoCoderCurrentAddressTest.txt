public class GeoCoderCurrentAddressTest extends GeoCoderApiKeyTestBase {
  @Test public void testGeoCoder() throws Exception {
    MockEndpoint mock=getMockEndpoint("mock:result");
    mock.expectedMessageCount(1);
    mock.expectedBodiesReceived("Hello");
    mock.message(0).header(GeoCoderConstants.LATLNG).isNotNull();
    template.sendBody("direct:start","Hello");
    assertMockEndpointsSatisfied();
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      public void configure(){
        from("direct:start").to("geocoder:address:current?headersOnly=true&apiKey=" + getApiKey()).to("log:result").log("You are at ${header.CamelGeoCoderLatlng} in city ${header.CamelGeoCoderCity} in country ${header.CamelGeoCoderCountryLong}").to("mock:result");
      }
    }
;
  }
}
