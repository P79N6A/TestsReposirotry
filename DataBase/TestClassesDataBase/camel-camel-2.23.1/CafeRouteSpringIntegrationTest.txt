public class CafeRouteSpringIntegrationTest extends Assert {
  private AbstractApplicationContext applicationContext;
  private ProducerTemplate template;
  @Before public void setUp() throws Exception {
    applicationContext=new ClassPathXmlApplicationContext("META-INF/spring/camel-context.xml");
    CamelContext camelContext=getCamelContext();
    template=camelContext.createProducerTemplate();
  }
  @Test public void testCafeRoute() throws Exception {
    Order order=new Order(2);
    order.addItem(DrinkType.ESPRESSO,2,true);
    order.addItem(DrinkType.CAPPUCCINO,4,false);
    order.addItem(DrinkType.LATTE,4,false);
    order.addItem(DrinkType.MOCHA,2,false);
    template.sendBody("direct:cafe",order);
    Thread.sleep(7000);
  }
  @After public void tearDown() throws Exception {
    if (applicationContext != null) {
      applicationContext.stop();
    }
  }
  protected CamelContext getCamelContext() throws Exception {
    return applicationContext.getBean("camel",CamelContext.class);
  }
}
