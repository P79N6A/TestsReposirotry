public class LocalNexusComponentCatalogRepositoryTest extends Assert {
  private final CamelCatalog catalog=new DefaultCamelCatalog();
  @Test public void testLocalNexus() throws Exception {
    int before=catalog.findComponentNames().size();
    LocalFileComponentCatalogNexusRepository repo=new LocalFileComponentCatalogNexusRepository();
    repo.setCamelCatalog(catalog);
    repo.setInitialDelay(2);
    repo.setDelay(3);
    repo.setNexusUrl("dummy");
    final CountDownLatch latch=new CountDownLatch(1);
    repo.setOnAddComponent(latch::countDown);
    repo.start();
    assertTrue("Should have found component",latch.await(10,TimeUnit.SECONDS));
    repo.stop();
    int after=catalog.findComponentNames().size();
    assertTrue("There should be 1 component found",after - before == 1);
  }
}
