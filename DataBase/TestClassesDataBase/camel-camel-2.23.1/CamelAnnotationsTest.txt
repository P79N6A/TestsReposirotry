@DirtiesContext @RunWith(SpringRunner.class) @EnableAutoConfiguration @SpringBootTest(classes={CamelAnnotationsTest.class,CamelAnnotationsTest.TestConfig.class}) public class CamelAnnotationsTest extends Assert {
  @Autowired ProducerTemplate producerTemplate;
  @EndpointInject(uri="mock:test") MockEndpoint mockEndpoint;
  @Test public void shouldInjectEndpoint() throws InterruptedException {
    mockEndpoint.setExpectedMessageCount(1);
    producerTemplate.sendBody("direct:test","msg");
    mockEndpoint.assertIsSatisfied();
  }
@Configuration public static class TestConfig {
    @Bean RoutesBuilder route(){
      return new RouteBuilder(){
        @Override public void configure() throws Exception {
          from("direct:test").to("mock:test");
        }
      }
;
    }
  }
}
