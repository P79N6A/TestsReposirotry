public class InfinispanTestSupport extends CamelTestSupport {
  protected static final String KEY_ONE="keyOne";
  protected static final String VALUE_ONE="valueOne";
  protected static final String KEY_TWO="keyTwo";
  protected static final String VALUE_TWO="valueTwo";
  protected BasicCacheContainer basicCacheContainer;
  protected ControlledTimeService ts;
  @Override @Before public void setUp() throws Exception {
    basicCacheContainer=new DefaultCacheManager(new ConfigurationBuilder().build());
    basicCacheContainer.start();
    super.setUp();
  }
  @Override public void tearDown() throws Exception {
    basicCacheContainer.stop();
    super.tearDown();
  }
  @Override protected JndiRegistry createRegistry() throws Exception {
    JndiRegistry registry=super.createRegistry();
    registry.bind("cacheContainer",basicCacheContainer);
    return registry;
  }
  protected BasicCache<Object,Object> currentCache(){
    return basicCacheContainer.getCache();
  }
  protected BasicCache<Object,Object> namedCache(  String name){
    return basicCacheContainer.getCache(name);
  }
  protected void injectTimeService(){
    ts=new ControlledTimeService(0);
    TestingUtil.replaceComponent((DefaultCacheManager)basicCacheContainer,TimeService.class,ts,true);
  }
}
