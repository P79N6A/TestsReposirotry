private final class UDPServer extends IoHandlerAdapter {
  private final String host;
  private final int port;
  private final NioDatagramAcceptor acceptor;
  private int numMessagesReceived;
  private UDPServer(  String host,  int port){
    this.host=host;
    this.port=port;
    acceptor=new NioDatagramAcceptor();
    DatagramSessionConfig sessionConfig=acceptor.getSessionConfig();
    sessionConfig.setReuseAddress(true);
    acceptor.getFilterChain().addLast("codec",new ProtocolCodecFilter(codecFactory));
    acceptor.getFilterChain().addLast("logger",new LoggingFilter());
    acceptor.setHandler(this);
  }
  public void listen() throws IOException {
    acceptor.bind(new InetSocketAddress(host,port));
  }
  public void close(){
    acceptor.unbind();
  }
  @Override public void messageReceived(  IoSession session,  Object message) throws Exception {
    logger.debug("UDPServer Received body: {}",message);
    numMessagesReceived++;
  }
  @Override public void exceptionCaught(  IoSession session,  Throwable cause) throws Exception {
    logger.error("Ooops! Something went wrong :|",cause);
  }
}
