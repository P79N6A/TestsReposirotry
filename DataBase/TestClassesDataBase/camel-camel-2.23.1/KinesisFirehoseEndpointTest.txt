@RunWith(MockitoJUnitRunner.class) public class KinesisFirehoseEndpointTest {
  @Mock private AmazonKinesisFirehose amazonKinesisFirehoseClient;
  private CamelContext camelContext;
  @Before public void setup() throws Exception {
    SimpleRegistry registry=new SimpleRegistry();
    registry.put("firehoseClient",amazonKinesisFirehoseClient);
    camelContext=new DefaultCamelContext(registry);
  }
  @Test public void allEndpointParams() throws Exception {
    KinesisFirehoseEndpoint endpoint=(KinesisFirehoseEndpoint)camelContext.getEndpoint("aws-kinesis-firehose://some_stream_name" + "?amazonKinesisFirehoseClient=#firehoseClient");
    endpoint.start();
    assertThat(endpoint.getClient(),is(amazonKinesisFirehoseClient));
    assertThat(endpoint.getConfiguration().getStreamName(),is("some_stream_name"));
  }
  @Test public void allClientCreationParams() throws Exception {
    KinesisFirehoseEndpoint endpoint=(KinesisFirehoseEndpoint)camelContext.getEndpoint("aws-kinesis-firehose://some_stream_name" + "?accessKey=xxx&secretKey=yyy&region=us-east-1");
    assertThat(endpoint.getConfiguration().getRegion(),is(Regions.US_EAST_1.getName()));
    assertThat(endpoint.getConfiguration().getAccessKey(),is("xxx"));
    assertThat(endpoint.getConfiguration().getSecretKey(),is("yyy"));
    assertThat(endpoint.getConfiguration().getStreamName(),is("some_stream_name"));
  }
}
