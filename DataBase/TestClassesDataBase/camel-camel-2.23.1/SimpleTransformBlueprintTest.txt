/** 
 * Test class that demonstrates the fundamental interactions going on to verify that a route behaves as it should.
 */
public class SimpleTransformBlueprintTest extends CamelBlueprintTestSupport {
  @Override protected String getBlueprintDescriptor(){
    return "org/apache/camel/test/blueprint/simpleTransform-context.xml," + "org/apache/camel/test/blueprint/simpleTransform-properties-context.xml";
  }
  @Test public void testPayloadIsTransformed() throws InterruptedException {
    MockEndpoint mockOut=getMockEndpoint("mock:out");
    mockOut.setExpectedMessageCount(1);
    mockOut.message(0).body().isEqualTo("Modified: Cheese");
    template.sendBody("direct:in","Cheese");
    assertMockEndpointsSatisfied();
  }
  @Test public void testPayloadIsTransformedAgain() throws InterruptedException {
    MockEndpoint mockOut=getMockEndpoint("mock:out");
    mockOut.setExpectedMessageCount(1);
    mockOut.message(0).body().isEqualTo("Modified: Foo");
    template.sendBody("direct:in","Foo");
    assertMockEndpointsSatisfied();
  }
}
