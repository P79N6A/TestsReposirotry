public class CamelItemProcessorTest extends CamelTestSupport {
  CamelItemProcessor<String,String> camelItemProcessor;
  String message="message";
  @Override protected void doPostSetup() throws Exception {
    camelItemProcessor=new CamelItemProcessor<>(template(),"direct:start");
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      @Override public void configure() throws Exception {
        from("direct:start").setExchangePattern(ExchangePattern.InOut).setBody().simple("${body}${body}");
      }
    }
;
  }
  @Test public void shouldReturnDoubledMessage() throws Exception {
    String messageRead=camelItemProcessor.process(message);
    assertEquals(message + message,messageRead);
  }
}
