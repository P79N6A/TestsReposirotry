public class SpringBatchJobLauncherTest extends CamelSpringTestSupport {
  @EndpointInject(uri="mock:output") MockEndpoint outputEndpoint;
  @EndpointInject(uri="mock:jobExecutionEventsQueue") MockEndpoint jobExecutionEventsQueueEndpoint;
  String[] inputMessages=new String[]{"foo","bar","baz",null};
  @Before public void setUp() throws Exception {
    super.setUp();
    for (    String message : inputMessages) {
      template.sendBody("seda:inputQueue",message);
    }
  }
  @Test public void testJobLauncher() throws InterruptedException {
    outputEndpoint.expectedBodiesReceived("Echo foo","Echo bar","Echo baz");
    template.sendBody("direct:start-jobLauncher","Start batch!");
    outputEndpoint.assertIsSatisfied();
  }
  @Test public void testJobLauncherRef() throws InterruptedException {
    outputEndpoint.expectedBodiesReceived("Echo foo","Echo bar","Echo baz");
    template.sendBody("direct:start-jobLauncherRef","Start batch!");
    outputEndpoint.assertIsSatisfied();
  }
  @Override protected AbstractApplicationContext createApplicationContext(){
    return new ClassPathXmlApplicationContext("org/apache/camel/component/spring/batch/springBatchtestJobLauncherContext.xml");
  }
}
