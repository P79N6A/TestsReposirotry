/** 
 * @version 
 */
public class EndpointReferenceTest extends SpringTestSupport {
  protected static Object body="<hello>world!</hello>";
  @Test public void testContextToString() throws Exception {
    assertNotNull(context.toString());
  }
  @Test public void testEndpointConfiguration() throws Exception {
    Endpoint endpoint=getMandatoryBean(Endpoint.class,"endpoint1");
    assertEquals("endpoint URI","direct://start",endpoint.getEndpointUri());
    DummyBean dummyBean=getMandatoryBean(DummyBean.class,"mybean");
    assertNotNull("The bean should have an endpoint injected",dummyBean.getEndpoint());
    assertEquals("endpoint URI","direct://start",dummyBean.getEndpoint().getEndpointUri());
    log.debug("Found dummy bean: " + dummyBean);
    MockEndpoint resultEndpoint=getMockEndpoint("mock:end");
    resultEndpoint.expectedBodiesReceived(body);
    template.sendBody("direct:start",body);
    resultEndpoint.assertIsSatisfied();
  }
  protected SpringCamelContext createCamelContext(){
    return applicationContext.getBean("camel",SpringCamelContext.class);
  }
  @Test public void testEndpointConfigurationAfterEnsuringThatTheStatementRouteBuilderWasCreated() throws Exception {
    String[] names=applicationContext.getBeanDefinitionNames();
    for (    String name : names) {
      log.debug("Found bean name: " + name);
    }
    testEndpointConfiguration();
  }
  @Test public void testReferenceEndpointFromOtherCamelContext() throws Exception {
    CamelContext context=applicationContext.getBean("camel2",CamelContext.class);
    RouteContext routeContext=new DefaultRouteContext(context);
    try {
      routeContext.resolveEndpoint(null,"endpoint1");
      fail("Should have thrown exception");
    }
 catch (    NoSuchEndpointException exception) {
      assertTrue("Get a wrong exception message",exception.getMessage().contains("make sure the endpoint has the same camel context as the route does"));
    }
  }
  protected AbstractXmlApplicationContext createApplicationContext(){
    return new ClassPathXmlApplicationContext("org/apache/camel/spring/endpointReference.xml");
  }
}
