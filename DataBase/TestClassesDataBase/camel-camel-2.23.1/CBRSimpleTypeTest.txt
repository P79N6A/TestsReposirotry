/** 
 */
public class CBRSimpleTypeTest extends ContextTestSupport {
  @Test public void testCBR() throws Exception {
    getMockEndpoint("mock:gold").expectedBodiesReceived("James");
    getMockEndpoint("mock:silver").expectedBodiesReceived("Claus");
    getMockEndpoint("mock:other").expectedBodiesReceived("Willem");
    template.sendBodyAndHeader("direct:start","Claus","customer",Customer.SILVER);
    template.sendBodyAndHeader("direct:start","Willem","customer",Customer.BRONZE);
    template.sendBodyAndHeader("direct:start","James","customer",Customer.GOLD);
    assertMockEndpointsSatisfied();
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      @Override public void configure() throws Exception {
        from("direct:start").choice().when().simple("${header.customer} == ${type:org.apache.camel.processor.Customer.GOLD}").to("mock:gold").when().simple("${header.customer} == ${type:org.apache.camel.processor.Customer.SILVER}").to("mock:silver").otherwise().to("mock:other");
      }
    }
;
  }
}
