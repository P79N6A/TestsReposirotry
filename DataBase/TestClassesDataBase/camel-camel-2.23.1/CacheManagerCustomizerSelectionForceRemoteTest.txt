@RunWith(SpringRunner.class) @DirtiesContext @SpringBootApplication @SpringBootTest(classes={CacheManagerCustomizerSelectionForceRemoteTest.TestConfiguration.class},properties={"debug=false","infinispan.embedded.enabled=false","infinispan.remote.enabled=false","camel.component.infinispan.customizer.embedded-cache-manager.enabled=false","camel.component.infinispan.customizer.remote-cache-manager.enabled=true"}) public class CacheManagerCustomizerSelectionForceRemoteTest {
  @Autowired RemoteCacheManager remoteCacheManager;
  @Autowired EmbeddedCacheManager embeddedCacheManager;
  @Autowired InfinispanComponent component;
  @Test public void testComponentConfiguration() throws Exception {
    Assert.assertNotNull(remoteCacheManager);
    Assert.assertNotNull(embeddedCacheManager);
    Assert.assertNotNull(component);
    Assert.assertNotNull(component.getCacheContainer());
    Assert.assertEquals(remoteCacheManager,component.getCacheContainer());
  }
@Configuration @AutoConfigureAfter(CamelAutoConfiguration.class) @AutoConfigureBefore(InfinispanComponentAutoConfiguration.class) public static class TestConfiguration {
    @Bean public EmbeddedCacheManager embeddedCacheManagerInstance(){
      return CacheManagerCustomizerTestSupport.newEmbeddedCacheManagerInstance();
    }
    @Bean public RemoteCacheManager remoteCacheManagerInstance(){
      return CacheManagerCustomizerTestSupport.newRemoteCacheManagerInstance();
    }
  }
}
