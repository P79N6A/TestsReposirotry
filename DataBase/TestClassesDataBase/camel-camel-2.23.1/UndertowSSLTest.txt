/** 
 * Testing the ssl configuration
 */
@RunWith(SpringRunner.class) @DirtiesContext @SpringBootApplication @SpringBootTest(classes={UndertowSSLTest.TestConfiguration.class},properties={"debug=false","camel.ssl.config.cert-alias=web","camel.ssl.config.key-managers.key-password=changeit","camel.ssl.config.key-managers.key-store.resource=/keystore.p12","camel.ssl.config.key-managers.key-store.password=changeit","camel.ssl.config.key-managers.key-store.type=PKCS12","camel.ssl.config.trust-managers.key-store.resource=/cacerts","camel.ssl.config.trust-managers.key-store.password=changeit","camel.ssl.config.trust-managers.key-store.type=jks","camel.component.undertow.use-global-ssl-context-parameters=true"}) public class UndertowSSLTest {
  private static int port;
  @Autowired private ProducerTemplate producerTemplate;
  @BeforeClass public static void init(){
    port=AvailablePortFinder.getNextAvailable();
  }
  @Test public void testEndpoint() throws Exception {
    String result=producerTemplate.requestBody("undertow:https://localhost:" + port,null,String.class);
    assertEquals("Hello",result);
  }
@Component public static class TestRoutes extends RouteBuilder {
    @Override public void configure() throws Exception {
      from("undertow:https://localhost:" + port).transform().constant("Hello");
    }
  }
@Configuration public static class TestConfiguration {
  }
}
