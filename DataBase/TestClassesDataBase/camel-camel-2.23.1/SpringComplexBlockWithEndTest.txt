/** 
 * @version 
 */
public class SpringComplexBlockWithEndTest extends ContextTestSupport {
  @Test public void testHello() throws Exception {
    getMockEndpoint("mock:hello").expectedMessageCount(1);
    getMockEndpoint("mock:bye").expectedMessageCount(0);
    getMockEndpoint("mock:otherwise").expectedMessageCount(0);
    getMockEndpoint("mock:result").expectedMessageCount(1);
    template.sendBody("direct:start","Hello World");
    assertMockEndpointsSatisfied();
  }
  @Test public void testBye() throws Exception {
    getMockEndpoint("mock:hello").expectedMessageCount(0);
    getMockEndpoint("mock:bye").expectedMessageCount(1);
    getMockEndpoint("mock:otherwise").expectedMessageCount(0);
    getMockEndpoint("mock:result").expectedMessageCount(1);
    template.sendBody("direct:start","Bye World");
    assertMockEndpointsSatisfied();
  }
  @Test public void testOther() throws Exception {
    getMockEndpoint("mock:hello").expectedMessageCount(0);
    getMockEndpoint("mock:bye").expectedMessageCount(0);
    getMockEndpoint("mock:otherwise").expectedMessageCount(1);
    getMockEndpoint("mock:trapped").expectedMessageCount(1);
    getMockEndpoint("mock:result").expectedBodiesReceived("Cowboys");
    getMockEndpoint("mock:split").expectedBodiesReceived("Hi The good","Hi The ugly");
    template.sendBody("direct:start","The good,The bad,The ugly");
    assertMockEndpointsSatisfied();
  }
  protected CamelContext createCamelContext() throws Exception {
    return createSpringCamelContext(this,"org/apache/camel/spring/processor/SpringComplexBlockWithEndTest.xml");
  }
public static class SplitAggregate implements AggregationStrategy {
    public Exchange aggregate(    Exchange oldExchange,    Exchange newExchange){
      newExchange.getOut().setBody("Cowboys");
      return newExchange;
    }
  }
}
