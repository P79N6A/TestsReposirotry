/** 
 * Unit test when using custom output stream.
 */
public class StreamHeaderTest extends CamelTestSupport {
  private OutputStream mystream=new MyOutputStream();
  private StringBuilder sb=new StringBuilder();
  @Test public void testStringContent(){
    template.sendBody("direct:in","Hello");
    assertEquals("Hello" + LS,sb.toString());
  }
  @Test public void testBinaryContent(){
    template.sendBody("direct:in","Hello".getBytes());
    assertEquals("Hello",sb.toString());
  }
  protected RouteBuilder createRouteBuilder(){
    return new RouteBuilder(){
      public void configure(){
        from("direct:in").setHeader("stream",constant(mystream)).to("stream:header");
      }
    }
;
  }
private class MyOutputStream extends OutputStream {
    public void write(    int b) throws IOException {
      sb.append((char)b);
    }
  }
}
