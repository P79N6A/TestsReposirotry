@RunWith(Arquillian.class) public class QualifiedCamelContextTest {
  @Inject @BarQualifier @Uri("direct:start") private ProducerTemplate inbound;
  @Inject @BarQualifier @Uri("mock:result") private MockEndpoint outbound;
  @Deployment public static Archive<?> deployment(){
    return ShrinkWrap.create(JavaArchive.class).addPackage(CdiCamelExtension.class.getPackage()).addClass(QualifiedCamelContext.class).addAsManifestResource(EmptyAsset.INSTANCE,"beans.xml");
  }
  @Test public void sendMessageToInbound() throws InterruptedException {
    outbound.expectedMessageCount(1);
    outbound.expectedBodiesReceived("test");
    inbound.sendBody("test");
    assertIsSatisfied(2L,TimeUnit.SECONDS,outbound);
  }
@BarQualifier public static class CamelRoute extends RouteBuilder {
    @Inject @BarQualifier @Uri("direct:start") private Endpoint directEP;
    @Inject @BarQualifier @Uri("mock:result") private MockEndpoint mockEP;
    @Override public void configure(){
      from(directEP).to(mockEP);
    }
  }
}
