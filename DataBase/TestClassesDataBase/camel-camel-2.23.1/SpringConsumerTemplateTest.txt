/** 
 * Unit test using the ConsumerTemplate
 * @version 
 */
@ContextConfiguration public class SpringConsumerTemplateTest extends SpringRunWithTestSupport {
  @Autowired private ProducerTemplate producer;
  @Autowired private ConsumerTemplate consumer;
  @EndpointInject(ref="result") private MockEndpoint mock;
  @Test public void testConsumeTemplate() throws Exception {
    mock.expectedBodiesReceived("Hello World");
    producer.sendBody("seda:start","Hello World");
    String body=consumer.receiveBody("seda:start",String.class);
    assertEquals("Hello World",body);
    producer.sendBody("seda:foo",body);
    mock.assertIsSatisfied();
  }
}
