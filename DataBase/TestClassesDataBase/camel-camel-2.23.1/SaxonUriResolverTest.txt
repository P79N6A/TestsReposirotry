public class SaxonUriResolverTest extends CamelTestSupport {
  private static final String XSL_PATH="org/apache/camel/component/xslt/transform_includes_data.xsl";
  private static final String XML_DATA="<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?><root>1</root>";
  private static final String XML_RESP="<?xml version=\"1.0\" encoding=\"UTF-8\"?><MyDate>February</MyDate>";
  @Test public void test() throws Exception {
    StringWriter writer=new StringWriter();
    StreamResult result=new StreamResult(writer);
    Source xsl=fromClasspath(XSL_PATH);
    xsl.setSystemId("classpath:/" + XSL_PATH);
    Source xml=fromString(XML_DATA);
    TransformerFactory factory=new TransformerFactoryImpl();
    Transformer transformer=factory.newTransformer(xsl);
    transformer.setURIResolver(new XsltUriResolver(context(),XSL_PATH));
    transformer.transform(xml,result);
    Assert.assertEquals(XML_RESP,writer.toString());
  }
  protected Source fromString(  String data) throws IOException {
    return new StreamSource(new StringReader(data));
  }
  protected Source fromClasspath(  String path) throws IOException {
    return new StreamSource(ResourceHelper.resolveMandatoryResourceAsInputStream(context(),path));
  }
}
