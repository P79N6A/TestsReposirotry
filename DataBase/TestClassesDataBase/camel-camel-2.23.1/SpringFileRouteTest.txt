/** 
 * @version 
 */
@ContextConfiguration public class SpringFileRouteTest extends SpringRunWithTestSupport {
  protected String expectedBody="Hello World!";
  @Autowired protected ProducerTemplate template;
  @Autowired protected Endpoint inputFile;
  @EndpointInject(uri="mock:result") protected MockEndpoint result;
  @Test public void testMocksAreValid() throws Exception {
    FileEndpoint fileEndpoint=assertIsInstanceOf(FileEndpoint.class,inputFile);
    assertEquals("File",new File("target/test-default-inbox"),fileEndpoint.getFile());
    result.expectedBodiesReceived(expectedBody);
    result.setResultWaitTime(5000);
    template.sendBodyAndHeader(inputFile,expectedBody,Exchange.FILE_NAME,"hello.txt");
    result.assertIsSatisfied();
  }
  @Before public void setUp() throws Exception {
    deleteDirectory("target/test-default-inbox");
    super.setUp();
  }
}
