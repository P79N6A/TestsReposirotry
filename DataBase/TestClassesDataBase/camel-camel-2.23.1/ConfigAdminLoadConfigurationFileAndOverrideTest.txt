/** 
 * This example will load a Blueprint .cfg file (which will initialize configadmin), and also override its property placeholders from this unit test source code directly (the change will reload blueprint container).
 */
public class ConfigAdminLoadConfigurationFileAndOverrideTest extends CamelBlueprintTestSupport {
  @Override protected String getBlueprintDescriptor(){
    return "org/apache/camel/test/blueprint/configadmin-loadfileoverride.xml";
  }
  @Override protected String[] loadConfigAdminConfigurationFile(){
    return new String[]{"src/test/resources/etc/stuff.cfg","stuff"};
  }
  @Override protected String useOverridePropertiesWithConfigAdmin(  Dictionary props) throws Exception {
    props.put("destination","mock:extra");
    return "stuff";
  }
  @Test public void testConfigAdmin() throws Exception {
    getMockEndpoint("mock:original").setExpectedMessageCount(0);
    getMockEndpoint("mock:result").setExpectedMessageCount(0);
    getMockEndpoint("mock:extra").expectedBodiesReceived("Bye World","Yay Bye WorldYay Bye World");
    template.sendBody("direct:start","World");
    assertMockEndpointsSatisfied();
  }
}
