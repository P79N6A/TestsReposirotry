public class ScatterGatherTest extends ContextTestSupport {
  @Test public void testScatterAndGather() throws Exception {
    MockEndpoint result=getMockEndpoint("mock:result");
    result.expectedMessageCount(1);
    result.expectedBodiesReceived(1);
    Map<String,Object> headers=new HashMap<>();
    headers.put("listOfVendors","bean:vendor1, bean:vendor2, bean:vendor3");
    headers.put("quoteRequestId","quoteRequest-1");
    template.sendBodyAndHeaders("direct:start","<quote_request item=\"beer\"/>",headers);
    result.assertIsSatisfied();
  }
  protected CamelContext createCamelContext() throws Exception {
    return createSpringCamelContext(this,"org/apache/camel/spring/processor/scattergather/scatter-gather.xml");
  }
}
