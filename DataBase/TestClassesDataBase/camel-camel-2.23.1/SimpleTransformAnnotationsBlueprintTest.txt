/** 
 * Test class that demonstrates the fundamental interactions going on to verify that a route behaves as it should.
 */
public class SimpleTransformAnnotationsBlueprintTest extends CamelBlueprintTestSupport {
  @Produce(uri="direct:in") private ProducerTemplate producerTemplate;
  @EndpointInject(uri="mock:out") private MockEndpoint mockOut;
  @Override protected String getBlueprintDescriptor(){
    return "org/apache/camel/test/blueprint/simpleTransform-context.xml," + "org/apache/camel/test/blueprint/simpleTransform-properties-context.xml";
  }
  @Test public void testPayloadIsTransformed() throws InterruptedException {
    mockOut.setExpectedMessageCount(1);
    mockOut.message(0).body().isEqualTo("Modified: Cheese");
    producerTemplate.sendBody("Cheese");
    assertMockEndpointsSatisfied();
  }
  @Test public void testPayloadIsTransformedAgain() throws InterruptedException {
    mockOut.setExpectedMessageCount(1);
    mockOut.message(0).body().isEqualTo("Modified: Foo");
    producerTemplate.sendBody("Foo");
    assertMockEndpointsSatisfied();
  }
}
