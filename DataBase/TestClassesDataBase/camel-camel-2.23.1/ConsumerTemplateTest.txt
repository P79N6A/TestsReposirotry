@RunWith(Arquillian.class) public class ConsumerTemplateTest {
  @Inject private ProducerTemplate producer;
  @Inject private ConsumerTemplate consumer;
  @Deployment public static Archive<?> deployment(){
    return ShrinkWrap.create(JavaArchive.class).addPackage(CdiCamelExtension.class.getPackage()).addAsManifestResource(EmptyAsset.INSTANCE,"beans.xml");
  }
  @Test public void sendThenReceiveBody(){
    producer.sendBody("seda:foo","test");
    String body=consumer.receiveBody("seda:foo",TimeUnit.SECONDS.toMillis(1L),String.class);
    assertThat("Body is incorrect!",body,is(equalTo("test")));
  }
}
