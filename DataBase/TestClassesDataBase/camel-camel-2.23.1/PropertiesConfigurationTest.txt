/** 
 * Verify  {@link CdiCamelExtension} with custom properties.
 */
@RunWith(Arquillian.class) public class PropertiesConfigurationTest {
  @Inject private CamelContext camelContext;
  @Produces @ApplicationScoped @Named("properties") private static PropertiesComponent propertiesComponent(){
    Properties configuration=new Properties();
    configuration.put("property","value");
    PropertiesComponent component=new PropertiesComponent();
    component.setInitialProperties(configuration);
    component.setLocation("classpath:camel1.properties,classpath:camel2.properties");
    return component;
  }
  @Deployment public static JavaArchive createDeployment(){
    return Maven.configureResolver().workOffline().loadPomFromFile("pom.xml").resolve("org.apache.camel:camel-cdi").withoutTransitivity().asSingle(JavaArchive.class);
  }
  @Test public void checkContext() throws Exception {
    assertNotNull(camelContext);
    assertEquals("value1",camelContext.resolvePropertyPlaceholders("{{property1}}"));
    assertEquals("value2",camelContext.resolvePropertyPlaceholders("{{property2}}"));
    assertEquals("value1_value2",camelContext.resolvePropertyPlaceholders("{{property1}}_{{property2}}"));
  }
}
