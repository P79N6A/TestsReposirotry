public class PollEnricherNoResourceTest extends ContextTestSupport {
  @Test public void testNoResourceA() throws Exception {
    getMockEndpoint("mock:result").expectedMessageCount(1);
    getMockEndpoint("mock:result").message(0).body().isNull();
    getMockEndpoint("mock:result").expectedHeaderReceived(Exchange.TO_ENDPOINT,"seda://foo");
    template.sendBody("direct:a","Hello World");
    assertMockEndpointsSatisfied();
  }
  @Test public void testResourceA() throws Exception {
    template.sendBody("seda:foo","Bye World");
    Thread.sleep(250);
    getMockEndpoint("mock:result").expectedBodiesReceived("Bye World");
    getMockEndpoint("mock:result").expectedHeaderReceived(Exchange.TO_ENDPOINT,"seda://foo");
    template.sendBody("direct:a","Hello World");
    assertMockEndpointsSatisfied();
  }
  @Test public void testResourceB() throws Exception {
    template.sendBody("seda:bar","Bye World");
    getMockEndpoint("mock:result").expectedBodiesReceived("Bye World");
    getMockEndpoint("mock:result").expectedHeaderReceived(Exchange.TO_ENDPOINT,"seda://bar");
    template.sendBody("direct:b","Hello World");
    assertMockEndpointsSatisfied();
  }
  protected RouteBuilder createRouteBuilder(){
    return new RouteBuilder(){
      public void configure(){
        from("direct:a").pollEnrich("seda:foo",1000).to("mock:result");
        from("direct:b").pollEnrich("seda:bar").to("mock:result");
      }
    }
;
  }
}
