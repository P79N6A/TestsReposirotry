/** 
 * @version 
 */
public class HttpClientProxyTransferExceptionTest extends BaseJettyTest {
  @Test public void testHttpClientNoProxyOk() throws Exception {
    String out=template.requestBody("direct:cool","World",String.class);
    assertEquals("Hello World",out);
  }
  @Test public void testHttpClientNoProxyException() throws Exception {
    try {
      template.requestBody("direct:cool","Kaboom");
      fail("Should have thrown an exception");
    }
 catch (    CamelExecutionException e) {
      MyAppException cause=assertIsInstanceOf(MyAppException.class,e.getCause());
      assertNotNull(cause);
      assertEquals("Kaboom",cause.getName());
    }
  }
  @Test public void testHttpClientProxyOk() throws Exception {
    MyCoolService proxy=new ProxyBuilder(context).endpoint("direct:cool").build(MyCoolService.class);
    String out=proxy.hello("World");
    assertEquals("Hello World",out);
  }
  @Test public void testHttpClientProxyException() throws Exception {
    MyCoolService proxy=new ProxyBuilder(context).endpoint("direct:cool").build(MyCoolService.class);
    try {
      proxy.hello("Kaboom");
      fail("Should have thrown exception");
    }
 catch (    MyAppException e) {
      assertEquals("Kaboom",e.getName());
    }
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      @Override public void configure() throws Exception {
        from("direct:cool").to("http://localhost:{{port}}/myapp/myservice?transferException=true");
        from("jetty:http://localhost:{{port}}/myapp/myservice?transferException=true").bean(MyCoolServiceBean.class);
      }
    }
;
  }
}
