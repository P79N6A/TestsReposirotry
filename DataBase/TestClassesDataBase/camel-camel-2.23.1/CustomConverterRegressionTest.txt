public class CustomConverterRegressionTest extends CamelBlueprintTestSupport {
  @Override protected String getBlueprintDescriptor(){
    return "org/apache/camel/test/blueprint/converter/CustomConverterRegressionTest.xml";
  }
  @Test public void testCustomConverter() throws Exception {
    getMockEndpoint("mock:result").expectedMessageCount(1);
    getMockEndpoint("mock:result").message(0).body().isInstanceOf(Foo.class);
    template.sendBody("direct:start","John,Doe");
    assertMockEndpointsSatisfied();
    Foo foo=getMockEndpoint("mock:result").getReceivedExchanges().get(0).getIn().getBody(Foo.class);
    assertEquals("John",foo.getFirst());
    assertEquals("Doe",foo.getLast());
  }
}
