/** 
 * @version 
 */
public class XPathTransformRouteTest extends ContextTestSupport {
  public Document replaceMe(  Document doc) throws Exception {
    NodeList list=doc.getElementsByTagName("firstname");
    list.item(0).setTextContent("Servicemix");
    return doc;
  }
  @Test public void testXPathTransform() throws Exception {
    MockEndpoint mock=getMockEndpoint("mock:result");
    mock.expectedBodiesReceived("<root><firstname>Servicemix</firstname><lastname>Camel</lastname></root>");
    template.sendBody("direct:start","<root><firstname>Apache</firstname><lastname>Camel</lastname></root>");
    assertMockEndpointsSatisfied();
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      @Override public void configure() throws Exception {
        from("direct:start").bean(XPathTransformRouteTest.class,"replaceMe").to("log:result","mock:result");
      }
    }
;
  }
}
