public class PropertiesComponentDisableDefaultsTest extends ContextTestSupport {
  @Override public boolean isUseRouteBuilder(){
    return false;
  }
  @Test public void testDisableDefaultValueResolution() throws Exception {
    context.addRoutes(new RouteBuilder(){
      @Override public void configure() throws Exception {
        from("direct:start").transform().simple("{{p:message}}").to("mock:{{p:mockend}}");
      }
    }
);
    getMockEndpoint("mock:end").expectedMessageCount(1);
    getMockEndpoint("mock:end").expectedBodiesReceived("my message");
    context.start();
    template.sendBody("direct:start",null);
    assertMockEndpointsSatisfied();
  }
  @Override protected CamelContext createCamelContext() throws Exception {
    CamelContext context=super.createCamelContext();
    Properties props=new Properties();
    props.put("p:mockend","end");
    props.put("p:message","my message");
    PropertiesComponent component=new PropertiesComponent();
    component.setDefaultFallbackEnabled(false);
    component.setInitialProperties(props);
    context.addComponent("properties",component);
    return context;
  }
}
