/** 
 * @version 
 */
public class GroovySumFilterTest extends CamelSpringTestSupport {
  @Override protected AbstractApplicationContext createApplicationContext(){
    return new ClassPathXmlApplicationContext("org/apache/camel/processor/groovy/groovySumFilter.xml");
  }
  @Test public void testSendMatchingMessage() throws Exception {
    getMockEndpoint("mock:high").expectedMessageCount(1);
    getMockEndpoint("mock:low").expectedMessageCount(0);
    List<Order> orders=new ArrayList<>();
    orders.add(new Order("Camel in Action",50));
    orders.add(new Order("ActiveMQ in Action",40));
    orders.add(new Order("Spring in Action",60));
    template.sendBody("direct:start",orders);
    assertMockEndpointsSatisfied();
  }
  @Test public void testSendNotMatchingMessage() throws Exception {
    getMockEndpoint("mock:high").expectedMessageCount(0);
    getMockEndpoint("mock:low").expectedMessageCount(1);
    List<Order> orders=new ArrayList<>();
    orders.add(new Order("Camel in Action",50));
    orders.add(new Order("ActiveMQ in Action",40));
    template.sendBody("direct:start",orders);
    assertMockEndpointsSatisfied();
  }
}
