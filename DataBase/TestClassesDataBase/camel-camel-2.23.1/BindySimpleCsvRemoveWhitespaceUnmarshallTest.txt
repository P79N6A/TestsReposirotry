@ContextConfiguration public class BindySimpleCsvRemoveWhitespaceUnmarshallTest extends AbstractJUnit4SpringContextTests {
  @Produce(uri="direct:start") protected ProducerTemplate template;
  private String record="1 , 2,Albert,Cartier,ISIN,BE12345678,SELL,,1500,EUR,08-01-2009\r\n" + ",,Jacques,,,BE12345678,SELL,,1500,EUR,08-01-2009";
  @EndpointInject(uri="mock:result") private MockEndpoint resultEndpoint;
  @Test public void testUnMarshallMessage() throws Exception {
    resultEndpoint.expectedMessageCount(1);
    template.sendBody(record);
    resultEndpoint.assertIsSatisfied();
    Exchange exchange=resultEndpoint.assertExchangeReceived(0);
    assertEquals(2,exchange.getIn().getBody(List.class).size());
  }
public static class ContextConfig extends RouteBuilder {
    BindyCsvDataFormat camelDataFormat=new BindyCsvDataFormat(org.apache.camel.dataformat.bindy.model.simple.oneclassandremovewhitespace.Order.class);
    public void configure(){
      from("direct:start").unmarshal(camelDataFormat).to("mock:result");
    }
  }
}
