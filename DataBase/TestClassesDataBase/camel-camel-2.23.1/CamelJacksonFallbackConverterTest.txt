@RunWith(PaxExam.class) public class CamelJacksonFallbackConverterTest extends AbstractFeatureTest {
  @Test public void test() throws Exception {
    URL url=ObjectHelper.loadResourceAsURL("org/apache/camel/itest/CamelJacksonFallbackConverterTest.xml",CamelJacksonFallbackConverterTest.class.getClassLoader());
    installBlueprintAsBundle("CamelJacksonFallbackConverterTest",url,true);
    CamelContext camel=getOsgiService(bundleContext,CamelContext.class);
    camel.getProperties().put(JacksonConstants.ENABLE_TYPE_CONVERTER,"true");
    camel.getProperties().put(JacksonConstants.TYPE_CONVERTER_TO_POJO,"true");
    final Pojo pojo=new Pojo(1337,"Constantine");
    final DefaultExchange exchange=new DefaultExchange(camel);
    final String string=camel.getTypeConverter().mandatoryConvertTo(String.class,exchange,pojo);
    LOG.info("POJO -> String: {}",string);
    final Pojo copy=camel.getTypeConverter().mandatoryConvertTo(Pojo.class,exchange,string);
    LOG.info("String -> POJO: {}",copy);
    Assert.assertEquals(pojo,copy);
  }
  @Configuration public Option[] configure(){
    return CamelKarafTestSupport.configure("camel-test-karaf","camel-jackson");
  }
}
