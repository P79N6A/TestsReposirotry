public class JsonPathBeanStreamCachingTest extends CamelTestSupport {
  @Test public void testFullName() throws Exception {
    String json="{\"person\" : {\"firstname\" : \"foo\", \"middlename\" : \"foo2\", \"lastname\" : \"bar\"}}";
    getMockEndpoint("mock:result").expectedBodiesReceived("foo foo2 bar");
    template.sendBody("direct:start",new ByteArrayInputStream(json.getBytes()));
    assertMockEndpointsSatisfied();
  }
  @Override protected RouteBuilder createRouteBuilder(){
    return new RouteBuilder(){
      @Override public void configure(){
        from("direct:start").streamCaching().bean(FullNameBean.class).to("mock:result");
      }
    }
;
  }
protected static class FullNameBean {
    public static String getName(    @JsonPath("person.firstname") String first,    @JsonPath(value="person.middlename",options=Option.SUPPRESS_EXCEPTIONS) String middle,    @JsonPath("person.lastname") String last){
      if (middle != null) {
        return first + " " + middle+ " "+ last;
      }
      return first + " " + last;
    }
  }
}
