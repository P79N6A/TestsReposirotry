/** 
 * Spring bases data format unit test.
 */
public class StringDataFormatTest extends SpringTestSupport {
  protected AbstractXmlApplicationContext createApplicationContext(){
    return new ClassPathXmlApplicationContext("org/apache/camel/spring/issues/stringDataFormatTest.xml");
  }
  @Test public void testMarshalString() throws Exception {
    String body="Hello Thai Elephant \u0E08";
    MockEndpoint mock=getMockEndpoint("mock:marshal");
    mock.expectedMessageCount(1);
    byte[] out=(byte[])template.requestBody("direct:marshal",body);
    assertMockEndpointsSatisfied();
    String result=new String(out,"UTF-8");
    assertEquals(body,result);
  }
  @Test public void testUnMarshalString() throws Exception {
    byte[] body="Hello Thai Elephant \u0E08".getBytes();
    MockEndpoint mock=getMockEndpoint("mock:unmarshal");
    mock.expectedMessageCount(1);
    String out=(String)template.requestBody("direct:unmarshal",body);
    assertMockEndpointsSatisfied();
    assertEquals(new String(body,"UTF-8"),out);
  }
}
