@RunWith(Arquillian.class) public class NamedCamelBeanTest {
  @Deployment public static Archive<?> deployment(){
    return ShrinkWrap.create(JavaArchive.class).addPackage(CdiCamelExtension.class.getPackage()).addClass(NamedCamelBean.class).addAsManifestResource(EmptyAsset.INSTANCE,"beans.xml");
  }
  @Test public void sendMessageToInbound(  @Uri("direct:inbound") ProducerTemplate in,  @Uri("mock:outbound") MockEndpoint out) throws InterruptedException {
    out.expectedMessageCount(1);
    out.expectedBodiesReceived("test-processed");
    in.sendBody("test");
    assertIsSatisfied(2L,TimeUnit.SECONDS,out);
  }
private static class TestRoute extends RouteBuilder {
    @Override public void configure(){
      from("direct:inbound").bean("beanName").to("mock:outbound");
    }
  }
}
