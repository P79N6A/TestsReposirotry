public class XQueryEndpointConfigurationTest extends CamelSpringTestSupport {
  @Test public void testConfiguration() throws Exception {
    Configuration configuration=context.getRegistry().lookupByNameAndType("saxon-configuration",Configuration.class);
    Map<String,Object> properties=context.getRegistry().lookupByNameAndType("saxon-properties",Map.class);
    XQueryComponent component=context.getComponent("xquery",XQueryComponent.class);
    XQueryEndpoint endpoint=null;
    assertNotNull(configuration);
    assertNotNull(properties);
    for (    Endpoint ep : context.getEndpoints()) {
      if (ep instanceof XQueryEndpoint) {
        endpoint=(XQueryEndpoint)ep;
        break;
      }
    }
    assertNotNull(component);
    assertNotNull(endpoint);
    assertNull(component.getConfiguration());
    assertTrue(component.getConfigurationProperties().isEmpty());
    assertNotNull(endpoint.getConfiguration());
    assertNotNull(endpoint.getConfigurationProperties());
    assertEquals(configuration,endpoint.getConfiguration());
    assertEquals(properties,endpoint.getConfigurationProperties());
  }
  @Override protected ClassPathXmlApplicationContext createApplicationContext(){
    return new ClassPathXmlApplicationContext("org/apache/camel/component/xquery/XQueryEndpointConfigurationTest.xml");
  }
}
