/** 
 */
public class XsltReferenceParameterTest extends TestSupport {
  private static final String TEST_URI_1="xslt:org/apache/camel/component/xslt/transform.xsl?converter=#testConverter&transformerFactory=#testTransformerFactory";
  private TestConverter testConverter;
  private TransformerFactory testTransformerFactory;
  private XsltBuilder builder1;
  @Before public void setUp() throws Exception {
    JndiRegistry registry=new JndiRegistry(new JndiContext());
    RouteBuilder builder=createRouteBuilder();
    CamelContext context=new DefaultCamelContext(registry);
    testConverter=new TestConverter();
    testTransformerFactory=TransformerFactory.newInstance();
    registry.bind("testConverter",testConverter);
    registry.bind("testTransformerFactory",testTransformerFactory);
    ProcessorEndpoint pep1=context.getEndpoint(TEST_URI_1,ProcessorEndpoint.class);
    context.addRoutes(builder);
    context.start();
    builder1=(XsltBuilder)pep1.getProcessor();
  }
  @Test public void testConverterReference(){
    assertSame(testConverter,builder1.getConverter());
  }
  @Test public void testTransformerFactoryReference(){
    assertSame(testTransformerFactory,builder1.getConverter().getTransformerFactory());
  }
  protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      public void configure() throws Exception {
        from("direct:a").to(TEST_URI_1);
      }
    }
;
  }
private static class TestConverter extends XmlConverter {
  }
}
