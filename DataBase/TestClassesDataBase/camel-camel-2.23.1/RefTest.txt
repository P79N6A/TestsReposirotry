public class RefTest extends LanguageTestSupport {
  @Override protected JndiRegistry createRegistry() throws Exception {
    JndiRegistry jndi=super.createRegistry();
    jndi.bind("myExp",new MyExpression());
    return jndi;
  }
  @Test public void testRefExpressions() throws Exception {
    assertExpression("myExp","Hello World");
  }
  @Test public void testRefExpressionsNotFound() throws Exception {
    try {
      assertExpression("foo","Hello World");
      fail("Should have thrown exception");
    }
 catch (    IllegalArgumentException e) {
      assertEquals("Cannot find expression or predicate in registry with ref: foo",e.getMessage());
    }
  }
  @Test public void testPredicates() throws Exception {
    assertPredicate("myExp");
  }
  protected String getLanguageName(){
    return "ref";
  }
private static class MyExpression extends ExpressionAdapter {
    @Override public Object evaluate(    Exchange exchange){
      return "Hello World";
    }
  }
}
