/** 
 * This is our own order aggregation strategy where we can control how each splitted message should be combined. As we do not want to loos any message we copy from the new to the old to preserve the order lines as long we process them
 */
public static class MyOrderStrategy implements AggregationStrategy {
  public Exchange aggregate(  Exchange oldExchange,  Exchange newExchange){
    if (oldExchange == null) {
      return newExchange;
    }
    String orders=oldExchange.getIn().getBody(String.class);
    String newLine=newExchange.getIn().getBody(String.class);
    LOG.debug("Aggregate old orders: " + orders);
    LOG.debug("Aggregate new order: " + newLine);
    orders=orders + ";" + newLine;
    oldExchange.getIn().setBody(orders);
    return oldExchange;
  }
}
