/** 
 * @version 
 */
public class MethodCallBeanRefMethodNotFoundTest extends ContextTestSupport {
  @Override protected JndiRegistry createRegistry() throws Exception {
    JndiRegistry jndi=super.createRegistry();
    jndi.bind("foo",new MyFooBean());
    return jndi;
  }
  @Test public void testMethodCallBeanRefMethodNotFound() throws Exception {
    context.addRoutes(new RouteBuilder(){
      @Override public void configure() throws Exception {
        from("direct:a").routeId("a").split().method("foo","hello").to("mock:a");
        from("direct:b").routeId("b").split().method("foo","bye").to("mock:b");
      }
    }
);
    try {
      context.start();
      fail("Should have thrown exception");
    }
 catch (    FailedToCreateRouteException e) {
      assertEquals("b",e.getRouteId());
      MethodNotFoundException cause=assertIsInstanceOf(MethodNotFoundException.class,e.getCause().getCause());
      assertEquals("bye",cause.getMethodName());
    }
  }
  @Override public boolean isUseRouteBuilder(){
    return false;
  }
}
