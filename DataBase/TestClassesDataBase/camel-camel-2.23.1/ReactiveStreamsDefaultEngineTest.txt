/** 
 * Checking that the deadlock does not occur when the  {@code CamelReactiveStreamsService} is not injected anywhere.
 */
@RunWith(SpringRunner.class) @DirtiesContext @SpringBootApplication @SpringBootTest(classes={ReactiveStreamsDefaultEngineTest.class}) public class ReactiveStreamsDefaultEngineTest {
  @Autowired private CamelContext context;
  @Test public void testAutoConfiguration() throws Exception {
    new RouteBuilder(){
      @Override public void configure() throws Exception {
        from("reactive-streams:data").log("${body}");
      }
    }
.addRoutesToCamelContext(context);
    Assert.assertTrue(context.getStatus().isStarted());
    CamelReactiveStreamsService service=CamelReactiveStreams.get(context);
    Assert.assertTrue(service instanceof DefaultCamelReactiveStreamsService);
  }
@Configuration public static class TestConfiguration {
  }
}
