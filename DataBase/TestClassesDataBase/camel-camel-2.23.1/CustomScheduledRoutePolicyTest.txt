/** 
 * @version 
 */
public class CustomScheduledRoutePolicyTest extends ContextTestSupport {
  private final MyCustomRoutePolicy policy=new MyCustomRoutePolicy();
private static class MyCustomRoutePolicy extends RoutePolicySupport {
    private Route route;
    @Override public void onInit(    Route route){
      this.route=route;
    }
    public void startRoute() throws Exception {
      startRoute(route);
    }
  }
  @Test public void testCustomPolicy() throws Exception {
    MockEndpoint mock=getMockEndpoint("mock:result");
    mock.expectedBodiesReceived("Hello World");
    mock.setResultWaitTime(2000);
    template.sendBody("seda:foo","Hello World");
    mock.assertIsNotSatisfied();
    policy.startRoute();
    mock.assertIsSatisfied();
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      @Override public void configure() throws Exception {
        from("seda:foo").noAutoStartup().routePolicy(policy).to("mock:result");
      }
    }
;
  }
}
