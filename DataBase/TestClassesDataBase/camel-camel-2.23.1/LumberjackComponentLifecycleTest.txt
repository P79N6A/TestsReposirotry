public class LumberjackComponentLifecycleTest extends CamelTestSupport {
  private static int port;
  @BeforeClass public static void beforeClass(){
    port=AvailablePortFinder.getNextAvailable();
  }
  @Override protected RouteBuilder createRouteBuilder(){
    return new RouteBuilder(){
      public void configure(){
        from("lumberjack:0.0.0.0:" + port).to("mock:output");
      }
    }
;
  }
  @Test(timeout=30_000) public void shouldRestart() throws Exception {
    assertEquals(ServiceStatus.Started,context.getStatus());
    context.stop();
    context.start();
    assertEquals(ServiceStatus.Started,context.getStatus());
  }
}
