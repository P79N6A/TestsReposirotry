public class SpringJsonPathSuppressTest extends CamelSpringTestSupport {
  @Override protected AbstractApplicationContext createApplicationContext(){
    return new ClassPathXmlApplicationContext("org/apache/camel/jsonpath/SpringJsonPathSuppressTest.xml");
  }
  @Test public void testMiddle() throws Exception {
    String json="{\"person\" : {\"firstname\" : \"foo\", \"middlename\" : \"foo2\", \"lastname\" : \"bar\"}}";
    getMockEndpoint("mock:middle").expectedMessageCount(1);
    getMockEndpoint("mock:other").expectedMessageCount(0);
    template.sendBody("direct:start",json);
    assertMockEndpointsSatisfied();
  }
  @Test public void testNoMiddle() throws Exception {
    String json="{\"person\" : {\"firstname\" : \"foo\", \"lastname\" : \"bar\"}}";
    getMockEndpoint("mock:middle").expectedMessageCount(0);
    getMockEndpoint("mock:other").expectedMessageCount(1);
    template.sendBody("direct:start",json);
    assertMockEndpointsSatisfied();
  }
}
