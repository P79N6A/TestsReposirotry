public static class MyFailureProcessor implements Processor {
  public MyFailureProcessor(){
  }
  public void process(  Exchange exchange) throws Exception {
    if (counter++ < 3) {
      throw new IllegalArgumentException("Forced exception as counter is " + counter);
    }
    assertTrue("Should be transacted",exchange.isTransacted());
    exchange.getIn().setBody("Bye World");
  }
}
