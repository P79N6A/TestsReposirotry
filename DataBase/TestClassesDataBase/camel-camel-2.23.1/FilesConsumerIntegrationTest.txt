/** 
 * Test class for com.google.api.services.drive.Drive$Files APIs.
 */
public class FilesConsumerIntegrationTest extends AbstractGoogleDriveTestSupport {
  private static final Logger LOG=LoggerFactory.getLogger(FilesConsumerIntegrationTest.class);
  private static final String PATH_PREFIX=GoogleDriveApiCollection.getCollection().getApiName(DriveFilesApiMethod.class).getName();
  @Test public void testListConsumer() throws Exception {
    MockEndpoint mock=getMockEndpoint("mock:result");
    mock.expectedMessageCount(1);
    File testFile=uploadTestFile();
    String fileId=testFile.getId();
    assertMockEndpointsSatisfied();
    FileList fileList=mock.getReceivedExchanges().get(0).getIn().getBody(com.google.api.services.drive.model.FileList.class);
    assertTrue(fileInList(fileId,fileList));
  }
  private boolean fileInList(  String fileId,  FileList fileList){
    for (    File f : fileList.getItems()) {
      if (f.getId().equals(fileId)) {
        return true;
      }
    }
    return false;
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      public void configure(){
        from("google-drive://drive-files/list").to("mock:result");
      }
    }
;
  }
}
