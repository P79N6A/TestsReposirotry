@RunWith(Arquillian.class) public class CdiCamelConfigurationTest {
  private static boolean configMethodHasBeenCalled;
  @Inject private CamelContext camelContext;
  @Deployment static Archive<?> createTestArchive(){
    return ShrinkWrap.create(JavaArchive.class).addPackage(CdiCamelExtension.class.getPackage()).addClasses(CdiCamelConfigurationTest.class).addClass(EndpointInjectRoute.class).addAsManifestResource(EmptyAsset.INSTANCE,"beans.xml");
  }
  static void configuration(  @Observes CdiCamelConfiguration configuration){
    configMethodHasBeenCalled=true;
    configuration.autoConfigureRoutes(false);
  }
  @Test public void checkThatConfigMethodHasBeenCalled(){
    assertTrue("Config method has not been called",configMethodHasBeenCalled);
  }
  @Test public void checkThatNoRouteBuildersAddedToContext(){
    assertTrue("There are RouteBuilder instances in context",camelContext.getRoutes().isEmpty());
  }
}
