/** 
 * Test that verifies JMX can be disabled via Spring.
 * @version 
 */
public class DisableJmxAgentTest extends DefaultJMXAgentTest {
  @Override protected AbstractXmlApplicationContext createApplicationContext(){
    return new ClassPathXmlApplicationContext("org/apache/camel/spring/disableJmxConfig.xml");
  }
  @Override @Test public void testQueryMbeans() throws Exception {
    int before=mbsc.queryNames(new ObjectName("org.apache.camel" + ":type=consumers,*"),null).size();
    context.startRoute("foo");
    int after=mbsc.queryNames(new ObjectName("org.apache.camel" + ":type=consumers,*"),null).size();
    assertEquals("Should not have added consumer to JMX",before,after);
  }
}
