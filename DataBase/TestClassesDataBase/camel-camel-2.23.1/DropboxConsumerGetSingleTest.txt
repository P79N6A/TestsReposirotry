public class DropboxConsumerGetSingleTest extends DropboxTestSupport {
  public static final String FILE_NAME="myFile.txt";
  @Test public void testCamelDropbox() throws Exception {
    final String content="Hi camels";
    createFile(FILE_NAME,content);
    context.startRoute("consumer");
    MockEndpoint mock=getMockEndpoint("mock:result");
    mock.expectedMinimumMessageCount(1);
    mock.expectedBodiesReceived(content);
    mock.expectedHeaderReceived(DropboxResultHeader.DOWNLOADED_FILE.name(),String.format("%s/%s",workdir,FILE_NAME));
    mock.assertIsSatisfied();
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      public void configure(){
        from(String.format("dropbox://get?accessToken={{accessToken}}&remotePath=%s/%s",workdir,FILE_NAME)).autoStartup(false).id("consumer").to("mock:result");
      }
    }
;
  }
}
