/** 
 * @version 
 */
public class FtpProducerRootFileExistFailTest extends FtpServerTestSupport {
  private String getFtpUrl(){
    return "ftp://admin@localhost:" + getPort() + "?password=admin&fileExist=Fail";
  }
  @Override @Before public void setUp() throws Exception {
    super.setUp();
    template.sendBodyAndHeader(getFtpUrl(),"Hello World",Exchange.FILE_NAME,"hello.txt");
  }
  @Test public void testFail() throws Exception {
    try {
      template.sendBodyAndHeader(getFtpUrl(),"Bye World",Exchange.FILE_NAME,"hello.txt");
      fail("Should have thrown an exception");
    }
 catch (    CamelExecutionException e) {
      GenericFileOperationFailedException cause=assertIsInstanceOf(GenericFileOperationFailedException.class,e.getCause());
      assertEquals("File already exist: hello.txt. Cannot write new file.",cause.getMessage());
    }
    assertFileExists(FTP_ROOT_DIR + "/hello.txt");
  }
  @Override public boolean isUseRouteBuilder(){
    return false;
  }
}
