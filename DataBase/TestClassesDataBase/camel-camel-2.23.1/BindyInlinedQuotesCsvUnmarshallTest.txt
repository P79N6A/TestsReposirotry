@ContextConfiguration public class BindyInlinedQuotesCsvUnmarshallTest extends AbstractJUnit4SpringContextTests {
  private static final String URI_MOCK_RESULT="mock:result";
  private static final String URI_DIRECT_START="direct:start";
  @Produce(uri=URI_DIRECT_START) private ProducerTemplate template;
  @EndpointInject(uri=URI_MOCK_RESULT) private MockEndpoint result;
  private String expected;
  @Test @DirtiesContext public void testUnMarshallMessage() throws Exception {
    expected="10,A9,'Pauline','O'Donald',ISIN,XD12345678,BUY,Share,2500.45,USD,08-01-2009";
    template.sendBody(expected);
    result.expectedMessageCount(1);
    result.assertIsSatisfied();
    Order order=result.getReceivedExchanges().get(0).getIn().getBody(Order.class);
    Assert.assertEquals(10,order.getOrderNr());
    Assert.assertEquals("Pauline",order.getFirstName());
    Assert.assertEquals("O'Donald",order.getLastName());
  }
public static class ContextConfig extends RouteBuilder {
    BindyCsvDataFormat camelDataFormat=new BindyCsvDataFormat(org.apache.camel.dataformat.bindy.model.simple.oneclasssinglequote.Order.class);
    public void configure(){
      from(URI_DIRECT_START).unmarshal(camelDataFormat).to(URI_MOCK_RESULT);
    }
  }
}
