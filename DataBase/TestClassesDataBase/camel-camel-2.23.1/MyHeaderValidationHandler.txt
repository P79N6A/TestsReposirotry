private class MyHeaderValidationHandler extends HeaderValidationHandler {
  private String expectProtocolVersion;
  MyHeaderValidationHandler(  String expectedMethod,  String protocolVersion,  String responseContent,  Map<String,String> expectedHeaders){
    super(expectedMethod,null,null,responseContent,expectedHeaders);
    expectProtocolVersion=protocolVersion;
  }
  public void handle(  final HttpRequest request,  final HttpResponse response,  final HttpContext context) throws HttpException, IOException {
    if (!expectProtocolVersion.equals(request.getProtocolVersion().toString())) {
      response.setStatusCode(HttpStatus.SC_HTTP_VERSION_NOT_SUPPORTED);
      return;
    }
    super.handle(request,response,context);
  }
}
