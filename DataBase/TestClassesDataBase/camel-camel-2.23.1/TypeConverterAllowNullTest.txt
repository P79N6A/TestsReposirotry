/** 
 * @version 
 */
public class TypeConverterAllowNullTest extends Assert {
  @Test public void testMissThenAddTypeConverter(){
    DefaultCamelContext context=new DefaultCamelContext();
    context.getTypeConverterRegistry().addTypeConverter(MyOrder.class,String.class,new MyOrderTypeConverter());
    MyOrder order=context.getTypeConverter().convertTo(MyOrder.class,"0");
    assertNull(order);
    order=context.getTypeConverter().convertTo(MyOrder.class,"123");
    assertNotNull(order);
    assertEquals(123,order.getId());
  }
private static class MyOrder {
    private int id;
    public int getId(){
      return id;
    }
    public void setId(    int id){
      this.id=id;
    }
  }
private static class MyOrderTypeConverter extends TypeConverterSupport {
    @Override public boolean allowNull(){
      return true;
    }
    @SuppressWarnings("unchecked") public <T>T convertTo(    Class<T> type,    Exchange exchange,    Object value){
      if ("0".equals(value)) {
        return null;
      }
      MyOrder order=new MyOrder();
      order.setId(Integer.parseInt(value.toString()));
      return (T)order;
    }
  }
}
