/** 
 * A series of tests to check the IP lookup operation.
 */
public class DnsIpEndpointSpringTest extends CamelSpringTestSupport {
  @EndpointInject(uri="mock:result") protected MockEndpoint resultEndpoint;
  @Produce(uri="direct:start") protected ProducerTemplate template;
  @Test public void testNullIPRequests() throws Exception {
    resultEndpoint.expectedMessageCount(0);
    try {
      template.sendBodyAndHeader("hello","dns.domain",null);
      fail("Should have thrown exception");
    }
 catch (    Throwable t) {
      assertTrue(t.getCause() instanceof IllegalArgumentException);
    }
    resultEndpoint.assertIsSatisfied();
  }
  @Test public void testEmptyIPRequests() throws Exception {
    resultEndpoint.expectedMessageCount(0);
    try {
      template.sendBodyAndHeader("hello","dns.domain","");
      fail("Should have thrown exception");
    }
 catch (    Throwable t) {
      assertTrue(t.getCause() instanceof IllegalArgumentException);
    }
    resultEndpoint.assertIsSatisfied();
  }
  @Test @Ignore("Run manually, performs DNS lookup to remote apache.org server") public void testValidIPRequests() throws Exception {
    resultEndpoint.expectedMessageCount(1);
    resultEndpoint.expectedBodiesReceived("140.211.11.131");
    template.sendBodyAndHeader("hello","dns.domain","www.apache.org");
    resultEndpoint.assertIsSatisfied();
  }
  @Override protected AbstractApplicationContext createApplicationContext(){
    return new ClassPathXmlApplicationContext("IPCheck.xml");
  }
}
