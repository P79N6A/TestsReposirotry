/** 
 * @version 
 */
public class SpringFileLanguageCBRTest extends SpringTestSupport {
  @Override protected AbstractXmlApplicationContext createApplicationContext(){
    return new ClassPathXmlApplicationContext("org/apache/camel/spring/file/SpringFileLanguageCBRTest.xml");
  }
  @Override @Before public void setUp() throws Exception {
    deleteDirectory("target/cbr");
    super.setUp();
  }
  @Test public void testTxt() throws Exception {
    getMockEndpoint("mock:txt").expectedMessageCount(1);
    getMockEndpoint("mock:dat").expectedMessageCount(0);
    getMockEndpoint("mock:other").expectedMessageCount(0);
    template.sendBodyAndHeader("file://target/cbr","Hello World",Exchange.FILE_NAME,"hello.txt");
    assertMockEndpointsSatisfied();
  }
  @Test public void testDat() throws Exception {
    getMockEndpoint("mock:txt").expectedMessageCount(0);
    getMockEndpoint("mock:dat").expectedMessageCount(1);
    getMockEndpoint("mock:other").expectedMessageCount(0);
    template.sendBodyAndHeader("file://target/cbr","Bye World",Exchange.FILE_NAME,"bye.dat");
    assertMockEndpointsSatisfied();
  }
  @Test public void testOther() throws Exception {
    getMockEndpoint("mock:txt").expectedMessageCount(0);
    getMockEndpoint("mock:dat").expectedMessageCount(0);
    getMockEndpoint("mock:other").expectedMessageCount(1);
    template.sendBodyAndHeader("file://target/cbr","Hi World",Exchange.FILE_NAME,"hi.foo");
    assertMockEndpointsSatisfied();
  }
}
