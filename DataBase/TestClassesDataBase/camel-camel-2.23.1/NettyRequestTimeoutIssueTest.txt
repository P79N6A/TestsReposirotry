@Ignore("This test can be run manually") public class NettyRequestTimeoutIssueTest extends CamelTestSupport {
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      @Override public void configure() throws Exception {
        from("direct:out").to("netty4:tcp://localhost:8080?requestTimeout=5000");
        from("netty4:tcp://localhost:8080").to("log:nettyCase?showAll=true&multiline=true");
      }
    }
;
  }
  @Test public void test() throws Exception {
    String result=template.requestBody("direct:out","hello",String.class);
    Assert.assertEquals("hello",result);
    log.info("Sleeping for 20 seconds, and no Netty exception should occur");
    Thread.sleep(20000);
  }
}
