/** 
 * Jms with JDBC idempotent consumer test using XA.
 */
public class FromJmsToJdbcIdempotentConsumerToJmsXaTest extends FromJmsToJdbcIdempotentConsumerToJmsTest {
  @Override @Before public void setUp() throws Exception {
    deleteDirectory("target/testdb");
    super.setUp();
  }
  @Override @After public void tearDown() throws Exception {
    super.tearDown();
    try {
      DriverManager.getConnection("jdbc:derby:target/testdb;shutdown=true");
      fail("Should have thrown exception");
    }
 catch (    SQLException e) {
      assertEquals("Database 'target/testdb' shutdown.",e.getMessage());
    }
  }
  @Override protected String getDatasourceName(){
    return "myXADataSource";
  }
  @Override protected AbstractApplicationContext createApplicationContext(){
    ITestSupport.getPort1();
    return new ClassPathXmlApplicationContext("org/apache/camel/itest/sql/FromJmsToJdbcIdempotentConsumerToJmsXaTest.xml");
  }
}
