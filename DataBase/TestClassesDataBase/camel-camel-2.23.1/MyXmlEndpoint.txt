public static class MyXmlEndpoint extends DefaultEndpoint {
  @Override public Producer createProducer() throws Exception {
    return new DefaultAsyncProducer(this){
      @Override public boolean process(      Exchange exchange,      AsyncCallback callback){
        Object input=exchange.getIn().getBody();
        if (input instanceof XOrderResponse) {
          LOG.info("Endpoint: XOrderResponse -> XML");
          exchange.getIn().setBody("<XOrderResponse/>");
        }
 else {
          assertEquals("<XOrder/>",input);
          LOG.info("Endpoint: XML -> XOrder");
          exchange.getIn().setBody(new XOrder());
        }
        callback.done(true);
        return true;
      }
    }
;
  }
  @Override public Consumer createConsumer(  Processor processor) throws Exception {
    return null;
  }
  @Override public boolean isSingleton(){
    return false;
  }
  @Override protected String createEndpointUri(){
    return "myxml:endpoint";
  }
}
