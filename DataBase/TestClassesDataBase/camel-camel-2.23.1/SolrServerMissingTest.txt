public class SolrServerMissingTest extends SolrTestSupport {
  @Test public void indexSingleDocumentToNonexistentServer() throws Exception {
    Exchange exchange=createExchangeWithBody(null);
    exchange.getIn().setHeader(SolrConstants.OPERATION,SolrConstants.OPERATION_INSERT);
    exchange.getIn().setHeader("SolrField.id","MA147LL/A");
    template.send("direct:start",exchange);
    assertTrue(exchange.isFailed());
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      @Override public void configure() throws Exception {
        from("direct:start").to("solr://localhost:" + getPort() + "/missingSolr");
      }
    }
;
  }
}
