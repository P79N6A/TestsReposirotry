public class JacksonMarshalDateTimezoneTest extends CamelTestSupport {
  @Test public void testMarshalDate() throws Exception {
    TimeZone.setDefault(TimeZone.getTimeZone("UTC"));
    GregorianCalendar in=new GregorianCalendar(2017,Calendar.APRIL,25,17,0,10);
    MockEndpoint mock=getMockEndpoint("mock:result");
    Object marshalled=template.requestBody("direct:in",in.getTime());
    String marshalledAsString=context.getTypeConverter().convertTo(String.class,marshalled);
    assertEquals("1493139610000",marshalledAsString);
    mock.expectedMessageCount(1);
    mock.assertIsSatisfied();
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      @Override public void configure() throws Exception {
        JacksonDataFormat format=new JacksonDataFormat();
        TimeZone timeZone=TimeZone.getTimeZone("Africa/Ouagadougou");
        format.setTimezone(timeZone);
        from("direct:in").marshal(format).to("mock:result");
      }
    }
;
  }
}
