/** 
 * Utility test to verify netty type converter.
 */
public class NettyConverterTest extends CamelTestSupport {
  /** 
 * Test payload to send.
 */
  private static final String PAYLOAD="Test Message";
  private ByteBuf buf;
  @Before public void startUp(){
    byte[] bytes=PAYLOAD.getBytes();
    buf=PooledByteBufAllocator.DEFAULT.buffer(bytes.length);
    buf.writeBytes(bytes);
  }
  @After public void tearDown(){
    buf.release();
  }
  @Test public void testConversionWithExchange(){
    String result=context.getTypeConverter().convertTo(String.class,new DefaultExchange(context),buf);
    assertNotNull(result);
    assertEquals(PAYLOAD,result);
  }
  @Test public void testConversionWithoutExchange(){
    String result=context.getTypeConverter().convertTo(String.class,buf);
    assertNotNull(result);
    assertEquals(PAYLOAD,result);
  }
}
