@RunWith(CamelCdiRunner.class) public class CdiPropertiesTest {
  static void advice(  @Observes CamelContextStartingEvent event,  ModelCamelContext context) throws Exception {
    context.getRouteDefinitions().get(0).adviceWith(context,new AdviceWithRouteBuilder(){
      @Override public void configure(){
        weaveAddLast().to("mock:outbound");
      }
    }
);
  }
  @Test public void testRouteMessage(  @Uri("mock:outbound") MockEndpoint outbound){
    assertThat("Exchange count is incorrect!",outbound.getExchanges(),hasSize(1));
    assertThat("Exchange body is incorrect!",outbound.getExchanges().get(0).getIn().getBody(String.class),is(equalTo("Hello")));
  }
  @Test public void testProperties(  @ConfigProperty(name="destination") String destination,  @ConfigProperty(name="message") String message){
    assertThat("Property 'destination' value is incorrect!",destination,is(equalTo("direct:hello")));
    assertThat("Property 'message' value is incorrect!",message,is(equalTo("Hello")));
  }
}
