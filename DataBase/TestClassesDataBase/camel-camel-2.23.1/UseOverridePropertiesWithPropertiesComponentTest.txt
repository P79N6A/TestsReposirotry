public class UseOverridePropertiesWithPropertiesComponentTest extends CamelTestSupport {
  @Override public boolean isUseAdviceWith(){
    return true;
  }
  @Before public void doSomethingBefore() throws Exception {
    AdviceWithRouteBuilder mocker=new AdviceWithRouteBuilder(){
      @Override public void configure() throws Exception {
        replaceFromWith("direct:sftp");
        interceptSendToEndpoint("file:*").skipSendToOriginalEndpoint().to("mock:file");
      }
    }
;
    context.getRouteDefinition("myRoute").adviceWith(context,mocker);
  }
  @Override protected Properties useOverridePropertiesWithPropertiesComponent(){
    Properties pc=new Properties();
    pc.put("ftp.username","scott");
    pc.put("ftp.password","tiger");
    return pc;
  }
  @Test public void testOverride() throws Exception {
    context.start();
    getMockEndpoint("mock:file").expectedMessageCount(1);
    template.sendBody("direct:sftp","Hello World");
    assertMockEndpointsSatisfied();
  }
  @Override protected RouteBuilder createRouteBuilder(){
    return new RouteBuilder(){
      public void configure(){
        from("ftp:somepath?username={{ftp.username}}&password={{ftp.password}}").routeId("myRoute").to("file:target/out");
      }
    }
;
  }
}
