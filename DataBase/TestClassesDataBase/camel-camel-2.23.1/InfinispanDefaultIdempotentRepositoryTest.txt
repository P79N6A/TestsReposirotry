public class InfinispanDefaultIdempotentRepositoryTest {
  @Test public void createsRepositoryUsingInternalCache() throws Exception {
    DefaultCacheManager basicCacheContainer=new DefaultCacheManager(new ConfigurationBuilder().build());
    InfinispanIdempotentRepository repository=InfinispanIdempotentRepository.infinispanIdempotentRepository(basicCacheContainer,"default");
    assertFalse(repository.contains("One"));
    assertFalse(repository.remove("One"));
    assertTrue(repository.add("One"));
    assertTrue(repository.contains("One"));
    assertTrue(repository.remove("One"));
    assertFalse(repository.contains("One"));
    assertFalse(repository.remove("One"));
    assertTrue(repository.add("One"));
    assertTrue(repository.add("Two"));
    assertTrue(repository.add("Three"));
    assertTrue(repository.add("Four"));
    assertTrue(repository.contains("One"));
    assertTrue(repository.contains("Two"));
    assertTrue(repository.contains("Three"));
    assertTrue(repository.contains("Four"));
    repository.clear();
    assertFalse(repository.contains("One"));
    assertFalse(repository.contains("Two"));
    assertFalse(repository.contains("Three"));
    assertFalse(repository.contains("Four"));
  }
}
