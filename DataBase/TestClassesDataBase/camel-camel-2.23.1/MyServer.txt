private static class MyServer {
  private int port;
  private ServerBootstrap bootstrap;
  private Channel channel;
  private EventLoopGroup bossGroup;
  private EventLoopGroup workerGroup;
  MyServer(  int port){
    this.port=port;
  }
  public void start() throws Exception {
    bossGroup=new NioEventLoopGroup(1);
    workerGroup=new NioEventLoopGroup();
    bootstrap=new ServerBootstrap();
    bootstrap.group(bossGroup,workerGroup).channel(NioServerSocketChannel.class).childHandler(new ServerInitializer());
    ChannelFuture cf=bootstrap.bind(port).sync();
    channel=cf.channel();
  }
  public void shutdown(){
    channel.disconnect();
    bossGroup.shutdownGracefully();
    workerGroup.shutdownGracefully();
  }
}
