public class MqttSpanDecoratorTest {
  @Test public void testGetOperationName(){
    Endpoint endpoint=Mockito.mock(Endpoint.class);
    Mockito.when(endpoint.getEndpointUri()).thenReturn("mqtt://hello?publishTopicName=world");
    MqttSpanDecorator decorator=new MqttSpanDecorator();
    assertEquals("hello",decorator.getOperationName(null,endpoint));
  }
  @Test public void testGetDestinationPublish(){
    Endpoint endpoint=Mockito.mock(Endpoint.class);
    Mockito.when(endpoint.getEndpointUri()).thenReturn("mqtt://hello?publishTopicName=world");
    MqttSpanDecorator decorator=new MqttSpanDecorator();
    assertEquals("world",decorator.getDestination(null,endpoint));
  }
  @Test public void testGetDestinationSubscribe(){
    Endpoint endpoint=Mockito.mock(Endpoint.class);
    Mockito.when(endpoint.getEndpointUri()).thenReturn("mqtt://hello?subscribeTopicNames=world");
    MqttSpanDecorator decorator=new MqttSpanDecorator();
    assertEquals("world",decorator.getDestination(null,endpoint));
  }
}
