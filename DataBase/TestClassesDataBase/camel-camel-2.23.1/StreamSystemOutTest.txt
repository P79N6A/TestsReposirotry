/** 
 * Unit test for System.out
 */
public class StreamSystemOutTest extends CamelTestSupport {
  String message="Hello World";
  PrintStream stdOut=System.out;
  ByteArrayOutputStream mockOut=new ByteArrayOutputStream();
  @Test public void testStringContent() throws Exception {
    try {
      System.setOut(new PrintStream(mockOut));
      template.sendBody("direct:in",message);
      assertEquals(message + LS,new String(mockOut.toByteArray()));
    }
  finally {
      System.setOut(stdOut);
    }
  }
  @Test public void testBinaryContent(){
    try {
      System.setOut(new PrintStream(mockOut));
      template.sendBody("direct:in",message.getBytes());
      assertEquals(message,new String(mockOut.toByteArray()));
    }
  finally {
      System.setOut(stdOut);
    }
  }
  @Test public void shouldSkipNullBody(){
    try {
      System.setOut(new PrintStream(mockOut));
      template.sendBody("direct:in",null);
      assertEquals(0,mockOut.toByteArray().length);
    }
  finally {
      System.setOut(stdOut);
    }
  }
  protected RouteBuilder createRouteBuilder(){
    return new RouteBuilder(){
      public void configure(){
        from("direct:in").to("stream:out");
      }
    }
;
  }
}
