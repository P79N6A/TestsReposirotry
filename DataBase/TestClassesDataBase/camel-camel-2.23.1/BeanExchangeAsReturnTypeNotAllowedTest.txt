/** 
 * Unit test to demonstrate that bean invocation must no return Exchange.
 */
public class BeanExchangeAsReturnTypeNotAllowedTest extends ContextTestSupport {
  @Test public void testExchangeAsReturnTypeNotAllowed() throws Exception {
    MockEndpoint result=getMockEndpoint("mock:result");
    result.expectedMessageCount(0);
    try {
      template.sendBody("direct:in","Hello World");
      fail("Should have thrown IllegalStateException");
    }
 catch (    RuntimeCamelException e) {
      assertTrue(e.getCause() instanceof IllegalStateException);
    }
    result.assertIsSatisfied();
  }
  protected Context createJndiContext() throws Exception {
    JndiContext answer=new JndiContext();
    answer.bind("myBean",new MyBean());
    return answer;
  }
  protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      public void configure() throws Exception {
        from("direct:in").to("bean:myBean").to("mock:result");
      }
    }
;
  }
public static class MyBean {
    public Exchange doSomething(    Exchange exchange){
      return exchange;
    }
  }
}
