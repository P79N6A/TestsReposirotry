/** 
 * @version 
 */
public class JmsSendToAlotOfDestinationWithSameEndpointTest extends CamelSpringTestSupport {
  private static final Logger LOG=LoggerFactory.getLogger(JmsSendToAlotOfDestinationWithSameEndpointTest.class);
  private static final String URI="activemq:queue:foo?autoStartup=false";
  @Test public void testSendToAlotOfMessageToQueues() throws Exception {
    int size=100;
    LOG.info("About to send " + size + " messages");
    for (int i=0; i < size; i++) {
      if (i > 0 && i % 50 == 0) {
        LOG.info("Send " + i + " messages so far");
      }
      template.sendBodyAndHeader(URI,ExchangePattern.InOnly,"Hello " + i,JmsConstants.JMS_DESTINATION_NAME,"foo" + i);
    }
    LOG.info("Send complete use jconsole to view");
  }
  protected AbstractXmlApplicationContext createApplicationContext(){
    return new ClassPathXmlApplicationContext(new String[]{"classpath:org/apache/camel/component/jms/issues/broker.xml","classpath:org/apache/camel/component/jms/issues/camelBrokerClient.xml"});
  }
}
