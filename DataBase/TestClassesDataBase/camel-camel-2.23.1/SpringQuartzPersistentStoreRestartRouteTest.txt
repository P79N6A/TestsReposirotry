/** 
 * @version 
 */
public class SpringQuartzPersistentStoreRestartRouteTest extends CamelSpringTestSupport {
  @Override protected AbstractXmlApplicationContext createApplicationContext(){
    return new ClassPathXmlApplicationContext("org/apache/camel/component/quartz/SpringQuartzPersistentStoreTest.xml");
  }
  @Test public void testQuartzPersistentStore() throws Exception {
    if (isPlatform("aix")) {
      return;
    }
    MockEndpoint mock=getMockEndpoint("mock:result");
    mock.expectedMinimumMessageCount(2);
    assertMockEndpointsSatisfied();
    context().stopRoute("myRoute");
    mock.reset();
    mock.expectedMessageCount(0);
    Thread.sleep(2000);
    assertMockEndpointsSatisfied();
    mock.reset();
    mock.expectedMinimumMessageCount(2);
    context().startRoute("myRoute");
    assertMockEndpointsSatisfied();
  }
}
