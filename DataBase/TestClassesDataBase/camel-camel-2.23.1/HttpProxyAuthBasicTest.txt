/** 
 */
public class HttpProxyAuthBasicTest extends CamelTestSupport {
  @Test public void testProxyAuthBasic() throws Exception {
    HttpClientConfigurer configurer=getMandatoryEndpoint("http://www.google.com/search",HttpEndpoint.class).getHttpClientConfigurer();
    assertNotNull(configurer);
    CompositeHttpConfigurer comp=assertIsInstanceOf(CompositeHttpConfigurer.class,configurer);
    assertEquals(1,comp.getConfigurers().size());
    BasicAuthenticationHttpClientConfigurer basic=assertIsInstanceOf(BasicAuthenticationHttpClientConfigurer.class,comp.getConfigurers().get(0));
    assertTrue(basic.isProxy());
    assertEquals("myUser",basic.getUsername());
    assertEquals("myPassword",basic.getPassword());
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      public void configure(){
        HttpConfiguration config=new HttpConfiguration();
        config.setProxyHost("myProxyHosy");
        config.setProxyPort(1234);
        config.setProxyAuthMethod("Basic");
        config.setProxyAuthUsername("myUser");
        config.setProxyAuthPassword("myPassword");
        HttpComponent http=context.getComponent("http",HttpComponent.class);
        http.setHttpConfiguration(config);
        from("direct:start").to("http://www.google.com/search");
      }
    }
;
  }
}
