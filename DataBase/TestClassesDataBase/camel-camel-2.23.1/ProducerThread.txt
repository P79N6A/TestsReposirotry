private final class ProducerThread extends Thread {
  private final int totalMessageCount;
  private int producedMessageCount;
  ProducerThread(  final int totalMessageCount){
    super("TestDataProducerThread");
    this.totalMessageCount=totalMessageCount;
  }
  public void run(){
    final Endpoint endpoint=context().getEndpoint(endpointUri);
    while (producedMessageCount++ < totalMessageCount) {
      producerTemplate.sendBody(endpoint,ExchangePattern.InOnly,System.nanoTime());
    }
  }
}
