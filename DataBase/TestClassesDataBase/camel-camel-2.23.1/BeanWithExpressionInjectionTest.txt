/** 
 * @version 
 */
public class BeanWithExpressionInjectionTest extends ContextTestSupport {
  private static final Logger LOG=LoggerFactory.getLogger(BeanRouteTest.class);
  protected MyBean myBean=new MyBean();
  @Test public void testSendMessage() throws Exception {
    String expectedBody="Wobble";
    template.sendBodyAndHeader("direct:in",expectedBody,"foo","bar");
    assertEquals("bean body: " + myBean,expectedBody,myBean.body);
    assertEquals("bean foo: " + myBean,"bar",myBean.foo);
  }
  @Override protected Context createJndiContext() throws Exception {
    JndiContext answer=new JndiContext();
    answer.bind("myBean",myBean);
    return answer;
  }
  protected RouteBuilder createRouteBuilder(){
    return new RouteBuilder(){
      public void configure(){
        from("direct:in").bean("myBean");
      }
    }
;
  }
public static class MyBean {
    public String body;
    public String foo;
    @Override public String toString(){
      return "MyBean[foo: " + foo + " body: "+ body+ "]";
    }
    public void read(    String body,    @Simple("${header.foo}") String foo){
      this.foo=foo;
      this.body=body;
      LOG.info("read() method called on " + this);
    }
  }
}
