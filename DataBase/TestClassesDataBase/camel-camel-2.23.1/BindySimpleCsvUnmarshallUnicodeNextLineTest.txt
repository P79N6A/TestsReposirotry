@ContextConfiguration public class BindySimpleCsvUnmarshallUnicodeNextLineTest extends AbstractJUnit4SpringContextTests {
  private static final String URI_MOCK_RESULT="mock:result";
  private static final String URI_DIRECT_START="direct:start";
  @Produce(uri=URI_DIRECT_START) protected ProducerTemplate template;
  @EndpointInject(uri=URI_MOCK_RESULT) private MockEndpoint result;
  private String record;
  @Test @DirtiesContext public void testUnicodeNextLineCharacterParsing() throws Exception {
    record="123\u0085 Anywhere Lane,United States";
    template.sendBody(record);
    result.expectedMessageCount(1);
    result.assertIsSatisfied();
    LocationRecord data=result.getExchanges().get(0).getIn().getBody(LocationRecord.class);
    assertNotNull(data);
    assertEquals("Parsing error with unicode next line","123\u0085 Anywhere Lane",data.getAddress());
    assertEquals("Parsing error with unicode next line","United States",data.getNation());
  }
public static class ContextConfig extends RouteBuilder {
    BindyCsvDataFormat locationRecordBindyDataFormat=new BindyCsvDataFormat(LocationRecord.class);
    public void configure(){
      from(URI_DIRECT_START).unmarshal(locationRecordBindyDataFormat).to(URI_MOCK_RESULT);
    }
  }
}
