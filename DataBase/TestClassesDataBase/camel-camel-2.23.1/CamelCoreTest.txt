@RunWith(PaxExam.class) public class CamelCoreTest extends AbstractFeatureTest {
  @Test public void testCamelCore() throws Exception {
    URL url=ObjectHelper.loadResourceAsURL("org/apache/camel/itest/CamelCoreTest.xml",CamelCoreTest.class.getClassLoader());
    installBlueprintAsBundle("CamelCoreTest",url,true);
    CamelContext camel=getOsgiService(bundleContext,CamelContext.class);
    MockEndpoint mock=camel.getEndpoint("mock:result",MockEndpoint.class);
    mock.expectedBodiesReceived("Hello World");
    camel.createProducerTemplate().sendBody("direct:start","World");
    mock.assertIsSatisfied();
  }
  @Configuration public Option[] configure(){
    return CamelKarafTestSupport.configure("camel-test-karaf");
  }
}
