/** 
 * @version 
 */
public class LifecycleStrategyFailOnStartupTest extends TestSupport {
  private MyLifecycleStrategy dummy1=new MyLifecycleStrategy();
  protected CamelContext createCamelContext() throws Exception {
    CamelContext context=new DefaultCamelContext(new JndiContext());
    context.addLifecycleStrategy(dummy1);
    return context;
  }
  @Test public void testLifecycleStrategyFailOnStartup() throws Exception {
    CamelContext context=createCamelContext();
    try {
      context.start();
      fail("Should have thrown exception");
    }
 catch (    IllegalArgumentException e) {
      assertEquals("Forced",e.getMessage());
    }
  }
private static class MyLifecycleStrategy extends DummyLifecycleStrategy {
    @Override public void onContextStart(    CamelContext context) throws VetoCamelContextStartException {
      throw new IllegalArgumentException("Forced");
    }
  }
}
