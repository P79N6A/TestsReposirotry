public class JacksonObjectListSplitTest extends CamelTestSupport {
  @Test public void testJackson() throws InterruptedException {
    getMockEndpoint("mock:result").expectedMessageCount(2);
    getMockEndpoint("mock:result").expectedMessagesMatches(body().isInstanceOf(DummyObject.class));
    template.sendBody("direct:start","[{\"dummy\": \"value1\"}, {\"dummy\": \"value2\"}]");
    assertMockEndpointsSatisfied();
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      @Override public void configure() throws Exception {
        JacksonDataFormat format=new JacksonDataFormat(DummyObject.class);
        format.useList();
        from("direct:start").unmarshal(format).split(body()).to("mock:result");
      }
    }
;
  }
public static class DummyObject {
    private String dummy;
    public DummyObject(){
    }
    public String getDummy(){
      return dummy;
    }
    public void setDummy(    String dummy){
      this.dummy=dummy;
    }
  }
}
