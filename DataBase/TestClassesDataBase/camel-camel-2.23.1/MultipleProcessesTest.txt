/** 
 * @version 
 */
public class MultipleProcessesTest extends BamRouteTest {
  @Override @Test public void testBam() throws Exception {
    overdueEndpoint.expectedMinimumMessageCount(1);
    sendAMessages();
    sendBMessages();
    overdueEndpoint.assertIsSatisfied();
  }
  protected void sendAMessages(){
    TransactionTemplate transaction=getMandatoryBean(TransactionTemplate.class,"transactionTemplate");
    transaction.execute(new TransactionCallbackWithoutResult(){
      protected void doInTransactionWithoutResult(      TransactionStatus status){
        template.sendBody("seda:a","<hello id='123'>A</hello>");
        template.sendBody("seda:a","<hello id='124'>B</hello>");
        template.sendBody("seda:a","<hello id='125'>C</hello>");
      }
    }
);
  }
  protected void sendBMessages(){
    TransactionTemplate transaction=getMandatoryBean(TransactionTemplate.class,"transactionTemplate");
    transaction.execute(new TransactionCallbackWithoutResult(){
      protected void doInTransactionWithoutResult(      TransactionStatus status){
        template.sendBody("seda:b","<hello id='123'>A</hello>");
        template.sendBody("seda:b","<hello id='125'>C</hello>");
      }
    }
);
  }
}
