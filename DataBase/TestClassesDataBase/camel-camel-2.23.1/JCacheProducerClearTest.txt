public class JCacheProducerClearTest extends JCacheComponentTestSupport {
  @Test public void testClear() throws Exception {
    final Map<String,Object> headers=new HashMap<>();
    final Cache<Object,Object> cache=getCacheFromEndpoint("jcache://test-cache");
    cache.putAll(generateRandomMap(4));
    headers.clear();
    headers.put(JCacheConstants.ACTION,"CLEAR");
    sendBody("direct:clear",null,headers);
    assertFalse(cache.iterator().hasNext());
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      public void configure(){
        from("direct:clear").to("jcache://test-cache");
      }
    }
;
  }
}
