public class MyProduceAndSynchronizationBean {
  @Produce(uri="mock:result") Producer producer;
  public void produceSomething(  String body) throws Exception {
    assertEquals("Hello World",body);
    Exchange exchange=producer.getEndpoint().createExchange();
    exchange.addOnCompletion(mySynchronization);
    exchange.getIn().setBody(body);
    producer.process(exchange);
  }
  public void setProducer(  Producer producer){
    this.producer=producer;
  }
}
