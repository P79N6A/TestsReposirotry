public class ToObservableTest extends RxTestSupport {
  private static final Logger LOG=LoggerFactory.getLogger(ToObservableTest.class);
  @Test public void testConsume() throws Exception {
    final MockEndpoint mockEndpoint=camelContext.getEndpoint("mock:results",MockEndpoint.class);
    mockEndpoint.expectedMessageCount(4);
    Observable<Message> observable=reactiveCamel.toObservable("timer://foo?fixedRate=true&period=100");
    observable.take(4).subscribe(message -> {
      String body="Processing message headers " + message.getHeaders();
      LOG.info(body);
      producerTemplate.sendBody(mockEndpoint,body);
    }
);
    mockEndpoint.assertIsSatisfied();
  }
}
