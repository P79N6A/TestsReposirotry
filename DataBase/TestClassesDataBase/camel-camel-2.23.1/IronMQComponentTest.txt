@Ignore("Must be manually tested. Provide your own projectId and token!") public class IronMQComponentTest extends CamelTestSupport {
  private String projectId="myIronMQproject";
  private String token="myIronMQToken";
  @EndpointInject(uri="direct:start") private ProducerTemplate template;
  @EndpointInject(uri="mock:result") private MockEndpoint result;
  @Test public void testIronMQ() throws Exception {
    result.setExpectedMessageCount(1);
    result.expectedBodiesReceived("some payload");
    template.sendBody("some payload");
    assertMockEndpointsSatisfied();
    String id=result.getExchanges().get(0).getIn().getHeader("MESSAGE_ID",String.class);
    Assert.assertNotNull(id);
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    final String ironMQEndpoint="ironmq:testqueue?projectId=" + projectId + "&token="+ token;
    return new RouteBuilder(){
      public void configure(){
        from("direct:start").to(ironMQEndpoint);
        from(ironMQEndpoint + "&maxMessagesPerPoll=5").to("mock:result");
      }
    }
;
  }
}
