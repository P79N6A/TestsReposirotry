@RunWith(SpringRunner.class) @SpringBootTest public class MixedJavaDslAndXmlTest {
@Configuration @EnableAutoConfiguration @ImportResource("classpath:test-camel-context.xml") public static class JavaDslConfiguration {
    @Bean public RouteBuilder javaDsl(){
      return new RouteBuilder(){
        @Override public void configure() throws Exception {
          from("timer:project?period=1s").id("java").setBody().constant("Hello World from Java Route").log(">>> ${body}");
        }
      }
;
    }
  }
  @Autowired private CamelContext camel;
  @Test public void thereShouldBeTwoRoutesConfigured(){
    final List<Route> routes=camel.getRoutes();
    assertThat(routes).as("There should be two routes configured, one from Java DSL and one from XML").hasSize(3);
    final List<String> routeIds=routes.stream().map(Route::getId).collect(Collectors.toList());
    assertThat(routeIds).as("Should contain routes from Java DSL, XML and auto-loaded XML").containsOnly("java","xml","xmlAutoLoading");
    assertThat(routes).as("All routes should be started").are(new Condition<Route>(){
      @Override public boolean matches(      final Route route){
        return ((DefaultRoute)route).isStarted();
      }
    }
);
  }
}
