public class RestJettyBasicAuthTest extends CamelSpringTestSupport {
  @Override protected AbstractApplicationContext createApplicationContext(){
    return new ClassPathXmlApplicationContext("org/apache/camel/component/jetty/rest/RestJettyBasicAuthTest.xml");
  }
  @Test public void testJestDslBasicAuth() throws Exception {
    String out=template.requestBody("http://localhost:9444/ping?authMethod=Basic&authUsername=donald&authPassword=duck",null,String.class);
    assertEquals("\"pong\"",out);
    try {
      template.requestBody("http://localhost:9444/ping?authMethod=Basic&authUsername=mickey&authPassword=duck",null,String.class);
      fail("Should not login");
    }
 catch (    Exception e) {
      HttpOperationFailedException hofe=assertIsInstanceOf(HttpOperationFailedException.class,e.getCause());
      assertEquals(401,hofe.getStatusCode());
    }
  }
}
