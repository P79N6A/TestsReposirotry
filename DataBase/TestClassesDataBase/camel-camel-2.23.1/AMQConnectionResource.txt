public class AMQConnectionResource implements ConnectionResource {
  private PooledConnectionFactory pcf;
  public AMQConnectionResource(  String connectString,  int maxConnections){
    pcf=new PooledConnectionFactory(connectString);
    pcf.setMaxConnections(maxConnections);
    pcf.start();
  }
  public void stop(){
    pcf.stop();
  }
  @Override public Connection borrowConnection() throws Exception {
    Connection answer=pcf.createConnection();
    answer.start();
    return answer;
  }
  @Override public void returnConnection(  Connection connection) throws Exception {
    log.info("Connection returned");
  }
}
