@Ignore("Manual test") public class ManualFromQueueTest extends CamelTestSupport {
  private String url="tcp://localhost:61616";
  @Override protected CamelContext createCamelContext() throws Exception {
    CamelContext camel=super.createCamelContext();
    SjmsComponent sjms=new SjmsComponent();
    log.info("Using live connection to existing ActiveMQ broker running on {}",url);
    sjms.setConnectionFactory(new ActiveMQConnectionFactory(url));
    camel.addComponent("sjms",sjms);
    return camel;
  }
  @Test public void testConsume() throws Exception {
    getMockEndpoint("mock:foo").expectedMinimumMessageCount(3);
    assertMockEndpointsSatisfied(1,TimeUnit.MINUTES);
  }
  @Override protected RoutesBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      @Override public void configure() throws Exception {
        from("sjms:queue:foo?asyncStartListener=true").to("log:foo").to("mock:foo");
      }
    }
;
  }
}
