public class JacksonDataFormatTest {
  @Test public void testString() throws Exception {
    testJson("\"A string\"","A string");
  }
  @Test public void testMap() throws Exception {
    testJson("{\"value\":123}",Collections.singletonMap("value",123));
  }
  @Test public void testList() throws Exception {
    testJson("[{\"value\":123}]",new ArrayList<>(Collections.singletonList(Collections.singletonMap("value",123))));
  }
  private void testJson(  String json,  Object expected) throws Exception {
    Object unmarshalled;
    JacksonDataFormat gsonDataFormat=new JacksonDataFormat();
    gsonDataFormat.doStart();
    try (InputStream in=new ByteArrayInputStream(json.getBytes())){
      unmarshalled=gsonDataFormat.unmarshal(new DefaultExchange(new DefaultCamelContext()),in);
    }
     assertEquals(expected,unmarshalled);
  }
}
