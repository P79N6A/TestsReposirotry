public class CamelJaxbNoNamespaceSchemaTest extends CamelTestSupport {
  @Test public void testMarshalWithNoNamespaceSchemaLocation() throws Exception {
    PersonType person=new PersonType();
    person.setFirstName("foo");
    person.setLastName("bar");
    MockEndpoint resultEndpoint=resolveMandatoryEndpoint("mock:result",MockEndpoint.class);
    resultEndpoint.expectedMessageCount(1);
    template.sendBody("direct:marshal",person);
    resultEndpoint.assertIsSatisfied();
    String body=resultEndpoint.getReceivedExchanges().get(0).getIn().getBody(String.class);
    assertTrue("We should get the noNamespaceSchemaLocation here",body.contains("noNamespaceSchemaLocation=\"person-no-namespace.xsd\""));
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      public void configure() throws Exception {
        JaxbDataFormat dataFormat=new JaxbDataFormat("org.apache.camel.foo.bar");
        dataFormat.setNoNamespaceSchemaLocation("person-no-namespace.xsd");
        dataFormat.setIgnoreJAXBElement(false);
        from("direct:marshal").marshal(dataFormat).to("mock:result");
      }
    }
;
  }
}
