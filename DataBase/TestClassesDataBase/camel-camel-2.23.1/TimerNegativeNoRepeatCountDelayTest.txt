/** 
 * @version 
 */
public class TimerNegativeNoRepeatCountDelayTest extends ContextTestSupport {
  @Test public void testNegativeDelay() throws Exception {
    MockEndpoint mock=getMockEndpoint("mock:result");
    mock.expectedMinimumMessageCount(1);
    context.stopRoute("routeTest");
    List<Exchange> exchanges=mock.getExchanges();
    Iterator<Exchange> iter=exchanges.iterator();
    while (iter.hasNext()) {
      Exchange exchange=iter.next();
      assertEquals("negativeDelay",exchange.getProperty(Exchange.TIMER_NAME));
      assertNotNull(exchange.getProperty(Exchange.TIMER_FIRED_TIME));
      assertNotNull(exchange.getIn().getHeader("firedTime"));
    }
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      @Override public void configure() throws Exception {
        from("timer://negativeDelay?delay=-1&repeatCount=10").routeId("routeTest").to("mock:result");
      }
    }
;
  }
}
