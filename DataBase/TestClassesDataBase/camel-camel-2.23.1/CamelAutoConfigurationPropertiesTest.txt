@DirtiesContext @RunWith(SpringRunner.class) @EnableAutoConfiguration @SpringBootTest(properties="camel.springboot.jmxEnabled=false") public class CamelAutoConfigurationPropertiesTest extends Assert {
  @Value("${from}") String from;
  @Autowired CamelContext camelContext;
  @Autowired ProducerTemplate producerTemplate;
@Configuration static class Config {
    @Value("${from}") String from;
    @Bean RouteBuilder routeBuilder(){
      return new RouteBuilder(){
        @Override public void configure() throws Exception {
          from(from).to("{{to}}");
        }
      }
;
    }
  }
  @Test public void shouldResolveBothCamelAndSpringPlaceholders() throws InterruptedException {
    MockEndpoint mockEndpoint=camelContext.getEndpoint("mock:test",MockEndpoint.class);
    mockEndpoint.expectedMessageCount(1);
    producerTemplate.sendBody(from,"msg");
    mockEndpoint.assertIsSatisfied();
  }
}
