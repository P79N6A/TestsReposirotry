/** 
 * @version 
 */
public class JmsIntegrationTest extends CamelTestSupport {
  protected CountDownLatch receivedCountDown=new CountDownLatch(1);
  protected MyBean myBean=new MyBean();
  @Test public void testOneWayInJmsOutPojo() throws Exception {
    template.sendBodyAndHeader("jms:test","Hello","cheese",123);
    assertTrue("The message ware received by the Pojo",receivedCountDown.await(5,TimeUnit.SECONDS));
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      public void configure(){
        from("jms:test").to("bean:myBean");
      }
    }
;
  }
  @Override protected Context createJndiContext() throws Exception {
    JndiContext answer=new JndiContext();
    answer.bind("myBean",myBean);
    ConnectionFactory connectionFactory=CamelJmsTestHelper.createConnectionFactory();
    JmsComponent amq=jmsComponentAutoAcknowledge(connectionFactory);
    amq.setCamelContext(context);
    answer.bind("jms",amq);
    return answer;
  }
protected class MyBean {
    public void onMessage(    String body){
      log.info("Received: " + body);
      receivedCountDown.countDown();
    }
  }
}
