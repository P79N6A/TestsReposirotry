public class BatchDeleteAttributesCommandTest {
  private BatchDeleteAttributesCommand command;
  private AmazonSDBClientMock sdbClient;
  private SdbConfiguration configuration;
  private Exchange exchange;
  @Before public void setUp(){
    sdbClient=new AmazonSDBClientMock();
    configuration=new SdbConfiguration();
    configuration.setDomainName("DOMAIN1");
    exchange=new DefaultExchange(new DefaultCamelContext());
    command=new BatchDeleteAttributesCommand(sdbClient,configuration,exchange);
  }
  @Test public void execute(){
    List<Item> deletableItems=new ArrayList<>();
    deletableItems.add(new Item());
    exchange.getIn().setHeader(SdbConstants.DELETABLE_ITEMS,deletableItems);
    command.execute();
    assertEquals("DOMAIN1",sdbClient.batchDeleteAttributesRequest.getDomainName());
    assertEquals(deletableItems,sdbClient.batchDeleteAttributesRequest.getItems());
  }
  @Test public void determineDeletableItems(){
    assertNull(this.command.determineDeletableItems());
    List<Item> deletableItems=new ArrayList<>();
    deletableItems.add(new Item());
    exchange.getIn().setHeader(SdbConstants.DELETABLE_ITEMS,deletableItems);
    assertEquals(deletableItems,this.command.determineDeletableItems());
  }
}
