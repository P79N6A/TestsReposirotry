/** 
 * @version 
 */
public class StreamCachingOnlyRouteTest extends ContextTestSupport {
  @Test public void testStreamCachingPerRoute() throws Exception {
    MockEndpoint c=getMockEndpoint("mock:c");
    c.expectedMessageCount(1);
    new StreamSource(new StringReader("A"));
    template.sendBody("direct:c",new StreamSource(new StringReader("C")));
    assertMockEndpointsSatisfied();
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      @Override public void configure() throws Exception {
        getContext().getGlobalOptions().put("CamelCachedOutputStreamThreshold","4096");
        from("direct:c").streamCaching().to("mock:c");
      }
    }
;
  }
}
