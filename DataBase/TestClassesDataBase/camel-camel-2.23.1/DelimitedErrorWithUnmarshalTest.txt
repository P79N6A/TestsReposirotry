/** 
 * @version 
 */
@ContextConfiguration public class DelimitedErrorWithUnmarshalTest extends AbstractJUnit4SpringContextTests {
  @EndpointInject(uri="mock:results") protected MockEndpoint results;
  @EndpointInject(uri="mock:dataset") protected MockEndpoint dataset;
  @Test public void testCamel() throws Exception {
    results.expectedMessageCount(3);
    dataset.setExpectedMessageCount(1);
    results.assertIsSatisfied();
    dataset.assertIsSatisfied();
    DataSet ds=dataset.getExchanges().get(0).getIn().getBody(DataSet.class);
    assertNotNull(ds);
    assertEquals(2,ds.getErrorCount());
    assertEquals(3,ds.getRowCount());
  }
}
