public class ManagedNamePatternFixedIncludeHostNameTest extends CamelBlueprintTestSupport {
  @Override protected boolean useJmx(){
    return true;
  }
  @Override protected String getBlueprintDescriptor(){
    return "org/apache/camel/test/blueprint/management/managedNamePatternFixedIncludeHostNameTest.xml";
  }
  @Override protected String getBundleVersion(){
    return "1.2.3";
  }
  @Test public void testManagedNamePattern() throws Exception {
    getMockEndpoint("mock:result").expectedMessageCount(1);
    template.sendBody("direct:start","World");
    assertMockEndpointsSatisfied();
    MBeanServer mbeanServer=context.getManagementStrategy().getManagementAgent().getMBeanServer();
    assertEquals("cool-1.2.3",context.getManagementName());
    ObjectName on=ObjectName.getInstance("org.apache.camel:context=localhost/" + context.getManagementName() + ",type=context,name=\""+ context.getName()+ "\"");
    assertTrue("Should be registered",mbeanServer.isRegistered(on));
  }
}
