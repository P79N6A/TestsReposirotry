public class LoginServiceObservableTest extends CamelTestSupport {
  @Test public void testBeanObservable() throws Exception {
    ReactiveCamel reactiveCamel=new ReactiveCamel(context);
    Observable<String> login=reactiveCamel.toObservable("seda:login",String.class);
    Observable<String> user=reactiveCamel.toObservable("seda:user",String.class);
    Observable<String> result=Observable.combineLatest(login,user,(a,b) -> a + "=" + b);
    getMockEndpoint("mock:result").expectedBodiesReceived("OK=Donald Duck");
    template.sendBody("seda:login","OK");
    template.sendBody("seda:user","Donald Duck");
    reactiveCamel.sendTo(result,"mock:result");
    assertMockEndpointsSatisfied();
  }
}
