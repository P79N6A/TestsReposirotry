public class FileConsumerSpringSchedulerTest extends SpringTestSupport {
  @Override protected AbstractXmlApplicationContext createApplicationContext(){
    return new ClassPathXmlApplicationContext("org/apache/camel/spring/pollingconsumer/FileConsumerSpringSchedulerTest.xml");
  }
  @Override @Before public void setUp() throws Exception {
    deleteDirectory("target/file/spring");
    super.setUp();
  }
  @Test public void testSpringScheduler() throws Exception {
    getMockEndpoint("mock:result").expectedMessageCount(1);
    template.sendBodyAndHeader("file:target/file/spring","Hello World",Exchange.FILE_NAME,"hello.txt");
    context.startRoute("foo");
    assertMockEndpointsSatisfied();
  }
}
