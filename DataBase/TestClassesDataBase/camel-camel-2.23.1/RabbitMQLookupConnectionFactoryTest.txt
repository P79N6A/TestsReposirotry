public class RabbitMQLookupConnectionFactoryTest extends CamelTestSupport {
  private ConnectionFactory myConnectionFactory;
  protected JndiRegistry createRegistry() throws Exception {
    myConnectionFactory=new ConnectionFactory();
    myConnectionFactory.setHost("myhost");
    JndiRegistry registry=super.createRegistry();
    registry.bind("myConnectionFactory",myConnectionFactory);
    return registry;
  }
  @Test public void testLookupConnectionFactory() throws Exception {
    RabbitMQEndpoint endpoint=context.getEndpoint("rabbitmq:myexchange",RabbitMQEndpoint.class);
    assertNotNull(endpoint);
    assertSame(endpoint.getConnectionFactory(),myConnectionFactory);
  }
}
