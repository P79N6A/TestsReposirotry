@RunWith(PaxExam.class) public class CamelSaxonTest extends AbstractFeatureTest {
  @Test public void testCamelSaxon() throws Exception {
    URL url=ObjectHelper.loadResourceAsURL("org/apache/camel/itest/CamelSaxonTest.xml",CamelSaxonTest.class.getClassLoader());
    installBlueprintAsBundle("CamelSaxonTest",url,true);
    CamelContext camel=getOsgiService(bundleContext,CamelContext.class);
    MockEndpoint mock=camel.getEndpoint("mock:camel",MockEndpoint.class);
    mock.expectedBodiesReceived("<name>King</name>");
    mock.expectedHeaderReceived("type","Camel");
    camel.createProducerTemplate().sendBodyAndHeader("direct:in","<name>King</name>","type","Camel");
    mock.assertIsSatisfied();
  }
  @Configuration public Option[] configure(){
    return CamelKarafTestSupport.configure("camel-test-karaf","camel-saxon");
  }
}
