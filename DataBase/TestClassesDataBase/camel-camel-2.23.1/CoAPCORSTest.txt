/** 
 * https://issues.apache.org/jira/browse/CAMEL-10985 CORS configuration is ignored and REST endpoints function as per normal
 */
public class CoAPCORSTest extends CoAPTestSupport {
  private static final String COAP_RESPONSE="{ \"foo\": \"bar\" }";
  @Test public void testEnableCors() throws Exception {
    CoapClient client=createClient("/rest");
    CoapResponse response=client.get();
    assertEquals(COAP_RESPONSE,response.getResponseText());
  }
  @Override protected RoutesBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      @Override public void configure() throws Exception {
        restConfiguration().component("coap").port(PORT).enableCORS(true);
        rest().get("/rest").route().setBody(constant(COAP_RESPONSE));
      }
    }
;
  }
}
