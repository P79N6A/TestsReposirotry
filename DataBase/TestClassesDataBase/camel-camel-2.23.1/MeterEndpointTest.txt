@RunWith(MockitoJUnitRunner.class) public class MeterEndpointTest {
  private static final String METRICS_NAME="metrics.name";
  private static final Long VALUE=System.currentTimeMillis();
  @Mock private MetricRegistry registry;
  private MetricsEndpoint endpoint;
  private InOrder inOrder;
  @Before public void setUp() throws Exception {
    endpoint=new MetricsEndpoint(null,null,registry,MetricsType.METER,METRICS_NAME);
    inOrder=Mockito.inOrder(registry);
  }
  @After public void tearDown() throws Exception {
    inOrder.verifyNoMoreInteractions();
  }
  @Test public void testMeterEndpoint() throws Exception {
    assertThat(endpoint,is(notNullValue()));
    assertThat(endpoint.getRegistry(),is(registry));
    assertThat(endpoint.getMetricsName(),is(METRICS_NAME));
  }
  @Test public void testCreateProducer() throws Exception {
    Producer producer=endpoint.createProducer();
    assertThat(producer,is(notNullValue()));
    assertThat(producer,is(instanceOf(MeterProducer.class)));
  }
  @Test public void testGetMark() throws Exception {
    assertThat(endpoint.getMark(),is(nullValue()));
  }
  @Test public void testSetMark() throws Exception {
    assertThat(endpoint.getMark(),is(nullValue()));
    endpoint.setMark(VALUE);
    assertThat(endpoint.getMark(),is(VALUE));
  }
}
