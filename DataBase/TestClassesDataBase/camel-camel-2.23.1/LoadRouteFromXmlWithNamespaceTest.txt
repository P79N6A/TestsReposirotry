public class LoadRouteFromXmlWithNamespaceTest extends ContextTestSupport {
  @Test public void testLoadRouteWithNamespaceFromXml() throws Exception {
    InputStream inputStream=getClass().getResourceAsStream("routeWithNamespace.xml");
    RoutesDefinition routes=context.loadRoutesDefinition(inputStream);
    context.addRouteDefinitions(routes.getRoutes());
    context.start();
    Route routeWithNamespace=context.getRoute("routeWithNamespace");
    assertNotNull("Expected to find route with id: routeWithNamespace",routeWithNamespace);
    MockEndpoint bar=context.getEndpoint("mock:bar",MockEndpoint.class);
    bar.expectedBodiesReceived("Hello from foo");
    context.createProducerTemplate().sendBody("direct:foo","<?xml version='1.0'?><foo xmlns='http://foo'><bar>cheese</bar></foo>");
    bar.assertIsSatisfied();
  }
}
