public class ConfiguredApnsServiceFactoryTest {
  ApnsServiceBuilder apnsServiceBuilder=mock(ApnsServiceBuilder.class);
  ApnsServiceFactory apnsServiceFactory=new ApnsServiceFactory(){
    @Override protected ApnsServiceBuilder configureServiceBuilder(    ApnsServiceBuilder serviceBuilder){
      apnsServiceBuilder.withSocksProxy("my.proxy.com",6666);
      return apnsServiceBuilder;
    }
  }
;
  @Before public void setUp() throws IOException {
    apnsServiceFactory.setSslContextParameters(mock(SSLContextParameters.class));
  }
  @Test public void shouldSetProxyOnDefaultServiceBuilder(){
    apnsServiceFactory.getApnsService();
    verify(apnsServiceBuilder).withSocksProxy(anyString(),anyInt());
  }
}
