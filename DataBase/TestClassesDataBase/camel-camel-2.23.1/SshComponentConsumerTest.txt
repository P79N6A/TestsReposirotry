public class SshComponentConsumerTest extends SshComponentTestSupport {
  @Test public void testPollingConsumer() throws Exception {
    MockEndpoint mock=getMockEndpoint("mock:result");
    mock.expectedMinimumMessageCount(1);
    mock.expectedBodiesReceived("test");
    mock.expectedHeaderReceived(SshResult.EXIT_VALUE,0);
    mock.expectedHeaderReceived(SshResult.STDERR,"Error:test");
    assertMockEndpointsSatisfied();
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      @Override public void configure(){
        from("ssh://smx:smx@localhost:" + port + "?useFixedDelay=true&delay=40000&pollCommand=test%0A").to("mock:result");
      }
    }
;
  }
}
