public class ConsumerEndpointMappingByBeanNameRouteTest extends CamelSpringTestSupport {
  private final String xmlRequestForGoogleStockQuote="<GetQuote xmlns=\"http://www.stockquotes.edu/\"><symbol>GOOG</symbol></GetQuote>";
  private String expectedResponse;
  private WebServiceTemplate webServiceTemplate;
  @Before public void setUp() throws Exception {
    super.setUp();
    webServiceTemplate=applicationContext.getBean("webServiceTemplate",WebServiceTemplate.class);
    expectedResponse=context.getTypeConverter().convertTo(String.class,getClass().getResourceAsStream("/stockquote-response.xml"));
  }
  @Test public void testBeanName() throws Exception {
    StreamSource source=new StreamSource(new StringReader(xmlRequestForGoogleStockQuote));
    StringWriter sw=new StringWriter();
    StreamResult result=new StreamResult(sw);
    webServiceTemplate.sendSourceAndReceiveToResult(source,result);
    assertNotNull(result);
    TestUtil.assertEqualsIgnoreNewLinesSymbol(expectedResponse,sw.toString());
  }
  @Override protected AbstractXmlApplicationContext createApplicationContext(){
    return new ClassPathXmlApplicationContext("org/apache/camel/component/spring/ws/ConsumerEndpointMappingByBeanNameRouteTest-context.xml");
  }
}
