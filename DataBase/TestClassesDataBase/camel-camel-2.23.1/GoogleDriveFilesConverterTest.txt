public class GoogleDriveFilesConverterTest extends CamelTestSupport {
  @Override protected void doPreSetup() throws Exception {
    deleteDirectory("target/file-test");
  }
  @Test public void converterTest() throws Exception {
    MockEndpoint mock=getMockEndpoint("mock:result");
    mock.expectedMessageCount(1);
    template.sendBodyAndHeader("file://target/file-test/","Hello World",Exchange.FILE_NAME,"hello.txt");
    assertMockEndpointsSatisfied();
    Message result=mock.getExchanges().get(0).getIn();
    assertTrue("We should get google file instance here",result.getBody() instanceof com.google.api.services.drive.model.File);
  }
  protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      public void configure() throws Exception {
        from("file://target/file-test?initialDelay=2000").convertBodyTo(com.google.api.services.drive.model.File.class).to("mock:result");
      }
    }
;
  }
}
