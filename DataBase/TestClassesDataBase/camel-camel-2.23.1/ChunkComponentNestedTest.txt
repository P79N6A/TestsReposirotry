/** 
 * Unit test for  {@link ChunkComponent} and {@link ChunkEndpoint}
 */
public class ChunkComponentNestedTest extends CamelTestSupport {
  @EndpointInject(uri="mock:endSimple") protected MockEndpoint endSimpleMock;
  @Produce(uri="direct:startSimple") protected ProducerTemplate startSimpleProducerTemplate;
  /** 
 * Test using two following different theme from different folder without Resource URI header defined
 */
  @Test public void testChunkSubfolder() throws Exception {
    endSimpleMock.expectedMessageCount(1);
    endSimpleMock.expectedBodiesReceived("This the result of last call to chunk Earth to Andrew. Come in, Andrew.\n\n");
    startSimpleProducerTemplate.sendBodyAndHeader("The Body","name","Andrew");
    assertMockEndpointsSatisfied();
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      @Override public void configure(){
        from("direct:startSimple").setHeader("result",constant("ok")).to("chunk://hello").to("chunk://subfolder/theme1").to("mock:endSimple");
      }
    }
;
  }
}
