/** 
 */
public class CxfRsProducerClientFactoryBeanTest extends Assert {
  private CamelContext context;
  private AbstractApplicationContext applicationContext;
  @Before public void setUp() throws Exception {
    applicationContext=new ClassPathXmlApplicationContext("org/apache/camel/component/cxf/jaxrs/CxfRsProducerClientFactoryBeanTest.xml");
    context=SpringCamelContext.springCamelContext(applicationContext,false);
    context.start();
  }
  @Test public void testProducerInOutInterceptors() throws Exception {
    CxfRsEndpoint e=context.getEndpoint("cxfrs://bean://rsClientHttpInterceptors",CxfRsEndpoint.class);
    CxfRsProducer p=new CxfRsProducer(e);
    CxfRsProducer.ClientFactoryBeanCache cache=p.getClientFactoryBeanCache();
    JAXRSClientFactoryBean bean=cache.get("http://localhost:8080/CxfRsProducerClientFactoryBeanInterceptors/");
    List<Interceptor<?>> ins=bean.getInInterceptors();
    assertEquals(1,ins.size());
    assertTrue(ins.get(0) instanceof LoggingInInterceptor);
    List<Interceptor<?>> outs=bean.getOutInterceptors();
    assertEquals(1,outs.size());
    assertTrue(outs.get(0) instanceof LoggingOutInterceptor);
  }
  @After public void tearDown() throws Exception {
    if (context != null) {
      context.stop();
    }
    if (applicationContext != null) {
      applicationContext.close();
    }
  }
}
