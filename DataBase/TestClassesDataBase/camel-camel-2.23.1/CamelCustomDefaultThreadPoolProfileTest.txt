/** 
 * @version 
 */
public class CamelCustomDefaultThreadPoolProfileTest extends ContextTestSupport {
  @Override protected CamelContext createCamelContext() throws Exception {
    CamelContext camel=super.createCamelContext();
    ThreadPoolProfile profile=new ThreadPoolProfile("custom");
    profile.setPoolSize(5);
    profile.setMaxPoolSize(15);
    profile.setKeepAliveTime(25L);
    profile.setMaxQueueSize(250);
    profile.setAllowCoreThreadTimeOut(true);
    profile.setRejectedPolicy(ThreadPoolRejectedPolicy.Abort);
    camel.getExecutorServiceManager().setDefaultThreadPoolProfile(profile);
    return camel;
  }
  @Test public void testCamelCustomDefaultThreadPoolProfile() throws Exception {
    DefaultExecutorServiceManager manager=(DefaultExecutorServiceManager)context.getExecutorServiceManager();
    ThreadPoolProfile profile=manager.getDefaultThreadPoolProfile();
    assertEquals(5,profile.getPoolSize().intValue());
    assertEquals(15,profile.getMaxPoolSize().intValue());
    assertEquals(25,profile.getKeepAliveTime().longValue());
    assertEquals(250,profile.getMaxQueueSize().intValue());
    assertEquals(true,profile.getAllowCoreThreadTimeOut().booleanValue());
    assertEquals(ThreadPoolRejectedPolicy.Abort,profile.getRejectedPolicy());
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      @Override public void configure() throws Exception {
        from("direct:start").threads(25,45).to("mock:result");
      }
    }
;
  }
}
