/** 
 */
public class JaxbDataFormatIssueTest extends CamelTestSupport {
  @Test public void testJaxbMarshalling() throws InterruptedException {
    MockEndpoint mock=getMockEndpoint("mock:result");
    mock.expectedMessageCount(1);
    mock.message(0).body().endsWith("<foo><bar>Hello Bar</bar></foo>");
    Foo foo=new Foo();
    foo.setBar("Hello Bar");
    template.sendBody("direct:start",foo);
    assertMockEndpointsSatisfied();
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      @Override public void configure() throws Exception {
        JaxbDataFormat jaxb=new JaxbDataFormat(JAXBContext.newInstance(Foo.class));
        jaxb.setPrettyPrint(false);
        from("direct:start").marshal(jaxb).to("log:xml","mock:result");
      }
    }
;
  }
@XmlRootElement public static class Foo {
    private String bar;
    public String getBar(){
      return bar;
    }
    public void setBar(    String bar){
      this.bar=bar;
    }
  }
}
