public class SimpleWeaveAddMockLastTest extends CamelBlueprintTestSupport {
  @Override protected String getBlueprintDescriptor(){
    return "org/apache/camel/test/blueprint/SimpleWeaveAddMockLastTest.xml";
  }
  public boolean isUseAdviceWith(){
    return true;
  }
  @Test public void testWeaveAddMockLast() throws Exception {
    context.getRouteDefinitions().get(0).adviceWith(context,new AdviceWithRouteBuilder(){
      @Override public void configure() throws Exception {
        weaveAddLast().to("mock:result");
      }
    }
);
    context.start();
    getMockEndpoint("mock:result").expectedBodiesReceived("Bye Camel");
    template.sendBody("seda:start","Camel");
    assertMockEndpointsSatisfied();
  }
}
