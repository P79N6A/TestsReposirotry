@RunWith(CamelSpringBootRunner.class) @SpringBootTest(classes=MyCamelApplication.class,properties="input = target/work/fhir/testinput") @EnableRouteCoverage @MockEndpointsAndSkip("fhir*") public class MyCamelApplicationTest {
  @EndpointInject(uri="mock:fhir:create/resource") private MockEndpoint mock;
  @Before public void copyData() throws IOException {
    FileUtils.copyDirectory(new File("src/main/data"),new File("target/work/fhir/testinput"));
  }
  @Test public void shouldPushConvertedHl7toFhir() throws Exception {
    mock.expectedBodiesReceived("{\"resourceType\":\"Patient\",\"id\":\"100005056\",\"name\":[{\"family\":\"Freeman\",\"given\":[\"Vincent\"]}]}");
    mock.assertIsSatisfied();
  }
}
