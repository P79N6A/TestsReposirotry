private static class ServerInitializer extends ChannelInitializer<SocketChannel> {
  private static final StringDecoder DECODER=new StringDecoder();
  private static final StringEncoder ENCODER=new StringEncoder();
  private static final ServerHandler SERVERHANDLER=new ServerHandler();
  @Override public void initChannel(  SocketChannel ch) throws Exception {
    ChannelPipeline pipeline=ch.pipeline();
    pipeline.addLast("framer",new DelimiterBasedFrameDecoder(8192,Delimiters.lineDelimiter()));
    pipeline.addLast("decoder",DECODER);
    pipeline.addLast("encoder",ENCODER);
    pipeline.addLast("handler",SERVERHANDLER);
  }
}
