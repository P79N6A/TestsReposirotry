public class StringTemplateCustomDelimiterTest extends CamelTestSupport {
  private static final String DIRECT_BRACE="direct:brace";
  private static final String DIRECT_DOLLAR="direct:dollar";
  @Test public void testWithBraceDelimiter(){
    Exchange response=template.request(DIRECT_BRACE,new Processor(){
      @Override public void process(      Exchange exchange) throws Exception {
        exchange.getIn().setBody("Yay !");
      }
    }
);
    assertEquals("With brace delimiter Yay !",response.getOut().getBody().toString().trim());
  }
  @Test public void testWithDollarDelimiter(){
    Exchange response=template.request(DIRECT_DOLLAR,new Processor(){
      @Override public void process(      Exchange exchange) throws Exception {
        exchange.getIn().setBody("Yay !");
      }
    }
);
    assertEquals("With identical dollar delimiter Yay !",response.getOut().getBody().toString().trim());
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      @Override public void configure() throws Exception {
        from(DIRECT_BRACE).to("string-template:org/apache/camel/component/stringtemplate/custom-delimiter-brace.tm?delimiterStart={&delimiterStop=}");
        from(DIRECT_DOLLAR).to("string-template:org/apache/camel/component/stringtemplate/custom-delimiter-dollar.tm?delimiterStart=$&delimiterStop=$");
      }
    }
;
  }
}
