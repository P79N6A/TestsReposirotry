public class TwoServiceTest extends CamelOpenTracingTestSupport {
  private static SpanTestData[] testdata={new SpanTestData().setLabel("ServiceB server").setUri("direct://ServiceB").setOperation("ServiceB").setKind(Tags.SPAN_KIND_SERVER).setParentId(1),new SpanTestData().setLabel("ServiceB client").setUri("direct://ServiceB").setOperation("ServiceB").setKind(Tags.SPAN_KIND_CLIENT).setParentId(2),new SpanTestData().setLabel("ServiceA server").setUri("direct://ServiceA").setOperation("ServiceA").setKind(Tags.SPAN_KIND_SERVER).setParentId(3),new SpanTestData().setLabel("ServiceA client").setUri("direct://ServiceA").setOperation("ServiceA").setKind(Tags.SPAN_KIND_CLIENT)};
  public TwoServiceTest(){
    super(testdata);
  }
  @Test public void testRoute() throws Exception {
    template.requestBody("direct:ServiceA","Hello");
    verify();
  }
  @Override protected RoutesBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      @Override public void configure() throws Exception {
        from("direct:ServiceA").log("ServiceA has been called").delay(simple("${random(1000,2000)}")).to("direct:ServiceB");
        from("direct:ServiceB").log("ServiceB has been called").delay(simple("${random(0,500)}"));
      }
    }
;
  }
}
