@Ignore("Requires a local node or registration at Infura") public class Web3jConsumerMainnetTest extends Web3jIntegrationTestSupport {
  protected String getUrl(){
    return "https://mainnet.infura.io/YOUR_INFURA_ID?";
  }
  @Test public void consumerTest() throws Exception {
    mockResult.expectedMinimumMessageCount(261);
    mockError.expectedMessageCount(0);
    MockEndpoint.assertIsSatisfied(context);
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      public void configure(){
        errorHandler(deadLetterChannel("mock:error"));
        from("web3j://" + getUrl() + OPERATION.toLowerCase()+ "="+ REPLAY_BLOCKS_OBSERVABLE+ "&"+ "fromBlock=5713030&"+ "toBlock=5713031&"+ "fullTransactionObjects=false").choice().when(simple("${in.header.status} != 'done'")).to("log:foo?showAll=true&multiline=true&level=INFO").process(new Processor(){
          @Override public void process(          Exchange exchange) throws Exception {
            EthBlock.Block body=exchange.getIn().getBody(EthBlock.Block.class);
            List<EthBlock.TransactionResult> transactions=body.getTransactions();
            exchange.getIn().setBody(transactions);
          }
        }
).split(body()).to("mock:result").endChoice().otherwise().log("DONE");
      }
    }
;
  }
}
