/** 
 * Test XPath DSL with the ability to apply XPath on a header
 */
public class XQueryHeaderNameResultTypeAndNamespaceTest extends CamelTestSupport {
  @Test public void testXPathWithNamespace() throws Exception {
    MockEndpoint mock=getMockEndpoint("mock:55");
    mock.expectedBodiesReceived("body");
    mock.expectedHeaderReceived("cheeseDetails","<number xmlns=\"http://acme.com/cheese\">55</number>");
    template.sendBodyAndHeader("direct:in","body","cheeseDetails","<number xmlns=\"http://acme.com/cheese\">55</number>");
    mock.assertIsSatisfied();
  }
  protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      public void configure() throws Exception {
        Namespaces ns=new Namespaces("c","http://acme.com/cheese");
        from("direct:in").choice().when().xquery("/c:number = 55",Integer.class,ns,"cheeseDetails").to("mock:55").otherwise().to("mock:other").end();
      }
    }
;
  }
}
