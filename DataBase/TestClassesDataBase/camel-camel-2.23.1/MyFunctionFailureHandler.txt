public static class MyFunctionFailureHandler implements Processor {
  public void process(  Exchange exchange) throws Exception {
    Throwable caused=exchange.getProperty(Exchange.EXCEPTION_CAUGHT,Throwable.class);
    assertNotNull(caused);
    exchange.getContext().createProducerTemplate().send("mock:myerror",exchange);
  }
}
