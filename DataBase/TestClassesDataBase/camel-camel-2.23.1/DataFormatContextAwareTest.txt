/** 
 */
public class DataFormatContextAwareTest extends ContextTestSupport {
  private MyDataFormat my=new MyDataFormat();
  @Override protected JndiRegistry createRegistry() throws Exception {
    JndiRegistry jndi=super.createRegistry();
    jndi.bind("my",my);
    return jndi;
  }
  @Test public void testLanguageCamelContextAware() throws Exception {
    DataFormat df=context.resolveDataFormat("my");
    assertNotNull(df);
    MyDataFormat me=assertIsInstanceOf(MyDataFormat.class,df);
    assertNotNull(me.getCamelContext());
  }
private static class MyDataFormat extends org.apache.camel.support.ServiceSupport implements DataFormat, CamelContextAware {
    private CamelContext camelContext;
    public CamelContext getCamelContext(){
      return camelContext;
    }
    public void setCamelContext(    CamelContext camelContext){
      this.camelContext=camelContext;
    }
    @Override public void marshal(    Exchange exchange,    Object graph,    OutputStream stream) throws Exception {
    }
    @Override public Object unmarshal(    Exchange exchange,    InputStream stream) throws Exception {
      return null;
    }
    @Override protected void doStart() throws Exception {
    }
    @Override protected void doStop() throws Exception {
    }
  }
}
