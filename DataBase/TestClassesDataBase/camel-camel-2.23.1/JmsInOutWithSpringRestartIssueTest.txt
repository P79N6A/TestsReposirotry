/** 
 * @version 
 */
public class JmsInOutWithSpringRestartIssueTest extends CamelSpringTestSupport {
  @Override protected AbstractXmlApplicationContext createApplicationContext(){
    return new ClassPathXmlApplicationContext("org/apache/camel/component/jms/issues/JmsInOutWithSpringRestartIssueTest.xml");
  }
  @Test public void testRestartSpringIssue() throws Exception {
    context.startRoute("foo");
    ProducerTemplate producer=context.createProducerTemplate();
    producer.start();
    Object out=producer.requestBody("activemq:queue:foo","Foo");
    assertEquals("Bye Foo",out);
    context.stopRoute("foo");
    context.startRoute("foo");
    out=producer.requestBody("activemq:queue:foo","Bar");
    assertEquals("Bye Bar",out);
  }
}
