/** 
 * @version 
 */
public class QuartzOneCamelContextRestartTest {
  private DefaultCamelContext camel1;
  @Before public void setUp() throws Exception {
    camel1=new DefaultCamelContext();
    camel1.setName("camel-1");
    camel1.addRoutes(new RouteBuilder(){
      @Override public void configure() throws Exception {
        from("quartz://myGroup/myTimerName?cron=0/1+*+*+*+*+?").to("log:one","mock:one");
      }
    }
);
    camel1.start();
  }
  @After public void tearDown() throws Exception {
    camel1.stop();
  }
  @Test public void testOneCamelContextSuspendResume() throws Exception {
    MockEndpoint mock1=camel1.getEndpoint("mock:one",MockEndpoint.class);
    mock1.expectedMinimumMessageCount(2);
    mock1.assertIsSatisfied();
    camel1.stop();
    mock1=camel1.getEndpoint("mock:one",MockEndpoint.class);
    mock1.expectedMinimumMessageCount(3);
    camel1.start();
    mock1.assertIsSatisfied();
  }
}
