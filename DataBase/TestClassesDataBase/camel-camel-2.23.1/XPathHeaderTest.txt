public class XPathHeaderTest extends CamelSpringTestSupport {
  @Test public void testChoiceWithHeaderSelectCamel() throws Exception {
    MockEndpoint mock=getMockEndpoint("mock:camel");
    mock.expectedBodiesReceived("<name>King</name>");
    mock.expectedHeaderReceived("type","Camel");
    template.sendBodyAndHeader("direct:in","<name>King</name>","type","Camel");
    mock.assertIsSatisfied();
  }
  @Test public void testChoiceWithNoHeaderSelectDonkey() throws Exception {
    MockEndpoint mock=getMockEndpoint("mock:donkey");
    mock.expectedBodiesReceived("<name>Kong</name>");
    template.sendBody("direct:in","<name>Kong</name>");
    mock.assertIsSatisfied();
  }
  @Test public void testChoiceWithNoHeaderSelectOther() throws Exception {
    MockEndpoint mock=getMockEndpoint("mock:other");
    mock.expectedBodiesReceived("<name>Other</name>");
    template.sendBody("direct:in","<name>Other</name>");
    mock.assertIsSatisfied();
  }
  @Override protected AbstractXmlApplicationContext createApplicationContext(){
    return new ClassPathXmlApplicationContext("org/apache/camel/language/xpath/XPathHeaderTest.xml");
  }
}
