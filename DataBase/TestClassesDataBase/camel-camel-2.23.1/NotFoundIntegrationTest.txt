@RunWith(ParallelParameterized.class) public class NotFoundIntegrationTest extends AbstractSalesforceTestBase {
  @Parameter public String format;
  @Test public void shouldNotReportNotFoundExceptionFromRestApiIfConfiguredNotTo(){
    final Account got=template.requestBody("salesforce:getSObjectWithId?sObjectName=Account&sObjectIdName=Name&format=" + format + "&notFoundBehaviour=NULL","NonExistant",Account.class);
    assertNull("Expecting null when `notFoundBehaviour` is set to NULL",got);
  }
  @Test public void shouldReportNotFoundExceptionFromRestApi(){
    try {
      template.requestBody("salesforce:getSObjectWithId?sObjectName=Account&sObjectIdName=Name&format=" + format,"NonExistant",Account.class);
      fail("Expecting CamelExecutionException");
    }
 catch (    final CamelExecutionException e) {
      assertTrue("Expecting the cause of CamelExecutionException to be NoSuchSObjectException",e.getCause() instanceof NoSuchSObjectException);
    }
  }
  @Parameters(name="{0}") public static Iterable<String> formats(){
    return Arrays.asList("XML","JSON");
  }
}
