private static class TestDataFormat extends ServiceSupport implements DataFormat {
  @Override public void marshal(  Exchange ex,  Object obj,  OutputStream os) throws Exception {
    os.write(((Book)obj).getName().getBytes());
    os.flush();
  }
  @Override public Object unmarshal(  Exchange ex,  InputStream is) throws Exception {
    return new Book(IOUtils.readStringFromStream(is));
  }
  @Override protected void doStart() throws Exception {
  }
  @Override protected void doStop() throws Exception {
  }
}
