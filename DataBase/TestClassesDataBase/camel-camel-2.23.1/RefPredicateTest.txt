public class RefPredicateTest extends LanguageTestSupport {
  @Override protected JndiRegistry createRegistry() throws Exception {
    JndiRegistry jndi=super.createRegistry();
    jndi.bind("myPredicate",new MyPredicate());
    return jndi;
  }
  @Test public void testExpression() throws Exception {
    exchange.getIn().setBody("Hello World");
    assertExpression("myPredicate","true");
    exchange.getIn().setBody("Bye World");
    assertExpression("myPredicate","false");
  }
  @Test public void testPredicates() throws Exception {
    exchange.getIn().setBody("Hello World");
    assertPredicate("myPredicate",true);
    exchange.getIn().setBody("Bye World");
    assertPredicate("myPredicate",false);
  }
  protected String getLanguageName(){
    return "ref";
  }
private static class MyPredicate implements Predicate {
    @Override public boolean matches(    Exchange exchange){
      return exchange.getIn().getBody().equals("Hello World");
    }
  }
}
