/** 
 * End user on forum issue
 */
public class TransactionInterceptSendToEndpointTest extends CamelSpringTestSupport {
  protected ClassPathXmlApplicationContext createApplicationContext(){
    return new ClassPathXmlApplicationContext("/org/apache/camel/component/jms/tx/TransactionInterceptSendToEndpointTest.xml");
  }
  @Test public void testIntercepted() throws Exception {
    getMockEndpoint("mock:end").expectedMessageCount(1);
    getMockEndpoint("mock:detour").expectedMessageCount(1);
    getMockEndpoint("mock:foo").expectedMessageCount(0);
    template.sendBody("activemq:start","Hello World");
    assertMockEndpointsSatisfied();
  }
}
