public class ProcessDefinitionSetBodyTest extends ContextTestSupport {
  private static final String SUPPLIER_MESSAGE="Hello from a Supplier!";
  private static final String FUNCTION_MESSAGE="Hello from a Function!";
  @Test public void testProcessDefinitionSetBody() throws InterruptedException {
    MockEndpoint functionMock1=getMockEndpoint("mock:supplierOutput");
    functionMock1.expectedMessageCount(1);
    functionMock1.expectedBodyReceived().constant(SUPPLIER_MESSAGE);
    MockEndpoint functionMock2=getMockEndpoint("mock:functionOutput");
    functionMock2.expectedMessageCount(1);
    functionMock2.expectedBodyReceived().constant(FUNCTION_MESSAGE);
    template.sendBody("direct:start","are you there?");
    assertMockEndpointsSatisfied();
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      @Override public void configure() throws Exception {
        from("direct:start").setBody(() -> SUPPLIER_MESSAGE).to("mock:supplierOutput").setBody(exchange -> FUNCTION_MESSAGE).to("mock:functionOutput").to("mock:output");
      }
    }
;
  }
}
