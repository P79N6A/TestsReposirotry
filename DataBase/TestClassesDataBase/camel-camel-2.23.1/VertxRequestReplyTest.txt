/** 
 * @version
 */
public class VertxRequestReplyTest extends VertxBaseTestSupport {
  protected String startUri="direct:start";
  protected String middleUri="vertx:foo.middle";
  protected String resultUri="mock:result";
  protected MockEndpoint resultEndpoint;
  protected String body1="Camel";
  protected String body2="World";
  @Test public void testVertxMessages() throws Exception {
    resultEndpoint=context.getEndpoint(resultUri,MockEndpoint.class);
    resultEndpoint.expectedBodiesReceivedInAnyOrder("Bye Camel","Bye World");
    String out=template.requestBody(startUri,body1,String.class);
    String out2=template.requestBody(startUri,body2,String.class);
    resultEndpoint.assertIsSatisfied();
    assertEquals("Bye Camel",out);
    assertEquals("Bye World",out2);
  }
  protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      public void configure() throws Exception {
        from(startUri).to(middleUri).to(resultUri);
        from(middleUri).transform(simple("Bye ${body}"));
      }
    }
;
  }
}
