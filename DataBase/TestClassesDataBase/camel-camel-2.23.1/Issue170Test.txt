/** 
 * @version 
 */
public class Issue170Test extends ContextTestSupport {
  protected String qOne="seda:Q1";
  protected String qTwo="mock:Q2";
  protected String qThree="mock:Q3";
  @Test public void testSendMessagesGetCorrectCounts() throws Exception {
    MockEndpoint q2=getMockEndpoint(qTwo);
    MockEndpoint q3=getMockEndpoint(qThree);
    String body1="<message id='1'/>";
    String body2="<message id='2'/>";
    q2.expectedBodiesReceived(body1,body2);
    q3.expectedBodiesReceived(body1,body2);
    template.sendBodyAndHeader("direct:start",body1,"counter",1);
    template.sendBodyAndHeader("direct:start",body2,"counter",2);
    assertMockEndpointsSatisfied();
  }
  protected RouteBuilder createRouteBuilder(){
    return new RouteBuilder(){
      public void configure(){
        from("direct:start").to(qOne);
        from(qOne).to(qTwo,qThree);
      }
    }
;
  }
}
