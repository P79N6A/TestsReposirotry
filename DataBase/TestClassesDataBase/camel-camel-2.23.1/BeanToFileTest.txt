/** 
 * Unit test that we can chain bean and file producer.
 */
public class BeanToFileTest extends ContextTestSupport {
  @Test public void testBeanToFile() throws Exception {
    MockEndpoint mock=getMockEndpoint("mock:result");
    mock.expectedMessageCount(1);
    mock.expectedFileExists("target/BeanToFileTest.txt","Bye World");
    template.sendBody("direct:in","World");
    assertMockEndpointsSatisfied();
  }
  protected Context createJndiContext() throws Exception {
    JndiContext answer=new JndiContext();
    answer.bind("myBean",new MyBean());
    return answer;
  }
  protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      public void configure() throws Exception {
        from("direct:in").to("bean:myBean").setHeader(Exchange.FILE_NAME,constant("BeanToFileTest.txt")).to("file://target/?fileExist=Override","mock:result");
      }
    }
;
  }
public static class MyBean {
    public String doSomething(    String input){
      return "Bye " + input;
    }
  }
}
