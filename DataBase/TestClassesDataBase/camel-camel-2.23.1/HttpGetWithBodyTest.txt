public class HttpGetWithBodyTest extends BaseJettyTest {
  @Test public void testGetWithBody() throws Exception {
    Exchange result=template.request("jetty:http://localhost:{{port}}/myapp",new Processor(){
      @Override public void process(      Exchange exchange) throws Exception {
        exchange.getIn().setHeader(Exchange.HTTP_METHOD,"GET");
        exchange.getIn().setBody("Camel");
      }
    }
);
    assertNotNull(result);
    assertEquals("Hello Camel",result.getOut().getBody(String.class));
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      public void configure() throws Exception {
        from("jetty:http://localhost:{{port}}/myapp?disableStreamCache=false").convertBodyTo(String.class).to("log:foo").transform(body().prepend("Hello "));
      }
    }
;
  }
}
