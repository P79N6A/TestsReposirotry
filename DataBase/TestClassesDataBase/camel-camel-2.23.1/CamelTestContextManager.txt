/** 
 * An implementation providing additional integration between Spring Test and Camel testing features.
 */
public static final class CamelTestContextManager extends TestContextManager {
  public CamelTestContextManager(  Class<?> testClass){
    super(testClass);
    if (!alreadyRegistered()) {
      List<TestExecutionListener> list=getTestExecutionListeners();
      list.add(0,new CamelSpringTestContextLoaderTestExecutionListener());
      list.add(1,new DisableJmxTestExecutionListener());
      list.add(2,new StopWatchTestExecutionListener());
    }
  }
  private boolean alreadyRegistered(){
    List<TestExecutionListener> list=getTestExecutionListeners();
    if (list != null) {
      for (      TestExecutionListener listener : list) {
        if (listener instanceof CamelSpringTestContextLoaderTestExecutionListener) {
          return true;
        }
      }
    }
    return false;
  }
}
