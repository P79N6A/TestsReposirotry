public class JMXMonitorTypeStringMatchesTest extends SimpleBeanFixture {
  @Test public void matches() throws Exception {
    ISimpleMXBean simpleBean=getSimpleMXBean();
    simpleBean.setStringValue("bogus");
    Thread.sleep(600);
    simpleBean.setStringValue("initial");
    getMockFixture().waitForMessages();
    getMockFixture().assertMessageReceived(new File("src/test/resources/monitor-consumer/stringMatches.xml"));
  }
  @Override protected JMXUriBuilder buildFromURI(){
    return super.buildFromURI().withMonitorType("string").withGranularityPeriod(500).withObservedAttribute("StringValue").withStringToCompare("initial").withNotifyMatch(true);
  }
}
