@ApplicationScoped @RunWith(CamelCdiRunner.class) @Beans(classes=TestRoute.class) public class ApplicationScopedTest {
  private static final AtomicInteger COUNTER=new AtomicInteger();
  @Inject ApplicationScopedTest(  @Uri("direct:in") ProducerTemplate producer){
    producer.sendBody(COUNTER.incrementAndGet());
  }
  static void expectations(  @Observes @Initialized(ApplicationScoped.class) Object event,  @Uri("mock:out") MockEndpoint mock){
    mock.expectedMessageCount(1);
    mock.expectedBodiesReceived(1);
  }
  @Test public void testOne(  @Uri("mock:out") MockEndpoint mock) throws InterruptedException {
    assertIsSatisfied(1L,TimeUnit.SECONDS,mock);
  }
  @Test public void testTwo(  @Uri("mock:out") MockEndpoint mock) throws InterruptedException {
    assertIsSatisfied(1L,TimeUnit.SECONDS,mock);
  }
}
