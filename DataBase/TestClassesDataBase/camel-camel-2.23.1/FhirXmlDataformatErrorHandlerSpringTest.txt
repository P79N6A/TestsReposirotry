public class FhirXmlDataformatErrorHandlerSpringTest extends CamelSpringTestSupport {
  private static final String INPUT="<Patient><active value=\"true\"/><active value=\"false\"/></Patient>";
  private MockEndpoint mockEndpoint;
  @Override @Before public void setUp() throws Exception {
    super.setUp();
    mockEndpoint=resolveMandatoryEndpoint("mock:result",MockEndpoint.class);
  }
  @Test(expected=DataFormatException.class) public void unmarshalParserErrorHandler() throws Throwable {
    try {
      template.sendBody("direct:unmarshalErrorHandlerStrict",INPUT);
    }
 catch (    CamelExecutionException e) {
      throw e.getCause();
    }
  }
  @Test public void unmarshalLenientErrorHandler() throws Exception {
    mockEndpoint.expectedMessageCount(1);
    template.sendBody("direct:unmarshalErrorHandlerLenient",INPUT);
    mockEndpoint.assertIsSatisfied();
    Exchange exchange=mockEndpoint.getExchanges().get(0);
    Patient patient=(Patient)exchange.getIn().getBody();
    assertEquals(true,patient.getActive());
  }
  @Override protected AbstractApplicationContext createApplicationContext(){
    return new ClassPathXmlApplicationContext("org/apache/camel/dataformat/fhir/xml/FhirXmlDataFormatErrorHandlerSpringTest.xml");
  }
}
