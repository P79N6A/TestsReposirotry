/** 
 * @version 
 */
public abstract class RestletTestSupport extends CamelTestSupport {
  protected static int portNum;
  @BeforeClass public static void initializePortNum(){
    SLF4JBridgeHandler.install();
    java.util.logging.LogManager.getLogManager().getLogger("").setLevel(Level.INFO);
    portNum=AvailablePortFinder.getNextAvailable();
  }
  public HttpResponse doExecute(  HttpUriRequest method) throws Exception {
    CloseableHttpClient client=HttpClientBuilder.create().build();
    try {
      HttpResponse response=client.execute(method);
      if (response.getEntity() != null) {
        response.setEntity(new BufferedHttpEntity(response.getEntity()));
      }
      return response;
    }
  finally {
      client.close();
    }
  }
  public static void assertHttpResponse(  HttpResponse response,  int expectedStatusCode,  String expectedContentType) throws ParseException, IOException {
    assertHttpResponse(response,expectedStatusCode,expectedContentType,null);
  }
  public static void assertHttpResponse(  HttpResponse response,  int expectedStatusCode,  String expectedContentType,  String expectedBody) throws ParseException, IOException {
    assertEquals(expectedStatusCode,response.getStatusLine().getStatusCode());
    assertTrue(response.getFirstHeader("Content-Type").getValue().startsWith(expectedContentType));
    if (expectedBody != null) {
      assertEquals(expectedBody,EntityUtils.toString(response.getEntity()));
    }
  }
}
