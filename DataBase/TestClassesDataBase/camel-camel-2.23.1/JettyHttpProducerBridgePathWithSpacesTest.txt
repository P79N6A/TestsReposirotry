/** 
 */
public class JettyHttpProducerBridgePathWithSpacesTest extends BaseJettyTest {
  private int port1;
  private int port2;
  @Test public void testProxy() throws Exception {
    Thread.sleep(2000);
    String reply=template.requestBody("jetty:http://127.0.0.1:" + port1 + "/foo bar","World",String.class);
    assertEquals("Bye World",reply);
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      @Override public void configure() throws Exception {
        port1=getPort();
        port2=getNextPort();
        from("jetty:http://127.0.0.1:" + port1 + "/foo bar?matchOnUriPrefix=true").to("jetty:http://127.0.0.1:" + port2 + "/proxy bar?bridgeEndpoint=true&throwExceptionOnFailure=false");
        from("jetty:http://127.0.0.1:" + port2 + "/proxy bar?matchOnUriPrefix=true").transform().simple("Bye ${body}");
      }
    }
;
  }
}
