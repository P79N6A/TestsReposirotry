/** 
 * Unit test spring based mina endpoint configuration.
 */
public class Mina2SpringMinaEndpointTest extends CamelSpringTestSupport {
  @Test public void testMinaSpringEndpoint() throws Exception {
    MockEndpoint result=getMockEndpoint("mock:result");
    result.expectedMessageCount(1);
    template.sendBody("myMinaEndpoint","Hello World");
    assertMockEndpointsSatisfied();
    Mina2Endpoint endpoint=applicationContext.getBean("myMinaEndpoint",Mina2Endpoint.class);
    Integer port=applicationContext.getBean("port",Integer.class);
    assertEquals("mina2:tcp:localhost:" + port,endpoint.getEndpointUri());
  }
  @Override protected ClassPathXmlApplicationContext createApplicationContext(){
    return new ClassPathXmlApplicationContext("org/apache/camel/component/mina2/SpringMinaEndpointTest-context.xml");
  }
}
