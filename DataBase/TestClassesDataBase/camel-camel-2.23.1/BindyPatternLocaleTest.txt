/** 
 * @version
 */
public class BindyPatternLocaleTest extends CamelTestSupport {
  private Locale origLocale;
  @Before public void setLanguage(){
    origLocale=Locale.getDefault();
    Locale.setDefault(Locale.US);
  }
  @After public void restoreLanguage(){
    Locale.setDefault(origLocale);
  }
  @Test public void testMarshalling1() throws Exception {
    MockEndpoint mock=getMockEndpoint("mock:marshal");
    mock.expectedMessageCount(1);
    mock.expectedBodiesReceived("050,010\r\n");
    Unity unity=new Unity();
    unity.setMandant(50f);
    unity.setReceiver(10f);
    template.sendBody("direct:marshal",unity);
    assertMockEndpointsSatisfied();
  }
  @Test public void testMarshalling2() throws Exception {
    MockEndpoint mock=getMockEndpoint("mock:marshal");
    mock.expectedMessageCount(1);
    mock.expectedBodiesReceived("080,001\r\n");
    Unity unity=new Unity();
    unity.setMandant(80f);
    unity.setReceiver(1f);
    template.sendBody("direct:marshal",unity);
    assertMockEndpointsSatisfied();
  }
  @Test public void testMarshalling3() throws Exception {
    MockEndpoint mock=getMockEndpoint("mock:marshal");
    mock.expectedMessageCount(1);
    mock.expectedBodiesReceived("000,000\r\n");
    Unity unity=new Unity();
    unity.setMandant(0f);
    unity.setReceiver(0f);
    template.sendBody("direct:marshal",unity);
    assertMockEndpointsSatisfied();
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      @Override public void configure() throws Exception {
        BindyCsvDataFormat bindy=new BindyCsvDataFormat(Unity.class);
        bindy.setLocale("default");
        from("direct:marshal").marshal(bindy).to("mock:marshal");
      }
    }
;
  }
}
