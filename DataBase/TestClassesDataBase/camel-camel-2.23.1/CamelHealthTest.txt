@RunWith(SpringRunner.class) @EnableAutoConfiguration @SpringBootApplication @SpringBootTest(classes={CamelAutoConfiguration.class,CamelHealthAutoConfiguration.class,MyCamelRoute.class}) public class CamelHealthTest extends Assert {
  @Autowired CamelHealthIndicator indicator;
  @Autowired CamelContext camelContext;
  @Test public void shouldHaveHealth() throws Exception {
    Health health=indicator.health();
    assertNotNull(health);
    String code=health.getStatus().getCode();
    assertEquals("UP",code);
    String version=(String)health.getDetails().get("version");
    assertEquals(camelContext.getVersion(),version);
  }
}
