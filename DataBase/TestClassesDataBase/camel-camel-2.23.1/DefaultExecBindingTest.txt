public class DefaultExecBindingTest extends CamelTestSupport {
  @Test public void testReadInput() throws Exception {
    ExecCommand command=readInput("exec:test",Collections.EMPTY_LIST);
    Assert.assertEquals("Get a wrong args.",Collections.EMPTY_LIST,command.getArgs());
    List<String> args=Arrays.asList("arg1","arg2");
    command=readInput("exec:test",args);
    assertEquals("Get a wrong args.",args,command.getArgs());
    command=readInput("exec:test","arg1 arg2");
    assertEquals("Get a wrong args.",args,command.getArgs());
    command=readInput("exec:test?args=arg1 arg2",null);
    assertEquals("Get a wrong args.",args,command.getArgs());
  }
  private ExecCommand readInput(  String execEndpointUri,  Object args) throws Exception {
    DefaultExecBinding binding=new DefaultExecBinding();
    ExecEndpoint execEndpoint=createExecEndpoint(execEndpointUri);
    Exchange exchange=execEndpoint.createExchange();
    exchange.getIn().setHeader(ExecBinding.EXEC_COMMAND_ARGS,args);
    return binding.readInput(exchange,execEndpoint);
  }
  private ExecEndpoint createExecEndpoint(  String uri) throws Exception {
    Component component=context.getComponent("exec");
    return (ExecEndpoint)component.createEndpoint(uri);
  }
}
