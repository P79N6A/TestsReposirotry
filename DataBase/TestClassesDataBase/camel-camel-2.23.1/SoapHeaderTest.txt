@ContextConfiguration public class SoapHeaderTest extends AbstractJUnit4SpringContextTests {
  private final String xmlRequestForGoogleStockQuote="<GetQuote xmlns=\"http://www.webserviceX.NET/\"><symbol>GOOG</symbol></GetQuote>";
  private final String soapHeader="<h:Header xmlns:h=\"http://www.webserviceX.NET/\"><h:MessageID>1234567890</h:MessageID><h:Nested><h:NestedID>1111</h:NestedID></h:Nested></h:Header>";
  @Produce private ProducerTemplate template;
  /** 
 * This tests both the Producer and the Consumer. The SOAP Header is populated into the Camel Header which is copied across in the SoapHeaderResponseProcessor. The result is that the header sent in should be the same as the header returned.
 * @throws Exception
 */
  @Test() public void consumeStockQuoteWebserviceWithSoapHeader() throws Exception {
    Exchange result=template.request("direct:stockQuoteWebservice",new Processor(){
      @Override public void process(      Exchange exchange) throws Exception {
        exchange.getIn().setBody(xmlRequestForGoogleStockQuote);
        exchange.getIn().setHeader(SpringWebserviceConstants.SPRING_WS_SOAP_HEADER,soapHeader);
      }
    }
);
    assertNotNull(result);
    String header=result.getOut().getHeader(SpringWebserviceConstants.SPRING_WS_SOAP_HEADER,String.class);
    assertEquals(soapHeader,header);
  }
}
