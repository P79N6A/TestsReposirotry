/** 
 * @version 
 */
public class BeanRefNoCacheTest extends ContextTestSupport {
  private static final AtomicInteger COUNTER=new AtomicInteger();
  @Test public void testBeanRefNoCache() throws Exception {
    getMockEndpoint("mock:result").expectedBodiesReceived("Hello1","Bye2","Camel3");
    template.sendBody("direct:start","Hello");
    template.sendBody("direct:start","Bye");
    template.sendBody("direct:start","Camel");
    assertMockEndpointsSatisfied();
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      @Override public void configure() throws Exception {
        from("direct:start").bean(MyCoolBean.class.getName(),"doSomething",false).to("mock:result");
      }
    }
;
  }
public static class MyCoolBean {
    private final int count;
    public MyCoolBean(){
      count=COUNTER.incrementAndGet();
    }
    public int getCount(){
      return count;
    }
    public String doSomething(    String s){
      return s + count;
    }
  }
}
