/** 
 * Test re-creating operations
 * @see {org.apache.camel.component.file.remote.RemoteFileConsumer#recoverableConnectIfNecessary}
 */
public class FromFtpClientSoTimeout3Test extends CamelTestSupport {
  private String getFtpUrl(){
    return "ftp://admin@localhost:" + getPort() + "/timeout/?soTimeout=5000";
  }
  private String getPort(){
    return "21";
  }
  @Test public void test() throws Exception {
    @SuppressWarnings("unchecked") FtpEndpoint<FTPFile> ftpEndpoint=context.getEndpoint(getFtpUrl(),FtpEndpoint.class);
    Map<String,Object> ftpClientParameters=new HashMap<>();
    ftpClientParameters.put("soTimeout","10");
    ftpEndpoint.setFtpClientParameters(ftpClientParameters);
    assertEquals(ftpClientParameters.get("soTimeout"),"10");
    ftpEndpoint.createRemoteFileOperations();
    assertEquals(ftpClientParameters.get("soTimeout"),"10");
    ftpEndpoint.createRemoteFileOperations();
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      @Override public void configure() throws Exception {
        from(getFtpUrl()).to("mock:result");
      }
    }
;
  }
}
