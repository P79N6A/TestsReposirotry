/** 
 * This is the first of two tests which will load a Blueprint .cfg file (which will initialize configadmin), containing multiple property placeholders and also override its property placeholders directly (the change will reload blueprint container).
 */
public class ConfigAdminLoadMultiConfigurationFileAndOverrideTest extends CamelBlueprintTestSupport {
  @Override protected String getBlueprintDescriptor(){
    return "org/apache/camel/test/blueprint/configadmin-loadmultifileoverride.xml";
  }
  @Override protected String[] loadConfigAdminConfigurationFile(){
    return new String[]{"src/test/resources/etc/stuff.cfg","stuff","src/test/resources/etc/otherstuff.cfg","otherstuff"};
  }
  @Override protected String useOverridePropertiesWithConfigAdmin(  Dictionary properties) throws Exception {
    properties.put("arrive","mock:otherExtra");
    return "otherstuff";
  }
  @Test public void testConfigAdminWithMultiplePids() throws Exception {
    getMockEndpoint("mock:otherOriginal").setExpectedMessageCount(0);
    getMockEndpoint("mock:otherResult").setExpectedMessageCount(0);
    getMockEndpoint("mock:otherExtra").expectedBodiesReceived("Adieu World","tiens! Adieu Worldtiens! Adieu World");
    template.sendBody("direct:otherStart","World");
    assertMockEndpointsSatisfied();
  }
}
