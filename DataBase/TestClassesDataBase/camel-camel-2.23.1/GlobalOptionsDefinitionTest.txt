public class GlobalOptionsDefinitionTest {
  private static final String LOG_DEBUG_BODY_MAX_CHARS_VALUE="500";
  private static final String LOG_DEBUG_BODY_MAX_CHARS_DUP_VALUE="400";
  private GlobalOptionsDefinition instance;
  private List<GlobalOptionDefinition> globalOptions;
  private GlobalOptionDefinition nominalOption;
  private GlobalOptionDefinition duplicateOption;
  @Before public void setup(){
    nominalOption=new GlobalOptionDefinition();
    nominalOption.setKey(Exchange.LOG_DEBUG_BODY_MAX_CHARS);
    nominalOption.setValue(LOG_DEBUG_BODY_MAX_CHARS_VALUE);
    duplicateOption=new GlobalOptionDefinition();
    duplicateOption.setKey(Exchange.LOG_DEBUG_BODY_MAX_CHARS);
    duplicateOption.setValue(LOG_DEBUG_BODY_MAX_CHARS_DUP_VALUE);
    globalOptions=new ArrayList<>();
    globalOptions.add(nominalOption);
    instance=new GlobalOptionsDefinition();
    instance.setGlobalOptions(globalOptions);
  }
  @Test public void asMapShouldCarryOnLogDebugMaxChars(){
    Map<String,String> map=instance.asMap();
    Assert.assertNotNull(map);
    Assert.assertEquals(1,map.size());
    Assert.assertEquals(LOG_DEBUG_BODY_MAX_CHARS_VALUE,map.get(Exchange.LOG_DEBUG_BODY_MAX_CHARS));
  }
  @Test public void asMapWithDuplicateKeyShouldOverride(){
    globalOptions.add(duplicateOption);
    Map<String,String> map=instance.asMap();
    Assert.assertNotNull(map);
    Assert.assertEquals(1,map.size());
    Assert.assertEquals(LOG_DEBUG_BODY_MAX_CHARS_DUP_VALUE,map.get(Exchange.LOG_DEBUG_BODY_MAX_CHARS));
  }
  @Test(expected=NullPointerException.class) public void asMapWithNullGlobalOptionsShouldThrowNullPointerException(){
    instance.setGlobalOptions(null);
    instance.asMap();
  }
  @Test public void asMapWithEmptyGlobalOptionsShouldReturnEmptyMap(){
    globalOptions.clear();
    Map<String,String> map=instance.asMap();
    Assert.assertNotNull(map);
    Assert.assertEquals(0,map.size());
  }
  @Test public void asMapWithNullKeyShouldReturnEmptyMap(){
    nominalOption.setKey(null);
    Map<String,String> map=instance.asMap();
    Assert.assertNotNull(map);
    Assert.assertEquals(1,map.size());
    Assert.assertEquals(LOG_DEBUG_BODY_MAX_CHARS_VALUE,map.get(null));
  }
}
