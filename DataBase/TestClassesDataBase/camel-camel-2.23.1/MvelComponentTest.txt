/** 
 */
public class MvelComponentTest extends CamelTestSupport {
  @Test public void testMvel() throws Exception {
    Exchange exchange=template.request("direct:a",new Processor(){
      @Override public void process(      Exchange exchange) throws Exception {
        exchange.getIn().setBody(7);
      }
    }
);
    assertEquals("{ \"text\": \"The result is 14\" }",exchange.getOut().getBody());
  }
  @Test public void testMvelTemplate() throws Exception {
    Exchange exchange=template.request("direct:a",new Processor(){
      @Override public void process(      Exchange exchange) throws Exception {
        exchange.getIn().setBody(7);
        exchange.getIn().setHeader(MvelConstants.MVEL_TEMPLATE,"{ \"text\": \"@{\"The result is \" + request.body * 3}\" }");
      }
    }
);
    assertEquals("{ \"text\": \"The result is 21\" }",exchange.getOut().getBody());
  }
  @Test public void testMvelUri() throws Exception {
    Exchange exchange=template.request("direct:a",new Processor(){
      @Override public void process(      Exchange exchange) throws Exception {
        exchange.getIn().setBody(7);
        exchange.getIn().setHeader(MvelConstants.MVEL_RESOURCE_URI,getClass().getClassLoader().getResource("template2.mvel").toURI().toString());
      }
    }
);
    assertEquals("{ \"text\": \"The result is 28\" }",exchange.getOut().getBody());
  }
  protected RouteBuilder createRouteBuilder(){
    return new RouteBuilder(){
      public void configure(){
        from("direct:a").to("mvel:template.mvel");
      }
    }
;
  }
}
