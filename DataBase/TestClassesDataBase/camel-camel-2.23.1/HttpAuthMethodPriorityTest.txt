/** 
 */
public class HttpAuthMethodPriorityTest extends CamelTestSupport {
  @Test public void testAuthMethodPriority() throws Exception {
    HttpClientConfigurer configurer=getMandatoryEndpoint("http://www.google.com/search",HttpEndpoint.class).getHttpClientConfigurer();
    assertNotNull(configurer);
    CompositeHttpConfigurer comp=assertIsInstanceOf(CompositeHttpConfigurer.class,configurer);
    assertEquals(1,comp.getConfigurers().size());
    BasicAuthenticationHttpClientConfigurer basic=assertIsInstanceOf(BasicAuthenticationHttpClientConfigurer.class,comp.getConfigurers().get(0));
    assertFalse(basic.isProxy());
    assertEquals("myUser",basic.getUsername());
    assertEquals("myPassword",basic.getPassword());
  }
  @Override protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder(){
      public void configure(){
        HttpConfiguration config=new HttpConfiguration();
        config.setAuthMethod("Basic");
        config.setAuthUsername("myUser");
        config.setAuthPassword("myPassword");
        config.setAuthMethodPriority("Basic,Digest");
        HttpComponent http=context.getComponent("http",HttpComponent.class);
        http.setHttpConfiguration(config);
        from("direct:start").to("http://www.google.com/search");
      }
    }
;
  }
}
