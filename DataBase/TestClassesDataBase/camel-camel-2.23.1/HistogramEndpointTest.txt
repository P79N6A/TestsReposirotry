@RunWith(MockitoJUnitRunner.class) public class HistogramEndpointTest {
  private static final String METRICS_NAME="metrics.name";
  private static final Long VALUE=System.currentTimeMillis();
  @Mock private MetricRegistry registry;
  private MetricsEndpoint endpoint;
  private InOrder inOrder;
  @Before public void setUp() throws Exception {
    endpoint=new MetricsEndpoint(null,null,registry,MetricsType.HISTOGRAM,METRICS_NAME);
    inOrder=Mockito.inOrder(registry);
  }
  @After public void tearDown() throws Exception {
    inOrder.verifyNoMoreInteractions();
  }
  @Test public void testHistogramEndpoint() throws Exception {
    assertThat(endpoint,is(notNullValue()));
    assertThat(endpoint.getRegistry(),is(registry));
    assertThat(endpoint.getMetricsName(),is(METRICS_NAME));
  }
  @Test public void testCreateProducer() throws Exception {
    Producer producer=endpoint.createProducer();
    assertThat(producer,is(notNullValue()));
    assertThat(producer,is(instanceOf(HistogramProducer.class)));
  }
  @Test public void testGetValue() throws Exception {
    assertThat(endpoint.getValue(),is(nullValue()));
  }
  @Test public void testSetValue() throws Exception {
    assertThat(endpoint.getValue(),is(nullValue()));
    endpoint.setValue(VALUE);
    assertThat(endpoint.getValue(),is(VALUE));
  }
}
