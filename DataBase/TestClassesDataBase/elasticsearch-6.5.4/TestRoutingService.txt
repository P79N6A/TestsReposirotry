private class TestRoutingService extends RoutingService {
  private AtomicBoolean rerouted=new AtomicBoolean();
  TestRoutingService(){
    super(Settings.EMPTY,null,null);
  }
  public boolean hasReroutedAndClear(){
    return rerouted.getAndSet(false);
  }
  @Override protected void performReroute(  String reason){
    logger.info("--> performing fake reroute [{}]",reason);
    rerouted.set(true);
  }
}
