static class TimedClusterApplierService extends ClusterApplierService {
  public volatile Long currentTimeOverride=null;
  TimedClusterApplierService(  Settings settings,  ClusterSettings clusterSettings,  ThreadPool threadPool){
    super(settings,clusterSettings,threadPool,() -> ClusterState.builder(ClusterName.CLUSTER_NAME_SETTING.get(settings)));
  }
  @Override protected long currentTimeInNanos(){
    if (currentTimeOverride != null) {
      return currentTimeOverride;
    }
    return super.currentTimeInNanos();
  }
}
