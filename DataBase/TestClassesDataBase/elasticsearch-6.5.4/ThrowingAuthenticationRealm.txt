static class ThrowingAuthenticationRealm extends CachingUsernamePasswordRealm {
  ThrowingAuthenticationRealm(  Settings settings,  Settings globalSettings,  ThreadPool threadPool){
    super("throwing",new RealmConfig("throwing-test",settings,globalSettings,TestEnvironment.newEnvironment(globalSettings),threadPool.getThreadContext()),threadPool);
  }
  @Override protected void doAuthenticate(  UsernamePasswordToken token,  ActionListener<AuthenticationResult> listener){
    listener.onFailure(new RuntimeException("whatever exception"));
  }
  @Override protected void doLookupUser(  String username,  ActionListener<User> listener){
    listener.onFailure(new RuntimeException("lookup exception"));
  }
}
