protected static class PrioritizedTask extends TestTask {
  private final CountDownLatch latch;
  private final List<PrioritizedTask> tasks;
  private final Priority priority;
  private PrioritizedTask(  Priority priority,  CountDownLatch latch,  List<PrioritizedTask> tasks){
    super();
    this.latch=latch;
    this.tasks=tasks;
    this.priority=priority;
  }
  @Override public void run(){
    tasks.add(this);
    latch.countDown();
  }
  @Override public Priority priority(){
    return priority;
  }
  @Override public void onFailure(  String source,  Exception e){
    latch.countDown();
  }
}
