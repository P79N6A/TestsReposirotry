static class CountingBulk extends ExportBulk {
  private final AtomicInteger count=new AtomicInteger();
  CountingBulk(  String name,  ThreadContext threadContext){
    super(name,threadContext);
  }
  @Override protected void doAdd(  Collection<MonitoringDoc> docs) throws ExportException {
    count.addAndGet(docs.size());
  }
  @Override protected void doFlush(  ActionListener<Void> listener){
    listener.onResponse(null);
  }
  @Override protected void doClose(  ActionListener<Void> listener){
    listener.onResponse(null);
  }
  int getCount(){
    return count.get();
  }
}
