public class JiraActionFactoryTests extends ESTestCase {
  private JiraService service;
  @Before public void init() throws Exception {
    service=mock(JiraService.class);
  }
  public void testParseAction() throws Exception {
    JiraAccount account=mock(JiraAccount.class);
    when(service.getAccount("_account1")).thenReturn(account);
    JiraAction action=jiraAction("_account1",randomIssueDefaults()).build();
    XContentBuilder jsonBuilder=jsonBuilder().value(action);
    XContentParser parser=createParser(jsonBuilder);
    parser.nextToken();
    JiraAction parsedAction=JiraAction.parse("_w1","_a1",parser);
    assertThat(parsedAction,equalTo(action));
  }
}
