public static class PrivateCustomPlugin extends Plugin implements ClusterPlugin {
  public PrivateCustomPlugin(){
  }
  @Override public Map<String,Supplier<ClusterState.Custom>> getInitialClusterStateCustomSupplier(){
    return Collections.singletonMap("test",() -> new TestCustom(1));
  }
  @Override public List<NamedWriteableRegistry.Entry> getNamedWriteables(){
    List<NamedWriteableRegistry.Entry> entries=new ArrayList<>();
    entries.add(new NamedWriteableRegistry.Entry(ClusterState.Custom.class,"test",TestCustom::new));
    entries.add(new NamedWriteableRegistry.Entry(NamedDiff.class,"test",TestCustom::readDiffFrom));
    return entries;
  }
}
