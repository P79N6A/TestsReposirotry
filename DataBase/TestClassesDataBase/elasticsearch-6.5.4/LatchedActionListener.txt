private class LatchedActionListener<Response> implements ActionListener<Response> {
  private final CountDownLatch latch;
  LatchedActionListener(  CountDownLatch latch){
    this.latch=latch;
  }
  @Override public final void onResponse(  Response response){
    latch.countDown();
  }
  @Override public final void onFailure(  Exception t){
    try {
      logger.info("Action Failed",t);
      addError(t);
    }
  finally {
      latch.countDown();
    }
  }
  protected void addError(  Exception e){
  }
}
