/** 
 * Plugin that demands authentication.
 */
public static class TestPlugin extends Plugin implements ActionPlugin {
  private final SetOnce<ReindexFromRemoteWithAuthTests.TestFilter> testFilter=new SetOnce<>();
  @Override public Collection<Object> createComponents(  Client client,  ClusterService clusterService,  ThreadPool threadPool,  ResourceWatcherService resourceWatcherService,  ScriptService scriptService,  NamedXContentRegistry xContentRegistry,  Environment environment,  NodeEnvironment nodeEnvironment,  NamedWriteableRegistry namedWriteableRegistry){
    testFilter.set(new ReindexFromRemoteWithAuthTests.TestFilter(threadPool));
    return Collections.emptyList();
  }
  @Override public List<ActionFilter> getActionFilters(){
    return singletonList(testFilter.get());
  }
  @Override public Collection<String> getRestHeaders(){
    return Arrays.asList(TestFilter.AUTHORIZATION_HEADER,TestFilter.EXAMPLE_HEADER);
  }
}
