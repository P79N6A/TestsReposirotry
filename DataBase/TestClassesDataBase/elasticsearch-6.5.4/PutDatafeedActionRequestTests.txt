public class PutDatafeedActionRequestTests extends AbstractStreamableXContentTestCase<Request> {
  private String datafeedId;
  @Before public void setUpDatafeedId(){
    datafeedId=DatafeedConfigTests.randomValidDatafeedId();
  }
  @Override protected Request createTestInstance(){
    DatafeedConfig.Builder datafeedConfig=new DatafeedConfig.Builder(datafeedId,randomAlphaOfLength(10));
    datafeedConfig.setIndices(Collections.singletonList(randomAlphaOfLength(10)));
    datafeedConfig.setTypes(Collections.singletonList(randomAlphaOfLength(10)));
    return new Request(datafeedConfig.build());
  }
  @Override protected boolean supportsUnknownFields(){
    return false;
  }
  @Override protected Request createBlankInstance(){
    return new Request();
  }
  @Override protected Request doParseInstance(  XContentParser parser){
    return Request.parseRequest(datafeedId,parser);
  }
  @Override protected NamedWriteableRegistry getNamedWriteableRegistry(){
    SearchModule searchModule=new SearchModule(Settings.EMPTY,false,Collections.emptyList());
    return new NamedWriteableRegistry(searchModule.getNamedWriteables());
  }
  @Override protected NamedXContentRegistry xContentRegistry(){
    SearchModule searchModule=new SearchModule(Settings.EMPTY,false,Collections.emptyList());
    return new NamedXContentRegistry(searchModule.getNamedXContents());
  }
}
