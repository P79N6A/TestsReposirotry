public class HasAttributeNodeSelectorTests extends RestClientTestCase {
  public void testHasAttribute(){
    Node hasAttributeValue=dummyNode(singletonMap("attr",singletonList("val")));
    Node hasAttributeButNotValue=dummyNode(singletonMap("attr",singletonList("notval")));
    Node hasAttributeValueInList=dummyNode(singletonMap("attr",Arrays.asList("val","notval")));
    Node notHasAttribute=dummyNode(singletonMap("notattr",singletonList("val")));
    List<Node> nodes=new ArrayList<>();
    nodes.add(hasAttributeValue);
    nodes.add(hasAttributeButNotValue);
    nodes.add(hasAttributeValueInList);
    nodes.add(notHasAttribute);
    List<Node> expected=new ArrayList<>();
    expected.add(hasAttributeValue);
    expected.add(hasAttributeValueInList);
    new HasAttributeNodeSelector("attr","val").select(nodes);
    assertEquals(expected,nodes);
  }
  private static Node dummyNode(  Map<String,List<String>> attributes){
    return new Node(new HttpHost("dummy"),Collections.<HttpHost>emptySet(),randomAsciiAlphanumOfLength(5),randomAsciiAlphanumOfLength(5),new Roles(randomBoolean(),randomBoolean(),randomBoolean()),attributes);
  }
}
