public static class TestCustomMetaDataPlugin extends Plugin {
  private final List<NamedWriteableRegistry.Entry> namedWritables=new ArrayList<>();
  public TestCustomMetaDataPlugin(){
    registerBuiltinWritables();
  }
  private <T extends MetaData.Custom>void registerMetaDataCustom(  String name,  Writeable.Reader<? extends T> reader,  Writeable.Reader<NamedDiff> diffReader){
    namedWritables.add(new NamedWriteableRegistry.Entry(MetaData.Custom.class,name,reader));
    namedWritables.add(new NamedWriteableRegistry.Entry(NamedDiff.class,name,diffReader));
  }
  private void registerBuiltinWritables(){
    registerMetaDataCustom(MergableCustomMetaData1.TYPE,MergableCustomMetaData1::readFrom,MergableCustomMetaData1::readDiffFrom);
    registerMetaDataCustom(MergableCustomMetaData2.TYPE,MergableCustomMetaData2::readFrom,MergableCustomMetaData2::readDiffFrom);
  }
  @Override public List<NamedWriteableRegistry.Entry> getNamedWriteables(){
    return namedWritables;
  }
}
