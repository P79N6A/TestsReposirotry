public abstract class GroupsResolverTestCase extends ESTestCase {
  LDAPConnection ldapConnection;
  protected abstract String ldapUrl();
  protected abstract String bindDN();
  protected abstract String bindPassword();
  protected abstract String trustPath();
  @Before public void setUpLdapConnection() throws Exception {
    Path trustPath=getDataPath(trustPath());
    this.ldapConnection=LdapTestUtils.openConnection(ldapUrl(),bindDN(),bindPassword(),trustPath);
  }
  @After public void tearDownLdapConnection() throws Exception {
    if (ldapConnection != null) {
      ldapConnection.close();
    }
  }
  protected static List<String> resolveBlocking(  GroupsResolver resolver,  LDAPInterface ldapConnection,  String dn,  TimeValue timeLimit,  Logger logger,  Collection<Attribute> attributes){
    PlainActionFuture<List<String>> future=new PlainActionFuture<>();
    resolver.resolve(ldapConnection,dn,timeLimit,logger,attributes,future);
    return future.actionGet();
  }
}
