class CustomNettyHttpServerTransport extends Netty4HttpServerTransport {
  private final ExecutorService executorService=Executors.newCachedThreadPool();
  CustomNettyHttpServerTransport(  final Settings settings){
    super(settings,Netty4HttpServerPipeliningTests.this.networkService,Netty4HttpServerPipeliningTests.this.bigArrays,Netty4HttpServerPipeliningTests.this.threadPool,xContentRegistry(),new NullDispatcher());
  }
  @Override public ChannelHandler configureServerChannelHandler(){
    return new CustomHttpChannelHandler(this,executorService,Netty4HttpServerPipeliningTests.this.threadPool.getThreadContext());
  }
  @Override protected void doClose(){
    executorService.shutdown();
    super.doClose();
  }
}
