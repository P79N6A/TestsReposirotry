public abstract class AbstractScriptTestCase extends ESTestCase {
  protected ScriptService scriptService;
  @Before public void init() throws Exception {
    MustacheScriptEngine engine=new MustacheScriptEngine();
    Map<String,ScriptEngine> engines=Collections.singletonMap(engine.getType(),engine);
    scriptService=new ScriptService(Settings.EMPTY,engines,ScriptModule.CORE_CONTEXTS);
  }
  protected TemplateScript.Factory compile(  String template){
    Script script=new Script(ScriptType.INLINE,DEFAULT_TEMPLATE_LANG,template,Collections.emptyMap());
    return scriptService.compile(script,TemplateScript.CONTEXT);
  }
}
