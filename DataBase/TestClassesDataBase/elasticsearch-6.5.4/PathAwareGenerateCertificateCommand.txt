/** 
 * Converting jimfs Paths into strings and back to paths doesn't work with the security manager. This class works around that by sticking with the original path objects
 */
private static class PathAwareGenerateCertificateCommand extends GenerateCertificateCommand {
  private final Path caFile;
  private final Path outFile;
  PathAwareGenerateCertificateCommand(  Path caFile,  Path outFile){
    this.caFile=caFile;
    this.outFile=outFile;
  }
  @Override protected Path resolvePath(  OptionSet options,  OptionSpec<String> spec){
    if (spec.options().contains("ca")) {
      return caFile;
    }
    return super.resolvePath(options,spec);
  }
  @Override Path resolveOutputPath(  Terminal terminal,  OptionSet options,  String defaultFilename) throws IOException {
    return outFile;
  }
}
