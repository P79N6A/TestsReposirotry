/** 
 * Represents an is_true assert section: - is_true:  get.fields.bar
 */
public class IsTrueAssertion extends Assertion {
  public static IsTrueAssertion parse(  XContentParser parser) throws IOException {
    return new IsTrueAssertion(parser.getTokenLocation(),ParserUtils.parseField(parser));
  }
  private static final Logger logger=Loggers.getLogger(IsTrueAssertion.class);
  public IsTrueAssertion(  XContentLocation location,  String field){
    super(location,field,true);
  }
  @Override protected void doAssert(  Object actualValue,  Object expectedValue){
    logger.trace("assert that [{}] has a true value (field [{}])",actualValue,getField());
    String errorMessage=errorMessage();
    assertThat(errorMessage,actualValue,notNullValue());
    String actualString=actualValue.toString();
    assertThat(errorMessage,actualString,not(equalTo("")));
    assertThat(errorMessage,actualString,not(equalToIgnoringCase(Boolean.FALSE.toString())));
    assertThat(errorMessage,actualString,not(equalTo("0")));
  }
  private String errorMessage(){
    return "field [" + getField() + "] doesn't have a true value";
  }
}
