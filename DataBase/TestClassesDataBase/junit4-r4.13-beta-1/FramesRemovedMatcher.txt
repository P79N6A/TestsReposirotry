/** 
 * A matcher that matches the line printed when frames were removed from a stack trace.
 */
private static class FramesRemovedMatcher extends StringMatcher {
  private static final Pattern PATTERN=Pattern.compile("\t*\\.\\.\\. [0-9]+ ([a-z]+)");
  private final String suffix;
  public FramesRemovedMatcher(  String suffix){
    this.suffix=suffix;
  }
  public void describeTo(  Description description){
    description.appendText("A line matching \"..x " + suffix + "\"");
  }
  @Override protected boolean matchesSafely(  String line){
    if (!line.startsWith("\t")) {
      return false;
    }
    line=line.substring(1);
    java.util.regex.Matcher matcher=PATTERN.matcher(line);
    if (!matcher.matches()) {
      fail("Line does not look like a stack trace line: " + line);
    }
    return suffix.equals(matcher.group(1));
  }
}
