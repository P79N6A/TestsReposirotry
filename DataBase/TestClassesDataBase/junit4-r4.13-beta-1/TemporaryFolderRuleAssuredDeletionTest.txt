public class TemporaryFolderRuleAssuredDeletionTest {
public static class TestClass {
    static TemporaryFolder injectedRule;
    @Rule public TemporaryFolder folder=injectedRule;
    @Test public void alwaysPassesButDeletesRootFolder(){
      folder.getRoot().delete();
    }
  }
  @Test public void testFailsWhenCreatedFolderCannotBeDeletedButDeletionIsAssured(){
    TestClass.injectedRule=TemporaryFolder.builder().assureDeletion().build();
    PrintableResult result=testResult(TestClass.class);
    assertThat(result,failureCountIs(1));
    assertThat(result.toString(),containsString("Unable to clean up temporary folder"));
  }
  @Test public void byDefaultTestDoesNotFailWhenCreatedFolderCannotBeDeleted(){
    TestClass.injectedRule=new TemporaryFolder();
    PrintableResult result=testResult(TestClass.class);
    assertThat(result,isSuccessful());
  }
}
