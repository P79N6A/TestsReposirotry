private static class ExaminedListener extends RunListener {
  final boolean throwFromTestStarted;
  volatile boolean hasTestFailure=false;
  ExaminedListener(  boolean throwFromTestStarted){
    this.throwFromTestStarted=throwFromTestStarted;
  }
  @Override public void testStarted(  Description description) throws Exception {
    if (throwFromTestStarted) {
      throw new Exception();
    }
  }
  @Override public void testFailure(  Failure failure) throws Exception {
    hasTestFailure=true;
  }
}
