private static class JarHandlers {
  final JarUploadHandler uploadHandler;
  final JarListHandler listHandler;
  final JarPlanHandler planHandler;
  final JarRunHandler runHandler;
  final JarDeleteHandler deleteHandler;
  JarHandlers(  final Path jarDir,  final TestingDispatcherGateway restfulGateway){
    final GatewayRetriever<TestingDispatcherGateway> gatewayRetriever=() -> CompletableFuture.completedFuture(restfulGateway);
    final CompletableFuture<String> localAddressFuture=CompletableFuture.completedFuture("shazam://localhost:12345");
    final Time timeout=Time.seconds(10);
    final Map<String,String> responseHeaders=Collections.emptyMap();
    final Executor executor=TestingUtils.defaultExecutor();
    uploadHandler=new JarUploadHandler(localAddressFuture,gatewayRetriever,timeout,responseHeaders,JarUploadHeaders.getInstance(),jarDir,executor);
    listHandler=new JarListHandler(localAddressFuture,gatewayRetriever,timeout,responseHeaders,JarListHeaders.getInstance(),jarDir.toFile(),executor);
    planHandler=new JarPlanHandler(localAddressFuture,gatewayRetriever,timeout,responseHeaders,JarPlanHeaders.getInstance(),jarDir,new Configuration(),executor);
    runHandler=new JarRunHandler(localAddressFuture,gatewayRetriever,timeout,responseHeaders,JarRunHeaders.getInstance(),jarDir,new Configuration(),executor);
    deleteHandler=new JarDeleteHandler(localAddressFuture,gatewayRetriever,timeout,responseHeaders,JarDeleteHeaders.getInstance(),jarDir,executor);
  }
}
