private static class FailingWriteRequest implements WriteRequest {
  private final AsynchronousFileIOChannel<MemorySegment,WriteRequest> channel;
  private final MemorySegment segment;
  protected FailingWriteRequest(  AsynchronousFileIOChannel<MemorySegment,WriteRequest> targetChannel,  MemorySegment segment){
    this.channel=targetChannel;
    this.segment=segment;
  }
  @Override public void write() throws IOException {
    throw new IOException();
  }
  @Override public void requestDone(  IOException ioex){
    this.channel.handleProcessedBuffer(this.segment,ioex);
  }
}
