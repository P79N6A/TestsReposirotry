private static class ConstructorTestClass extends RMQSource<String> {
  private ConnectionFactory factory;
  public ConstructorTestClass(  RMQConnectionConfig rmqConnectionConfig,  String queueName,  boolean usesCorrelationId,  DeserializationSchema<String> deserializationSchema) throws Exception {
    super(rmqConnectionConfig,queueName,usesCorrelationId,deserializationSchema);
    RMQConnectionConfig.Builder builder=new RMQConnectionConfig.Builder();
    builder.setHost("hostTest").setPort(999).setUserName("userTest").setPassword("passTest").setVirtualHost("/");
    factory=Mockito.spy(builder.build().getConnectionFactory());
    try {
      Mockito.doThrow(new RuntimeException()).when(factory).newConnection();
    }
 catch (    IOException e) {
      fail("Failed to stub connection method");
    }
  }
  @Override protected ConnectionFactory setupConnectionFactory(){
    return factory;
  }
  public ConnectionFactory getFactory(){
    return factory;
  }
}
