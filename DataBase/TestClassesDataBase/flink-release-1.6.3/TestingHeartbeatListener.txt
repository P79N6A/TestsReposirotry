static class TestingHeartbeatListener implements HeartbeatListener<Object,Object> {
  private final CompletableFuture<ResourceID> future=new CompletableFuture<>();
  private final Object payload;
  private int numberHeartbeatReports;
  TestingHeartbeatListener(  Object payload){
    this.payload=payload;
  }
  CompletableFuture<ResourceID> getTimeoutFuture(){
    return future;
  }
  public int getNumberHeartbeatReports(){
    return numberHeartbeatReports;
  }
  @Override public void notifyHeartbeatTimeout(  ResourceID resourceID){
    future.complete(resourceID);
  }
  @Override public void reportPayload(  ResourceID resourceID,  Object payload){
    numberHeartbeatReports++;
  }
  @Override public CompletableFuture<Object> retrievePayload(  ResourceID resourceID){
    return CompletableFuture.completedFuture(payload);
  }
}
