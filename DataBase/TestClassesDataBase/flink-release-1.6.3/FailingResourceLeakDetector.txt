private static class FailingResourceLeakDetector<T> extends ResourceLeakDetector<T> {
  FailingResourceLeakDetector(  Class<?> resourceType,  int samplingInterval,  long maxActive){
    super(resourceType,samplingInterval,maxActive);
  }
  @Override protected void reportTracedLeak(  String resourceType,  String records){
    super.reportTracedLeak(resourceType,records);
    fail(String.format("LEAK: %s.release() was not called before it's garbage-collected.%s",resourceType,records));
  }
  @Override protected void reportUntracedLeak(  String resourceType){
    super.reportUntracedLeak(resourceType);
    fail(String.format("LEAK: %s.release() was not called before it's garbage-collected.",resourceType));
  }
}
