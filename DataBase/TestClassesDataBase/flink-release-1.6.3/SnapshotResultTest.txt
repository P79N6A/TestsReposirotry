public class SnapshotResultTest extends TestLogger {
  @Test public void discardState() throws Exception {
    SnapshotResult<StateObject> result=SnapshotResult.withLocalState(mock(StateObject.class),mock(StateObject.class));
    result.discardState();
    verify(result.getJobManagerOwnedSnapshot()).discardState();
    verify(result.getTaskLocalSnapshot()).discardState();
  }
  @Test public void getStateSize(){
    long size=42L;
    SnapshotResult<StateObject> result=SnapshotResult.withLocalState(new DummyStateObject(size),new DummyStateObject(size));
    Assert.assertEquals(size,result.getStateSize());
  }
static class DummyStateObject implements StateObject {
    private static final long serialVersionUID=1L;
    private final long size;
    DummyStateObject(    long size){
      this.size=size;
    }
    @Override public void discardState(){
    }
    @Override public long getStateSize(){
      return size;
    }
  }
}
