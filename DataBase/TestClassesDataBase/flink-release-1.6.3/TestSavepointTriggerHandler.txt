private class TestSavepointTriggerHandler extends TestHandler<SavepointTriggerRequestBody,TriggerResponse,SavepointTriggerMessageParameters> {
  private final Iterator<String> expectedTargetDirectories;
  TestSavepointTriggerHandler(  final String... expectedTargetDirectories){
    super(SavepointTriggerHeaders.getInstance());
    this.expectedTargetDirectories=Arrays.asList(expectedTargetDirectories).iterator();
  }
  @Override protected CompletableFuture<TriggerResponse> handleRequest(  @Nonnull HandlerRequest<SavepointTriggerRequestBody,SavepointTriggerMessageParameters> request,  @Nonnull DispatcherGateway gateway) throws RestHandlerException {
    final String targetDirectory=request.getRequestBody().getTargetDirectory();
    if (Objects.equals(expectedTargetDirectories.next(),targetDirectory)) {
      return CompletableFuture.completedFuture(new TriggerResponse(testTriggerId));
    }
 else {
      return CompletableFuture.completedFuture(new TriggerResponse(new TriggerId()));
    }
  }
}
