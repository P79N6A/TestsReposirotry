/** 
 * An  {@link AsyncExceptionHandler} storing the handled exception.
 */
public static class ReferenceSettingExceptionHandler implements AsyncExceptionHandler {
  private final AtomicReference<Throwable> errorReference;
  public ReferenceSettingExceptionHandler(  AtomicReference<Throwable> errorReference){
    this.errorReference=errorReference;
  }
  @Override public void handleAsyncException(  String message,  Throwable exception){
    errorReference.compareAndSet(null,exception);
  }
}
