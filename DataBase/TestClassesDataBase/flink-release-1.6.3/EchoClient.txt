/** 
 * Simple echo client that sends a message over the network and waits for the answer.
 */
public static class EchoClient implements AutoCloseable {
  private final Socket socket;
  private final PrintWriter output;
  private final BufferedReader input;
  public EchoClient(  String hostName,  int portNumber,  int socketTimeout) throws IOException {
    socket=new Socket(hostName,portNumber);
    socket.setSoTimeout(socketTimeout);
    output=new PrintWriter(socket.getOutputStream(),true);
    input=new BufferedReader(new InputStreamReader(socket.getInputStream()));
  }
  public String write(  String message) throws IOException {
    output.println(message);
    return input.readLine();
  }
  @Override public void close() throws Exception {
    input.close();
    output.close();
    socket.close();
  }
}
