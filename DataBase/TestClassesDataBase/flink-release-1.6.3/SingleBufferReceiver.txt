/** 
 * Reads a single buffer and recycles it.
 */
public static class SingleBufferReceiver extends AbstractInvokable {
  public SingleBufferReceiver(  Environment environment){
    super(environment);
  }
  @Override public void invoke() throws Exception {
    InputGate gate=getEnvironment().getInputGate(0);
    Buffer buffer=gate.getNextBufferOrEvent().orElseThrow(IllegalStateException::new).getBuffer();
    if (buffer != null) {
      buffer.recycleBuffer();
    }
  }
}
