private class PingRestHandler extends TestHandler<EmptyRequestBody,EmptyResponseBody,EmptyMessageParameters> {
  private final Queue<CompletableFuture<EmptyResponseBody>> responseQueue;
  private PingRestHandler(  CompletableFuture<EmptyResponseBody>... responses){
    super(PingRestHandlerHeaders.INSTANCE);
    responseQueue=new ArrayDeque<>(Arrays.asList(responses));
  }
  @Override protected CompletableFuture<EmptyResponseBody> handleRequest(  @Nonnull HandlerRequest<EmptyRequestBody,EmptyMessageParameters> request,  @Nonnull DispatcherGateway gateway) throws RestHandlerException {
    final CompletableFuture<EmptyResponseBody> result=responseQueue.poll();
    if (result != null) {
      return result;
    }
 else {
      return CompletableFuture.completedFuture(EmptyResponseBody.getInstance());
    }
  }
}
