private static class TestingHandler extends RedirectHandler<RestfulGateway> {
  protected TestingHandler(  @Nonnull CompletableFuture<String> localAddressFuture,  @Nonnull GatewayRetriever<RestfulGateway> leaderRetriever,  @Nonnull Time timeout){
    super(localAddressFuture,leaderRetriever,timeout,Collections.emptyMap());
  }
  @Override protected void respondAsLeader(  ChannelHandlerContext channelHandlerContext,  RoutedRequest routedRequest,  RestfulGateway gateway) throws Exception {
    Assert.assertTrue(channelHandlerContext.channel().eventLoop().inEventLoop());
    HttpResponse response=HandlerRedirectUtils.getResponse(HttpResponseStatus.OK,RESPONSE_MESSAGE);
    KeepAliveWrite.flush(channelHandlerContext.channel(),routedRequest.getRequest(),response);
  }
}
