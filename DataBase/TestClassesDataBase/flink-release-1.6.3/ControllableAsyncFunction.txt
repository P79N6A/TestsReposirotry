private static class ControllableAsyncFunction<IN> implements AsyncFunction<IN,IN> {
  private static final long serialVersionUID=-4214078239267288636L;
  private transient CompletableFuture<Void> trigger;
  private ControllableAsyncFunction(  CompletableFuture<Void> trigger){
    this.trigger=Preconditions.checkNotNull(trigger);
  }
  @Override public void asyncInvoke(  IN input,  ResultFuture<IN> resultFuture) throws Exception {
    trigger.thenAccept(v -> resultFuture.complete(Collections.singleton(input)));
  }
}
