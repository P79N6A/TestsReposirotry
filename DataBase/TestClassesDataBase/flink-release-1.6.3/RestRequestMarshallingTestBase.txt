/** 
 * Test base for verifying that marshalling / unmarshalling REST  {@link RequestBody}s work properly.
 */
public abstract class RestRequestMarshallingTestBase<R extends RequestBody> extends TestLogger {
  /** 
 * Returns the class of the test response.
 * @return class of the test response type
 */
  protected abstract Class<R> getTestRequestClass();
  /** 
 * Returns an instance of a response to be tested.
 * @return instance of the expected test response
 */
  protected abstract R getTestRequestInstance() throws Exception ;
  /** 
 * Tests that we can marshal and unmarshal the response.
 */
  @Test public void testJsonMarshalling() throws Exception {
    final R expected=getTestRequestInstance();
    ObjectMapper objectMapper=RestMapperUtils.getStrictObjectMapper();
    final String marshalled=objectMapper.writeValueAsString(expected);
    final R unmarshalled=objectMapper.readValue(marshalled,getTestRequestClass());
    assertOriginalEqualsToUnmarshalled(expected,unmarshalled);
  }
  /** 
 * Asserts that two objects are equal. If they are not, an  {@link AssertionError} is thrown.
 * @param expected expected value
 * @param actual   the value to check against expected
 */
  protected void assertOriginalEqualsToUnmarshalled(  R expected,  R actual){
    Assert.assertEquals(expected,actual);
  }
}
