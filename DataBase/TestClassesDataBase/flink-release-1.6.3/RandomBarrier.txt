private static class RandomBarrier implements BarrierGenerator {
  private static final Random rnd=new Random();
  private final double threshold;
  public RandomBarrier(  double expectedEvery){
    threshold=1 / expectedEvery;
  }
  @Override public boolean isNextBarrier(){
    return rnd.nextDouble() < threshold;
  }
}
