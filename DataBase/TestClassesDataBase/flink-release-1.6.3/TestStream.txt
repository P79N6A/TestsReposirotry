/** 
 * Testing stream which adds itself to a reference counter while not closed.
 */
protected static final class TestStream extends FSDataInputStream {
  protected AtomicInteger refCount;
  public TestStream(  AtomicInteger refCount){
    this.refCount=refCount;
    refCount.incrementAndGet();
  }
  @Override public void seek(  long desired) throws IOException {
  }
  @Override public long getPos() throws IOException {
    return 0;
  }
  @Override public int read() throws IOException {
    return 0;
  }
  @Override public synchronized void close() throws IOException {
    refCount.decrementAndGet();
  }
}
