/** 
 * Event listener that expects a given  {@link TaskEvent} once in its {@link #onEvent(TaskEvent)}call and will fail for any subsequent call. <p>Be sure to check that  {@link #fired} is <tt>true</tt> to ensure that this handle has beencalled once.
 */
private static class OneShotEventListener implements EventListener<TaskEvent> {
  private final TaskEvent expected;
  boolean fired=false;
  OneShotEventListener(  TaskEvent expected){
    this.expected=expected;
  }
  public void onEvent(  TaskEvent actual){
    checkState(!fired,"Should only fire once");
    fired=true;
    checkArgument(actual == expected,"Fired on unexpected event: %s (expected: %s)",actual,expected);
  }
}
