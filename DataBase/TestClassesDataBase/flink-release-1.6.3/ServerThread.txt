private static class ServerThread extends Thread {
  private final ServerSocket serverSocket;
  private volatile Throwable error;
  public ServerThread(  ServerSocket serverSocket){
    super("Socket Server Thread");
    this.serverSocket=serverSocket;
  }
  @Override public void run(){
    try {
      try (Socket socket=serverSocket.accept();PrintWriter writer=new PrintWriter(socket.getOutputStream(),true)){
        writer.println(WordCountData.TEXT);
      }
     }
 catch (    Throwable t) {
      this.error=t;
    }
  }
  public void checkError() throws IOException {
    if (error != null) {
      throw new IOException("Error in server thread: " + error.getMessage(),error);
    }
  }
}
