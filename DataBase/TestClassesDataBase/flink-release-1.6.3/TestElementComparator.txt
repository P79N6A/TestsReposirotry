/** 
 * Comparator for test elements, operating on the serialized bytes of the elements.
 */
protected static class TestElementComparator implements Comparator<TestElement> {
  @Override public int compare(  TestElement o1,  TestElement o2){
    ByteArrayOutputStreamWithPos os=new ByteArrayOutputStreamWithPos();
    DataOutputViewStreamWrapper ow=new DataOutputViewStreamWrapper(os);
    try {
      TestElementSerializer.INSTANCE.serialize(o1,ow);
      byte[] a1=os.toByteArray();
      os.reset();
      TestElementSerializer.INSTANCE.serialize(o2,ow);
      byte[] a2=os.toByteArray();
      return UnsignedBytes.lexicographicalComparator().compare(a1,a2);
    }
 catch (    Exception e) {
      throw new RuntimeException(e);
    }
  }
}
