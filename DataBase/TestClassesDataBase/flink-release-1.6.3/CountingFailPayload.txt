private static final class CountingFailPayload implements LogicalSlot.Payload {
  private final AtomicInteger failCounter=new AtomicInteger(0);
  int getFailCount(){
    return failCounter.get();
  }
  @Override public void fail(  Throwable cause){
    failCounter.incrementAndGet();
  }
  @Override public CompletableFuture<?> getTerminalStateFuture(){
    return CompletableFuture.completedFuture(null);
  }
}
