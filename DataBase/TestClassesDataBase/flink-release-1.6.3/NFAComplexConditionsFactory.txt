private static class NFAComplexConditionsFactory implements NFACompiler.NFAFactory<Event> {
  private static final long serialVersionUID=1173020762472766713L;
  private final boolean handleTimeout;
  private NFAComplexConditionsFactory(){
    this(false);
  }
  private NFAComplexConditionsFactory(  boolean handleTimeout){
    this.handleTimeout=handleTimeout;
  }
  @Override public NFA<Event> createNFA(){
    Pattern<Event,?> pattern=Pattern.<Event>begin("start").subtype(SubEvent.class).where(new MiddleFilter()).or(new SubEventEndFilter()).times(2).within(Time.milliseconds(10L));
    return NFACompiler.compileFactory(pattern,handleTimeout).createNFA();
  }
}
