private static class ExistsCacheListener implements NodeCacheListener {
  final CompletableFuture<Boolean> existsPromise=new CompletableFuture<>();
  final NodeCache cache;
  public ExistsCacheListener(  final NodeCache cache){
    this.cache=cache;
  }
  public Future<Boolean> nodeExists(){
    return existsPromise;
  }
  @Override public void nodeChanged() throws Exception {
    ChildData data=cache.getCurrentData();
    if (data != null && !existsPromise.isDone()) {
      existsPromise.complete(true);
      cache.getListenable().removeListener(this);
    }
  }
}
