/** 
 * Tests for the WebMonitorUtils.
 */
public class WebMonitorUtilsTest extends TestLogger {
  @Test public void testGetArchivers(){
    JsonArchivist[] direct=WebRuntimeMonitor.getJsonArchivists();
    JsonArchivist[] reflected=WebMonitorUtils.getJsonArchivists();
    Assert.assertEquals(direct.length,reflected.length);
    for (int x=0; x < direct.length; x++) {
      Assert.assertSame(direct[x].getClass(),reflected[x].getClass());
    }
  }
  /** 
 * Tests dynamically loading of handlers such as  {@link JarUploadHandler}.
 */
  @Test public void testLoadWebSubmissionExtension() throws Exception {
    final Configuration configuration=new Configuration();
    configuration.setString(JobManagerOptions.ADDRESS,"localhost");
    final WebMonitorExtension webMonitorExtension=WebMonitorUtils.loadWebSubmissionExtension(CompletableFuture::new,CompletableFuture.completedFuture("localhost:12345"),Time.seconds(10),Collections.emptyMap(),Paths.get("/tmp"),Executors.directExecutor(),configuration);
    assertThat(webMonitorExtension,is(not(nullValue())));
  }
}
