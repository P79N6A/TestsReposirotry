/** 
 * Tests for the behaviors of the  {@link BarrierBuffer} with {@link CachedBufferBlocker}.
 */
public class CreditBasedBarrierBufferTest extends BarrierBufferTestBase {
  @Override public BarrierBuffer createBarrierHandler(  InputGate gate) throws IOException {
    return new BarrierBuffer(gate,new CachedBufferBlocker(PAGE_SIZE));
  }
  @Override public void validateAlignmentBuffered(  long actualBytesBuffered,  BufferOrEvent... sequence){
    long expectedBuffered=0;
    for (    BufferOrEvent boe : sequence) {
      if (boe.isBuffer()) {
        expectedBuffered+=PAGE_SIZE;
      }
    }
    assertEquals("Wrong alignment buffered bytes",actualBytesBuffered,expectedBuffered);
  }
}
