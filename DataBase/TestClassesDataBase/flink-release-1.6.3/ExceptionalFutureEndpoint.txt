private static class ExceptionalFutureEndpoint extends TestRpcEndpoint implements ExceptionalGateway {
  protected ExceptionalFutureEndpoint(  RpcService rpcService){
    super(rpcService);
  }
  @Override public CompletableFuture<Integer> doStuff(){
    final CompletableFuture<Integer> future=new CompletableFuture<>();
    new Thread(){
      @Override public void run(){
        try {
          Thread.sleep(10);
        }
 catch (        InterruptedException ignored) {
        }
        future.completeExceptionally(new Exception("some test"));
      }
    }
.start();
    return future;
  }
}
