public class GetJobCommandTest {
  @Rule public JenkinsRule j=new JenkinsRule();
  @Issue("JENKINS-20236") @Test public void withFolders() throws Exception {
    MockFolder d=j.createFolder("d");
    FreeStyleProject p=d.createProject(FreeStyleProject.class,"p");
    ByteArrayOutputStream out=new ByteArrayOutputStream();
    PrintStream outS=new PrintStream(out);
    int result=new GetJobCommand().main(Collections.singletonList("d/p"),Locale.ENGLISH,new NullInputStream(0),outS,outS);
    outS.flush();
    String output=out.toString();
    assertEquals(output,0,result);
    assertEquals(p.getConfigFile().asString(),output);
    out=new ByteArrayOutputStream();
    outS=new PrintStream(out);
    result=new GetJobCommand().main(Collections.singletonList("d"),Locale.ENGLISH,new NullInputStream(0),outS,outS);
    outS.flush();
    output=out.toString();
    assertEquals(output,0,result);
    assertEquals(d.getConfigFile().asString(),output);
  }
}
