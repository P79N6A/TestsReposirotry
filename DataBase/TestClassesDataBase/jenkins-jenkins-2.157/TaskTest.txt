public class TaskTest {
  @Rule public JenkinsRule j=new JenkinsRule();
  @Test public void postLink() throws Exception {
    WebClient wc=j.createWebClient();
    HtmlPage page=wc.goTo(postLink.getUrlName());
    HtmlElementUtil.click(page.getAnchorByText("POST"));
    assertTrue("Action method should be invoked",postLink.called);
  }
  @TestExtension("postLink") public static final MockAction postLink=new MockAction();
public static class MockAction implements UnprotectedRootAction {
    private boolean called=false;
    @RequirePOST public void doPost(    StaplerRequest req,    StaplerResponse rsp) throws ServletException, IOException {
      if (called)       throw new AssertionError();
      called=true;
      rsp.forwardToPreviousPage(req);
    }
    public String getIconFileName(){
      return null;
    }
    public String getDisplayName(){
      return null;
    }
    public String getUrlName(){
      return "post-link";
    }
  }
}
