/** 
 * @author marco.miller@ericsson.com
 */
@RunWith(PowerMockRunner.class) @PrepareForTest({Connection.class}) public class ConnectionMockTest {
  @Test public void shouldTolerateEmptyByteArrayUponStreamZeroValue() throws IOException {
    DataInputStream din=mock(DataInputStream.class);
    Connection c=new Connection(din,new FastPipedOutputStream(new FastPipedInputStream()));
    assertTrue(c.readByteArray().length == 0);
  }
}
