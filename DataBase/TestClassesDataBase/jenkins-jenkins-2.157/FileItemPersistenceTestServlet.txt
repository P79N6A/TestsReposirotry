public static final class FileItemPersistenceTestServlet extends HttpServlet {
  private static final long serialVersionUID=1L;
  @Override protected void doGet(  HttpServletRequest req,  HttpServletResponse resp) throws ServletException, IOException {
    resp.setContentType("text/html");
    resp.getWriter().println("<html><body><form action='/' method=post name=main enctype='multipart/form-data'>" + "<input type=file name=test><input type=submit>" + "</form></body></html>");
  }
  @Override protected void doPost(  HttpServletRequest req,  HttpServletResponse resp) throws ServletException, IOException {
    try {
      ServletFileUpload f=new ServletFileUpload(new DiskFileItemFactory());
      List<?> v=f.parseRequest(req);
      assertEquals(1,v.size());
      XStream2 xs=new XStream2();
      System.out.println(xs.toXML(v.get(0)));
    }
 catch (    FileUploadException e) {
      throw new ServletException(e);
    }
  }
}
