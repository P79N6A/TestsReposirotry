/** 
 * @author <a href="mailto:tom.fennelly@gmail.com">tom.fennelly@gmail.com</a>
 */
public class ResourceBundleUtilTest {
  /** 
 * Test resource bundle loading for a defined locale.
 */
  @Test public void test_known_locale(){
    JSONObject bundle=ResourceBundleUtil.getBundle("hudson.logging.Messages",Locale.GERMAN);
    Assert.assertEquals("Initialisiere Log-Rekorder",bundle.getString("LogRecorderManager.init"));
    bundle=ResourceBundleUtil.getBundle("hudson.logging.Messages",new Locale("pt"));
    Assert.assertEquals("Inicializando registros de log",bundle.getString("LogRecorderManager.init"));
    Assert.assertTrue(ResourceBundleUtil.getBundle("hudson.logging.Messages",new Locale("pt")) == bundle);
  }
  /** 
 * Test that we get the "default" bundle for an unknown locale.
 */
  @Test public void test_unknown_locale(){
    Locale defaultOSLocale=Locale.getDefault();
    try {
      Locale.setDefault(new Locale("en","US"));
      JSONObject bundle=ResourceBundleUtil.getBundle("hudson.logging.Messages",new Locale("kok"));
      Assert.assertEquals("Initialing log recorders",bundle.getString("LogRecorderManager.init"));
    }
  finally {
      Locale.setDefault(defaultOSLocale);
    }
  }
  /** 
 * Test unknown bundle.
 */
  @Test(expected=MissingResourceException.class) public void test_unknown_bundle(){
    ResourceBundleUtil.getBundle("hudson.blah.Whatever");
  }
}
