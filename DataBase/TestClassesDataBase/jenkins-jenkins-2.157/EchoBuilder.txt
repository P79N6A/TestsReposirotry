public static class EchoBuilder extends Builder {
  @Override public boolean perform(  AbstractBuild<?,?> build,  Launcher launcher,  BuildListener listener) throws InterruptedException, IOException {
    String[] cmds=Functions.isWindows() ? new String[]{"cmd.exe","/C","echo","Hello"} : new String[]{"echo","Hello"};
    String path=Functions.isWindows() ? "C:\\this\\path\\doesn't\\exist" : "/this/path/doesnt/exist";
    Launcher.ProcStarter starter=launcher.launch().cmds(cmds).pwd(new File(path));
    starter.start();
    starter.join();
    return true;
  }
@Extension public static class DescriptorImpl extends BuildStepDescriptor<Builder> {
    @Override public boolean isApplicable(    Class<? extends AbstractProject> aClass){
      return true;
    }
  }
}
