/** 
 * @author Kohsuke Kawaguchi
 */
public class ExceptionAnnotationTest {
  @Rule public JenkinsRule j=new JenkinsRule();
  @Test public void test() throws Exception {
    FreeStyleProject p=j.createFreeStyleProject();
    p.getBuildersList().add(new TestBuilder(){
      @Override public boolean perform(      AbstractBuild<?,?> build,      Launcher launcher,      BuildListener listener){
        new Throwable().printStackTrace(listener.error("Injecting a failure"));
        return true;
      }
    }
);
    FreeStyleBuild b=j.buildAndAssertSuccess(p);
    j.createWebClient().getPage(b,"console");
  }
}
