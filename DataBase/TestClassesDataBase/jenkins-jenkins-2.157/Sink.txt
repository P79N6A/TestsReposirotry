class Sink extends OutputStream {
  private Exception closed;
  private volatile int count;
  private void checkNotClosed() throws IOException {
    if (closed != null)     throw new IOException(closed);
  }
  @Override public void write(  int b) throws IOException {
    count++;
    checkNotClosed();
  }
  @Override public void write(  byte[] b) throws IOException {
    count+=b.length;
    checkNotClosed();
  }
  @Override public void write(  byte[] b,  int off,  int len) throws IOException {
    count+=len;
    checkNotClosed();
  }
  @Override public void close() throws IOException {
    closed=new Exception();
  }
}
