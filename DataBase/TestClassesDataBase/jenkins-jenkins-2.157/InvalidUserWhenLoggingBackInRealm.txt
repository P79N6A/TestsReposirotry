private static class InvalidUserWhenLoggingBackInRealm extends AbstractPasswordBasedSecurityRealm {
  @Override protected UserDetails authenticate(  String username,  String password) throws AuthenticationException {
    if (username.equals(password)) {
      return new User(username,password,true,new GrantedAuthority[]{new GrantedAuthorityImpl("myteam")});
    }
    throw new BadCredentialsException(username);
  }
  @Override public GroupDetails loadGroupByGroupname(  String groupname) throws UsernameNotFoundException, DataAccessException {
    throw new UnsupportedOperationException();
  }
  @Override public UserDetails loadUserByUsername(  String username) throws UsernameNotFoundException, DataAccessException {
    failureInduced=true;
    throw new UsernameNotFoundException("intentionally not working");
  }
}
