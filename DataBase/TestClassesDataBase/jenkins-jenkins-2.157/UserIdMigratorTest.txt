public class UserIdMigratorTest {
  @Rule public JenkinsRule j=new JenkinsRule();
  @Test @LocalData public void migrateSimpleUser() throws InterruptedException, ReactorException, IOException {
    String userId="fred";
    User fred=User.getById(userId,false);
    assertThat(fred.getFullName(),is("Fred Smith"));
  }
  @Test @LocalData public void migrateMultipleUsers() throws InterruptedException, ReactorException, IOException {
    assertThat(User.getAll().size(),is(3));
    User fred=User.getById("fred",false);
    assertThat(fred.getFullName(),is("Fred Smith"));
    User legacyUser=User.getById("foo/bar",false);
    assertThat(legacyUser.getFullName(),is("Foo Bar"));
    User oldLegacyUser=User.getById("zzz\u1000",false);
    assertThat(oldLegacyUser.getFullName(),is("Old Legacy"));
  }
}
