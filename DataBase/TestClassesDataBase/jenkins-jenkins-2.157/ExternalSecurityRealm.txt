private static class ExternalSecurityRealm extends AbstractPasswordBasedSecurityRealm {
  @Override public UserDetails loadUserByUsername(  String username) throws UsernameNotFoundException {
    if (username.equals("nonexistent")) {
      throw new UsernameNotFoundException(username);
    }
 else     if (username.equals("unknown")) {
      throw new UserMayOrMayNotExistException(username);
    }
 else {
      String canonicalName=username.toLowerCase(Locale.ENGLISH);
      try {
        User.get(canonicalName).addProperty(new MyViewsProperty(canonicalName));
      }
 catch (      IOException x) {
        throw new RuntimeException(x);
      }
      return new org.acegisecurity.userdetails.User(canonicalName,"",true,true,true,true,new GrantedAuthority[]{AUTHENTICATED_AUTHORITY});
    }
  }
  @Override protected UserDetails authenticate(  String username,  String password) throws AuthenticationException {
    return loadUserByUsername(username);
  }
  @Override public GroupDetails loadGroupByGroupname(  String groupname) throws UsernameNotFoundException {
    throw new UsernameNotFoundException(groupname);
  }
}
