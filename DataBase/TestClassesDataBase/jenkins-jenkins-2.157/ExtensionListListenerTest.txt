/** 
 * @author <a href="mailto:tom.fennelly@gmail.com">tom.fennelly@gmail.com</a>
 */
public class ExtensionListListenerTest {
  @Rule public JenkinsRule r=PluginManagerUtil.newJenkinsRule();
  @Test public void test_onChange() throws Exception {
    ExtensionList<TransientActionFactory> extensionList=ExtensionList.lookup(TransientActionFactory.class);
    extensionList.size();
    MyExtensionListListener listListener=new MyExtensionListListener();
    extensionList.addListener(listListener);
    PluginManagerUtil.dynamicLoad("magicext.hpi",r.jenkins);
    Assert.assertEquals(1,listListener.onChangeCallCount);
  }
private class MyExtensionListListener extends ExtensionListListener {
    private int onChangeCallCount=0;
    @Override public void onChange(){
      onChangeCallCount++;
    }
  }
}
