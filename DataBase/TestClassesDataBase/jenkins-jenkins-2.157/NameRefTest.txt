/** 
 * Tests the handling of @nameRef in the form tree.
 */
public class NameRefTest {
  @Rule public JenkinsRule r=new JenkinsRuleWithJelly();
  @Test public void test() throws Exception {
    r.jenkins.setCrumbIssuer(null);
    HtmlPage p=r.createWebClient().goTo("self/test1");
    r.submit(p.getFormByName("config"));
  }
public static class JenkinsRuleWithJelly extends JenkinsRule {
    public HttpResponse doSubmitTest1(    StaplerRequest req) throws Exception {
      JSONObject f=req.getSubmittedForm();
      System.out.println(f);
      assertEquals("{\"foo\":{\"bar\":{\"zot\":\"zot\"}}}",f.toString());
      return HttpResponses.ok();
    }
  }
}
