public static class EventQueue<T> {
  private final List<T> eventList=new ArrayList<>();
  private EventQueue add(  T t){
    eventList.add(t);
    return this;
  }
  public void assertLastEventIsAndThenRemoveIt(  T expected){
    assertLastEventIsAndThenRemoveIt(expected::equals);
  }
  public void assertLastEventIsAndThenRemoveIt(  Predicate<T> predicate){
    if (eventList.isEmpty()) {
      fail("event list is empty");
    }
    T t=eventList.remove(eventList.size() - 1);
    assertTrue(predicate.test(t));
    eventList.clear();
  }
  public void assertNoNewEvents(){
    assertEquals("list of event should be empty",eventList.size(),0);
  }
  public void clear(){
    eventList.clear();
  }
}
