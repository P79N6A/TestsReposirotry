/** 
 * Verify that the PluginManagerStaplerOverride extensions register and allow safely modifying PluginManager views
 * @author Sam Van Oort
 */
public class PluginManagerOverrideTest {
  @Rule public JenkinsRule j=new JenkinsRule();
  @Test public void testViewOverrides() throws Exception {
    assertEquals(1,PluginManagerStaplerOverride.all().size());
    assertTrue(PluginManagerStaplerOverride.all().get(0) instanceof BasicPluginManagerOverride);
    JenkinsRule.WebClient client=j.createWebClient();
    assertEquals(200,client.goTo("self/pluginManager/available").getWebResponse().getStatusCode());
    HtmlPage p=j.createWebClient().goTo("self/pluginManager/newview");
    assertEquals("LoremIpsum",p.getElementById("dummyElement").getTextContent());
  }
  /** 
 * Micro-implementation simply to allow adding a view resource 
 */
@TestExtension("testViewOverrides") public static class BasicPluginManagerOverride extends PluginManagerStaplerOverride {
  }
}
