public static class TestLoginCallbackHandler implements AuthenticateCallbackHandler {
  private volatile boolean configured=false;
  @Override public void configure(  Map<String,?> configs,  String saslMechanism,  List<AppConfigurationEntry> jaasConfigEntries){
    if (configured)     throw new IllegalStateException("Login callback handler configured twice");
    configured=true;
  }
  @Override public void handle(  Callback[] callbacks){
    if (!configured)     throw new IllegalStateException("Login callback handler not configured");
    for (    Callback callback : callbacks) {
      if (callback instanceof NameCallback)       ((NameCallback)callback).setName(TestJaasConfig.USERNAME);
 else       if (callback instanceof PasswordCallback)       ((PasswordCallback)callback).setPassword(TestJaasConfig.PASSWORD.toCharArray());
    }
  }
  @Override public void close(){
  }
}
