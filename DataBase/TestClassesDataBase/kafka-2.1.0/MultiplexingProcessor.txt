/** 
 * A processor that forwards slightly-modified messages to each child.
 */
protected static class MultiplexingProcessor extends AbstractProcessor<String,String> {
  private final int numChildren;
  MultiplexingProcessor(  final int numChildren){
    this.numChildren=numChildren;
  }
  @SuppressWarnings("deprecation") @Override public void process(  final String key,  final String value){
    for (int i=0; i != numChildren; ++i) {
      context().forward(key,value + "(" + (i + 1)+ ")",i);
    }
  }
}
