public class JavaTest {
  private String javaVendor;
  @Before public void before(){
    javaVendor=System.getProperty("java.vendor");
  }
  @After public void after(){
    System.setProperty("java.vendor",javaVendor);
  }
  @Test public void testIsIBMJdk(){
    System.setProperty("java.vendor","Oracle Corporation");
    assertFalse(Java.isIbmJdk());
    System.setProperty("java.vendor","IBM Corporation");
    assertTrue(Java.isIbmJdk());
  }
  @Test public void testLoadKerberosLoginModule() throws ClassNotFoundException {
    String clazz=Java.isIbmJdk() ? "com.ibm.security.auth.module.Krb5LoginModule" : "com.sun.security.auth.module.Krb5LoginModule";
    Class.forName(clazz);
  }
  @Test public void testJavaVersion(){
    Java.Version v=Java.parseVersion("9");
    assertEquals(9,v.majorVersion);
    assertEquals(0,v.minorVersion);
    assertTrue(v.isJava9Compatible());
    v=Java.parseVersion("9.0.1");
    assertEquals(9,v.majorVersion);
    assertEquals(0,v.minorVersion);
    assertTrue(v.isJava9Compatible());
    v=Java.parseVersion("9.0.0.15");
    assertEquals(9,v.majorVersion);
    assertEquals(0,v.minorVersion);
    assertTrue(v.isJava9Compatible());
    v=Java.parseVersion("9.1");
    assertEquals(9,v.majorVersion);
    assertEquals(1,v.minorVersion);
    assertTrue(v.isJava9Compatible());
    v=Java.parseVersion("1.8.0_152");
    assertEquals(1,v.majorVersion);
    assertEquals(8,v.minorVersion);
    assertFalse(v.isJava9Compatible());
    v=Java.parseVersion("1.7.0_80");
    assertEquals(1,v.majorVersion);
    assertEquals(7,v.minorVersion);
    assertFalse(v.isJava9Compatible());
  }
}
