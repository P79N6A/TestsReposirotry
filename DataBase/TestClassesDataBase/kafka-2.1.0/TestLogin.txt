public static class TestLogin implements Login {
  static AtomicInteger loginCount=new AtomicInteger();
  private String contextName;
  private Configuration configuration;
  private Subject subject;
  @Override public void configure(  Map<String,?> configs,  String contextName,  Configuration configuration,  AuthenticateCallbackHandler callbackHandler){
    assertEquals(1,configuration.getAppConfigurationEntry(contextName).length);
    this.contextName=contextName;
    this.configuration=configuration;
  }
  @Override public LoginContext login() throws LoginException {
    LoginContext context=new LoginContext(contextName,null,new AbstractLogin.DefaultLoginCallbackHandler(),configuration);
    context.login();
    subject=context.getSubject();
    subject.getPublicCredentials().clear();
    subject.getPrivateCredentials().clear();
    subject.getPublicCredentials().add(TestJaasConfig.USERNAME);
    subject.getPrivateCredentials().add(TestJaasConfig.PASSWORD);
    loginCount.incrementAndGet();
    return context;
  }
  @Override public Subject subject(){
    return subject;
  }
  @Override public String serviceName(){
    return "kafka";
  }
  @Override public void close(){
  }
}
