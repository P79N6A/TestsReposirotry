private static class MockKibosh implements AutoCloseable {
  private final File tempDir;
  private final Path controlFile;
  MockKibosh() throws IOException {
    tempDir=TestUtils.tempDirectory();
    controlFile=Paths.get(tempDir.toPath().toString(),Kibosh.KIBOSH_CONTROL);
    KiboshControlFile.EMPTY.write(controlFile);
  }
  KiboshControlFile read() throws IOException {
    return KiboshControlFile.read(controlFile);
  }
  @Override public void close() throws Exception {
    Utils.delete(tempDir);
  }
}
