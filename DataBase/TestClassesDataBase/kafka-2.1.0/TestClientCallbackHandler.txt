public static class TestClientCallbackHandler implements AuthenticateCallbackHandler {
  static final String USERNAME="TestClientCallbackHandler-user";
  static final String PASSWORD="TestClientCallbackHandler-password";
  private volatile boolean configured;
  @Override public void configure(  Map<String,?> configs,  String mechanism,  List<AppConfigurationEntry> jaasConfigEntries){
    if (configured)     throw new IllegalStateException("Client callback handler configured twice");
    configured=true;
  }
  @Override public void handle(  Callback[] callbacks) throws UnsupportedCallbackException {
    if (!configured)     throw new IllegalStateException("Client callback handler not configured");
    for (    Callback callback : callbacks) {
      if (callback instanceof NameCallback)       ((NameCallback)callback).setName(USERNAME);
 else       if (callback instanceof PasswordCallback)       ((PasswordCallback)callback).setPassword(PASSWORD.toCharArray());
 else       throw new UnsupportedCallbackException(callback);
    }
  }
  @Override public void close(){
  }
}
