public class MockTimeTest {
  @Test public void shouldSetStartTime(){
    final TopologyTestDriver.MockTime time=new TopologyTestDriver.MockTime(42L);
    assertEquals(42L,time.milliseconds());
    assertEquals(42L * 1000L * 1000L,time.nanoseconds());
  }
  @Test public void shouldGetNanosAsMillis(){
    final TopologyTestDriver.MockTime time=new TopologyTestDriver.MockTime(42L);
    assertEquals(42L,time.hiResClockMs());
  }
  @Test(expected=IllegalArgumentException.class) public void shouldNotAllowNegativeSleep(){
    new TopologyTestDriver.MockTime(42).sleep(-1L);
  }
  @Test public void shouldAdvanceTimeOnSleep(){
    final TopologyTestDriver.MockTime time=new TopologyTestDriver.MockTime(42L);
    assertEquals(42L,time.milliseconds());
    time.sleep(1L);
    assertEquals(43L,time.milliseconds());
    time.sleep(0L);
    assertEquals(43L,time.milliseconds());
    time.sleep(3L);
    assertEquals(46L,time.milliseconds());
  }
}
