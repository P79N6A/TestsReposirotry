/** 
 * A processor that forwards slightly-modified messages to each named child. Note: the children are assumed to be named "sink{child number}", e.g., sink1, or sink2, etc.
 */
protected static class MultiplexByNameProcessor extends AbstractProcessor<String,String> {
  private final int numChildren;
  MultiplexByNameProcessor(  final int numChildren){
    this.numChildren=numChildren;
  }
  @SuppressWarnings("deprecation") @Override public void process(  final String key,  final String value){
    for (int i=0; i != numChildren; ++i) {
      context().forward(key,value + "(" + (i + 1)+ ")","sink" + i);
    }
  }
}
