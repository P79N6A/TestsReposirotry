private static class WaiterThread<T> extends Thread {
  private final KafkaFutureImpl<T> future;
  private final T expected;
  Throwable testException=null;
  WaiterThread(  KafkaFutureImpl<T> future,  T expected){
    this.future=future;
    this.expected=expected;
  }
  @Override public void run(){
    try {
      T value=future.get();
      assertEquals(expected,value);
    }
 catch (    Throwable testException) {
      this.testException=testException;
    }
  }
}
