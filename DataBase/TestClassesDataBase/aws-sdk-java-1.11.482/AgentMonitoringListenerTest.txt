/** 
 * Tests for  {@link AgentMonitoringListener}.
 */
@RunWith(MockitoJUnitRunner.class) public class AgentMonitoringListenerTest {
  @Mock private AsynchronousAgentDispatcher dispatcher;
  @Mock private DatagramChannel channel;
  private AgentMonitoringListener monitoringListener;
  @Before public void methodSetup(){
    monitoringListener=new AgentMonitoringListener(channel,dispatcher,8192);
  }
  @Test public void delegatesWriteToDispatcher(){
    ApiCallAttemptMonitoringEvent event=new ApiCallAttemptMonitoringEvent();
    monitoringListener.handleEvent(event);
    verify(dispatcher).addWriteTask(eq(event),eq(channel),eq(8192));
  }
}
