private static final class MockCredentialsProvider extends StaticCredentialsProvider {
  public int getCredentialsCallCount=0;
  public boolean throwException=false;
  public String exceptionMessage="No credentials";
  public MockCredentialsProvider(){
    super(new BasicAWSCredentials("accessKey","secretKey"));
  }
  public MockCredentialsProvider(  String exceptionMessage){
    this();
    this.exceptionMessage=exceptionMessage;
    this.throwException=true;
  }
  @Override public AWSCredentials getCredentials(){
    getCredentialsCallCount++;
    if (throwException) {
      throw new RuntimeException(exceptionMessage);
    }
 else     return super.getCredentials();
  }
}
