public class RetryPolicyContextTest {
  @Test public void totalRequests_IsOneMoreThanRetriesAttempted(){
    assertEquals(4,RetryPolicyContexts.withRetriesAttempted(3).totalRequests());
  }
  @Test public void nullHttpStatusCodeAllowed(){
    assertNull(RetryPolicyContexts.withStatusCode(null).httpStatusCode());
  }
  @Test public void nullExceptionAllowed(){
    assertNull(RetryPolicyContexts.withException(null).exception());
  }
  @Test public void buildFully(){
    final EmptyAmazonWebServiceRequest origRequest=new EmptyAmazonWebServiceRequest();
    final DefaultRequest<EmptyAmazonWebServiceRequest> request=new DefaultRequest<EmptyAmazonWebServiceRequest>(origRequest,"foo");
    final SdkClientException exception=new SdkClientException("boom");
    final RetryPolicyContext context=RetryPolicyContext.builder().retriesAttempted(3).httpStatusCode(400).request(request).exception(exception).originalRequest(origRequest).build();
    assertEquals(3,context.retriesAttempted());
    assertEquals(Integer.valueOf(400),context.httpStatusCode());
    assertEquals(request,context.request());
    assertEquals(exception,context.exception());
    assertEquals(origRequest,context.originalRequest());
  }
}
