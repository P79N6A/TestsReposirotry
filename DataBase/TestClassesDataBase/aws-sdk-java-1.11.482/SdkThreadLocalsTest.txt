public class SdkThreadLocalsTest {
  @Test public void testOneThreadLocalRemoved(){
    ThreadLocal<Integer> t=new ThreadLocal<Integer>();
    t.set(1);
    SdkThreadLocalsRegistry.register(t);
    assertEquals(1,(int)t.get());
    SdkThreadLocals.remove();
    assertNull(t.get());
  }
  @Test public void testMultipleThreadLocalsRemoved(){
    ThreadLocal<Integer> t1=new ThreadLocal<Integer>();
    t1.set(1);
    ThreadLocal<Integer> t2=new ThreadLocal<Integer>();
    t2.set(1);
    SdkThreadLocalsRegistry.register(t1);
    SdkThreadLocalsRegistry.register(t2);
    assertEquals(1,(int)t1.get());
    assertEquals(1,(int)t2.get());
    SdkThreadLocals.remove();
    assertNull(t1.get());
    assertNull(t2.get());
  }
}
