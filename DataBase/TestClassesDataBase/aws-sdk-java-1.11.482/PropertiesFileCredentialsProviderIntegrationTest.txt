/** 
 * Unit tests for the PropertiesFileCredentialsProvider.
 */
public class PropertiesFileCredentialsProviderIntegrationTest {
  private static String fileName="propertiesCredentials";
  private static String data="accessKey=testKey\nsecretKey=secretKey";
  private static File file=null;
  @BeforeClass public static void setUp() throws Exception {
    file=File.createTempFile(String.valueOf(System.currentTimeMillis()),fileName);
    FileWriter fw=null;
    try {
      fw=new FileWriter(file);
      fw.write(data);
    }
  finally {
      fw.close();
    }
  }
  @AfterClass public static void tearDown() throws Exception {
    if (file != null) {
      file.delete();
    }
  }
  /** 
 * Tests that the credentials provider loads credentials appropriately 
 */
  @Test public void testPropertiesCredentialsMethod() throws Exception {
    PropertiesFileCredentialsProvider provider=new PropertiesFileCredentialsProvider(file.getAbsolutePath());
    assertNotNull(provider.getCredentials());
    assertEquals(provider.getCredentials().getAWSAccessKeyId(),"testKey");
    assertEquals(provider.getCredentials().getAWSSecretKey(),"secretKey");
  }
}
