/** 
 * Retry policy that retries only if a request fails with an IOException.
 */
private static class CustomRetryPolicy implements CredentialsEndpointRetryPolicy {
  private static final int MAX_RETRIES=3;
  @Override public boolean shouldRetry(  int retriesAttempted,  CredentialsEndpointRetryParameters retryParams){
    if (retriesAttempted >= MAX_RETRIES) {
      return false;
    }
    if (retryParams.getException() != null && retryParams.getException() instanceof IOException) {
      return true;
    }
    return false;
  }
}
