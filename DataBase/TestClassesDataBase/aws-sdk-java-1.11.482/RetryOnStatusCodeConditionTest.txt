public class RetryOnStatusCodeConditionTest {
  private final RetryCondition condition=new RetryOnStatusCodeCondition(Arrays.asList(404,500,513));
  @Test public void retryableStatusCode_ReturnsTrue(){
    assertTrue(condition.shouldRetry(RetryPolicyContexts.withStatusCode(404)));
  }
  @Test public void nonRetryableStatusCode_ReturnsTrue(){
    assertFalse(condition.shouldRetry(RetryPolicyContexts.withStatusCode(400)));
  }
  @Test public void noStatusCodeInContext_ReturnFalse(){
    assertFalse(condition.shouldRetry(RetryPolicyContexts.withStatusCode(null)));
  }
  @Test public void noStatusCodesInList_ReturnsFalse(){
    final RetryCondition noStatusCodes=new RetryOnStatusCodeCondition(Collections.<Integer>emptyList());
    assertFalse(noStatusCodes.shouldRetry(RetryPolicyContexts.withStatusCode(404)));
  }
  @Test(expected=IllegalArgumentException.class) public void nullListOfStatusCodes_ThrowsException(){
    new RetryOnStatusCodeCondition(null);
  }
}
