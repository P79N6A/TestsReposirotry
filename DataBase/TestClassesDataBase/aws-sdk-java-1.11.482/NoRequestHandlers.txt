/** 
 * Tests a  {@link StackedRequestHandler} with no {@link RequestHandler2}'s added. Mainly tests that things don't blow up as nothing should happen when no request handlers are added
 */
public static class NoRequestHandlers {
  private StackedRequestHandler stackedRequestHandler;
  @Mock private Request<?> request;
  private Response<?> response;
  @Before public void setup(){
    MockitoAnnotations.initMocks(this);
    stackedRequestHandler=new StackedRequestHandler(new ArrayList<RequestHandler2>());
    response=new Response<String>("Dummy response",new HttpResponse(request,new HttpGet()));
  }
  @Test public void beforeMarshalling(){
    final AmazonWebServiceRequest inputRequest=mock(AmazonWebServiceRequest.class);
    stackedRequestHandler.beforeMarshalling(inputRequest);
  }
  @Test public void beforeRequest(){
    stackedRequestHandler.beforeRequest(request);
  }
  @Test public void beforeUnmarshalling(){
    stackedRequestHandler.beforeUnmarshalling(request,new HttpResponse(request,null));
  }
  @Test public void afterResponse(){
    stackedRequestHandler.afterResponse(request,response);
  }
  @Test public void afterError(){
    final Exception exception=new AmazonServiceException("Some service failure");
    stackedRequestHandler.afterError(request,response,exception);
  }
}
