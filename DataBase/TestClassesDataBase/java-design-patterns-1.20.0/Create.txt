/** 
 * Test Creation of Simple Objects
 */
public static class Create extends SimpleObjectsTest {
  @Test public void happyCase() throws Exception {
    final SimpleObject simpleObject=new SimpleObject();
    final Sequence seq=context.sequence("create");
    context.checking(new Expectations(){
{
        oneOf(mockContainer).newTransientInstance(SimpleObject.class);
        inSequence(seq);
        will(returnValue(simpleObject));
        oneOf(mockContainer).persistIfNotAlready(simpleObject);
        inSequence(seq);
      }
    }
);
    final SimpleObject obj=simpleObjects.create("Foobar");
    assertThat(obj).isEqualTo(simpleObject);
    assertThat(obj.getName()).isEqualTo("Foobar");
  }
}
