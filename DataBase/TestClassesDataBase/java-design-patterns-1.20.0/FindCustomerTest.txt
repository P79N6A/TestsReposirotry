/** 
 * Unit tests for  {@link FindCustomer}.
 * @author George Aristy (george.aristy@gmail.com)
 */
public class FindCustomerTest {
  /** 
 * Returns the given result with no exceptions.
 */
  @Test public void noExceptions() throws Exception {
    assertThat(new FindCustomer("123").perform(),is("123"));
  }
  /** 
 * Throws the given exception.
 * @throws Exception the expected exception
 */
  @Test public void oneException() throws Exception {
    assertThrows(BusinessException.class,() -> {
      new FindCustomer("123",new BusinessException("test")).perform();
    }
);
  }
  /** 
 * Should first throw the given exceptions, then return the given result.
 * @throws Exception not an expected exception
 */
  @Test public void resultAfterExceptions() throws Exception {
    final BusinessOperation<String> op=new FindCustomer("123",new CustomerNotFoundException("not found"),new DatabaseNotAvailableException("not available"));
    try {
      op.perform();
    }
 catch (    CustomerNotFoundException e) {
    }
    try {
      op.perform();
    }
 catch (    DatabaseNotAvailableException e) {
    }
    assertThat(op.perform(),is("123"));
  }
}
