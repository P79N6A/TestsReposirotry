/** 
 * Tests for  {@link DataBus}.
 * @author Paul Campbell (pcampbell@kemitix.net)
 */
public class DataBusTest {
  @Mock private Member member;
  @Mock private DataType event;
  @BeforeEach public void setUp(){
    MockitoAnnotations.initMocks(this);
  }
  @Test public void publishedEventIsReceivedBySubscribedMember(){
    final DataBus dataBus=DataBus.getInstance();
    dataBus.subscribe(member);
    dataBus.publish(event);
    then(member).should().accept(event);
  }
  @Test public void publishedEventIsNotReceivedByMemberAfterUnsubscribing(){
    final DataBus dataBus=DataBus.getInstance();
    dataBus.subscribe(member);
    dataBus.unsubscribe(member);
    dataBus.publish(event);
    then(member).should(never()).accept(event);
  }
}
