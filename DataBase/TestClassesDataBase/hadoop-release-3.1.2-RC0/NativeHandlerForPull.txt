public static class NativeHandlerForPull implements NativeDataSource, NativeDataTarget {
  InputBuffer in;
  private final OutputBuffer out;
  private IDataLoader dataLoader;
  private DataReceiver dataReceiver;
  public NativeHandlerForPull(  InputBuffer input,  OutputBuffer out){
    this.in=input;
    this.out=out;
  }
  @Override public InputBuffer getInputBuffer(){
    return in;
  }
  @Override public void setDataReceiver(  DataReceiver handler){
    this.dataReceiver=handler;
  }
  @Override public void loadData() throws IOException {
    final int size=dataLoader.load();
  }
  public void setDataLoader(  IDataLoader dataLoader){
    this.dataLoader=dataLoader;
  }
  @Override public void sendData() throws IOException {
    final int len=out.length();
    out.rewind();
    in.rewind(0,len);
    dataReceiver.receiveData();
  }
  @Override public void finishSendData() throws IOException {
    dataReceiver.receiveData();
  }
  @Override public OutputBuffer getOutputBuffer(){
    return this.out;
  }
}
