/** 
 * Base class to present changes applied to current file/dir. A modification can be file creation, deletion, or other modifications such as appending on an existing file. Three abstract methods need to be implemented by subclasses: loadSnapshots() captures the states of snapshots before the modification, modify() applies the modification to the current directory, and checkSnapshots() verifies the snapshots do not change after the modification.
 */
static abstract class Modification {
  protected final Path file;
  protected final FileSystem fs;
  final String type;
  Modification(  Path file,  FileSystem fs,  String type){
    this.file=file;
    this.fs=fs;
    this.type=type;
  }
  abstract void loadSnapshots() throws Exception ;
  abstract void modify() throws Exception ;
  abstract void checkSnapshots() throws Exception ;
  @Override public String toString(){
    return getClass().getSimpleName() + ":" + type+ ":"+ file;
  }
}
