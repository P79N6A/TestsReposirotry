private static class StubbedJob extends JobImpl {
  private final InitTransition initTransition;
  StateMachineFactory<JobImpl,JobStateInternal,JobEventType,JobEvent> localFactory;
  private final StateMachine<JobStateInternal,JobEventType,JobEvent> localStateMachine;
  @Override protected StateMachine<JobStateInternal,JobEventType,JobEvent> getStateMachine(){
    return localStateMachine;
  }
  public StubbedJob(  JobId jobId,  ApplicationAttemptId applicationAttemptId,  Configuration conf,  EventHandler eventHandler,  boolean newApiCommitter,  String user,  int numSplits,  AppContext appContext){
    super(jobId,applicationAttemptId,conf,eventHandler,null,new JobTokenSecretManager(),new Credentials(),SystemClock.getInstance(),Collections.<TaskId,TaskInfo>emptyMap(),MRAppMetrics.create(),null,newApiCommitter,user,System.currentTimeMillis(),null,appContext,null,null);
    initTransition=getInitTransition(numSplits);
    localFactory=stateMachineFactory.addTransition(JobStateInternal.NEW,EnumSet.of(JobStateInternal.INITED,JobStateInternal.FAILED),JobEventType.JOB_INIT,initTransition);
    localStateMachine=localFactory.make(this);
  }
}
