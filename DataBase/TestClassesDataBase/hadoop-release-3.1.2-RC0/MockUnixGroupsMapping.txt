/** 
 * mock class to get group mapping for fake users
 */
static class MockUnixGroupsMapping extends ShellBasedUnixGroupsMapping {
  static Map<String,String[]> fakeUser2GroupsMap;
  private static final List<String> defaultGroups;
static {
    defaultGroups=new ArrayList<String>(1);
    defaultGroups.add("supergroup");
    fakeUser2GroupsMap=new HashMap<String,String[]>();
  }
  @Override public List<String> getGroups(  String user) throws IOException {
    boolean found=false;
    List<String> l=new ArrayList<String>();
    for (    String u : fakeUser2GroupsMap.keySet()) {
      if (user.equals(u)) {
        found=true;
        for (        String gr : fakeUser2GroupsMap.get(u)) {
          l.add(gr);
        }
      }
    }
    if (!found) {
      l=super.getGroups(user);
      if (l.size() == 0) {
        System.out.println("failed to get real group for " + user + "; using default");
        return defaultGroups;
      }
    }
    return l;
  }
}
