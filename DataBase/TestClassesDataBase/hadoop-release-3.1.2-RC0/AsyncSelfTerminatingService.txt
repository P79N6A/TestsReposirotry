/** 
 * Service that terminates itself after starting and sleeping for a while
 */
private static class AsyncSelfTerminatingService extends AbstractService implements Runnable {
  final int timeout;
  private AsyncSelfTerminatingService(  int timeout){
    super("AsyncSelfTerminatingService");
    this.timeout=timeout;
  }
  @Override protected void serviceStart() throws Exception {
    new Thread(this).start();
    super.serviceStart();
  }
  @Override public void run(){
    try {
      Thread.sleep(timeout);
    }
 catch (    InterruptedException ignored) {
    }
    this.stop();
  }
}
