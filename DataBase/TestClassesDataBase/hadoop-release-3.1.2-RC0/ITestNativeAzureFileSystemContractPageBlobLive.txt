/** 
 * Run the  {@link FileSystemContractBaseTest} test suite against azurestorage, after switching the FS using page blobs everywhere.
 */
public class ITestNativeAzureFileSystemContractPageBlobLive extends FileSystemContractBaseTest {
  private AzureBlobStorageTestAccount testAccount;
  private Path basePath;
  @Rule public TestName methodName=new TestName();
  private void nameThread(){
    Thread.currentThread().setName("JUnit-" + methodName.getMethodName());
  }
  private AzureBlobStorageTestAccount createTestAccount() throws Exception {
    Configuration conf=new Configuration();
    conf.set(AzureNativeFileSystemStore.KEY_PAGE_BLOB_DIRECTORIES,"/");
    conf.set(AzureNativeFileSystemStore.KEY_ATOMIC_RENAME_DIRECTORIES,"/");
    return AzureBlobStorageTestAccount.create(conf);
  }
  @Before public void setUp() throws Exception {
    testAccount=createTestAccount();
    assumeNotNull(testAccount);
    fs=testAccount.getFileSystem();
    basePath=AzureTestUtils.pathForTests(fs,"filesystemcontractpageblob");
  }
  @Override public void tearDown() throws Exception {
    testAccount=AzureTestUtils.cleanup(testAccount);
    fs=null;
  }
  protected int getGlobalTimeout(){
    return AzureTestConstants.AZURE_TEST_TIMEOUT;
  }
  @Override public Path getTestBaseDir(){
    return basePath;
  }
  /** 
 * The following tests are failing on Azure and the Azure  file system code needs to be modified to make them pass. A separate work item has been opened for this.
 */
  @Ignore @Test public void testMoveFileUnderParent() throws Throwable {
  }
  @Ignore @Test public void testRenameFileToSelf() throws Throwable {
  }
  @Ignore @Test public void testRenameChildDirForbidden() throws Exception {
  }
  @Ignore @Test public void testMoveDirUnderParent() throws Throwable {
  }
  @Ignore @Test public void testRenameDirToSelf() throws Throwable {
  }
}
