private static class HsControllerForTest extends HsController {
  static private Map<String,String> params=new HashMap<String,String>();
  private Class<?> clazz;
  ByteArrayOutputStream data=new ByteArrayOutputStream();
  public void set(  String name,  String value){
    params.put(name,value);
  }
  public String get(  String key,  String defaultValue){
    String value=params.get(key);
    return value == null ? defaultValue : value;
  }
  HsControllerForTest(  App app,  Configuration configuration,  RequestContext ctx){
    super(app,configuration,ctx);
  }
  @Override public HttpServletRequest request(){
    HttpServletRequest result=mock(HttpServletRequest.class);
    when(result.getRemoteUser()).thenReturn("User");
    return result;
  }
  public HttpServletResponse response(){
    HttpServletResponse result=mock(HttpServletResponse.class);
    try {
      when(result.getWriter()).thenReturn(new PrintWriter(data));
    }
 catch (    IOException ignored) {
    }
    return result;
  }
  protected void render(  Class<? extends View> cls){
    clazz=cls;
  }
  public Class<?> getClazz(){
    return clazz;
  }
}
