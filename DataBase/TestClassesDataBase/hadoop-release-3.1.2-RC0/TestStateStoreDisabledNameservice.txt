/** 
 * Test the basic  {@link StateStoreService}{@link DisabledNameserviceStore} functionality.
 */
public class TestStateStoreDisabledNameservice extends TestStateStoreBase {
  private static DisabledNameserviceStore disabledStore;
  @Before public void setup() throws IOException, InterruptedException {
    disabledStore=getStateStore().getRegisteredRecordStore(DisabledNameserviceStore.class);
    assertTrue(clearRecords(getStateStore(),DisabledNameservice.class));
  }
  @Test public void testDisableNameservice() throws IOException {
    Set<String> disabledNameservices=disabledStore.getDisabledNameservices();
    assertEquals(0,disabledNameservices.size());
    disabledStore.disableNameservice("ns0");
    disabledStore.disableNameservice("ns1");
    disabledStore.loadCache(true);
    disabledNameservices=disabledStore.getDisabledNameservices();
    assertEquals(2,disabledNameservices.size());
    assertTrue(disabledNameservices.contains("ns0") && disabledNameservices.contains("ns1"));
    disabledStore.enableNameservice("ns0");
    disabledStore.loadCache(true);
    disabledNameservices=disabledStore.getDisabledNameservices();
    assertEquals(1,disabledNameservices.size());
    assertTrue(disabledNameservices.contains("ns1"));
  }
}
