private static class RestrictedAllocatingByteBufferPool implements ByteBufferPool {
  private final boolean direct;
  RestrictedAllocatingByteBufferPool(  boolean direct){
    this.direct=direct;
  }
  @Override public ByteBuffer getBuffer(  boolean direct,  int length){
    Preconditions.checkArgument(this.direct == direct);
    return direct ? ByteBuffer.allocateDirect(length) : ByteBuffer.allocate(length);
  }
  @Override public void putBuffer(  ByteBuffer buffer){
  }
}
