public static class TestProtoBufRpcServerHandoffServer implements TestProtoBufRpcServerHandoffProtocol {
  @Override public TestProtos.SleepResponseProto2 sleep(  RpcController controller,  TestProtos.SleepRequestProto2 request) throws ServiceException {
    final long startTime=System.currentTimeMillis();
    final ProtobufRpcEngineCallback callback=ProtobufRpcEngine.Server.registerForDeferredResponse();
    final long sleepTime=request.getSleepTime();
    new Thread(){
      @Override public void run(){
        try {
          Thread.sleep(sleepTime);
        }
 catch (        InterruptedException e) {
          throw new RuntimeException(e);
        }
        callback.setResponse(TestProtos.SleepResponseProto2.newBuilder().setReceiveTime(startTime).setResponseTime(System.currentTimeMillis()).build());
      }
    }
.start();
    return null;
  }
}
