private static class SynchronizedUnreliableImplementation extends UnreliableImplementation {
  private CountDownLatch methodLatch;
  public SynchronizedUnreliableImplementation(  String identifier,  TypeOfExceptionToFailWith exceptionToFailWith,  int threadCount){
    super(identifier,exceptionToFailWith);
    methodLatch=new CountDownLatch(threadCount);
  }
  @Override public String failsIfIdentifierDoesntMatch(  String identifier) throws UnreliableException, StandbyException, IOException {
    methodLatch.countDown();
    try {
      methodLatch.await();
    }
 catch (    InterruptedException e) {
      throw new RuntimeException(e);
    }
    return super.failsIfIdentifierDoesntMatch(identifier);
  }
}
