public static class SpyDispatcher extends AsyncDispatcher {
  public static BlockingQueue<Event> eventQueue=new LinkedBlockingQueue<>();
public static class SpyRMAppEventHandler implements EventHandler<Event> {
    public void handle(    Event event){
      eventQueue.add(event);
    }
  }
  @Override protected void dispatch(  Event event){
    eventQueue.add(event);
  }
  @Override public EventHandler<Event> getEventHandler(){
    return rmAppEventEventHandler;
  }
  void spyOnNextEvent(  Event expectedEvent,  long timeout) throws InterruptedException {
    Event event=eventQueue.poll(timeout,TimeUnit.MILLISECONDS);
    assertEquals(expectedEvent.getType(),event.getType());
    assertEquals(expectedEvent.getClass(),event.getClass());
  }
}
