/** 
 * Tests for  {@link CassandraReactiveHealthIndicatorAutoConfiguration}.
 * @author Artsiom Yudovin
 * @author Stephane Nicoll
 */
public class CassandraReactiveHealthIndicatorAutoConfigurationTests {
  private ApplicationContextRunner contextRunner=new ApplicationContextRunner().withUserConfiguration(CassandraMockConfiguration.class).withConfiguration(AutoConfigurations.of(CassandraReactiveHealthIndicatorAutoConfiguration.class,HealthIndicatorAutoConfiguration.class));
  @Test public void runShouldCreateIndicator(){
    this.contextRunner.run((context) -> assertThat(context).hasSingleBean(CassandraReactiveHealthIndicator.class).doesNotHaveBean(CassandraHealthIndicator.class).doesNotHaveBean(ApplicationHealthIndicator.class));
  }
  @Test public void runWhenDisabledShouldNotCreateIndicator(){
    this.contextRunner.withPropertyValues("management.health.cassandra.enabled:false").run((context) -> assertThat(context).doesNotHaveBean(CassandraReactiveHealthIndicator.class).hasSingleBean(ApplicationHealthIndicator.class));
  }
@Configuration protected static class CassandraMockConfiguration {
    @Bean public ReactiveCassandraOperations cassandraOperations(){
      return mock(ReactiveCassandraOperations.class);
    }
  }
}
