@EnableBatchProcessing protected static class NamedJobConfigurationWithRegisteredJob {
  @Autowired private JobRegistry jobRegistry;
  @Autowired private JobRepository jobRepository;
  @Bean public JobRegistryBeanPostProcessor registryProcessor(){
    JobRegistryBeanPostProcessor processor=new JobRegistryBeanPostProcessor();
    processor.setJobRegistry(this.jobRegistry);
    return processor;
  }
  @Bean public Job discreteJob(){
    AbstractJob job=new AbstractJob("discreteRegisteredJob"){
      @Override public Collection<String> getStepNames(){
        return Collections.emptySet();
      }
      @Override public Step getStep(      String stepName){
        return null;
      }
      @Override protected void doExecute(      JobExecution execution){
        execution.setStatus(BatchStatus.COMPLETED);
      }
    }
;
    job.setJobRepository(this.jobRepository);
    return job;
  }
}
