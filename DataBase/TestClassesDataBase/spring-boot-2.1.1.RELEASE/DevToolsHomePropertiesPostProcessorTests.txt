/** 
 * Tests for  {@link DevToolsHomePropertiesPostProcessor}.
 * @author Phillip Webb
 * @author Andy Wilkinson
 */
public class DevToolsHomePropertiesPostProcessorTests {
  @Rule public TemporaryFolder temp=new TemporaryFolder();
  private File home;
  @Before public void setup() throws IOException {
    this.home=this.temp.newFolder();
  }
  @Test public void loadsHomeProperties() throws Exception {
    Properties properties=new Properties();
    properties.put("abc","def");
    OutputStream out=new FileOutputStream(new File(this.home,".spring-boot-devtools.properties"));
    properties.store(out,null);
    out.close();
    ConfigurableEnvironment environment=new MockEnvironment();
    MockDevToolHomePropertiesPostProcessor postProcessor=new MockDevToolHomePropertiesPostProcessor();
    postProcessor.postProcessEnvironment(environment,null);
    assertThat(environment.getProperty("abc")).isEqualTo("def");
  }
  @Test public void ignoresMissingHomeProperties(){
    ConfigurableEnvironment environment=new MockEnvironment();
    MockDevToolHomePropertiesPostProcessor postProcessor=new MockDevToolHomePropertiesPostProcessor();
    postProcessor.postProcessEnvironment(environment,null);
    assertThat(environment.getProperty("abc")).isNull();
  }
private class MockDevToolHomePropertiesPostProcessor extends DevToolsHomePropertiesPostProcessor {
    @Override protected File getHomeFolder(){
      return DevToolsHomePropertiesPostProcessorTests.this.home;
    }
  }
}
