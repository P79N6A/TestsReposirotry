/** 
 * Tests for  {@link SpringBootTest} with {@link AutoConfigureWebTestClient} (i.e. fullintegration test).
 * @author Stephane Nicoll
 */
@RunWith(SpringRunner.class) @SpringBootTest(properties="spring.main.web-application-type=reactive",classes={WebTestClientSpringBootTestIntegrationTests.TestConfiguration.class,ExampleWebFluxApplication.class}) @AutoConfigureWebTestClient public class WebTestClientSpringBootTestIntegrationTests {
  @Autowired private WebTestClient webClient;
  @Autowired private ApplicationContext applicationContext;
  @Test public void shouldFindController1(){
    this.webClient.get().uri("/one").exchange().expectStatus().isOk().expectBody(String.class).isEqualTo("one");
  }
  @Test public void shouldFindController2(){
    this.webClient.get().uri("/two").exchange().expectStatus().isOk().expectBody(String.class).isEqualTo("two");
  }
  @Test public void shouldHaveRealService(){
    assertThat(this.applicationContext.getBeansOfType(ExampleRealService.class)).hasSize(1);
  }
@Configuration static class TestConfiguration {
    @Bean public SecurityWebFilterChain springSecurityFilterChain(    ServerHttpSecurity http){
      return http.authorizeExchange().anyExchange().permitAll().and().build();
    }
  }
}
