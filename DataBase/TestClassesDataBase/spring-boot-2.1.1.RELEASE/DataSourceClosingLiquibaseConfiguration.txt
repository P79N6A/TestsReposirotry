@Configuration static class DataSourceClosingLiquibaseConfiguration {
  @Bean public SpringLiquibase liquibase(){
    return new DataSourceClosingSpringLiquibase(){
      private boolean propertiesSet=false;
      @Override public void setCloseDataSourceOnceMigrated(      boolean closeDataSourceOnceMigrated){
        if (this.propertiesSet) {
          throw new IllegalStateException("setCloseDataSourceOnceMigrated " + "invoked after afterPropertiesSet");
        }
        super.setCloseDataSourceOnceMigrated(closeDataSourceOnceMigrated);
      }
      @Override public void afterPropertiesSet() throws LiquibaseException {
        this.propertiesSet=true;
      }
    }
;
  }
}
