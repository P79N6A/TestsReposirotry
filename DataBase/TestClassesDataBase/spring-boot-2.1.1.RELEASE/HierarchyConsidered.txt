@Configuration @ConditionalOnMissingBean(name="foo") protected static class HierarchyConsidered {
  @Bean public String bar(){
    return "bar";
  }
}
