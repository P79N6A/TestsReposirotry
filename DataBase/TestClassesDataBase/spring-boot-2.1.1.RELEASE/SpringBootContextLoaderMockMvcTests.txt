/** 
 * Tests for  {@link WebAppConfiguration} integration.
 * @author Stephane Nicoll
 */
@RunWith(SpringRunner.class) @DirtiesContext @ContextConfiguration(loader=SpringBootContextLoader.class) @WebAppConfiguration public class SpringBootContextLoaderMockMvcTests {
  @Autowired private WebApplicationContext context;
  @Autowired private ServletContext servletContext;
  private MockMvc mvc;
  @Before public void setUp(){
    this.mvc=MockMvcBuilders.webAppContextSetup(this.context).build();
  }
  @Test public void testMockHttpEndpoint() throws Exception {
    this.mvc.perform(get("/")).andExpect(status().isOk()).andExpect(content().string("Hello World"));
  }
  @Test public void validateWebApplicationContextIsSet(){
    assertThat(this.context).isSameAs(WebApplicationContextUtils.getWebApplicationContext(this.servletContext));
  }
@Configuration @EnableWebMvc @RestController protected static class Config {
    @RequestMapping("/") public String home(){
      return "Hello World";
    }
  }
}
