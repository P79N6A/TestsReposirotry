/** 
 * Tests for  {@link SpringBootTest} configured with {@link WebEnvironment#DEFINED_PORT}.
 * @author Phillip Webb
 * @author Andy Wilkinson
 */
@RunWith(SpringRunner.class) @DirtiesContext @SpringBootTest(webEnvironment=WebEnvironment.DEFINED_PORT,properties={"server.port=0","value=123"}) @ContextHierarchy({@ContextConfiguration(classes=ParentConfiguration.class),@ContextConfiguration(classes=ChildConfiguration.class)}) public class SpringBootTestWebEnvironmentContextHierarchyTests {
  @Autowired private ApplicationContext context;
  @Test public void testShouldOnlyStartSingleServer(){
    ApplicationContext parent=this.context.getParent();
    assertThat(this.context).isInstanceOf(WebApplicationContext.class);
    assertThat(parent).isNotInstanceOf(WebApplicationContext.class);
  }
@Configuration protected static class ParentConfiguration extends AbstractConfig {
  }
@Configuration @EnableWebMvc @RestController protected static class ChildConfiguration extends AbstractConfig {
  }
}
