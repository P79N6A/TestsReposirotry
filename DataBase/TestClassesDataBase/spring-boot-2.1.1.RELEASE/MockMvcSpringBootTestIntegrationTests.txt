/** 
 * Tests for  {@link SpringBootTest} with {@link AutoConfigureMockMvc} (i.e. fullintegration test).
 * @author Phillip Webb
 */
@RunWith(SpringRunner.class) @SpringBootTest @AutoConfigureMockMvc(print=MockMvcPrint.SYSTEM_ERR,printOnlyOnFailure=false) @WithMockUser(username="user",password="secret") public class MockMvcSpringBootTestIntegrationTests {
  @Rule public OutputCapture output=new OutputCapture();
  @MockBean private ExampleMockableService service;
  @Autowired private ApplicationContext applicationContext;
  @Autowired private MockMvc mvc;
  @Test public void shouldFindController1() throws Exception {
    this.mvc.perform(get("/one")).andExpect(content().string("one")).andExpect(status().isOk());
    assertThat(this.output.toString()).contains("Request URI = /one");
  }
  @Test public void shouldFindController2() throws Exception {
    this.mvc.perform(get("/two")).andExpect(content().string("hellotwo")).andExpect(status().isOk());
  }
  @Test public void shouldFindControllerAdvice() throws Exception {
    this.mvc.perform(get("/error")).andExpect(content().string("recovered")).andExpect(status().isOk());
  }
  @Test public void shouldHaveRealService(){
    assertThat(this.applicationContext.getBean(ExampleRealService.class)).isNotNull();
  }
}
