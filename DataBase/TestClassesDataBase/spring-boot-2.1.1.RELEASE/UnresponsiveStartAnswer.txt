private static final class UnresponsiveStartAnswer implements Answer<Void> {
  private boolean connectionClosed=false;
  private final Object monitor=new Object();
  @Override public Void answer(  InvocationOnMock invocation) throws Throwable {
synchronized (this.monitor) {
      while (!this.connectionClosed) {
        this.monitor.wait();
      }
    }
    throw new JMSException("Connection closed");
  }
  private void connectionClosed(){
synchronized (this.monitor) {
      this.connectionClosed=true;
      this.monitor.notifyAll();
    }
  }
}
