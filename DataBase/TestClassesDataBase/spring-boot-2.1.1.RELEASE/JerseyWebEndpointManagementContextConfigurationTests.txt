/** 
 * Tests for  {@link JerseyWebEndpointManagementContextConfiguration}.
 * @author Michael Simons
 */
public class JerseyWebEndpointManagementContextConfigurationTests {
  private final WebApplicationContextRunner runner=new WebApplicationContextRunner().withConfiguration(AutoConfigurations.of(WebEndpointAutoConfiguration.class,JerseyWebEndpointManagementContextConfiguration.class));
  @Test public void resourceConfigIsAutoConfiguredWhenNeeded(){
    this.runner.withUserConfiguration(WebEndpointsSupplierConfig.class).run((context) -> assertThat(context).hasSingleBean(ResourceConfig.class));
  }
  @Test public void existingResourceConfigIsUsedWhenAvailable(){
    this.runner.withUserConfiguration(WebEndpointsSupplierConfig.class,ConfigWithResourceConfig.class).run((context) -> {
      assertThat(context).hasSingleBean(ResourceConfig.class);
      assertThat(context).hasBean("customResourceConfig");
    }
);
  }
@Configuration static class WebEndpointsSupplierConfig {
    @Bean public WebEndpointsSupplier webEndpointsSupplier(){
      return () -> Collections.emptyList();
    }
  }
@Configuration static class ConfigWithResourceConfig {
    @Bean public ResourceConfig customResourceConfig(){
      return new ResourceConfig();
    }
  }
}
