@org.springframework.context.annotation.Configuration static class CustomValidatorConfiguration {
  CustomValidatorConfiguration(  SomeService someService){
  }
  @Bean Validator customValidator(){
    return new CustomValidatorBean();
  }
  @Bean static TestBeanPostProcessor testBeanPostProcessor(){
    return new TestBeanPostProcessor();
  }
@Configuration static class SomeServiceConfiguration {
    @Bean public SomeService someService(){
      return new SomeService();
    }
  }
static class SomeService {
  }
static class TestBeanPostProcessor implements BeanPostProcessor {
    private Set<String> postProcessed=new HashSet<>();
    @Override public Object postProcessAfterInitialization(    Object bean,    String name){
      this.postProcessed.add(name);
      return bean;
    }
    @Override public Object postProcessBeforeInitialization(    Object bean,    String name){
      return bean;
    }
  }
}
