@TestConfiguration static class Ports implements ApplicationListener<WebServerInitializedEvent> {
  private int httpPort;
  private int httpsPort;
  @Override public void onApplicationEvent(  WebServerInitializedEvent event){
    Service service=((TomcatWebServer)event.getWebServer()).getTomcat().getService();
    for (    Connector connector : service.findConnectors()) {
      if (connector.getSecure()) {
        this.httpsPort=connector.getLocalPort();
      }
 else {
        this.httpPort=connector.getLocalPort();
      }
    }
  }
  int getHttpPort(){
    return this.httpPort;
  }
  int getHttpsPort(){
    return this.httpsPort;
  }
}
