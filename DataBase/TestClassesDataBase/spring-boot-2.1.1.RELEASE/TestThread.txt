private static class TestThread extends Thread {
  private final Runnable runnable;
  private Exception exception;
  private MainMethod mainMethod;
  TestThread(  Runnable runnable){
    this.runnable=runnable;
  }
  public MainMethod test() throws InterruptedException {
    start();
    join();
    if (this.exception != null) {
      ReflectionUtils.rethrowRuntimeException(this.exception);
    }
    return this.mainMethod;
  }
  @Override public void run(){
    try {
      this.runnable.run();
      this.mainMethod=MainMethodTests.mainMethod.get();
    }
 catch (    Exception ex) {
      this.exception=ex;
    }
  }
}
