@Configuration @EnableWebSocket @EnableConfigurationProperties @EnableWebSocketMessageBroker @ImportAutoConfiguration({JacksonAutoConfiguration.class,ServletWebServerFactoryAutoConfiguration.class,WebSocketMessagingAutoConfiguration.class,DispatcherServletAutoConfiguration.class}) static class WebSocketMessagingConfiguration implements WebSocketMessageBrokerConfigurer {
  @Override public void registerStompEndpoints(  StompEndpointRegistry registry){
    registry.addEndpoint("/messaging").withSockJS();
  }
  @Override public void configureMessageBroker(  MessageBrokerRegistry registry){
    registry.setApplicationDestinationPrefixes("/app");
  }
  @Bean public MessagingController messagingController(){
    return new MessagingController();
  }
  @Bean public TomcatServletWebServerFactory tomcat(){
    return new TomcatServletWebServerFactory(0);
  }
  @Bean public TomcatWebSocketServletWebServerCustomizer tomcatCustomizer(){
    return new TomcatWebSocketServletWebServerCustomizer();
  }
}
