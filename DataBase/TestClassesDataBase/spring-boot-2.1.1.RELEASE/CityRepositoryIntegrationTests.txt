/** 
 * Integration tests for  {@link CityRepository}.
 * @author Oliver Gierke
 * @author Andy Wilkinson
 */
@RunWith(SpringRunner.class) @SpringBootTest public class CityRepositoryIntegrationTests {
  @Autowired CityRepository repository;
  @Test public void findsFirstPageOfCities(){
    Page<City> cities=this.repository.findAll(PageRequest.of(0,10));
    assertThat(cities.getTotalElements()).isGreaterThan(20L);
  }
  @Test public void findByNameAndCountry(){
    City city=this.repository.findByNameAndCountryAllIgnoringCase("Melbourne","Australia");
    assertThat(city).isNotNull();
    assertThat(city.getName()).isEqualTo("Melbourne");
  }
  @Test public void findContaining(){
    Page<City> cities=this.repository.findByNameContainingAndCountryContainingAllIgnoringCase("","UK",PageRequest.of(0,10));
    assertThat(cities.getTotalElements()).isEqualTo(3L);
  }
}
