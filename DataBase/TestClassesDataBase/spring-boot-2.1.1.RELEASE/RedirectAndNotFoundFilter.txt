static class RedirectAndNotFoundFilter extends OncePerRequestFilter {
  static final String TEST_MISBEHAVE_HEADER="x-test-misbehave-status";
  @Override protected void doFilterInternal(  HttpServletRequest request,  HttpServletResponse response,  FilterChain filterChain) throws ServletException, IOException {
    String misbehave=request.getHeader(TEST_MISBEHAVE_HEADER);
    if (misbehave != null) {
      response.setStatus(Integer.parseInt(misbehave));
    }
 else {
      filterChain.doFilter(request,response);
    }
  }
}
