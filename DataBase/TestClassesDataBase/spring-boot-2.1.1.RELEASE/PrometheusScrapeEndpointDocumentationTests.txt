/** 
 * Tests for generating documentation describing the  {@link PrometheusScrapeEndpoint}.
 * @author Andy Wilkinson
 */
public class PrometheusScrapeEndpointDocumentationTests extends MockMvcEndpointDocumentationTests {
  @Test public void prometheus() throws Exception {
    this.mockMvc.perform(get("/actuator/prometheus")).andExpect(status().isOk()).andDo(document("prometheus"));
  }
@Configuration @Import(BaseDocumentationConfiguration.class) static class TestConfiguration {
    @Bean public PrometheusScrapeEndpoint endpoint(){
      CollectorRegistry collectorRegistry=new CollectorRegistry(true);
      PrometheusMeterRegistry meterRegistry=new PrometheusMeterRegistry(new PrometheusConfig(){
        @Override public String get(        String key){
          return null;
        }
      }
,collectorRegistry,Clock.SYSTEM);
      new JvmMemoryMetrics().bindTo(meterRegistry);
      return new PrometheusScrapeEndpoint(collectorRegistry);
    }
  }
}
