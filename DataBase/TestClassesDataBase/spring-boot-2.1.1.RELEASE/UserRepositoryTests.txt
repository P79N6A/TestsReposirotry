/** 
 * Tests for  {@link UserRepository}.
 * @author Phillip Webb
 */
@RunWith(SpringRunner.class) @DataJpaTest public class UserRepositoryTests {
  private static final VehicleIdentificationNumber VIN=new VehicleIdentificationNumber("00000000000000000");
  @Autowired private TestEntityManager entityManager;
  @Autowired private UserRepository repository;
  @Test public void findByUsernameShouldReturnUser(){
    this.entityManager.persist(new User("sboot",VIN));
    User user=this.repository.findByUsername("sboot");
    assertThat(user.getUsername()).isEqualTo("sboot");
    assertThat(user.getVin()).isEqualTo(VIN);
  }
  @Test public void findByUsernameWhenNoUserShouldReturnNull(){
    this.entityManager.persist(new User("sboot",VIN));
    User user=this.repository.findByUsername("mmouse");
    assertThat(user).isNull();
  }
}
