/** 
 * Tests for  {@link YamlPropertySourceLoader} when snakeyaml is not available.
 * @author Madhura Bhave
 */
@RunWith(ModifiedClassPathRunner.class) @ClassPathExclusions("snakeyaml-*.jar") public class NoSnakeYamlPropertySourceLoaderTests {
  private YamlPropertySourceLoader loader=new YamlPropertySourceLoader();
  @Test public void load() throws Exception {
    ByteArrayResource resource=new ByteArrayResource("foo:\n  bar: spam".getBytes());
    assertThatIllegalStateException().isThrownBy(() -> this.loader.load("resource",resource)).withMessageContaining("Attempted to load resource but snakeyaml was not found on the classpath");
  }
}
