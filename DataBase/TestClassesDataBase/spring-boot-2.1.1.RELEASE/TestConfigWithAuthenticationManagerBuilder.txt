@Configuration @Import(TestSecurityConfiguration.class) protected static class TestConfigWithAuthenticationManagerBuilder {
  @Bean public WebSecurityConfigurerAdapter webSecurityConfigurerAdapter(){
    return new WebSecurityConfigurerAdapter(){
      @Override protected void configure(      AuthenticationManagerBuilder auth) throws Exception {
        auth.inMemoryAuthentication().withUser("hero").password("{noop}hero").roles("HERO","USER").and().withUser("user").password("{noop}user").roles("USER");
      }
    }
;
  }
}
