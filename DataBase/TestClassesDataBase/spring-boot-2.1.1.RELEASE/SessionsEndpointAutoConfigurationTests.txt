/** 
 * Tests for  {@link SessionsEndpointAutoConfiguration}.
 * @author Vedran Pavic
 */
public class SessionsEndpointAutoConfigurationTests {
  private final ApplicationContextRunner contextRunner=new ApplicationContextRunner().withConfiguration(AutoConfigurations.of(SessionsEndpointAutoConfiguration.class)).withUserConfiguration(SessionConfiguration.class);
  @Test public void runShouldHaveEndpointBean(){
    this.contextRunner.run((context) -> assertThat(context).hasSingleBean(SessionsEndpoint.class));
  }
  @Test public void runWhenEnabledPropertyIsFalseShouldNotHaveEndpointBean(){
    this.contextRunner.withPropertyValues("management.endpoint.sessions.enabled:false").run((context) -> assertThat(context).doesNotHaveBean(SessionsEndpoint.class));
  }
@Configuration static class SessionConfiguration {
    @Bean public FindByIndexNameSessionRepository<?> sessionRepository(){
      return mock(FindByIndexNameSessionRepository.class);
    }
  }
}
