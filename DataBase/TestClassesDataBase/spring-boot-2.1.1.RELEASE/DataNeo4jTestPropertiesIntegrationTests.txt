/** 
 * Tests for the  {@link DataNeo4jTest#properties properties} attribute of{@link DataNeo4jTest @DataNeo4jTest}.
 * @author Artsiom Yudovin
 */
@RunWith(SpringRunner.class) @ContextConfiguration(initializers=DataNeo4jTestPropertiesIntegrationTests.Initializer.class) @DataNeo4jTest(properties="spring.profiles.active=test") public class DataNeo4jTestPropertiesIntegrationTests {
  @ClassRule public static Neo4jContainer neo4j=new Neo4jContainer();
  @Autowired private Environment environment;
  @Test public void environmentWithNewProfile(){
    assertThat(this.environment.getActiveProfiles()).containsExactly("test");
  }
static class Initializer implements ApplicationContextInitializer<ConfigurableApplicationContext> {
    @Override public void initialize(    ConfigurableApplicationContext configurableApplicationContext){
      TestPropertyValues.of("spring.data.neo4j.uri=bolt://localhost:" + neo4j.getMappedPort()).applyTo(configurableApplicationContext.getEnvironment());
    }
  }
}
