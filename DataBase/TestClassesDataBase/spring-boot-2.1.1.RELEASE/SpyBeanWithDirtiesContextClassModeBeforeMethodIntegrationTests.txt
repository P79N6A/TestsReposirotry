/** 
 * Integration tests for using  {@link SpyBean} with {@link DirtiesContext} and{@link ClassMode#BEFORE_EACH_TEST_METHOD}.
 * @author Andy Wilkinson
 */
@RunWith(SpringRunner.class) @DirtiesContext(classMode=ClassMode.BEFORE_EACH_TEST_METHOD) public class SpyBeanWithDirtiesContextClassModeBeforeMethodIntegrationTests {
  @SpyBean private SimpleExampleService exampleService;
  @Autowired private ExampleServiceCaller caller;
  @Test public void testSpying() throws Exception {
    this.caller.sayGreeting();
    verify(this.exampleService).greeting();
  }
@Configuration @Import(ExampleServiceCaller.class) static class Config {
  }
}
