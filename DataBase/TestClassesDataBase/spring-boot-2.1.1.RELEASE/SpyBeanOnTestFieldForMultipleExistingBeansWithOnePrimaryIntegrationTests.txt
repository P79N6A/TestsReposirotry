/** 
 * Test  {@link SpyBean} on a test class field can be used to inject a spy instance whenthere are multiple candidates and one is primary.
 * @author Phillip Webb
 */
@RunWith(SpringRunner.class) public class SpyBeanOnTestFieldForMultipleExistingBeansWithOnePrimaryIntegrationTests {
  @SpyBean private SimpleExampleStringGenericService spy;
  @Autowired private ExampleGenericStringServiceCaller caller;
  @Test public void testSpying(){
    assertThat(this.caller.sayGreeting()).isEqualTo("I say two");
    assertThat(Mockito.mockingDetails(this.spy).getMockCreationSettings().getMockName().toString()).isEqualTo("two");
    verify(this.spy).greeting();
  }
@Configuration @Import(ExampleGenericStringServiceCaller.class) static class Config {
    @Bean public SimpleExampleStringGenericService one(){
      return new SimpleExampleStringGenericService("one");
    }
    @Bean @Primary public SimpleExampleStringGenericService two(){
      return new SimpleExampleStringGenericService("two");
    }
  }
}
