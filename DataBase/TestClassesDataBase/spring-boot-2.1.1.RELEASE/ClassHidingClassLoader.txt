private final class ClassHidingClassLoader extends URLClassLoader {
  private final List<Class<?>> hiddenClasses;
  private ClassHidingClassLoader(  Class<?>... hiddenClasses){
    super(new URL[0],LiquibaseServiceLocatorApplicationListenerTests.class.getClassLoader());
    this.hiddenClasses=Arrays.asList(hiddenClasses);
  }
  @Override public Class<?> loadClass(  String name) throws ClassNotFoundException {
    if (isHidden(name)) {
      throw new ClassNotFoundException();
    }
    return super.loadClass(name);
  }
  private boolean isHidden(  String name){
    for (    Class<?> hiddenClass : this.hiddenClasses) {
      if (hiddenClass.getName().equals(name)) {
        return true;
      }
    }
    return false;
  }
}
