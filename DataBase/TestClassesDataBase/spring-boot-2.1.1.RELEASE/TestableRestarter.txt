private static class TestableRestarter extends Restarter {
  private ClassLoader relaunchClassLoader;
  TestableRestarter(){
    this(Thread.currentThread(),new String[]{},false,new MockRestartInitializer());
  }
  protected TestableRestarter(  Thread thread,  String[] args,  boolean forceReferenceCleanup,  RestartInitializer initializer){
    super(thread,args,forceReferenceCleanup,initializer);
  }
  @Override public void restart(  FailureHandler failureHandler){
    try {
      stop();
      start(failureHandler);
    }
 catch (    Exception ex) {
      throw new IllegalStateException(ex);
    }
  }
  @Override protected Throwable relaunch(  ClassLoader classLoader){
    this.relaunchClassLoader=classLoader;
    return null;
  }
  @Override protected void stop(){
  }
  public ClassLoader getRelaunchClassLoader(){
    return this.relaunchClassLoader;
  }
}
