final class HidePackagesClassLoader extends URLClassLoader {
  private final String[] hiddenPackages;
  HidePackagesClassLoader(  String... hiddenPackages){
    super(new URL[0],HidePackagesClassLoader.class.getClassLoader());
    this.hiddenPackages=hiddenPackages;
  }
  @Override protected Class<?> loadClass(  String name,  boolean resolve) throws ClassNotFoundException {
    if (Arrays.stream(this.hiddenPackages).anyMatch(name::startsWith)) {
      throw new ClassNotFoundException();
    }
    return super.loadClass(name,resolve);
  }
}
