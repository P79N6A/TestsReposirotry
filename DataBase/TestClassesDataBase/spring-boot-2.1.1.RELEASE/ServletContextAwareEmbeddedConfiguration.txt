@Configuration @EnableWebMvc public static class ServletContextAwareEmbeddedConfiguration implements ServletContextAware {
  private ServletContext servletContext;
  @Bean public ServletWebServerFactory webServerFactory(){
    return new MockServletWebServerFactory();
  }
  @Bean public Servlet servlet(){
    return new MockServlet();
  }
  @Override public void setServletContext(  ServletContext servletContext){
    this.servletContext=servletContext;
  }
  public ServletContext getServletContext(){
    return this.servletContext;
  }
}
