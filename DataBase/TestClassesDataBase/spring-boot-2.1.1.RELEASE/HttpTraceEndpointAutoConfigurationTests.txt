/** 
 * Tests for  {@link HttpTraceEndpointAutoConfiguration}.
 * @author Phillip Webb
 */
public class HttpTraceEndpointAutoConfigurationTests {
  private final WebApplicationContextRunner contextRunner=new WebApplicationContextRunner().withConfiguration(AutoConfigurations.of(HttpTraceAutoConfiguration.class,HttpTraceEndpointAutoConfiguration.class));
  @Test public void runShouldHaveEndpointBean(){
    this.contextRunner.run((context) -> assertThat(context).hasSingleBean(HttpTraceEndpoint.class));
  }
  @Test public void runWhenEnabledPropertyIsFalseShouldNotHaveEndpointBean(){
    this.contextRunner.withPropertyValues("management.endpoint.httptrace.enabled:false").run((context) -> assertThat(context).doesNotHaveBean(HttpTraceEndpoint.class));
  }
  @Test public void endpointBacksOffWhenRepositoryIsNotAvailable(){
    this.contextRunner.withPropertyValues("management.trace.http.enabled:false").run((context) -> assertThat(context).doesNotHaveBean(HttpTraceEndpoint.class));
  }
}
