/** 
 * Integration tests for  {@link TestRestTemplateContextCustomizer}.
 * @author Phillip Webb
 */
@RunWith(SpringRunner.class) @SpringBootTest(webEnvironment=WebEnvironment.RANDOM_PORT) @DirtiesContext public class TestRestTemplateContextCustomizerIntegrationTests {
  @Autowired private TestRestTemplate restTemplate;
  @Test public void test(){
    assertThat(this.restTemplate.getForObject("/",String.class)).contains("hello");
  }
@Configuration @Import({TestServlet.class,NoTestRestTemplateBeanChecker.class}) static class TestConfig {
    @Bean public TomcatServletWebServerFactory webServerFactory(){
      return new TomcatServletWebServerFactory(0);
    }
  }
static class TestServlet extends GenericServlet {
    @Override public void service(    ServletRequest request,    ServletResponse response) throws ServletException, IOException {
      try (PrintWriter writer=response.getWriter()){
        writer.println("hello");
      }
     }
  }
}
