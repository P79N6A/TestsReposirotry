/** 
 * Custom  {@link URLClassLoader} that modifies the class path.
 */
private static final class ModifiedClassPathClassLoader extends URLClassLoader {
  private final ClassLoader junitLoader;
  ModifiedClassPathClassLoader(  URL[] urls,  ClassLoader parent,  ClassLoader junitLoader){
    super(urls,parent);
    this.junitLoader=junitLoader;
  }
  @Override public Class<?> loadClass(  String name) throws ClassNotFoundException {
    if (name.startsWith("org.junit") || name.startsWith("org.hamcrest")) {
      return this.junitLoader.loadClass(name);
    }
    return super.loadClass(name);
  }
}
