/** 
 * Filter for class path entries.
 */
private static final class ClassPathEntryFilter {
  private final List<String> exclusions;
  private final AntPathMatcher matcher=new AntPathMatcher();
  private ClassPathEntryFilter(  Class<?> testClass) throws Exception {
    this.exclusions=new ArrayList<>();
    this.exclusions.add("log4j-*.jar");
    ClassPathExclusions exclusions=AnnotationUtils.findAnnotation(testClass,ClassPathExclusions.class);
    if (exclusions != null) {
      this.exclusions.addAll(Arrays.asList(exclusions.value()));
    }
  }
  private boolean isExcluded(  URL url) throws Exception {
    if (!"file".equals(url.getProtocol())) {
      return false;
    }
    String name=new File(url.toURI()).getName();
    for (    String exclusion : this.exclusions) {
      if (this.matcher.match(exclusion,name)) {
        return true;
      }
    }
    return false;
  }
}
