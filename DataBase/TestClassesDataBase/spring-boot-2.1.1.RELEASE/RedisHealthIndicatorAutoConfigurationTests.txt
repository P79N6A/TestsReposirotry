/** 
 * Tests for  {@link RedisHealthIndicatorAutoConfiguration}.
 * @author Phillip Webb
 */
@RunWith(ModifiedClassPathRunner.class) @ClassPathExclusions({"reactor-core*.jar","lettuce-core*.jar"}) public class RedisHealthIndicatorAutoConfigurationTests {
  private ApplicationContextRunner contextRunner=new ApplicationContextRunner().withConfiguration(AutoConfigurations.of(RedisAutoConfiguration.class,RedisHealthIndicatorAutoConfiguration.class,HealthIndicatorAutoConfiguration.class));
  @Test public void runShouldCreateIndicator(){
    this.contextRunner.run((context) -> assertThat(context).hasSingleBean(RedisHealthIndicator.class).doesNotHaveBean(RedisReactiveHealthIndicator.class).doesNotHaveBean(ApplicationHealthIndicator.class));
  }
  @Test public void runWhenDisabledShouldNotCreateIndicator(){
    this.contextRunner.withPropertyValues("management.health.redis.enabled:false").run((context) -> assertThat(context).doesNotHaveBean(RedisHealthIndicator.class).doesNotHaveBean(RedisReactiveHealthIndicator.class).hasSingleBean(ApplicationHealthIndicator.class));
  }
}
