/** 
 * Tests for  {@link Log4J2MetricsAutoConfiguration}.
 * @author Andy Wilkinson
 */
public class Log4J2MetricsAutoConfigurationTests {
  private final ApplicationContextRunner contextRunner=new ApplicationContextRunner().with(MetricsRun.simple()).withConfiguration(AutoConfigurations.of(Log4J2MetricsAutoConfiguration.class));
  @Test public void autoConfiguresLog4J2Metrics(){
    this.contextRunner.run((context) -> assertThat(context).hasSingleBean(Log4j2Metrics.class));
  }
  @Test public void allowsCustomLog4J2MetricsToBeUsed(){
    this.contextRunner.withUserConfiguration(CustomLog4J2MetricsConfiguration.class).run((context) -> assertThat(context).hasSingleBean(Log4j2Metrics.class).hasBean("customLog4J2Metrics"));
  }
@Configuration static class CustomLog4J2MetricsConfiguration {
    @Bean public Log4j2Metrics customLog4J2Metrics(){
      return new Log4j2Metrics();
    }
  }
}
