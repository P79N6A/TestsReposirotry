/** 
 * Tests for  {@link JerseyManagementChildContextConfiguration}.
 * @author Andy Wilkinson
 */
@RunWith(ModifiedClassPathRunner.class) @ClassPathExclusions("spring-webmvc-*") public class JerseyManagementChildContextConfigurationTests {
  private final WebApplicationContextRunner contextRunner=new WebApplicationContextRunner().withUserConfiguration(JerseyManagementChildContextConfiguration.class);
  @Test public void resourceConfigIsCustomizedWithResourceConfigCustomizerBean(){
    this.contextRunner.withUserConfiguration(CustomizerConfiguration.class).run((context) -> {
      assertThat(context).hasSingleBean(ResourceConfig.class);
      ResourceConfig config=context.getBean(ResourceConfig.class);
      ResourceConfigCustomizer customizer=context.getBean(ResourceConfigCustomizer.class);
      verify(customizer).customize(config);
    }
);
  }
  @Test public void resourceConfigCustomizerBeanIsNotRequired(){
    this.contextRunner.run((context) -> assertThat(context).hasSingleBean(ResourceConfig.class));
  }
@Configuration static class CustomizerConfiguration {
    @Bean ResourceConfigCustomizer resourceConfigCustomizer(){
      return mock(ResourceConfigCustomizer.class);
    }
  }
}
