/** 
 * Test for application hierarchies created using  {@link SpringApplicationBuilder}.
 * @author Dave Syer
 */
public class SpringApplicationHierarchyTests {
  private ConfigurableApplicationContext context;
  @After public void after(){
    ApplicationContextTestUtils.closeAll(this.context);
  }
  @Test public void testParent(){
    SpringApplicationBuilder builder=new SpringApplicationBuilder(Child.class);
    builder.parent(Parent.class);
    this.context=builder.run("--server.port=0","--management.metrics.use-global-registry=false");
  }
  @Test public void testChild(){
    SpringApplicationBuilder builder=new SpringApplicationBuilder(Parent.class);
    builder.child(Child.class);
    this.context=builder.run("--server.port=0","--management.metrics.use-global-registry=false");
  }
@EnableAutoConfiguration(exclude={ElasticsearchDataAutoConfiguration.class,ElasticsearchRepositoriesAutoConfiguration.class,CassandraAutoConfiguration.class,CassandraDataAutoConfiguration.class,MongoDataAutoConfiguration.class,MongoReactiveDataAutoConfiguration.class,Neo4jDataAutoConfiguration.class,Neo4jRepositoriesAutoConfiguration.class,RedisAutoConfiguration.class,RedisRepositoriesAutoConfiguration.class,FlywayAutoConfiguration.class,JestAutoConfiguration.class,MetricsAutoConfiguration.class},excludeName={"org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchAutoConfiguration"}) public static class Child {
  }
@EnableAutoConfiguration(exclude={ElasticsearchDataAutoConfiguration.class,ElasticsearchRepositoriesAutoConfiguration.class,CassandraAutoConfiguration.class,CassandraDataAutoConfiguration.class,MongoDataAutoConfiguration.class,MongoReactiveDataAutoConfiguration.class,Neo4jDataAutoConfiguration.class,Neo4jRepositoriesAutoConfiguration.class,RedisAutoConfiguration.class,RedisRepositoriesAutoConfiguration.class,FlywayAutoConfiguration.class,JestAutoConfiguration.class,MetricsAutoConfiguration.class},excludeName={"org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchAutoConfiguration"}) public static class Parent {
  }
}
