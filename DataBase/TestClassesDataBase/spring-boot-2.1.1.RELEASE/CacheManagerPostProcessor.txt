private static class CacheManagerPostProcessor implements BeanPostProcessor {
  private final List<CacheManager> cacheManagers=new ArrayList<>();
  @Override public Object postProcessBeforeInitialization(  Object bean,  String beanName){
    return bean;
  }
  @Override public Object postProcessAfterInitialization(  Object bean,  String beanName){
    if (bean instanceof CacheManager) {
      this.cacheManagers.add((CacheManager)bean);
      return new SimpleCacheManager();
    }
    return bean;
  }
}
