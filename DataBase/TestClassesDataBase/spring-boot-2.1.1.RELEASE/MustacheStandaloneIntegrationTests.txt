/** 
 * Integration Tests for  {@link MustacheAutoConfiguration} outside of a web application.
 * @author Dave Syer
 */
@RunWith(SpringRunner.class) @DirtiesContext @SpringBootTest(webEnvironment=WebEnvironment.NONE,properties={"env.FOO=There","foo=World"}) public class MustacheStandaloneIntegrationTests {
  @Autowired private Mustache.Compiler compiler;
  @Test public void directCompilation(){
    assertThat(this.compiler.compile("Hello: {{world}}").execute(Collections.singletonMap("world","World"))).isEqualTo("Hello: World");
  }
  @Test public void environmentCollectorCompoundKey(){
    assertThat(this.compiler.compile("Hello: {{env.foo}}").execute(new Object())).isEqualTo("Hello: There");
  }
  @Test public void environmentCollectorCompoundKeyStandard(){
    assertThat(this.compiler.standardsMode(true).compile("Hello: {{env.foo}}").execute(new Object())).isEqualTo("Hello: There");
  }
  @Test public void environmentCollectorSimpleKey(){
    assertThat(this.compiler.compile("Hello: {{foo}}").execute(new Object())).isEqualTo("Hello: World");
  }
@Configuration @Import({MustacheAutoConfiguration.class,PropertyPlaceholderAutoConfiguration.class}) protected static class Application {
  }
}
