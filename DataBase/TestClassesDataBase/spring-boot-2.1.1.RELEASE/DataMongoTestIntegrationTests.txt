/** 
 * Sample test for  {@link DataMongoTest @DataMongoTest}
 * @author Michael Simons
 */
@RunWith(SpringRunner.class) @DataMongoTest public class DataMongoTestIntegrationTests {
  @Autowired private MongoTemplate mongoTemplate;
  @Autowired private ExampleRepository exampleRepository;
  @Autowired private ApplicationContext applicationContext;
  @Test public void testRepository(){
    ExampleDocument exampleDocument=new ExampleDocument();
    exampleDocument.setText("Look, new @DataMongoTest!");
    exampleDocument=this.exampleRepository.save(exampleDocument);
    assertThat(exampleDocument.getId()).isNotNull();
    assertThat(this.mongoTemplate.collectionExists("exampleDocuments")).isTrue();
  }
  @Test public void didNotInjectExampleService(){
    assertThatExceptionOfType(NoSuchBeanDefinitionException.class).isThrownBy(() -> this.applicationContext.getBean(ExampleService.class));
  }
}
