/** 
 * Tests for  {@link NoSuchMethodFailureAnalyzer}.
 * @author Andy Wilkinson
 */
@RunWith(ModifiedClassPathRunner.class) @ClassPathOverrides("javax.servlet:servlet-api:2.5") public class NoSuchMethodFailureAnalyzerTests {
  @Test public void noSuchMethodErrorIsAnalyzed(){
    Throwable failure=createFailure();
    assertThat(failure).isNotNull();
    FailureAnalysis analysis=new NoSuchMethodFailureAnalyzer().analyze(failure);
    assertThat(analysis).isNotNull();
    assertThat(analysis.getDescription()).contains("the method javax.servlet.ServletContext.addServlet" + "(Ljava/lang/String;Ljavax/servlet/Servlet;)" + "Ljavax/servlet/ServletRegistration$Dynamic;").contains("class, javax.servlet.ServletContext,");
  }
  private Throwable createFailure(){
    try {
      ServletContext servletContext=mock(ServletContext.class);
      servletContext.addServlet("example",new HttpServlet(){
      }
);
      return null;
    }
 catch (    Throwable ex) {
      return ex;
    }
  }
}
