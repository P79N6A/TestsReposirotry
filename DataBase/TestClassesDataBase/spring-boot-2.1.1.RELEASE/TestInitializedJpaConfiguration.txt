@Configuration @TestAutoConfigurationPackage(City.class) static class TestInitializedJpaConfiguration {
  private boolean called;
  @Autowired public void validateDataSourceIsInitialized(  EntityManagerFactory entityManagerFactory){
    EntityManager entityManager=entityManagerFactory.createEntityManager();
    City city=entityManager.find(City.class,2000L);
    assertThat(city).isNotNull();
    assertThat(city.getName()).isEqualTo("Washington");
    this.called=true;
  }
}
