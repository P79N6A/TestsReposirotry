/** 
 * Integration tests for  {@link JooqTest}.
 * @author Stephane Nicoll
 */
@RunWith(SpringRunner.class) @JooqTest @AutoConfigureTestDatabase(connection=EmbeddedDatabaseConnection.H2) public class JooqTestWithAutoConfigureTestDatabaseIntegrationTests {
  @Autowired private DSLContext dsl;
  @Autowired private DataSource dataSource;
  @Test public void replacesAutoConfiguredDataSource() throws Exception {
    String product=this.dataSource.getConnection().getMetaData().getDatabaseProductName();
    assertThat(product).startsWith("H2");
    assertThat(this.dsl.configuration().dialect()).isEqualTo(SQLDialect.H2);
  }
}
