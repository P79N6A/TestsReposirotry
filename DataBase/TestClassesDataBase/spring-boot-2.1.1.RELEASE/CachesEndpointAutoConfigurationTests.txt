/** 
 * Tests for  {@link CachesEndpointAutoConfiguration}.
 * @author Johannes Edmeier
 * @author Stephane Nicoll
 */
public class CachesEndpointAutoConfigurationTests {
  private final ApplicationContextRunner contextRunner=new ApplicationContextRunner().withConfiguration(AutoConfigurations.of(CachesEndpointAutoConfiguration.class));
  @Test public void runShouldHaveEndpointBean(){
    this.contextRunner.withUserConfiguration(CacheConfiguration.class).run((context) -> assertThat(context).hasSingleBean(CachesEndpoint.class));
  }
  @Test public void runWithoutCacheManagerShouldHaveEndpointBean(){
    this.contextRunner.run((context) -> assertThat(context).hasSingleBean(CachesEndpoint.class));
  }
  @Test public void runWhenEnabledPropertyIsFalseShouldNotHaveEndpointBean(){
    this.contextRunner.withPropertyValues("management.endpoint.caches.enabled:false").withUserConfiguration(CacheConfiguration.class).run((context) -> assertThat(context).doesNotHaveBean(CachesEndpoint.class));
  }
@Configuration static class CacheConfiguration {
    @Bean public CacheManager cacheManager(){
      return mock(CacheManager.class);
    }
  }
}
