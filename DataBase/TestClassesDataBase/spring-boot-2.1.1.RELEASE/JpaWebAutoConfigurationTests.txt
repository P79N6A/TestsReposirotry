/** 
 * Tests for  {@link SpringDataWebAutoConfiguration} and{@link JpaRepositoriesAutoConfiguration}.
 * @author Dave Syer
 */
public class JpaWebAutoConfigurationTests {
  private AnnotationConfigWebApplicationContext context;
  @After public void close(){
    this.context.close();
  }
  @Test public void testDefaultRepositoryConfiguration(){
    this.context=new AnnotationConfigWebApplicationContext();
    this.context.setServletContext(new MockServletContext());
    this.context.register(TestConfiguration.class,EmbeddedDataSourceConfiguration.class,HibernateJpaAutoConfiguration.class,JpaRepositoriesAutoConfiguration.class,SpringDataWebAutoConfiguration.class,PropertyPlaceholderAutoConfiguration.class);
    this.context.refresh();
    assertThat(this.context.getBean(CityRepository.class)).isNotNull();
    assertThat(this.context.getBean(PageableHandlerMethodArgumentResolver.class)).isNotNull();
    assertThat(this.context.getBean(FormattingConversionService.class).canConvert(Long.class,City.class)).isTrue();
  }
@Configuration @TestAutoConfigurationPackage(City.class) @EnableWebMvc protected static class TestConfiguration {
  }
}
