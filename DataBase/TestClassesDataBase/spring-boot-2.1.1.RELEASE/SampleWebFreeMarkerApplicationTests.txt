/** 
 * Basic integration tests for FreeMarker application.
 * @author Phillip Webb
 * @author Andy Wilkinson
 */
@RunWith(SpringRunner.class) @SpringBootTest(webEnvironment=WebEnvironment.RANDOM_PORT) public class SampleWebFreeMarkerApplicationTests {
  @Autowired private TestRestTemplate testRestTemplate;
  @Test public void testFreeMarkerTemplate(){
    ResponseEntity<String> entity=this.testRestTemplate.getForEntity("/",String.class);
    assertThat(entity.getStatusCode()).isEqualTo(HttpStatus.OK);
    assertThat(entity.getBody()).contains("Hello, Andy");
  }
  @Test public void testFreeMarkerErrorTemplate(){
    HttpHeaders headers=new HttpHeaders();
    headers.setAccept(Arrays.asList(MediaType.TEXT_HTML));
    HttpEntity<String> requestEntity=new HttpEntity<>(headers);
    ResponseEntity<String> responseEntity=this.testRestTemplate.exchange("/does-not-exist",HttpMethod.GET,requestEntity,String.class);
    assertThat(responseEntity.getStatusCode()).isEqualTo(HttpStatus.NOT_FOUND);
    assertThat(responseEntity.getBody()).contains("Something went wrong: 404 Not Found");
  }
}
