/** 
 * Tests for  {@link TomcatLegacyCookieProcessorExample}.
 * @author Andy Wilkinson
 */
public class TomcatLegacyCookieProcessorExampleTests {
  @Test public void cookieProcessorIsCustomized(){
    ServletWebServerApplicationContext applicationContext=(ServletWebServerApplicationContext)new SpringApplication(TestConfiguration.class,LegacyCookieProcessorConfiguration.class).run();
    Context context=(Context)((TomcatWebServer)applicationContext.getWebServer()).getTomcat().getHost().findChildren()[0];
    assertThat(context.getCookieProcessor()).isInstanceOf(LegacyCookieProcessor.class);
  }
@Configuration static class TestConfiguration {
    @Bean public TomcatServletWebServerFactory tomcatFactory(){
      return new TomcatServletWebServerFactory(0);
    }
    @Bean public WebServerFactoryCustomizerBeanPostProcessor postProcessor(){
      return new WebServerFactoryCustomizerBeanPostProcessor();
    }
  }
}
