/** 
 * Integration tests for  {@link TestRestTemplateContextCustomizer} with a custom{@link TestRestTemplate} bean.
 * @author Phillip Webb
 */
@RunWith(SpringRunner.class) @SpringBootTest(webEnvironment=WebEnvironment.RANDOM_PORT) @DirtiesContext public class TestRestTemplateContextCustomizerWithOverrideIntegrationTests {
  @Autowired private TestRestTemplate restTemplate;
  @Test public void test(){
    assertThat(this.restTemplate).isInstanceOf(CustomTestRestTemplate.class);
  }
@Configuration @Import({TestServlet.class,NoTestRestTemplateBeanChecker.class}) static class TestConfig {
    @Bean public TomcatServletWebServerFactory webServerFactory(){
      return new TomcatServletWebServerFactory(0);
    }
    @Bean public TestRestTemplate template(){
      return new CustomTestRestTemplate();
    }
  }
static class TestServlet extends GenericServlet {
    @Override public void service(    ServletRequest request,    ServletResponse response) throws ServletException, IOException {
      try (PrintWriter writer=response.getWriter()){
        writer.println("hello");
      }
     }
  }
static class CustomTestRestTemplate extends TestRestTemplate {
  }
}
