/** 
 * A generic JUnit test which tests  {@code listIterator} operations on a list. Can't be invokeddirectly; please see  {@link com.google.common.collect.testing.ListTestSuiteBuilder}.
 * @author Chris Povirk
 * @author Kevin Bourrillion
 */
@GwtCompatible(emulated=true) @Ignore public class ListListIteratorTester<E> extends AbstractListTester<E> {
  @CollectionFeature.Require(absent=SUPPORTS_REMOVE) @ListFeature.Require(absent={SUPPORTS_SET,SUPPORTS_ADD_WITH_INDEX}) public void testListIterator_unmodifiable(){
    runListIteratorTest(UNMODIFIABLE);
  }
  @CollectionFeature.Require(SUPPORTS_REMOVE) @ListFeature.Require({SUPPORTS_SET,SUPPORTS_ADD_WITH_INDEX}) public void testListIterator_fullyModifiable(){
    runListIteratorTest(MODIFIABLE);
  }
  private void runListIteratorTest(  Set<IteratorFeature> features){
    new ListIteratorTester<E>(listListIteratorTesterNumIterations(),singleton(e4()),features,Helpers.copyToList(getOrderedElements()),0){
      @Override protected ListIterator<E> newTargetIterator(){
        resetCollection();
        return getList().listIterator();
      }
      @Override protected void verify(      List<E> elements){
        expectContents(elements);
      }
    }
.test();
  }
  public void testListIterator_tooLow(){
    try {
      getList().listIterator(-1);
      fail();
    }
 catch (    IndexOutOfBoundsException expected) {
    }
  }
  public void testListIterator_tooHigh(){
    try {
      getList().listIterator(getNumElements() + 1);
      fail();
    }
 catch (    IndexOutOfBoundsException expected) {
    }
  }
  public void testListIterator_atSize(){
    getList().listIterator(getNumElements());
  }
  /** 
 * Returns the  {@link Method} instance for {@link #testListIterator_fullyModifiable()} so thattests of  {@link CopyOnWriteArraySet} can suppress it with {@code FeatureSpecificTestSuiteBuilder.suppressing()} until <ahref="http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6570575">Sun bug 6570575</a> is fixed.
 */
  @GwtIncompatible public static Method getListIteratorFullyModifiableMethod(){
    return Helpers.getMethod(ListListIteratorTester.class,"testListIterator_fullyModifiable");
  }
  /** 
 * Returns the  {@link Method} instance for {@link #testListIterator_unmodifiable()} so that it canbe suppressed in GWT tests.
 */
  @GwtIncompatible public static Method getListIteratorUnmodifiableMethod(){
    return Helpers.getMethod(ListListIteratorTester.class,"testListIterator_unmodifiable");
  }
}
