/** 
 * Tests  {@link DraweeSpan}
 */
@RunWith(RobolectricTestRunner.class) public class DraweeSpanTest {
  @Mock public DraweeHolder mDraweeHierarchy;
  @Mock public Rect mBounds;
  @Mock public Drawable mDrawable;
  private DraweeSpan mDraweeSpan;
  @Before public void setup(){
    MockitoAnnotations.initMocks(this);
    when(mDraweeHierarchy.getTopLevelDrawable()).thenReturn(mDrawable);
    when(mDrawable.getBounds()).thenReturn(mBounds);
    mDraweeSpan=new DraweeSpan(mDraweeHierarchy,BetterImageSpan.ALIGN_CENTER);
  }
  @Test public void testLifecycle(){
    mDraweeSpan.onAttach();
    verify(mDraweeHierarchy).onAttach();
    mDraweeSpan.onDetach();
    verify(mDraweeHierarchy).onDetach();
  }
  @Test public void testGetDrawable(){
    Drawable drawable=mDraweeSpan.getDrawable();
    verify(mDraweeHierarchy).getTopLevelDrawable();
    assertThat(drawable).isEqualTo(mDrawable);
  }
}
