public abstract class AbstractWithPreferencesTest {
  @Before public void init() throws Exception {
    Runtime.getRuntime().addShutdownHook(new Thread(DeleteFilesOnShutdown.INSTANCE));
    BaseNoGui.initPlatform();
    BaseNoGui.getPlatform().init();
    PreferencesData.init(null);
    Theme.init();
    BaseNoGui.initPackages();
    Base.untitledFolder=FileUtils.createTempFolder("untitled" + new Random().nextInt(Integer.MAX_VALUE),".tmp");
    DeleteFilesOnShutdown.add(Base.untitledFolder);
  }
}
