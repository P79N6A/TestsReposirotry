public class MergeSketchWithUploaderTest {
  private File sketch;
  @Before public void setup() throws Exception {
    File originalSketch=new File(MergeSketchWithUploaderTest.class.getResource("/sketch.hex").getFile());
    sketch=new File(System.getProperty("java.io.tmpdir"),"sketch.hex");
    FileUtils.copyFile(originalSketch,sketch);
  }
  @After public void removeTmpFile(){
    sketch.delete();
  }
  @Test public void shouldMergeWithOptiboot() throws Exception {
    assertEquals(11720,sketch.length());
    File bootloader=new File(MergeSketchWithUploaderTest.class.getResource("/optiboot_atmega328.hex").getFile());
    new MergeSketchWithBooloader().merge(sketch,bootloader);
    assertEquals(13140,sketch.length());
  }
}
