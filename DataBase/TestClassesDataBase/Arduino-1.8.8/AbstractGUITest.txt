public abstract class AbstractGUITest {
  protected ArduinoFrameFixture window;
  @Before public void startUpTheIDE() throws Exception {
    System.setProperty("mrj.version","whynot");
    Runtime.getRuntime().addShutdownHook(new Thread(DeleteFilesOnShutdown.INSTANCE));
    FailOnThreadViolationRepaintManager.install();
    BaseNoGui.initPlatform();
    BaseNoGui.getPlatform().init();
    PreferencesData.init(null);
    JPopupMenu.setDefaultLightWeightPopupEnabled(false);
    Theme.init();
    BaseNoGui.getPlatform().setLookAndFeel();
    Base.untitledFolder=FileUtils.createTempFolder("untitled" + new Random().nextInt(Integer.MAX_VALUE),".tmp");
    DeleteFilesOnShutdown.add(Base.untitledFolder);
    window=GuiActionRunner.execute(new GuiQuery<ArduinoFrameFixture>(){
      @Override protected ArduinoFrameFixture executeInEDT() throws Throwable {
        return new ArduinoFrameFixture(new Base(new String[0]).editors.get(0));
      }
    }
);
  }
  @After public void stopTheIDE(){
    window.cleanUp();
  }
}
