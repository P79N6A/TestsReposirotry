public class BlockCommentGeneratesOneUndoActionTest extends AbstractGUITest {
  @Test public void shouldUndoAndRedo() throws Exception {
    JMenuItemFixture menuEditUndo=window.menuItem("menuEditUndo");
    menuEditUndo.requireDisabled();
    SketchTextAreaFixture jEditTextArea=window.textArea("editor");
    String previousText=jEditTextArea.getText();
    jEditTextArea.selectAll();
    GuiActionRunner.execute(new GuiQuery<Frame>(){
      protected Frame executeInEDT(){
        window.getEditor().getCurrentTab().handleCommentUncomment();
        return window.getEditor();
      }
    }
);
    menuEditUndo.requireEnabled();
    menuEditUndo.click();
    assertEquals(previousText,jEditTextArea.getText());
    menuEditUndo.requireDisabled();
    GuiActionRunner.execute(new GuiQuery<Frame>(){
      protected Frame executeInEDT(){
        window.getEditor().getCurrentTab().handleIndentOutdent(true);
        return window.getEditor();
      }
    }
);
    menuEditUndo.requireEnabled();
    menuEditUndo.click();
    assertEquals(previousText,jEditTextArea.getText());
    menuEditUndo.requireDisabled();
  }
}
