static class SampleCommand extends HystrixCommand<Integer> {
  boolean shouldFail;
  int latencyToAdd;
  protected SampleCommand(  HystrixCommandKey key,  boolean shouldFail,  int latencyToAdd){
    super(Setter.withGroupKey(groupKey).andCommandKey(key).andCommandPropertiesDefaults(propertiesSetter));
    this.shouldFail=shouldFail;
    this.latencyToAdd=latencyToAdd;
  }
  @Override protected Integer run() throws Exception {
    if (shouldFail) {
      throw new RuntimeException("command failure");
    }
 else {
      Thread.sleep(latencyToAdd);
      return 1;
    }
  }
  @Override protected Integer getFallback(){
    return 99;
  }
}
