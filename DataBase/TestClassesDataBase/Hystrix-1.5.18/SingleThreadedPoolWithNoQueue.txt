/** 
 * Threadpool with 1 thread, queue of size 1
 */
protected static class SingleThreadedPoolWithNoQueue implements HystrixThreadPool {
  final SynchronousQueue<Runnable> queue;
  final ThreadPoolExecutor pool;
  public SingleThreadedPoolWithNoQueue(){
    queue=new SynchronousQueue<Runnable>();
    pool=new ThreadPoolExecutor(1,1,1,TimeUnit.MINUTES,queue);
  }
  @Override public ThreadPoolExecutor getExecutor(){
    return pool;
  }
  @Override public Scheduler getScheduler(){
    return new HystrixContextScheduler(HystrixPlugins.getInstance().getConcurrencyStrategy(),this);
  }
  @Override public Scheduler getScheduler(  Func0<Boolean> shouldInterruptThread){
    return new HystrixContextScheduler(HystrixPlugins.getInstance().getConcurrencyStrategy(),this,shouldInterruptThread);
  }
  @Override public void markThreadExecution(){
  }
  @Override public void markThreadCompletion(){
  }
  @Override public void markThreadRejection(){
  }
  @Override public boolean isQueueSpaceAvailable(){
    return true;
  }
}
