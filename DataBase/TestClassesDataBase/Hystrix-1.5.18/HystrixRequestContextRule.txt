/** 
 * JUnit rule to be used to simplify tests that require a HystrixRequestContext. Example of usage: <blockquote> <pre>
 * @Rule public HystrixRequestContextRule context = new HystrixRequestContextRule(); </pre> </blockquote>
 */
public final class HystrixRequestContextRule extends ExternalResource {
  private HystrixRequestContext context;
  @Override protected void before(){
    this.context=HystrixRequestContext.initializeContext();
    Hystrix.reset();
  }
  @Override protected void after(){
    if (this.context != null) {
      this.context.shutdown();
      this.context=null;
    }
  }
  public HystrixRequestContext context(){
    return this.context;
  }
  public void reset(){
    after();
    before();
  }
}
