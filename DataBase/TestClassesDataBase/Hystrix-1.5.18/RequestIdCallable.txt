private static class RequestIdCallable<T> implements Callable<T> {
  private final Callable<T> callable;
  private final String requestId;
  public RequestIdCallable(  Callable<T> callable){
    this.callable=callable;
    this.requestId=testRequestIdThreadLocal.get();
  }
  @Override public T call() throws Exception {
    String original=testRequestIdThreadLocal.get();
    testRequestIdThreadLocal.set(requestId);
    try {
      return callable.call();
    }
  finally {
      testRequestIdThreadLocal.set(original);
    }
  }
}
