private static class CommandWithErrorThrown extends TestHystrixObservableCommand<Boolean> {
  private final boolean asyncException;
  public CommandWithErrorThrown(  TestCircuitBreaker circuitBreaker,  boolean asyncException){
    super(testPropsBuilder().setCircuitBreaker(circuitBreaker).setMetrics(circuitBreaker.metrics));
    this.asyncException=asyncException;
  }
  @Override protected Observable<Boolean> construct(){
    Error error=new Error("simulated java.lang.Error message");
    if (asyncException) {
      return Observable.error(error);
    }
 else {
      throw error;
    }
  }
}
