public class UnsafeStringReaderTest {
  @Test public void testRead() throws IOException {
    UnsafeStringReader reader=new UnsafeStringReader("abc");
    assertThat(reader.markSupported(),is(true));
    assertThat(reader.read(),is((int)'a'));
    assertThat(reader.read(),is((int)'b'));
    assertThat(reader.read(),is((int)'c'));
    assertThat(reader.read(),is(-1));
    reader.reset();
    reader.mark(0);
    assertThat(reader.read(),is((int)'a'));
    char[] chars=new char[2];
    reader.read(chars);
    reader.close();
    assertThat(chars[0],is('b'));
    assertThat(chars[1],is('c'));
  }
  @Test public void testSkip() throws IOException {
    UnsafeStringReader reader=new UnsafeStringReader("abc");
    assertThat(reader.ready(),is(true));
    reader.skip(1);
    assertThat(reader.read(),is((int)'b'));
  }
  @Test public void testSkipTooLong() throws IOException {
    UnsafeStringReader reader=new UnsafeStringReader("abc");
    reader.skip(10);
    long skip=reader.skip(10);
    assertThat(skip,is(0L));
  }
  @Test(expected=IndexOutOfBoundsException.class) public void testWrongLength() throws IOException {
    UnsafeStringReader reader=new UnsafeStringReader("abc");
    char[] chars=new char[1];
    reader.read(chars,0,2);
  }
}
