private static class MockRegistry implements Registry {
  CountDownLatch latch;
  boolean destroyWithError;
  public MockRegistry(  CountDownLatch latch){
    this.latch=latch;
  }
  public MockRegistry(  boolean destroyWithError){
    this.destroyWithError=destroyWithError;
  }
  @Override public void register(  URL url){
  }
  @Override public void unregister(  URL url){
  }
  @Override public void subscribe(  URL url,  NotifyListener listener){
  }
  @Override public void unsubscribe(  URL url,  NotifyListener listener){
    if (latch != null)     latch.countDown();
  }
  @Override public List<URL> lookup(  URL url){
    return null;
  }
  public URL getUrl(){
    return null;
  }
  @Override public boolean isAvailable(){
    return true;
  }
  @Override public void destroy(){
    if (destroyWithError) {
      throw new RpcException("test exception ignore.");
    }
  }
}
