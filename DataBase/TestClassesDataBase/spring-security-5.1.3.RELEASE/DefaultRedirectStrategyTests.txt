/** 
 * @author Luke Taylor
 * @since 3.0
 */
public class DefaultRedirectStrategyTests {
  @Test public void contextRelativeUrlWithContextNameInHostnameIsHandledCorrectly() throws Exception {
    DefaultRedirectStrategy rds=new DefaultRedirectStrategy();
    rds.setContextRelative(true);
    MockHttpServletRequest request=new MockHttpServletRequest();
    request.setContextPath("/context");
    MockHttpServletResponse response=new MockHttpServletResponse();
    rds.sendRedirect(request,response,"http://context.blah.com/context/remainder");
    assertThat(response.getRedirectedUrl()).isEqualTo("remainder");
  }
  @Test public void contextRelativeUrlWithMultipleSchemesInHostnameIsHandledCorrectly() throws Exception {
    DefaultRedirectStrategy rds=new DefaultRedirectStrategy();
    rds.setContextRelative(true);
    MockHttpServletRequest request=new MockHttpServletRequest();
    request.setContextPath("/context");
    MockHttpServletResponse response=new MockHttpServletResponse();
    rds.sendRedirect(request,response,"http://http://context.blah.com/context/remainder");
    assertThat(response.getRedirectedUrl()).isEqualTo("remainder");
  }
}
