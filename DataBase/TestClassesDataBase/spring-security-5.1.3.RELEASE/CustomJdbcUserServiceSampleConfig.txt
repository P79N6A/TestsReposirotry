@EnableWebSecurity static class CustomJdbcUserServiceSampleConfig extends WebSecurityConfigurerAdapter {
  @Autowired private DataSource dataSource;
  protected void configure(  AuthenticationManagerBuilder auth) throws Exception {
    auth.jdbcAuthentication().dataSource(this.dataSource).userCache(new CustomUserCache()).usersByUsernameQuery("select principal,credentials,true from users where principal = ?").authoritiesByUsernameQuery("select principal,role from roles where principal = ?").groupAuthoritiesByUsername(JdbcUserDetailsManager.DEF_GROUP_AUTHORITIES_BY_USERNAME_QUERY).rolePrefix("ROLE_");
  }
static class CustomUserCache implements UserCache {
    @Override public UserDetails getUserFromCache(    String username){
      return null;
    }
    @Override public void putUserInCache(    UserDetails user){
    }
    @Override public void removeUserFromCache(    String username){
    }
  }
}
