@EnableWebSecurity static class AllowBearerTokenAsQueryParameterConfig extends WebSecurityConfigurerAdapter {
  @Override protected void configure(  HttpSecurity http) throws Exception {
    http.authorizeRequests().anyRequest().authenticated().and().oauth2ResourceServer().jwt();
  }
  @Bean BearerTokenResolver allowQueryParameter(){
    DefaultBearerTokenResolver resolver=new DefaultBearerTokenResolver();
    resolver.setAllowUriQueryParameter(true);
    return resolver;
  }
}
