@EnableWebSecurity static class UserServiceRefConfig extends WebSecurityConfigurerAdapter {
  protected void configure(  AuthenticationManagerBuilder auth) throws Exception {
    auth.userDetailsService(userDetailsService());
  }
  @Bean public UserDetailsService userDetailsService(){
    return new InMemoryUserDetailsManager(PasswordEncodedUser.user());
  }
}
