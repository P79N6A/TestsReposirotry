@EnableWebSecurity static class OverrideContentNegotiationStrategySharedObjectConfig extends WebSecurityConfigurerAdapter {
  static ContentNegotiationStrategy CONTENT_NEGOTIATION_STRATEGY_BEAN;
  private ContentNegotiationStrategy contentNegotiationStrategySharedObject;
  @Bean public ContentNegotiationStrategy contentNegotiationStrategy(){
    return CONTENT_NEGOTIATION_STRATEGY_BEAN;
  }
  @Override protected void configure(  HttpSecurity http) throws Exception {
    this.contentNegotiationStrategySharedObject=http.getSharedObject(ContentNegotiationStrategy.class);
    super.configure(http);
  }
}
