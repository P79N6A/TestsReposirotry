static class DefaultBootGlobalAuthenticationConfigurerAdapter extends DefaultOrderGlobalAuthenticationConfigurerAdapter {
  @Override public void configure(  AuthenticationManagerBuilder auth) throws Exception {
    if (auth.isConfigured()) {
      return;
    }
    UserDetails user=User.withUserDetails(PasswordEncodedUser.user()).username("boot").build();
    List<UserDetails> users=Arrays.asList(user);
    InMemoryUserDetailsManager inMemory=new InMemoryUserDetailsManager(users);
    DaoAuthenticationProvider provider=new DaoAuthenticationProvider();
    provider.setUserDetailsService(inMemory);
    auth.authenticationProvider(provider);
  }
}
