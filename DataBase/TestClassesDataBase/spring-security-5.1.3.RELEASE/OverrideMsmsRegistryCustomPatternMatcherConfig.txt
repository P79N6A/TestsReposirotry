@Configuration @EnableWebSocketMessageBroker @Import(SyncExecutorConfig.class) static class OverrideMsmsRegistryCustomPatternMatcherConfig extends AbstractSecurityWebSocketMessageBrokerConfigurer {
  public void registerStompEndpoints(  StompEndpointRegistry registry){
    registry.addEndpoint("/other").setHandshakeHandler(testHandshakeHandler());
  }
  @Override protected void configureInbound(  MessageSecurityMetadataSourceRegistry messages){
    messages.simpDestPathMatcher(new AntPathMatcher()).simpDestMatchers("/app/a/*").permitAll().anyMessage().denyAll();
  }
  @Override public void configureMessageBroker(  MessageBrokerRegistry registry){
    registry.setPathMatcher(new AntPathMatcher("."));
    registry.enableSimpleBroker("/queue/","/topic/");
    registry.setApplicationDestinationPrefixes("/app");
  }
  @Bean public TestHandshakeHandler testHandshakeHandler(){
    return new TestHandshakeHandler();
  }
}
