@EnableWebSecurity static class UserDetailsServiceConfig extends WebSecurityConfigurerAdapter {
  @Autowired private MyFilter myFilter;
  @Bean @Override public UserDetailsService userDetailsServiceBean() throws Exception {
    return super.userDetailsServiceBean();
  }
  @Override public void configure(  HttpSecurity http){
    http.addFilterBefore(this.myFilter,UsernamePasswordAuthenticationFilter.class);
  }
  @Override protected void configure(  AuthenticationManagerBuilder auth) throws Exception {
    auth.inMemoryAuthentication().withUser(PasswordEncodedUser.user());
  }
}
