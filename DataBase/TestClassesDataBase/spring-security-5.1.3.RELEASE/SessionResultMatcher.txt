private static class SessionResultMatcher implements ResultMatcher {
  private String id;
  private Boolean valid;
  private Boolean exists=true;
  public ResultMatcher exists(  boolean exists){
    this.exists=exists;
    return this;
  }
  public ResultMatcher valid(  boolean valid){
    this.valid=valid;
    return this.exists(true);
  }
  public ResultMatcher id(  String id){
    this.id=id;
    return this.exists(true);
  }
  @Override public void match(  MvcResult result){
    if (!this.exists) {
      assertThat(result.getRequest().getSession(false)).isNull();
      return;
    }
    assertThat(result.getRequest().getSession(false)).isNotNull();
    MockHttpSession session=(MockHttpSession)result.getRequest().getSession(false);
    if (this.valid != null) {
      if (this.valid) {
        assertThat(session.isInvalid()).isFalse();
      }
 else {
        assertThat(session.isInvalid()).isTrue();
      }
    }
    if (this.id != null) {
      assertThat(session.getId()).isEqualTo(this.id);
    }
  }
}
