@EnableWebSecurity static class OAuth2LoginConfig extends CommonWebSecurityConfigurerAdapter implements ApplicationListener<AuthenticationSuccessEvent> {
  static List<AuthenticationSuccessEvent> EVENTS=new ArrayList<>();
  @Override protected void configure(  HttpSecurity http) throws Exception {
    http.oauth2Login().clientRegistrationRepository(new InMemoryClientRegistrationRepository(GOOGLE_CLIENT_REGISTRATION));
    super.configure(http);
  }
  @Override public void onApplicationEvent(  AuthenticationSuccessEvent event){
    EVENTS.add(event);
  }
}
