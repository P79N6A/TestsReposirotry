@EnableWebSecurity static class InvokeTwiceDoesNotOverrideConfig extends WebSecurityConfigurerAdapter {
  static RequestCache requestCache=mock(RequestCache.class);
  @Override protected void configure(  HttpSecurity http) throws Exception {
    http.requestCache().requestCache(requestCache).and().requestCache();
  }
}
