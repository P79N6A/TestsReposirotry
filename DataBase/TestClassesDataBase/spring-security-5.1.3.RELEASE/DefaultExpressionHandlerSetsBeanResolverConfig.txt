@EnableWebSecurity static class DefaultExpressionHandlerSetsBeanResolverConfig extends WebSecurityConfigurerAdapter {
  @Override protected void configure(  HttpSecurity http) throws Exception {
    http.authorizeRequests().anyRequest().access("request.method == 'GET' ? @b.grant() : @b.deny()");
  }
@RestController public class HomeController {
    @GetMapping("/") public String home(){
      return "home";
    }
  }
  @Bean public MyBean b(){
    return new MyBean();
  }
static class MyBean {
    public boolean deny(){
      return false;
    }
    public boolean grant(){
      return true;
    }
  }
}
