@EnableWebSecurity static class ExpiredJwtClockSkewConfig extends WebSecurityConfigurerAdapter {
  @Value("${mock.jwk-set-uri}") String uri;
  @Override protected void configure(  HttpSecurity http) throws Exception {
    Clock justOverOneHourAfterExpiry=Clock.fixed(Instant.ofEpochMilli(4687181595000L),ZoneId.systemDefault());
    JwtTimestampValidator jwtValidator=new JwtTimestampValidator(Duration.ofHours(1));
    jwtValidator.setClock(justOverOneHourAfterExpiry);
    NimbusJwtDecoderJwkSupport jwtDecoder=new NimbusJwtDecoderJwkSupport(this.uri);
    jwtDecoder.setJwtValidator(jwtValidator);
    http.oauth2ResourceServer().jwt().decoder(jwtDecoder);
  }
}
