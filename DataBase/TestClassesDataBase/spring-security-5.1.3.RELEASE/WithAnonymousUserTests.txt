/** 
 * @author Rob Winch
 * @since 5.0
 */
public class WithAnonymousUserTests {
  @Test public void defaults(){
    WithSecurityContext context=AnnotatedElementUtils.findMergedAnnotation(Annotated.class,WithSecurityContext.class);
    assertThat(context.setupBefore()).isEqualTo(TestExecutionEvent.TEST_METHOD);
  }
@WithAnonymousUser private class Annotated {
  }
  @Test public void findMergedAnnotationWhenSetupExplicitThenOverridden(){
    WithSecurityContext context=AnnotatedElementUtils.findMergedAnnotation(SetupExplicit.class,WithSecurityContext.class);
    assertThat(context.setupBefore()).isEqualTo(TestExecutionEvent.TEST_METHOD);
  }
@WithAnonymousUser(setupBefore=TestExecutionEvent.TEST_METHOD) private class SetupExplicit {
  }
  @Test public void findMergedAnnotationWhenSetupOverriddenThenOverridden(){
    WithSecurityContext context=AnnotatedElementUtils.findMergedAnnotation(SetupOverridden.class,WithSecurityContext.class);
    assertThat(context.setupBefore()).isEqualTo(TestExecutionEvent.TEST_EXECUTION);
  }
@WithAnonymousUser(setupBefore=TestExecutionEvent.TEST_EXECUTION) private class SetupOverridden {
  }
}
