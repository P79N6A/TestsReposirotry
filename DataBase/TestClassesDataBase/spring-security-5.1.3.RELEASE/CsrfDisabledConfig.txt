@EnableWebSecurity static class CsrfDisabledConfig extends WebSecurityConfigurerAdapter {
  @Value("${mock.jwk-set-uri:https://example.org}") String uri;
  @Override protected void configure(  HttpSecurity http) throws Exception {
    http.authorizeRequests().antMatchers("/requires-read-scope").access("hasAuthority('SCOPE_message:read')").anyRequest().authenticated().and().csrf().disable().oauth2ResourceServer().jwt().jwkSetUri(this.uri);
  }
}
