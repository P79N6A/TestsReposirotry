@EnableWebSecurity static class PasswordEncoderWithInMemoryConfig extends WebSecurityConfigurerAdapter {
  @Override protected void configure(  AuthenticationManagerBuilder auth) throws Exception {
    BCryptPasswordEncoder encoder=new BCryptPasswordEncoder();
    auth.inMemoryAuthentication().withUser("user").password(encoder.encode("password")).roles("USER").and().passwordEncoder(encoder);
  }
}
