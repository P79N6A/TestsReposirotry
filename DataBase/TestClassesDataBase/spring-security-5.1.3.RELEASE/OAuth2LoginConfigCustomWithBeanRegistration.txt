@EnableWebSecurity static class OAuth2LoginConfigCustomWithBeanRegistration extends CommonWebSecurityConfigurerAdapter {
  @Override protected void configure(  HttpSecurity http) throws Exception {
    http.oauth2Login();
    super.configure(http);
  }
  @Bean ClientRegistrationRepository clientRegistrationRepository(){
    return new InMemoryClientRegistrationRepository(GOOGLE_CLIENT_REGISTRATION);
  }
  @Bean GrantedAuthoritiesMapper grantedAuthoritiesMapper(){
    return createGrantedAuthoritiesMapper();
  }
}
