/** 
 * This class needed to show how to extend  {@link JdbcMutableAclService} forprocessing custom  {@link Sid} implementations
 */
private class CustomJdbcMutableAclService extends JdbcMutableAclService {
  private CustomJdbcMutableAclService(  DataSource dataSource,  LookupStrategy lookupStrategy,  AclCache aclCache){
    super(dataSource,lookupStrategy,aclCache);
  }
  @Override protected Long createOrRetrieveSidPrimaryKey(  Sid sid,  boolean allowCreate){
    String sidName;
    boolean isPrincipal=false;
    if (sid instanceof CustomSid) {
      sidName=((CustomSid)sid).getSid();
    }
 else     if (sid instanceof GrantedAuthoritySid) {
      sidName=((GrantedAuthoritySid)sid).getGrantedAuthority();
    }
 else {
      sidName=((PrincipalSid)sid).getPrincipal();
      isPrincipal=true;
    }
    return createOrRetrieveSidPrimaryKey(sidName,isPrincipal,allowCreate);
  }
}
