@EnableWebSecurity @EnableWebMvc static class InvokeTwiceDoesNotOverride extends WebSecurityConfigurerAdapter {
  @Override protected void configure(  HttpSecurity http) throws Exception {
    http.anonymous().key("key").principal("principal").and().anonymous();
  }
@RestController static class PrincipalController {
    @GetMapping("/") String principal(    @AuthenticationPrincipal String principal){
      return principal;
    }
  }
}
