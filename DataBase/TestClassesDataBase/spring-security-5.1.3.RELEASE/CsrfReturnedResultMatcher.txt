static class CsrfReturnedResultMatcher implements ResultMatcher {
  ExceptionalFunction<MvcResult,String> token;
  public CsrfReturnedResultMatcher(  ExceptionalFunction<MvcResult,String> token){
    this.token=token;
  }
  @Override public void match(  MvcResult result) throws Exception {
    MockHttpServletRequest request=result.getRequest();
    CsrfToken token=WebTestUtils.getCsrfTokenRepository(request).loadToken(request);
    assertThat(token).isNotNull();
    assertThat(token.getToken()).isEqualTo(this.token.apply(result));
  }
}
