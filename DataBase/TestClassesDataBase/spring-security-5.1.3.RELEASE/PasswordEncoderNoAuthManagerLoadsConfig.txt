@EnableWebSecurity static class PasswordEncoderNoAuthManagerLoadsConfig extends WebSecurityConfigurerAdapter {
  protected void configure(  AuthenticationManagerBuilder auth) throws Exception {
    BCryptPasswordEncoder encoder=passwordEncoder();
    auth.inMemoryAuthentication().withUser("user").password(encoder.encode("password")).roles("USER").and().passwordEncoder(encoder);
  }
  @Bean public BCryptPasswordEncoder passwordEncoder(){
    return new BCryptPasswordEncoder();
  }
}
