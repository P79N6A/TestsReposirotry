private class MockChannelProcessor implements ChannelProcessor {
  private String configAttribute;
  private boolean failIfCalled;
  public MockChannelProcessor(  String configAttribute,  boolean failIfCalled){
    this.configAttribute=configAttribute;
    this.failIfCalled=failIfCalled;
  }
  public void decide(  FilterInvocation invocation,  Collection<ConfigAttribute> config) throws IOException, ServletException {
    Iterator iter=config.iterator();
    if (this.failIfCalled) {
      fail("Should not have called this channel processor: " + this.configAttribute);
    }
    while (iter.hasNext()) {
      ConfigAttribute attr=(ConfigAttribute)iter.next();
      if (attr.getAttribute().equals(this.configAttribute)) {
        invocation.getHttpResponse().sendRedirect("/redirected");
        return;
      }
    }
  }
  public boolean supports(  ConfigAttribute attribute){
    if (attribute.getAttribute().equals(this.configAttribute)) {
      return true;
    }
 else {
      return false;
    }
  }
}
