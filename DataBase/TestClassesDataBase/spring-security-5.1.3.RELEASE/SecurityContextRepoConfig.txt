@EnableWebSecurity static class SecurityContextRepoConfig extends WebSecurityConfigurerAdapter {
  @Override protected void configure(  HttpSecurity http) throws Exception {
    http.authorizeRequests().anyRequest().authenticated().and().securityContext().securityContextRepository(new NullSecurityContextRepository()).and().formLogin();
  }
  @Override protected void configure(  AuthenticationManagerBuilder auth) throws Exception {
    auth.inMemoryAuthentication().withUser(PasswordEncodedUser.user());
  }
}
