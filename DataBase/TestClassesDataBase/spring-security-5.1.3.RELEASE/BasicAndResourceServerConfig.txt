@EnableWebSecurity static class BasicAndResourceServerConfig extends WebSecurityConfigurerAdapter {
  @Value("${mock.jwk-set-uri:https://example.org}") String uri;
  @Override protected void configure(  HttpSecurity http) throws Exception {
    http.authorizeRequests().anyRequest().authenticated().and().httpBasic().and().oauth2ResourceServer().jwt().jwkSetUri(this.uri);
  }
  @Bean public UserDetailsService userDetailsService(){
    return new InMemoryUserDetailsManager(org.springframework.security.core.userdetails.User.withDefaultPasswordEncoder().username("basic-user").password("basic-password").roles("USER").build());
  }
}
