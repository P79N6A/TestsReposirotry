@EnableWebFluxSecurity static class CustomPasswordEncoderConfig {
  @Bean public ReactiveUserDetailsService userDetailsService(  PasswordEncoder encoder){
    return new MapReactiveUserDetailsService(User.withUsername("user").password(encoder.encode("password")).roles("USER").build());
  }
  @Bean public static PasswordEncoder passwordEncoder(){
    return new BCryptPasswordEncoder();
  }
}
