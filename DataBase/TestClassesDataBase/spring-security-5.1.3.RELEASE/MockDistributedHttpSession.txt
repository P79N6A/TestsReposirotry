static class MockDistributedHttpSession extends MockHttpSession {
  @Override public Object getAttribute(  String name){
    return wrap(super.getAttribute(name));
  }
  @Override public void setAttribute(  String name,  Object value){
    super.setAttribute(name,wrap(value));
  }
  private Object wrap(  Object object){
    if (object instanceof Map) {
      object=new HashMap<>((Map<Object,Object>)object);
    }
    return object;
  }
}
