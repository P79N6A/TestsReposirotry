@EnableWebSecurity static class AllowBearerTokenInRequestBodyConfig extends WebSecurityConfigurerAdapter {
  @Override protected void configure(  HttpSecurity http) throws Exception {
    http.authorizeRequests().anyRequest().authenticated().and().oauth2ResourceServer().bearerTokenResolver(allowRequestBody()).jwt();
  }
  private BearerTokenResolver allowRequestBody(){
    DefaultBearerTokenResolver resolver=new DefaultBearerTokenResolver();
    resolver.setAllowFormEncodedBodyParameter(true);
    return resolver;
  }
}
