private class MockRemoteAuthenticationManager implements RemoteAuthenticationManager {
  private boolean grantAccess;
  public MockRemoteAuthenticationManager(  boolean grantAccess){
    this.grantAccess=grantAccess;
  }
  public Collection<? extends GrantedAuthority> attemptAuthentication(  String username,  String password) throws RemoteAuthenticationException {
    if (this.grantAccess) {
      return AuthorityUtils.createAuthorityList("foo");
    }
 else {
      throw new RemoteAuthenticationException("as requested");
    }
  }
}
