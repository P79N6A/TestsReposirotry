<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../jacoco-resources/report.gif" type="image/gif"/><title>JXPathCompiledExpressionTest.java</title><link rel="stylesheet" href="../../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">commons-jxpath (Jan 19, 2019 5:24:34 PM)</a> &gt; <a href="../../index.html" class="el_group">commons-jxpath</a> &gt; <a href="../index.html" class="el_bundle">src/test</a> &gt; <a href="index.source.html" class="el_package">org.apache.commons.jxpath.ri</a> &gt; <span class="el_source">JXPathCompiledExpressionTest.java</span></div><h1>JXPathCompiledExpressionTest.java</h1><pre class="source lang-java linenums">/*
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the &quot;License&quot;); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package org.apache.commons.jxpath.ri;

import org.apache.commons.jxpath.JXPathContext;
import org.apache.commons.jxpath.JXPathTestCase;
import org.apache.commons.jxpath.ri.compiler.Constant;
import org.apache.commons.jxpath.ri.compiler.CoreFunction;
import org.apache.commons.jxpath.ri.compiler.CoreOperationAdd;
import org.apache.commons.jxpath.ri.compiler.CoreOperationAnd;
import org.apache.commons.jxpath.ri.compiler.CoreOperationDivide;
import org.apache.commons.jxpath.ri.compiler.CoreOperationEqual;
import org.apache.commons.jxpath.ri.compiler.CoreOperationGreaterThan;
import org.apache.commons.jxpath.ri.compiler.CoreOperationGreaterThanOrEqual;
import org.apache.commons.jxpath.ri.compiler.CoreOperationLessThan;
import org.apache.commons.jxpath.ri.compiler.CoreOperationLessThanOrEqual;
import org.apache.commons.jxpath.ri.compiler.CoreOperationMod;
import org.apache.commons.jxpath.ri.compiler.CoreOperationMultiply;
import org.apache.commons.jxpath.ri.compiler.CoreOperationNegate;
import org.apache.commons.jxpath.ri.compiler.CoreOperationNotEqual;
import org.apache.commons.jxpath.ri.compiler.CoreOperationOr;
import org.apache.commons.jxpath.ri.compiler.CoreOperationSubtract;
import org.apache.commons.jxpath.ri.compiler.CoreOperationUnion;
import org.apache.commons.jxpath.ri.compiler.ExpressionPath;
import org.apache.commons.jxpath.ri.compiler.ExtensionFunction;
import org.apache.commons.jxpath.ri.compiler.LocationPath;
import org.apache.commons.jxpath.ri.compiler.NameAttributeTest;
import org.apache.commons.jxpath.ri.compiler.VariableReference;

/**
 * Test compiler.
 *
 * @author Dmitri Plotnikov
 * @version $Revision$ $Date$
 */

<span class="fc" id="L51">public class JXPathCompiledExpressionTest extends JXPathTestCase {</span>

    public void testConstant() {
<span class="pc bpc" id="L54" title="1 of 2 branches missed.">        assertXPathExpression(&quot;1&quot;, Constant.class);</span>
<span class="pc bpc" id="L55" title="1 of 2 branches missed.">        assertXPathExpression(&quot;1.5&quot;, Constant.class);</span>
<span class="pc bpc" id="L56" title="1 of 2 branches missed.">        assertXPathExpression(&quot;'foo'&quot;, Constant.class);</span>
<span class="fc" id="L57">    }</span>
    
    public void testCoreFunction() {
<span class="pc bpc" id="L60" title="1 of 2 branches missed.">        assertXPathExpression(&quot;last()&quot;, CoreFunction.class);</span>
<span class="pc bpc" id="L61" title="1 of 2 branches missed.">        assertXPathExpression(&quot;position()&quot;, CoreFunction.class);</span>
<span class="pc bpc" id="L62" title="1 of 2 branches missed.">        assertXPathExpression(&quot;count(book)&quot;, CoreFunction.class);</span>
<span class="pc bpc" id="L63" title="1 of 2 branches missed.">        assertXPathExpression(&quot;id(13)&quot;, CoreFunction.class);</span>
<span class="pc bpc" id="L64" title="1 of 2 branches missed.">        assertXPathExpression(&quot;local-name()&quot;, CoreFunction.class);</span>
<span class="pc bpc" id="L65" title="1 of 2 branches missed.">        assertXPathExpression(&quot;local-name(book)&quot;, CoreFunction.class);</span>
<span class="pc bpc" id="L66" title="1 of 2 branches missed.">        assertXPathExpression(&quot;namespace-uri()&quot;, CoreFunction.class);</span>
<span class="pc bpc" id="L67" title="1 of 2 branches missed.">        assertXPathExpression(&quot;namespace-uri(book)&quot;, CoreFunction.class);</span>
<span class="pc bpc" id="L68" title="1 of 2 branches missed.">        assertXPathExpression(&quot;name()&quot;, CoreFunction.class);</span>
<span class="pc bpc" id="L69" title="1 of 2 branches missed.">        assertXPathExpression(&quot;name(book)&quot;, CoreFunction.class);</span>
<span class="pc bpc" id="L70" title="1 of 2 branches missed.">        assertXPathExpression(&quot;string(3)&quot;, CoreFunction.class);</span>
<span class="pc bpc" id="L71" title="1 of 2 branches missed.">        assertXPathExpression(&quot;concat('a', 'b')&quot;, CoreFunction.class);</span>
<span class="pc bpc" id="L72" title="1 of 2 branches missed.">        assertXPathExpression(&quot;starts-with('a', 'b')&quot;, CoreFunction.class);</span>
<span class="pc bpc" id="L73" title="1 of 2 branches missed.">        assertXPathExpression(&quot;contains('a', 'b')&quot;, CoreFunction.class);</span>
<span class="pc bpc" id="L74" title="1 of 2 branches missed.">        assertXPathExpression(&quot;substring-before('a', 1)&quot;, CoreFunction.class);</span>
<span class="pc bpc" id="L75" title="1 of 2 branches missed.">        assertXPathExpression(&quot;substring-after('a', 2)&quot;, CoreFunction.class);</span>
<span class="pc bpc" id="L76" title="1 of 2 branches missed.">        assertXPathExpression(&quot;substring('a', 2)&quot;, CoreFunction.class);</span>
<span class="pc bpc" id="L77" title="1 of 2 branches missed.">        assertXPathExpression(&quot;substring('a', 2, 3)&quot;, CoreFunction.class);</span>
<span class="pc bpc" id="L78" title="1 of 2 branches missed.">        assertXPathExpression(&quot;string-length('a')&quot;, CoreFunction.class);</span>
<span class="pc bpc" id="L79" title="1 of 2 branches missed.">        assertXPathExpression(&quot;normalize-space('a')&quot;, CoreFunction.class);</span>
<span class="pc bpc" id="L80" title="1 of 2 branches missed.">        assertXPathExpression(&quot;translate('a', 'b', 'c')&quot;, CoreFunction.class);</span>
<span class="pc bpc" id="L81" title="1 of 2 branches missed.">        assertXPathExpression(&quot;boolean('true')&quot;, CoreFunction.class);</span>
<span class="pc bpc" id="L82" title="1 of 2 branches missed.">        assertXPathExpression(&quot;not(1)&quot;, CoreFunction.class);</span>
<span class="pc bpc" id="L83" title="1 of 2 branches missed.">        assertXPathExpression(&quot;true()&quot;, CoreFunction.class);</span>
<span class="pc bpc" id="L84" title="1 of 2 branches missed.">        assertXPathExpression(&quot;false()&quot;, CoreFunction.class);</span>
<span class="pc bpc" id="L85" title="1 of 2 branches missed.">        assertXPathExpression(&quot;lang('fr')&quot;, CoreFunction.class);</span>
<span class="pc bpc" id="L86" title="1 of 2 branches missed.">        assertXPathExpression(&quot;number('12')&quot;, CoreFunction.class);</span>
<span class="pc bpc" id="L87" title="1 of 2 branches missed.">        assertXPathExpression(&quot;sum(book/price)&quot;, CoreFunction.class);</span>
<span class="pc bpc" id="L88" title="1 of 2 branches missed.">        assertXPathExpression(&quot;floor(11.4)&quot;, CoreFunction.class);</span>
<span class="pc bpc" id="L89" title="1 of 2 branches missed.">        assertXPathExpression(&quot;ceiling(11.4)&quot;, CoreFunction.class);</span>
<span class="pc bpc" id="L90" title="1 of 2 branches missed.">        assertXPathExpression(&quot;round(11.4)&quot;, CoreFunction.class);</span>
<span class="pc bpc" id="L91" title="1 of 2 branches missed.">        assertXPathExpression(&quot;key('title', 'Hobbit')&quot;, CoreFunction.class);</span>
<span class="pc bpc" id="L92" title="1 of 2 branches missed.">        assertXPathExpression(&quot;format-number(12, '##')&quot;, CoreFunction.class);</span>
<span class="fc" id="L93">    }</span>
    
    public void testCoreOperationAnd() {
<span class="pc bpc" id="L96" title="1 of 2 branches missed.">        assertXPathExpression(&quot;2 and 4&quot;, CoreOperationAnd.class);</span>
<span class="pc bpc" id="L97" title="1 of 2 branches missed.">        assertXPathExpression(&quot;2 &gt; 1 and 4 &lt; 5&quot;, CoreOperationAnd.class);</span>
<span class="fc" id="L98">    }</span>
        
    public void testCoreOperationOr() {
<span class="pc bpc" id="L101" title="1 of 2 branches missed.">        assertXPathExpression(&quot;2 or 4&quot;, CoreOperationOr.class);</span>
<span class="pc bpc" id="L102" title="1 of 2 branches missed.">        assertXPathExpression(&quot;2 &gt; 1 or 4 &lt; 5&quot;, CoreOperationOr.class);</span>
<span class="pc bpc" id="L103" title="1 of 2 branches missed.">        assertXPathExpression(&quot;1 &gt; 1 and 2 &lt;= 2 or 3 = 4&quot;, CoreOperationOr.class);</span>
<span class="fc" id="L104">    }</span>

    public void testCoreOperationEqual() {
<span class="pc bpc" id="L107" title="1 of 2 branches missed.">        assertXPathExpression(&quot;2 = 4&quot;, CoreOperationEqual.class);</span>
<span class="pc bpc" id="L108" title="1 of 2 branches missed.">        assertXPathExpression(&quot;2 + 1 = 3&quot;, CoreOperationEqual.class);</span>
<span class="fc" id="L109">    }</span>
    
    public void testCoreOperationNameAttributeTest() {
<span class="pc bpc" id="L112" title="1 of 2 branches missed.">        assertXPathExpression(&quot;@name = 'bar'&quot;, NameAttributeTest.class);</span>
<span class="fc" id="L113">    }</span>

    public void testCoreOperationNotEqual() {
<span class="pc bpc" id="L116" title="1 of 2 branches missed.">        assertXPathExpression(&quot;2 != 4&quot;, CoreOperationNotEqual.class);</span>
<span class="pc bpc" id="L117" title="1 of 2 branches missed.">        assertXPathExpression(&quot;2 + 1 != 3&quot;, CoreOperationNotEqual.class);</span>
<span class="fc" id="L118">    }</span>

    public void testCoreOperationLessThan() {
<span class="pc bpc" id="L121" title="1 of 2 branches missed.">        assertXPathExpression(&quot;3&lt;4&quot;, CoreOperationLessThan.class, &quot;3 &lt; 4&quot;);</span>
<span class="pc bpc" id="L122" title="1 of 2 branches missed.">        assertXPathExpression(&quot;3&lt;(2&gt;=1)&quot;, CoreOperationLessThan.class, &quot;3 &lt; (2 &gt;= 1)&quot;);</span>
<span class="fc" id="L123">    }</span>
    
    public void testCoreOperationLessThanOrEqual() {
<span class="pc bpc" id="L126" title="1 of 2 branches missed.">        assertXPathExpression(&quot;3&lt;=4&quot;, CoreOperationLessThanOrEqual.class, &quot;3 &lt;= 4&quot;);</span>
<span class="pc bpc" id="L127" title="1 of 2 branches missed.">        assertXPathExpression(&quot;3&lt;=(2&gt;=1)&quot;, CoreOperationLessThanOrEqual.class, &quot;3 &lt;= (2 &gt;= 1)&quot;);</span>
<span class="fc" id="L128">    }</span>

    public void testCoreOperationGreaterThan() {
<span class="pc bpc" id="L131" title="1 of 2 branches missed.">        assertXPathExpression(&quot;3&gt;4&quot;, CoreOperationGreaterThan.class, &quot;3 &gt; 4&quot;);</span>
<span class="pc bpc" id="L132" title="1 of 2 branches missed.">        assertXPathExpression(&quot;3&gt;(2&gt;=1)&quot;, CoreOperationGreaterThan.class, &quot;3 &gt; (2 &gt;= 1)&quot;);</span>
<span class="pc bpc" id="L133" title="1 of 2 branches missed.">        assertXPathExpression(&quot;1 &gt; (1 and 2 &lt;= (2 or 3) = 4)&quot;, CoreOperationGreaterThan.class);</span>
<span class="fc" id="L134">    }</span>
    
    public void testCoreOperationGreaterThanOrEqual() {
<span class="pc bpc" id="L137" title="1 of 2 branches missed.">        assertXPathExpression(&quot;3&gt;=4&quot;, CoreOperationGreaterThanOrEqual.class, &quot;3 &gt;= 4&quot;);</span>
<span class="pc bpc" id="L138" title="1 of 2 branches missed.">        assertXPathExpression(&quot;3&gt;=(2&gt;=1)&quot;, CoreOperationGreaterThanOrEqual.class, &quot;3 &gt;= (2 &gt;= 1)&quot;);</span>
<span class="fc" id="L139">    }</span>

    public void testCoreOperationDivide() {
<span class="pc bpc" id="L142" title="1 of 2 branches missed.">        assertXPathExpression(&quot;2 div 4&quot;, CoreOperationDivide.class);</span>
<span class="pc bpc" id="L143" title="1 of 2 branches missed.">        assertXPathExpression(&quot;2|3 div -3&quot;, CoreOperationDivide.class, &quot;2 | 3 div -3&quot;);</span>
<span class="fc" id="L144">    }</span>

    public void testCoreOperationMod() {
<span class="pc bpc" id="L147" title="1 of 2 branches missed.">        assertXPathExpression(&quot;2 mod 4&quot;, CoreOperationMod.class);</span>
<span class="pc bpc" id="L148" title="1 of 2 branches missed.">        assertXPathExpression(&quot;2|3 mod -3&quot;, CoreOperationMod.class, &quot;2 | 3 mod -3&quot;);</span>
<span class="fc" id="L149">    }</span>

    public void testCoreOperationMultiply() {
<span class="pc bpc" id="L152" title="1 of 2 branches missed.">        assertXPathExpression(&quot;2*4&quot;, CoreOperationMultiply.class, &quot;2 * 4&quot;);</span>
<span class="pc bpc" id="L153" title="1 of 2 branches missed.">        assertXPathExpression(&quot;2*(3 + 1)&quot;, CoreOperationMultiply.class, &quot;2 * (3 + 1)&quot;);</span>
<span class="fc" id="L154">    }</span>
    
    public void testCoreOperationMinus() {
<span class="pc bpc" id="L157" title="1 of 2 branches missed.">        assertXPathExpression(&quot;1 - 1&quot;, CoreOperationSubtract.class);</span>
<span class="pc bpc" id="L158" title="1 of 2 branches missed.">        assertXPathExpression(&quot;1 - 1 - 2&quot;, CoreOperationSubtract.class);</span>
<span class="pc bpc" id="L159" title="1 of 2 branches missed.">        assertXPathExpression(&quot;1 - (1 - 2)&quot;, CoreOperationSubtract.class);</span>
<span class="fc" id="L160">    }</span>
    
    public void testCoreOperationSum() {
<span class="pc bpc" id="L163" title="1 of 2 branches missed.">        assertXPathExpression(&quot;3 + 1 + 4&quot;, CoreOperationAdd.class);</span>
<span class="pc bpc" id="L164" title="1 of 2 branches missed.">        assertXPathExpression(&quot;(3 + 1) + 4&quot;, CoreOperationAdd.class, &quot;3 + 1 + 4&quot;);</span>
<span class="pc bpc" id="L165" title="1 of 2 branches missed.">        assertXPathExpression(&quot;3 + (1 + 4)&quot;, CoreOperationAdd.class, &quot;3 + 1 + 4&quot;);</span>
<span class="pc bpc" id="L166" title="1 of 2 branches missed.">        assertXPathExpression(&quot;3 + -1&quot;, CoreOperationAdd.class, &quot;3 + -1&quot;);</span>
<span class="pc bpc" id="L167" title="1 of 2 branches missed.">        assertXPathExpression(&quot;2*-3 + -1&quot;, CoreOperationAdd.class, &quot;2 * -3 + -1&quot;);</span>
<span class="fc" id="L168">    }</span>
    
    public void testCoreOperationUnaryMinus() {
<span class="pc bpc" id="L171" title="1 of 2 branches missed.">        assertXPathExpression(&quot;-3&quot;, CoreOperationNegate.class);</span>
<span class="pc bpc" id="L172" title="1 of 2 branches missed.">        assertXPathExpression(&quot;-(3 + 1)&quot;, CoreOperationNegate.class);</span>
<span class="fc" id="L173">    }</span>

    public void testCoreOperationUnion() {
<span class="pc bpc" id="L176" title="1 of 2 branches missed.">        assertXPathExpression(&quot;3 | 1 | 4&quot;, CoreOperationUnion.class);</span>
<span class="fc" id="L177">    }</span>
    
    public void testExpressionPath() {
<span class="pc bpc" id="L180" title="1 of 2 branches missed.">        assertXPathExpression(&quot;$x/foo/bar&quot;, ExpressionPath.class);</span>
<span class="pc bpc" id="L181" title="1 of 2 branches missed.">        assertXPathExpression(&quot;(2 + 2)/foo/bar&quot;, ExpressionPath.class);</span>
<span class="pc bpc" id="L182" title="1 of 2 branches missed.">        assertXPathExpression(&quot;$x[3][2 + 2]/foo/bar&quot;, ExpressionPath.class);</span>
<span class="fc" id="L183">    }</span>
    
    public void testExtensionFunction() {
<span class="pc bpc" id="L186" title="1 of 2 branches missed.">        assertXPathExpression(&quot;my:function(3, other.function())&quot;, ExtensionFunction.class);</span>
<span class="fc" id="L187">    }</span>
 
    public void testLocationPathAxisSelf() {
<span class="pc bpc" id="L190" title="1 of 2 branches missed.">        assertXPathExpression(&quot;self::foo:bar&quot;, LocationPath.class);</span>
<span class="pc bpc" id="L191" title="1 of 2 branches missed.">        assertXPathExpression(&quot;.&quot;, LocationPath.class);</span>
<span class="fc" id="L192">    }</span>
    
    public void testLocationPathAxisChild() {
<span class="pc bpc" id="L195" title="1 of 2 branches missed.">        assertXPathExpression(&quot;child::foo:bar&quot;, LocationPath.class, &quot;foo:bar&quot;);</span>
<span class="pc bpc" id="L196" title="1 of 2 branches missed.">        assertXPathExpression(&quot;foo:bar&quot;, LocationPath.class);</span>
<span class="pc bpc" id="L197" title="1 of 2 branches missed.">        assertXPathExpression(&quot;/foo:bar&quot;, LocationPath.class);</span>
<span class="pc bpc" id="L198" title="1 of 2 branches missed.">        assertXPathExpression(&quot;/foo/bar&quot;, LocationPath.class);</span>
<span class="pc bpc" id="L199" title="1 of 2 branches missed.">        assertXPathExpression(&quot;*&quot;, LocationPath.class);</span>
<span class="pc bpc" id="L200" title="1 of 2 branches missed.">        assertXPathExpression(&quot;foo:*&quot;, LocationPath.class);</span>
<span class="fc" id="L201">    }</span>
    
    public void testLocationPathAxisParent() {
<span class="pc bpc" id="L204" title="1 of 2 branches missed.">        assertXPathExpression(&quot;parent::foo:bar&quot;, LocationPath.class);</span>
<span class="pc bpc" id="L205" title="1 of 2 branches missed.">        assertXPathExpression(&quot;..&quot;, LocationPath.class);</span>
<span class="fc" id="L206">    }</span>
    
    public void testLocationPathAxisAttribute() {
<span class="pc bpc" id="L209" title="1 of 2 branches missed.">        assertXPathExpression(&quot;attribute::foo:bar&quot;, LocationPath.class, &quot;@foo:bar&quot;);</span>
<span class="pc bpc" id="L210" title="1 of 2 branches missed.">        assertXPathExpression(&quot;@foo:bar&quot;, LocationPath.class);</span>
<span class="pc bpc" id="L211" title="1 of 2 branches missed.">        assertXPathExpression(&quot;../@foo:bar&quot;, LocationPath.class);</span>
<span class="pc bpc" id="L212" title="1 of 2 branches missed.">        assertXPathExpression(&quot;@*&quot;, LocationPath.class);</span>
<span class="pc bpc" id="L213" title="1 of 2 branches missed.">        assertXPathExpression(&quot;@*[last()]&quot;, LocationPath.class);</span>
<span class="fc" id="L214">    }</span>
    
    public void testLocationPathAxisDescendant() {
<span class="pc bpc" id="L217" title="1 of 2 branches missed.">        assertXPathExpression(&quot;descendant::foo:bar&quot;, LocationPath.class);</span>
<span class="fc" id="L218">    }</span>
    
    public void testLocationPathAxisDescendantOrSelf() {
<span class="pc bpc" id="L221" title="1 of 2 branches missed.">        assertXPathExpression(&quot;descendant-or-self::foo:bar&quot;, LocationPath.class);</span>
<span class="pc bpc" id="L222" title="1 of 2 branches missed.">        assertXPathExpression(&quot;//foo&quot;, LocationPath.class);</span>
<span class="pc bpc" id="L223" title="1 of 2 branches missed.">        assertXPathExpression(&quot;foo//bar&quot;, LocationPath.class);</span>
<span class="fc" id="L224">    }</span>
    
    public void testLocationPathAxisOther() {
<span class="pc bpc" id="L227" title="1 of 2 branches missed.">        assertXPathExpression(&quot;ancestor::foo:bar&quot;, LocationPath.class);</span>
<span class="pc bpc" id="L228" title="1 of 2 branches missed.">        assertXPathExpression(&quot;ancestor-or-self::foo:bar&quot;, LocationPath.class);</span>
<span class="pc bpc" id="L229" title="1 of 2 branches missed.">        assertXPathExpression(&quot;namespace::foo:bar&quot;, LocationPath.class);</span>
<span class="pc bpc" id="L230" title="1 of 2 branches missed.">        assertXPathExpression(&quot;preceding::foo:bar&quot;, LocationPath.class);</span>
<span class="pc bpc" id="L231" title="1 of 2 branches missed.">        assertXPathExpression(&quot;preceding-sibling::foo:bar&quot;, LocationPath.class);</span>
<span class="pc bpc" id="L232" title="1 of 2 branches missed.">        assertXPathExpression(&quot;following::foo:bar&quot;, LocationPath.class);</span>
<span class="pc bpc" id="L233" title="1 of 2 branches missed.">        assertXPathExpression(&quot;following-sibling::foo:bar&quot;, LocationPath.class);</span>
<span class="fc" id="L234">    }</span>
    
    public void testLocationPathNodeTest() {
<span class="pc bpc" id="L237" title="1 of 2 branches missed.">        assertXPathExpression(&quot;node()&quot;, LocationPath.class);</span>
<span class="pc bpc" id="L238" title="1 of 2 branches missed.">        assertXPathExpression(&quot;text()&quot;, LocationPath.class);</span>
<span class="pc bpc" id="L239" title="1 of 2 branches missed.">        assertXPathExpression(&quot;comment()&quot;, LocationPath.class);</span>
<span class="pc bpc" id="L240" title="1 of 2 branches missed.">        assertXPathExpression(&quot;processing-instruction()&quot;, LocationPath.class);</span>
<span class="pc bpc" id="L241" title="1 of 2 branches missed.">        assertXPathExpression(&quot;processing-instruction('test')&quot;, LocationPath.class);</span>
<span class="fc" id="L242">    }</span>
    
    public void testVariableReference() {
<span class="pc bpc" id="L245" title="1 of 2 branches missed.">        assertXPathExpression(&quot;$x&quot;, VariableReference.class);</span>
<span class="pc bpc" id="L246" title="1 of 2 branches missed.">        assertXPathExpression(&quot;$x:y&quot;, VariableReference.class);</span>
<span class="fc" id="L247">    }</span>
    
    /**
     * Compiles the xpath into an Expression, checks the expression
     * class, converts the expression to string and checks that the string
     * matches the expected one.
     */
    private void assertXPathExpression(String xpath, Class expectedClass, String expected) {
<span class="fc" id="L255">        JXPathCompiledExpression expression = (JXPathCompiledExpression) JXPathContext.compile(xpath);</span>
        
<span class="fc" id="L257">        assertEquals(&quot;Expression class for &quot; + xpath, expectedClass, expression.getExpression().getClass());</span>
<span class="fc" id="L258">        assertEquals(&quot;Expression toString() for &quot; + xpath, expected, expression.getExpression().toString());</span>
<span class="fc" id="L259">    }</span>
    
    private void assertXPathExpression(String xpath, Class expectedClass) {
<span class="fc" id="L262">        assertXPathExpression(xpath, expectedClass, xpath);</span>
<span class="fc" id="L263">    }</span>
    
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.1.201803210924</span>commons-jxpath (Jan 19, 2019 5:24:34 PM)</div></body></html>